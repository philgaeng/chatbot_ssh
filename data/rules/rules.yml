version: "3.1"

rules:
  # - rule: Ask grievance on session start
  #   steps:
  #     - action: action_session_start
  #     - action: utter_introduce

  - rule : Introduce the bot on session start and ask grievance
    steps:
      # Ensure the bot starts this flow with a trigger or welcome intent
      - intent: introduce
      - action: action_session_start  # Custom action to welcome the user or provide context
      - action: utter_introduce  # Prompt for the grievance process

  # - rule: Start grievance process
  #   steps:
  #     - intent: start_grievance_process
  #     - action: action_start_grievance_process
  #     - action: action_capture_grievance_text  # Align with the story's next step


  - rule: Say goodbye anytime the user says goodbye
    steps:
    - intent: goodbye
    - action: utter_goodbye

  - rule: Respond to user challenge
    steps:
      - intent: bot_challenge
      - action: action_respond_to_challenge

  - rule: Respond to user stating his great mood
    steps:
      - intent: mood_great
      - action: action_handle_mood_great

  - rule: User files the grievance as is
    steps:
      - intent: submit_grievance_as_is
      - action: action_submit_grievance_as_is

  - rule: Set grievance category
    steps:
      - intent: set_category
      - action: action_set_category

  # - rule: Activate grievance form
  #   steps:
  #   - intent: start_grievance_process
  #   - action: grievance_form
  #   - active_loop: grievance_form



  # - rule: Go back to main menu
  #   steps:
  #     - intent: main_menu
  #     - action: utter_main_menu

  # - rule: User restarts the process or story
  #   steps:
  #     - intent: restart_story
  #     - action: action_restart_story

  # - rule: User agrees to provide location details
  #   steps:
  #     - intent: agree
  #     - action: utter_ask_location
  #     - action: location_form
  #     - active_loop: location_form

  # - rule: User denies providing location details
  #   steps:
  #     - intent: deny
  #     - action: utter_skip_location

  # - rule: User agrees to provide contact details
  #   steps:
  #     - intent: agree
  #     - action: utter_ask_optional_details
  #     - action: contact_form
  #     - active_loop: contact_form

  # - rule: User denies providing contact details
  #   steps:
  #     - intent: deny
  #     - action: utter_skip_contact

  # - rule: User skips a follow-up question
  #   steps:
  #     - intent: skip
  #     - action: action_handle_skip
  #     - action: action_capture_grievance_text

