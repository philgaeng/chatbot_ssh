2025-07-30 09:10:04,343 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-07-30 09:10:04,343 - db_manager - INFO - Database manager initialized successfully
2025-07-30 09:10:04,343 - db_manager - INFO - Encryption enabled for sensitive fields
2025-07-30 09:10:04,343 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-07-30 09:10:04,343 - db_manager - INFO - Database manager initialized successfully
2025-07-30 09:10:04,343 - db_manager - INFO - Encryption enabled for sensitive fields
2025-07-30 09:10:04,343 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-07-30 09:10:04,343 - db_manager - INFO - Database manager initialized successfully
2025-07-30 09:10:04,343 - db_manager - INFO - Encryption enabled for sensitive fields
2025-07-30 09:10:04,343 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-07-30 09:10:04,343 - db_manager - INFO - Database manager initialized successfully
2025-07-30 09:10:04,343 - db_manager - INFO - Encryption enabled for sensitive fields
2025-07-30 09:10:04,343 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-07-30 09:10:04,343 - db_manager - INFO - Database manager initialized successfully
2025-07-30 09:10:04,343 - db_manager - INFO - Encryption enabled for sensitive fields
2025-07-30 09:10:04,344 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-07-30 09:10:04,344 - db_manager - INFO - Database manager initialized successfully
2025-07-30 09:10:04,344 - db_manager - INFO - Encryption enabled for sensitive fields
2025-07-30 09:10:04,344 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-07-30 09:10:04,344 - db_manager - INFO - Database manager initialized successfully
2025-07-30 09:10:04,344 - db_manager - INFO - Encryption enabled for sensitive fields
2025-07-30 09:10:04,344 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-07-30 09:10:04,344 - db_manager - INFO - Database manager initialized successfully
2025-07-30 09:10:04,344 - db_manager - INFO - Encryption enabled for sensitive fields
2025-07-30 09:10:04,344 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-07-30 09:10:04,344 - db_manager - INFO - Database manager initialized successfully
2025-07-30 09:10:04,344 - db_manager - INFO - Encryption enabled for sensitive fields
2025-07-30 09:10:04,344 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-07-30 09:10:04,344 - db_manager - INFO - Database manager initialized successfully
2025-07-30 09:10:04,344 - db_manager - INFO - Encryption enabled for sensitive fields
2025-07-30 09:13:11,108 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-07-30 09:13:11,108 - db_manager - INFO - Database manager initialized successfully
2025-07-30 09:13:11,108 - db_manager - INFO - Encryption enabled for sensitive fields
2025-07-30 09:13:11,108 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-07-30 09:13:11,108 - db_manager - INFO - Database manager initialized successfully
2025-07-30 09:13:11,108 - db_manager - INFO - Encryption enabled for sensitive fields
2025-07-30 09:13:11,108 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-07-30 09:13:11,109 - db_manager - INFO - Database manager initialized successfully
2025-07-30 09:13:11,109 - db_manager - INFO - Encryption enabled for sensitive fields
2025-07-30 09:13:11,109 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-07-30 09:13:11,109 - db_manager - INFO - Database manager initialized successfully
2025-07-30 09:13:11,109 - db_manager - INFO - Encryption enabled for sensitive fields
2025-07-30 09:13:11,109 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-07-30 09:13:11,109 - db_manager - INFO - Database manager initialized successfully
2025-07-30 09:13:11,109 - db_manager - INFO - Encryption enabled for sensitive fields
2025-07-30 09:13:11,109 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-07-30 09:13:11,109 - db_manager - INFO - Database manager initialized successfully
2025-07-30 09:13:11,109 - db_manager - INFO - Encryption enabled for sensitive fields
2025-07-30 09:13:11,109 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-07-30 09:13:11,109 - db_manager - INFO - Database manager initialized successfully
2025-07-30 09:13:11,109 - db_manager - INFO - Encryption enabled for sensitive fields
2025-07-30 09:13:11,109 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-07-30 09:13:11,109 - db_manager - INFO - Database manager initialized successfully
2025-07-30 09:13:11,109 - db_manager - INFO - Encryption enabled for sensitive fields
2025-07-30 09:13:11,109 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-07-30 09:13:11,109 - db_manager - INFO - Database manager initialized successfully
2025-07-30 09:13:11,109 - db_manager - INFO - Encryption enabled for sensitive fields
2025-07-30 09:13:11,109 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-07-30 09:13:11,109 - db_manager - INFO - Database manager initialized successfully
2025-07-30 09:13:11,109 - db_manager - INFO - Encryption enabled for sensitive fields
2025-07-30 10:58:59,424 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-07-30 10:58:59,424 - db_manager - INFO - Database manager initialized successfully
2025-07-30 10:58:59,424 - db_manager - INFO - Encryption enabled for sensitive fields
2025-07-30 10:58:59,425 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-07-30 10:58:59,425 - db_manager - INFO - Database manager initialized successfully
2025-07-30 10:58:59,425 - db_manager - INFO - Encryption enabled for sensitive fields
2025-07-30 10:58:59,425 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-07-30 10:58:59,425 - db_manager - INFO - Database manager initialized successfully
2025-07-30 10:58:59,425 - db_manager - INFO - Encryption enabled for sensitive fields
2025-07-30 10:58:59,425 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-07-30 10:58:59,425 - db_manager - INFO - Database manager initialized successfully
2025-07-30 10:58:59,425 - db_manager - INFO - Encryption enabled for sensitive fields
2025-07-30 10:58:59,425 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-07-30 10:58:59,425 - db_manager - INFO - Database manager initialized successfully
2025-07-30 10:58:59,425 - db_manager - INFO - Encryption enabled for sensitive fields
2025-07-30 10:58:59,425 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-07-30 10:58:59,425 - db_manager - INFO - Database manager initialized successfully
2025-07-30 10:58:59,425 - db_manager - INFO - Encryption enabled for sensitive fields
2025-07-30 10:58:59,425 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-07-30 10:58:59,425 - db_manager - INFO - Database manager initialized successfully
2025-07-30 10:58:59,425 - db_manager - INFO - Encryption enabled for sensitive fields
2025-07-30 10:58:59,425 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-07-30 10:58:59,425 - db_manager - INFO - Database manager initialized successfully
2025-07-30 10:58:59,425 - db_manager - INFO - Encryption enabled for sensitive fields
2025-07-30 10:58:59,425 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-07-30 10:58:59,425 - db_manager - INFO - Database manager initialized successfully
2025-07-30 10:58:59,425 - db_manager - INFO - Encryption enabled for sensitive fields
2025-07-30 10:58:59,425 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-07-30 10:58:59,426 - db_manager - INFO - Database manager initialized successfully
2025-07-30 10:58:59,426 - db_manager - INFO - Encryption enabled for sensitive fields
2025-07-30 14:11:08,565 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-07-30 14:11:08,565 - db_manager - INFO - Database manager initialized successfully
2025-07-30 14:11:08,566 - db_manager - INFO - Encryption enabled for sensitive fields
2025-07-30 14:11:08,566 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-07-30 14:11:08,566 - db_manager - INFO - Database manager initialized successfully
2025-07-30 14:11:08,566 - db_manager - INFO - Encryption enabled for sensitive fields
2025-07-30 14:11:08,566 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-07-30 14:11:08,566 - db_manager - INFO - Database manager initialized successfully
2025-07-30 14:11:08,566 - db_manager - INFO - Encryption enabled for sensitive fields
2025-07-30 14:11:08,566 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-07-30 14:11:08,566 - db_manager - INFO - Database manager initialized successfully
2025-07-30 14:11:08,566 - db_manager - INFO - Encryption enabled for sensitive fields
2025-07-30 14:11:08,566 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-07-30 14:11:08,566 - db_manager - INFO - Database manager initialized successfully
2025-07-30 14:11:08,566 - db_manager - INFO - Encryption enabled for sensitive fields
2025-07-30 14:11:08,566 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-07-30 14:11:08,566 - db_manager - INFO - Database manager initialized successfully
2025-07-30 14:11:08,566 - db_manager - INFO - Encryption enabled for sensitive fields
2025-07-30 14:11:08,567 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-07-30 14:11:08,567 - db_manager - INFO - Database manager initialized successfully
2025-07-30 14:11:08,567 - db_manager - INFO - Encryption enabled for sensitive fields
2025-07-30 14:11:08,567 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-07-30 14:11:08,567 - db_manager - INFO - Database manager initialized successfully
2025-07-30 14:11:08,567 - db_manager - INFO - Encryption enabled for sensitive fields
2025-07-30 14:11:08,567 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-07-30 14:11:08,567 - db_manager - INFO - Database manager initialized successfully
2025-07-30 14:11:08,567 - db_manager - INFO - Encryption enabled for sensitive fields
2025-07-30 14:11:08,567 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-07-30 14:11:08,567 - db_manager - INFO - Database manager initialized successfully
2025-07-30 14:11:08,567 - db_manager - INFO - Encryption enabled for sensitive fields
2025-07-30 14:12:16,110 - db_manager - INFO - Connecting to database: grievance_db
2025-07-30 14:12:16,117 - db_manager - INFO - Starting database transaction
2025-07-30 14:12:16,117 - db_manager - INFO - Executing get_complainant_by_id: 
            SELECT complainant_id, complainant_unique_id, complainant_full_name,    complainant_pho...
2025-07-30 14:12:16,125 - db_manager - INFO - get_complainant_by_id completed in 0.01s. Rows: 0
2025-07-30 14:12:16,125 - db_manager - INFO - Transaction committed successfully
2025-07-30 14:12:16,125 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-07-30 14:12:16,125 - db_manager - ERROR - Error submitting grievance to db: Complainant ID is missing: Not provided
2025-07-30 14:12:16,126 - db_manager - INFO - Connecting to database: grievance_db
2025-07-30 14:12:16,131 - db_manager - INFO - Starting database transaction
2025-07-30 14:12:16,131 - db_manager - INFO - Executing get_grievance_files: 
            SELECT file_id, file_name, file_type, file_size, upload_timestamp
            FROM file...
2025-07-30 14:12:16,135 - db_manager - INFO - get_grievance_files completed in 0.01s. Rows: 0
2025-07-30 14:12:16,135 - db_manager - INFO - Transaction committed successfully
2025-07-30 14:12:16,136 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-07-30 14:12:16,136 - db_manager - INFO - Connecting to database: grievance_db
2025-07-30 14:12:16,141 - db_manager - INFO - Starting database transaction
2025-07-30 14:12:16,142 - db_manager - INFO - Executing get_grievance_files: 
            SELECT file_id, file_name, file_type, file_size, upload_timestamp
            FROM file...
2025-07-30 14:12:16,143 - db_manager - INFO - get_grievance_files completed in 0.01s. Rows: 0
2025-07-30 14:12:16,143 - db_manager - INFO - Transaction committed successfully
2025-07-30 14:12:16,143 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-07-30 14:12:16,144 - db_manager - INFO - Connecting to database: grievance_db
2025-07-30 14:12:16,149 - db_manager - INFO - Starting database transaction
2025-07-30 14:12:16,149 - db_manager - INFO - Executing get_grievance_files: 
            SELECT file_id, file_name, file_type, file_size, upload_timestamp
            FROM file...
2025-07-30 14:12:16,150 - db_manager - INFO - get_grievance_files completed in 0.01s. Rows: 0
2025-07-30 14:12:16,150 - db_manager - INFO - Transaction committed successfully
2025-07-30 14:12:16,150 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-07-30 14:23:14,691 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-07-30 14:23:14,692 - db_manager - INFO - Database manager initialized successfully
2025-07-30 14:23:14,692 - db_manager - INFO - Encryption enabled for sensitive fields
2025-07-30 14:23:14,692 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-07-30 14:23:14,692 - db_manager - INFO - Database manager initialized successfully
2025-07-30 14:23:14,692 - db_manager - INFO - Encryption enabled for sensitive fields
2025-07-30 14:23:14,692 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-07-30 14:23:14,693 - db_manager - INFO - Database manager initialized successfully
2025-07-30 14:23:14,693 - db_manager - INFO - Encryption enabled for sensitive fields
2025-07-30 14:23:14,693 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-07-30 14:23:14,693 - db_manager - INFO - Database manager initialized successfully
2025-07-30 14:23:14,693 - db_manager - INFO - Encryption enabled for sensitive fields
2025-07-30 14:23:14,693 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-07-30 14:23:14,693 - db_manager - INFO - Database manager initialized successfully
2025-07-30 14:23:14,693 - db_manager - INFO - Encryption enabled for sensitive fields
2025-07-30 14:23:14,693 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-07-30 14:23:14,693 - db_manager - INFO - Database manager initialized successfully
2025-07-30 14:23:14,693 - db_manager - INFO - Encryption enabled for sensitive fields
2025-07-30 14:23:14,693 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-07-30 14:23:14,693 - db_manager - INFO - Database manager initialized successfully
2025-07-30 14:23:14,693 - db_manager - INFO - Encryption enabled for sensitive fields
2025-07-30 14:23:14,693 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-07-30 14:23:14,693 - db_manager - INFO - Database manager initialized successfully
2025-07-30 14:23:14,693 - db_manager - INFO - Encryption enabled for sensitive fields
2025-07-30 14:23:14,693 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-07-30 14:23:14,693 - db_manager - INFO - Database manager initialized successfully
2025-07-30 14:23:14,693 - db_manager - INFO - Encryption enabled for sensitive fields
2025-07-30 14:23:14,693 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-07-30 14:23:14,693 - db_manager - INFO - Database manager initialized successfully
2025-07-30 14:23:14,693 - db_manager - INFO - Encryption enabled for sensitive fields
2025-07-30 14:24:08,157 - db_manager - INFO - create_complainant: Creating complainant with ID: CM-20250730-KOJH-3CB8-B
2025-07-30 14:24:08,158 - db_manager - ERROR - Error in create_complainant: 'complainant_phone'
2025-07-30 14:24:08,158 - db_manager - ERROR - Traceback: Traceback (most recent call last):
  File "/home/philg/projects/nepal_chatbot/backend/services/database_services/complainant_manager.py", line 130, in create_complainant
    if data['complainant_phone']:
KeyError: 'complainant_phone'

2025-07-30 14:24:08,158 - db_manager - INFO - create_grievance: Creating grievance with data: {'grievance_id': 'GR-20250730-KOJH-4E1A-B', 'complainant_id': 'CM-20250730-KOJH-3CB8-B', 'grievance_description': 'dust everywhere\nsick kids\nneed to go to hospital', 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_office': None, 'source': 'bot', 'complainant_unique_id': 'CM-20250730-KOJH-3CB8-B'}
2025-07-30 14:24:08,158 - db_manager - INFO - create_grievance: Creating grievance with ID: GR-20250730-KOJH-4E1A-B
2025-07-30 14:24:08,158 - db_manager - DEBUG - query_keys at generate_query_string: dict_keys(['grievance_id', 'complainant_id', 'grievance_description', 'source'])
2025-07-30 14:24:08,158 - db_manager - DEBUG - Generated query: INSERT INTO grievances (grievance_id, complainant_id, grievance_description, source) VALUES (%s, %s, %s, %s) RETURNING grievance_id
2025-07-30 14:24:08,158 - db_manager - DEBUG - len of query_keys: 4
2025-07-30 14:24:08,158 - db_manager - DEBUG - Generated query: INSERT INTO grievances (grievance_id, complainant_id, grievance_description, source) VALUES (%s, %s, %s, %s) RETURNING grievance_id
2025-07-30 14:24:08,158 - db_manager - INFO - Connecting to database: grievance_db
2025-07-30 14:24:08,164 - db_manager - INFO - Starting database transaction
2025-07-30 14:24:08,172 - db_manager - ERROR - Transaction rolled back: insert or update on table "grievances" violates foreign key constraint "grievances_complainant_id_fkey"
DETAIL:  Key (complainant_id)=(CM-20250730-KOJH-3CB8-B) is not present in table "complainants".

2025-07-30 14:24:08,172 - db_manager - ERROR - Database connection error: Transaction failed: insert or update on table "grievances" violates foreign key constraint "grievances_complainant_id_fkey"
DETAIL:  Key (complainant_id)=(CM-20250730-KOJH-3CB8-B) is not present in table "complainants".

2025-07-30 14:24:08,172 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-07-30 14:24:08,172 - db_manager - ERROR - insert failed: Failed to connect to database: Transaction failed: insert or update on table "grievances" violates foreign key constraint "grievances_complainant_id_fkey"
DETAIL:  Key (complainant_id)=(CM-20250730-KOJH-3CB8-B) is not present in table "complainants".

2025-07-30 14:24:08,172 - db_manager - ERROR - Error in create_grievance: insert execution failed: Failed to connect to database: Transaction failed: insert or update on table "grievances" violates foreign key constraint "grievances_complainant_id_fkey"
DETAIL:  Key (complainant_id)=(CM-20250730-KOJH-3CB8-B) is not present in table "complainants".

2025-07-30 14:24:08,175 - db_manager - ERROR - Traceback: Traceback (most recent call last):
  File "/home/philg/projects/nepal_chatbot/backend/services/database_services/base_manager.py", line 92, in transaction
    yield conn
  File "/home/philg/projects/nepal_chatbot/backend/services/database_services/base_manager.py", line 173, in execute_insert
    cur.execute(query, values)
  File "/home/philg/miniconda/envs/rasa-env-21/lib/python3.10/site-packages/psycopg2/extras.py", line 146, in execute
    return super().execute(query, vars)
psycopg2.errors.ForeignKeyViolation: insert or update on table "grievances" violates foreign key constraint "grievances_complainant_id_fkey"
DETAIL:  Key (complainant_id)=(CM-20250730-KOJH-3CB8-B) is not present in table "complainants".


During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/philg/projects/nepal_chatbot/backend/services/database_services/base_manager.py", line 76, in get_connection
    yield conn
  File "/home/philg/projects/nepal_chatbot/backend/services/database_services/base_manager.py", line 98, in transaction
    raise DatabaseQueryError(f"Transaction failed: {str(e)}")
backend.services.database_services.base_manager.DatabaseQueryError: Transaction failed: insert or update on table "grievances" violates foreign key constraint "grievances_complainant_id_fkey"
DETAIL:  Key (complainant_id)=(CM-20250730-KOJH-3CB8-B) is not present in table "complainants".


During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/philg/projects/nepal_chatbot/backend/services/database_services/base_manager.py", line 171, in execute_insert
    with self.transaction() as conn:
  File "/home/philg/miniconda/envs/rasa-env-21/lib/python3.10/contextlib.py", line 153, in __exit__
    self.gen.throw(typ, value, traceback)
  File "/home/philg/projects/nepal_chatbot/backend/services/database_services/base_manager.py", line 89, in transaction
    with self.get_connection() as conn:
  File "/home/philg/miniconda/envs/rasa-env-21/lib/python3.10/contextlib.py", line 153, in __exit__
    self.gen.throw(typ, value, traceback)
  File "/home/philg/projects/nepal_chatbot/backend/services/database_services/base_manager.py", line 79, in get_connection
    raise DatabaseConnectionError(f"Failed to connect to database: {str(e)}")
backend.services.database_services.base_manager.DatabaseConnectionError: Failed to connect to database: Transaction failed: insert or update on table "grievances" violates foreign key constraint "grievances_complainant_id_fkey"
DETAIL:  Key (complainant_id)=(CM-20250730-KOJH-3CB8-B) is not present in table "complainants".


During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/philg/projects/nepal_chatbot/backend/services/database_services/grievance_manager.py", line 48, in create_grievance
    self.execute_insert(table_name='grievances', input_data=data, allowed_fields=allowed_fields, returning = 'grievance_id')
  File "/home/philg/projects/nepal_chatbot/backend/services/database_services/base_manager.py", line 182, in execute_insert
    raise DatabaseQueryError(f"insert execution failed: {str(e)}")
backend.services.database_services.base_manager.DatabaseQueryError: insert execution failed: Failed to connect to database: Transaction failed: insert or update on table "grievances" violates foreign key constraint "grievances_complainant_id_fkey"
DETAIL:  Key (complainant_id)=(CM-20250730-KOJH-3CB8-B) is not present in table "complainants".


2025-07-30 14:24:09,871 - db_manager - INFO - Connecting to database: grievance_db
2025-07-30 14:24:09,876 - db_manager - INFO - Starting database transaction
2025-07-30 14:24:09,876 - db_manager - INFO - Executing get_complainant_by_id: 
            SELECT complainant_id, complainant_unique_id, complainant_full_name,    complainant_pho...
2025-07-30 14:24:09,878 - db_manager - INFO - get_complainant_by_id completed in 0.01s. Rows: 0
2025-07-30 14:24:09,878 - db_manager - INFO - Transaction committed successfully
2025-07-30 14:24:09,878 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-07-30 14:24:09,878 - db_manager - ERROR - Error - submitting_grievance_to_db: complainant_id not found in db: CM-20250730-KOJH-3CB8-B
2025-07-30 14:24:09,878 - db_manager - INFO - Connecting to database: grievance_db
2025-07-30 14:24:09,882 - db_manager - INFO - Starting database transaction
2025-07-30 14:24:09,882 - db_manager - INFO - Executing get_grievance_files: 
            SELECT file_id, file_name, file_type, file_size, upload_timestamp
            FROM file...
2025-07-30 14:24:09,883 - db_manager - INFO - get_grievance_files completed in 0.01s. Rows: 0
2025-07-30 14:24:09,883 - db_manager - INFO - Transaction committed successfully
2025-07-30 14:24:09,884 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-07-30 14:24:09,884 - db_manager - INFO - Connecting to database: grievance_db
2025-07-30 14:24:09,888 - db_manager - INFO - Starting database transaction
2025-07-30 14:24:09,889 - db_manager - INFO - Executing get_grievance_files: 
            SELECT file_id, file_name, file_type, file_size, upload_timestamp
            FROM file...
2025-07-30 14:24:09,890 - db_manager - INFO - get_grievance_files completed in 0.01s. Rows: 0
2025-07-30 14:24:09,890 - db_manager - INFO - Transaction committed successfully
2025-07-30 14:24:09,890 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-07-30 14:24:09,890 - db_manager - INFO - Connecting to database: grievance_db
2025-07-30 14:24:09,895 - db_manager - INFO - Starting database transaction
2025-07-30 14:24:09,895 - db_manager - INFO - Executing get_grievance_files: 
            SELECT file_id, file_name, file_type, file_size, upload_timestamp
            FROM file...
2025-07-30 14:24:09,896 - db_manager - INFO - get_grievance_files completed in 0.01s. Rows: 0
2025-07-30 14:24:09,896 - db_manager - INFO - Transaction committed successfully
2025-07-30 14:24:09,897 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-07-30 14:33:09,292 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-07-30 14:33:09,293 - db_manager - INFO - Database manager initialized successfully
2025-07-30 14:33:09,293 - db_manager - INFO - Encryption enabled for sensitive fields
2025-07-30 14:33:09,293 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-07-30 14:33:09,293 - db_manager - INFO - Database manager initialized successfully
2025-07-30 14:33:09,293 - db_manager - INFO - Encryption enabled for sensitive fields
2025-07-30 14:33:09,293 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-07-30 14:33:09,293 - db_manager - INFO - Database manager initialized successfully
2025-07-30 14:33:09,293 - db_manager - INFO - Encryption enabled for sensitive fields
2025-07-30 14:33:09,293 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-07-30 14:33:09,293 - db_manager - INFO - Database manager initialized successfully
2025-07-30 14:33:09,293 - db_manager - INFO - Encryption enabled for sensitive fields
2025-07-30 14:33:09,294 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-07-30 14:33:09,294 - db_manager - INFO - Database manager initialized successfully
2025-07-30 14:33:09,294 - db_manager - INFO - Encryption enabled for sensitive fields
2025-07-30 14:33:09,294 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-07-30 14:33:09,294 - db_manager - INFO - Database manager initialized successfully
2025-07-30 14:33:09,294 - db_manager - INFO - Encryption enabled for sensitive fields
2025-07-30 14:33:09,294 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-07-30 14:33:09,294 - db_manager - INFO - Database manager initialized successfully
2025-07-30 14:33:09,294 - db_manager - INFO - Encryption enabled for sensitive fields
2025-07-30 14:33:09,294 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-07-30 14:33:09,294 - db_manager - INFO - Database manager initialized successfully
2025-07-30 14:33:09,294 - db_manager - INFO - Encryption enabled for sensitive fields
2025-07-30 14:33:09,294 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-07-30 14:33:09,294 - db_manager - INFO - Database manager initialized successfully
2025-07-30 14:33:09,294 - db_manager - INFO - Encryption enabled for sensitive fields
2025-07-30 14:33:09,294 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-07-30 14:33:09,294 - db_manager - INFO - Database manager initialized successfully
2025-07-30 14:33:09,294 - db_manager - INFO - Encryption enabled for sensitive fields
2025-07-30 14:34:09,375 - db_manager - INFO - create_complainant: Creating complainant with ID: CM-20250730-KOJH-036C-B
2025-07-30 14:34:09,376 - db_manager - DEBUG - encrypted and hashed data at encrypt_and_hash_sensitive_data: {'complainant_id': 'CM-20250730-KOJH-036C-B', 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_unique_id': 'CM-20250730-KOJH-036C-B'}
2025-07-30 14:34:09,376 - db_manager - DEBUG - query_keys at generate_query_string: dict_keys(['complainant_id', 'complainant_province', 'complainant_district', 'complainant_unique_id'])
2025-07-30 14:34:09,376 - db_manager - DEBUG - Generated query: INSERT INTO complainants (complainant_id, complainant_province, complainant_district, complainant_unique_id) VALUES (%s, %s, %s, %s)
2025-07-30 14:34:09,376 - db_manager - DEBUG - len of query_keys: 4
2025-07-30 14:34:09,376 - db_manager - DEBUG - Generated query: INSERT INTO complainants (complainant_id, complainant_province, complainant_district, complainant_unique_id) VALUES (%s, %s, %s, %s)
2025-07-30 14:34:09,376 - db_manager - INFO - Connecting to database: grievance_db
2025-07-30 14:34:09,382 - db_manager - INFO - Starting database transaction
2025-07-30 14:34:09,385 - db_manager - INFO - Transaction committed successfully
2025-07-30 14:34:09,385 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-07-30 14:34:09,385 - db_manager - INFO - create_complainant: Successfully created complainant with ID: CM-20250730-KOJH-036C-B
2025-07-30 14:34:09,385 - db_manager - INFO - create_grievance: Creating grievance with data: {'grievance_id': 'GR-20250730-KOJH-9D50-B', 'complainant_id': 'CM-20250730-KOJH-036C-B', 'grievance_description': 'dust everywhere\nkids sick\ngo to hospital\nbut no money', 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_office': None, 'source': 'bot', 'complainant_unique_id': 'CM-20250730-KOJH-036C-B'}
2025-07-30 14:34:09,385 - db_manager - INFO - create_grievance: Creating grievance with ID: GR-20250730-KOJH-9D50-B
2025-07-30 14:34:09,385 - db_manager - DEBUG - query_keys at generate_query_string: dict_keys(['grievance_id', 'complainant_id', 'grievance_description', 'source'])
2025-07-30 14:34:09,385 - db_manager - DEBUG - Generated query: INSERT INTO grievances (grievance_id, complainant_id, grievance_description, source) VALUES (%s, %s, %s, %s) RETURNING grievance_id
2025-07-30 14:34:09,385 - db_manager - DEBUG - len of query_keys: 4
2025-07-30 14:34:09,385 - db_manager - DEBUG - Generated query: INSERT INTO grievances (grievance_id, complainant_id, grievance_description, source) VALUES (%s, %s, %s, %s) RETURNING grievance_id
2025-07-30 14:34:09,385 - db_manager - INFO - Connecting to database: grievance_db
2025-07-30 14:34:09,390 - db_manager - INFO - Starting database transaction
2025-07-30 14:34:09,394 - db_manager - INFO - Transaction committed successfully
2025-07-30 14:34:09,394 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-07-30 14:34:09,394 - db_manager - INFO - create_grievance: Successfully created grievance with ID: GR-20250730-KOJH-9D50-B
2025-07-30 14:34:10,726 - db_manager - INFO - Connecting to database: grievance_db
2025-07-30 14:34:10,732 - db_manager - INFO - Starting database transaction
2025-07-30 14:34:10,732 - db_manager - INFO - Executing get_complainant_by_id: 
            SELECT complainant_id, complainant_unique_id, complainant_full_name,    complainant_pho...
2025-07-30 14:34:10,733 - db_manager - INFO - get_complainant_by_id completed in 0.01s. Rows: 1
2025-07-30 14:34:10,733 - db_manager - INFO - Transaction committed successfully
2025-07-30 14:34:10,733 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-07-30 14:34:10,733 - db_manager - INFO - Connecting to database: grievance_db
2025-07-30 14:34:10,738 - db_manager - INFO - Starting database transaction
2025-07-30 14:34:10,738 - db_manager - INFO - Executing get_grievance_by_id: 
                SELECT g.*, c.complainant_full_name, c.complainant_phone, c.complainant_email,
    ...
2025-07-30 14:34:10,742 - db_manager - INFO - get_grievance_by_id completed in 0.01s. Rows: 1
2025-07-30 14:34:10,742 - db_manager - INFO - Transaction committed successfully
2025-07-30 14:34:10,742 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-07-30 14:34:10,742 - db_manager - INFO - update_complainant: Updating complainant with ID: CM-20250730-KOJH-036C-B
2025-07-30 14:34:10,743 - db_manager - INFO - Connecting to database: grievance_db
2025-07-30 14:34:10,747 - db_manager - INFO - Starting database transaction
2025-07-30 14:34:10,747 - db_manager - INFO - Executing encrypt_field: SELECT encode(pgp_sym_encrypt(%s, %s), 'hex') AS encrypted...
2025-07-30 14:34:10,751 - db_manager - INFO - encrypt_field completed in 0.01s. Rows: 1
2025-07-30 14:34:10,751 - db_manager - INFO - Transaction committed successfully
2025-07-30 14:34:10,751 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-07-30 14:34:10,751 - db_manager - INFO - Connecting to database: grievance_db
2025-07-30 14:34:10,755 - db_manager - INFO - Starting database transaction
2025-07-30 14:34:10,756 - db_manager - INFO - Executing encrypt_field: SELECT encode(pgp_sym_encrypt(%s, %s), 'hex') AS encrypted...
2025-07-30 14:34:10,756 - db_manager - INFO - encrypt_field completed in 0.01s. Rows: 1
2025-07-30 14:34:10,757 - db_manager - INFO - Transaction committed successfully
2025-07-30 14:34:10,757 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-07-30 14:34:10,757 - db_manager - INFO - Connecting to database: grievance_db
2025-07-30 14:34:10,761 - db_manager - INFO - Starting database transaction
2025-07-30 14:34:10,761 - db_manager - INFO - Executing encrypt_field: SELECT encode(pgp_sym_encrypt(%s, %s), 'hex') AS encrypted...
2025-07-30 14:34:10,762 - db_manager - INFO - encrypt_field completed in 0.00s. Rows: 1
2025-07-30 14:34:10,762 - db_manager - INFO - Transaction committed successfully
2025-07-30 14:34:10,762 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-07-30 14:34:10,762 - db_manager - DEBUG - encrypted phone number Not provided at encrypt_complainant_data: c30d0407030229c797d05ad5138673d23d01e2a7181e597e691f8f4240f66e066556a69d357dc61a5b810fa0f5d693b26a47704fb704cfcaf1bce20c2858dec731253bc33bd4853423301006f1f5
2025-07-30 14:34:10,762 - db_manager - DEBUG - phone number Not provided hashed to d83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f at hash_sensitive_data
2025-07-30 14:34:10,762 - db_manager - DEBUG - encrypted and hashed data at encrypt_and_hash_sensitive_data: {'complainant_full_name': 'c30d04070302fb136488b8fceca66dd23d0182fe8cf415dfcca43cc484e460cdc6f92b50dbc9616bfe9b6a19a2dccaad6f170d40d52ae39126efc73eb3da3c86b724570125bb37c2909fd8e965d3', 'complainant_phone': 'c30d0407030229c797d05ad5138673d23d01e2a7181e597e691f8f4240f66e066556a69d357dc61a5b810fa0f5d693b26a47704fb704cfcaf1bce20c2858dec731253bc33bd4853423301006f1f5', 'complainant_email': 'c30d040703028b1517e2684105d26ed23d01ddd69b30a080775492442bf0260f7f513a724657bcee35017f8552af1fab3282ec023ddc10d0ff2332e57f1964e98afe4a76c355940f8e3edbe39f9b', 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_full_name_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'complainant_email_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'complainant_phone_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f'}
2025-07-30 14:34:10,762 - db_manager - DEBUG - encrypted_data at update_complainant: {'complainant_full_name': 'c30d04070302fb136488b8fceca66dd23d0182fe8cf415dfcca43cc484e460cdc6f92b50dbc9616bfe9b6a19a2dccaad6f170d40d52ae39126efc73eb3da3c86b724570125bb37c2909fd8e965d3', 'complainant_phone': 'c30d0407030229c797d05ad5138673d23d01e2a7181e597e691f8f4240f66e066556a69d357dc61a5b810fa0f5d693b26a47704fb704cfcaf1bce20c2858dec731253bc33bd4853423301006f1f5', 'complainant_email': 'c30d040703028b1517e2684105d26ed23d01ddd69b30a080775492442bf0260f7f513a724657bcee35017f8552af1fab3282ec023ddc10d0ff2332e57f1964e98afe4a76c355940f8e3edbe39f9b', 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_full_name_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'complainant_email_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'complainant_phone_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f'}
2025-07-30 14:34:10,762 - db_manager - DEBUG - execute_update values: ('c30d04070302fb136488b8fceca66dd23d0182fe8cf415dfcca43cc484e460cdc6f92b50dbc9616bfe9b6a19a2dccaad6f170d40d52ae39126efc73eb3da3c86b724570125bb37c2909fd8e965d3', 'c30d0407030229c797d05ad5138673d23d01e2a7181e597e691f8f4240f66e066556a69d357dc61a5b810fa0f5d693b26a47704fb704cfcaf1bce20c2858dec731253bc33bd4853423301006f1f5', 'c30d040703028b1517e2684105d26ed23d01ddd69b30a080775492442bf0260f7f513a724657bcee35017f8552af1fab3282ec023ddc10d0ff2332e57f1964e98afe4a76c355940f8e3edbe39f9b', 'Koshi', 'Jhapa', 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'CM-20250730-KOJH-036C-B')
2025-07-30 14:34:10,762 - db_manager - DEBUG - execute_update query: UPDATE complainants SET complainant_full_name = %s, complainant_phone = %s, complainant_email = %s, complainant_province = %s, complainant_district = %s, complainant_full_name_hash = %s, complainant_email_hash = %s, complainant_phone_hash = %s WHERE complainant_id = %s
2025-07-30 14:34:10,762 - db_manager - INFO - Connecting to database: grievance_db
2025-07-30 14:34:10,766 - db_manager - INFO - Starting database transaction
2025-07-30 14:34:10,767 - db_manager - INFO - execute_update: Executing update query: UPDATE complainants SET complainant_full_name = %s, complainant_phone = %s, complainant_email = %s, ...
2025-07-30 14:34:10,768 - db_manager - INFO - execute_update: Update completed in 0.01s. Affected rows: 1
2025-07-30 14:34:10,770 - db_manager - INFO - Transaction committed successfully
2025-07-30 14:34:10,770 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-07-30 14:34:10,770 - db_manager - INFO - Complainant updated in db: CM-20250730-KOJH-036C-B
2025-07-30 14:34:10,770 - db_manager - INFO - update_grievance: Updating grievance with ID: GR-20250730-KOJH-9D50-B
2025-07-30 14:34:10,770 - db_manager - DEBUG - execute_update values: ('Not provided', 'Not provided', 'dust everywhere\nkids sick\ngo to hospital\nbut no money', None, None, 'ne', 'GR-20250730-KOJH-9D50-B')
2025-07-30 14:34:10,770 - db_manager - DEBUG - execute_update query: 
                    UPDATE grievances 
                    SET grievance_categories = %s,
                        grievance_summary = %s,
                        grievance_description = %s,
                        grievance_claimed_amount = %s,
                        grievance_location = %s,
                        language_code = %s,
                        grievance_modification_date = CURRENT_TIMESTAMP
                    WHERE grievance_id = %s
                    RETURNING grievance_id
                
2025-07-30 14:34:10,770 - db_manager - INFO - Connecting to database: grievance_db
2025-07-30 14:34:10,774 - db_manager - INFO - Starting database transaction
2025-07-30 14:34:10,774 - db_manager - INFO - execute_update: Executing update query: 
                    UPDATE grievances 
                    SET grievance_categories = %s,
         ...
2025-07-30 14:34:10,775 - db_manager - INFO - execute_update: Update completed in 0.01s. Affected rows: 1
2025-07-30 14:34:10,777 - db_manager - INFO - Transaction committed successfully
2025-07-30 14:34:10,777 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-07-30 14:34:10,777 - db_manager - INFO - update_grievance: Updated grievance with ID: GR-20250730-KOJH-9D50-B, rows affected: 1
2025-07-30 14:34:10,777 - db_manager - INFO - Grievance updated in db: GR-20250730-KOJH-9D50-B
2025-07-30 14:34:10,777 - db_manager - INFO - Connecting to database: grievance_db
2025-07-30 14:34:10,782 - db_manager - INFO - Starting database transaction
2025-07-30 14:34:10,782 - db_manager - INFO - Executing get_grievance_files: 
            SELECT file_id, file_name, file_type, file_size, upload_timestamp
            FROM file...
2025-07-30 14:34:10,783 - db_manager - INFO - get_grievance_files completed in 0.01s. Rows: 0
2025-07-30 14:34:10,783 - db_manager - INFO - Transaction committed successfully
2025-07-30 14:34:10,783 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-07-30 14:34:10,783 - db_manager - INFO - Connecting to database: grievance_db
2025-07-30 14:34:10,787 - db_manager - INFO - Starting database transaction
2025-07-30 14:34:10,787 - db_manager - INFO - Executing get_grievance_files: 
            SELECT file_id, file_name, file_type, file_size, upload_timestamp
            FROM file...
2025-07-30 14:34:10,788 - db_manager - INFO - get_grievance_files completed in 0.01s. Rows: 0
2025-07-30 14:34:10,789 - db_manager - INFO - Transaction committed successfully
2025-07-30 14:34:10,789 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-07-30 14:34:10,789 - db_manager - INFO - Connecting to database: grievance_db
2025-07-30 14:34:10,793 - db_manager - INFO - Starting database transaction
2025-07-30 14:34:10,793 - db_manager - INFO - Executing get_grievance_files: 
            SELECT file_id, file_name, file_type, file_size, upload_timestamp
            FROM file...
2025-07-30 14:34:10,794 - db_manager - INFO - get_grievance_files completed in 0.01s. Rows: 0
2025-07-30 14:34:10,794 - db_manager - INFO - Transaction committed successfully
2025-07-30 14:34:10,794 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-07-30 14:45:27,795 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-07-30 14:45:27,796 - db_manager - INFO - Database manager initialized successfully
2025-07-30 14:45:27,796 - db_manager - INFO - Encryption enabled for sensitive fields
2025-07-30 14:45:27,796 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-07-30 14:45:27,796 - db_manager - INFO - Database manager initialized successfully
2025-07-30 14:45:27,796 - db_manager - INFO - Encryption enabled for sensitive fields
2025-07-30 14:45:27,796 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-07-30 14:45:27,796 - db_manager - INFO - Database manager initialized successfully
2025-07-30 14:45:27,796 - db_manager - INFO - Encryption enabled for sensitive fields
2025-07-30 14:45:27,796 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-07-30 14:45:27,796 - db_manager - INFO - Database manager initialized successfully
2025-07-30 14:45:27,796 - db_manager - INFO - Encryption enabled for sensitive fields
2025-07-30 14:45:27,797 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-07-30 14:45:27,797 - db_manager - INFO - Database manager initialized successfully
2025-07-30 14:45:27,797 - db_manager - INFO - Encryption enabled for sensitive fields
2025-07-30 14:45:27,797 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-07-30 14:45:27,797 - db_manager - INFO - Database manager initialized successfully
2025-07-30 14:45:27,797 - db_manager - INFO - Encryption enabled for sensitive fields
2025-07-30 14:45:27,797 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-07-30 14:45:27,797 - db_manager - INFO - Database manager initialized successfully
2025-07-30 14:45:27,797 - db_manager - INFO - Encryption enabled for sensitive fields
2025-07-30 14:45:27,797 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-07-30 14:45:27,797 - db_manager - INFO - Database manager initialized successfully
2025-07-30 14:45:27,797 - db_manager - INFO - Encryption enabled for sensitive fields
2025-07-30 14:45:27,797 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-07-30 14:45:27,797 - db_manager - INFO - Database manager initialized successfully
2025-07-30 14:45:27,797 - db_manager - INFO - Encryption enabled for sensitive fields
2025-07-30 14:45:27,797 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-07-30 14:45:27,797 - db_manager - INFO - Database manager initialized successfully
2025-07-30 14:45:27,797 - db_manager - INFO - Encryption enabled for sensitive fields
2025-07-30 14:46:03,473 - db_manager - INFO - create_complainant: Creating complainant with ID: CM-20250730-KOJH-0CE3-B
2025-07-30 14:46:03,473 - db_manager - DEBUG - encrypted and hashed data at encrypt_and_hash_sensitive_data: {'complainant_id': 'CM-20250730-KOJH-0CE3-B', 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_unique_id': 'CM-20250730-KOJH-0CE3-B'}
2025-07-30 14:46:03,473 - db_manager - DEBUG - query_keys at generate_query_string: dict_keys(['complainant_id', 'complainant_province', 'complainant_district', 'complainant_unique_id'])
2025-07-30 14:46:03,473 - db_manager - DEBUG - Generated query: INSERT INTO complainants (complainant_id, complainant_province, complainant_district, complainant_unique_id) VALUES (%s, %s, %s, %s)
2025-07-30 14:46:03,473 - db_manager - DEBUG - len of query_keys: 4
2025-07-30 14:46:03,473 - db_manager - DEBUG - Generated query: INSERT INTO complainants (complainant_id, complainant_province, complainant_district, complainant_unique_id) VALUES (%s, %s, %s, %s)
2025-07-30 14:46:03,474 - db_manager - INFO - Connecting to database: grievance_db
2025-07-30 14:46:03,479 - db_manager - INFO - Starting database transaction
2025-07-30 14:46:03,482 - db_manager - INFO - Transaction committed successfully
2025-07-30 14:46:03,482 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-07-30 14:46:03,482 - db_manager - INFO - create_complainant: Successfully created complainant with ID: CM-20250730-KOJH-0CE3-B
2025-07-30 14:46:03,482 - db_manager - INFO - create_grievance: Creating grievance with data: {'grievance_id': 'GR-20250730-KOJH-52C6-B', 'complainant_id': 'CM-20250730-KOJH-0CE3-B', 'grievance_description': 'dust everywhere\nkids sick\ngo to hospital\nbut no money', 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_office': None, 'source': 'bot', 'complainant_unique_id': 'CM-20250730-KOJH-0CE3-B'}
2025-07-30 14:46:03,482 - db_manager - INFO - create_grievance: Creating grievance with ID: GR-20250730-KOJH-52C6-B
2025-07-30 14:46:03,482 - db_manager - DEBUG - query_keys at generate_query_string: dict_keys(['grievance_id', 'complainant_id', 'grievance_description', 'source'])
2025-07-30 14:46:03,482 - db_manager - DEBUG - Generated query: INSERT INTO grievances (grievance_id, complainant_id, grievance_description, source) VALUES (%s, %s, %s, %s) RETURNING grievance_id
2025-07-30 14:46:03,482 - db_manager - DEBUG - len of query_keys: 4
2025-07-30 14:46:03,482 - db_manager - DEBUG - Generated query: INSERT INTO grievances (grievance_id, complainant_id, grievance_description, source) VALUES (%s, %s, %s, %s) RETURNING grievance_id
2025-07-30 14:46:03,482 - db_manager - INFO - Connecting to database: grievance_db
2025-07-30 14:46:03,487 - db_manager - INFO - Starting database transaction
2025-07-30 14:46:03,491 - db_manager - INFO - Transaction committed successfully
2025-07-30 14:46:03,491 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-07-30 14:46:03,491 - db_manager - INFO - create_grievance: Successfully created grievance with ID: GR-20250730-KOJH-52C6-B
2025-07-30 14:46:05,084 - db_manager - INFO - Connecting to database: grievance_db
2025-07-30 14:46:05,090 - db_manager - INFO - Starting database transaction
2025-07-30 14:46:05,090 - db_manager - INFO - Executing get_complainant_by_id: 
            SELECT complainant_id, complainant_unique_id, complainant_full_name,    complainant_pho...
2025-07-30 14:46:05,091 - db_manager - INFO - get_complainant_by_id completed in 0.01s. Rows: 1
2025-07-30 14:46:05,092 - db_manager - INFO - Transaction committed successfully
2025-07-30 14:46:05,092 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-07-30 14:46:05,092 - db_manager - INFO - Connecting to database: grievance_db
2025-07-30 14:46:05,097 - db_manager - INFO - Starting database transaction
2025-07-30 14:46:05,097 - db_manager - INFO - Executing get_grievance_by_id: 
                SELECT g.*, c.complainant_full_name, c.complainant_phone, c.complainant_email,
    ...
2025-07-30 14:46:05,099 - db_manager - INFO - get_grievance_by_id completed in 0.01s. Rows: 1
2025-07-30 14:46:05,099 - db_manager - INFO - Transaction committed successfully
2025-07-30 14:46:05,099 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-07-30 14:46:05,099 - db_manager - INFO - update_complainant: Updating complainant with ID: CM-20250730-KOJH-0CE3-B
2025-07-30 14:46:05,099 - db_manager - INFO - Connecting to database: grievance_db
2025-07-30 14:46:05,104 - db_manager - INFO - Starting database transaction
2025-07-30 14:46:05,104 - db_manager - INFO - Executing encrypt_field: SELECT encode(pgp_sym_encrypt(%s, %s), 'hex') AS encrypted...
2025-07-30 14:46:05,106 - db_manager - INFO - encrypt_field completed in 0.01s. Rows: 1
2025-07-30 14:46:05,106 - db_manager - INFO - Transaction committed successfully
2025-07-30 14:46:05,106 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-07-30 14:46:05,106 - db_manager - DEBUG - encrypted phone number Not provided at encrypt_complainant_data: c30d0407030213b6d4237a9ebaef7fd23d01694720852c8b8eb3e9fce15e0a63836d0719d2d44899c2615f3ba669c9da61c4a17bdb4ecff3572abf745cd41da3ac1a1dca23b34648c830ca211ec7
2025-07-30 14:46:05,106 - db_manager - INFO - Connecting to database: grievance_db
2025-07-30 14:46:05,111 - db_manager - INFO - Starting database transaction
2025-07-30 14:46:05,111 - db_manager - INFO - Executing encrypt_field: SELECT encode(pgp_sym_encrypt(%s, %s), 'hex') AS encrypted...
2025-07-30 14:46:05,112 - db_manager - INFO - encrypt_field completed in 0.01s. Rows: 1
2025-07-30 14:46:05,112 - db_manager - INFO - Transaction committed successfully
2025-07-30 14:46:05,112 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-07-30 14:46:05,112 - db_manager - INFO - Connecting to database: grievance_db
2025-07-30 14:46:05,116 - db_manager - INFO - Starting database transaction
2025-07-30 14:46:05,116 - db_manager - INFO - Executing encrypt_field: SELECT encode(pgp_sym_encrypt(%s, %s), 'hex') AS encrypted...
2025-07-30 14:46:05,117 - db_manager - INFO - encrypt_field completed in 0.00s. Rows: 1
2025-07-30 14:46:05,117 - db_manager - INFO - Transaction committed successfully
2025-07-30 14:46:05,117 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-07-30 14:46:05,117 - db_manager - DEBUG - phone number Not provided hashed to d83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f at hash_sensitive_data
2025-07-30 14:46:05,117 - db_manager - DEBUG - encrypted and hashed data at encrypt_and_hash_sensitive_data: {'complainant_full_name': 'c30d0407030226559cc07ca207866bd23d01ffad7131fccfc73a4745d7badc5e87cbc15a247c26dcafac772d55c79d71d5bcd634ede6a7b1daeae502050e5b85475418be9bad245858950a86535a', 'complainant_phone': 'c30d0407030213b6d4237a9ebaef7fd23d01694720852c8b8eb3e9fce15e0a63836d0719d2d44899c2615f3ba669c9da61c4a17bdb4ecff3572abf745cd41da3ac1a1dca23b34648c830ca211ec7', 'complainant_email': 'c30d04070302ef3489c7f2fba2d461d23d0135c1c12f044974d30bdd799b8a3dd477198a2a672cd2d290a5699dce844a14e7261b54fe0ed388b407266e9370ba47c5fb14822cc3a352f84d0e4ab6', 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_phone_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'complainant_full_name_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'complainant_email_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f'}
2025-07-30 14:46:05,117 - db_manager - DEBUG - encrypted_data at update_complainant: {'complainant_full_name': 'c30d0407030226559cc07ca207866bd23d01ffad7131fccfc73a4745d7badc5e87cbc15a247c26dcafac772d55c79d71d5bcd634ede6a7b1daeae502050e5b85475418be9bad245858950a86535a', 'complainant_phone': 'c30d0407030213b6d4237a9ebaef7fd23d01694720852c8b8eb3e9fce15e0a63836d0719d2d44899c2615f3ba669c9da61c4a17bdb4ecff3572abf745cd41da3ac1a1dca23b34648c830ca211ec7', 'complainant_email': 'c30d04070302ef3489c7f2fba2d461d23d0135c1c12f044974d30bdd799b8a3dd477198a2a672cd2d290a5699dce844a14e7261b54fe0ed388b407266e9370ba47c5fb14822cc3a352f84d0e4ab6', 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_phone_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'complainant_full_name_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'complainant_email_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f'}
2025-07-30 14:46:05,118 - db_manager - DEBUG - execute_update values: ('c30d0407030226559cc07ca207866bd23d01ffad7131fccfc73a4745d7badc5e87cbc15a247c26dcafac772d55c79d71d5bcd634ede6a7b1daeae502050e5b85475418be9bad245858950a86535a', 'c30d0407030213b6d4237a9ebaef7fd23d01694720852c8b8eb3e9fce15e0a63836d0719d2d44899c2615f3ba669c9da61c4a17bdb4ecff3572abf745cd41da3ac1a1dca23b34648c830ca211ec7', 'c30d04070302ef3489c7f2fba2d461d23d0135c1c12f044974d30bdd799b8a3dd477198a2a672cd2d290a5699dce844a14e7261b54fe0ed388b407266e9370ba47c5fb14822cc3a352f84d0e4ab6', 'Koshi', 'Jhapa', 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'CM-20250730-KOJH-0CE3-B')
2025-07-30 14:46:05,118 - db_manager - DEBUG - execute_update query: UPDATE complainants SET complainant_full_name = %s, complainant_phone = %s, complainant_email = %s, complainant_province = %s, complainant_district = %s, complainant_phone_hash = %s, complainant_full_name_hash = %s, complainant_email_hash = %s WHERE complainant_id = %s
2025-07-30 14:46:05,118 - db_manager - INFO - Connecting to database: grievance_db
2025-07-30 14:46:05,122 - db_manager - INFO - Starting database transaction
2025-07-30 14:46:05,122 - db_manager - INFO - execute_update: Executing update query: UPDATE complainants SET complainant_full_name = %s, complainant_phone = %s, complainant_email = %s, ...
2025-07-30 14:46:05,123 - db_manager - INFO - execute_update: Update completed in 0.01s. Affected rows: 1
2025-07-30 14:46:05,126 - db_manager - INFO - Transaction committed successfully
2025-07-30 14:46:05,126 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-07-30 14:46:05,126 - db_manager - INFO - Complainant updated in db: CM-20250730-KOJH-0CE3-B
2025-07-30 14:46:05,126 - db_manager - INFO - update_grievance: Updating grievance with ID: GR-20250730-KOJH-52C6-B
2025-07-30 14:46:05,126 - db_manager - DEBUG - execute_update values: ('Not provided', 'Not provided', 'dust everywhere\nkids sick\ngo to hospital\nbut no money', None, None, 'ne', 'GR-20250730-KOJH-52C6-B')
2025-07-30 14:46:05,127 - db_manager - DEBUG - execute_update query: 
                    UPDATE grievances 
                    SET grievance_categories = %s,
                        grievance_summary = %s,
                        grievance_description = %s,
                        grievance_claimed_amount = %s,
                        grievance_location = %s,
                        language_code = %s,
                        grievance_modification_date = CURRENT_TIMESTAMP
                    WHERE grievance_id = %s
                    RETURNING grievance_id
                
2025-07-30 14:46:05,127 - db_manager - INFO - Connecting to database: grievance_db
2025-07-30 14:46:05,131 - db_manager - INFO - Starting database transaction
2025-07-30 14:46:05,131 - db_manager - INFO - execute_update: Executing update query: 
                    UPDATE grievances 
                    SET grievance_categories = %s,
         ...
2025-07-30 14:46:05,132 - db_manager - INFO - execute_update: Update completed in 0.01s. Affected rows: 1
2025-07-30 14:46:05,134 - db_manager - INFO - Transaction committed successfully
2025-07-30 14:46:05,134 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-07-30 14:46:05,134 - db_manager - INFO - update_grievance: Updated grievance with ID: GR-20250730-KOJH-52C6-B, rows affected: 1
2025-07-30 14:46:05,134 - db_manager - INFO - Grievance updated in db: GR-20250730-KOJH-52C6-B
2025-07-30 14:46:05,134 - db_manager - INFO - Connecting to database: grievance_db
2025-07-30 14:46:05,139 - db_manager - INFO - Starting database transaction
2025-07-30 14:46:05,140 - db_manager - INFO - Executing get_grievance_files: 
            SELECT file_id, file_name, file_type, file_size, upload_timestamp
            FROM file...
2025-07-30 14:46:05,141 - db_manager - INFO - get_grievance_files completed in 0.01s. Rows: 0
2025-07-30 14:46:05,141 - db_manager - INFO - Transaction committed successfully
2025-07-30 14:46:05,141 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-07-30 14:46:05,141 - db_manager - INFO - Connecting to database: grievance_db
2025-07-30 14:46:05,145 - db_manager - INFO - Starting database transaction
2025-07-30 14:46:05,145 - db_manager - INFO - Executing get_grievance_files: 
            SELECT file_id, file_name, file_type, file_size, upload_timestamp
            FROM file...
2025-07-30 14:46:05,146 - db_manager - INFO - get_grievance_files completed in 0.01s. Rows: 0
2025-07-30 14:46:05,146 - db_manager - INFO - Transaction committed successfully
2025-07-30 14:46:05,146 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-07-30 14:46:05,147 - db_manager - INFO - Connecting to database: grievance_db
2025-07-30 14:46:05,151 - db_manager - INFO - Starting database transaction
2025-07-30 14:46:05,152 - db_manager - INFO - Executing get_grievance_files: 
            SELECT file_id, file_name, file_type, file_size, upload_timestamp
            FROM file...
2025-07-30 14:46:05,153 - db_manager - INFO - get_grievance_files completed in 0.01s. Rows: 0
2025-07-30 14:46:05,153 - db_manager - INFO - Transaction committed successfully
2025-07-30 14:46:05,153 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-07-30 15:02:11,249 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-07-30 15:02:11,250 - db_manager - INFO - Database manager initialized successfully
2025-07-30 15:02:11,251 - db_manager - INFO - Encryption enabled for sensitive fields
2025-07-30 15:02:11,251 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-07-30 15:02:11,251 - db_manager - INFO - Database manager initialized successfully
2025-07-30 15:02:11,251 - db_manager - INFO - Encryption enabled for sensitive fields
2025-07-30 15:02:11,251 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-07-30 15:02:11,251 - db_manager - INFO - Database manager initialized successfully
2025-07-30 15:02:11,251 - db_manager - INFO - Encryption enabled for sensitive fields
2025-07-30 15:02:11,251 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-07-30 15:02:11,251 - db_manager - INFO - Database manager initialized successfully
2025-07-30 15:02:11,251 - db_manager - INFO - Encryption enabled for sensitive fields
2025-07-30 15:02:11,251 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-07-30 15:02:11,251 - db_manager - INFO - Database manager initialized successfully
2025-07-30 15:02:11,251 - db_manager - INFO - Encryption enabled for sensitive fields
2025-07-30 15:02:11,251 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-07-30 15:02:11,251 - db_manager - INFO - Database manager initialized successfully
2025-07-30 15:02:11,251 - db_manager - INFO - Encryption enabled for sensitive fields
2025-07-30 15:02:11,251 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-07-30 15:02:11,251 - db_manager - INFO - Database manager initialized successfully
2025-07-30 15:02:11,251 - db_manager - INFO - Encryption enabled for sensitive fields
2025-07-30 15:02:11,251 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-07-30 15:02:11,251 - db_manager - INFO - Database manager initialized successfully
2025-07-30 15:02:11,251 - db_manager - INFO - Encryption enabled for sensitive fields
2025-07-30 15:02:11,251 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-07-30 15:02:11,251 - db_manager - INFO - Database manager initialized successfully
2025-07-30 15:02:11,252 - db_manager - INFO - Encryption enabled for sensitive fields
2025-07-30 15:02:11,252 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-07-30 15:02:11,252 - db_manager - INFO - Database manager initialized successfully
2025-07-30 15:02:11,252 - db_manager - INFO - Encryption enabled for sensitive fields
2025-07-30 15:03:16,211 - db_manager - INFO - create_complainant: Creating complainant with ID: CM-20250730-KOJH-D4D5-B
2025-07-30 15:03:16,211 - db_manager - DEBUG - encrypted and hashed data at encrypt_and_hash_sensitive_data: {'complainant_id': 'CM-20250730-KOJH-D4D5-B', 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_unique_id': 'CM-20250730-KOJH-D4D5-B'}
2025-07-30 15:03:16,211 - db_manager - DEBUG - query_keys at generate_query_string: dict_keys(['complainant_id', 'complainant_province', 'complainant_district', 'complainant_unique_id'])
2025-07-30 15:03:16,211 - db_manager - DEBUG - Generated query: INSERT INTO complainants (complainant_id, complainant_province, complainant_district, complainant_unique_id) VALUES (%s, %s, %s, %s)
2025-07-30 15:03:16,211 - db_manager - DEBUG - len of query_keys: 4
2025-07-30 15:03:16,211 - db_manager - DEBUG - Generated query: INSERT INTO complainants (complainant_id, complainant_province, complainant_district, complainant_unique_id) VALUES (%s, %s, %s, %s)
2025-07-30 15:03:16,211 - db_manager - INFO - Connecting to database: grievance_db
2025-07-30 15:03:16,218 - db_manager - INFO - Starting database transaction
2025-07-30 15:03:16,220 - db_manager - INFO - Transaction committed successfully
2025-07-30 15:03:16,220 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-07-30 15:03:16,220 - db_manager - INFO - create_complainant: Successfully created complainant with ID: CM-20250730-KOJH-D4D5-B
2025-07-30 15:03:16,220 - db_manager - INFO - create_grievance: Creating grievance with data: {'grievance_id': 'GR-20250730-KOJH-E578-B', 'complainant_id': 'CM-20250730-KOJH-D4D5-B', 'grievance_description': 'dust everywhere\nkids ssick\nneed to go to hospital\nno money', 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_office': None, 'source': 'bot', 'complainant_unique_id': 'CM-20250730-KOJH-D4D5-B'}
2025-07-30 15:03:16,221 - db_manager - INFO - create_grievance: Creating grievance with ID: GR-20250730-KOJH-E578-B
2025-07-30 15:03:16,221 - db_manager - DEBUG - query_keys at generate_query_string: dict_keys(['grievance_id', 'complainant_id', 'grievance_description', 'source'])
2025-07-30 15:03:16,221 - db_manager - DEBUG - Generated query: INSERT INTO grievances (grievance_id, complainant_id, grievance_description, source) VALUES (%s, %s, %s, %s) RETURNING grievance_id
2025-07-30 15:03:16,221 - db_manager - DEBUG - len of query_keys: 4
2025-07-30 15:03:16,221 - db_manager - DEBUG - Generated query: INSERT INTO grievances (grievance_id, complainant_id, grievance_description, source) VALUES (%s, %s, %s, %s) RETURNING grievance_id
2025-07-30 15:03:16,221 - db_manager - INFO - Connecting to database: grievance_db
2025-07-30 15:03:16,225 - db_manager - INFO - Starting database transaction
2025-07-30 15:03:16,229 - db_manager - INFO - Transaction committed successfully
2025-07-30 15:03:16,230 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-07-30 15:03:16,230 - db_manager - INFO - create_grievance: Successfully created grievance with ID: GR-20250730-KOJH-E578-B
2025-07-30 15:03:18,093 - db_manager - INFO - Connecting to database: grievance_db
2025-07-30 15:03:18,099 - db_manager - INFO - Starting database transaction
2025-07-30 15:03:18,100 - db_manager - INFO - Executing get_complainant_by_id: 
            SELECT complainant_id, complainant_unique_id, complainant_full_name,    complainant_pho...
2025-07-30 15:03:18,101 - db_manager - INFO - get_complainant_by_id completed in 0.01s. Rows: 1
2025-07-30 15:03:18,101 - db_manager - INFO - Transaction committed successfully
2025-07-30 15:03:18,102 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-07-30 15:03:18,102 - db_manager - INFO - Connecting to database: grievance_db
2025-07-30 15:03:18,107 - db_manager - INFO - Starting database transaction
2025-07-30 15:03:18,107 - db_manager - INFO - Executing get_grievance_by_id: 
                SELECT g.*, c.complainant_full_name, c.complainant_phone, c.complainant_email,
    ...
2025-07-30 15:03:18,109 - db_manager - INFO - get_grievance_by_id completed in 0.01s. Rows: 1
2025-07-30 15:03:18,109 - db_manager - INFO - Transaction committed successfully
2025-07-30 15:03:18,109 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-07-30 15:03:18,109 - db_manager - INFO - update_complainant: Updating complainant with ID: CM-20250730-KOJH-D4D5-B
2025-07-30 15:03:18,109 - db_manager - INFO - Connecting to database: grievance_db
2025-07-30 15:03:18,115 - db_manager - INFO - Starting database transaction
2025-07-30 15:03:18,115 - db_manager - INFO - Executing encrypt_field: SELECT encode(pgp_sym_encrypt(%s, %s), 'hex') AS encrypted...
2025-07-30 15:03:18,119 - db_manager - INFO - encrypt_field completed in 0.01s. Rows: 1
2025-07-30 15:03:18,119 - db_manager - INFO - Transaction committed successfully
2025-07-30 15:03:18,119 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-07-30 15:03:18,119 - db_manager - INFO - Connecting to database: grievance_db
2025-07-30 15:03:18,124 - db_manager - INFO - Starting database transaction
2025-07-30 15:03:18,124 - db_manager - INFO - Executing encrypt_field: SELECT encode(pgp_sym_encrypt(%s, %s), 'hex') AS encrypted...
2025-07-30 15:03:18,125 - db_manager - INFO - encrypt_field completed in 0.01s. Rows: 1
2025-07-30 15:03:18,126 - db_manager - INFO - Transaction committed successfully
2025-07-30 15:03:18,126 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-07-30 15:03:18,126 - db_manager - INFO - Connecting to database: grievance_db
2025-07-30 15:03:18,131 - db_manager - INFO - Starting database transaction
2025-07-30 15:03:18,131 - db_manager - INFO - Executing encrypt_field: SELECT encode(pgp_sym_encrypt(%s, %s), 'hex') AS encrypted...
2025-07-30 15:03:18,133 - db_manager - INFO - encrypt_field completed in 0.01s. Rows: 1
2025-07-30 15:03:18,133 - db_manager - INFO - Transaction committed successfully
2025-07-30 15:03:18,133 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-07-30 15:03:18,133 - db_manager - DEBUG - encrypted phone number Not provided at encrypt_complainant_data: c30d0407030243d883d9cda76ec675d23d0137dd11f890a351cb263e53da7523fd8428ac5b129de49a5f896de582ca9a4f5c806a6aa4579eefeeda4de770fda82089bba87adf53e07e199c279906
2025-07-30 15:03:18,133 - db_manager - DEBUG - phone number Not provided hashed to d83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f at hash_sensitive_data
2025-07-30 15:03:18,133 - db_manager - DEBUG - encrypted and hashed data at encrypt_and_hash_sensitive_data: {'complainant_full_name': 'c30d04070302b1911149b9955a8e66d23d012a0af18cd698a42c0cee32acfbd34097dae1a226dbcfed342ac64b8b2f57873a96f26aaf117e2daf18866fa2e5155c608a9b46127f511a3c0339db96', 'complainant_phone': 'c30d0407030243d883d9cda76ec675d23d0137dd11f890a351cb263e53da7523fd8428ac5b129de49a5f896de582ca9a4f5c806a6aa4579eefeeda4de770fda82089bba87adf53e07e199c279906', 'complainant_email': 'c30d0407030202f5a95b8c8f0c1d77d23d01318c14c925d2c09c4b5cbfd29d091f78979097a2faf091dc1a1c91d6bcf3d2c7fd249c803bc49ea2d8cb7c22e9d2be7475002749257b545aae66e954', 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_email_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'complainant_full_name_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'complainant_phone_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f'}
2025-07-30 15:03:18,133 - db_manager - DEBUG - encrypted_data at update_complainant: {'complainant_full_name': 'c30d04070302b1911149b9955a8e66d23d012a0af18cd698a42c0cee32acfbd34097dae1a226dbcfed342ac64b8b2f57873a96f26aaf117e2daf18866fa2e5155c608a9b46127f511a3c0339db96', 'complainant_phone': 'c30d0407030243d883d9cda76ec675d23d0137dd11f890a351cb263e53da7523fd8428ac5b129de49a5f896de582ca9a4f5c806a6aa4579eefeeda4de770fda82089bba87adf53e07e199c279906', 'complainant_email': 'c30d0407030202f5a95b8c8f0c1d77d23d01318c14c925d2c09c4b5cbfd29d091f78979097a2faf091dc1a1c91d6bcf3d2c7fd249c803bc49ea2d8cb7c22e9d2be7475002749257b545aae66e954', 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_email_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'complainant_full_name_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'complainant_phone_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f'}
2025-07-30 15:03:18,133 - db_manager - DEBUG - execute_update values: ('c30d04070302b1911149b9955a8e66d23d012a0af18cd698a42c0cee32acfbd34097dae1a226dbcfed342ac64b8b2f57873a96f26aaf117e2daf18866fa2e5155c608a9b46127f511a3c0339db96', 'c30d0407030243d883d9cda76ec675d23d0137dd11f890a351cb263e53da7523fd8428ac5b129de49a5f896de582ca9a4f5c806a6aa4579eefeeda4de770fda82089bba87adf53e07e199c279906', 'c30d0407030202f5a95b8c8f0c1d77d23d01318c14c925d2c09c4b5cbfd29d091f78979097a2faf091dc1a1c91d6bcf3d2c7fd249c803bc49ea2d8cb7c22e9d2be7475002749257b545aae66e954', 'Koshi', 'Jhapa', 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'CM-20250730-KOJH-D4D5-B')
2025-07-30 15:03:18,133 - db_manager - DEBUG - execute_update query: UPDATE complainants SET complainant_full_name = %s, complainant_phone = %s, complainant_email = %s, complainant_province = %s, complainant_district = %s, complainant_email_hash = %s, complainant_full_name_hash = %s, complainant_phone_hash = %s WHERE complainant_id = %s
2025-07-30 15:03:18,133 - db_manager - INFO - Connecting to database: grievance_db
2025-07-30 15:03:18,138 - db_manager - INFO - Starting database transaction
2025-07-30 15:03:18,138 - db_manager - INFO - execute_update: Executing update query: UPDATE complainants SET complainant_full_name = %s, complainant_phone = %s, complainant_email = %s, ...
2025-07-30 15:03:18,139 - db_manager - INFO - execute_update: Update completed in 0.01s. Affected rows: 1
2025-07-30 15:03:18,141 - db_manager - INFO - Transaction committed successfully
2025-07-30 15:03:18,141 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-07-30 15:03:18,141 - db_manager - INFO - Complainant updated in db: CM-20250730-KOJH-D4D5-B
2025-07-30 15:03:18,141 - db_manager - INFO - update_grievance: Updating grievance with ID: GR-20250730-KOJH-E578-B
2025-07-30 15:03:18,141 - db_manager - DEBUG - execute_update values: ('Not provided', 'Not provided', 'dust everywhere\nkids ssick\nneed to go to hospital\nno money', None, None, 'ne', 'GR-20250730-KOJH-E578-B')
2025-07-30 15:03:18,141 - db_manager - DEBUG - execute_update query: 
                    UPDATE grievances 
                    SET grievance_categories = %s,
                        grievance_summary = %s,
                        grievance_description = %s,
                        grievance_claimed_amount = %s,
                        grievance_location = %s,
                        language_code = %s,
                        grievance_modification_date = CURRENT_TIMESTAMP
                    WHERE grievance_id = %s
                    RETURNING grievance_id
                
2025-07-30 15:03:18,141 - db_manager - INFO - Connecting to database: grievance_db
2025-07-30 15:03:18,146 - db_manager - INFO - Starting database transaction
2025-07-30 15:03:18,146 - db_manager - INFO - execute_update: Executing update query: 
                    UPDATE grievances 
                    SET grievance_categories = %s,
         ...
2025-07-30 15:03:18,147 - db_manager - INFO - execute_update: Update completed in 0.01s. Affected rows: 1
2025-07-30 15:03:18,150 - db_manager - INFO - Transaction committed successfully
2025-07-30 15:03:18,150 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-07-30 15:03:18,150 - db_manager - INFO - update_grievance: Updated grievance with ID: GR-20250730-KOJH-E578-B, rows affected: 1
2025-07-30 15:03:18,150 - db_manager - INFO - Grievance updated in db: GR-20250730-KOJH-E578-B
2025-07-30 15:03:18,150 - db_manager - INFO - Connecting to database: grievance_db
2025-07-30 15:03:18,155 - db_manager - INFO - Starting database transaction
2025-07-30 15:03:18,156 - db_manager - INFO - Executing get_grievance_files: 
            SELECT file_id, file_name, file_type, file_size, upload_timestamp
            FROM file...
2025-07-30 15:03:18,157 - db_manager - INFO - get_grievance_files completed in 0.01s. Rows: 0
2025-07-30 15:03:18,157 - db_manager - INFO - Transaction committed successfully
2025-07-30 15:03:18,157 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-07-30 15:03:18,157 - db_manager - INFO - Connecting to database: grievance_db
2025-07-30 15:03:18,162 - db_manager - INFO - Starting database transaction
2025-07-30 15:03:18,163 - db_manager - INFO - Executing get_grievance_files: 
            SELECT file_id, file_name, file_type, file_size, upload_timestamp
            FROM file...
2025-07-30 15:03:18,164 - db_manager - INFO - get_grievance_files completed in 0.01s. Rows: 0
2025-07-30 15:03:18,164 - db_manager - INFO - Transaction committed successfully
2025-07-30 15:03:18,164 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-07-30 15:03:18,165 - db_manager - INFO - Connecting to database: grievance_db
2025-07-30 15:03:18,170 - db_manager - INFO - Starting database transaction
2025-07-30 15:03:18,170 - db_manager - INFO - Executing get_grievance_files: 
            SELECT file_id, file_name, file_type, file_size, upload_timestamp
            FROM file...
2025-07-30 15:03:18,172 - db_manager - INFO - get_grievance_files completed in 0.01s. Rows: 0
2025-07-30 15:03:18,172 - db_manager - INFO - Transaction committed successfully
2025-07-30 15:03:18,172 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-07-30 15:12:13,204 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-07-30 15:12:13,205 - db_manager - INFO - Database manager initialized successfully
2025-07-30 15:12:13,205 - db_manager - INFO - Encryption enabled for sensitive fields
2025-07-30 15:12:13,205 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-07-30 15:12:13,205 - db_manager - INFO - Database manager initialized successfully
2025-07-30 15:12:13,205 - db_manager - INFO - Encryption enabled for sensitive fields
2025-07-30 15:12:13,205 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-07-30 15:12:13,205 - db_manager - INFO - Database manager initialized successfully
2025-07-30 15:12:13,205 - db_manager - INFO - Encryption enabled for sensitive fields
2025-07-30 15:12:13,205 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-07-30 15:12:13,206 - db_manager - INFO - Database manager initialized successfully
2025-07-30 15:12:13,206 - db_manager - INFO - Encryption enabled for sensitive fields
2025-07-30 15:12:13,206 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-07-30 15:12:13,206 - db_manager - INFO - Database manager initialized successfully
2025-07-30 15:12:13,206 - db_manager - INFO - Encryption enabled for sensitive fields
2025-07-30 15:12:13,206 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-07-30 15:12:13,206 - db_manager - INFO - Database manager initialized successfully
2025-07-30 15:12:13,206 - db_manager - INFO - Encryption enabled for sensitive fields
2025-07-30 15:12:13,206 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-07-30 15:12:13,206 - db_manager - INFO - Database manager initialized successfully
2025-07-30 15:12:13,206 - db_manager - INFO - Encryption enabled for sensitive fields
2025-07-30 15:12:13,206 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-07-30 15:12:13,206 - db_manager - INFO - Database manager initialized successfully
2025-07-30 15:12:13,206 - db_manager - INFO - Encryption enabled for sensitive fields
2025-07-30 15:12:13,206 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-07-30 15:12:13,206 - db_manager - INFO - Database manager initialized successfully
2025-07-30 15:12:13,206 - db_manager - INFO - Encryption enabled for sensitive fields
2025-07-30 15:12:13,206 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-07-30 15:12:13,206 - db_manager - INFO - Database manager initialized successfully
2025-07-30 15:12:13,206 - db_manager - INFO - Encryption enabled for sensitive fields
2025-07-30 15:14:40,834 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-07-30 15:14:40,835 - db_manager - INFO - Database manager initialized successfully
2025-07-30 15:14:40,835 - db_manager - INFO - Encryption enabled for sensitive fields
2025-07-30 15:14:40,835 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-07-30 15:14:40,835 - db_manager - INFO - Database manager initialized successfully
2025-07-30 15:14:40,835 - db_manager - INFO - Encryption enabled for sensitive fields
2025-07-30 15:14:40,835 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-07-30 15:14:40,835 - db_manager - INFO - Database manager initialized successfully
2025-07-30 15:14:40,835 - db_manager - INFO - Encryption enabled for sensitive fields
2025-07-30 15:14:40,835 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-07-30 15:14:40,835 - db_manager - INFO - Database manager initialized successfully
2025-07-30 15:14:40,835 - db_manager - INFO - Encryption enabled for sensitive fields
2025-07-30 15:14:40,835 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-07-30 15:14:40,835 - db_manager - INFO - Database manager initialized successfully
2025-07-30 15:14:40,836 - db_manager - INFO - Encryption enabled for sensitive fields
2025-07-30 15:14:40,836 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-07-30 15:14:40,836 - db_manager - INFO - Database manager initialized successfully
2025-07-30 15:14:40,836 - db_manager - INFO - Encryption enabled for sensitive fields
2025-07-30 15:14:40,836 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-07-30 15:14:40,836 - db_manager - INFO - Database manager initialized successfully
2025-07-30 15:14:40,836 - db_manager - INFO - Encryption enabled for sensitive fields
2025-07-30 15:14:40,836 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-07-30 15:14:40,836 - db_manager - INFO - Database manager initialized successfully
2025-07-30 15:14:40,836 - db_manager - INFO - Encryption enabled for sensitive fields
2025-07-30 15:14:40,836 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-07-30 15:14:40,836 - db_manager - INFO - Database manager initialized successfully
2025-07-30 15:14:40,836 - db_manager - INFO - Encryption enabled for sensitive fields
2025-07-30 15:14:40,836 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-07-30 15:14:40,836 - db_manager - INFO - Database manager initialized successfully
2025-07-30 15:14:40,836 - db_manager - INFO - Encryption enabled for sensitive fields
2025-07-30 15:15:55,672 - db_manager - INFO - create_complainant: Creating complainant with ID: CM-20250730-KOJH-0A85-B
2025-07-30 15:15:55,673 - db_manager - DEBUG - encrypted and hashed data at encrypt_and_hash_sensitive_data: {'complainant_id': 'CM-20250730-KOJH-0A85-B', 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_unique_id': 'CM-20250730-KOJH-0A85-B'}
2025-07-30 15:15:55,673 - db_manager - DEBUG - query_keys at generate_query_string: dict_keys(['complainant_id', 'complainant_province', 'complainant_district', 'complainant_unique_id'])
2025-07-30 15:15:55,673 - db_manager - DEBUG - Generated query: INSERT INTO complainants (complainant_id, complainant_province, complainant_district, complainant_unique_id) VALUES (%s, %s, %s, %s)
2025-07-30 15:15:55,673 - db_manager - DEBUG - len of query_keys: 4
2025-07-30 15:15:55,673 - db_manager - DEBUG - Generated query: INSERT INTO complainants (complainant_id, complainant_province, complainant_district, complainant_unique_id) VALUES (%s, %s, %s, %s)
2025-07-30 15:15:55,673 - db_manager - INFO - Connecting to database: grievance_db
2025-07-30 15:15:55,679 - db_manager - INFO - Starting database transaction
2025-07-30 15:15:55,683 - db_manager - INFO - Transaction committed successfully
2025-07-30 15:15:55,683 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-07-30 15:15:55,683 - db_manager - INFO - create_complainant: Successfully created complainant with ID: CM-20250730-KOJH-0A85-B
2025-07-30 15:15:55,684 - db_manager - INFO - create_grievance: Creating grievance with data: {'grievance_id': 'GR-20250730-KOJH-E79C-B', 'complainant_id': 'CM-20250730-KOJH-0A85-B', 'grievance_description': 'dust everywhere\nkids sick\ngo hospital\nbut no moneyu\ndont know what to do', 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_office': None, 'source': 'bot', 'complainant_unique_id': 'CM-20250730-KOJH-0A85-B'}
2025-07-30 15:15:55,684 - db_manager - INFO - create_grievance: Creating grievance with ID: GR-20250730-KOJH-E79C-B
2025-07-30 15:15:55,684 - db_manager - DEBUG - query_keys at generate_query_string: dict_keys(['grievance_id', 'complainant_id', 'grievance_description', 'source'])
2025-07-30 15:15:55,684 - db_manager - DEBUG - Generated query: INSERT INTO grievances (grievance_id, complainant_id, grievance_description, source) VALUES (%s, %s, %s, %s) RETURNING grievance_id
2025-07-30 15:15:55,684 - db_manager - DEBUG - len of query_keys: 4
2025-07-30 15:15:55,684 - db_manager - DEBUG - Generated query: INSERT INTO grievances (grievance_id, complainant_id, grievance_description, source) VALUES (%s, %s, %s, %s) RETURNING grievance_id
2025-07-30 15:15:55,684 - db_manager - INFO - Connecting to database: grievance_db
2025-07-30 15:15:55,689 - db_manager - INFO - Starting database transaction
2025-07-30 15:15:55,693 - db_manager - INFO - Transaction committed successfully
2025-07-30 15:15:55,693 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-07-30 15:15:55,693 - db_manager - INFO - create_grievance: Successfully created grievance with ID: GR-20250730-KOJH-E79C-B
2025-07-30 15:15:57,545 - db_manager - INFO - Connecting to database: grievance_db
2025-07-30 15:15:57,550 - db_manager - INFO - Starting database transaction
2025-07-30 15:15:57,551 - db_manager - INFO - Executing get_complainant_by_id: 
            SELECT complainant_id, complainant_unique_id, complainant_full_name,    complainant_pho...
2025-07-30 15:15:57,552 - db_manager - INFO - get_complainant_by_id completed in 0.01s. Rows: 1
2025-07-30 15:15:57,552 - db_manager - INFO - Transaction committed successfully
2025-07-30 15:15:57,552 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-07-30 15:15:57,552 - db_manager - INFO - Connecting to database: grievance_db
2025-07-30 15:15:57,557 - db_manager - INFO - Starting database transaction
2025-07-30 15:15:57,558 - db_manager - INFO - Executing get_grievance_by_id: 
                SELECT g.*, c.complainant_full_name, c.complainant_phone, c.complainant_email,
    ...
2025-07-30 15:15:57,559 - db_manager - INFO - get_grievance_by_id completed in 0.01s. Rows: 1
2025-07-30 15:15:57,560 - db_manager - INFO - Transaction committed successfully
2025-07-30 15:15:57,560 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-07-30 15:15:57,560 - db_manager - INFO - update_complainant: Updating complainant with ID: CM-20250730-KOJH-0A85-B
2025-07-30 15:15:57,560 - db_manager - INFO - Connecting to database: grievance_db
2025-07-30 15:15:57,565 - db_manager - INFO - Starting database transaction
2025-07-30 15:15:57,565 - db_manager - INFO - Executing encrypt_field: SELECT encode(pgp_sym_encrypt(%s, %s), 'hex') AS encrypted...
2025-07-30 15:15:57,568 - db_manager - INFO - encrypt_field completed in 0.01s. Rows: 1
2025-07-30 15:15:57,568 - db_manager - INFO - Transaction committed successfully
2025-07-30 15:15:57,568 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-07-30 15:15:57,568 - db_manager - INFO - Connecting to database: grievance_db
2025-07-30 15:15:57,573 - db_manager - INFO - Starting database transaction
2025-07-30 15:15:57,573 - db_manager - INFO - Executing encrypt_field: SELECT encode(pgp_sym_encrypt(%s, %s), 'hex') AS encrypted...
2025-07-30 15:15:57,574 - db_manager - INFO - encrypt_field completed in 0.01s. Rows: 1
2025-07-30 15:15:57,574 - db_manager - INFO - Transaction committed successfully
2025-07-30 15:15:57,574 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-07-30 15:15:57,574 - db_manager - INFO - Connecting to database: grievance_db
2025-07-30 15:15:57,579 - db_manager - INFO - Starting database transaction
2025-07-30 15:15:57,579 - db_manager - INFO - Executing encrypt_field: SELECT encode(pgp_sym_encrypt(%s, %s), 'hex') AS encrypted...
2025-07-30 15:15:57,580 - db_manager - INFO - encrypt_field completed in 0.01s. Rows: 1
2025-07-30 15:15:57,581 - db_manager - INFO - Transaction committed successfully
2025-07-30 15:15:57,581 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-07-30 15:15:57,581 - db_manager - DEBUG - encrypted phone number Not provided at encrypt_complainant_data: c30d04070302673ac75a003964d46cd23d01502ad8c2e770cc42bee866b3281172c26768a95ec4004dc0a8c11edcf48385d5d5e4ac815b29316b147b4e8f1125cfb1fd7016205c1b5509a2ff6e55
2025-07-30 15:15:57,581 - db_manager - DEBUG - phone number Not provided hashed to d83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f at hash_sensitive_data
2025-07-30 15:15:57,581 - db_manager - DEBUG - encrypted and hashed data at encrypt_and_hash_sensitive_data: {'complainant_full_name': 'c30d04070302fadc391f34538c0170d23d0119fd735303af7ffa4048e8d384dffca065c2e91352f1a3fa3fe59b31fd16d527389d231c3d97695a30111b7aecaeb51ce8f25191006109ddd5a48e90', 'complainant_phone': 'c30d04070302673ac75a003964d46cd23d01502ad8c2e770cc42bee866b3281172c26768a95ec4004dc0a8c11edcf48385d5d5e4ac815b29316b147b4e8f1125cfb1fd7016205c1b5509a2ff6e55', 'complainant_email': 'c30d0407030266fcd8b397a3fad960d23d0191f81b713ca926582aa29ff1f286d793dfbf64b081e8a8f8ca1bce2da1289ca7fa28913a97fae4aedc84fe12774b0ae0289f65fdb24b68eb141d3756', 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_email_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'complainant_full_name_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'complainant_phone_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f'}
2025-07-30 15:15:57,581 - db_manager - DEBUG - encrypted_data at update_complainant: {'complainant_full_name': 'c30d04070302fadc391f34538c0170d23d0119fd735303af7ffa4048e8d384dffca065c2e91352f1a3fa3fe59b31fd16d527389d231c3d97695a30111b7aecaeb51ce8f25191006109ddd5a48e90', 'complainant_phone': 'c30d04070302673ac75a003964d46cd23d01502ad8c2e770cc42bee866b3281172c26768a95ec4004dc0a8c11edcf48385d5d5e4ac815b29316b147b4e8f1125cfb1fd7016205c1b5509a2ff6e55', 'complainant_email': 'c30d0407030266fcd8b397a3fad960d23d0191f81b713ca926582aa29ff1f286d793dfbf64b081e8a8f8ca1bce2da1289ca7fa28913a97fae4aedc84fe12774b0ae0289f65fdb24b68eb141d3756', 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_email_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'complainant_full_name_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'complainant_phone_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f'}
2025-07-30 15:15:57,581 - db_manager - DEBUG - execute_update values: ('c30d04070302fadc391f34538c0170d23d0119fd735303af7ffa4048e8d384dffca065c2e91352f1a3fa3fe59b31fd16d527389d231c3d97695a30111b7aecaeb51ce8f25191006109ddd5a48e90', 'c30d04070302673ac75a003964d46cd23d01502ad8c2e770cc42bee866b3281172c26768a95ec4004dc0a8c11edcf48385d5d5e4ac815b29316b147b4e8f1125cfb1fd7016205c1b5509a2ff6e55', 'c30d0407030266fcd8b397a3fad960d23d0191f81b713ca926582aa29ff1f286d793dfbf64b081e8a8f8ca1bce2da1289ca7fa28913a97fae4aedc84fe12774b0ae0289f65fdb24b68eb141d3756', 'Koshi', 'Jhapa', 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'CM-20250730-KOJH-0A85-B')
2025-07-30 15:15:57,581 - db_manager - DEBUG - execute_update query: UPDATE complainants SET complainant_full_name = %s, complainant_phone = %s, complainant_email = %s, complainant_province = %s, complainant_district = %s, complainant_email_hash = %s, complainant_full_name_hash = %s, complainant_phone_hash = %s WHERE complainant_id = %s
2025-07-30 15:15:57,581 - db_manager - INFO - Connecting to database: grievance_db
2025-07-30 15:15:57,586 - db_manager - INFO - Starting database transaction
2025-07-30 15:15:57,586 - db_manager - INFO - execute_update: Executing update query: UPDATE complainants SET complainant_full_name = %s, complainant_phone = %s, complainant_email = %s, ...
2025-07-30 15:15:57,587 - db_manager - INFO - execute_update: Update completed in 0.01s. Affected rows: 1
2025-07-30 15:15:57,588 - db_manager - INFO - Transaction committed successfully
2025-07-30 15:15:57,588 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-07-30 15:15:57,589 - db_manager - INFO - Complainant updated in db: CM-20250730-KOJH-0A85-B
2025-07-30 15:15:57,589 - db_manager - INFO - update_grievance: Updating grievance with ID: GR-20250730-KOJH-E79C-B
2025-07-30 15:15:57,589 - db_manager - DEBUG - execute_update values: ('Not provided', 'Not provided', 'dust everywhere\nkids sick\ngo hospital\nbut no moneyu\ndont know what to do', None, None, 'ne', 'GR-20250730-KOJH-E79C-B')
2025-07-30 15:15:57,589 - db_manager - DEBUG - execute_update query: 
                    UPDATE grievances 
                    SET grievance_categories = %s,
                        grievance_summary = %s,
                        grievance_description = %s,
                        grievance_claimed_amount = %s,
                        grievance_location = %s,
                        language_code = %s,
                        grievance_modification_date = CURRENT_TIMESTAMP
                    WHERE grievance_id = %s
                    RETURNING grievance_id
                
2025-07-30 15:15:57,589 - db_manager - INFO - Connecting to database: grievance_db
2025-07-30 15:15:57,593 - db_manager - INFO - Starting database transaction
2025-07-30 15:15:57,593 - db_manager - INFO - execute_update: Executing update query: 
                    UPDATE grievances 
                    SET grievance_categories = %s,
         ...
2025-07-30 15:15:57,594 - db_manager - INFO - execute_update: Update completed in 0.01s. Affected rows: 1
2025-07-30 15:15:57,596 - db_manager - INFO - Transaction committed successfully
2025-07-30 15:15:57,596 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-07-30 15:15:57,597 - db_manager - INFO - update_grievance: Updated grievance with ID: GR-20250730-KOJH-E79C-B, rows affected: 1
2025-07-30 15:15:57,597 - db_manager - INFO - Grievance updated in db: GR-20250730-KOJH-E79C-B
2025-07-30 15:15:57,597 - db_manager - INFO - Connecting to database: grievance_db
2025-07-30 15:15:57,601 - db_manager - INFO - Starting database transaction
2025-07-30 15:15:57,601 - db_manager - INFO - Executing get_grievance_files: 
            SELECT file_id, file_name, file_type, file_size, upload_timestamp
            FROM file...
2025-07-30 15:15:57,602 - db_manager - INFO - get_grievance_files completed in 0.01s. Rows: 0
2025-07-30 15:15:57,602 - db_manager - INFO - Transaction committed successfully
2025-07-30 15:15:57,602 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-07-30 15:15:57,603 - db_manager - INFO - Connecting to database: grievance_db
2025-07-30 15:15:57,607 - db_manager - INFO - Starting database transaction
2025-07-30 15:15:57,607 - db_manager - INFO - Executing get_grievance_files: 
            SELECT file_id, file_name, file_type, file_size, upload_timestamp
            FROM file...
2025-07-30 15:15:57,608 - db_manager - INFO - get_grievance_files completed in 0.01s. Rows: 0
2025-07-30 15:15:57,608 - db_manager - INFO - Transaction committed successfully
2025-07-30 15:15:57,608 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-07-30 15:15:58,098 - db_manager - INFO - Connecting to database: grievance_db
2025-07-30 15:15:58,104 - db_manager - INFO - Starting database transaction
2025-07-30 15:15:58,104 - db_manager - INFO - Executing get_grievance_files: 
            SELECT file_id, file_name, file_type, file_size, upload_timestamp
            FROM file...
2025-07-30 15:15:58,105 - db_manager - INFO - get_grievance_files completed in 0.01s. Rows: 0
2025-07-30 15:15:58,105 - db_manager - INFO - Transaction committed successfully
2025-07-30 15:15:58,105 - db_manager - INFO - Database connection closed. Duration: 0.01s
