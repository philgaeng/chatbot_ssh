2025-09-04 07:56:23,854 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-04 07:56:23,854 - db_manager - INFO - Database manager initialized successfully
2025-09-04 07:56:23,854 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-04 07:56:23,854 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-04 07:56:23,855 - db_manager - INFO - Database manager initialized successfully
2025-09-04 07:56:23,855 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-04 07:56:23,855 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-04 07:56:23,855 - db_manager - INFO - Database manager initialized successfully
2025-09-04 07:56:23,855 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-04 07:56:23,855 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-04 07:56:23,855 - db_manager - INFO - Database manager initialized successfully
2025-09-04 07:56:23,855 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-04 07:56:23,855 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-04 07:56:23,855 - db_manager - INFO - Database manager initialized successfully
2025-09-04 07:56:23,855 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-04 07:56:23,855 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-04 07:56:23,855 - db_manager - INFO - Database manager initialized successfully
2025-09-04 07:56:23,855 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-04 07:56:23,855 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-04 07:56:23,855 - db_manager - INFO - Database manager initialized successfully
2025-09-04 07:56:23,855 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-04 07:56:23,855 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-04 07:56:23,855 - db_manager - INFO - Database manager initialized successfully
2025-09-04 07:56:23,855 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-04 07:56:23,855 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-04 07:56:23,855 - db_manager - INFO - Database manager initialized successfully
2025-09-04 07:56:23,856 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-04 07:56:23,856 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-04 07:56:23,856 - db_manager - INFO - Database manager initialized successfully
2025-09-04 07:56:23,856 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-04 07:58:09,238 - db_manager - INFO - create_complainant: Creating complainant with ID: CM-20250904-KOJH-68D2-B
2025-09-04 07:58:09,238 - db_manager - DEBUG - encrypted and hashed data at encrypt_and_hash_sensitive_data: {'complainant_id': 'CM-20250904-KOJH-68D2-B', 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_unique_id': 'CM-20250904-KOJH-68D2-B'}
2025-09-04 07:58:09,238 - db_manager - DEBUG - query_keys at generate_query_string: dict_keys(['complainant_id', 'complainant_province', 'complainant_district', 'complainant_unique_id'])
2025-09-04 07:58:09,238 - db_manager - DEBUG - Generated query: INSERT INTO complainants (complainant_id, complainant_province, complainant_district, complainant_unique_id) VALUES (%s, %s, %s, %s)
2025-09-04 07:58:09,238 - db_manager - DEBUG - len of query_keys: 4
2025-09-04 07:58:09,238 - db_manager - DEBUG - Generated query: INSERT INTO complainants (complainant_id, complainant_province, complainant_district, complainant_unique_id) VALUES (%s, %s, %s, %s)
2025-09-04 07:58:09,238 - db_manager - INFO - Connecting to database: grievance_db
2025-09-04 07:58:09,246 - db_manager - INFO - Starting database transaction
2025-09-04 07:58:09,251 - db_manager - INFO - Transaction committed successfully
2025-09-04 07:58:09,251 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-04 07:58:09,251 - db_manager - INFO - create_complainant: Successfully created complainant with ID: CM-20250904-KOJH-68D2-B
2025-09-04 07:58:09,251 - db_manager - INFO - create_grievance: Creating grievance with data: {'grievance_id': 'GR-20250904-KOJH-DB61-B', 'complainant_id': 'CM-20250904-KOJH-68D2-B', 'grievance_description': 'there is dust everywhere in the house \nkids are coughing\nI need to go to hospital but I dont have money', 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_office': None, 'source': 'bot', 'complainant_unique_id': 'CM-20250904-KOJH-68D2-B'}
2025-09-04 07:58:09,251 - db_manager - INFO - create_grievance: Creating grievance with ID: GR-20250904-KOJH-DB61-B
2025-09-04 07:58:09,251 - db_manager - DEBUG - query_keys at generate_query_string: dict_keys(['grievance_id', 'complainant_id', 'grievance_description', 'source'])
2025-09-04 07:58:09,251 - db_manager - DEBUG - Generated query: INSERT INTO grievances (grievance_id, complainant_id, grievance_description, source) VALUES (%s, %s, %s, %s) RETURNING grievance_id
2025-09-04 07:58:09,251 - db_manager - DEBUG - len of query_keys: 4
2025-09-04 07:58:09,251 - db_manager - DEBUG - Generated query: INSERT INTO grievances (grievance_id, complainant_id, grievance_description, source) VALUES (%s, %s, %s, %s) RETURNING grievance_id
2025-09-04 07:58:09,251 - db_manager - INFO - Connecting to database: grievance_db
2025-09-04 07:58:09,257 - db_manager - INFO - Starting database transaction
2025-09-04 07:58:09,267 - db_manager - INFO - Transaction committed successfully
2025-09-04 07:58:09,267 - db_manager - INFO - Database connection closed. Duration: 0.02s
2025-09-04 07:58:09,267 - db_manager - INFO - create_grievance: Successfully created grievance with ID: GR-20250904-KOJH-DB61-B
2025-09-04 10:12:03,277 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-04 10:12:03,277 - db_manager - INFO - Database manager initialized successfully
2025-09-04 10:12:03,277 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-04 10:12:03,277 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-04 10:12:03,277 - db_manager - INFO - Database manager initialized successfully
2025-09-04 10:12:03,277 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-04 10:12:03,278 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-04 10:12:03,278 - db_manager - INFO - Database manager initialized successfully
2025-09-04 10:12:03,278 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-04 10:12:03,278 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-04 10:12:03,278 - db_manager - INFO - Database manager initialized successfully
2025-09-04 10:12:03,278 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-04 10:12:03,278 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-04 10:12:03,278 - db_manager - INFO - Database manager initialized successfully
2025-09-04 10:12:03,278 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-04 10:12:03,278 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-04 10:12:03,278 - db_manager - INFO - Database manager initialized successfully
2025-09-04 10:12:03,278 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-04 10:12:03,278 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-04 10:12:03,278 - db_manager - INFO - Database manager initialized successfully
2025-09-04 10:12:03,278 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-04 10:12:03,278 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-04 10:12:03,278 - db_manager - INFO - Database manager initialized successfully
2025-09-04 10:12:03,278 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-04 10:12:03,278 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-04 10:12:03,279 - db_manager - INFO - Database manager initialized successfully
2025-09-04 10:12:03,279 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-04 10:12:03,279 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-04 10:12:03,279 - db_manager - INFO - Database manager initialized successfully
2025-09-04 10:12:03,279 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-04 10:13:21,931 - db_manager - INFO - Connecting to database: grievance_db
2025-09-04 10:13:21,938 - db_manager - INFO - Starting database transaction
2025-09-04 10:13:21,938 - db_manager - INFO - Executing get_complainant_by_id: 
            SELECT complainant_id, complainant_unique_id, complainant_full_name,    complainant_pho...
2025-09-04 10:13:21,940 - db_manager - INFO - get_complainant_by_id completed in 0.01s. Rows: 0
2025-09-04 10:13:21,940 - db_manager - INFO - Transaction committed successfully
2025-09-04 10:13:21,940 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-04 10:13:21,941 - db_manager - ERROR - Error - submitting_grievance_to_db: complainant_id not found in db: CM-20250904-KOJH-5322-B
2025-09-04 10:13:21,941 - db_manager - INFO - Connecting to database: grievance_db
2025-09-04 10:13:21,946 - db_manager - INFO - Starting database transaction
2025-09-04 10:13:21,946 - db_manager - INFO - Executing get_grievance_files: 
            SELECT file_id, file_name, file_type, file_size, upload_timestamp
            FROM file...
2025-09-04 10:13:21,949 - db_manager - INFO - get_grievance_files completed in 0.01s. Rows: 0
2025-09-04 10:13:21,950 - db_manager - INFO - Transaction committed successfully
2025-09-04 10:13:21,950 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-04 10:13:21,950 - db_manager - INFO - Connecting to database: grievance_db
2025-09-04 10:13:21,955 - db_manager - INFO - Starting database transaction
2025-09-04 10:13:21,956 - db_manager - INFO - Executing get_grievance_files: 
            SELECT file_id, file_name, file_type, file_size, upload_timestamp
            FROM file...
2025-09-04 10:13:21,956 - db_manager - INFO - get_grievance_files completed in 0.01s. Rows: 0
2025-09-04 10:13:21,957 - db_manager - INFO - Transaction committed successfully
2025-09-04 10:13:21,957 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-04 10:13:22,000 - db_manager - INFO - Connecting to database: grievance_db
2025-09-04 10:13:22,006 - db_manager - INFO - Starting database transaction
2025-09-04 10:13:22,006 - db_manager - INFO - Executing get_grievance_by_id: 
                SELECT g.*, c.complainant_full_name, c.complainant_phone, c.complainant_email,
    ...
2025-09-04 10:13:22,010 - db_manager - INFO - get_grievance_by_id completed in 0.01s. Rows: 0
2025-09-04 10:13:22,010 - db_manager - INFO - Transaction committed successfully
2025-09-04 10:13:22,010 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-04 10:13:22,082 - db_manager - INFO - Connecting to database: grievance_db
2025-09-04 10:13:22,088 - db_manager - INFO - Starting database transaction
2025-09-04 10:13:22,088 - db_manager - INFO - Executing get_complainant_id_from_grievance_id: 
            SELECT complainant_id
            FROM grievances
            WHERE grievance_id = %s
 ...
2025-09-04 10:13:22,089 - db_manager - INFO - get_complainant_id_from_grievance_id completed in 0.01s. Rows: 0
2025-09-04 10:13:22,089 - db_manager - INFO - Transaction committed successfully
2025-09-04 10:13:22,090 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-04 10:13:22,090 - db_manager - INFO - update_complainant: Updating complainant with ID: None
2025-09-04 10:13:22,090 - db_manager - DEBUG - encrypted and hashed data at encrypt_and_hash_sensitive_data: {}
2025-09-04 10:13:22,090 - db_manager - DEBUG - encrypted_data at update_complainant: {}
2025-09-04 10:13:22,090 - db_manager - DEBUG - execute_update values: (None,)
2025-09-04 10:13:22,090 - db_manager - DEBUG - execute_update query: UPDATE complainants SET  WHERE complainant_id = %s
2025-09-04 10:13:22,090 - db_manager - INFO - Connecting to database: grievance_db
2025-09-04 10:13:22,096 - db_manager - INFO - Starting database transaction
2025-09-04 10:13:22,096 - db_manager - INFO - execute_update: Executing update query: UPDATE complainants SET  WHERE complainant_id = %s...
2025-09-04 10:13:22,098 - db_manager - ERROR - Transaction rolled back: syntax error at or near "WHERE"
LINE 1: UPDATE complainants SET  WHERE complainant_id = NULL
                                 ^

2025-09-04 10:13:22,098 - db_manager - ERROR - Database connection error: Transaction failed: syntax error at or near "WHERE"
LINE 1: UPDATE complainants SET  WHERE complainant_id = NULL
                                 ^

2025-09-04 10:13:22,098 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-04 10:13:22,098 - db_manager - ERROR - execute_update: Update failed: Failed to connect to database: Transaction failed: syntax error at or near "WHERE"
LINE 1: UPDATE complainants SET  WHERE complainant_id = NULL
                                 ^

2025-09-04 10:13:22,098 - db_manager - ERROR - Error in update_complainant: execute_update: Update execution failed: Failed to connect to database: Transaction failed: syntax error at or near "WHERE"
LINE 1: UPDATE complainants SET  WHERE complainant_id = NULL
                                 ^

2025-09-04 10:13:22,098 - db_manager - INFO - Complainant updated in db: GR-20250904-KOJH-7E4A-B
2025-09-04 10:13:22,098 - db_manager - INFO - update_grievance: Updating grievance with ID: GR-20250904-KOJH-7E4A-B
2025-09-04 10:13:22,098 - db_manager - DEBUG - execute_update values: (None, None, None, None, None, 'ne', 'GR-20250904-KOJH-7E4A-B')
2025-09-04 10:13:22,098 - db_manager - DEBUG - execute_update query: 
                    UPDATE grievances 
                    SET grievance_categories = %s,
                        grievance_summary = %s,
                        grievance_description = %s,
                        grievance_claimed_amount = %s,
                        grievance_location = %s,
                        language_code = %s,
                        grievance_modification_date = CURRENT_TIMESTAMP
                    WHERE grievance_id = %s
                    RETURNING grievance_id
                
2025-09-04 10:13:22,098 - db_manager - INFO - Connecting to database: grievance_db
2025-09-04 10:13:22,104 - db_manager - INFO - Starting database transaction
2025-09-04 10:13:22,104 - db_manager - INFO - execute_update: Executing update query: 
                    UPDATE grievances 
                    SET grievance_categories = %s,
         ...
2025-09-04 10:13:22,106 - db_manager - INFO - execute_update: Update completed in 0.01s. Affected rows: 0
2025-09-04 10:13:22,106 - db_manager - INFO - Transaction committed successfully
2025-09-04 10:13:22,106 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-04 10:13:22,106 - db_manager - INFO - update_grievance: Updated grievance with ID: GR-20250904-KOJH-7E4A-B, rows affected: 0
2025-09-04 10:13:22,106 - db_manager - INFO - Grievance updated in db: GR-20250904-KOJH-7E4A-B
2025-09-04 11:07:17,513 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-04 11:07:17,514 - db_manager - INFO - Database manager initialized successfully
2025-09-04 11:07:17,514 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-04 11:07:17,514 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-04 11:07:17,514 - db_manager - INFO - Database manager initialized successfully
2025-09-04 11:07:17,514 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-04 11:07:17,514 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-04 11:07:17,514 - db_manager - INFO - Database manager initialized successfully
2025-09-04 11:07:17,514 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-04 11:07:17,514 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-04 11:07:17,514 - db_manager - INFO - Database manager initialized successfully
2025-09-04 11:07:17,514 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-04 11:07:17,515 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-04 11:07:17,515 - db_manager - INFO - Database manager initialized successfully
2025-09-04 11:07:17,515 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-04 11:07:17,515 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-04 11:07:17,515 - db_manager - INFO - Database manager initialized successfully
2025-09-04 11:07:17,515 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-04 11:07:17,515 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-04 11:07:17,515 - db_manager - INFO - Database manager initialized successfully
2025-09-04 11:07:17,515 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-04 11:07:17,515 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-04 11:07:17,515 - db_manager - INFO - Database manager initialized successfully
2025-09-04 11:07:17,515 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-04 11:07:17,515 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-04 11:07:17,515 - db_manager - INFO - Database manager initialized successfully
2025-09-04 11:07:17,515 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-04 11:07:17,515 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-04 11:07:17,515 - db_manager - INFO - Database manager initialized successfully
2025-09-04 11:07:17,515 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-04 11:10:30,796 - db_manager - INFO - create_complainant: Creating complainant with ID: CM-20250904-KOJH-13BC-B
2025-09-04 11:10:30,796 - db_manager - DEBUG - encrypted and hashed data at encrypt_and_hash_sensitive_data: {'complainant_id': 'CM-20250904-KOJH-13BC-B', 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_unique_id': 'CM-20250904-KOJH-13BC-B'}
2025-09-04 11:10:30,797 - db_manager - DEBUG - query_keys at generate_query_string: dict_keys(['complainant_id', 'complainant_province', 'complainant_district', 'complainant_unique_id'])
2025-09-04 11:10:30,797 - db_manager - DEBUG - Generated query: INSERT INTO complainants (complainant_id, complainant_province, complainant_district, complainant_unique_id) VALUES (%s, %s, %s, %s)
2025-09-04 11:10:30,797 - db_manager - DEBUG - len of query_keys: 4
2025-09-04 11:10:30,797 - db_manager - DEBUG - Generated query: INSERT INTO complainants (complainant_id, complainant_province, complainant_district, complainant_unique_id) VALUES (%s, %s, %s, %s)
2025-09-04 11:10:30,797 - db_manager - INFO - Connecting to database: grievance_db
2025-09-04 11:10:30,804 - db_manager - INFO - Starting database transaction
2025-09-04 11:10:30,807 - db_manager - INFO - Transaction committed successfully
2025-09-04 11:10:30,807 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-04 11:10:30,807 - db_manager - INFO - create_complainant: Successfully created complainant with ID: CM-20250904-KOJH-13BC-B
2025-09-04 11:10:30,807 - db_manager - INFO - create_grievance: Creating grievance with data: {'grievance_id': 'GR-20250904-KOJH-E41A-B', 'complainant_id': 'CM-20250904-KOJH-13BC-B', 'grievance_description': 'There is dust everywhere\nkids are coughing\nneed to go to hospital', 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_office': None, 'source': 'bot', 'complainant_unique_id': 'CM-20250904-KOJH-13BC-B'}
2025-09-04 11:10:30,807 - db_manager - INFO - create_grievance: Creating grievance with ID: GR-20250904-KOJH-E41A-B
2025-09-04 11:10:30,807 - db_manager - DEBUG - query_keys at generate_query_string: dict_keys(['grievance_id', 'complainant_id', 'grievance_description', 'source'])
2025-09-04 11:10:30,807 - db_manager - DEBUG - Generated query: INSERT INTO grievances (grievance_id, complainant_id, grievance_description, source) VALUES (%s, %s, %s, %s) RETURNING grievance_id
2025-09-04 11:10:30,807 - db_manager - DEBUG - len of query_keys: 4
2025-09-04 11:10:30,807 - db_manager - DEBUG - Generated query: INSERT INTO grievances (grievance_id, complainant_id, grievance_description, source) VALUES (%s, %s, %s, %s) RETURNING grievance_id
2025-09-04 11:10:30,807 - db_manager - INFO - Connecting to database: grievance_db
2025-09-04 11:10:30,813 - db_manager - INFO - Starting database transaction
2025-09-04 11:10:30,817 - db_manager - INFO - Transaction committed successfully
2025-09-04 11:10:30,818 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-04 11:10:30,818 - db_manager - INFO - create_grievance: Successfully created grievance with ID: GR-20250904-KOJH-E41A-B
2025-09-04 11:10:30,921 - db_manager - INFO - Connecting to database: grievance_db
2025-09-04 11:10:30,926 - db_manager - INFO - Starting database transaction
2025-09-04 11:10:30,926 - db_manager - INFO - Executing get_complainant_by_id: 
            SELECT complainant_id, complainant_unique_id, complainant_full_name,    complainant_pho...
2025-09-04 11:10:30,928 - db_manager - INFO - get_complainant_by_id completed in 0.01s. Rows: 1
2025-09-04 11:10:30,928 - db_manager - INFO - Transaction committed successfully
2025-09-04 11:10:30,929 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-04 11:10:30,929 - db_manager - INFO - Connecting to database: grievance_db
2025-09-04 11:10:30,934 - db_manager - INFO - Starting database transaction
2025-09-04 11:10:30,934 - db_manager - INFO - Executing get_grievance_by_id: 
                SELECT g.*, c.complainant_full_name, c.complainant_phone, c.complainant_email,
    ...
2025-09-04 11:10:30,935 - db_manager - INFO - get_grievance_by_id completed in 0.01s. Rows: 1
2025-09-04 11:10:30,936 - db_manager - INFO - Transaction committed successfully
2025-09-04 11:10:30,936 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-04 11:10:30,936 - db_manager - INFO - update_complainant: Updating complainant with ID: CM-20250904-KOJH-13BC-B
2025-09-04 11:10:30,936 - db_manager - INFO - Connecting to database: grievance_db
2025-09-04 11:10:30,941 - db_manager - INFO - Starting database transaction
2025-09-04 11:10:30,941 - db_manager - INFO - Executing encrypt_field: SELECT encode(pgp_sym_encrypt(%s, %s), 'hex') AS encrypted...
2025-09-04 11:10:30,946 - db_manager - INFO - encrypt_field completed in 0.01s. Rows: 1
2025-09-04 11:10:30,946 - db_manager - INFO - Transaction committed successfully
2025-09-04 11:10:30,946 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-04 11:10:30,947 - db_manager - INFO - Connecting to database: grievance_db
2025-09-04 11:10:30,952 - db_manager - INFO - Starting database transaction
2025-09-04 11:10:30,952 - db_manager - INFO - Executing encrypt_field: SELECT encode(pgp_sym_encrypt(%s, %s), 'hex') AS encrypted...
2025-09-04 11:10:30,953 - db_manager - INFO - encrypt_field completed in 0.01s. Rows: 1
2025-09-04 11:10:30,953 - db_manager - INFO - Transaction committed successfully
2025-09-04 11:10:30,953 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-04 11:10:30,953 - db_manager - INFO - Connecting to database: grievance_db
2025-09-04 11:10:30,959 - db_manager - INFO - Starting database transaction
2025-09-04 11:10:30,959 - db_manager - INFO - Executing encrypt_field: SELECT encode(pgp_sym_encrypt(%s, %s), 'hex') AS encrypted...
2025-09-04 11:10:30,960 - db_manager - INFO - encrypt_field completed in 0.01s. Rows: 1
2025-09-04 11:10:30,960 - db_manager - INFO - Transaction committed successfully
2025-09-04 11:10:30,960 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-04 11:10:30,961 - db_manager - DEBUG - encrypted phone number Not provided at encrypt_complainant_data: c30d040703028bc31d2d309d272966d23d010590b78c10d927bb1c923d31f57e6b03702cecc1f088c84e3cccf8f12a9ef84b8e52f88f1954cba8f420c0a7e7bc633afa914989c6c71666c2229dc5
2025-09-04 11:10:30,961 - db_manager - DEBUG - phone number Not provided hashed to d83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f at hash_sensitive_data
2025-09-04 11:10:30,961 - db_manager - DEBUG - encrypted and hashed data at encrypt_and_hash_sensitive_data: {'complainant_full_name': 'c30d04070302e77da7de8843f7746ed23d01301533e2f2eb6d007f043a664848024bf3f2264eef7abc7098677a216323ec5b91124451d822730a4f94ef90fd9c25ceadb79d72e31ec6814881d264', 'complainant_phone': 'c30d040703028bc31d2d309d272966d23d010590b78c10d927bb1c923d31f57e6b03702cecc1f088c84e3cccf8f12a9ef84b8e52f88f1954cba8f420c0a7e7bc633afa914989c6c71666c2229dc5', 'complainant_email': 'c30d040703020a26c1b76af778e479d23d01d850538d3c1c647c04659bc79ee91b9e541774b99aed8222940f76c3a728ddcf790ceeaa593c95319a7206a55cc4ea2392c6efd009980e077e352588', 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_full_name_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'complainant_email_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'complainant_phone_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f'}
2025-09-04 11:10:30,961 - db_manager - DEBUG - encrypted_data at update_complainant: {'complainant_full_name': 'c30d04070302e77da7de8843f7746ed23d01301533e2f2eb6d007f043a664848024bf3f2264eef7abc7098677a216323ec5b91124451d822730a4f94ef90fd9c25ceadb79d72e31ec6814881d264', 'complainant_phone': 'c30d040703028bc31d2d309d272966d23d010590b78c10d927bb1c923d31f57e6b03702cecc1f088c84e3cccf8f12a9ef84b8e52f88f1954cba8f420c0a7e7bc633afa914989c6c71666c2229dc5', 'complainant_email': 'c30d040703020a26c1b76af778e479d23d01d850538d3c1c647c04659bc79ee91b9e541774b99aed8222940f76c3a728ddcf790ceeaa593c95319a7206a55cc4ea2392c6efd009980e077e352588', 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_full_name_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'complainant_email_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'complainant_phone_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f'}
2025-09-04 11:10:30,961 - db_manager - DEBUG - execute_update values: ('c30d04070302e77da7de8843f7746ed23d01301533e2f2eb6d007f043a664848024bf3f2264eef7abc7098677a216323ec5b91124451d822730a4f94ef90fd9c25ceadb79d72e31ec6814881d264', 'c30d040703028bc31d2d309d272966d23d010590b78c10d927bb1c923d31f57e6b03702cecc1f088c84e3cccf8f12a9ef84b8e52f88f1954cba8f420c0a7e7bc633afa914989c6c71666c2229dc5', 'c30d040703020a26c1b76af778e479d23d01d850538d3c1c647c04659bc79ee91b9e541774b99aed8222940f76c3a728ddcf790ceeaa593c95319a7206a55cc4ea2392c6efd009980e077e352588', 'Koshi', 'Jhapa', 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'CM-20250904-KOJH-13BC-B')
2025-09-04 11:10:30,961 - db_manager - DEBUG - execute_update query: UPDATE complainants SET complainant_full_name = %s, complainant_phone = %s, complainant_email = %s, complainant_province = %s, complainant_district = %s, complainant_full_name_hash = %s, complainant_email_hash = %s, complainant_phone_hash = %s WHERE complainant_id = %s
2025-09-04 11:10:30,961 - db_manager - INFO - Connecting to database: grievance_db
2025-09-04 11:10:30,967 - db_manager - INFO - Starting database transaction
2025-09-04 11:10:30,967 - db_manager - INFO - execute_update: Executing update query: UPDATE complainants SET complainant_full_name = %s, complainant_phone = %s, complainant_email = %s, ...
2025-09-04 11:10:30,968 - db_manager - INFO - execute_update: Update completed in 0.01s. Affected rows: 1
2025-09-04 11:10:30,970 - db_manager - INFO - Transaction committed successfully
2025-09-04 11:10:30,970 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-04 11:10:30,970 - db_manager - INFO - Complainant updated in db: CM-20250904-KOJH-13BC-B
2025-09-04 11:10:30,970 - db_manager - INFO - update_grievance: Updating grievance with ID: GR-20250904-KOJH-E41A-B
2025-09-04 11:10:30,970 - db_manager - DEBUG - execute_update values: (None, None, 'There is dust everywhere\nkids are coughing\nneed to go to hospital', None, None, 'ne', 'GR-20250904-KOJH-E41A-B')
2025-09-04 11:10:30,970 - db_manager - DEBUG - execute_update query: 
                    UPDATE grievances 
                    SET grievance_categories = %s,
                        grievance_summary = %s,
                        grievance_description = %s,
                        grievance_claimed_amount = %s,
                        grievance_location = %s,
                        language_code = %s,
                        grievance_modification_date = CURRENT_TIMESTAMP
                    WHERE grievance_id = %s
                    RETURNING grievance_id
                
2025-09-04 11:10:30,970 - db_manager - INFO - Connecting to database: grievance_db
2025-09-04 11:10:30,976 - db_manager - INFO - Starting database transaction
2025-09-04 11:10:30,976 - db_manager - INFO - execute_update: Executing update query: 
                    UPDATE grievances 
                    SET grievance_categories = %s,
         ...
2025-09-04 11:10:30,977 - db_manager - INFO - execute_update: Update completed in 0.01s. Affected rows: 1
2025-09-04 11:10:30,979 - db_manager - INFO - Transaction committed successfully
2025-09-04 11:10:30,980 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-04 11:10:30,980 - db_manager - INFO - update_grievance: Updated grievance with ID: GR-20250904-KOJH-E41A-B, rows affected: 1
2025-09-04 11:10:30,980 - db_manager - INFO - Grievance updated in db: GR-20250904-KOJH-E41A-B
2025-09-04 11:10:30,980 - db_manager - INFO - Connecting to database: grievance_db
2025-09-04 11:10:30,986 - db_manager - INFO - Starting database transaction
2025-09-04 11:10:30,986 - db_manager - INFO - Executing get_grievance_files: 
            SELECT file_id, file_name, file_type, file_size, upload_timestamp
            FROM file...
2025-09-04 11:10:30,987 - db_manager - INFO - get_grievance_files completed in 0.01s. Rows: 0
2025-09-04 11:10:30,987 - db_manager - INFO - Transaction committed successfully
2025-09-04 11:10:30,987 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-04 11:10:30,987 - db_manager - INFO - Connecting to database: grievance_db
2025-09-04 11:10:30,992 - db_manager - INFO - Starting database transaction
2025-09-04 11:10:30,993 - db_manager - INFO - Executing get_grievance_files: 
            SELECT file_id, file_name, file_type, file_size, upload_timestamp
            FROM file...
2025-09-04 11:10:30,994 - db_manager - INFO - get_grievance_files completed in 0.01s. Rows: 0
2025-09-04 11:10:30,994 - db_manager - INFO - Transaction committed successfully
2025-09-04 11:10:30,994 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-04 11:10:31,038 - db_manager - INFO - Connecting to database: grievance_db
2025-09-04 11:10:31,045 - db_manager - INFO - Starting database transaction
2025-09-04 11:10:31,045 - db_manager - INFO - Executing get_grievance_by_id: 
                SELECT g.*, c.complainant_full_name, c.complainant_phone, c.complainant_email,
    ...
2025-09-04 11:10:31,047 - db_manager - INFO - get_grievance_by_id completed in 0.01s. Rows: 1
2025-09-04 11:10:31,047 - db_manager - INFO - Transaction committed successfully
2025-09-04 11:10:31,047 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-04 11:10:31,120 - db_manager - INFO - Connecting to database: grievance_db
2025-09-04 11:10:31,126 - db_manager - INFO - Starting database transaction
2025-09-04 11:10:31,126 - db_manager - INFO - Executing get_complainant_id_from_grievance_id: 
            SELECT complainant_id
            FROM grievances
            WHERE grievance_id = %s
 ...
2025-09-04 11:10:31,127 - db_manager - INFO - get_complainant_id_from_grievance_id completed in 0.01s. Rows: 1
2025-09-04 11:10:31,127 - db_manager - INFO - Transaction committed successfully
2025-09-04 11:10:31,128 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-04 11:10:31,128 - db_manager - INFO - update_complainant: Updating complainant with ID: CM-20250904-KOJH-13BC-B
2025-09-04 11:10:31,128 - db_manager - DEBUG - encrypted and hashed data at encrypt_and_hash_sensitive_data: {}
2025-09-04 11:10:31,128 - db_manager - DEBUG - encrypted_data at update_complainant: {}
2025-09-04 11:10:31,128 - db_manager - DEBUG - execute_update values: ('CM-20250904-KOJH-13BC-B',)
2025-09-04 11:10:31,128 - db_manager - DEBUG - execute_update query: UPDATE complainants SET  WHERE complainant_id = %s
2025-09-04 11:10:31,128 - db_manager - INFO - Connecting to database: grievance_db
2025-09-04 11:10:31,133 - db_manager - INFO - Starting database transaction
2025-09-04 11:10:31,133 - db_manager - INFO - execute_update: Executing update query: UPDATE complainants SET  WHERE complainant_id = %s...
2025-09-04 11:10:31,134 - db_manager - ERROR - Transaction rolled back: syntax error at or near "WHERE"
LINE 1: UPDATE complainants SET  WHERE complainant_id = 'CM-20250904...
                                 ^

2025-09-04 11:10:31,134 - db_manager - ERROR - Database connection error: Transaction failed: syntax error at or near "WHERE"
LINE 1: UPDATE complainants SET  WHERE complainant_id = 'CM-20250904...
                                 ^

2025-09-04 11:10:31,134 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-04 11:10:31,134 - db_manager - ERROR - execute_update: Update failed: Failed to connect to database: Transaction failed: syntax error at or near "WHERE"
LINE 1: UPDATE complainants SET  WHERE complainant_id = 'CM-20250904...
                                 ^

2025-09-04 11:10:31,135 - db_manager - ERROR - Error in update_complainant: execute_update: Update execution failed: Failed to connect to database: Transaction failed: syntax error at or near "WHERE"
LINE 1: UPDATE complainants SET  WHERE complainant_id = 'CM-20250904...
                                 ^

2025-09-04 11:10:31,135 - db_manager - INFO - Complainant updated in db: GR-20250904-KOJH-E41A-B
2025-09-04 11:10:31,135 - db_manager - INFO - update_grievance: Updating grievance with ID: GR-20250904-KOJH-E41A-B
2025-09-04 11:10:31,135 - db_manager - DEBUG - execute_update values: (None, None, None, None, None, 'ne', 'GR-20250904-KOJH-E41A-B')
2025-09-04 11:10:31,135 - db_manager - DEBUG - execute_update query: 
                    UPDATE grievances 
                    SET grievance_categories = %s,
                        grievance_summary = %s,
                        grievance_description = %s,
                        grievance_claimed_amount = %s,
                        grievance_location = %s,
                        language_code = %s,
                        grievance_modification_date = CURRENT_TIMESTAMP
                    WHERE grievance_id = %s
                    RETURNING grievance_id
                
2025-09-04 11:10:31,135 - db_manager - INFO - Connecting to database: grievance_db
2025-09-04 11:10:31,140 - db_manager - INFO - Starting database transaction
2025-09-04 11:10:31,140 - db_manager - INFO - execute_update: Executing update query: 
                    UPDATE grievances 
                    SET grievance_categories = %s,
         ...
2025-09-04 11:10:31,141 - db_manager - INFO - execute_update: Update completed in 0.01s. Affected rows: 1
2025-09-04 11:10:31,143 - db_manager - INFO - Transaction committed successfully
2025-09-04 11:10:31,143 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-04 11:10:31,143 - db_manager - INFO - update_grievance: Updated grievance with ID: GR-20250904-KOJH-E41A-B, rows affected: 1
2025-09-04 11:10:31,143 - db_manager - INFO - Grievance updated in db: GR-20250904-KOJH-E41A-B
2025-09-04 11:16:11,183 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-04 11:16:11,183 - db_manager - INFO - Database manager initialized successfully
2025-09-04 11:16:11,183 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-04 11:16:11,183 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-04 11:16:11,183 - db_manager - INFO - Database manager initialized successfully
2025-09-04 11:16:11,183 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-04 11:16:11,183 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-04 11:16:11,184 - db_manager - INFO - Database manager initialized successfully
2025-09-04 11:16:11,184 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-04 11:16:11,184 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-04 11:16:11,184 - db_manager - INFO - Database manager initialized successfully
2025-09-04 11:16:11,184 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-04 11:16:11,184 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-04 11:16:11,184 - db_manager - INFO - Database manager initialized successfully
2025-09-04 11:16:11,184 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-04 11:16:11,184 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-04 11:16:11,184 - db_manager - INFO - Database manager initialized successfully
2025-09-04 11:16:11,184 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-04 11:16:11,184 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-04 11:16:11,184 - db_manager - INFO - Database manager initialized successfully
2025-09-04 11:16:11,184 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-04 11:16:11,184 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-04 11:16:11,184 - db_manager - INFO - Database manager initialized successfully
2025-09-04 11:16:11,184 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-04 11:16:11,184 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-04 11:16:11,184 - db_manager - INFO - Database manager initialized successfully
2025-09-04 11:16:11,184 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-04 11:16:11,185 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-04 11:16:11,185 - db_manager - INFO - Database manager initialized successfully
2025-09-04 11:16:11,185 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-04 11:18:37,938 - db_manager - INFO - create_complainant: Creating complainant with ID: CM-20250904-KOJH-7A40-B
2025-09-04 11:18:37,939 - db_manager - DEBUG - encrypted and hashed data at encrypt_and_hash_sensitive_data: {'complainant_id': 'CM-20250904-KOJH-7A40-B', 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_unique_id': 'CM-20250904-KOJH-7A40-B'}
2025-09-04 11:18:37,939 - db_manager - DEBUG - query_keys at generate_query_string: dict_keys(['complainant_id', 'complainant_province', 'complainant_district', 'complainant_unique_id'])
2025-09-04 11:18:37,939 - db_manager - DEBUG - Generated query: INSERT INTO complainants (complainant_id, complainant_province, complainant_district, complainant_unique_id) VALUES (%s, %s, %s, %s)
2025-09-04 11:18:37,939 - db_manager - DEBUG - len of query_keys: 4
2025-09-04 11:18:37,939 - db_manager - DEBUG - Generated query: INSERT INTO complainants (complainant_id, complainant_province, complainant_district, complainant_unique_id) VALUES (%s, %s, %s, %s)
2025-09-04 11:18:37,940 - db_manager - INFO - Connecting to database: grievance_db
2025-09-04 11:18:37,947 - db_manager - INFO - Starting database transaction
2025-09-04 11:18:37,949 - db_manager - INFO - Transaction committed successfully
2025-09-04 11:18:37,950 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-04 11:18:37,950 - db_manager - INFO - create_complainant: Successfully created complainant with ID: CM-20250904-KOJH-7A40-B
2025-09-04 11:18:37,950 - db_manager - INFO - create_grievance: Creating grievance with data: {'grievance_id': 'GR-20250904-KOJH-D144-B', 'complainant_id': 'CM-20250904-KOJH-7A40-B', 'grievance_description': 'There is dust everywhere kids are coughing need to go to hospital', 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_office': None, 'source': 'bot', 'complainant_unique_id': 'CM-20250904-KOJH-7A40-B'}
2025-09-04 11:18:37,950 - db_manager - INFO - create_grievance: Creating grievance with ID: GR-20250904-KOJH-D144-B
2025-09-04 11:18:37,950 - db_manager - DEBUG - query_keys at generate_query_string: dict_keys(['grievance_id', 'complainant_id', 'grievance_description', 'source'])
2025-09-04 11:18:37,950 - db_manager - DEBUG - Generated query: INSERT INTO grievances (grievance_id, complainant_id, grievance_description, source) VALUES (%s, %s, %s, %s) RETURNING grievance_id
2025-09-04 11:18:37,950 - db_manager - DEBUG - len of query_keys: 4
2025-09-04 11:18:37,950 - db_manager - DEBUG - Generated query: INSERT INTO grievances (grievance_id, complainant_id, grievance_description, source) VALUES (%s, %s, %s, %s) RETURNING grievance_id
2025-09-04 11:18:37,950 - db_manager - INFO - Connecting to database: grievance_db
2025-09-04 11:18:37,956 - db_manager - INFO - Starting database transaction
2025-09-04 11:18:37,960 - db_manager - INFO - Transaction committed successfully
2025-09-04 11:18:37,960 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-04 11:18:37,960 - db_manager - INFO - create_grievance: Successfully created grievance with ID: GR-20250904-KOJH-D144-B
2025-09-04 11:18:38,064 - db_manager - INFO - Connecting to database: grievance_db
2025-09-04 11:18:38,070 - db_manager - INFO - Starting database transaction
2025-09-04 11:18:38,070 - db_manager - INFO - Executing get_complainant_by_id: 
            SELECT complainant_id, complainant_unique_id, complainant_full_name,    complainant_pho...
2025-09-04 11:18:38,071 - db_manager - INFO - get_complainant_by_id completed in 0.01s. Rows: 1
2025-09-04 11:18:38,072 - db_manager - INFO - Transaction committed successfully
2025-09-04 11:18:38,072 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-04 11:18:38,072 - db_manager - INFO - Connecting to database: grievance_db
2025-09-04 11:18:38,077 - db_manager - INFO - Starting database transaction
2025-09-04 11:18:38,077 - db_manager - INFO - Executing get_grievance_by_id: 
                SELECT g.*, c.complainant_full_name, c.complainant_phone, c.complainant_email,
    ...
2025-09-04 11:18:38,078 - db_manager - INFO - get_grievance_by_id completed in 0.01s. Rows: 1
2025-09-04 11:18:38,079 - db_manager - INFO - Transaction committed successfully
2025-09-04 11:18:38,079 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-04 11:18:38,079 - db_manager - INFO - update_complainant: Updating complainant with ID: CM-20250904-KOJH-7A40-B
2025-09-04 11:18:38,079 - db_manager - INFO - Connecting to database: grievance_db
2025-09-04 11:18:38,084 - db_manager - INFO - Starting database transaction
2025-09-04 11:18:38,084 - db_manager - INFO - Executing encrypt_field: SELECT encode(pgp_sym_encrypt(%s, %s), 'hex') AS encrypted...
2025-09-04 11:18:38,086 - db_manager - INFO - encrypt_field completed in 0.01s. Rows: 1
2025-09-04 11:18:38,086 - db_manager - INFO - Transaction committed successfully
2025-09-04 11:18:38,087 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-04 11:18:38,087 - db_manager - INFO - Connecting to database: grievance_db
2025-09-04 11:18:38,091 - db_manager - INFO - Starting database transaction
2025-09-04 11:18:38,092 - db_manager - INFO - Executing encrypt_field: SELECT encode(pgp_sym_encrypt(%s, %s), 'hex') AS encrypted...
2025-09-04 11:18:38,093 - db_manager - INFO - encrypt_field completed in 0.01s. Rows: 1
2025-09-04 11:18:38,093 - db_manager - INFO - Transaction committed successfully
2025-09-04 11:18:38,093 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-04 11:18:38,093 - db_manager - INFO - Connecting to database: grievance_db
2025-09-04 11:18:38,098 - db_manager - INFO - Starting database transaction
2025-09-04 11:18:38,098 - db_manager - INFO - Executing encrypt_field: SELECT encode(pgp_sym_encrypt(%s, %s), 'hex') AS encrypted...
2025-09-04 11:18:38,099 - db_manager - INFO - encrypt_field completed in 0.01s. Rows: 1
2025-09-04 11:18:38,099 - db_manager - INFO - Transaction committed successfully
2025-09-04 11:18:38,100 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-04 11:18:38,100 - db_manager - DEBUG - encrypted phone number Not provided at encrypt_complainant_data: c30d04070302272963b5bd31fa6565d23d01a2e52d316cbbbde6ea946c0a3112d48076902f48a1ac843f8c0700fc13f455c7e7de73f933be60a69e0a2862757fe0305b6c75e70d3c60e2cf84405a
2025-09-04 11:18:38,100 - db_manager - DEBUG - phone number Not provided hashed to d83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f at hash_sensitive_data
2025-09-04 11:18:38,100 - db_manager - DEBUG - encrypted and hashed data at encrypt_and_hash_sensitive_data: {'complainant_full_name': 'c30d04070302a20cd883aa552b0373d23d018b950788bd11cb83ed86eb529905d5f74b670c5a753e210bd5cb875c6bc3fda192b9cffca0bcd807ec3a7dc9137a9593a29a0d897cd5dd9fef746a8f', 'complainant_phone': 'c30d04070302272963b5bd31fa6565d23d01a2e52d316cbbbde6ea946c0a3112d48076902f48a1ac843f8c0700fc13f455c7e7de73f933be60a69e0a2862757fe0305b6c75e70d3c60e2cf84405a', 'complainant_email': 'c30d04070302d89ea6641e5e9e2b65d23d015dae21ab1940a050058639ec5547ff7f4a726456f0d60f826d5216cad3a73f7169ee1c7068a6dc79deb0c7585db8980a67fb89d683922a9963d93416', 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_full_name_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'complainant_email_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'complainant_phone_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f'}
2025-09-04 11:18:38,100 - db_manager - DEBUG - encrypted_data at update_complainant: {'complainant_full_name': 'c30d04070302a20cd883aa552b0373d23d018b950788bd11cb83ed86eb529905d5f74b670c5a753e210bd5cb875c6bc3fda192b9cffca0bcd807ec3a7dc9137a9593a29a0d897cd5dd9fef746a8f', 'complainant_phone': 'c30d04070302272963b5bd31fa6565d23d01a2e52d316cbbbde6ea946c0a3112d48076902f48a1ac843f8c0700fc13f455c7e7de73f933be60a69e0a2862757fe0305b6c75e70d3c60e2cf84405a', 'complainant_email': 'c30d04070302d89ea6641e5e9e2b65d23d015dae21ab1940a050058639ec5547ff7f4a726456f0d60f826d5216cad3a73f7169ee1c7068a6dc79deb0c7585db8980a67fb89d683922a9963d93416', 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_full_name_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'complainant_email_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'complainant_phone_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f'}
2025-09-04 11:18:38,100 - db_manager - DEBUG - execute_update values: ('c30d04070302a20cd883aa552b0373d23d018b950788bd11cb83ed86eb529905d5f74b670c5a753e210bd5cb875c6bc3fda192b9cffca0bcd807ec3a7dc9137a9593a29a0d897cd5dd9fef746a8f', 'c30d04070302272963b5bd31fa6565d23d01a2e52d316cbbbde6ea946c0a3112d48076902f48a1ac843f8c0700fc13f455c7e7de73f933be60a69e0a2862757fe0305b6c75e70d3c60e2cf84405a', 'c30d04070302d89ea6641e5e9e2b65d23d015dae21ab1940a050058639ec5547ff7f4a726456f0d60f826d5216cad3a73f7169ee1c7068a6dc79deb0c7585db8980a67fb89d683922a9963d93416', 'Koshi', 'Jhapa', 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'CM-20250904-KOJH-7A40-B')
2025-09-04 11:18:38,100 - db_manager - DEBUG - execute_update query: UPDATE complainants SET complainant_full_name = %s, complainant_phone = %s, complainant_email = %s, complainant_province = %s, complainant_district = %s, complainant_full_name_hash = %s, complainant_email_hash = %s, complainant_phone_hash = %s WHERE complainant_id = %s
2025-09-04 11:18:38,100 - db_manager - INFO - Connecting to database: grievance_db
2025-09-04 11:18:38,105 - db_manager - INFO - Starting database transaction
2025-09-04 11:18:38,105 - db_manager - INFO - execute_update: Executing update query: UPDATE complainants SET complainant_full_name = %s, complainant_phone = %s, complainant_email = %s, ...
2025-09-04 11:18:38,107 - db_manager - INFO - execute_update: Update completed in 0.01s. Affected rows: 1
2025-09-04 11:18:38,108 - db_manager - INFO - Transaction committed successfully
2025-09-04 11:18:38,108 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-04 11:18:38,108 - db_manager - INFO - Complainant updated in db: CM-20250904-KOJH-7A40-B
2025-09-04 11:18:38,108 - db_manager - INFO - update_grievance: Updating grievance with ID: GR-20250904-KOJH-D144-B
2025-09-04 11:18:38,109 - db_manager - DEBUG - execute_update values: (None, None, 'There is dust everywhere kids are coughing need to go to hospital', None, None, 'ne', 'GR-20250904-KOJH-D144-B')
2025-09-04 11:18:38,109 - db_manager - DEBUG - execute_update query: 
                    UPDATE grievances 
                    SET grievance_categories = %s,
                        grievance_summary = %s,
                        grievance_description = %s,
                        grievance_claimed_amount = %s,
                        grievance_location = %s,
                        language_code = %s,
                        grievance_modification_date = CURRENT_TIMESTAMP
                    WHERE grievance_id = %s
                    RETURNING grievance_id
                
2025-09-04 11:18:38,109 - db_manager - INFO - Connecting to database: grievance_db
2025-09-04 11:18:38,113 - db_manager - INFO - Starting database transaction
2025-09-04 11:18:38,113 - db_manager - INFO - execute_update: Executing update query: 
                    UPDATE grievances 
                    SET grievance_categories = %s,
         ...
2025-09-04 11:18:38,115 - db_manager - INFO - execute_update: Update completed in 0.01s. Affected rows: 1
2025-09-04 11:18:38,118 - db_manager - INFO - Transaction committed successfully
2025-09-04 11:18:38,118 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-04 11:18:38,118 - db_manager - INFO - update_grievance: Updated grievance with ID: GR-20250904-KOJH-D144-B, rows affected: 1
2025-09-04 11:18:38,118 - db_manager - INFO - Grievance updated in db: GR-20250904-KOJH-D144-B
2025-09-04 11:18:38,119 - db_manager - INFO - Connecting to database: grievance_db
2025-09-04 11:18:38,124 - db_manager - INFO - Starting database transaction
2025-09-04 11:18:38,124 - db_manager - INFO - Executing get_grievance_files: 
            SELECT file_id, file_name, file_type, file_size, upload_timestamp
            FROM file...
2025-09-04 11:18:38,125 - db_manager - INFO - get_grievance_files completed in 0.01s. Rows: 0
2025-09-04 11:18:38,125 - db_manager - INFO - Transaction committed successfully
2025-09-04 11:18:38,126 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-04 11:18:38,126 - db_manager - INFO - Connecting to database: grievance_db
2025-09-04 11:18:38,130 - db_manager - INFO - Starting database transaction
2025-09-04 11:18:38,131 - db_manager - INFO - Executing get_grievance_files: 
            SELECT file_id, file_name, file_type, file_size, upload_timestamp
            FROM file...
2025-09-04 11:18:38,132 - db_manager - INFO - get_grievance_files completed in 0.01s. Rows: 0
2025-09-04 11:18:38,132 - db_manager - INFO - Transaction committed successfully
2025-09-04 11:18:38,132 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-04 11:18:38,175 - db_manager - INFO - Connecting to database: grievance_db
2025-09-04 11:18:38,181 - db_manager - INFO - Starting database transaction
2025-09-04 11:18:38,182 - db_manager - INFO - Executing get_grievance_by_id: 
                SELECT g.*, c.complainant_full_name, c.complainant_phone, c.complainant_email,
    ...
2025-09-04 11:18:38,184 - db_manager - INFO - get_grievance_by_id completed in 0.01s. Rows: 1
2025-09-04 11:18:38,184 - db_manager - INFO - Transaction committed successfully
2025-09-04 11:18:38,185 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-04 11:18:38,257 - db_manager - INFO - Connecting to database: grievance_db
2025-09-04 11:18:38,263 - db_manager - INFO - Starting database transaction
2025-09-04 11:18:38,263 - db_manager - INFO - Executing get_complainant_id_from_grievance_id: 
            SELECT complainant_id
            FROM grievances
            WHERE grievance_id = %s
 ...
2025-09-04 11:18:38,264 - db_manager - INFO - get_complainant_id_from_grievance_id completed in 0.01s. Rows: 1
2025-09-04 11:18:38,265 - db_manager - INFO - Transaction committed successfully
2025-09-04 11:18:38,265 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-04 11:18:38,265 - db_manager - INFO - update_complainant: Updating complainant with ID: CM-20250904-KOJH-7A40-B
2025-09-04 11:18:38,265 - db_manager - DEBUG - encrypted and hashed data at encrypt_and_hash_sensitive_data: {}
2025-09-04 11:18:38,265 - db_manager - DEBUG - encrypted_data at update_complainant: {}
2025-09-04 11:18:38,265 - db_manager - DEBUG - execute_update values: ('CM-20250904-KOJH-7A40-B',)
2025-09-04 11:18:38,265 - db_manager - DEBUG - execute_update query: UPDATE complainants SET  WHERE complainant_id = %s
2025-09-04 11:18:38,265 - db_manager - INFO - Connecting to database: grievance_db
2025-09-04 11:18:38,270 - db_manager - INFO - Starting database transaction
2025-09-04 11:18:38,270 - db_manager - INFO - execute_update: Executing update query: UPDATE complainants SET  WHERE complainant_id = %s...
2025-09-04 11:18:38,271 - db_manager - ERROR - Transaction rolled back: syntax error at or near "WHERE"
LINE 1: UPDATE complainants SET  WHERE complainant_id = 'CM-20250904...
                                 ^

2025-09-04 11:18:38,271 - db_manager - ERROR - Database connection error: Transaction failed: syntax error at or near "WHERE"
LINE 1: UPDATE complainants SET  WHERE complainant_id = 'CM-20250904...
                                 ^

2025-09-04 11:18:38,272 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-04 11:18:38,272 - db_manager - ERROR - execute_update: Update failed: Failed to connect to database: Transaction failed: syntax error at or near "WHERE"
LINE 1: UPDATE complainants SET  WHERE complainant_id = 'CM-20250904...
                                 ^

2025-09-04 11:18:38,272 - db_manager - ERROR - Error in update_complainant: execute_update: Update execution failed: Failed to connect to database: Transaction failed: syntax error at or near "WHERE"
LINE 1: UPDATE complainants SET  WHERE complainant_id = 'CM-20250904...
                                 ^

2025-09-04 11:18:38,272 - db_manager - INFO - Complainant updated in db: GR-20250904-KOJH-D144-B
2025-09-04 11:18:38,272 - db_manager - INFO - update_grievance: Updating grievance with ID: GR-20250904-KOJH-D144-B
2025-09-04 11:18:38,272 - db_manager - DEBUG - execute_update values: (None, None, None, None, None, 'ne', 'GR-20250904-KOJH-D144-B')
2025-09-04 11:18:38,272 - db_manager - DEBUG - execute_update query: 
                    UPDATE grievances 
                    SET grievance_categories = %s,
                        grievance_summary = %s,
                        grievance_description = %s,
                        grievance_claimed_amount = %s,
                        grievance_location = %s,
                        language_code = %s,
                        grievance_modification_date = CURRENT_TIMESTAMP
                    WHERE grievance_id = %s
                    RETURNING grievance_id
                
2025-09-04 11:18:38,272 - db_manager - INFO - Connecting to database: grievance_db
2025-09-04 11:18:38,277 - db_manager - INFO - Starting database transaction
2025-09-04 11:18:38,277 - db_manager - INFO - execute_update: Executing update query: 
                    UPDATE grievances 
                    SET grievance_categories = %s,
         ...
2025-09-04 11:18:38,278 - db_manager - INFO - execute_update: Update completed in 0.01s. Affected rows: 1
2025-09-04 11:18:38,280 - db_manager - INFO - Transaction committed successfully
2025-09-04 11:18:38,280 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-04 11:18:38,280 - db_manager - INFO - update_grievance: Updated grievance with ID: GR-20250904-KOJH-D144-B, rows affected: 1
2025-09-04 11:18:38,280 - db_manager - INFO - Grievance updated in db: GR-20250904-KOJH-D144-B
2025-09-04 11:25:44,643 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-04 11:25:44,644 - db_manager - INFO - Database manager initialized successfully
2025-09-04 11:25:44,644 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-04 11:25:44,644 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-04 11:25:44,644 - db_manager - INFO - Database manager initialized successfully
2025-09-04 11:25:44,644 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-04 11:25:44,644 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-04 11:25:44,644 - db_manager - INFO - Database manager initialized successfully
2025-09-04 11:25:44,644 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-04 11:25:44,644 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-04 11:25:44,644 - db_manager - INFO - Database manager initialized successfully
2025-09-04 11:25:44,644 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-04 11:25:44,644 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-04 11:25:44,644 - db_manager - INFO - Database manager initialized successfully
2025-09-04 11:25:44,644 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-04 11:25:44,644 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-04 11:25:44,644 - db_manager - INFO - Database manager initialized successfully
2025-09-04 11:25:44,644 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-04 11:25:44,644 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-04 11:25:44,644 - db_manager - INFO - Database manager initialized successfully
2025-09-04 11:25:44,645 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-04 11:25:44,645 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-04 11:25:44,645 - db_manager - INFO - Database manager initialized successfully
2025-09-04 11:25:44,645 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-04 11:25:44,645 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-04 11:25:44,645 - db_manager - INFO - Database manager initialized successfully
2025-09-04 11:25:44,645 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-04 11:25:44,645 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-04 11:25:44,645 - db_manager - INFO - Database manager initialized successfully
2025-09-04 11:25:44,645 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-04 11:27:01,268 - db_manager - INFO - create_complainant: Creating complainant with ID: CM-20250904-KOJH-0173-B
2025-09-04 11:27:01,268 - db_manager - DEBUG - encrypted and hashed data at encrypt_and_hash_sensitive_data: {'complainant_id': 'CM-20250904-KOJH-0173-B', 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_unique_id': 'CM-20250904-KOJH-0173-B'}
2025-09-04 11:27:01,268 - db_manager - DEBUG - query_keys at generate_query_string: dict_keys(['complainant_id', 'complainant_province', 'complainant_district', 'complainant_unique_id'])
2025-09-04 11:27:01,268 - db_manager - DEBUG - Generated query: INSERT INTO complainants (complainant_id, complainant_province, complainant_district, complainant_unique_id) VALUES (%s, %s, %s, %s)
2025-09-04 11:27:01,268 - db_manager - DEBUG - len of query_keys: 4
2025-09-04 11:27:01,268 - db_manager - DEBUG - Generated query: INSERT INTO complainants (complainant_id, complainant_province, complainant_district, complainant_unique_id) VALUES (%s, %s, %s, %s)
2025-09-04 11:27:01,268 - db_manager - INFO - Connecting to database: grievance_db
2025-09-04 11:27:01,276 - db_manager - INFO - Starting database transaction
2025-09-04 11:27:01,278 - db_manager - INFO - Transaction committed successfully
2025-09-04 11:27:01,279 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-04 11:27:01,279 - db_manager - INFO - create_complainant: Successfully created complainant with ID: CM-20250904-KOJH-0173-B
2025-09-04 11:27:01,279 - db_manager - INFO - create_grievance: Creating grievance with data: {'grievance_id': 'GR-20250904-KOJH-A5B3-B', 'complainant_id': 'CM-20250904-KOJH-0173-B', 'grievance_description': 'There is dust everywhere kids are coughing need to go to hospital', 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_office': None, 'source': 'bot', 'complainant_unique_id': 'CM-20250904-KOJH-0173-B'}
2025-09-04 11:27:01,279 - db_manager - INFO - create_grievance: Creating grievance with ID: GR-20250904-KOJH-A5B3-B
2025-09-04 11:27:01,279 - db_manager - DEBUG - query_keys at generate_query_string: dict_keys(['grievance_id', 'complainant_id', 'grievance_description', 'source'])
2025-09-04 11:27:01,279 - db_manager - DEBUG - Generated query: INSERT INTO grievances (grievance_id, complainant_id, grievance_description, source) VALUES (%s, %s, %s, %s) RETURNING grievance_id
2025-09-04 11:27:01,279 - db_manager - DEBUG - len of query_keys: 4
2025-09-04 11:27:01,279 - db_manager - DEBUG - Generated query: INSERT INTO grievances (grievance_id, complainant_id, grievance_description, source) VALUES (%s, %s, %s, %s) RETURNING grievance_id
2025-09-04 11:27:01,279 - db_manager - INFO - Connecting to database: grievance_db
2025-09-04 11:27:01,285 - db_manager - INFO - Starting database transaction
2025-09-04 11:27:01,290 - db_manager - INFO - Transaction committed successfully
2025-09-04 11:27:01,290 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-04 11:27:01,290 - db_manager - INFO - create_grievance: Successfully created grievance with ID: GR-20250904-KOJH-A5B3-B
2025-09-04 11:27:33,915 - db_manager - INFO - Connecting to database: grievance_db
2025-09-04 11:27:33,921 - db_manager - INFO - Starting database transaction
2025-09-04 11:27:33,921 - db_manager - INFO - Executing get_complainant_by_id: 
            SELECT complainant_id, complainant_unique_id, complainant_full_name,    complainant_pho...
2025-09-04 11:27:33,923 - db_manager - INFO - get_complainant_by_id completed in 0.01s. Rows: 1
2025-09-04 11:27:33,923 - db_manager - INFO - Transaction committed successfully
2025-09-04 11:27:33,924 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-04 11:27:33,924 - db_manager - INFO - Connecting to database: grievance_db
2025-09-04 11:27:33,930 - db_manager - INFO - Starting database transaction
2025-09-04 11:27:33,931 - db_manager - INFO - Executing get_grievance_by_id: 
                SELECT g.*, c.complainant_full_name, c.complainant_phone, c.complainant_email,
    ...
2025-09-04 11:27:33,933 - db_manager - INFO - get_grievance_by_id completed in 0.01s. Rows: 1
2025-09-04 11:27:33,933 - db_manager - INFO - Transaction committed successfully
2025-09-04 11:27:33,933 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-04 11:27:33,933 - db_manager - INFO - update_complainant: Updating complainant with ID: CM-20250904-KOJH-0173-B
2025-09-04 11:27:33,933 - db_manager - INFO - Connecting to database: grievance_db
2025-09-04 11:27:33,938 - db_manager - INFO - Starting database transaction
2025-09-04 11:27:33,939 - db_manager - INFO - Executing encrypt_field: SELECT encode(pgp_sym_encrypt(%s, %s), 'hex') AS encrypted...
2025-09-04 11:27:33,942 - db_manager - INFO - encrypt_field completed in 0.01s. Rows: 1
2025-09-04 11:27:33,942 - db_manager - INFO - Transaction committed successfully
2025-09-04 11:27:33,942 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-04 11:27:33,942 - db_manager - INFO - Connecting to database: grievance_db
2025-09-04 11:27:33,948 - db_manager - INFO - Starting database transaction
2025-09-04 11:27:33,948 - db_manager - INFO - Executing encrypt_field: SELECT encode(pgp_sym_encrypt(%s, %s), 'hex') AS encrypted...
2025-09-04 11:27:33,949 - db_manager - INFO - encrypt_field completed in 0.01s. Rows: 1
2025-09-04 11:27:33,949 - db_manager - INFO - Transaction committed successfully
2025-09-04 11:27:33,949 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-04 11:27:33,950 - db_manager - INFO - Connecting to database: grievance_db
2025-09-04 11:27:33,955 - db_manager - INFO - Starting database transaction
2025-09-04 11:27:33,955 - db_manager - INFO - Executing encrypt_field: SELECT encode(pgp_sym_encrypt(%s, %s), 'hex') AS encrypted...
2025-09-04 11:27:33,957 - db_manager - INFO - encrypt_field completed in 0.01s. Rows: 1
2025-09-04 11:27:33,957 - db_manager - INFO - Transaction committed successfully
2025-09-04 11:27:33,957 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-04 11:27:33,957 - db_manager - DEBUG - encrypted phone number +9779876543219 at encrypt_complainant_data: c30d040703029b47cfaa40b29e0577d23f01d96852e8509938dfd1ad13a058203e92a5e868c0b50a910127155be165007ea7ca735d381f9c43ff117d90e06249003a44e80749bb2523b18a6dbcf5b507
2025-09-04 11:27:33,957 - db_manager - DEBUG - phone number +9779876543219 hashed to cf42591c8ae28c8a9db30d058769bfba382f6eb81a5fe2cc3a94a43243277a6c at hash_sensitive_data
2025-09-04 11:27:33,957 - db_manager - DEBUG - encrypted and hashed data at encrypt_and_hash_sensitive_data: {'complainant_full_name': 'c30d04070302156ff95a2b9cb87777d23a0177d2153ea3c3ab612b951101bf07e0efc1eb13de682f8e2e37e2b1d3431bd7c1fab6c09d176dfe59c49dbf5fd2a9e069d10c1dfc6edf0c7cf1', 'complainant_phone': 'c30d040703029b47cfaa40b29e0577d23f01d96852e8509938dfd1ad13a058203e92a5e868c0b50a910127155be165007ea7ca735d381f9c43ff117d90e06249003a44e80749bb2523b18a6dbcf5b507', 'complainant_email': 'c30d040703021fd2c60eaa66c22d68d23d01d68c5db4d126c7eae7adbcf7a9538cb037f6a3c3bd37133013c4f12714af8eaf3576cfcc232793e1241814392e13d878006695530c15f9e099d2b3d7', 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_email_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'complainant_full_name_hash': 'c876c3c70bccb64ec53613c23d7f9f72272e866ca8795283c3147f2961039a3f', 'complainant_phone_hash': 'cf42591c8ae28c8a9db30d058769bfba382f6eb81a5fe2cc3a94a43243277a6c'}
2025-09-04 11:27:33,957 - db_manager - DEBUG - encrypted_data at update_complainant: {'complainant_full_name': 'c30d04070302156ff95a2b9cb87777d23a0177d2153ea3c3ab612b951101bf07e0efc1eb13de682f8e2e37e2b1d3431bd7c1fab6c09d176dfe59c49dbf5fd2a9e069d10c1dfc6edf0c7cf1', 'complainant_phone': 'c30d040703029b47cfaa40b29e0577d23f01d96852e8509938dfd1ad13a058203e92a5e868c0b50a910127155be165007ea7ca735d381f9c43ff117d90e06249003a44e80749bb2523b18a6dbcf5b507', 'complainant_email': 'c30d040703021fd2c60eaa66c22d68d23d01d68c5db4d126c7eae7adbcf7a9538cb037f6a3c3bd37133013c4f12714af8eaf3576cfcc232793e1241814392e13d878006695530c15f9e099d2b3d7', 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_email_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'complainant_full_name_hash': 'c876c3c70bccb64ec53613c23d7f9f72272e866ca8795283c3147f2961039a3f', 'complainant_phone_hash': 'cf42591c8ae28c8a9db30d058769bfba382f6eb81a5fe2cc3a94a43243277a6c'}
2025-09-04 11:27:33,957 - db_manager - DEBUG - execute_update values: ('c30d04070302156ff95a2b9cb87777d23a0177d2153ea3c3ab612b951101bf07e0efc1eb13de682f8e2e37e2b1d3431bd7c1fab6c09d176dfe59c49dbf5fd2a9e069d10c1dfc6edf0c7cf1', 'c30d040703029b47cfaa40b29e0577d23f01d96852e8509938dfd1ad13a058203e92a5e868c0b50a910127155be165007ea7ca735d381f9c43ff117d90e06249003a44e80749bb2523b18a6dbcf5b507', 'c30d040703021fd2c60eaa66c22d68d23d01d68c5db4d126c7eae7adbcf7a9538cb037f6a3c3bd37133013c4f12714af8eaf3576cfcc232793e1241814392e13d878006695530c15f9e099d2b3d7', 'Koshi', 'Jhapa', 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'c876c3c70bccb64ec53613c23d7f9f72272e866ca8795283c3147f2961039a3f', 'cf42591c8ae28c8a9db30d058769bfba382f6eb81a5fe2cc3a94a43243277a6c', 'CM-20250904-KOJH-0173-B')
2025-09-04 11:27:33,957 - db_manager - DEBUG - execute_update query: UPDATE complainants SET complainant_full_name = %s, complainant_phone = %s, complainant_email = %s, complainant_province = %s, complainant_district = %s, complainant_email_hash = %s, complainant_full_name_hash = %s, complainant_phone_hash = %s WHERE complainant_id = %s
2025-09-04 11:27:33,957 - db_manager - INFO - Connecting to database: grievance_db
2025-09-04 11:27:33,963 - db_manager - INFO - Starting database transaction
2025-09-04 11:27:33,963 - db_manager - INFO - execute_update: Executing update query: UPDATE complainants SET complainant_full_name = %s, complainant_phone = %s, complainant_email = %s, ...
2025-09-04 11:27:33,966 - db_manager - INFO - execute_update: Update completed in 0.01s. Affected rows: 1
2025-09-04 11:27:33,968 - db_manager - INFO - Transaction committed successfully
2025-09-04 11:27:33,968 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-04 11:27:33,968 - db_manager - INFO - Complainant updated in db: CM-20250904-KOJH-0173-B
2025-09-04 11:27:33,969 - db_manager - INFO - update_grievance: Updating grievance with ID: GR-20250904-KOJH-A5B3-B
2025-09-04 11:27:33,969 - db_manager - DEBUG - execute_update values: (None, None, 'There is dust everywhere kids are coughing need to go to hospital', None, None, 'ne', 'GR-20250904-KOJH-A5B3-B')
2025-09-04 11:27:33,969 - db_manager - DEBUG - execute_update query: 
                    UPDATE grievances 
                    SET grievance_categories = %s,
                        grievance_summary = %s,
                        grievance_description = %s,
                        grievance_claimed_amount = %s,
                        grievance_location = %s,
                        language_code = %s,
                        grievance_modification_date = CURRENT_TIMESTAMP
                    WHERE grievance_id = %s
                    RETURNING grievance_id
                
2025-09-04 11:27:33,969 - db_manager - INFO - Connecting to database: grievance_db
2025-09-04 11:27:33,974 - db_manager - INFO - Starting database transaction
2025-09-04 11:27:33,974 - db_manager - INFO - execute_update: Executing update query: 
                    UPDATE grievances 
                    SET grievance_categories = %s,
         ...
2025-09-04 11:27:33,976 - db_manager - INFO - execute_update: Update completed in 0.01s. Affected rows: 1
2025-09-04 11:27:33,978 - db_manager - INFO - Transaction committed successfully
2025-09-04 11:27:33,978 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-04 11:27:33,978 - db_manager - INFO - update_grievance: Updated grievance with ID: GR-20250904-KOJH-A5B3-B, rows affected: 1
2025-09-04 11:27:33,978 - db_manager - INFO - Grievance updated in db: GR-20250904-KOJH-A5B3-B
2025-09-04 11:27:33,978 - db_manager - INFO - Connecting to database: grievance_db
2025-09-04 11:27:33,985 - db_manager - INFO - Starting database transaction
2025-09-04 11:27:33,985 - db_manager - INFO - Executing get_grievance_files: 
            SELECT file_id, file_name, file_type, file_size, upload_timestamp
            FROM file...
2025-09-04 11:27:33,987 - db_manager - INFO - get_grievance_files completed in 0.01s. Rows: 0
2025-09-04 11:27:33,987 - db_manager - INFO - Transaction committed successfully
2025-09-04 11:27:33,987 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-04 11:27:33,987 - db_manager - INFO - Connecting to database: grievance_db
2025-09-04 11:27:33,993 - db_manager - INFO - Starting database transaction
2025-09-04 11:27:33,993 - db_manager - INFO - Executing get_grievance_files: 
            SELECT file_id, file_name, file_type, file_size, upload_timestamp
            FROM file...
2025-09-04 11:27:33,995 - db_manager - INFO - get_grievance_files completed in 0.01s. Rows: 0
2025-09-04 11:27:33,995 - db_manager - INFO - Transaction committed successfully
2025-09-04 11:27:33,995 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-04 11:27:34,046 - db_manager - INFO - Connecting to database: grievance_db
2025-09-04 11:27:34,052 - db_manager - INFO - Starting database transaction
2025-09-04 11:27:34,052 - db_manager - INFO - Executing get_grievance_by_id: 
                SELECT g.*, c.complainant_full_name, c.complainant_phone, c.complainant_email,
    ...
2025-09-04 11:27:34,054 - db_manager - INFO - get_grievance_by_id completed in 0.01s. Rows: 1
2025-09-04 11:27:34,054 - db_manager - INFO - Transaction committed successfully
2025-09-04 11:27:34,054 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-04 11:27:34,168 - db_manager - INFO - Connecting to database: grievance_db
2025-09-04 11:27:34,174 - db_manager - INFO - Starting database transaction
2025-09-04 11:27:34,174 - db_manager - INFO - Executing get_complainant_id_from_grievance_id: 
            SELECT complainant_id
            FROM grievances
            WHERE grievance_id = %s
 ...
2025-09-04 11:27:34,176 - db_manager - INFO - get_complainant_id_from_grievance_id completed in 0.01s. Rows: 1
2025-09-04 11:27:34,176 - db_manager - INFO - Transaction committed successfully
2025-09-04 11:27:34,176 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-04 11:27:34,176 - db_manager - INFO - update_complainant: Updating complainant with ID: CM-20250904-KOJH-0173-B
2025-09-04 11:27:34,176 - db_manager - DEBUG - encrypted and hashed data at encrypt_and_hash_sensitive_data: {}
2025-09-04 11:27:34,176 - db_manager - DEBUG - encrypted_data at update_complainant: {}
2025-09-04 11:27:34,176 - db_manager - DEBUG - execute_update values: ('CM-20250904-KOJH-0173-B',)
2025-09-04 11:27:34,176 - db_manager - DEBUG - execute_update query: UPDATE complainants SET  WHERE complainant_id = %s
2025-09-04 11:27:34,176 - db_manager - INFO - Connecting to database: grievance_db
2025-09-04 11:27:34,181 - db_manager - INFO - Starting database transaction
2025-09-04 11:27:34,182 - db_manager - INFO - execute_update: Executing update query: UPDATE complainants SET  WHERE complainant_id = %s...
2025-09-04 11:27:34,183 - db_manager - ERROR - Transaction rolled back: syntax error at or near "WHERE"
LINE 1: UPDATE complainants SET  WHERE complainant_id = 'CM-20250904...
                                 ^

2025-09-04 11:27:34,183 - db_manager - ERROR - Database connection error: Transaction failed: syntax error at or near "WHERE"
LINE 1: UPDATE complainants SET  WHERE complainant_id = 'CM-20250904...
                                 ^

2025-09-04 11:27:34,183 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-04 11:27:34,183 - db_manager - ERROR - execute_update: Update failed: Failed to connect to database: Transaction failed: syntax error at or near "WHERE"
LINE 1: UPDATE complainants SET  WHERE complainant_id = 'CM-20250904...
                                 ^

2025-09-04 11:27:34,183 - db_manager - ERROR - Error in update_complainant: execute_update: Update execution failed: Failed to connect to database: Transaction failed: syntax error at or near "WHERE"
LINE 1: UPDATE complainants SET  WHERE complainant_id = 'CM-20250904...
                                 ^

2025-09-04 11:27:34,183 - db_manager - INFO - Complainant updated in db: GR-20250904-KOJH-A5B3-B
2025-09-04 11:27:34,183 - db_manager - INFO - update_grievance: Updating grievance with ID: GR-20250904-KOJH-A5B3-B
2025-09-04 11:27:34,183 - db_manager - DEBUG - execute_update values: (None, None, None, None, None, 'ne', 'GR-20250904-KOJH-A5B3-B')
2025-09-04 11:27:34,184 - db_manager - DEBUG - execute_update query: 
                    UPDATE grievances 
                    SET grievance_categories = %s,
                        grievance_summary = %s,
                        grievance_description = %s,
                        grievance_claimed_amount = %s,
                        grievance_location = %s,
                        language_code = %s,
                        grievance_modification_date = CURRENT_TIMESTAMP
                    WHERE grievance_id = %s
                    RETURNING grievance_id
                
2025-09-04 11:27:34,184 - db_manager - INFO - Connecting to database: grievance_db
2025-09-04 11:27:34,189 - db_manager - INFO - Starting database transaction
2025-09-04 11:27:34,189 - db_manager - INFO - execute_update: Executing update query: 
                    UPDATE grievances 
                    SET grievance_categories = %s,
         ...
2025-09-04 11:27:34,190 - db_manager - INFO - execute_update: Update completed in 0.01s. Affected rows: 1
2025-09-04 11:27:34,192 - db_manager - INFO - Transaction committed successfully
2025-09-04 11:27:34,193 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-04 11:27:34,193 - db_manager - INFO - update_grievance: Updated grievance with ID: GR-20250904-KOJH-A5B3-B, rows affected: 1
2025-09-04 11:27:34,193 - db_manager - INFO - Grievance updated in db: GR-20250904-KOJH-A5B3-B
2025-09-04 11:35:38,718 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-04 11:35:38,718 - db_manager - INFO - Database manager initialized successfully
2025-09-04 11:35:38,718 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-04 11:35:38,718 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-04 11:35:38,718 - db_manager - INFO - Database manager initialized successfully
2025-09-04 11:35:38,718 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-04 11:35:38,718 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-04 11:35:38,718 - db_manager - INFO - Database manager initialized successfully
2025-09-04 11:35:38,718 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-04 11:35:38,718 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-04 11:35:38,719 - db_manager - INFO - Database manager initialized successfully
2025-09-04 11:35:38,719 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-04 11:35:38,719 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-04 11:35:38,719 - db_manager - INFO - Database manager initialized successfully
2025-09-04 11:35:38,719 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-04 11:35:38,719 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-04 11:35:38,719 - db_manager - INFO - Database manager initialized successfully
2025-09-04 11:35:38,719 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-04 11:35:38,719 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-04 11:35:38,719 - db_manager - INFO - Database manager initialized successfully
2025-09-04 11:35:38,719 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-04 11:35:38,719 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-04 11:35:38,719 - db_manager - INFO - Database manager initialized successfully
2025-09-04 11:35:38,719 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-04 11:35:38,719 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-04 11:35:38,719 - db_manager - INFO - Database manager initialized successfully
2025-09-04 11:35:38,719 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-04 11:35:38,719 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-04 11:35:38,719 - db_manager - INFO - Database manager initialized successfully
2025-09-04 11:35:38,719 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-04 11:36:18,530 - db_manager - INFO - create_complainant: Creating complainant with ID: CM-20250904-KOJH-7AAC-B
2025-09-04 11:36:18,530 - db_manager - DEBUG - encrypted and hashed data at encrypt_and_hash_sensitive_data: {'complainant_id': 'CM-20250904-KOJH-7AAC-B', 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_unique_id': 'CM-20250904-KOJH-7AAC-B'}
2025-09-04 11:36:18,530 - db_manager - DEBUG - query_keys at generate_query_string: dict_keys(['complainant_id', 'complainant_province', 'complainant_district', 'complainant_unique_id'])
2025-09-04 11:36:18,530 - db_manager - DEBUG - Generated query: INSERT INTO complainants (complainant_id, complainant_province, complainant_district, complainant_unique_id) VALUES (%s, %s, %s, %s)
2025-09-04 11:36:18,530 - db_manager - DEBUG - len of query_keys: 4
2025-09-04 11:36:18,530 - db_manager - DEBUG - Generated query: INSERT INTO complainants (complainant_id, complainant_province, complainant_district, complainant_unique_id) VALUES (%s, %s, %s, %s)
2025-09-04 11:36:18,530 - db_manager - INFO - Connecting to database: grievance_db
2025-09-04 11:36:18,538 - db_manager - INFO - Starting database transaction
2025-09-04 11:36:18,540 - db_manager - INFO - Transaction committed successfully
2025-09-04 11:36:18,540 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-04 11:36:18,540 - db_manager - INFO - create_complainant: Successfully created complainant with ID: CM-20250904-KOJH-7AAC-B
2025-09-04 11:36:18,540 - db_manager - INFO - create_grievance: Creating grievance with data: {'grievance_id': 'GR-20250904-KOJH-8B71-B', 'complainant_id': 'CM-20250904-KOJH-7AAC-B', 'grievance_description': 'There is dust everywhere kids are coughing need to go to hospital', 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_office': None, 'source': 'bot', 'complainant_unique_id': 'CM-20250904-KOJH-7AAC-B'}
2025-09-04 11:36:18,540 - db_manager - INFO - create_grievance: Creating grievance with ID: GR-20250904-KOJH-8B71-B
2025-09-04 11:36:18,541 - db_manager - DEBUG - query_keys at generate_query_string: dict_keys(['grievance_id', 'complainant_id', 'grievance_description', 'source'])
2025-09-04 11:36:18,541 - db_manager - DEBUG - Generated query: INSERT INTO grievances (grievance_id, complainant_id, grievance_description, source) VALUES (%s, %s, %s, %s) RETURNING grievance_id
2025-09-04 11:36:18,541 - db_manager - DEBUG - len of query_keys: 4
2025-09-04 11:36:18,541 - db_manager - DEBUG - Generated query: INSERT INTO grievances (grievance_id, complainant_id, grievance_description, source) VALUES (%s, %s, %s, %s) RETURNING grievance_id
2025-09-04 11:36:18,541 - db_manager - INFO - Connecting to database: grievance_db
2025-09-04 11:36:18,546 - db_manager - INFO - Starting database transaction
2025-09-04 11:36:18,551 - db_manager - INFO - Transaction committed successfully
2025-09-04 11:36:18,551 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-04 11:36:18,552 - db_manager - INFO - create_grievance: Successfully created grievance with ID: GR-20250904-KOJH-8B71-B
2025-09-04 11:36:50,057 - db_manager - INFO - Connecting to database: grievance_db
2025-09-04 11:36:50,065 - db_manager - INFO - Starting database transaction
2025-09-04 11:36:50,065 - db_manager - INFO - Executing get_complainant_by_id: 
            SELECT complainant_id, complainant_unique_id, complainant_full_name,    complainant_pho...
2025-09-04 11:36:50,067 - db_manager - INFO - get_complainant_by_id completed in 0.01s. Rows: 1
2025-09-04 11:36:50,068 - db_manager - INFO - Transaction committed successfully
2025-09-04 11:36:50,068 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-04 11:36:50,068 - db_manager - INFO - Connecting to database: grievance_db
2025-09-04 11:36:50,075 - db_manager - INFO - Starting database transaction
2025-09-04 11:36:50,075 - db_manager - INFO - Executing get_grievance_by_id: 
                SELECT g.*, c.complainant_full_name, c.complainant_phone, c.complainant_email,
    ...
2025-09-04 11:36:50,077 - db_manager - INFO - get_grievance_by_id completed in 0.01s. Rows: 1
2025-09-04 11:36:50,077 - db_manager - INFO - Transaction committed successfully
2025-09-04 11:36:50,077 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-04 11:36:50,077 - db_manager - INFO - update_complainant: Updating complainant with ID: CM-20250904-KOJH-7AAC-B
2025-09-04 11:36:50,077 - db_manager - INFO - Connecting to database: grievance_db
2025-09-04 11:36:50,082 - db_manager - INFO - Starting database transaction
2025-09-04 11:36:50,083 - db_manager - INFO - Executing encrypt_field: SELECT encode(pgp_sym_encrypt(%s, %s), 'hex') AS encrypted...
2025-09-04 11:36:50,085 - db_manager - INFO - encrypt_field completed in 0.01s. Rows: 1
2025-09-04 11:36:50,085 - db_manager - INFO - Transaction committed successfully
2025-09-04 11:36:50,085 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-04 11:36:50,086 - db_manager - INFO - Connecting to database: grievance_db
2025-09-04 11:36:50,092 - db_manager - INFO - Starting database transaction
2025-09-04 11:36:50,092 - db_manager - INFO - Executing encrypt_field: SELECT encode(pgp_sym_encrypt(%s, %s), 'hex') AS encrypted...
2025-09-04 11:36:50,093 - db_manager - INFO - encrypt_field completed in 0.01s. Rows: 1
2025-09-04 11:36:50,094 - db_manager - INFO - Transaction committed successfully
2025-09-04 11:36:50,094 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-04 11:36:50,094 - db_manager - DEBUG - encrypted phone number +9779876543210 at encrypt_complainant_data: c30d04070302a6f3a9fb1fd385687dd23f01b1bbfffa916e9e7bcef00729f01860c2c7696ac137abbd76cd4ea430badbb119fb87133ac9d4e99e78f109ddb32c13b920e7a8814e34a048c4a6cff5fd11
2025-09-04 11:36:50,094 - db_manager - INFO - Connecting to database: grievance_db
2025-09-04 11:36:50,099 - db_manager - INFO - Starting database transaction
2025-09-04 11:36:50,100 - db_manager - INFO - Executing encrypt_field: SELECT encode(pgp_sym_encrypt(%s, %s), 'hex') AS encrypted...
2025-09-04 11:36:50,101 - db_manager - INFO - encrypt_field completed in 0.01s. Rows: 1
2025-09-04 11:36:50,101 - db_manager - INFO - Transaction committed successfully
2025-09-04 11:36:50,101 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-04 11:36:50,101 - db_manager - DEBUG - phone number +9779876543210 hashed to c95ee4a714418be9379a77482c9a8b2003400429703eabebc8d6d971e864f8e0 at hash_sensitive_data
2025-09-04 11:36:50,101 - db_manager - DEBUG - encrypted and hashed data at encrypt_and_hash_sensitive_data: {'complainant_full_name': 'c30d0407030263e966919489f92d78d23d01343b6fa14e3d107c81d9a79305e9cd74328e5e94f0fa9b7361b8782acdd5fa7b065d889b10e4c9bc502aa63f613ef45f2cda02b633e38f5b4931cad3', 'complainant_phone': 'c30d04070302a6f3a9fb1fd385687dd23f01b1bbfffa916e9e7bcef00729f01860c2c7696ac137abbd76cd4ea430badbb119fb87133ac9d4e99e78f109ddb32c13b920e7a8814e34a048c4a6cff5fd11', 'complainant_email': 'c30d0407030283c6b0a5b0c3051565d23d014cddaec9a193d306a03a0de48b5b5420fde71f77485b18d6b6128c2996aacb698bb521227a0800038caca76c21aad82986adaf9d33e6a61b235508eb', 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_email_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'complainant_phone_hash': 'c95ee4a714418be9379a77482c9a8b2003400429703eabebc8d6d971e864f8e0', 'complainant_full_name_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f'}
2025-09-04 11:36:50,101 - db_manager - DEBUG - encrypted_data at update_complainant: {'complainant_full_name': 'c30d0407030263e966919489f92d78d23d01343b6fa14e3d107c81d9a79305e9cd74328e5e94f0fa9b7361b8782acdd5fa7b065d889b10e4c9bc502aa63f613ef45f2cda02b633e38f5b4931cad3', 'complainant_phone': 'c30d04070302a6f3a9fb1fd385687dd23f01b1bbfffa916e9e7bcef00729f01860c2c7696ac137abbd76cd4ea430badbb119fb87133ac9d4e99e78f109ddb32c13b920e7a8814e34a048c4a6cff5fd11', 'complainant_email': 'c30d0407030283c6b0a5b0c3051565d23d014cddaec9a193d306a03a0de48b5b5420fde71f77485b18d6b6128c2996aacb698bb521227a0800038caca76c21aad82986adaf9d33e6a61b235508eb', 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_email_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'complainant_phone_hash': 'c95ee4a714418be9379a77482c9a8b2003400429703eabebc8d6d971e864f8e0', 'complainant_full_name_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f'}
2025-09-04 11:36:50,101 - db_manager - DEBUG - execute_update values: ('c30d0407030263e966919489f92d78d23d01343b6fa14e3d107c81d9a79305e9cd74328e5e94f0fa9b7361b8782acdd5fa7b065d889b10e4c9bc502aa63f613ef45f2cda02b633e38f5b4931cad3', 'c30d04070302a6f3a9fb1fd385687dd23f01b1bbfffa916e9e7bcef00729f01860c2c7696ac137abbd76cd4ea430badbb119fb87133ac9d4e99e78f109ddb32c13b920e7a8814e34a048c4a6cff5fd11', 'c30d0407030283c6b0a5b0c3051565d23d014cddaec9a193d306a03a0de48b5b5420fde71f77485b18d6b6128c2996aacb698bb521227a0800038caca76c21aad82986adaf9d33e6a61b235508eb', 'Koshi', 'Jhapa', 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'c95ee4a714418be9379a77482c9a8b2003400429703eabebc8d6d971e864f8e0', 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'CM-20250904-KOJH-7AAC-B')
2025-09-04 11:36:50,101 - db_manager - DEBUG - execute_update query: UPDATE complainants SET complainant_full_name = %s, complainant_phone = %s, complainant_email = %s, complainant_province = %s, complainant_district = %s, complainant_email_hash = %s, complainant_phone_hash = %s, complainant_full_name_hash = %s WHERE complainant_id = %s
2025-09-04 11:36:50,101 - db_manager - INFO - Connecting to database: grievance_db
2025-09-04 11:36:50,107 - db_manager - INFO - Starting database transaction
2025-09-04 11:36:50,108 - db_manager - INFO - execute_update: Executing update query: UPDATE complainants SET complainant_full_name = %s, complainant_phone = %s, complainant_email = %s, ...
2025-09-04 11:36:50,110 - db_manager - INFO - execute_update: Update completed in 0.01s. Affected rows: 1
2025-09-04 11:36:50,112 - db_manager - INFO - Transaction committed successfully
2025-09-04 11:36:50,112 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-04 11:36:50,112 - db_manager - INFO - Complainant updated in db: CM-20250904-KOJH-7AAC-B
2025-09-04 11:36:50,112 - db_manager - INFO - update_grievance: Updating grievance with ID: GR-20250904-KOJH-8B71-B
2025-09-04 11:36:50,112 - db_manager - DEBUG - execute_update values: (None, None, 'There is dust everywhere kids are coughing need to go to hospital', None, None, 'ne', 'GR-20250904-KOJH-8B71-B')
2025-09-04 11:36:50,112 - db_manager - DEBUG - execute_update query: 
                    UPDATE grievances 
                    SET grievance_categories = %s,
                        grievance_summary = %s,
                        grievance_description = %s,
                        grievance_claimed_amount = %s,
                        grievance_location = %s,
                        language_code = %s,
                        grievance_modification_date = CURRENT_TIMESTAMP
                    WHERE grievance_id = %s
                    RETURNING grievance_id
                
2025-09-04 11:36:50,112 - db_manager - INFO - Connecting to database: grievance_db
2025-09-04 11:36:50,118 - db_manager - INFO - Starting database transaction
2025-09-04 11:36:50,118 - db_manager - INFO - execute_update: Executing update query: 
                    UPDATE grievances 
                    SET grievance_categories = %s,
         ...
2025-09-04 11:36:50,119 - db_manager - INFO - execute_update: Update completed in 0.01s. Affected rows: 1
2025-09-04 11:36:50,121 - db_manager - INFO - Transaction committed successfully
2025-09-04 11:36:50,121 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-04 11:36:50,121 - db_manager - INFO - update_grievance: Updated grievance with ID: GR-20250904-KOJH-8B71-B, rows affected: 1
2025-09-04 11:36:50,121 - db_manager - INFO - Grievance updated in db: GR-20250904-KOJH-8B71-B
2025-09-04 11:36:50,121 - db_manager - INFO - Connecting to database: grievance_db
2025-09-04 11:36:50,127 - db_manager - INFO - Starting database transaction
2025-09-04 11:36:50,127 - db_manager - INFO - Executing get_grievance_files: 
            SELECT file_id, file_name, file_type, file_size, upload_timestamp
            FROM file...
2025-09-04 11:36:50,128 - db_manager - INFO - get_grievance_files completed in 0.01s. Rows: 0
2025-09-04 11:36:50,129 - db_manager - INFO - Transaction committed successfully
2025-09-04 11:36:50,129 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-04 11:36:50,129 - db_manager - INFO - Connecting to database: grievance_db
2025-09-04 11:36:50,134 - db_manager - INFO - Starting database transaction
2025-09-04 11:36:50,134 - db_manager - INFO - Executing get_grievance_files: 
            SELECT file_id, file_name, file_type, file_size, upload_timestamp
            FROM file...
2025-09-04 11:36:50,135 - db_manager - INFO - get_grievance_files completed in 0.01s. Rows: 0
2025-09-04 11:36:50,136 - db_manager - INFO - Transaction committed successfully
2025-09-04 11:36:50,136 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-04 11:36:50,189 - db_manager - INFO - Connecting to database: grievance_db
2025-09-04 11:36:50,195 - db_manager - INFO - Starting database transaction
2025-09-04 11:36:50,195 - db_manager - INFO - Executing get_grievance_by_id: 
                SELECT g.*, c.complainant_full_name, c.complainant_phone, c.complainant_email,
    ...
2025-09-04 11:36:50,198 - db_manager - INFO - get_grievance_by_id completed in 0.01s. Rows: 1
2025-09-04 11:36:50,198 - db_manager - INFO - Transaction committed successfully
2025-09-04 11:36:50,198 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-04 11:54:52,591 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-04 11:54:52,592 - db_manager - INFO - Database manager initialized successfully
2025-09-04 11:54:52,592 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-04 11:54:52,592 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-04 11:54:52,592 - db_manager - INFO - Database manager initialized successfully
2025-09-04 11:54:52,592 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-04 11:54:52,592 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-04 11:54:52,592 - db_manager - INFO - Database manager initialized successfully
2025-09-04 11:54:52,592 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-04 11:54:52,592 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-04 11:54:52,592 - db_manager - INFO - Database manager initialized successfully
2025-09-04 11:54:52,592 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-04 11:54:52,592 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-04 11:54:52,592 - db_manager - INFO - Database manager initialized successfully
2025-09-04 11:54:52,592 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-04 11:54:52,592 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-04 11:54:52,592 - db_manager - INFO - Database manager initialized successfully
2025-09-04 11:54:52,592 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-04 11:54:52,592 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-04 11:54:52,592 - db_manager - INFO - Database manager initialized successfully
2025-09-04 11:54:52,593 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-04 11:54:52,593 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-04 11:54:52,593 - db_manager - INFO - Database manager initialized successfully
2025-09-04 11:54:52,593 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-04 11:54:52,593 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-04 11:54:52,593 - db_manager - INFO - Database manager initialized successfully
2025-09-04 11:54:52,593 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-04 11:54:52,593 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-04 11:54:52,593 - db_manager - INFO - Database manager initialized successfully
2025-09-04 11:54:52,593 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-04 11:58:05,390 - db_manager - INFO - create_complainant: Creating complainant with ID: CM-20250904-KOJH-ADFD-B
2025-09-04 11:58:05,390 - db_manager - DEBUG - encrypted and hashed data at encrypt_and_hash_sensitive_data: {'complainant_id': 'CM-20250904-KOJH-ADFD-B', 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_unique_id': 'CM-20250904-KOJH-ADFD-B'}
2025-09-04 11:58:05,390 - db_manager - DEBUG - query_keys at generate_query_string: dict_keys(['complainant_id', 'complainant_province', 'complainant_district', 'complainant_unique_id'])
2025-09-04 11:58:05,390 - db_manager - DEBUG - Generated query: INSERT INTO complainants (complainant_id, complainant_province, complainant_district, complainant_unique_id) VALUES (%s, %s, %s, %s)
2025-09-04 11:58:05,390 - db_manager - DEBUG - len of query_keys: 4
2025-09-04 11:58:05,390 - db_manager - DEBUG - Generated query: INSERT INTO complainants (complainant_id, complainant_province, complainant_district, complainant_unique_id) VALUES (%s, %s, %s, %s)
2025-09-04 11:58:05,390 - db_manager - INFO - Connecting to database: grievance_db
2025-09-04 11:58:05,397 - db_manager - INFO - Starting database transaction
2025-09-04 11:58:05,399 - db_manager - INFO - Transaction committed successfully
2025-09-04 11:58:05,400 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-04 11:58:05,400 - db_manager - INFO - create_complainant: Successfully created complainant with ID: CM-20250904-KOJH-ADFD-B
2025-09-04 11:58:05,400 - db_manager - INFO - create_grievance: Creating grievance with data: {'grievance_id': 'GR-20250904-KOJH-4638-B', 'complainant_id': 'CM-20250904-KOJH-ADFD-B', 'grievance_description': 'There is dust everywhere kids are coughing need to go to hospital', 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_office': None, 'source': 'bot', 'complainant_unique_id': 'CM-20250904-KOJH-ADFD-B'}
2025-09-04 11:58:05,400 - db_manager - INFO - create_grievance: Creating grievance with ID: GR-20250904-KOJH-4638-B
2025-09-04 11:58:05,400 - db_manager - DEBUG - query_keys at generate_query_string: dict_keys(['grievance_id', 'complainant_id', 'grievance_description', 'source'])
2025-09-04 11:58:05,400 - db_manager - DEBUG - Generated query: INSERT INTO grievances (grievance_id, complainant_id, grievance_description, source) VALUES (%s, %s, %s, %s) RETURNING grievance_id
2025-09-04 11:58:05,400 - db_manager - DEBUG - len of query_keys: 4
2025-09-04 11:58:05,400 - db_manager - DEBUG - Generated query: INSERT INTO grievances (grievance_id, complainant_id, grievance_description, source) VALUES (%s, %s, %s, %s) RETURNING grievance_id
2025-09-04 11:58:05,400 - db_manager - INFO - Connecting to database: grievance_db
2025-09-04 11:58:05,405 - db_manager - INFO - Starting database transaction
2025-09-04 11:58:05,410 - db_manager - INFO - Transaction committed successfully
2025-09-04 11:58:05,410 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-04 11:58:05,410 - db_manager - INFO - create_grievance: Successfully created grievance with ID: GR-20250904-KOJH-4638-B
2025-09-04 11:58:37,328 - db_manager - INFO - Connecting to database: grievance_db
2025-09-04 11:58:37,334 - db_manager - INFO - Starting database transaction
2025-09-04 11:58:37,334 - db_manager - INFO - Executing get_complainant_by_id: 
            SELECT complainant_id, complainant_unique_id, complainant_full_name,    complainant_pho...
2025-09-04 11:58:37,335 - db_manager - INFO - get_complainant_by_id completed in 0.01s. Rows: 1
2025-09-04 11:58:37,336 - db_manager - INFO - Transaction committed successfully
2025-09-04 11:58:37,336 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-04 11:58:37,336 - db_manager - INFO - Connecting to database: grievance_db
2025-09-04 11:58:37,342 - db_manager - INFO - Starting database transaction
2025-09-04 11:58:37,343 - db_manager - INFO - Executing get_grievance_by_id: 
                SELECT g.*, c.complainant_full_name, c.complainant_phone, c.complainant_email,
    ...
2025-09-04 11:58:37,344 - db_manager - INFO - get_grievance_by_id completed in 0.01s. Rows: 1
2025-09-04 11:58:37,345 - db_manager - INFO - Transaction committed successfully
2025-09-04 11:58:37,345 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-04 11:58:37,345 - db_manager - INFO - update_complainant: Updating complainant with ID: CM-20250904-KOJH-ADFD-B
2025-09-04 11:58:37,345 - db_manager - INFO - Connecting to database: grievance_db
2025-09-04 11:58:37,350 - db_manager - INFO - Starting database transaction
2025-09-04 11:58:37,350 - db_manager - INFO - Executing encrypt_field: SELECT encode(pgp_sym_encrypt(%s, %s), 'hex') AS encrypted...
2025-09-04 11:58:37,352 - db_manager - INFO - encrypt_field completed in 0.01s. Rows: 1
2025-09-04 11:58:37,353 - db_manager - INFO - Transaction committed successfully
2025-09-04 11:58:37,353 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-04 11:58:37,353 - db_manager - DEBUG - encrypted phone number +9779876543210 at encrypt_complainant_data: c30d04070302e73191691280bee861d23f01410d23b4adfd6370f50c52cf85be8852df115dcd03f282f2f96897b16eb4d3ce4414522414f7874b4593038a84fdf1621b89fe110c81136a42eb0c462029
2025-09-04 11:58:37,353 - db_manager - INFO - Connecting to database: grievance_db
2025-09-04 11:58:37,359 - db_manager - INFO - Starting database transaction
2025-09-04 11:58:37,359 - db_manager - INFO - Executing encrypt_field: SELECT encode(pgp_sym_encrypt(%s, %s), 'hex') AS encrypted...
2025-09-04 11:58:37,361 - db_manager - INFO - encrypt_field completed in 0.01s. Rows: 1
2025-09-04 11:58:37,361 - db_manager - INFO - Transaction committed successfully
2025-09-04 11:58:37,361 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-04 11:58:37,361 - db_manager - INFO - Connecting to database: grievance_db
2025-09-04 11:58:37,367 - db_manager - INFO - Starting database transaction
2025-09-04 11:58:37,367 - db_manager - INFO - Executing encrypt_field: SELECT encode(pgp_sym_encrypt(%s, %s), 'hex') AS encrypted...
2025-09-04 11:58:37,368 - db_manager - INFO - encrypt_field completed in 0.01s. Rows: 1
2025-09-04 11:58:37,368 - db_manager - INFO - Transaction committed successfully
2025-09-04 11:58:37,369 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-04 11:58:37,369 - db_manager - DEBUG - phone number +9779876543210 hashed to c95ee4a714418be9379a77482c9a8b2003400429703eabebc8d6d971e864f8e0 at hash_sensitive_data
2025-09-04 11:58:37,369 - db_manager - DEBUG - encrypted and hashed data at encrypt_and_hash_sensitive_data: {'complainant_full_name': 'c30d04070302ca3ba8c8a68e3e6e75d23801fc535ece5820b118efb37bc2346c944f7a1e5cffc7bcc1642421731050c0fa2a95557014603494fcbebc9998449762f50ba571381fe8d1', 'complainant_phone': 'c30d04070302e73191691280bee861d23f01410d23b4adfd6370f50c52cf85be8852df115dcd03f282f2f96897b16eb4d3ce4414522414f7874b4593038a84fdf1621b89fe110c81136a42eb0c462029', 'complainant_email': 'c30d04070302be49ea5bff5c5b1063d23d01476d183061faea52e2d7023cffd68971853697699fd20ec27d6908a1b31b8bd10b759383879f729fdfcd59a061ae2af77f05e05f2ec3a77049a9ed52', 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_phone_hash': 'c95ee4a714418be9379a77482c9a8b2003400429703eabebc8d6d971e864f8e0', 'complainant_full_name_hash': '535b71b6cc33129bbdc5fd5c14abb5c8f277fd38859911891b7b6964add7fe0c', 'complainant_email_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f'}
2025-09-04 11:58:37,369 - db_manager - DEBUG - encrypted_data at update_complainant: {'complainant_full_name': 'c30d04070302ca3ba8c8a68e3e6e75d23801fc535ece5820b118efb37bc2346c944f7a1e5cffc7bcc1642421731050c0fa2a95557014603494fcbebc9998449762f50ba571381fe8d1', 'complainant_phone': 'c30d04070302e73191691280bee861d23f01410d23b4adfd6370f50c52cf85be8852df115dcd03f282f2f96897b16eb4d3ce4414522414f7874b4593038a84fdf1621b89fe110c81136a42eb0c462029', 'complainant_email': 'c30d04070302be49ea5bff5c5b1063d23d01476d183061faea52e2d7023cffd68971853697699fd20ec27d6908a1b31b8bd10b759383879f729fdfcd59a061ae2af77f05e05f2ec3a77049a9ed52', 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_phone_hash': 'c95ee4a714418be9379a77482c9a8b2003400429703eabebc8d6d971e864f8e0', 'complainant_full_name_hash': '535b71b6cc33129bbdc5fd5c14abb5c8f277fd38859911891b7b6964add7fe0c', 'complainant_email_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f'}
2025-09-04 11:58:37,369 - db_manager - DEBUG - execute_update values: ('c30d04070302ca3ba8c8a68e3e6e75d23801fc535ece5820b118efb37bc2346c944f7a1e5cffc7bcc1642421731050c0fa2a95557014603494fcbebc9998449762f50ba571381fe8d1', 'c30d04070302e73191691280bee861d23f01410d23b4adfd6370f50c52cf85be8852df115dcd03f282f2f96897b16eb4d3ce4414522414f7874b4593038a84fdf1621b89fe110c81136a42eb0c462029', 'c30d04070302be49ea5bff5c5b1063d23d01476d183061faea52e2d7023cffd68971853697699fd20ec27d6908a1b31b8bd10b759383879f729fdfcd59a061ae2af77f05e05f2ec3a77049a9ed52', 'Koshi', 'Jhapa', 'c95ee4a714418be9379a77482c9a8b2003400429703eabebc8d6d971e864f8e0', '535b71b6cc33129bbdc5fd5c14abb5c8f277fd38859911891b7b6964add7fe0c', 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'CM-20250904-KOJH-ADFD-B')
2025-09-04 11:58:37,369 - db_manager - DEBUG - execute_update query: UPDATE complainants SET complainant_full_name = %s, complainant_phone = %s, complainant_email = %s, complainant_province = %s, complainant_district = %s, complainant_phone_hash = %s, complainant_full_name_hash = %s, complainant_email_hash = %s WHERE complainant_id = %s
2025-09-04 11:58:37,369 - db_manager - INFO - Connecting to database: grievance_db
2025-09-04 11:58:37,374 - db_manager - INFO - Starting database transaction
2025-09-04 11:58:37,374 - db_manager - INFO - execute_update: Executing update query: UPDATE complainants SET complainant_full_name = %s, complainant_phone = %s, complainant_email = %s, ...
2025-09-04 11:58:37,375 - db_manager - INFO - execute_update: Update completed in 0.01s. Affected rows: 1
2025-09-04 11:58:37,378 - db_manager - INFO - Transaction committed successfully
2025-09-04 11:58:37,378 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-04 11:58:37,378 - db_manager - INFO - Complainant updated in db: CM-20250904-KOJH-ADFD-B
2025-09-04 11:58:37,378 - db_manager - INFO - update_grievance: Updating grievance with ID: GR-20250904-KOJH-4638-B
2025-09-04 11:58:37,378 - db_manager - DEBUG - execute_update values: (None, None, 'There is dust everywhere kids are coughing need to go to hospital', None, None, 'ne', 'GR-20250904-KOJH-4638-B')
2025-09-04 11:58:37,378 - db_manager - DEBUG - execute_update query: 
                    UPDATE grievances 
                    SET grievance_categories = %s,
                        grievance_summary = %s,
                        grievance_description = %s,
                        grievance_claimed_amount = %s,
                        grievance_location = %s,
                        language_code = %s,
                        grievance_modification_date = CURRENT_TIMESTAMP
                    WHERE grievance_id = %s
                    RETURNING grievance_id
                
2025-09-04 11:58:37,378 - db_manager - INFO - Connecting to database: grievance_db
2025-09-04 11:58:37,384 - db_manager - INFO - Starting database transaction
2025-09-04 11:58:37,384 - db_manager - INFO - execute_update: Executing update query: 
                    UPDATE grievances 
                    SET grievance_categories = %s,
         ...
2025-09-04 11:58:37,385 - db_manager - INFO - execute_update: Update completed in 0.01s. Affected rows: 1
2025-09-04 11:58:37,386 - db_manager - INFO - Transaction committed successfully
2025-09-04 11:58:37,387 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-04 11:58:37,387 - db_manager - INFO - update_grievance: Updated grievance with ID: GR-20250904-KOJH-4638-B, rows affected: 1
2025-09-04 11:58:37,387 - db_manager - INFO - Grievance updated in db: GR-20250904-KOJH-4638-B
2025-09-04 11:58:37,387 - db_manager - INFO - Connecting to database: grievance_db
2025-09-04 11:58:37,393 - db_manager - INFO - Starting database transaction
2025-09-04 11:58:37,393 - db_manager - INFO - Executing get_grievance_files: 
            SELECT file_id, file_name, file_type, file_size, upload_timestamp
            FROM file...
2025-09-04 11:58:37,395 - db_manager - INFO - get_grievance_files completed in 0.01s. Rows: 0
2025-09-04 11:58:37,395 - db_manager - INFO - Transaction committed successfully
2025-09-04 11:58:37,395 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-04 11:58:37,395 - db_manager - INFO - Connecting to database: grievance_db
2025-09-04 11:58:37,400 - db_manager - INFO - Starting database transaction
2025-09-04 11:58:37,401 - db_manager - INFO - Executing get_grievance_files: 
            SELECT file_id, file_name, file_type, file_size, upload_timestamp
            FROM file...
2025-09-04 11:58:37,402 - db_manager - INFO - get_grievance_files completed in 0.01s. Rows: 0
2025-09-04 11:58:37,402 - db_manager - INFO - Transaction committed successfully
2025-09-04 11:58:37,402 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-04 11:58:37,453 - db_manager - INFO - Connecting to database: grievance_db
2025-09-04 11:58:37,459 - db_manager - INFO - Starting database transaction
2025-09-04 11:58:37,459 - db_manager - INFO - Executing get_grievance_by_id: 
                SELECT g.*, c.complainant_full_name, c.complainant_phone, c.complainant_email,
    ...
2025-09-04 11:58:37,461 - db_manager - INFO - get_grievance_by_id completed in 0.01s. Rows: 1
2025-09-04 11:58:37,461 - db_manager - INFO - Transaction committed successfully
2025-09-04 11:58:37,461 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-04 14:19:05,577 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-04 14:19:05,578 - db_manager - INFO - Database manager initialized successfully
2025-09-04 14:19:05,578 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-04 14:19:05,578 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-04 14:19:05,578 - db_manager - INFO - Database manager initialized successfully
2025-09-04 14:19:05,578 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-04 14:19:05,578 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-04 14:19:05,578 - db_manager - INFO - Database manager initialized successfully
2025-09-04 14:19:05,578 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-04 14:19:05,578 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-04 14:19:05,578 - db_manager - INFO - Database manager initialized successfully
2025-09-04 14:19:05,578 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-04 14:19:05,578 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-04 14:19:05,578 - db_manager - INFO - Database manager initialized successfully
2025-09-04 14:19:05,579 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-04 14:19:05,579 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-04 14:19:05,579 - db_manager - INFO - Database manager initialized successfully
2025-09-04 14:19:05,579 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-04 14:19:05,579 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-04 14:19:05,579 - db_manager - INFO - Database manager initialized successfully
2025-09-04 14:19:05,579 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-04 14:19:05,579 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-04 14:19:05,579 - db_manager - INFO - Database manager initialized successfully
2025-09-04 14:19:05,579 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-04 14:19:05,579 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-04 14:19:05,579 - db_manager - INFO - Database manager initialized successfully
2025-09-04 14:19:05,579 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-04 14:19:05,579 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-04 14:19:05,579 - db_manager - INFO - Database manager initialized successfully
2025-09-04 14:19:05,579 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-04 14:22:05,895 - db_manager - INFO - create_complainant: Creating complainant with ID: CM-20250904-KOJH-CE8C-B
2025-09-04 14:22:05,895 - db_manager - DEBUG - encrypted and hashed data at encrypt_and_hash_sensitive_data: {'complainant_id': 'CM-20250904-KOJH-CE8C-B', 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_unique_id': 'CM-20250904-KOJH-CE8C-B'}
2025-09-04 14:22:05,895 - db_manager - DEBUG - query_keys at generate_query_string: dict_keys(['complainant_id', 'complainant_province', 'complainant_district', 'complainant_unique_id'])
2025-09-04 14:22:05,895 - db_manager - DEBUG - Generated query: INSERT INTO complainants (complainant_id, complainant_province, complainant_district, complainant_unique_id) VALUES (%s, %s, %s, %s)
2025-09-04 14:22:05,895 - db_manager - DEBUG - len of query_keys: 4
2025-09-04 14:22:05,895 - db_manager - DEBUG - Generated query: INSERT INTO complainants (complainant_id, complainant_province, complainant_district, complainant_unique_id) VALUES (%s, %s, %s, %s)
2025-09-04 14:22:05,895 - db_manager - INFO - Connecting to database: grievance_db
2025-09-04 14:22:05,902 - db_manager - INFO - Starting database transaction
2025-09-04 14:22:05,905 - db_manager - INFO - Transaction committed successfully
2025-09-04 14:22:05,905 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-04 14:22:05,906 - db_manager - INFO - create_complainant: Successfully created complainant with ID: CM-20250904-KOJH-CE8C-B
2025-09-04 14:22:05,906 - db_manager - INFO - create_grievance: Creating grievance with data: {'grievance_id': 'GR-20250904-KOJH-D565-B', 'complainant_id': 'CM-20250904-KOJH-CE8C-B', 'grievance_description': 'There is dust everywhere kids are coughing need to go to hospital', 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_office': None, 'source': 'bot', 'complainant_unique_id': 'CM-20250904-KOJH-CE8C-B'}
2025-09-04 14:22:05,906 - db_manager - INFO - create_grievance: Creating grievance with ID: GR-20250904-KOJH-D565-B
2025-09-04 14:22:05,906 - db_manager - DEBUG - query_keys at generate_query_string: dict_keys(['grievance_id', 'complainant_id', 'grievance_description', 'source'])
2025-09-04 14:22:05,906 - db_manager - DEBUG - Generated query: INSERT INTO grievances (grievance_id, complainant_id, grievance_description, source) VALUES (%s, %s, %s, %s) RETURNING grievance_id
2025-09-04 14:22:05,906 - db_manager - DEBUG - len of query_keys: 4
2025-09-04 14:22:05,906 - db_manager - DEBUG - Generated query: INSERT INTO grievances (grievance_id, complainant_id, grievance_description, source) VALUES (%s, %s, %s, %s) RETURNING grievance_id
2025-09-04 14:22:05,906 - db_manager - INFO - Connecting to database: grievance_db
2025-09-04 14:22:05,912 - db_manager - INFO - Starting database transaction
2025-09-04 14:22:05,917 - db_manager - INFO - Transaction committed successfully
2025-09-04 14:22:05,917 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-04 14:22:05,917 - db_manager - INFO - create_grievance: Successfully created grievance with ID: GR-20250904-KOJH-D565-B
2025-09-04 14:22:39,040 - db_manager - INFO - Connecting to database: grievance_db
2025-09-04 14:22:39,045 - db_manager - INFO - Starting database transaction
2025-09-04 14:22:39,045 - db_manager - INFO - Executing get_complainant_by_id: 
            SELECT complainant_id, complainant_unique_id, complainant_full_name,    complainant_pho...
2025-09-04 14:22:39,047 - db_manager - INFO - get_complainant_by_id completed in 0.01s. Rows: 1
2025-09-04 14:22:39,047 - db_manager - INFO - Transaction committed successfully
2025-09-04 14:22:39,047 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-04 14:22:39,047 - db_manager - INFO - Connecting to database: grievance_db
2025-09-04 14:22:39,053 - db_manager - INFO - Starting database transaction
2025-09-04 14:22:39,053 - db_manager - INFO - Executing get_grievance_by_id: 
                SELECT g.*, c.complainant_full_name, c.complainant_phone, c.complainant_email,
    ...
2025-09-04 14:22:39,056 - db_manager - INFO - get_grievance_by_id completed in 0.01s. Rows: 1
2025-09-04 14:22:39,056 - db_manager - INFO - Transaction committed successfully
2025-09-04 14:22:39,056 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-04 14:22:39,056 - db_manager - INFO - update_complainant: Updating complainant with ID: CM-20250904-KOJH-CE8C-B
2025-09-04 14:22:39,057 - db_manager - INFO - Connecting to database: grievance_db
2025-09-04 14:22:39,062 - db_manager - INFO - Starting database transaction
2025-09-04 14:22:39,062 - db_manager - INFO - Executing encrypt_field: SELECT encode(pgp_sym_encrypt(%s, %s), 'hex') AS encrypted...
2025-09-04 14:22:39,065 - db_manager - INFO - encrypt_field completed in 0.01s. Rows: 1
2025-09-04 14:22:39,065 - db_manager - INFO - Transaction committed successfully
2025-09-04 14:22:39,065 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-04 14:22:39,066 - db_manager - INFO - Connecting to database: grievance_db
2025-09-04 14:22:39,072 - db_manager - INFO - Starting database transaction
2025-09-04 14:22:39,072 - db_manager - INFO - Executing encrypt_field: SELECT encode(pgp_sym_encrypt(%s, %s), 'hex') AS encrypted...
2025-09-04 14:22:39,073 - db_manager - INFO - encrypt_field completed in 0.01s. Rows: 1
2025-09-04 14:22:39,074 - db_manager - INFO - Transaction committed successfully
2025-09-04 14:22:39,074 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-04 14:22:39,074 - db_manager - INFO - Connecting to database: grievance_db
2025-09-04 14:22:39,079 - db_manager - INFO - Starting database transaction
2025-09-04 14:22:39,079 - db_manager - INFO - Executing encrypt_field: SELECT encode(pgp_sym_encrypt(%s, %s), 'hex') AS encrypted...
2025-09-04 14:22:39,080 - db_manager - INFO - encrypt_field completed in 0.01s. Rows: 1
2025-09-04 14:22:39,080 - db_manager - INFO - Transaction committed successfully
2025-09-04 14:22:39,080 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-04 14:22:39,080 - db_manager - DEBUG - encrypted phone number +9779876543210 at encrypt_complainant_data: c30d040703024c1fe0b3cf10efc567d23f01647b993250aad13e5bc99e76cc3d5dc9d7849151dfbfae9864a35d5d9ce226be7719154d0b53885fda692a29cdd4fb6f9dfee365b2df3264bb5b38c7e763
2025-09-04 14:22:39,081 - db_manager - DEBUG - phone number +9779876543210 hashed to c95ee4a714418be9379a77482c9a8b2003400429703eabebc8d6d971e864f8e0 at hash_sensitive_data
2025-09-04 14:22:39,081 - db_manager - DEBUG - encrypted and hashed data at encrypt_and_hash_sensitive_data: {'complainant_full_name': 'c30d04070302c84db6c7715c4c436bd23c01e5d5a39d5f9f5785c40ba5d3d1cb7b2bba2ff8d3afefe5a9250f455c8b9c42ea3397742afa37ce283dddfbb77421b1a27dbeffbf3d36a8336ce66d', 'complainant_phone': 'c30d040703024c1fe0b3cf10efc567d23f01647b993250aad13e5bc99e76cc3d5dc9d7849151dfbfae9864a35d5d9ce226be7719154d0b53885fda692a29cdd4fb6f9dfee365b2df3264bb5b38c7e763', 'complainant_email': 'c30d04070302f17581c681b2539069d23d01e086dcd6c7bbdec885c76c340165016f27e8b9ecfdf13fd20383725b60f827041caa06ac90e20c9a37cbe8a949f274e025f8e5df8103ec23e4ade32a', 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_full_name_hash': 'f89a60be18617de7fd7559fbcb6ebb58f4928abffb70cf9b2f05586fd48da0de', 'complainant_email_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'complainant_phone_hash': 'c95ee4a714418be9379a77482c9a8b2003400429703eabebc8d6d971e864f8e0'}
2025-09-04 14:22:39,081 - db_manager - DEBUG - encrypted_data at update_complainant: {'complainant_full_name': 'c30d04070302c84db6c7715c4c436bd23c01e5d5a39d5f9f5785c40ba5d3d1cb7b2bba2ff8d3afefe5a9250f455c8b9c42ea3397742afa37ce283dddfbb77421b1a27dbeffbf3d36a8336ce66d', 'complainant_phone': 'c30d040703024c1fe0b3cf10efc567d23f01647b993250aad13e5bc99e76cc3d5dc9d7849151dfbfae9864a35d5d9ce226be7719154d0b53885fda692a29cdd4fb6f9dfee365b2df3264bb5b38c7e763', 'complainant_email': 'c30d04070302f17581c681b2539069d23d01e086dcd6c7bbdec885c76c340165016f27e8b9ecfdf13fd20383725b60f827041caa06ac90e20c9a37cbe8a949f274e025f8e5df8103ec23e4ade32a', 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_full_name_hash': 'f89a60be18617de7fd7559fbcb6ebb58f4928abffb70cf9b2f05586fd48da0de', 'complainant_email_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'complainant_phone_hash': 'c95ee4a714418be9379a77482c9a8b2003400429703eabebc8d6d971e864f8e0'}
2025-09-04 14:22:39,081 - db_manager - DEBUG - execute_update values: ('c30d04070302c84db6c7715c4c436bd23c01e5d5a39d5f9f5785c40ba5d3d1cb7b2bba2ff8d3afefe5a9250f455c8b9c42ea3397742afa37ce283dddfbb77421b1a27dbeffbf3d36a8336ce66d', 'c30d040703024c1fe0b3cf10efc567d23f01647b993250aad13e5bc99e76cc3d5dc9d7849151dfbfae9864a35d5d9ce226be7719154d0b53885fda692a29cdd4fb6f9dfee365b2df3264bb5b38c7e763', 'c30d04070302f17581c681b2539069d23d01e086dcd6c7bbdec885c76c340165016f27e8b9ecfdf13fd20383725b60f827041caa06ac90e20c9a37cbe8a949f274e025f8e5df8103ec23e4ade32a', 'Koshi', 'Jhapa', 'f89a60be18617de7fd7559fbcb6ebb58f4928abffb70cf9b2f05586fd48da0de', 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'c95ee4a714418be9379a77482c9a8b2003400429703eabebc8d6d971e864f8e0', 'CM-20250904-KOJH-CE8C-B')
2025-09-04 14:22:39,081 - db_manager - DEBUG - execute_update query: UPDATE complainants SET complainant_full_name = %s, complainant_phone = %s, complainant_email = %s, complainant_province = %s, complainant_district = %s, complainant_full_name_hash = %s, complainant_email_hash = %s, complainant_phone_hash = %s WHERE complainant_id = %s
2025-09-04 14:22:39,081 - db_manager - INFO - Connecting to database: grievance_db
2025-09-04 14:22:39,086 - db_manager - INFO - Starting database transaction
2025-09-04 14:22:39,086 - db_manager - INFO - execute_update: Executing update query: UPDATE complainants SET complainant_full_name = %s, complainant_phone = %s, complainant_email = %s, ...
2025-09-04 14:22:39,088 - db_manager - INFO - execute_update: Update completed in 0.01s. Affected rows: 1
2025-09-04 14:22:39,090 - db_manager - INFO - Transaction committed successfully
2025-09-04 14:22:39,090 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-04 14:22:39,090 - db_manager - INFO - Complainant updated in db: CM-20250904-KOJH-CE8C-B
2025-09-04 14:22:39,090 - db_manager - INFO - update_grievance: Updating grievance with ID: GR-20250904-KOJH-D565-B
2025-09-04 14:22:39,090 - db_manager - DEBUG - execute_update values: (None, None, 'There is dust everywhere kids are coughing need to go to hospital', None, None, 'ne', 'GR-20250904-KOJH-D565-B')
2025-09-04 14:22:39,090 - db_manager - DEBUG - execute_update query: 
                    UPDATE grievances 
                    SET grievance_categories = %s,
                        grievance_summary = %s,
                        grievance_description = %s,
                        grievance_claimed_amount = %s,
                        grievance_location = %s,
                        language_code = %s,
                        grievance_modification_date = CURRENT_TIMESTAMP
                    WHERE grievance_id = %s
                    RETURNING grievance_id
                
2025-09-04 14:22:39,090 - db_manager - INFO - Connecting to database: grievance_db
2025-09-04 14:22:39,095 - db_manager - INFO - Starting database transaction
2025-09-04 14:22:39,096 - db_manager - INFO - execute_update: Executing update query: 
                    UPDATE grievances 
                    SET grievance_categories = %s,
         ...
2025-09-04 14:22:39,097 - db_manager - INFO - execute_update: Update completed in 0.01s. Affected rows: 1
2025-09-04 14:22:39,099 - db_manager - INFO - Transaction committed successfully
2025-09-04 14:22:39,099 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-04 14:22:39,099 - db_manager - INFO - update_grievance: Updated grievance with ID: GR-20250904-KOJH-D565-B, rows affected: 1
2025-09-04 14:22:39,099 - db_manager - INFO - Grievance updated in db: GR-20250904-KOJH-D565-B
2025-09-04 14:22:39,099 - db_manager - INFO - Connecting to database: grievance_db
2025-09-04 14:22:39,105 - db_manager - INFO - Starting database transaction
2025-09-04 14:22:39,105 - db_manager - INFO - Executing get_grievance_files: 
            SELECT file_id, file_name, file_type, file_size, upload_timestamp
            FROM file...
2025-09-04 14:22:39,106 - db_manager - INFO - get_grievance_files completed in 0.01s. Rows: 0
2025-09-04 14:22:39,106 - db_manager - INFO - Transaction committed successfully
2025-09-04 14:22:39,106 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-04 14:22:39,107 - db_manager - INFO - Connecting to database: grievance_db
2025-09-04 14:22:39,111 - db_manager - INFO - Starting database transaction
2025-09-04 14:22:39,111 - db_manager - INFO - Executing get_grievance_files: 
            SELECT file_id, file_name, file_type, file_size, upload_timestamp
            FROM file...
2025-09-04 14:22:39,112 - db_manager - INFO - get_grievance_files completed in 0.01s. Rows: 0
2025-09-04 14:22:39,113 - db_manager - INFO - Transaction committed successfully
2025-09-04 14:22:39,113 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-04 14:22:39,160 - db_manager - INFO - Connecting to database: grievance_db
2025-09-04 14:22:39,166 - db_manager - INFO - Starting database transaction
2025-09-04 14:22:39,166 - db_manager - INFO - Executing get_grievance_by_id: 
                SELECT g.*, c.complainant_full_name, c.complainant_phone, c.complainant_email,
    ...
2025-09-04 14:22:39,168 - db_manager - INFO - get_grievance_by_id completed in 0.01s. Rows: 1
2025-09-04 14:22:39,168 - db_manager - INFO - Transaction committed successfully
2025-09-04 14:22:39,168 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-04 20:06:05,415 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-04 20:06:05,416 - db_manager - INFO - Database manager initialized successfully
2025-09-04 20:06:05,416 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-04 20:06:05,416 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-04 20:06:05,416 - db_manager - INFO - Database manager initialized successfully
2025-09-04 20:06:05,416 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-04 20:06:05,416 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-04 20:06:05,416 - db_manager - INFO - Database manager initialized successfully
2025-09-04 20:06:05,416 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-04 20:06:05,416 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-04 20:06:05,416 - db_manager - INFO - Database manager initialized successfully
2025-09-04 20:06:05,416 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-04 20:06:05,416 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-04 20:06:05,417 - db_manager - INFO - Database manager initialized successfully
2025-09-04 20:06:05,417 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-04 20:06:05,417 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-04 20:06:05,417 - db_manager - INFO - Database manager initialized successfully
2025-09-04 20:06:05,417 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-04 20:06:05,417 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-04 20:06:05,417 - db_manager - INFO - Database manager initialized successfully
2025-09-04 20:06:05,417 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-04 20:06:05,417 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-04 20:06:05,417 - db_manager - INFO - Database manager initialized successfully
2025-09-04 20:06:05,417 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-04 20:06:05,417 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-04 20:06:05,417 - db_manager - INFO - Database manager initialized successfully
2025-09-04 20:06:05,417 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-04 20:06:05,417 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-04 20:06:05,417 - db_manager - INFO - Database manager initialized successfully
2025-09-04 20:06:05,418 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-04 20:07:09,941 - db_manager - INFO - create_complainant: Creating complainant with ID: CM-20250904-KOJH-CBFF-B
2025-09-04 20:07:09,941 - db_manager - DEBUG - encrypted and hashed data at encrypt_and_hash_sensitive_data: {'complainant_id': 'CM-20250904-KOJH-CBFF-B', 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_unique_id': 'CM-20250904-KOJH-CBFF-B'}
2025-09-04 20:07:09,941 - db_manager - DEBUG - query_keys at generate_query_string: dict_keys(['complainant_id', 'complainant_province', 'complainant_district', 'complainant_unique_id'])
2025-09-04 20:07:09,941 - db_manager - DEBUG - Generated query: INSERT INTO complainants (complainant_id, complainant_province, complainant_district, complainant_unique_id) VALUES (%s, %s, %s, %s)
2025-09-04 20:07:09,941 - db_manager - DEBUG - len of query_keys: 4
2025-09-04 20:07:09,941 - db_manager - DEBUG - Generated query: INSERT INTO complainants (complainant_id, complainant_province, complainant_district, complainant_unique_id) VALUES (%s, %s, %s, %s)
2025-09-04 20:07:09,941 - db_manager - INFO - Connecting to database: grievance_db
2025-09-04 20:07:09,947 - db_manager - INFO - Starting database transaction
2025-09-04 20:07:09,950 - db_manager - INFO - Transaction committed successfully
2025-09-04 20:07:09,950 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-04 20:07:09,950 - db_manager - INFO - create_complainant: Successfully created complainant with ID: CM-20250904-KOJH-CBFF-B
2025-09-04 20:07:09,950 - db_manager - INFO - create_grievance: Creating grievance with data: {'grievance_id': 'GR-20250904-KOJH-BB58-B', 'complainant_id': 'CM-20250904-KOJH-CBFF-B', 'grievance_description': 'dust everywhere\nkids coughing I need to go to the hospital', 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_office': None, 'source': 'bot', 'complainant_unique_id': 'CM-20250904-KOJH-CBFF-B'}
2025-09-04 20:07:09,950 - db_manager - INFO - create_grievance: Creating grievance with ID: GR-20250904-KOJH-BB58-B
2025-09-04 20:07:09,950 - db_manager - DEBUG - query_keys at generate_query_string: dict_keys(['grievance_id', 'complainant_id', 'grievance_description', 'source'])
2025-09-04 20:07:09,950 - db_manager - DEBUG - Generated query: INSERT INTO grievances (grievance_id, complainant_id, grievance_description, source) VALUES (%s, %s, %s, %s) RETURNING grievance_id
2025-09-04 20:07:09,950 - db_manager - DEBUG - len of query_keys: 4
2025-09-04 20:07:09,950 - db_manager - DEBUG - Generated query: INSERT INTO grievances (grievance_id, complainant_id, grievance_description, source) VALUES (%s, %s, %s, %s) RETURNING grievance_id
2025-09-04 20:07:09,950 - db_manager - INFO - Connecting to database: grievance_db
2025-09-04 20:07:09,955 - db_manager - INFO - Starting database transaction
2025-09-04 20:07:09,961 - db_manager - INFO - Transaction committed successfully
2025-09-04 20:07:09,961 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-04 20:07:09,961 - db_manager - INFO - create_grievance: Successfully created grievance with ID: GR-20250904-KOJH-BB58-B
2025-09-04 20:07:14,772 - db_manager - INFO - Connecting to database: grievance_db
2025-09-04 20:07:14,777 - db_manager - INFO - Starting database transaction
2025-09-04 20:07:14,777 - db_manager - INFO - Executing get_complainant_by_id: 
            SELECT complainant_id, complainant_unique_id, complainant_full_name,    complainant_pho...
2025-09-04 20:07:14,780 - db_manager - INFO - get_complainant_by_id completed in 0.01s. Rows: 1
2025-09-04 20:07:14,780 - db_manager - INFO - Transaction committed successfully
2025-09-04 20:07:14,780 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-04 20:07:14,780 - db_manager - INFO - Connecting to database: grievance_db
2025-09-04 20:07:14,785 - db_manager - INFO - Starting database transaction
2025-09-04 20:07:14,785 - db_manager - INFO - Executing get_grievance_by_id: 
                SELECT g.*, c.complainant_full_name, c.complainant_phone, c.complainant_email,
    ...
2025-09-04 20:07:14,787 - db_manager - INFO - get_grievance_by_id completed in 0.01s. Rows: 1
2025-09-04 20:07:14,787 - db_manager - INFO - Transaction committed successfully
2025-09-04 20:07:14,788 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-04 20:07:14,788 - db_manager - DEBUG - get_grievance_by_id: grievance_id: {'grievance_id': 'GR-20250904-KOJH-BB58-B', 'complainant_id': 'CM-20250904-KOJH-CBFF-B', 'grievance_categories': None, 'grievance_summary': None, 'grievance_description': 'dust everywhere\nkids coughing I need to go to the hospital', 'grievance_claimed_amount': None, 'grievance_location': None, 'language_code': 'ne', 'classification_status': 'pending', 'grievance_creation_date': datetime.datetime(2025, 9, 4, 20, 7, 9, 955826, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'grievance_modification_date': datetime.datetime(2025, 9, 4, 20, 7, 9, 955826, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'is_temporary': True, 'source': 'bot', 'complainant_full_name': None, 'complainant_phone': None, 'complainant_email': None, 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_municipality': None, 'complainant_ward': None, 'complainant_village': None, 'complainant_address': None}, results: [{'grievance_id': 'GR-20250904-KOJH-BB58-B', 'complainant_id': 'CM-20250904-KOJH-CBFF-B', 'grievance_categories': None, 'grievance_summary': None, 'grievance_description': 'dust everywhere\nkids coughing I need to go to the hospital', 'grievance_claimed_amount': None, 'grievance_location': None, 'language_code': 'ne', 'classification_status': 'pending', 'grievance_creation_date': datetime.datetime(2025, 9, 4, 20, 7, 9, 955826, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'grievance_modification_date': datetime.datetime(2025, 9, 4, 20, 7, 9, 955826, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'is_temporary': True, 'source': 'bot', 'complainant_full_name': None, 'complainant_phone': None, 'complainant_email': None, 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_municipality': None, 'complainant_ward': None, 'complainant_village': None, 'complainant_address': None}]
2025-09-04 20:07:14,788 - db_manager - INFO - update_complainant: Updating complainant with ID: CM-20250904-KOJH-CBFF-B
2025-09-04 20:07:14,788 - db_manager - INFO - Connecting to database: grievance_db
2025-09-04 20:07:14,792 - db_manager - INFO - Starting database transaction
2025-09-04 20:07:14,793 - db_manager - INFO - Executing encrypt_field: SELECT encode(pgp_sym_encrypt(%s, %s), 'hex') AS encrypted...
2025-09-04 20:07:14,795 - db_manager - INFO - encrypt_field completed in 0.01s. Rows: 1
2025-09-04 20:07:14,795 - db_manager - INFO - Transaction committed successfully
2025-09-04 20:07:14,795 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-04 20:07:14,796 - db_manager - INFO - Connecting to database: grievance_db
2025-09-04 20:07:14,800 - db_manager - INFO - Starting database transaction
2025-09-04 20:07:14,800 - db_manager - INFO - Executing encrypt_field: SELECT encode(pgp_sym_encrypt(%s, %s), 'hex') AS encrypted...
2025-09-04 20:07:14,801 - db_manager - INFO - encrypt_field completed in 0.01s. Rows: 1
2025-09-04 20:07:14,801 - db_manager - INFO - Transaction committed successfully
2025-09-04 20:07:14,801 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-04 20:07:14,801 - db_manager - INFO - Connecting to database: grievance_db
2025-09-04 20:07:14,806 - db_manager - INFO - Starting database transaction
2025-09-04 20:07:14,806 - db_manager - INFO - Executing encrypt_field: SELECT encode(pgp_sym_encrypt(%s, %s), 'hex') AS encrypted...
2025-09-04 20:07:14,807 - db_manager - INFO - encrypt_field completed in 0.01s. Rows: 1
2025-09-04 20:07:14,807 - db_manager - INFO - Transaction committed successfully
2025-09-04 20:07:14,807 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-04 20:07:14,807 - db_manager - DEBUG - encrypted phone number Not provided at encrypt_complainant_data: c30d0407030244406190b3ce8d7065d23d010dbdb899d981614b4c02226fa9ed52bba1590d4f3f28d928186b06a0c321e8298d50575c46949a0c3b8b08a2564589c2acf3b2cbfeaf3dafb7748f04
2025-09-04 20:07:14,807 - db_manager - DEBUG - phone number Not provided hashed to d83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f at hash_sensitive_data
2025-09-04 20:07:14,807 - db_manager - DEBUG - encrypted and hashed data at encrypt_and_hash_sensitive_data: {'complainant_full_name': 'c30d040703027f3ea480bf6d15f56fd23d01425a0ed7713b725670254528c67409a7c5bc25b322950d385df2a18277bab02185e2a82787dbf575406b0953a6eb46ab0f6be51195209aae6f84cf09', 'complainant_phone': 'c30d0407030244406190b3ce8d7065d23d010dbdb899d981614b4c02226fa9ed52bba1590d4f3f28d928186b06a0c321e8298d50575c46949a0c3b8b08a2564589c2acf3b2cbfeaf3dafb7748f04', 'complainant_email': 'c30d040703024af954ac8838155d68d23d012ec9a90e1ba8e8a5e73cbd870d9b0bb48c3df0e3a0bb62010d5463bff36a81fe6d12c3c5f1093685924bdf111d36133a405c56c415c7ddc27bd621d4', 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_full_name_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'complainant_email_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'complainant_phone_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f'}
2025-09-04 20:07:14,807 - db_manager - DEBUG - encrypted_data at update_complainant: {'complainant_full_name': 'c30d040703027f3ea480bf6d15f56fd23d01425a0ed7713b725670254528c67409a7c5bc25b322950d385df2a18277bab02185e2a82787dbf575406b0953a6eb46ab0f6be51195209aae6f84cf09', 'complainant_phone': 'c30d0407030244406190b3ce8d7065d23d010dbdb899d981614b4c02226fa9ed52bba1590d4f3f28d928186b06a0c321e8298d50575c46949a0c3b8b08a2564589c2acf3b2cbfeaf3dafb7748f04', 'complainant_email': 'c30d040703024af954ac8838155d68d23d012ec9a90e1ba8e8a5e73cbd870d9b0bb48c3df0e3a0bb62010d5463bff36a81fe6d12c3c5f1093685924bdf111d36133a405c56c415c7ddc27bd621d4', 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_full_name_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'complainant_email_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'complainant_phone_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f'}
2025-09-04 20:07:14,807 - db_manager - DEBUG - execute_update values: ('c30d040703027f3ea480bf6d15f56fd23d01425a0ed7713b725670254528c67409a7c5bc25b322950d385df2a18277bab02185e2a82787dbf575406b0953a6eb46ab0f6be51195209aae6f84cf09', 'c30d0407030244406190b3ce8d7065d23d010dbdb899d981614b4c02226fa9ed52bba1590d4f3f28d928186b06a0c321e8298d50575c46949a0c3b8b08a2564589c2acf3b2cbfeaf3dafb7748f04', 'c30d040703024af954ac8838155d68d23d012ec9a90e1ba8e8a5e73cbd870d9b0bb48c3df0e3a0bb62010d5463bff36a81fe6d12c3c5f1093685924bdf111d36133a405c56c415c7ddc27bd621d4', 'Koshi', 'Jhapa', 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'CM-20250904-KOJH-CBFF-B')
2025-09-04 20:07:14,807 - db_manager - DEBUG - execute_update query: UPDATE complainants SET complainant_full_name = %s, complainant_phone = %s, complainant_email = %s, complainant_province = %s, complainant_district = %s, complainant_full_name_hash = %s, complainant_email_hash = %s, complainant_phone_hash = %s WHERE complainant_id = %s
2025-09-04 20:07:14,807 - db_manager - INFO - Connecting to database: grievance_db
2025-09-04 20:07:14,812 - db_manager - INFO - Starting database transaction
2025-09-04 20:07:14,812 - db_manager - INFO - execute_update: Executing update query: UPDATE complainants SET complainant_full_name = %s, complainant_phone = %s, complainant_email = %s, ...
2025-09-04 20:07:14,813 - db_manager - INFO - execute_update: Update completed in 0.01s. Affected rows: 1
2025-09-04 20:07:14,818 - db_manager - INFO - Transaction committed successfully
2025-09-04 20:07:14,819 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-04 20:07:14,819 - db_manager - INFO - Complainant updated in db: CM-20250904-KOJH-CBFF-B
2025-09-04 20:07:14,819 - db_manager - INFO - update_grievance: Updating grievance with ID: GR-20250904-KOJH-BB58-B
2025-09-04 20:07:14,819 - db_manager - DEBUG - execute_update values: (None, None, 'dust everywhere\nkids coughing I need to go to the hospital', None, None, 'ne', 'GR-20250904-KOJH-BB58-B')
2025-09-04 20:07:14,819 - db_manager - DEBUG - execute_update query: 
                    UPDATE grievances 
                    SET grievance_categories = %s,
                        grievance_summary = %s,
                        grievance_description = %s,
                        grievance_claimed_amount = %s,
                        grievance_location = %s,
                        language_code = %s,
                        grievance_modification_date = CURRENT_TIMESTAMP
                    WHERE grievance_id = %s
                    RETURNING grievance_id
                
2025-09-04 20:07:14,819 - db_manager - INFO - Connecting to database: grievance_db
2025-09-04 20:07:14,824 - db_manager - INFO - Starting database transaction
2025-09-04 20:07:14,824 - db_manager - INFO - execute_update: Executing update query: 
                    UPDATE grievances 
                    SET grievance_categories = %s,
         ...
2025-09-04 20:07:14,825 - db_manager - INFO - execute_update: Update completed in 0.01s. Affected rows: 1
2025-09-04 20:07:14,830 - db_manager - INFO - Transaction committed successfully
2025-09-04 20:07:14,831 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-04 20:07:14,831 - db_manager - INFO - update_grievance: Updated grievance with ID: GR-20250904-KOJH-BB58-B, rows affected: 1
2025-09-04 20:07:14,831 - db_manager - INFO - Grievance updated in db: GR-20250904-KOJH-BB58-B
2025-09-04 20:07:14,831 - db_manager - INFO - Connecting to database: grievance_db
2025-09-04 20:07:14,836 - db_manager - INFO - Starting database transaction
2025-09-04 20:07:14,836 - db_manager - INFO - Executing get_grievance_files: 
            SELECT file_id, file_name, file_type, file_size, upload_timestamp
            FROM file...
2025-09-04 20:07:14,839 - db_manager - INFO - get_grievance_files completed in 0.01s. Rows: 0
2025-09-04 20:07:14,840 - db_manager - INFO - Transaction committed successfully
2025-09-04 20:07:14,840 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-04 20:07:14,840 - db_manager - INFO - Connecting to database: grievance_db
2025-09-04 20:07:14,845 - db_manager - INFO - Starting database transaction
2025-09-04 20:07:14,845 - db_manager - INFO - Executing get_grievance_files: 
            SELECT file_id, file_name, file_type, file_size, upload_timestamp
            FROM file...
2025-09-04 20:07:14,846 - db_manager - INFO - get_grievance_files completed in 0.01s. Rows: 0
2025-09-04 20:07:14,846 - db_manager - INFO - Transaction committed successfully
2025-09-04 20:07:14,846 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-04 20:07:14,888 - db_manager - INFO - Connecting to database: grievance_db
2025-09-04 20:07:14,894 - db_manager - INFO - Starting database transaction
2025-09-04 20:07:14,894 - db_manager - INFO - Executing get_grievance_by_id: 
                SELECT g.*, c.complainant_full_name, c.complainant_phone, c.complainant_email,
    ...
2025-09-04 20:07:14,895 - db_manager - INFO - get_grievance_by_id completed in 0.01s. Rows: 1
2025-09-04 20:07:14,896 - db_manager - INFO - Transaction committed successfully
2025-09-04 20:07:14,896 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-04 20:07:14,896 - db_manager - DEBUG - get_grievance_by_id: grievance_id: {'grievance_id': 'GR-20250904-KOJH-BB58-B', 'complainant_id': 'CM-20250904-KOJH-CBFF-B', 'grievance_categories': None, 'grievance_summary': None, 'grievance_description': 'dust everywhere\nkids coughing I need to go to the hospital', 'grievance_claimed_amount': None, 'grievance_location': None, 'language_code': 'ne', 'classification_status': 'pending', 'grievance_creation_date': datetime.datetime(2025, 9, 4, 20, 7, 9, 955826, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'grievance_modification_date': datetime.datetime(2025, 9, 4, 20, 7, 14, 824286, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'is_temporary': True, 'source': 'bot', 'complainant_full_name': 'c30d040703027f3ea480bf6d15f56fd23d01425a0ed7713b725670254528c67409a7c5bc25b322950d385df2a18277bab02185e2a82787dbf575406b0953a6eb46ab0f6be51195209aae6f84cf09', 'complainant_phone': 'c30d0407030244406190b3ce8d7065d23d010dbdb899d981614b4c02226fa9ed52bba1590d4f3f28d928186b06a0c321e8298d50575c46949a0c3b8b08a2564589c2acf3b2cbfeaf3dafb7748f04', 'complainant_email': 'c30d040703024af954ac8838155d68d23d012ec9a90e1ba8e8a5e73cbd870d9b0bb48c3df0e3a0bb62010d5463bff36a81fe6d12c3c5f1093685924bdf111d36133a405c56c415c7ddc27bd621d4', 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_municipality': None, 'complainant_ward': None, 'complainant_village': None, 'complainant_address': None}, results: [{'grievance_id': 'GR-20250904-KOJH-BB58-B', 'complainant_id': 'CM-20250904-KOJH-CBFF-B', 'grievance_categories': None, 'grievance_summary': None, 'grievance_description': 'dust everywhere\nkids coughing I need to go to the hospital', 'grievance_claimed_amount': None, 'grievance_location': None, 'language_code': 'ne', 'classification_status': 'pending', 'grievance_creation_date': datetime.datetime(2025, 9, 4, 20, 7, 9, 955826, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'grievance_modification_date': datetime.datetime(2025, 9, 4, 20, 7, 14, 824286, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'is_temporary': True, 'source': 'bot', 'complainant_full_name': 'c30d040703027f3ea480bf6d15f56fd23d01425a0ed7713b725670254528c67409a7c5bc25b322950d385df2a18277bab02185e2a82787dbf575406b0953a6eb46ab0f6be51195209aae6f84cf09', 'complainant_phone': 'c30d0407030244406190b3ce8d7065d23d010dbdb899d981614b4c02226fa9ed52bba1590d4f3f28d928186b06a0c321e8298d50575c46949a0c3b8b08a2564589c2acf3b2cbfeaf3dafb7748f04', 'complainant_email': 'c30d040703024af954ac8838155d68d23d012ec9a90e1ba8e8a5e73cbd870d9b0bb48c3df0e3a0bb62010d5463bff36a81fe6d12c3c5f1093685924bdf111d36133a405c56c415c7ddc27bd621d4', 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_municipality': None, 'complainant_ward': None, 'complainant_village': None, 'complainant_address': None}]
2025-09-04 20:09:21,269 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-04 20:09:21,269 - db_manager - INFO - Database manager initialized successfully
2025-09-04 20:09:21,270 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-04 20:09:21,270 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-04 20:09:21,270 - db_manager - INFO - Database manager initialized successfully
2025-09-04 20:09:21,270 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-04 20:09:21,270 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-04 20:09:21,270 - db_manager - INFO - Database manager initialized successfully
2025-09-04 20:09:21,270 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-04 20:09:21,270 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-04 20:09:21,270 - db_manager - INFO - Database manager initialized successfully
2025-09-04 20:09:21,270 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-04 20:09:21,270 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-04 20:09:21,270 - db_manager - INFO - Database manager initialized successfully
2025-09-04 20:09:21,270 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-04 20:09:21,270 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-04 20:09:21,270 - db_manager - INFO - Database manager initialized successfully
2025-09-04 20:09:21,270 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-04 20:09:21,270 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-04 20:09:21,270 - db_manager - INFO - Database manager initialized successfully
2025-09-04 20:09:21,270 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-04 20:09:21,270 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-04 20:09:21,270 - db_manager - INFO - Database manager initialized successfully
2025-09-04 20:09:21,270 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-04 20:09:21,270 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-04 20:09:21,270 - db_manager - INFO - Database manager initialized successfully
2025-09-04 20:09:21,270 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-04 20:09:21,271 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-04 20:09:21,271 - db_manager - INFO - Database manager initialized successfully
2025-09-04 20:09:21,271 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-04 20:10:29,261 - db_manager - INFO - create_complainant: Creating complainant with ID: CM-20250904-KOJH-766B-B
2025-09-04 20:10:29,261 - db_manager - DEBUG - encrypted and hashed data at encrypt_and_hash_sensitive_data: {'complainant_id': 'CM-20250904-KOJH-766B-B', 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_unique_id': 'CM-20250904-KOJH-766B-B'}
2025-09-04 20:10:29,261 - db_manager - DEBUG - query_keys at generate_query_string: dict_keys(['complainant_id', 'complainant_province', 'complainant_district', 'complainant_unique_id'])
2025-09-04 20:10:29,261 - db_manager - DEBUG - Generated query: INSERT INTO complainants (complainant_id, complainant_province, complainant_district, complainant_unique_id) VALUES (%s, %s, %s, %s)
2025-09-04 20:10:29,261 - db_manager - DEBUG - len of query_keys: 4
2025-09-04 20:10:29,261 - db_manager - DEBUG - Generated query: INSERT INTO complainants (complainant_id, complainant_province, complainant_district, complainant_unique_id) VALUES (%s, %s, %s, %s)
2025-09-04 20:10:29,262 - db_manager - INFO - Connecting to database: grievance_db
2025-09-04 20:10:29,267 - db_manager - INFO - Starting database transaction
2025-09-04 20:10:29,270 - db_manager - INFO - Transaction committed successfully
2025-09-04 20:10:29,270 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-04 20:10:29,270 - db_manager - INFO - create_complainant: Successfully created complainant with ID: CM-20250904-KOJH-766B-B
2025-09-04 20:10:29,270 - db_manager - INFO - create_grievance: Creating grievance with data: {'grievance_id': 'GR-20250904-KOJH-ABC7-B', 'complainant_id': 'CM-20250904-KOJH-766B-B', 'grievance_description': 'dust everywhere kids coughing I need to go to the hospital', 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_office': None, 'source': 'bot', 'complainant_unique_id': 'CM-20250904-KOJH-766B-B'}
2025-09-04 20:10:29,270 - db_manager - INFO - create_grievance: Creating grievance with ID: GR-20250904-KOJH-ABC7-B
2025-09-04 20:10:29,270 - db_manager - DEBUG - query_keys at generate_query_string: dict_keys(['grievance_id', 'complainant_id', 'grievance_description', 'source'])
2025-09-04 20:10:29,270 - db_manager - DEBUG - Generated query: INSERT INTO grievances (grievance_id, complainant_id, grievance_description, source) VALUES (%s, %s, %s, %s) RETURNING grievance_id
2025-09-04 20:10:29,270 - db_manager - DEBUG - len of query_keys: 4
2025-09-04 20:10:29,270 - db_manager - DEBUG - Generated query: INSERT INTO grievances (grievance_id, complainant_id, grievance_description, source) VALUES (%s, %s, %s, %s) RETURNING grievance_id
2025-09-04 20:10:29,270 - db_manager - INFO - Connecting to database: grievance_db
2025-09-04 20:10:29,276 - db_manager - INFO - Starting database transaction
2025-09-04 20:10:29,280 - db_manager - INFO - Transaction committed successfully
2025-09-04 20:10:29,280 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-04 20:10:29,280 - db_manager - INFO - create_grievance: Successfully created grievance with ID: GR-20250904-KOJH-ABC7-B
2025-09-04 20:10:31,693 - db_manager - INFO - Connecting to database: grievance_db
2025-09-04 20:10:31,699 - db_manager - INFO - Starting database transaction
2025-09-04 20:10:31,699 - db_manager - INFO - Executing get_complainant_by_id: 
            SELECT complainant_id, complainant_unique_id, complainant_full_name,    complainant_pho...
2025-09-04 20:10:31,701 - db_manager - INFO - get_complainant_by_id completed in 0.01s. Rows: 1
2025-09-04 20:10:31,701 - db_manager - INFO - Transaction committed successfully
2025-09-04 20:10:31,701 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-04 20:10:31,701 - db_manager - INFO - Connecting to database: grievance_db
2025-09-04 20:10:31,706 - db_manager - INFO - Starting database transaction
2025-09-04 20:10:31,706 - db_manager - INFO - Executing get_grievance_by_id: 
                SELECT g.*, c.complainant_full_name, c.complainant_phone, c.complainant_email,
    ...
2025-09-04 20:10:31,708 - db_manager - INFO - get_grievance_by_id completed in 0.01s. Rows: 1
2025-09-04 20:10:31,708 - db_manager - INFO - Transaction committed successfully
2025-09-04 20:10:31,708 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-04 20:10:31,708 - db_manager - DEBUG - get_grievance_by_id: grievance_id: {'grievance_id': 'GR-20250904-KOJH-ABC7-B', 'complainant_id': 'CM-20250904-KOJH-766B-B', 'grievance_categories': None, 'grievance_summary': None, 'grievance_description': 'dust everywhere kids coughing I need to go to the hospital', 'grievance_claimed_amount': None, 'grievance_location': None, 'language_code': 'ne', 'classification_status': 'pending', 'grievance_creation_date': datetime.datetime(2025, 9, 4, 20, 10, 29, 276519, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'grievance_modification_date': datetime.datetime(2025, 9, 4, 20, 10, 29, 276519, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'is_temporary': True, 'source': 'bot', 'complainant_full_name': None, 'complainant_phone': None, 'complainant_email': None, 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_municipality': None, 'complainant_ward': None, 'complainant_village': None, 'complainant_address': None}, results: [{'grievance_id': 'GR-20250904-KOJH-ABC7-B', 'complainant_id': 'CM-20250904-KOJH-766B-B', 'grievance_categories': None, 'grievance_summary': None, 'grievance_description': 'dust everywhere kids coughing I need to go to the hospital', 'grievance_claimed_amount': None, 'grievance_location': None, 'language_code': 'ne', 'classification_status': 'pending', 'grievance_creation_date': datetime.datetime(2025, 9, 4, 20, 10, 29, 276519, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'grievance_modification_date': datetime.datetime(2025, 9, 4, 20, 10, 29, 276519, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'is_temporary': True, 'source': 'bot', 'complainant_full_name': None, 'complainant_phone': None, 'complainant_email': None, 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_municipality': None, 'complainant_ward': None, 'complainant_village': None, 'complainant_address': None}]
2025-09-04 20:10:31,708 - db_manager - INFO - update_complainant: Updating complainant with ID: CM-20250904-KOJH-766B-B
2025-09-04 20:10:31,708 - db_manager - INFO - Connecting to database: grievance_db
2025-09-04 20:10:31,713 - db_manager - INFO - Starting database transaction
2025-09-04 20:10:31,713 - db_manager - INFO - Executing encrypt_field: SELECT encode(pgp_sym_encrypt(%s, %s), 'hex') AS encrypted...
2025-09-04 20:10:31,714 - db_manager - INFO - encrypt_field completed in 0.01s. Rows: 1
2025-09-04 20:10:31,714 - db_manager - INFO - Transaction committed successfully
2025-09-04 20:10:31,714 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-04 20:10:31,715 - db_manager - INFO - Connecting to database: grievance_db
2025-09-04 20:10:31,719 - db_manager - INFO - Starting database transaction
2025-09-04 20:10:31,719 - db_manager - INFO - Executing encrypt_field: SELECT encode(pgp_sym_encrypt(%s, %s), 'hex') AS encrypted...
2025-09-04 20:10:31,720 - db_manager - INFO - encrypt_field completed in 0.01s. Rows: 1
2025-09-04 20:10:31,720 - db_manager - INFO - Transaction committed successfully
2025-09-04 20:10:31,720 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-04 20:10:31,720 - db_manager - INFO - Connecting to database: grievance_db
2025-09-04 20:10:31,724 - db_manager - INFO - Starting database transaction
2025-09-04 20:10:31,725 - db_manager - INFO - Executing encrypt_field: SELECT encode(pgp_sym_encrypt(%s, %s), 'hex') AS encrypted...
2025-09-04 20:10:31,726 - db_manager - INFO - encrypt_field completed in 0.01s. Rows: 1
2025-09-04 20:10:31,726 - db_manager - INFO - Transaction committed successfully
2025-09-04 20:10:31,726 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-04 20:10:31,726 - db_manager - DEBUG - encrypted phone number Not provided at encrypt_complainant_data: c30d040703020a7ec41a9ea46ff864d23d0177103b9dad5db0f22b1f3e5bb8faade77c476207abbbb223ad0a5c9a5e78caf793228d188eb992dc25c017ec0cca8398bf82b697bd0c3066f0802bd1
2025-09-04 20:10:31,726 - db_manager - DEBUG - phone number Not provided hashed to d83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f at hash_sensitive_data
2025-09-04 20:10:31,726 - db_manager - DEBUG - encrypted and hashed data at encrypt_and_hash_sensitive_data: {'complainant_full_name': 'c30d04070302a21bfc5031c0019b6ed23d015966022b65eca2944d6887153ed04d8e54a64d5ed53bf7385e69c3c90596b624a4fb8e773a58581cecf6b0e66168b87da3da04d9d791c8e322c12460', 'complainant_phone': 'c30d040703020a7ec41a9ea46ff864d23d0177103b9dad5db0f22b1f3e5bb8faade77c476207abbbb223ad0a5c9a5e78caf793228d188eb992dc25c017ec0cca8398bf82b697bd0c3066f0802bd1', 'complainant_email': 'c30d04070302890a8241dc68617c72d23d01bd0847776fa2b8b54af166f2a4436e3301aa6ed83772e71a3eae0d1961f75ce95e888a625c0dbfdd8fc7e2c81683790fc5704a5f9b8e5028d4d92b73', 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_email_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'complainant_full_name_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'complainant_phone_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f'}
2025-09-04 20:10:31,726 - db_manager - DEBUG - encrypted_data at update_complainant: {'complainant_full_name': 'c30d04070302a21bfc5031c0019b6ed23d015966022b65eca2944d6887153ed04d8e54a64d5ed53bf7385e69c3c90596b624a4fb8e773a58581cecf6b0e66168b87da3da04d9d791c8e322c12460', 'complainant_phone': 'c30d040703020a7ec41a9ea46ff864d23d0177103b9dad5db0f22b1f3e5bb8faade77c476207abbbb223ad0a5c9a5e78caf793228d188eb992dc25c017ec0cca8398bf82b697bd0c3066f0802bd1', 'complainant_email': 'c30d04070302890a8241dc68617c72d23d01bd0847776fa2b8b54af166f2a4436e3301aa6ed83772e71a3eae0d1961f75ce95e888a625c0dbfdd8fc7e2c81683790fc5704a5f9b8e5028d4d92b73', 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_email_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'complainant_full_name_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'complainant_phone_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f'}
2025-09-04 20:10:31,726 - db_manager - DEBUG - execute_update values: ('c30d04070302a21bfc5031c0019b6ed23d015966022b65eca2944d6887153ed04d8e54a64d5ed53bf7385e69c3c90596b624a4fb8e773a58581cecf6b0e66168b87da3da04d9d791c8e322c12460', 'c30d040703020a7ec41a9ea46ff864d23d0177103b9dad5db0f22b1f3e5bb8faade77c476207abbbb223ad0a5c9a5e78caf793228d188eb992dc25c017ec0cca8398bf82b697bd0c3066f0802bd1', 'c30d04070302890a8241dc68617c72d23d01bd0847776fa2b8b54af166f2a4436e3301aa6ed83772e71a3eae0d1961f75ce95e888a625c0dbfdd8fc7e2c81683790fc5704a5f9b8e5028d4d92b73', 'Koshi', 'Jhapa', 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'CM-20250904-KOJH-766B-B')
2025-09-04 20:10:31,726 - db_manager - DEBUG - execute_update query: UPDATE complainants SET complainant_full_name = %s, complainant_phone = %s, complainant_email = %s, complainant_province = %s, complainant_district = %s, complainant_email_hash = %s, complainant_full_name_hash = %s, complainant_phone_hash = %s WHERE complainant_id = %s
2025-09-04 20:10:31,726 - db_manager - INFO - Connecting to database: grievance_db
2025-09-04 20:10:31,731 - db_manager - INFO - Starting database transaction
2025-09-04 20:10:31,731 - db_manager - INFO - execute_update: Executing update query: UPDATE complainants SET complainant_full_name = %s, complainant_phone = %s, complainant_email = %s, ...
2025-09-04 20:10:31,732 - db_manager - INFO - execute_update: Update completed in 0.01s. Affected rows: 1
2025-09-04 20:10:31,734 - db_manager - INFO - Transaction committed successfully
2025-09-04 20:10:31,734 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-04 20:10:31,734 - db_manager - INFO - Complainant updated in db: CM-20250904-KOJH-766B-B
2025-09-04 20:10:31,734 - db_manager - INFO - update_grievance: Updating grievance with ID: GR-20250904-KOJH-ABC7-B
2025-09-04 20:10:31,734 - db_manager - DEBUG - execute_update values: (None, None, 'dust everywhere kids coughing I need to go to the hospital', None, None, 'ne', 'GR-20250904-KOJH-ABC7-B')
2025-09-04 20:10:31,734 - db_manager - DEBUG - execute_update query: 
                    UPDATE grievances 
                    SET grievance_categories = %s,
                        grievance_summary = %s,
                        grievance_description = %s,
                        grievance_claimed_amount = %s,
                        grievance_location = %s,
                        language_code = %s,
                        grievance_modification_date = CURRENT_TIMESTAMP
                    WHERE grievance_id = %s
                    RETURNING grievance_id
                
2025-09-04 20:10:31,734 - db_manager - INFO - Connecting to database: grievance_db
2025-09-04 20:10:31,739 - db_manager - INFO - Starting database transaction
2025-09-04 20:10:31,739 - db_manager - INFO - execute_update: Executing update query: 
                    UPDATE grievances 
                    SET grievance_categories = %s,
         ...
2025-09-04 20:10:31,740 - db_manager - INFO - execute_update: Update completed in 0.01s. Affected rows: 1
2025-09-04 20:10:31,742 - db_manager - INFO - Transaction committed successfully
2025-09-04 20:10:31,742 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-04 20:10:31,742 - db_manager - INFO - update_grievance: Updated grievance with ID: GR-20250904-KOJH-ABC7-B, rows affected: 1
2025-09-04 20:10:31,742 - db_manager - INFO - Grievance updated in db: GR-20250904-KOJH-ABC7-B
2025-09-04 20:10:31,742 - db_manager - INFO - Connecting to database: grievance_db
2025-09-04 20:10:31,747 - db_manager - INFO - Starting database transaction
2025-09-04 20:10:31,747 - db_manager - INFO - Executing get_grievance_files: 
            SELECT file_id, file_name, file_type, file_size, upload_timestamp
            FROM file...
2025-09-04 20:10:31,748 - db_manager - INFO - get_grievance_files completed in 0.01s. Rows: 0
2025-09-04 20:10:31,748 - db_manager - INFO - Transaction committed successfully
2025-09-04 20:10:31,748 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-04 20:10:31,748 - db_manager - INFO - Connecting to database: grievance_db
2025-09-04 20:10:31,752 - db_manager - INFO - Starting database transaction
2025-09-04 20:10:31,753 - db_manager - INFO - Executing get_grievance_files: 
            SELECT file_id, file_name, file_type, file_size, upload_timestamp
            FROM file...
2025-09-04 20:10:31,753 - db_manager - INFO - get_grievance_files completed in 0.01s. Rows: 0
2025-09-04 20:10:31,754 - db_manager - INFO - Transaction committed successfully
2025-09-04 20:10:31,754 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-04 20:10:31,794 - db_manager - INFO - Connecting to database: grievance_db
2025-09-04 20:10:31,799 - db_manager - INFO - Starting database transaction
2025-09-04 20:10:31,800 - db_manager - INFO - Executing get_grievance_by_id: 
                SELECT g.*, c.complainant_full_name, c.complainant_phone, c.complainant_email,
    ...
2025-09-04 20:10:31,801 - db_manager - INFO - get_grievance_by_id completed in 0.01s. Rows: 1
2025-09-04 20:10:31,801 - db_manager - INFO - Transaction committed successfully
2025-09-04 20:10:31,802 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-04 20:10:31,802 - db_manager - DEBUG - get_grievance_by_id: grievance_id: {'grievance_id': 'GR-20250904-KOJH-ABC7-B', 'complainant_id': 'CM-20250904-KOJH-766B-B', 'grievance_categories': None, 'grievance_summary': None, 'grievance_description': 'dust everywhere kids coughing I need to go to the hospital', 'grievance_claimed_amount': None, 'grievance_location': None, 'language_code': 'ne', 'classification_status': 'pending', 'grievance_creation_date': datetime.datetime(2025, 9, 4, 20, 10, 29, 276519, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'grievance_modification_date': datetime.datetime(2025, 9, 4, 20, 10, 31, 739326, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'is_temporary': True, 'source': 'bot', 'complainant_full_name': 'c30d04070302a21bfc5031c0019b6ed23d015966022b65eca2944d6887153ed04d8e54a64d5ed53bf7385e69c3c90596b624a4fb8e773a58581cecf6b0e66168b87da3da04d9d791c8e322c12460', 'complainant_phone': 'c30d040703020a7ec41a9ea46ff864d23d0177103b9dad5db0f22b1f3e5bb8faade77c476207abbbb223ad0a5c9a5e78caf793228d188eb992dc25c017ec0cca8398bf82b697bd0c3066f0802bd1', 'complainant_email': 'c30d04070302890a8241dc68617c72d23d01bd0847776fa2b8b54af166f2a4436e3301aa6ed83772e71a3eae0d1961f75ce95e888a625c0dbfdd8fc7e2c81683790fc5704a5f9b8e5028d4d92b73', 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_municipality': None, 'complainant_ward': None, 'complainant_village': None, 'complainant_address': None}, results: [{'grievance_id': 'GR-20250904-KOJH-ABC7-B', 'complainant_id': 'CM-20250904-KOJH-766B-B', 'grievance_categories': None, 'grievance_summary': None, 'grievance_description': 'dust everywhere kids coughing I need to go to the hospital', 'grievance_claimed_amount': None, 'grievance_location': None, 'language_code': 'ne', 'classification_status': 'pending', 'grievance_creation_date': datetime.datetime(2025, 9, 4, 20, 10, 29, 276519, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'grievance_modification_date': datetime.datetime(2025, 9, 4, 20, 10, 31, 739326, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'is_temporary': True, 'source': 'bot', 'complainant_full_name': 'c30d04070302a21bfc5031c0019b6ed23d015966022b65eca2944d6887153ed04d8e54a64d5ed53bf7385e69c3c90596b624a4fb8e773a58581cecf6b0e66168b87da3da04d9d791c8e322c12460', 'complainant_phone': 'c30d040703020a7ec41a9ea46ff864d23d0177103b9dad5db0f22b1f3e5bb8faade77c476207abbbb223ad0a5c9a5e78caf793228d188eb992dc25c017ec0cca8398bf82b697bd0c3066f0802bd1', 'complainant_email': 'c30d04070302890a8241dc68617c72d23d01bd0847776fa2b8b54af166f2a4436e3301aa6ed83772e71a3eae0d1961f75ce95e888a625c0dbfdd8fc7e2c81683790fc5704a5f9b8e5028d4d92b73', 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_municipality': None, 'complainant_ward': None, 'complainant_village': None, 'complainant_address': None}]
2025-09-04 20:24:36,548 - db_manager - INFO - create_complainant: Creating complainant with ID: CM-20250904-KOJH-9B43-B
2025-09-04 20:24:36,549 - db_manager - DEBUG - encrypted and hashed data at encrypt_and_hash_sensitive_data: {'complainant_id': 'CM-20250904-KOJH-9B43-B', 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_unique_id': 'CM-20250904-KOJH-9B43-B'}
2025-09-04 20:24:36,549 - db_manager - DEBUG - query_keys at generate_query_string: dict_keys(['complainant_id', 'complainant_province', 'complainant_district', 'complainant_unique_id'])
2025-09-04 20:24:36,549 - db_manager - DEBUG - Generated query: INSERT INTO complainants (complainant_id, complainant_province, complainant_district, complainant_unique_id) VALUES (%s, %s, %s, %s)
2025-09-04 20:24:36,549 - db_manager - DEBUG - len of query_keys: 4
2025-09-04 20:24:36,549 - db_manager - DEBUG - Generated query: INSERT INTO complainants (complainant_id, complainant_province, complainant_district, complainant_unique_id) VALUES (%s, %s, %s, %s)
2025-09-04 20:24:36,549 - db_manager - INFO - Connecting to database: grievance_db
2025-09-04 20:24:36,554 - db_manager - INFO - Starting database transaction
2025-09-04 20:24:36,557 - db_manager - INFO - Transaction committed successfully
2025-09-04 20:24:36,557 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-04 20:24:36,557 - db_manager - INFO - create_complainant: Successfully created complainant with ID: CM-20250904-KOJH-9B43-B
2025-09-04 20:24:36,557 - db_manager - INFO - create_grievance: Creating grievance with data: {'grievance_id': 'GR-20250904-KOJH-D3AF-B', 'complainant_id': 'CM-20250904-KOJH-9B43-B', 'grievance_description': 'dust everywhere kids coughing I need to go to the hospital', 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_office': None, 'source': 'bot', 'complainant_unique_id': 'CM-20250904-KOJH-9B43-B'}
2025-09-04 20:24:36,557 - db_manager - INFO - create_grievance: Creating grievance with ID: GR-20250904-KOJH-D3AF-B
2025-09-04 20:24:36,557 - db_manager - DEBUG - query_keys at generate_query_string: dict_keys(['grievance_id', 'complainant_id', 'grievance_description', 'source'])
2025-09-04 20:24:36,557 - db_manager - DEBUG - Generated query: INSERT INTO grievances (grievance_id, complainant_id, grievance_description, source) VALUES (%s, %s, %s, %s) RETURNING grievance_id
2025-09-04 20:24:36,557 - db_manager - DEBUG - len of query_keys: 4
2025-09-04 20:24:36,557 - db_manager - DEBUG - Generated query: INSERT INTO grievances (grievance_id, complainant_id, grievance_description, source) VALUES (%s, %s, %s, %s) RETURNING grievance_id
2025-09-04 20:24:36,557 - db_manager - INFO - Connecting to database: grievance_db
2025-09-04 20:24:36,562 - db_manager - INFO - Starting database transaction
2025-09-04 20:24:36,566 - db_manager - INFO - Transaction committed successfully
2025-09-04 20:24:36,566 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-04 20:24:36,566 - db_manager - INFO - create_grievance: Successfully created grievance with ID: GR-20250904-KOJH-D3AF-B
2025-09-04 20:25:13,780 - db_manager - INFO - Connecting to database: grievance_db
2025-09-04 20:25:13,785 - db_manager - INFO - Starting database transaction
2025-09-04 20:25:13,785 - db_manager - INFO - Executing get_complainant_by_id: 
            SELECT complainant_id, complainant_unique_id, complainant_full_name,    complainant_pho...
2025-09-04 20:25:13,786 - db_manager - INFO - get_complainant_by_id completed in 0.01s. Rows: 1
2025-09-04 20:25:13,787 - db_manager - INFO - Transaction committed successfully
2025-09-04 20:25:13,787 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-04 20:25:13,787 - db_manager - INFO - Connecting to database: grievance_db
2025-09-04 20:25:13,791 - db_manager - INFO - Starting database transaction
2025-09-04 20:25:13,792 - db_manager - INFO - Executing get_grievance_by_id: 
                SELECT g.*, c.complainant_full_name, c.complainant_phone, c.complainant_email,
    ...
2025-09-04 20:25:13,793 - db_manager - INFO - get_grievance_by_id completed in 0.01s. Rows: 1
2025-09-04 20:25:13,793 - db_manager - INFO - Transaction committed successfully
2025-09-04 20:25:13,793 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-04 20:25:13,793 - db_manager - DEBUG - get_grievance_by_id: grievance_id: {'grievance_id': 'GR-20250904-KOJH-D3AF-B', 'complainant_id': 'CM-20250904-KOJH-9B43-B', 'grievance_categories': '{"Environmental - Air Pollution"}', 'grievance_summary': '   ,   ,     ', 'grievance_description': 'dust everywhere kids coughing I need to go to the hospital', 'grievance_claimed_amount': None, 'grievance_location': None, 'language_code': 'en', 'classification_status': 'pending', 'grievance_creation_date': datetime.datetime(2025, 9, 4, 20, 24, 36, 562767, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'grievance_modification_date': datetime.datetime(2025, 9, 4, 20, 24, 41, 223755, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'is_temporary': True, 'source': 'bot', 'complainant_full_name': None, 'complainant_phone': None, 'complainant_email': None, 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_municipality': None, 'complainant_ward': None, 'complainant_village': None, 'complainant_address': None}, results: [{'grievance_id': 'GR-20250904-KOJH-D3AF-B', 'complainant_id': 'CM-20250904-KOJH-9B43-B', 'grievance_categories': '{"Environmental - Air Pollution"}', 'grievance_summary': '   ,   ,     ', 'grievance_description': 'dust everywhere kids coughing I need to go to the hospital', 'grievance_claimed_amount': None, 'grievance_location': None, 'language_code': 'en', 'classification_status': 'pending', 'grievance_creation_date': datetime.datetime(2025, 9, 4, 20, 24, 36, 562767, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'grievance_modification_date': datetime.datetime(2025, 9, 4, 20, 24, 41, 223755, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'is_temporary': True, 'source': 'bot', 'complainant_full_name': None, 'complainant_phone': None, 'complainant_email': None, 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_municipality': None, 'complainant_ward': None, 'complainant_village': None, 'complainant_address': None}]
2025-09-04 20:25:13,793 - db_manager - INFO - update_complainant: Updating complainant with ID: CM-20250904-KOJH-9B43-B
2025-09-04 20:25:13,794 - db_manager - INFO - Connecting to database: grievance_db
2025-09-04 20:25:13,798 - db_manager - INFO - Starting database transaction
2025-09-04 20:25:13,798 - db_manager - INFO - Executing encrypt_field: SELECT encode(pgp_sym_encrypt(%s, %s), 'hex') AS encrypted...
2025-09-04 20:25:13,800 - db_manager - INFO - encrypt_field completed in 0.01s. Rows: 1
2025-09-04 20:25:13,800 - db_manager - INFO - Transaction committed successfully
2025-09-04 20:25:13,800 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-04 20:25:13,801 - db_manager - INFO - Connecting to database: grievance_db
2025-09-04 20:25:13,805 - db_manager - INFO - Starting database transaction
2025-09-04 20:25:13,805 - db_manager - INFO - Executing encrypt_field: SELECT encode(pgp_sym_encrypt(%s, %s), 'hex') AS encrypted...
2025-09-04 20:25:13,806 - db_manager - INFO - encrypt_field completed in 0.01s. Rows: 1
2025-09-04 20:25:13,806 - db_manager - INFO - Transaction committed successfully
2025-09-04 20:25:13,806 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-04 20:25:13,807 - db_manager - INFO - Connecting to database: grievance_db
2025-09-04 20:25:13,811 - db_manager - INFO - Starting database transaction
2025-09-04 20:25:13,811 - db_manager - INFO - Executing encrypt_field: SELECT encode(pgp_sym_encrypt(%s, %s), 'hex') AS encrypted...
2025-09-04 20:25:13,812 - db_manager - INFO - encrypt_field completed in 0.01s. Rows: 1
2025-09-04 20:25:13,812 - db_manager - INFO - Transaction committed successfully
2025-09-04 20:25:13,812 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-04 20:25:13,812 - db_manager - DEBUG - encrypted phone number Not provided at encrypt_complainant_data: c30d04070302a041259619a54c9e71d23d01f045f2d885198e9ec0f447042959852b8e8da7f5c862d394cfefe58e7a597f4b8a05c359ca831cfd5ba62d6138459d427e7daef631431081241027dc
2025-09-04 20:25:13,812 - db_manager - DEBUG - phone number Not provided hashed to d83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f at hash_sensitive_data
2025-09-04 20:25:13,812 - db_manager - DEBUG - encrypted and hashed data at encrypt_and_hash_sensitive_data: {'complainant_full_name': 'c30d0407030246e4252bdef5e8c26fd23d0181e40200ec1c9774cef8749d45ffaf07c269f646158748dfd9dd46a75c697319e56fb3ee297b0964cb5c20cd384b2b6bc55614a22dc52ffbcbeb5d9b', 'complainant_phone': 'c30d04070302a041259619a54c9e71d23d01f045f2d885198e9ec0f447042959852b8e8da7f5c862d394cfefe58e7a597f4b8a05c359ca831cfd5ba62d6138459d427e7daef631431081241027dc', 'complainant_email': 'c30d04070302ef7263299576c14570d23d012488372d638fdeb8a459696a28e70455bd9cab0e9d59ab2a259b80cb3deb74e6babc2d7f1543baf17d862c80b5bbce6401578e5a4b9b0d287d08a940', 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_email_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'complainant_full_name_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'complainant_phone_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f'}
2025-09-04 20:25:13,813 - db_manager - DEBUG - encrypted_data at update_complainant: {'complainant_full_name': 'c30d0407030246e4252bdef5e8c26fd23d0181e40200ec1c9774cef8749d45ffaf07c269f646158748dfd9dd46a75c697319e56fb3ee297b0964cb5c20cd384b2b6bc55614a22dc52ffbcbeb5d9b', 'complainant_phone': 'c30d04070302a041259619a54c9e71d23d01f045f2d885198e9ec0f447042959852b8e8da7f5c862d394cfefe58e7a597f4b8a05c359ca831cfd5ba62d6138459d427e7daef631431081241027dc', 'complainant_email': 'c30d04070302ef7263299576c14570d23d012488372d638fdeb8a459696a28e70455bd9cab0e9d59ab2a259b80cb3deb74e6babc2d7f1543baf17d862c80b5bbce6401578e5a4b9b0d287d08a940', 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_email_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'complainant_full_name_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'complainant_phone_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f'}
2025-09-04 20:25:13,813 - db_manager - DEBUG - execute_update values: ('c30d0407030246e4252bdef5e8c26fd23d0181e40200ec1c9774cef8749d45ffaf07c269f646158748dfd9dd46a75c697319e56fb3ee297b0964cb5c20cd384b2b6bc55614a22dc52ffbcbeb5d9b', 'c30d04070302a041259619a54c9e71d23d01f045f2d885198e9ec0f447042959852b8e8da7f5c862d394cfefe58e7a597f4b8a05c359ca831cfd5ba62d6138459d427e7daef631431081241027dc', 'c30d04070302ef7263299576c14570d23d012488372d638fdeb8a459696a28e70455bd9cab0e9d59ab2a259b80cb3deb74e6babc2d7f1543baf17d862c80b5bbce6401578e5a4b9b0d287d08a940', 'Koshi', 'Jhapa', 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'CM-20250904-KOJH-9B43-B')
2025-09-04 20:25:13,813 - db_manager - DEBUG - execute_update query: UPDATE complainants SET complainant_full_name = %s, complainant_phone = %s, complainant_email = %s, complainant_province = %s, complainant_district = %s, complainant_email_hash = %s, complainant_full_name_hash = %s, complainant_phone_hash = %s WHERE complainant_id = %s
2025-09-04 20:25:13,813 - db_manager - INFO - Connecting to database: grievance_db
2025-09-04 20:25:13,817 - db_manager - INFO - Starting database transaction
2025-09-04 20:25:13,817 - db_manager - INFO - execute_update: Executing update query: UPDATE complainants SET complainant_full_name = %s, complainant_phone = %s, complainant_email = %s, ...
2025-09-04 20:25:13,818 - db_manager - INFO - execute_update: Update completed in 0.01s. Affected rows: 1
2025-09-04 20:25:13,820 - db_manager - INFO - Transaction committed successfully
2025-09-04 20:25:13,820 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-04 20:25:13,820 - db_manager - INFO - Complainant updated in db: CM-20250904-KOJH-9B43-B
2025-09-04 20:25:13,820 - db_manager - INFO - update_grievance: Updating grievance with ID: GR-20250904-KOJH-D3AF-B
2025-09-04 20:25:13,820 - db_manager - DEBUG - execute_update values: (None, None, 'dust everywhere kids coughing I need to go to the hospital', None, None, 'ne', 'GR-20250904-KOJH-D3AF-B')
2025-09-04 20:25:13,820 - db_manager - DEBUG - execute_update query: 
                    UPDATE grievances 
                    SET grievance_categories = %s,
                        grievance_summary = %s,
                        grievance_description = %s,
                        grievance_claimed_amount = %s,
                        grievance_location = %s,
                        language_code = %s,
                        grievance_modification_date = CURRENT_TIMESTAMP
                    WHERE grievance_id = %s
                    RETURNING grievance_id
                
2025-09-04 20:25:13,820 - db_manager - INFO - Connecting to database: grievance_db
2025-09-04 20:25:13,824 - db_manager - INFO - Starting database transaction
2025-09-04 20:25:13,824 - db_manager - INFO - execute_update: Executing update query: 
                    UPDATE grievances 
                    SET grievance_categories = %s,
         ...
2025-09-04 20:25:13,825 - db_manager - INFO - execute_update: Update completed in 0.01s. Affected rows: 1
2025-09-04 20:25:13,828 - db_manager - INFO - Transaction committed successfully
2025-09-04 20:25:13,828 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-04 20:25:13,829 - db_manager - INFO - update_grievance: Updated grievance with ID: GR-20250904-KOJH-D3AF-B, rows affected: 1
2025-09-04 20:25:13,829 - db_manager - INFO - Grievance updated in db: GR-20250904-KOJH-D3AF-B
2025-09-04 20:25:13,829 - db_manager - INFO - Connecting to database: grievance_db
2025-09-04 20:25:13,833 - db_manager - INFO - Starting database transaction
2025-09-04 20:25:13,833 - db_manager - INFO - Executing get_grievance_files: 
            SELECT file_id, file_name, file_type, file_size, upload_timestamp
            FROM file...
2025-09-04 20:25:13,834 - db_manager - INFO - get_grievance_files completed in 0.01s. Rows: 0
2025-09-04 20:25:13,834 - db_manager - INFO - Transaction committed successfully
2025-09-04 20:25:13,834 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-04 20:25:13,834 - db_manager - INFO - Connecting to database: grievance_db
2025-09-04 20:25:13,838 - db_manager - INFO - Starting database transaction
2025-09-04 20:25:13,838 - db_manager - INFO - Executing get_grievance_files: 
            SELECT file_id, file_name, file_type, file_size, upload_timestamp
            FROM file...
2025-09-04 20:25:13,839 - db_manager - INFO - get_grievance_files completed in 0.01s. Rows: 0
2025-09-04 20:25:13,840 - db_manager - INFO - Transaction committed successfully
2025-09-04 20:25:13,840 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-04 20:25:13,882 - db_manager - INFO - Connecting to database: grievance_db
2025-09-04 20:25:13,887 - db_manager - INFO - Starting database transaction
2025-09-04 20:25:13,888 - db_manager - INFO - Executing get_grievance_by_id: 
                SELECT g.*, c.complainant_full_name, c.complainant_phone, c.complainant_email,
    ...
2025-09-04 20:25:13,889 - db_manager - INFO - get_grievance_by_id completed in 0.01s. Rows: 1
2025-09-04 20:25:13,890 - db_manager - INFO - Transaction committed successfully
2025-09-04 20:25:13,890 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-04 20:25:13,890 - db_manager - DEBUG - get_grievance_by_id: grievance_id: {'grievance_id': 'GR-20250904-KOJH-D3AF-B', 'complainant_id': 'CM-20250904-KOJH-9B43-B', 'grievance_categories': None, 'grievance_summary': None, 'grievance_description': 'dust everywhere kids coughing I need to go to the hospital', 'grievance_claimed_amount': None, 'grievance_location': None, 'language_code': 'ne', 'classification_status': 'pending', 'grievance_creation_date': datetime.datetime(2025, 9, 4, 20, 24, 36, 562767, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'grievance_modification_date': datetime.datetime(2025, 9, 4, 20, 25, 13, 824888, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'is_temporary': True, 'source': 'bot', 'complainant_full_name': 'c30d0407030246e4252bdef5e8c26fd23d0181e40200ec1c9774cef8749d45ffaf07c269f646158748dfd9dd46a75c697319e56fb3ee297b0964cb5c20cd384b2b6bc55614a22dc52ffbcbeb5d9b', 'complainant_phone': 'c30d04070302a041259619a54c9e71d23d01f045f2d885198e9ec0f447042959852b8e8da7f5c862d394cfefe58e7a597f4b8a05c359ca831cfd5ba62d6138459d427e7daef631431081241027dc', 'complainant_email': 'c30d04070302ef7263299576c14570d23d012488372d638fdeb8a459696a28e70455bd9cab0e9d59ab2a259b80cb3deb74e6babc2d7f1543baf17d862c80b5bbce6401578e5a4b9b0d287d08a940', 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_municipality': None, 'complainant_ward': None, 'complainant_village': None, 'complainant_address': None}, results: [{'grievance_id': 'GR-20250904-KOJH-D3AF-B', 'complainant_id': 'CM-20250904-KOJH-9B43-B', 'grievance_categories': None, 'grievance_summary': None, 'grievance_description': 'dust everywhere kids coughing I need to go to the hospital', 'grievance_claimed_amount': None, 'grievance_location': None, 'language_code': 'ne', 'classification_status': 'pending', 'grievance_creation_date': datetime.datetime(2025, 9, 4, 20, 24, 36, 562767, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'grievance_modification_date': datetime.datetime(2025, 9, 4, 20, 25, 13, 824888, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'is_temporary': True, 'source': 'bot', 'complainant_full_name': 'c30d0407030246e4252bdef5e8c26fd23d0181e40200ec1c9774cef8749d45ffaf07c269f646158748dfd9dd46a75c697319e56fb3ee297b0964cb5c20cd384b2b6bc55614a22dc52ffbcbeb5d9b', 'complainant_phone': 'c30d04070302a041259619a54c9e71d23d01f045f2d885198e9ec0f447042959852b8e8da7f5c862d394cfefe58e7a597f4b8a05c359ca831cfd5ba62d6138459d427e7daef631431081241027dc', 'complainant_email': 'c30d04070302ef7263299576c14570d23d012488372d638fdeb8a459696a28e70455bd9cab0e9d59ab2a259b80cb3deb74e6babc2d7f1543baf17d862c80b5bbce6401578e5a4b9b0d287d08a940', 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_municipality': None, 'complainant_ward': None, 'complainant_village': None, 'complainant_address': None}]
2025-09-04 20:38:43,877 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-04 20:38:43,878 - db_manager - INFO - Database manager initialized successfully
2025-09-04 20:38:43,878 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-04 20:38:43,878 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-04 20:38:43,878 - db_manager - INFO - Database manager initialized successfully
2025-09-04 20:38:43,878 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-04 20:38:43,879 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-04 20:38:43,879 - db_manager - INFO - Database manager initialized successfully
2025-09-04 20:38:43,879 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-04 20:38:43,879 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-04 20:38:43,879 - db_manager - INFO - Database manager initialized successfully
2025-09-04 20:38:43,879 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-04 20:38:43,879 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-04 20:38:43,879 - db_manager - INFO - Database manager initialized successfully
2025-09-04 20:38:43,879 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-04 20:38:43,879 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-04 20:38:43,879 - db_manager - INFO - Database manager initialized successfully
2025-09-04 20:38:43,879 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-04 20:38:43,879 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-04 20:38:43,879 - db_manager - INFO - Database manager initialized successfully
2025-09-04 20:38:43,879 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-04 20:38:43,879 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-04 20:38:43,879 - db_manager - INFO - Database manager initialized successfully
2025-09-04 20:38:43,879 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-04 20:38:43,880 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-04 20:38:43,880 - db_manager - INFO - Database manager initialized successfully
2025-09-04 20:38:43,880 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-04 20:38:43,880 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-04 20:38:43,880 - db_manager - INFO - Database manager initialized successfully
2025-09-04 20:38:43,880 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-04 20:39:22,859 - db_manager - INFO - create_complainant: Creating complainant with ID: CM-20250904-KOJH-87EE-B
2025-09-04 20:39:22,859 - db_manager - DEBUG - encrypted and hashed data at encrypt_and_hash_sensitive_data: {'complainant_id': 'CM-20250904-KOJH-87EE-B', 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_unique_id': 'CM-20250904-KOJH-87EE-B'}
2025-09-04 20:39:22,859 - db_manager - DEBUG - query_keys at generate_query_string: dict_keys(['complainant_id', 'complainant_province', 'complainant_district', 'complainant_unique_id'])
2025-09-04 20:39:22,859 - db_manager - DEBUG - Generated query: INSERT INTO complainants (complainant_id, complainant_province, complainant_district, complainant_unique_id) VALUES (%s, %s, %s, %s)
2025-09-04 20:39:22,859 - db_manager - DEBUG - len of query_keys: 4
2025-09-04 20:39:22,859 - db_manager - DEBUG - Generated query: INSERT INTO complainants (complainant_id, complainant_province, complainant_district, complainant_unique_id) VALUES (%s, %s, %s, %s)
2025-09-04 20:39:22,859 - db_manager - INFO - Connecting to database: grievance_db
2025-09-04 20:39:22,866 - db_manager - INFO - Starting database transaction
2025-09-04 20:39:22,868 - db_manager - INFO - Transaction committed successfully
2025-09-04 20:39:22,868 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-04 20:39:22,868 - db_manager - INFO - create_complainant: Successfully created complainant with ID: CM-20250904-KOJH-87EE-B
2025-09-04 20:39:22,868 - db_manager - INFO - create_grievance: Creating grievance with data: {'grievance_id': 'GR-20250904-KOJH-FD4C-B', 'complainant_id': 'CM-20250904-KOJH-87EE-B', 'grievance_description': 'dust everywhere kids coughing I need to go to the hospital', 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_office': None, 'source': 'bot', 'complainant_unique_id': 'CM-20250904-KOJH-87EE-B'}
2025-09-04 20:39:22,868 - db_manager - INFO - create_grievance: Creating grievance with ID: GR-20250904-KOJH-FD4C-B
2025-09-04 20:39:22,868 - db_manager - DEBUG - query_keys at generate_query_string: dict_keys(['grievance_id', 'complainant_id', 'grievance_description', 'source'])
2025-09-04 20:39:22,868 - db_manager - DEBUG - Generated query: INSERT INTO grievances (grievance_id, complainant_id, grievance_description, source) VALUES (%s, %s, %s, %s) RETURNING grievance_id
2025-09-04 20:39:22,868 - db_manager - DEBUG - len of query_keys: 4
2025-09-04 20:39:22,868 - db_manager - DEBUG - Generated query: INSERT INTO grievances (grievance_id, complainant_id, grievance_description, source) VALUES (%s, %s, %s, %s) RETURNING grievance_id
2025-09-04 20:39:22,868 - db_manager - INFO - Connecting to database: grievance_db
2025-09-04 20:39:22,873 - db_manager - INFO - Starting database transaction
2025-09-04 20:39:22,877 - db_manager - INFO - Transaction committed successfully
2025-09-04 20:39:22,877 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-04 20:39:22,877 - db_manager - INFO - create_grievance: Successfully created grievance with ID: GR-20250904-KOJH-FD4C-B
2025-09-04 20:40:04,392 - db_manager - INFO - Connecting to database: grievance_db
2025-09-04 20:40:04,399 - db_manager - INFO - Starting database transaction
2025-09-04 20:40:04,399 - db_manager - INFO - Executing get_complainant_by_id: 
            SELECT complainant_id, complainant_unique_id, complainant_full_name,    complainant_pho...
2025-09-04 20:40:04,400 - db_manager - INFO - get_complainant_by_id completed in 0.01s. Rows: 1
2025-09-04 20:40:04,400 - db_manager - INFO - Transaction committed successfully
2025-09-04 20:40:04,400 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-04 20:40:04,401 - db_manager - INFO - Connecting to database: grievance_db
2025-09-04 20:40:04,405 - db_manager - INFO - Starting database transaction
2025-09-04 20:40:04,406 - db_manager - INFO - Executing get_grievance_by_id: 
                SELECT g.*, c.complainant_full_name, c.complainant_phone, c.complainant_email,
    ...
2025-09-04 20:40:04,407 - db_manager - INFO - get_grievance_by_id completed in 0.01s. Rows: 1
2025-09-04 20:40:04,408 - db_manager - INFO - Transaction committed successfully
2025-09-04 20:40:04,408 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-04 20:40:04,408 - db_manager - DEBUG - get_grievance_by_id: grievance_id: {'grievance_id': 'GR-20250904-KOJH-FD4C-B', 'complainant_id': 'CM-20250904-KOJH-87EE-B', 'grievance_categories': '{"Environmental - Air Pollution"}', 'grievance_summary': '           ', 'grievance_description': 'dust everywhere kids coughing I need to go to the hospital', 'grievance_claimed_amount': None, 'grievance_location': None, 'language_code': 'en', 'classification_status': 'pending', 'grievance_creation_date': datetime.datetime(2025, 9, 4, 20, 39, 22, 873874, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'grievance_modification_date': datetime.datetime(2025, 9, 4, 20, 39, 27, 915179, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'is_temporary': True, 'source': 'bot', 'complainant_full_name': None, 'complainant_phone': None, 'complainant_email': None, 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_municipality': None, 'complainant_ward': None, 'complainant_village': None, 'complainant_address': None}, results: [{'grievance_id': 'GR-20250904-KOJH-FD4C-B', 'complainant_id': 'CM-20250904-KOJH-87EE-B', 'grievance_categories': '{"Environmental - Air Pollution"}', 'grievance_summary': '           ', 'grievance_description': 'dust everywhere kids coughing I need to go to the hospital', 'grievance_claimed_amount': None, 'grievance_location': None, 'language_code': 'en', 'classification_status': 'pending', 'grievance_creation_date': datetime.datetime(2025, 9, 4, 20, 39, 22, 873874, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'grievance_modification_date': datetime.datetime(2025, 9, 4, 20, 39, 27, 915179, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'is_temporary': True, 'source': 'bot', 'complainant_full_name': None, 'complainant_phone': None, 'complainant_email': None, 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_municipality': None, 'complainant_ward': None, 'complainant_village': None, 'complainant_address': None}]
2025-09-04 20:40:04,408 - db_manager - INFO - update_complainant: Updating complainant with ID: CM-20250904-KOJH-87EE-B
2025-09-04 20:40:04,408 - db_manager - INFO - Connecting to database: grievance_db
2025-09-04 20:40:04,413 - db_manager - INFO - Starting database transaction
2025-09-04 20:40:04,413 - db_manager - INFO - Executing encrypt_field: SELECT encode(pgp_sym_encrypt(%s, %s), 'hex') AS encrypted...
2025-09-04 20:40:04,415 - db_manager - INFO - encrypt_field completed in 0.01s. Rows: 1
2025-09-04 20:40:04,415 - db_manager - INFO - Transaction committed successfully
2025-09-04 20:40:04,415 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-04 20:40:04,415 - db_manager - INFO - Connecting to database: grievance_db
2025-09-04 20:40:04,419 - db_manager - INFO - Starting database transaction
2025-09-04 20:40:04,419 - db_manager - INFO - Executing encrypt_field: SELECT encode(pgp_sym_encrypt(%s, %s), 'hex') AS encrypted...
2025-09-04 20:40:04,420 - db_manager - INFO - encrypt_field completed in 0.01s. Rows: 1
2025-09-04 20:40:04,420 - db_manager - INFO - Transaction committed successfully
2025-09-04 20:40:04,420 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-04 20:40:04,420 - db_manager - INFO - Connecting to database: grievance_db
2025-09-04 20:40:04,425 - db_manager - INFO - Starting database transaction
2025-09-04 20:40:04,425 - db_manager - INFO - Executing encrypt_field: SELECT encode(pgp_sym_encrypt(%s, %s), 'hex') AS encrypted...
2025-09-04 20:40:04,426 - db_manager - INFO - encrypt_field completed in 0.01s. Rows: 1
2025-09-04 20:40:04,426 - db_manager - INFO - Transaction committed successfully
2025-09-04 20:40:04,426 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-04 20:40:04,426 - db_manager - DEBUG - encrypted phone number Not provided at encrypt_complainant_data: c30d04070302b2ede4e15dcd57ff68d23d01afa0a94129fceaa71b6636e59d0a7cecd23a344ebfa6aa1fdc5c4542bb12676b71dc33be3ac0885d51d88577d3c23d2269cea3218d4e0bb311cb6a61
2025-09-04 20:40:04,426 - db_manager - DEBUG - phone number Not provided hashed to d83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f at hash_sensitive_data
2025-09-04 20:40:04,426 - db_manager - DEBUG - encrypted and hashed data at encrypt_and_hash_sensitive_data: {'complainant_full_name': 'c30d040703025565de698d37bbbd63d23d0185e7eb7bb35b4d897d10376d85a4ab3067d3bd1f9bcf085511ee52a0fd7312428c959edc8869321e16f4d14dfd66882e47a2ea3f3fd3da3d1bbbb95d', 'complainant_phone': 'c30d04070302b2ede4e15dcd57ff68d23d01afa0a94129fceaa71b6636e59d0a7cecd23a344ebfa6aa1fdc5c4542bb12676b71dc33be3ac0885d51d88577d3c23d2269cea3218d4e0bb311cb6a61', 'complainant_email': 'c30d04070302ac91330f227593d16ad23d0114fbe27a3a4b932db4d0f72cd0e8ce73e9117d9a5351cb4b35192a29dc7caed95bb2f93f24956219294b8a5186479484279b1583080ae040f47bb18a', 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_email_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'complainant_full_name_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'complainant_phone_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f'}
2025-09-04 20:40:04,426 - db_manager - DEBUG - encrypted_data at update_complainant: {'complainant_full_name': 'c30d040703025565de698d37bbbd63d23d0185e7eb7bb35b4d897d10376d85a4ab3067d3bd1f9bcf085511ee52a0fd7312428c959edc8869321e16f4d14dfd66882e47a2ea3f3fd3da3d1bbbb95d', 'complainant_phone': 'c30d04070302b2ede4e15dcd57ff68d23d01afa0a94129fceaa71b6636e59d0a7cecd23a344ebfa6aa1fdc5c4542bb12676b71dc33be3ac0885d51d88577d3c23d2269cea3218d4e0bb311cb6a61', 'complainant_email': 'c30d04070302ac91330f227593d16ad23d0114fbe27a3a4b932db4d0f72cd0e8ce73e9117d9a5351cb4b35192a29dc7caed95bb2f93f24956219294b8a5186479484279b1583080ae040f47bb18a', 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_email_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'complainant_full_name_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'complainant_phone_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f'}
2025-09-04 20:40:04,426 - db_manager - DEBUG - execute_update values: ('c30d040703025565de698d37bbbd63d23d0185e7eb7bb35b4d897d10376d85a4ab3067d3bd1f9bcf085511ee52a0fd7312428c959edc8869321e16f4d14dfd66882e47a2ea3f3fd3da3d1bbbb95d', 'c30d04070302b2ede4e15dcd57ff68d23d01afa0a94129fceaa71b6636e59d0a7cecd23a344ebfa6aa1fdc5c4542bb12676b71dc33be3ac0885d51d88577d3c23d2269cea3218d4e0bb311cb6a61', 'c30d04070302ac91330f227593d16ad23d0114fbe27a3a4b932db4d0f72cd0e8ce73e9117d9a5351cb4b35192a29dc7caed95bb2f93f24956219294b8a5186479484279b1583080ae040f47bb18a', 'Koshi', 'Jhapa', 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'CM-20250904-KOJH-87EE-B')
2025-09-04 20:40:04,427 - db_manager - DEBUG - execute_update query: UPDATE complainants SET complainant_full_name = %s, complainant_phone = %s, complainant_email = %s, complainant_province = %s, complainant_district = %s, complainant_email_hash = %s, complainant_full_name_hash = %s, complainant_phone_hash = %s WHERE complainant_id = %s
2025-09-04 20:40:04,427 - db_manager - INFO - Connecting to database: grievance_db
2025-09-04 20:40:04,431 - db_manager - INFO - Starting database transaction
2025-09-04 20:40:04,431 - db_manager - INFO - execute_update: Executing update query: UPDATE complainants SET complainant_full_name = %s, complainant_phone = %s, complainant_email = %s, ...
2025-09-04 20:40:04,432 - db_manager - INFO - execute_update: Update completed in 0.01s. Affected rows: 1
2025-09-04 20:40:04,433 - db_manager - INFO - Transaction committed successfully
2025-09-04 20:40:04,433 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-04 20:40:04,434 - db_manager - INFO - Complainant updated in db: CM-20250904-KOJH-87EE-B
2025-09-04 20:40:04,434 - db_manager - INFO - update_grievance: Updating grievance with ID: GR-20250904-KOJH-FD4C-B
2025-09-04 20:40:04,434 - db_manager - DEBUG - execute_update values: (None, None, 'dust everywhere kids coughing I need to go to the hospital', None, None, 'ne', 'GR-20250904-KOJH-FD4C-B')
2025-09-04 20:40:04,434 - db_manager - DEBUG - execute_update query: 
                    UPDATE grievances 
                    SET grievance_categories = %s,
                        grievance_summary = %s,
                        grievance_description = %s,
                        grievance_claimed_amount = %s,
                        grievance_location = %s,
                        language_code = %s,
                        grievance_modification_date = CURRENT_TIMESTAMP
                    WHERE grievance_id = %s
                    RETURNING grievance_id
                
2025-09-04 20:40:04,434 - db_manager - INFO - Connecting to database: grievance_db
2025-09-04 20:40:04,438 - db_manager - INFO - Starting database transaction
2025-09-04 20:40:04,438 - db_manager - INFO - execute_update: Executing update query: 
                    UPDATE grievances 
                    SET grievance_categories = %s,
         ...
2025-09-04 20:40:04,439 - db_manager - INFO - execute_update: Update completed in 0.01s. Affected rows: 1
2025-09-04 20:40:04,441 - db_manager - INFO - Transaction committed successfully
2025-09-04 20:40:04,441 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-04 20:40:04,441 - db_manager - INFO - update_grievance: Updated grievance with ID: GR-20250904-KOJH-FD4C-B, rows affected: 1
2025-09-04 20:40:04,441 - db_manager - INFO - Grievance updated in db: GR-20250904-KOJH-FD4C-B
2025-09-04 20:40:04,441 - db_manager - INFO - Connecting to database: grievance_db
2025-09-04 20:40:04,446 - db_manager - INFO - Starting database transaction
2025-09-04 20:40:04,446 - db_manager - INFO - Executing get_grievance_files: 
            SELECT file_id, file_name, file_type, file_size, upload_timestamp
            FROM file...
2025-09-04 20:40:04,447 - db_manager - INFO - get_grievance_files completed in 0.01s. Rows: 0
2025-09-04 20:40:04,447 - db_manager - INFO - Transaction committed successfully
2025-09-04 20:40:04,447 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-04 20:40:04,447 - db_manager - INFO - Connecting to database: grievance_db
2025-09-04 20:40:04,451 - db_manager - INFO - Starting database transaction
2025-09-04 20:40:04,451 - db_manager - INFO - Executing get_grievance_files: 
            SELECT file_id, file_name, file_type, file_size, upload_timestamp
            FROM file...
2025-09-04 20:40:04,453 - db_manager - INFO - get_grievance_files completed in 0.01s. Rows: 0
2025-09-04 20:40:04,453 - db_manager - INFO - Transaction committed successfully
2025-09-04 20:40:04,453 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-04 20:40:04,496 - db_manager - INFO - Connecting to database: grievance_db
2025-09-04 20:40:04,501 - db_manager - INFO - Starting database transaction
2025-09-04 20:40:04,501 - db_manager - INFO - Executing get_grievance_by_id: 
                SELECT g.*, c.complainant_full_name, c.complainant_phone, c.complainant_email,
    ...
2025-09-04 20:40:04,503 - db_manager - INFO - get_grievance_by_id completed in 0.01s. Rows: 1
2025-09-04 20:40:04,503 - db_manager - INFO - Transaction committed successfully
2025-09-04 20:40:04,503 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-04 20:40:04,503 - db_manager - DEBUG - get_grievance_by_id: grievance_id: {'grievance_id': 'GR-20250904-KOJH-FD4C-B', 'complainant_id': 'CM-20250904-KOJH-87EE-B', 'grievance_categories': None, 'grievance_summary': None, 'grievance_description': 'dust everywhere kids coughing I need to go to the hospital', 'grievance_claimed_amount': None, 'grievance_location': None, 'language_code': 'ne', 'classification_status': 'pending', 'grievance_creation_date': datetime.datetime(2025, 9, 4, 20, 39, 22, 873874, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'grievance_modification_date': datetime.datetime(2025, 9, 4, 20, 40, 4, 438687, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'is_temporary': True, 'source': 'bot', 'complainant_full_name': 'c30d040703025565de698d37bbbd63d23d0185e7eb7bb35b4d897d10376d85a4ab3067d3bd1f9bcf085511ee52a0fd7312428c959edc8869321e16f4d14dfd66882e47a2ea3f3fd3da3d1bbbb95d', 'complainant_phone': 'c30d04070302b2ede4e15dcd57ff68d23d01afa0a94129fceaa71b6636e59d0a7cecd23a344ebfa6aa1fdc5c4542bb12676b71dc33be3ac0885d51d88577d3c23d2269cea3218d4e0bb311cb6a61', 'complainant_email': 'c30d04070302ac91330f227593d16ad23d0114fbe27a3a4b932db4d0f72cd0e8ce73e9117d9a5351cb4b35192a29dc7caed95bb2f93f24956219294b8a5186479484279b1583080ae040f47bb18a', 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_municipality': None, 'complainant_ward': None, 'complainant_village': None, 'complainant_address': None}, results: [{'grievance_id': 'GR-20250904-KOJH-FD4C-B', 'complainant_id': 'CM-20250904-KOJH-87EE-B', 'grievance_categories': None, 'grievance_summary': None, 'grievance_description': 'dust everywhere kids coughing I need to go to the hospital', 'grievance_claimed_amount': None, 'grievance_location': None, 'language_code': 'ne', 'classification_status': 'pending', 'grievance_creation_date': datetime.datetime(2025, 9, 4, 20, 39, 22, 873874, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'grievance_modification_date': datetime.datetime(2025, 9, 4, 20, 40, 4, 438687, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'is_temporary': True, 'source': 'bot', 'complainant_full_name': 'c30d040703025565de698d37bbbd63d23d0185e7eb7bb35b4d897d10376d85a4ab3067d3bd1f9bcf085511ee52a0fd7312428c959edc8869321e16f4d14dfd66882e47a2ea3f3fd3da3d1bbbb95d', 'complainant_phone': 'c30d04070302b2ede4e15dcd57ff68d23d01afa0a94129fceaa71b6636e59d0a7cecd23a344ebfa6aa1fdc5c4542bb12676b71dc33be3ac0885d51d88577d3c23d2269cea3218d4e0bb311cb6a61', 'complainant_email': 'c30d04070302ac91330f227593d16ad23d0114fbe27a3a4b932db4d0f72cd0e8ce73e9117d9a5351cb4b35192a29dc7caed95bb2f93f24956219294b8a5186479484279b1583080ae040f47bb18a', 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_municipality': None, 'complainant_ward': None, 'complainant_village': None, 'complainant_address': None}]
