2025-09-10 09:56:01,633 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-10 09:56:01,634 - db_manager - INFO - Database manager initialized successfully
2025-09-10 09:56:01,634 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-10 09:56:01,634 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-10 09:56:01,634 - db_manager - INFO - Database manager initialized successfully
2025-09-10 09:56:01,634 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-10 09:56:01,634 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-10 09:56:01,634 - db_manager - INFO - Database manager initialized successfully
2025-09-10 09:56:01,634 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-10 09:56:01,634 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-10 09:56:01,635 - db_manager - INFO - Database manager initialized successfully
2025-09-10 09:56:01,635 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-10 09:56:01,635 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-10 09:56:01,635 - db_manager - INFO - Database manager initialized successfully
2025-09-10 09:56:01,635 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-10 09:56:01,635 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-10 09:56:01,635 - db_manager - INFO - Database manager initialized successfully
2025-09-10 09:56:01,635 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-10 09:56:01,635 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-10 09:56:01,635 - db_manager - INFO - Database manager initialized successfully
2025-09-10 09:56:01,635 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-10 09:56:01,635 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-10 09:56:01,635 - db_manager - INFO - Database manager initialized successfully
2025-09-10 09:56:01,635 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-10 09:56:01,635 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-10 09:56:01,635 - db_manager - INFO - Database manager initialized successfully
2025-09-10 09:56:01,635 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-10 09:56:01,635 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-10 09:56:01,635 - db_manager - INFO - Database manager initialized successfully
2025-09-10 09:56:01,635 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-10 10:01:51,290 - db_manager - INFO - create_complainant: Creating complainant with ID: CM-20250910-KOJH-CBBC-B
2025-09-10 10:01:51,291 - db_manager - DEBUG - encrypted and hashed data at encrypt_and_hash_sensitive_data: {'complainant_id': 'CM-20250910-KOJH-CBBC-B', 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_unique_id': 'CM-20250910-KOJH-CBBC-B'}
2025-09-10 10:01:51,291 - db_manager - DEBUG - query_keys at generate_query_string: dict_keys(['complainant_id', 'complainant_province', 'complainant_district', 'complainant_unique_id'])
2025-09-10 10:01:51,291 - db_manager - DEBUG - Generated query: INSERT INTO complainants (complainant_id, complainant_province, complainant_district, complainant_unique_id) VALUES (%s, %s, %s, %s)
2025-09-10 10:01:51,291 - db_manager - DEBUG - len of query_keys: 4
2025-09-10 10:01:51,291 - db_manager - DEBUG - Generated query: INSERT INTO complainants (complainant_id, complainant_province, complainant_district, complainant_unique_id) VALUES (%s, %s, %s, %s)
2025-09-10 10:01:51,291 - db_manager - INFO - Connecting to database: grievance_db
2025-09-10 10:01:51,298 - db_manager - INFO - Starting database transaction
2025-09-10 10:01:51,303 - db_manager - INFO - Transaction committed successfully
2025-09-10 10:01:51,303 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-10 10:01:51,303 - db_manager - INFO - create_complainant: Successfully created complainant with ID: CM-20250910-KOJH-CBBC-B
2025-09-10 10:01:51,304 - db_manager - INFO - create_grievance: Creating grievance with data: {'grievance_id': 'GR-20250910-KOJH-7134-B', 'complainant_id': 'CM-20250910-KOJH-CBBC-B', 'grievance_description': 'there is dust everywhere in my house\nkids are coughing\nI need to go to the hospital', 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_office': None, 'source': 'bot', 'complainant_unique_id': 'CM-20250910-KOJH-CBBC-B'}
2025-09-10 10:01:51,304 - db_manager - INFO - create_grievance: Creating grievance with ID: GR-20250910-KOJH-7134-B
2025-09-10 10:01:51,304 - db_manager - INFO - create_grievance: Creating grievance with allowed fields: ['grievance_id', 'complainant_id', 'grievance_categories', 'grievance_categories_alternative', 'grievance_summary', 'grievance_description', 'grievance_claimed_amount', 'grievance_location', 'is_temporary', 'source', 'language_code', 'grievance_classification_status']
2025-09-10 10:01:51,304 - db_manager - DEBUG - query_keys at generate_query_string: dict_keys(['grievance_id', 'complainant_id', 'grievance_description', 'source'])
2025-09-10 10:01:51,304 - db_manager - DEBUG - Generated query: INSERT INTO grievances (grievance_id, complainant_id, grievance_description, source) VALUES (%s, %s, %s, %s) RETURNING grievance_id
2025-09-10 10:01:51,304 - db_manager - DEBUG - len of query_keys: 4
2025-09-10 10:01:51,304 - db_manager - DEBUG - Generated query: INSERT INTO grievances (grievance_id, complainant_id, grievance_description, source) VALUES (%s, %s, %s, %s) RETURNING grievance_id
2025-09-10 10:01:51,304 - db_manager - INFO - Connecting to database: grievance_db
2025-09-10 10:01:51,310 - db_manager - INFO - Starting database transaction
2025-09-10 10:01:51,317 - db_manager - INFO - Transaction committed successfully
2025-09-10 10:01:51,317 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-10 10:01:51,317 - db_manager - INFO - create_grievance: Successfully created grievance with ID: GR-20250910-KOJH-7134-B
2025-09-10 10:02:12,173 - db_manager - INFO - Connecting to database: grievance_db
2025-09-10 10:02:12,179 - db_manager - INFO - Starting database transaction
2025-09-10 10:02:12,179 - db_manager - INFO - Executing get_complainant_by_id: 
            SELECT complainant_id, complainant_unique_id, complainant_full_name,    complainant_pho...
2025-09-10 10:02:12,181 - db_manager - INFO - get_complainant_by_id completed in 0.01s. Rows: 1
2025-09-10 10:02:12,181 - db_manager - INFO - Transaction committed successfully
2025-09-10 10:02:12,181 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-10 10:02:12,181 - db_manager - INFO - Connecting to database: grievance_db
2025-09-10 10:02:12,186 - db_manager - INFO - Starting database transaction
2025-09-10 10:02:12,186 - db_manager - INFO - Executing get_grievance_by_id: 
                SELECT g.*, c.complainant_full_name, c.complainant_phone, c.complainant_email,
    ...
2025-09-10 10:02:12,188 - db_manager - INFO - get_grievance_by_id completed in 0.01s. Rows: 1
2025-09-10 10:02:12,188 - db_manager - INFO - Transaction committed successfully
2025-09-10 10:02:12,189 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-10 10:02:12,189 - db_manager - DEBUG - get_grievance_by_id: grievance_id: {'grievance_id': 'GR-20250910-KOJH-7134-B', 'complainant_id': 'CM-20250910-KOJH-CBBC-B', 'grievance_categories': None, 'grievance_categories_alternative': None, 'grievance_summary': None, 'grievance_description': 'there is dust everywhere in my house\nkids are coughing\nI need to go to the hospital', 'grievance_claimed_amount': None, 'grievance_location': None, 'language_code': 'ne', 'grievance_classification_status': 'pending', 'grievance_creation_date': datetime.datetime(2025, 9, 10, 10, 1, 51, 310453, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'grievance_modification_date': datetime.datetime(2025, 9, 10, 10, 1, 51, 310453, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'is_temporary': True, 'source': 'bot', 'complainant_full_name': None, 'complainant_phone': None, 'complainant_email': None, 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_municipality': None, 'complainant_ward': None, 'complainant_village': None, 'complainant_address': None}, results: [{'grievance_id': 'GR-20250910-KOJH-7134-B', 'complainant_id': 'CM-20250910-KOJH-CBBC-B', 'grievance_categories': None, 'grievance_categories_alternative': None, 'grievance_summary': None, 'grievance_description': 'there is dust everywhere in my house\nkids are coughing\nI need to go to the hospital', 'grievance_claimed_amount': None, 'grievance_location': None, 'language_code': 'ne', 'grievance_classification_status': 'pending', 'grievance_creation_date': datetime.datetime(2025, 9, 10, 10, 1, 51, 310453, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'grievance_modification_date': datetime.datetime(2025, 9, 10, 10, 1, 51, 310453, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'is_temporary': True, 'source': 'bot', 'complainant_full_name': None, 'complainant_phone': None, 'complainant_email': None, 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_municipality': None, 'complainant_ward': None, 'complainant_village': None, 'complainant_address': None}]
2025-09-10 10:02:12,189 - db_manager - INFO - update_complainant: Updating complainant with ID: CM-20250910-KOJH-CBBC-B
2025-09-10 10:02:12,189 - db_manager - INFO - Connecting to database: grievance_db
2025-09-10 10:02:12,194 - db_manager - INFO - Starting database transaction
2025-09-10 10:02:12,194 - db_manager - INFO - Executing encrypt_field: SELECT encode(pgp_sym_encrypt(%s, %s), 'hex') AS encrypted...
2025-09-10 10:02:12,199 - db_manager - INFO - encrypt_field completed in 0.01s. Rows: 1
2025-09-10 10:02:12,199 - db_manager - INFO - Transaction committed successfully
2025-09-10 10:02:12,199 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-10 10:02:12,199 - db_manager - DEBUG - encrypted phone number Not provided at encrypt_complainant_data: c30d04070302af1d134eb85ca0ec6ed23d01034d488be086d1bfb4ffc4c57cfebfdc6ef4dd92c06d1622e8dd3af47ab838dbd06ac61a1c73e31758b4ac0d51bf206ff4df5b281f9313d09e926b90
2025-09-10 10:02:12,199 - db_manager - INFO - Connecting to database: grievance_db
2025-09-10 10:02:12,204 - db_manager - INFO - Starting database transaction
2025-09-10 10:02:12,204 - db_manager - INFO - Executing encrypt_field: SELECT encode(pgp_sym_encrypt(%s, %s), 'hex') AS encrypted...
2025-09-10 10:02:12,205 - db_manager - INFO - encrypt_field completed in 0.01s. Rows: 1
2025-09-10 10:02:12,205 - db_manager - INFO - Transaction committed successfully
2025-09-10 10:02:12,205 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-10 10:02:12,206 - db_manager - INFO - Connecting to database: grievance_db
2025-09-10 10:02:12,210 - db_manager - INFO - Starting database transaction
2025-09-10 10:02:12,210 - db_manager - INFO - Executing encrypt_field: SELECT encode(pgp_sym_encrypt(%s, %s), 'hex') AS encrypted...
2025-09-10 10:02:12,211 - db_manager - INFO - encrypt_field completed in 0.01s. Rows: 1
2025-09-10 10:02:12,211 - db_manager - INFO - Transaction committed successfully
2025-09-10 10:02:12,211 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-10 10:02:12,211 - db_manager - DEBUG - phone number Not provided hashed to d83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f at hash_sensitive_data
2025-09-10 10:02:12,212 - db_manager - DEBUG - encrypted and hashed data at encrypt_and_hash_sensitive_data: {'complainant_full_name': 'c30d04070302269b3992ecbb924e6ed23d01115cfa2ff9fc8871da8474a5b90e38828c7f1d5b313e65a09ff29ff98800ee40cb84efba7cfa9beec8b7623448809b7ad23fbd42c3d9c4713e0a3981', 'complainant_phone': 'c30d04070302af1d134eb85ca0ec6ed23d01034d488be086d1bfb4ffc4c57cfebfdc6ef4dd92c06d1622e8dd3af47ab838dbd06ac61a1c73e31758b4ac0d51bf206ff4df5b281f9313d09e926b90', 'complainant_email': 'c30d04070302c48bcb4651cdb2a363d23d01395f030eebcacc51eb421b0f3cd8ebbdb9859ea2c50d8e1c8f0edfc747876e099b03142432e4160dbf0138fdb33edccbc7209381276412d4f66827f9', 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_phone_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'complainant_email_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'complainant_full_name_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f'}
2025-09-10 10:02:12,212 - db_manager - DEBUG - encrypted_data at update_complainant: {'complainant_full_name': 'c30d04070302269b3992ecbb924e6ed23d01115cfa2ff9fc8871da8474a5b90e38828c7f1d5b313e65a09ff29ff98800ee40cb84efba7cfa9beec8b7623448809b7ad23fbd42c3d9c4713e0a3981', 'complainant_phone': 'c30d04070302af1d134eb85ca0ec6ed23d01034d488be086d1bfb4ffc4c57cfebfdc6ef4dd92c06d1622e8dd3af47ab838dbd06ac61a1c73e31758b4ac0d51bf206ff4df5b281f9313d09e926b90', 'complainant_email': 'c30d04070302c48bcb4651cdb2a363d23d01395f030eebcacc51eb421b0f3cd8ebbdb9859ea2c50d8e1c8f0edfc747876e099b03142432e4160dbf0138fdb33edccbc7209381276412d4f66827f9', 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_phone_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'complainant_email_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'complainant_full_name_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f'}
2025-09-10 10:02:12,212 - db_manager - DEBUG - execute_update values: ('c30d04070302269b3992ecbb924e6ed23d01115cfa2ff9fc8871da8474a5b90e38828c7f1d5b313e65a09ff29ff98800ee40cb84efba7cfa9beec8b7623448809b7ad23fbd42c3d9c4713e0a3981', 'c30d04070302af1d134eb85ca0ec6ed23d01034d488be086d1bfb4ffc4c57cfebfdc6ef4dd92c06d1622e8dd3af47ab838dbd06ac61a1c73e31758b4ac0d51bf206ff4df5b281f9313d09e926b90', 'c30d04070302c48bcb4651cdb2a363d23d01395f030eebcacc51eb421b0f3cd8ebbdb9859ea2c50d8e1c8f0edfc747876e099b03142432e4160dbf0138fdb33edccbc7209381276412d4f66827f9', 'Koshi', 'Jhapa', 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'CM-20250910-KOJH-CBBC-B')
2025-09-10 10:02:12,212 - db_manager - DEBUG - execute_update query: UPDATE complainants SET complainant_full_name = %s, complainant_phone = %s, complainant_email = %s, complainant_province = %s, complainant_district = %s, complainant_phone_hash = %s, complainant_email_hash = %s, complainant_full_name_hash = %s WHERE complainant_id = %s
2025-09-10 10:02:12,212 - db_manager - INFO - Connecting to database: grievance_db
2025-09-10 10:02:12,217 - db_manager - INFO - Starting database transaction
2025-09-10 10:02:12,217 - db_manager - INFO - execute_update: Executing update query: UPDATE complainants SET complainant_full_name = %s, complainant_phone = %s, complainant_email = %s, ...
2025-09-10 10:02:12,218 - db_manager - INFO - execute_update: Update completed in 0.01s. Affected rows: 1
2025-09-10 10:02:12,220 - db_manager - INFO - Transaction committed successfully
2025-09-10 10:02:12,220 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-10 10:02:12,220 - db_manager - INFO - Complainant updated in db: CM-20250910-KOJH-CBBC-B
2025-09-10 10:02:12,220 - db_manager - INFO - update_grievance: Updating grievance with ID: GR-20250910-KOJH-7134-B
2025-09-10 10:02:12,220 - db_manager - DEBUG - execute_update values: ('there is dust everywhere in my house\nkids are coughing\nI need to go to the hospital', 'GR-20250910-KOJH-7134-B')
2025-09-10 10:02:12,220 - db_manager - DEBUG - execute_update query: 
                    UPDATE grievances 
                    SET grievance_description = %s, grievance_modification_date = CURRENT_TIMESTAMP
                    WHERE grievance_id = %s
                    RETURNING grievance_id
                
2025-09-10 10:02:12,220 - db_manager - INFO - Connecting to database: grievance_db
2025-09-10 10:02:12,225 - db_manager - INFO - Starting database transaction
2025-09-10 10:02:12,225 - db_manager - INFO - execute_update: Executing update query: 
                    UPDATE grievances 
                    SET grievance_description = %s, grievanc...
2025-09-10 10:02:12,226 - db_manager - INFO - execute_update: Update completed in 0.01s. Affected rows: 1
2025-09-10 10:02:12,228 - db_manager - INFO - Transaction committed successfully
2025-09-10 10:02:12,228 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-10 10:02:12,228 - db_manager - INFO - update_grievance: Updated grievance with ID: GR-20250910-KOJH-7134-B, rows affected: 1
2025-09-10 10:02:12,228 - db_manager - INFO - Grievance updated in db: GR-20250910-KOJH-7134-B
2025-09-10 10:02:12,228 - db_manager - INFO - Connecting to database: grievance_db
2025-09-10 10:02:12,233 - db_manager - INFO - Starting database transaction
2025-09-10 10:02:12,234 - db_manager - INFO - Executing get_grievance_files: 
            SELECT file_id, file_name, file_type, file_size, upload_timestamp
            FROM file...
2025-09-10 10:02:12,235 - db_manager - INFO - get_grievance_files completed in 0.01s. Rows: 0
2025-09-10 10:02:12,236 - db_manager - INFO - Transaction committed successfully
2025-09-10 10:02:12,236 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-10 10:02:12,236 - db_manager - INFO - Connecting to database: grievance_db
2025-09-10 10:02:12,240 - db_manager - INFO - Starting database transaction
2025-09-10 10:02:12,240 - db_manager - INFO - Executing get_grievance_files: 
            SELECT file_id, file_name, file_type, file_size, upload_timestamp
            FROM file...
2025-09-10 10:02:12,241 - db_manager - INFO - get_grievance_files completed in 0.01s. Rows: 0
2025-09-10 10:02:12,241 - db_manager - INFO - Transaction committed successfully
2025-09-10 10:02:12,242 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-10 10:02:12,288 - db_manager - INFO - Connecting to database: grievance_db
2025-09-10 10:02:12,293 - db_manager - INFO - Starting database transaction
2025-09-10 10:02:12,294 - db_manager - INFO - Executing get_grievance_by_id: 
                SELECT g.*, c.complainant_full_name, c.complainant_phone, c.complainant_email,
    ...
2025-09-10 10:02:12,295 - db_manager - INFO - get_grievance_by_id completed in 0.01s. Rows: 1
2025-09-10 10:02:12,295 - db_manager - INFO - Transaction committed successfully
2025-09-10 10:02:12,295 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-10 10:02:12,295 - db_manager - DEBUG - get_grievance_by_id: grievance_id: {'grievance_id': 'GR-20250910-KOJH-7134-B', 'complainant_id': 'CM-20250910-KOJH-CBBC-B', 'grievance_categories': None, 'grievance_categories_alternative': None, 'grievance_summary': None, 'grievance_description': 'there is dust everywhere in my house\nkids are coughing\nI need to go to the hospital', 'grievance_claimed_amount': None, 'grievance_location': None, 'language_code': 'ne', 'grievance_classification_status': 'pending', 'grievance_creation_date': datetime.datetime(2025, 9, 10, 10, 1, 51, 310453, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'grievance_modification_date': datetime.datetime(2025, 9, 10, 10, 2, 12, 225549, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'is_temporary': True, 'source': 'bot', 'complainant_full_name': 'c30d04070302269b3992ecbb924e6ed23d01115cfa2ff9fc8871da8474a5b90e38828c7f1d5b313e65a09ff29ff98800ee40cb84efba7cfa9beec8b7623448809b7ad23fbd42c3d9c4713e0a3981', 'complainant_phone': 'c30d04070302af1d134eb85ca0ec6ed23d01034d488be086d1bfb4ffc4c57cfebfdc6ef4dd92c06d1622e8dd3af47ab838dbd06ac61a1c73e31758b4ac0d51bf206ff4df5b281f9313d09e926b90', 'complainant_email': 'c30d04070302c48bcb4651cdb2a363d23d01395f030eebcacc51eb421b0f3cd8ebbdb9859ea2c50d8e1c8f0edfc747876e099b03142432e4160dbf0138fdb33edccbc7209381276412d4f66827f9', 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_municipality': None, 'complainant_ward': None, 'complainant_village': None, 'complainant_address': None}, results: [{'grievance_id': 'GR-20250910-KOJH-7134-B', 'complainant_id': 'CM-20250910-KOJH-CBBC-B', 'grievance_categories': None, 'grievance_categories_alternative': None, 'grievance_summary': None, 'grievance_description': 'there is dust everywhere in my house\nkids are coughing\nI need to go to the hospital', 'grievance_claimed_amount': None, 'grievance_location': None, 'language_code': 'ne', 'grievance_classification_status': 'pending', 'grievance_creation_date': datetime.datetime(2025, 9, 10, 10, 1, 51, 310453, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'grievance_modification_date': datetime.datetime(2025, 9, 10, 10, 2, 12, 225549, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'is_temporary': True, 'source': 'bot', 'complainant_full_name': 'c30d04070302269b3992ecbb924e6ed23d01115cfa2ff9fc8871da8474a5b90e38828c7f1d5b313e65a09ff29ff98800ee40cb84efba7cfa9beec8b7623448809b7ad23fbd42c3d9c4713e0a3981', 'complainant_phone': 'c30d04070302af1d134eb85ca0ec6ed23d01034d488be086d1bfb4ffc4c57cfebfdc6ef4dd92c06d1622e8dd3af47ab838dbd06ac61a1c73e31758b4ac0d51bf206ff4df5b281f9313d09e926b90', 'complainant_email': 'c30d04070302c48bcb4651cdb2a363d23d01395f030eebcacc51eb421b0f3cd8ebbdb9859ea2c50d8e1c8f0edfc747876e099b03142432e4160dbf0138fdb33edccbc7209381276412d4f66827f9', 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_municipality': None, 'complainant_ward': None, 'complainant_village': None, 'complainant_address': None}]
2025-09-10 10:02:12,400 - db_manager - INFO - Connecting to database: grievance_db
2025-09-10 10:02:12,405 - db_manager - INFO - Starting database transaction
2025-09-10 10:02:12,406 - db_manager - INFO - Executing get_complainant_id_from_grievance_id: 
            SELECT complainant_id
            FROM grievances
            WHERE grievance_id = %s
 ...
2025-09-10 10:02:12,407 - db_manager - INFO - get_complainant_id_from_grievance_id completed in 0.01s. Rows: 1
2025-09-10 10:02:12,407 - db_manager - INFO - Transaction committed successfully
2025-09-10 10:02:12,407 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-10 10:02:12,407 - db_manager - INFO - update_complainant: Updating complainant with ID: CM-20250910-KOJH-CBBC-B
2025-09-10 10:02:12,407 - db_manager - DEBUG - encrypted and hashed data at encrypt_and_hash_sensitive_data: {}
2025-09-10 10:02:12,407 - db_manager - DEBUG - encrypted_data at update_complainant: {}
2025-09-10 10:02:12,407 - db_manager - DEBUG - No complainant field to update
2025-09-10 10:02:12,407 - db_manager - INFO - Complainant updated in db: GR-20250910-KOJH-7134-B
2025-09-10 10:02:12,407 - db_manager - INFO - update_grievance: Updating grievance with ID: GR-20250910-KOJH-7134-B
2025-09-10 10:02:12,407 - db_manager - WARNING - update_grievance: No fields to update for this query
2025-09-10 10:02:12,407 - db_manager - WARNING - update_grievance: No fields to update for this query: {'grievance_categories': None, 'grievance_summary': None, 'grievance_categories_status': None, 'grievance_summary_status': None, 'grievance_cat_modify': None, 'grievance_summary_temp': None, 'source': 'bot', 'complainant_id': None} with expected fields: ['grievance_categories', 'grievance_categories_alternative', 'grievance_summary', 'grievance_description', 'grievance_claimed_amount', 'grievance_location', 'language_code'] for grievance_id: GR-20250910-KOJH-7134-B
2025-09-10 10:02:12,407 - db_manager - INFO - Grievance updated in db: GR-20250910-KOJH-7134-B
2025-09-10 10:02:12,451 - db_manager - INFO - Connecting to database: grievance_db
2025-09-10 10:02:12,456 - db_manager - INFO - Starting database transaction
2025-09-10 10:02:12,456 - db_manager - INFO - Executing get_grievance_files: 
            SELECT file_id, file_name, file_type, file_size, upload_timestamp
            FROM file...
2025-09-10 10:02:12,457 - db_manager - INFO - get_grievance_files completed in 0.01s. Rows: 0
2025-09-10 10:02:12,457 - db_manager - INFO - Transaction committed successfully
2025-09-10 10:02:12,457 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-10 10:15:35,369 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-10 10:15:35,369 - db_manager - INFO - Database manager initialized successfully
2025-09-10 10:15:35,369 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-10 10:15:35,369 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-10 10:15:35,369 - db_manager - INFO - Database manager initialized successfully
2025-09-10 10:15:35,370 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-10 10:15:35,370 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-10 10:15:35,370 - db_manager - INFO - Database manager initialized successfully
2025-09-10 10:15:35,370 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-10 10:15:35,370 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-10 10:15:35,370 - db_manager - INFO - Database manager initialized successfully
2025-09-10 10:15:35,370 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-10 10:15:35,370 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-10 10:15:35,370 - db_manager - INFO - Database manager initialized successfully
2025-09-10 10:15:35,370 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-10 10:15:35,370 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-10 10:15:35,370 - db_manager - INFO - Database manager initialized successfully
2025-09-10 10:15:35,370 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-10 10:15:35,370 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-10 10:15:35,370 - db_manager - INFO - Database manager initialized successfully
2025-09-10 10:15:35,370 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-10 10:15:35,371 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-10 10:15:35,371 - db_manager - INFO - Database manager initialized successfully
2025-09-10 10:15:35,371 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-10 10:15:35,371 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-10 10:15:35,371 - db_manager - INFO - Database manager initialized successfully
2025-09-10 10:15:35,371 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-10 10:15:35,371 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-10 10:15:35,371 - db_manager - INFO - Database manager initialized successfully
2025-09-10 10:15:35,371 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-10 10:16:54,754 - db_manager - INFO - create_complainant: Creating complainant with ID: CM-20250910-KOJH-08FC-B
2025-09-10 10:16:54,754 - db_manager - DEBUG - encrypted and hashed data at encrypt_and_hash_sensitive_data: {'complainant_id': 'CM-20250910-KOJH-08FC-B', 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_unique_id': 'CM-20250910-KOJH-08FC-B'}
2025-09-10 10:16:54,754 - db_manager - DEBUG - query_keys at generate_query_string: dict_keys(['complainant_id', 'complainant_province', 'complainant_district', 'complainant_unique_id'])
2025-09-10 10:16:54,755 - db_manager - DEBUG - Generated query: INSERT INTO complainants (complainant_id, complainant_province, complainant_district, complainant_unique_id) VALUES (%s, %s, %s, %s)
2025-09-10 10:16:54,755 - db_manager - DEBUG - len of query_keys: 4
2025-09-10 10:16:54,755 - db_manager - DEBUG - Generated query: INSERT INTO complainants (complainant_id, complainant_province, complainant_district, complainant_unique_id) VALUES (%s, %s, %s, %s)
2025-09-10 10:16:54,755 - db_manager - INFO - Connecting to database: grievance_db
2025-09-10 10:16:54,761 - db_manager - INFO - Starting database transaction
2025-09-10 10:16:54,764 - db_manager - INFO - Transaction committed successfully
2025-09-10 10:16:54,764 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-10 10:16:54,764 - db_manager - INFO - create_complainant: Successfully created complainant with ID: CM-20250910-KOJH-08FC-B
2025-09-10 10:16:54,764 - db_manager - INFO - create_grievance: Creating grievance with data: {'grievance_id': 'GR-20250910-KOJH-A325-B', 'complainant_id': 'CM-20250910-KOJH-08FC-B', 'grievance_description': 'there is dust everywhere in my house kids are coughing I need to go to the hospital', 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_office': None, 'source': 'bot', 'complainant_unique_id': 'CM-20250910-KOJH-08FC-B'}
2025-09-10 10:16:54,764 - db_manager - INFO - create_grievance: Creating grievance with ID: GR-20250910-KOJH-A325-B
2025-09-10 10:16:54,764 - db_manager - INFO - create_grievance: Creating grievance with allowed fields: ['grievance_id', 'complainant_id', 'grievance_categories', 'grievance_categories_alternative', 'grievance_summary', 'grievance_description', 'grievance_claimed_amount', 'grievance_location', 'is_temporary', 'source', 'language_code', 'grievance_classification_status']
2025-09-10 10:16:54,764 - db_manager - DEBUG - query_keys at generate_query_string: dict_keys(['grievance_id', 'complainant_id', 'grievance_description', 'source'])
2025-09-10 10:16:54,764 - db_manager - DEBUG - Generated query: INSERT INTO grievances (grievance_id, complainant_id, grievance_description, source) VALUES (%s, %s, %s, %s) RETURNING grievance_id
2025-09-10 10:16:54,765 - db_manager - DEBUG - len of query_keys: 4
2025-09-10 10:16:54,765 - db_manager - DEBUG - Generated query: INSERT INTO grievances (grievance_id, complainant_id, grievance_description, source) VALUES (%s, %s, %s, %s) RETURNING grievance_id
2025-09-10 10:16:54,765 - db_manager - INFO - Connecting to database: grievance_db
2025-09-10 10:16:54,771 - db_manager - INFO - Starting database transaction
2025-09-10 10:16:54,776 - db_manager - INFO - Transaction committed successfully
2025-09-10 10:16:54,776 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-10 10:16:54,776 - db_manager - INFO - create_grievance: Successfully created grievance with ID: GR-20250910-KOJH-A325-B
2025-09-10 10:17:15,461 - db_manager - INFO - Connecting to database: grievance_db
2025-09-10 10:17:15,466 - db_manager - INFO - Starting database transaction
2025-09-10 10:17:15,467 - db_manager - INFO - Executing get_complainant_by_id: 
            SELECT complainant_id, complainant_unique_id, complainant_full_name,    complainant_pho...
2025-09-10 10:17:15,468 - db_manager - INFO - get_complainant_by_id completed in 0.01s. Rows: 1
2025-09-10 10:17:15,468 - db_manager - INFO - Transaction committed successfully
2025-09-10 10:17:15,468 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-10 10:17:15,468 - db_manager - INFO - Connecting to database: grievance_db
2025-09-10 10:17:15,475 - db_manager - INFO - Starting database transaction
2025-09-10 10:17:15,475 - db_manager - INFO - Executing get_grievance_by_id: 
                SELECT g.*, c.complainant_full_name, c.complainant_phone, c.complainant_email,
    ...
2025-09-10 10:17:15,477 - db_manager - INFO - get_grievance_by_id completed in 0.01s. Rows: 1
2025-09-10 10:17:15,478 - db_manager - INFO - Transaction committed successfully
2025-09-10 10:17:15,478 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-10 10:17:15,478 - db_manager - DEBUG - get_grievance_by_id: grievance_id: {'grievance_id': 'GR-20250910-KOJH-A325-B', 'complainant_id': 'CM-20250910-KOJH-08FC-B', 'grievance_categories': '{"Environmental - Air Pollution"}', 'grievance_categories_alternative': '{"Environmental - Noise Pollution","Safety - Road Safety Provisions"}', 'grievance_summary': "The complainant's house is full of dust due to which their kids are coughing and they need to visit the hospital.", 'grievance_description': 'there is dust everywhere in my house kids are coughing I need to go to the hospital', 'grievance_claimed_amount': None, 'grievance_location': None, 'language_code': 'en', 'grievance_classification_status': 'pending', 'grievance_creation_date': datetime.datetime(2025, 9, 10, 10, 16, 54, 771540, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'grievance_modification_date': datetime.datetime(2025, 9, 10, 10, 16, 59, 285442, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'is_temporary': True, 'source': 'bot', 'complainant_full_name': None, 'complainant_phone': None, 'complainant_email': None, 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_municipality': None, 'complainant_ward': None, 'complainant_village': None, 'complainant_address': None}, results: [{'grievance_id': 'GR-20250910-KOJH-A325-B', 'complainant_id': 'CM-20250910-KOJH-08FC-B', 'grievance_categories': '{"Environmental - Air Pollution"}', 'grievance_categories_alternative': '{"Environmental - Noise Pollution","Safety - Road Safety Provisions"}', 'grievance_summary': "The complainant's house is full of dust due to which their kids are coughing and they need to visit the hospital.", 'grievance_description': 'there is dust everywhere in my house kids are coughing I need to go to the hospital', 'grievance_claimed_amount': None, 'grievance_location': None, 'language_code': 'en', 'grievance_classification_status': 'pending', 'grievance_creation_date': datetime.datetime(2025, 9, 10, 10, 16, 54, 771540, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'grievance_modification_date': datetime.datetime(2025, 9, 10, 10, 16, 59, 285442, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'is_temporary': True, 'source': 'bot', 'complainant_full_name': None, 'complainant_phone': None, 'complainant_email': None, 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_municipality': None, 'complainant_ward': None, 'complainant_village': None, 'complainant_address': None}]
2025-09-10 10:17:15,478 - db_manager - INFO - update_complainant: Updating complainant with ID: CM-20250910-KOJH-08FC-B
2025-09-10 10:17:15,479 - db_manager - INFO - Connecting to database: grievance_db
2025-09-10 10:17:15,484 - db_manager - INFO - Starting database transaction
2025-09-10 10:17:15,485 - db_manager - INFO - Executing encrypt_field: SELECT encode(pgp_sym_encrypt(%s, %s), 'hex') AS encrypted...
2025-09-10 10:17:15,488 - db_manager - INFO - encrypt_field completed in 0.01s. Rows: 1
2025-09-10 10:17:15,489 - db_manager - INFO - Transaction committed successfully
2025-09-10 10:17:15,489 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-10 10:17:15,489 - db_manager - INFO - Connecting to database: grievance_db
2025-09-10 10:17:15,496 - db_manager - INFO - Starting database transaction
2025-09-10 10:17:15,496 - db_manager - INFO - Executing encrypt_field: SELECT encode(pgp_sym_encrypt(%s, %s), 'hex') AS encrypted...
2025-09-10 10:17:15,497 - db_manager - INFO - encrypt_field completed in 0.01s. Rows: 1
2025-09-10 10:17:15,497 - db_manager - INFO - Transaction committed successfully
2025-09-10 10:17:15,497 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-10 10:17:15,498 - db_manager - INFO - Connecting to database: grievance_db
2025-09-10 10:17:15,504 - db_manager - INFO - Starting database transaction
2025-09-10 10:17:15,504 - db_manager - INFO - Executing encrypt_field: SELECT encode(pgp_sym_encrypt(%s, %s), 'hex') AS encrypted...
2025-09-10 10:17:15,505 - db_manager - INFO - encrypt_field completed in 0.01s. Rows: 1
2025-09-10 10:17:15,505 - db_manager - INFO - Transaction committed successfully
2025-09-10 10:17:15,505 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-10 10:17:15,505 - db_manager - DEBUG - encrypted phone number Not provided at encrypt_complainant_data: c30d040703025a9afc4b71437fbb6cd23d012b847883ff591b16cb1f068710e9dce9cdb814786ee9a6dfe2f9f0b1633c5c740bb1921eeabf5c90570d4332d3a6c03fcf304621fb42254c2d7039ba
2025-09-10 10:17:15,505 - db_manager - DEBUG - phone number Not provided hashed to d83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f at hash_sensitive_data
2025-09-10 10:17:15,505 - db_manager - DEBUG - encrypted and hashed data at encrypt_and_hash_sensitive_data: {'complainant_full_name': 'c30d04070302d0e8eca4bb9d8c4674d23d014d2a888d62a7e7f46033a7553eebe7d1139211df5fce3c8d34c2b3bf45956df6f2a3c99ef99d3ada4f9ba2d107a5bf4b1a834b717b9bf37b459d5f3e', 'complainant_phone': 'c30d040703025a9afc4b71437fbb6cd23d012b847883ff591b16cb1f068710e9dce9cdb814786ee9a6dfe2f9f0b1633c5c740bb1921eeabf5c90570d4332d3a6c03fcf304621fb42254c2d7039ba', 'complainant_email': 'c30d0407030203cc65bbaf527a347cd23d011cee6bfb22ab88155fb5b468c152978dd35fcbc14cc65331d5c4390e414ea3d98ce6ab97fe1d2c664b36da37a91ec9210fab53d6e9ef8003c05686e3', 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_full_name_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'complainant_email_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'complainant_phone_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f'}
2025-09-10 10:17:15,506 - db_manager - DEBUG - encrypted_data at update_complainant: {'complainant_full_name': 'c30d04070302d0e8eca4bb9d8c4674d23d014d2a888d62a7e7f46033a7553eebe7d1139211df5fce3c8d34c2b3bf45956df6f2a3c99ef99d3ada4f9ba2d107a5bf4b1a834b717b9bf37b459d5f3e', 'complainant_phone': 'c30d040703025a9afc4b71437fbb6cd23d012b847883ff591b16cb1f068710e9dce9cdb814786ee9a6dfe2f9f0b1633c5c740bb1921eeabf5c90570d4332d3a6c03fcf304621fb42254c2d7039ba', 'complainant_email': 'c30d0407030203cc65bbaf527a347cd23d011cee6bfb22ab88155fb5b468c152978dd35fcbc14cc65331d5c4390e414ea3d98ce6ab97fe1d2c664b36da37a91ec9210fab53d6e9ef8003c05686e3', 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_full_name_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'complainant_email_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'complainant_phone_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f'}
2025-09-10 10:17:15,506 - db_manager - DEBUG - execute_update values: ('c30d04070302d0e8eca4bb9d8c4674d23d014d2a888d62a7e7f46033a7553eebe7d1139211df5fce3c8d34c2b3bf45956df6f2a3c99ef99d3ada4f9ba2d107a5bf4b1a834b717b9bf37b459d5f3e', 'c30d040703025a9afc4b71437fbb6cd23d012b847883ff591b16cb1f068710e9dce9cdb814786ee9a6dfe2f9f0b1633c5c740bb1921eeabf5c90570d4332d3a6c03fcf304621fb42254c2d7039ba', 'c30d0407030203cc65bbaf527a347cd23d011cee6bfb22ab88155fb5b468c152978dd35fcbc14cc65331d5c4390e414ea3d98ce6ab97fe1d2c664b36da37a91ec9210fab53d6e9ef8003c05686e3', 'Koshi', 'Jhapa', 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'CM-20250910-KOJH-08FC-B')
2025-09-10 10:17:15,506 - db_manager - DEBUG - execute_update query: UPDATE complainants SET complainant_full_name = %s, complainant_phone = %s, complainant_email = %s, complainant_province = %s, complainant_district = %s, complainant_full_name_hash = %s, complainant_email_hash = %s, complainant_phone_hash = %s WHERE complainant_id = %s
2025-09-10 10:17:15,506 - db_manager - INFO - Connecting to database: grievance_db
2025-09-10 10:17:15,512 - db_manager - INFO - Starting database transaction
2025-09-10 10:17:15,512 - db_manager - INFO - execute_update: Executing update query: UPDATE complainants SET complainant_full_name = %s, complainant_phone = %s, complainant_email = %s, ...
2025-09-10 10:17:15,513 - db_manager - INFO - execute_update: Update completed in 0.01s. Affected rows: 1
2025-09-10 10:17:15,515 - db_manager - INFO - Transaction committed successfully
2025-09-10 10:17:15,516 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-10 10:17:15,516 - db_manager - INFO - Complainant updated in db: CM-20250910-KOJH-08FC-B
2025-09-10 10:17:15,516 - db_manager - INFO - update_grievance: Updating grievance with ID: GR-20250910-KOJH-A325-B
2025-09-10 10:17:15,516 - db_manager - DEBUG - execute_update values: ('there is dust everywhere in my house kids are coughing I need to go to the hospital', 'GR-20250910-KOJH-A325-B')
2025-09-10 10:17:15,516 - db_manager - DEBUG - execute_update query: 
                    UPDATE grievances 
                    SET grievance_description = %s, grievance_modification_date = CURRENT_TIMESTAMP
                    WHERE grievance_id = %s
                    RETURNING grievance_id
                
2025-09-10 10:17:15,516 - db_manager - INFO - Connecting to database: grievance_db
2025-09-10 10:17:15,522 - db_manager - INFO - Starting database transaction
2025-09-10 10:17:15,522 - db_manager - INFO - execute_update: Executing update query: 
                    UPDATE grievances 
                    SET grievance_description = %s, grievanc...
2025-09-10 10:17:15,523 - db_manager - INFO - execute_update: Update completed in 0.01s. Affected rows: 1
2025-09-10 10:17:15,525 - db_manager - INFO - Transaction committed successfully
2025-09-10 10:17:15,526 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-10 10:17:15,526 - db_manager - INFO - update_grievance: Updated grievance with ID: GR-20250910-KOJH-A325-B, rows affected: 1
2025-09-10 10:17:15,526 - db_manager - INFO - Grievance updated in db: GR-20250910-KOJH-A325-B
2025-09-10 10:17:15,526 - db_manager - INFO - Connecting to database: grievance_db
2025-09-10 10:17:15,531 - db_manager - INFO - Starting database transaction
2025-09-10 10:17:15,531 - db_manager - INFO - Executing get_grievance_files: 
            SELECT file_id, file_name, file_type, file_size, upload_timestamp
            FROM file...
2025-09-10 10:17:15,532 - db_manager - INFO - get_grievance_files completed in 0.01s. Rows: 0
2025-09-10 10:17:15,533 - db_manager - INFO - Transaction committed successfully
2025-09-10 10:17:15,533 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-10 10:17:15,533 - db_manager - INFO - Connecting to database: grievance_db
2025-09-10 10:17:15,538 - db_manager - INFO - Starting database transaction
2025-09-10 10:17:15,538 - db_manager - INFO - Executing get_grievance_files: 
            SELECT file_id, file_name, file_type, file_size, upload_timestamp
            FROM file...
2025-09-10 10:17:15,539 - db_manager - INFO - get_grievance_files completed in 0.01s. Rows: 0
2025-09-10 10:17:15,539 - db_manager - INFO - Transaction committed successfully
2025-09-10 10:17:15,539 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-10 10:17:15,583 - db_manager - INFO - Connecting to database: grievance_db
2025-09-10 10:17:15,588 - db_manager - INFO - Starting database transaction
2025-09-10 10:17:15,588 - db_manager - INFO - Executing get_grievance_by_id: 
                SELECT g.*, c.complainant_full_name, c.complainant_phone, c.complainant_email,
    ...
2025-09-10 10:17:15,590 - db_manager - INFO - get_grievance_by_id completed in 0.01s. Rows: 1
2025-09-10 10:17:15,590 - db_manager - INFO - Transaction committed successfully
2025-09-10 10:17:15,590 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-10 10:17:15,591 - db_manager - DEBUG - get_grievance_by_id: grievance_id: {'grievance_id': 'GR-20250910-KOJH-A325-B', 'complainant_id': 'CM-20250910-KOJH-08FC-B', 'grievance_categories': '{"Environmental - Air Pollution"}', 'grievance_categories_alternative': '{"Environmental - Noise Pollution","Safety - Road Safety Provisions"}', 'grievance_summary': "The complainant's house is full of dust due to which their kids are coughing and they need to visit the hospital.", 'grievance_description': 'there is dust everywhere in my house kids are coughing I need to go to the hospital', 'grievance_claimed_amount': None, 'grievance_location': None, 'language_code': 'en', 'grievance_classification_status': 'pending', 'grievance_creation_date': datetime.datetime(2025, 9, 10, 10, 16, 54, 771540, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'grievance_modification_date': datetime.datetime(2025, 9, 10, 10, 17, 15, 522487, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'is_temporary': True, 'source': 'bot', 'complainant_full_name': 'c30d04070302d0e8eca4bb9d8c4674d23d014d2a888d62a7e7f46033a7553eebe7d1139211df5fce3c8d34c2b3bf45956df6f2a3c99ef99d3ada4f9ba2d107a5bf4b1a834b717b9bf37b459d5f3e', 'complainant_phone': 'c30d040703025a9afc4b71437fbb6cd23d012b847883ff591b16cb1f068710e9dce9cdb814786ee9a6dfe2f9f0b1633c5c740bb1921eeabf5c90570d4332d3a6c03fcf304621fb42254c2d7039ba', 'complainant_email': 'c30d0407030203cc65bbaf527a347cd23d011cee6bfb22ab88155fb5b468c152978dd35fcbc14cc65331d5c4390e414ea3d98ce6ab97fe1d2c664b36da37a91ec9210fab53d6e9ef8003c05686e3', 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_municipality': None, 'complainant_ward': None, 'complainant_village': None, 'complainant_address': None}, results: [{'grievance_id': 'GR-20250910-KOJH-A325-B', 'complainant_id': 'CM-20250910-KOJH-08FC-B', 'grievance_categories': '{"Environmental - Air Pollution"}', 'grievance_categories_alternative': '{"Environmental - Noise Pollution","Safety - Road Safety Provisions"}', 'grievance_summary': "The complainant's house is full of dust due to which their kids are coughing and they need to visit the hospital.", 'grievance_description': 'there is dust everywhere in my house kids are coughing I need to go to the hospital', 'grievance_claimed_amount': None, 'grievance_location': None, 'language_code': 'en', 'grievance_classification_status': 'pending', 'grievance_creation_date': datetime.datetime(2025, 9, 10, 10, 16, 54, 771540, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'grievance_modification_date': datetime.datetime(2025, 9, 10, 10, 17, 15, 522487, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'is_temporary': True, 'source': 'bot', 'complainant_full_name': 'c30d04070302d0e8eca4bb9d8c4674d23d014d2a888d62a7e7f46033a7553eebe7d1139211df5fce3c8d34c2b3bf45956df6f2a3c99ef99d3ada4f9ba2d107a5bf4b1a834b717b9bf37b459d5f3e', 'complainant_phone': 'c30d040703025a9afc4b71437fbb6cd23d012b847883ff591b16cb1f068710e9dce9cdb814786ee9a6dfe2f9f0b1633c5c740bb1921eeabf5c90570d4332d3a6c03fcf304621fb42254c2d7039ba', 'complainant_email': 'c30d0407030203cc65bbaf527a347cd23d011cee6bfb22ab88155fb5b468c152978dd35fcbc14cc65331d5c4390e414ea3d98ce6ab97fe1d2c664b36da37a91ec9210fab53d6e9ef8003c05686e3', 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_municipality': None, 'complainant_ward': None, 'complainant_village': None, 'complainant_address': None}]
2025-09-10 10:33:19,755 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-10 10:33:19,755 - db_manager - INFO - Database manager initialized successfully
2025-09-10 10:33:19,755 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-10 10:33:19,755 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-10 10:33:19,755 - db_manager - INFO - Database manager initialized successfully
2025-09-10 10:33:19,755 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-10 10:33:19,755 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-10 10:33:19,756 - db_manager - INFO - Database manager initialized successfully
2025-09-10 10:33:19,756 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-10 10:33:19,756 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-10 10:33:19,756 - db_manager - INFO - Database manager initialized successfully
2025-09-10 10:33:19,756 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-10 10:33:19,756 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-10 10:33:19,756 - db_manager - INFO - Database manager initialized successfully
2025-09-10 10:33:19,756 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-10 10:33:19,756 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-10 10:33:19,756 - db_manager - INFO - Database manager initialized successfully
2025-09-10 10:33:19,756 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-10 10:33:19,756 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-10 10:33:19,756 - db_manager - INFO - Database manager initialized successfully
2025-09-10 10:33:19,756 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-10 10:33:19,756 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-10 10:33:19,756 - db_manager - INFO - Database manager initialized successfully
2025-09-10 10:33:19,756 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-10 10:33:19,756 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-10 10:33:19,757 - db_manager - INFO - Database manager initialized successfully
2025-09-10 10:33:19,757 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-10 10:33:19,757 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-10 10:33:19,757 - db_manager - INFO - Database manager initialized successfully
2025-09-10 10:33:19,757 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-10 10:33:56,228 - db_manager - INFO - create_complainant: Creating complainant with ID: CM-20250910-KOJH-1BF4-B
2025-09-10 10:33:56,228 - db_manager - DEBUG - encrypted and hashed data at encrypt_and_hash_sensitive_data: {'complainant_id': 'CM-20250910-KOJH-1BF4-B', 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_unique_id': 'CM-20250910-KOJH-1BF4-B'}
2025-09-10 10:33:56,228 - db_manager - DEBUG - query_keys at generate_query_string: dict_keys(['complainant_id', 'complainant_province', 'complainant_district', 'complainant_unique_id'])
2025-09-10 10:33:56,228 - db_manager - DEBUG - Generated query: INSERT INTO complainants (complainant_id, complainant_province, complainant_district, complainant_unique_id) VALUES (%s, %s, %s, %s)
2025-09-10 10:33:56,228 - db_manager - DEBUG - len of query_keys: 4
2025-09-10 10:33:56,228 - db_manager - DEBUG - Generated query: INSERT INTO complainants (complainant_id, complainant_province, complainant_district, complainant_unique_id) VALUES (%s, %s, %s, %s)
2025-09-10 10:33:56,228 - db_manager - INFO - Connecting to database: grievance_db
2025-09-10 10:33:56,235 - db_manager - INFO - Starting database transaction
2025-09-10 10:33:56,237 - db_manager - INFO - Transaction committed successfully
2025-09-10 10:33:56,238 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-10 10:33:56,238 - db_manager - INFO - create_complainant: Successfully created complainant with ID: CM-20250910-KOJH-1BF4-B
2025-09-10 10:33:56,238 - db_manager - INFO - create_grievance: Creating grievance with data: {'grievance_id': 'GR-20250910-KOJH-96C6-B', 'complainant_id': 'CM-20250910-KOJH-1BF4-B', 'grievance_description': '"there is dust everywhere in my house kids are coughing I need to go to the hospital', 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_office': None, 'source': 'bot', 'complainant_unique_id': 'CM-20250910-KOJH-1BF4-B'}
2025-09-10 10:33:56,238 - db_manager - INFO - create_grievance: Creating grievance with ID: GR-20250910-KOJH-96C6-B
2025-09-10 10:33:56,238 - db_manager - INFO - create_grievance: Creating grievance with allowed fields: ['grievance_id', 'complainant_id', 'grievance_categories', 'grievance_categories_alternative', 'grievance_summary', 'grievance_description', 'grievance_claimed_amount', 'grievance_location', 'is_temporary', 'source', 'language_code', 'grievance_classification_status']
2025-09-10 10:33:56,238 - db_manager - DEBUG - query_keys at generate_query_string: dict_keys(['grievance_id', 'complainant_id', 'grievance_description', 'source'])
2025-09-10 10:33:56,238 - db_manager - DEBUG - Generated query: INSERT INTO grievances (grievance_id, complainant_id, grievance_description, source) VALUES (%s, %s, %s, %s) RETURNING grievance_id
2025-09-10 10:33:56,238 - db_manager - DEBUG - len of query_keys: 4
2025-09-10 10:33:56,238 - db_manager - DEBUG - Generated query: INSERT INTO grievances (grievance_id, complainant_id, grievance_description, source) VALUES (%s, %s, %s, %s) RETURNING grievance_id
2025-09-10 10:33:56,238 - db_manager - INFO - Connecting to database: grievance_db
2025-09-10 10:33:56,244 - db_manager - INFO - Starting database transaction
2025-09-10 10:33:56,249 - db_manager - INFO - Transaction committed successfully
2025-09-10 10:33:56,249 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-10 10:33:56,250 - db_manager - INFO - create_grievance: Successfully created grievance with ID: GR-20250910-KOJH-96C6-B
2025-09-10 10:34:29,567 - db_manager - INFO - Connecting to database: grievance_db
2025-09-10 10:34:29,574 - db_manager - INFO - Starting database transaction
2025-09-10 10:34:29,574 - db_manager - INFO - Executing get_complainant_by_id: 
            SELECT complainant_id, complainant_unique_id, complainant_full_name,    complainant_pho...
2025-09-10 10:34:29,575 - db_manager - INFO - get_complainant_by_id completed in 0.01s. Rows: 1
2025-09-10 10:34:29,576 - db_manager - INFO - Transaction committed successfully
2025-09-10 10:34:29,576 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-10 10:34:29,576 - db_manager - INFO - Connecting to database: grievance_db
2025-09-10 10:34:29,581 - db_manager - INFO - Starting database transaction
2025-09-10 10:34:29,581 - db_manager - INFO - Executing get_grievance_by_id: 
                SELECT g.*, c.complainant_full_name, c.complainant_phone, c.complainant_email,
    ...
2025-09-10 10:34:29,583 - db_manager - INFO - get_grievance_by_id completed in 0.01s. Rows: 1
2025-09-10 10:34:29,583 - db_manager - INFO - Transaction committed successfully
2025-09-10 10:34:29,583 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-10 10:34:29,583 - db_manager - DEBUG - get_grievance_by_id: grievance_id: {'grievance_id': 'GR-20250910-KOJH-96C6-B', 'complainant_id': 'CM-20250910-KOJH-1BF4-B', 'grievance_categories': '{"Environmental - Air Pollution"}', 'grievance_categories_alternative': '{"Relocation Issues - Forced Relocation Issues","Safety - Road Safety Provisions"}', 'grievance_summary': 'The dust from road works is entering the house, causing health issues for children who are coughing.', 'grievance_description': '"there is dust everywhere in my house kids are coughing I need to go to the hospital', 'grievance_claimed_amount': None, 'grievance_location': None, 'language_code': 'en', 'grievance_classification_status': 'pending', 'grievance_creation_date': datetime.datetime(2025, 9, 10, 10, 33, 56, 244767, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'grievance_modification_date': datetime.datetime(2025, 9, 10, 10, 34, 0, 704144, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'is_temporary': True, 'source': 'bot', 'complainant_full_name': None, 'complainant_phone': None, 'complainant_email': None, 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_municipality': None, 'complainant_ward': None, 'complainant_village': None, 'complainant_address': None}, results: [{'grievance_id': 'GR-20250910-KOJH-96C6-B', 'complainant_id': 'CM-20250910-KOJH-1BF4-B', 'grievance_categories': '{"Environmental - Air Pollution"}', 'grievance_categories_alternative': '{"Relocation Issues - Forced Relocation Issues","Safety - Road Safety Provisions"}', 'grievance_summary': 'The dust from road works is entering the house, causing health issues for children who are coughing.', 'grievance_description': '"there is dust everywhere in my house kids are coughing I need to go to the hospital', 'grievance_claimed_amount': None, 'grievance_location': None, 'language_code': 'en', 'grievance_classification_status': 'pending', 'grievance_creation_date': datetime.datetime(2025, 9, 10, 10, 33, 56, 244767, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'grievance_modification_date': datetime.datetime(2025, 9, 10, 10, 34, 0, 704144, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'is_temporary': True, 'source': 'bot', 'complainant_full_name': None, 'complainant_phone': None, 'complainant_email': None, 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_municipality': None, 'complainant_ward': None, 'complainant_village': None, 'complainant_address': None}]
2025-09-10 10:34:29,583 - db_manager - INFO - update_complainant: Updating complainant with ID: CM-20250910-KOJH-1BF4-B
2025-09-10 10:34:29,583 - db_manager - INFO - Connecting to database: grievance_db
2025-09-10 10:34:29,588 - db_manager - INFO - Starting database transaction
2025-09-10 10:34:29,588 - db_manager - INFO - Executing encrypt_field: SELECT encode(pgp_sym_encrypt(%s, %s), 'hex') AS encrypted...
2025-09-10 10:34:29,590 - db_manager - INFO - encrypt_field completed in 0.01s. Rows: 1
2025-09-10 10:34:29,590 - db_manager - INFO - Transaction committed successfully
2025-09-10 10:34:29,590 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-10 10:34:29,590 - db_manager - INFO - Connecting to database: grievance_db
2025-09-10 10:34:29,595 - db_manager - INFO - Starting database transaction
2025-09-10 10:34:29,595 - db_manager - INFO - Executing encrypt_field: SELECT encode(pgp_sym_encrypt(%s, %s), 'hex') AS encrypted...
2025-09-10 10:34:29,596 - db_manager - INFO - encrypt_field completed in 0.01s. Rows: 1
2025-09-10 10:34:29,596 - db_manager - INFO - Transaction committed successfully
2025-09-10 10:34:29,596 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-10 10:34:29,597 - db_manager - DEBUG - encrypted phone number Not provided at encrypt_complainant_data: c30d0407030241dd267e5579149678d23d0104c5fdbe05d591a5b29281d670e42970c53173a08e4a5c674875b8afdb0300fa71493e4a0f859426b317455dd946a374fae28a47f7e23e9e60a96cc9
2025-09-10 10:34:29,597 - db_manager - INFO - Connecting to database: grievance_db
2025-09-10 10:34:29,601 - db_manager - INFO - Starting database transaction
2025-09-10 10:34:29,601 - db_manager - INFO - Executing encrypt_field: SELECT encode(pgp_sym_encrypt(%s, %s), 'hex') AS encrypted...
2025-09-10 10:34:29,602 - db_manager - INFO - encrypt_field completed in 0.01s. Rows: 1
2025-09-10 10:34:29,602 - db_manager - INFO - Transaction committed successfully
2025-09-10 10:34:29,602 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-10 10:34:29,603 - db_manager - DEBUG - phone number Not provided hashed to d83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f at hash_sensitive_data
2025-09-10 10:34:29,603 - db_manager - DEBUG - encrypted and hashed data at encrypt_and_hash_sensitive_data: {'complainant_full_name': 'c30d04070302be4dc525e141bef87ad23d01c0ce017899902c61bb580c0d1d5cf7710f81b8b2c953c467bcd6bde502cc945d301a6bffc7b1b74f46f8ee0a06c54ab7383a9581d6f200209e785fc1', 'complainant_phone': 'c30d0407030241dd267e5579149678d23d0104c5fdbe05d591a5b29281d670e42970c53173a08e4a5c674875b8afdb0300fa71493e4a0f859426b317455dd946a374fae28a47f7e23e9e60a96cc9', 'complainant_email': 'c30d04070302af76c7b99f441ac66dd23d017b3e1b5a2788bbfebbe83c0563c11519827b3a5cee1e943877708053f7d7f4b11a6b4522c06e4135d70b7978865b5fb2ec05e0a4f9d2712a203bee5b', 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_full_name_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'complainant_phone_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'complainant_email_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f'}
2025-09-10 10:34:29,603 - db_manager - DEBUG - encrypted_data at update_complainant: {'complainant_full_name': 'c30d04070302be4dc525e141bef87ad23d01c0ce017899902c61bb580c0d1d5cf7710f81b8b2c953c467bcd6bde502cc945d301a6bffc7b1b74f46f8ee0a06c54ab7383a9581d6f200209e785fc1', 'complainant_phone': 'c30d0407030241dd267e5579149678d23d0104c5fdbe05d591a5b29281d670e42970c53173a08e4a5c674875b8afdb0300fa71493e4a0f859426b317455dd946a374fae28a47f7e23e9e60a96cc9', 'complainant_email': 'c30d04070302af76c7b99f441ac66dd23d017b3e1b5a2788bbfebbe83c0563c11519827b3a5cee1e943877708053f7d7f4b11a6b4522c06e4135d70b7978865b5fb2ec05e0a4f9d2712a203bee5b', 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_full_name_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'complainant_phone_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'complainant_email_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f'}
2025-09-10 10:34:29,603 - db_manager - DEBUG - execute_update values: ('c30d04070302be4dc525e141bef87ad23d01c0ce017899902c61bb580c0d1d5cf7710f81b8b2c953c467bcd6bde502cc945d301a6bffc7b1b74f46f8ee0a06c54ab7383a9581d6f200209e785fc1', 'c30d0407030241dd267e5579149678d23d0104c5fdbe05d591a5b29281d670e42970c53173a08e4a5c674875b8afdb0300fa71493e4a0f859426b317455dd946a374fae28a47f7e23e9e60a96cc9', 'c30d04070302af76c7b99f441ac66dd23d017b3e1b5a2788bbfebbe83c0563c11519827b3a5cee1e943877708053f7d7f4b11a6b4522c06e4135d70b7978865b5fb2ec05e0a4f9d2712a203bee5b', 'Koshi', 'Jhapa', 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'CM-20250910-KOJH-1BF4-B')
2025-09-10 10:34:29,603 - db_manager - DEBUG - execute_update query: UPDATE complainants SET complainant_full_name = %s, complainant_phone = %s, complainant_email = %s, complainant_province = %s, complainant_district = %s, complainant_full_name_hash = %s, complainant_phone_hash = %s, complainant_email_hash = %s WHERE complainant_id = %s
2025-09-10 10:34:29,603 - db_manager - INFO - Connecting to database: grievance_db
2025-09-10 10:34:29,607 - db_manager - INFO - Starting database transaction
2025-09-10 10:34:29,607 - db_manager - INFO - execute_update: Executing update query: UPDATE complainants SET complainant_full_name = %s, complainant_phone = %s, complainant_email = %s, ...
2025-09-10 10:34:29,609 - db_manager - INFO - execute_update: Update completed in 0.01s. Affected rows: 1
2025-09-10 10:34:29,611 - db_manager - INFO - Transaction committed successfully
2025-09-10 10:34:29,611 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-10 10:34:29,611 - db_manager - INFO - Complainant updated in db: CM-20250910-KOJH-1BF4-B
2025-09-10 10:34:29,611 - db_manager - INFO - update_grievance: Updating grievance with ID: GR-20250910-KOJH-96C6-B
2025-09-10 10:34:29,611 - db_manager - DEBUG - execute_update values: ('"there is dust everywhere in my house kids are coughing I need to go to the hospital', 'GR-20250910-KOJH-96C6-B')
2025-09-10 10:34:29,611 - db_manager - DEBUG - execute_update query: 
                    UPDATE grievances 
                    SET grievance_description = %s, grievance_modification_date = CURRENT_TIMESTAMP
                    WHERE grievance_id = %s
                    RETURNING grievance_id
                
2025-09-10 10:34:29,611 - db_manager - INFO - Connecting to database: grievance_db
2025-09-10 10:34:29,616 - db_manager - INFO - Starting database transaction
2025-09-10 10:34:29,616 - db_manager - INFO - execute_update: Executing update query: 
                    UPDATE grievances 
                    SET grievance_description = %s, grievanc...
2025-09-10 10:34:29,617 - db_manager - INFO - execute_update: Update completed in 0.01s. Affected rows: 1
2025-09-10 10:34:29,620 - db_manager - INFO - Transaction committed successfully
2025-09-10 10:34:29,620 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-10 10:34:29,620 - db_manager - INFO - update_grievance: Updated grievance with ID: GR-20250910-KOJH-96C6-B, rows affected: 1
2025-09-10 10:34:29,620 - db_manager - INFO - Grievance updated in db: GR-20250910-KOJH-96C6-B
2025-09-10 10:34:29,620 - db_manager - INFO - Connecting to database: grievance_db
2025-09-10 10:34:29,624 - db_manager - INFO - Starting database transaction
2025-09-10 10:34:29,625 - db_manager - INFO - Executing get_grievance_files: 
            SELECT file_id, file_name, file_type, file_size, upload_timestamp
            FROM file...
2025-09-10 10:34:29,626 - db_manager - INFO - get_grievance_files completed in 0.01s. Rows: 0
2025-09-10 10:34:29,626 - db_manager - INFO - Transaction committed successfully
2025-09-10 10:34:29,626 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-10 10:34:29,626 - db_manager - INFO - Connecting to database: grievance_db
2025-09-10 10:34:29,631 - db_manager - INFO - Starting database transaction
2025-09-10 10:34:29,631 - db_manager - INFO - Executing get_grievance_files: 
            SELECT file_id, file_name, file_type, file_size, upload_timestamp
            FROM file...
2025-09-10 10:34:29,632 - db_manager - INFO - get_grievance_files completed in 0.01s. Rows: 0
2025-09-10 10:34:29,632 - db_manager - INFO - Transaction committed successfully
2025-09-10 10:34:29,632 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-10 10:34:29,675 - db_manager - INFO - Connecting to database: grievance_db
2025-09-10 10:34:29,681 - db_manager - INFO - Starting database transaction
2025-09-10 10:34:29,682 - db_manager - INFO - Executing get_grievance_by_id: 
                SELECT g.*, c.complainant_full_name, c.complainant_phone, c.complainant_email,
    ...
2025-09-10 10:34:29,683 - db_manager - INFO - get_grievance_by_id completed in 0.01s. Rows: 1
2025-09-10 10:34:29,684 - db_manager - INFO - Transaction committed successfully
2025-09-10 10:34:29,684 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-10 10:34:29,684 - db_manager - DEBUG - get_grievance_by_id: grievance_id: {'grievance_id': 'GR-20250910-KOJH-96C6-B', 'complainant_id': 'CM-20250910-KOJH-1BF4-B', 'grievance_categories': '{"Environmental - Air Pollution"}', 'grievance_categories_alternative': '{"Relocation Issues - Forced Relocation Issues","Safety - Road Safety Provisions"}', 'grievance_summary': 'The dust from road works is entering the house, causing health issues for children who are coughing.', 'grievance_description': '"there is dust everywhere in my house kids are coughing I need to go to the hospital', 'grievance_claimed_amount': None, 'grievance_location': None, 'language_code': 'en', 'grievance_classification_status': 'pending', 'grievance_creation_date': datetime.datetime(2025, 9, 10, 10, 33, 56, 244767, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'grievance_modification_date': datetime.datetime(2025, 9, 10, 10, 34, 29, 616918, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'is_temporary': True, 'source': 'bot', 'complainant_full_name': 'c30d04070302be4dc525e141bef87ad23d01c0ce017899902c61bb580c0d1d5cf7710f81b8b2c953c467bcd6bde502cc945d301a6bffc7b1b74f46f8ee0a06c54ab7383a9581d6f200209e785fc1', 'complainant_phone': 'c30d0407030241dd267e5579149678d23d0104c5fdbe05d591a5b29281d670e42970c53173a08e4a5c674875b8afdb0300fa71493e4a0f859426b317455dd946a374fae28a47f7e23e9e60a96cc9', 'complainant_email': 'c30d04070302af76c7b99f441ac66dd23d017b3e1b5a2788bbfebbe83c0563c11519827b3a5cee1e943877708053f7d7f4b11a6b4522c06e4135d70b7978865b5fb2ec05e0a4f9d2712a203bee5b', 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_municipality': None, 'complainant_ward': None, 'complainant_village': None, 'complainant_address': None}, results: [{'grievance_id': 'GR-20250910-KOJH-96C6-B', 'complainant_id': 'CM-20250910-KOJH-1BF4-B', 'grievance_categories': '{"Environmental - Air Pollution"}', 'grievance_categories_alternative': '{"Relocation Issues - Forced Relocation Issues","Safety - Road Safety Provisions"}', 'grievance_summary': 'The dust from road works is entering the house, causing health issues for children who are coughing.', 'grievance_description': '"there is dust everywhere in my house kids are coughing I need to go to the hospital', 'grievance_claimed_amount': None, 'grievance_location': None, 'language_code': 'en', 'grievance_classification_status': 'pending', 'grievance_creation_date': datetime.datetime(2025, 9, 10, 10, 33, 56, 244767, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'grievance_modification_date': datetime.datetime(2025, 9, 10, 10, 34, 29, 616918, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'is_temporary': True, 'source': 'bot', 'complainant_full_name': 'c30d04070302be4dc525e141bef87ad23d01c0ce017899902c61bb580c0d1d5cf7710f81b8b2c953c467bcd6bde502cc945d301a6bffc7b1b74f46f8ee0a06c54ab7383a9581d6f200209e785fc1', 'complainant_phone': 'c30d0407030241dd267e5579149678d23d0104c5fdbe05d591a5b29281d670e42970c53173a08e4a5c674875b8afdb0300fa71493e4a0f859426b317455dd946a374fae28a47f7e23e9e60a96cc9', 'complainant_email': 'c30d04070302af76c7b99f441ac66dd23d017b3e1b5a2788bbfebbe83c0563c11519827b3a5cee1e943877708053f7d7f4b11a6b4522c06e4135d70b7978865b5fb2ec05e0a4f9d2712a203bee5b', 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_municipality': None, 'complainant_ward': None, 'complainant_village': None, 'complainant_address': None}]
2025-09-10 11:14:20,847 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-10 11:14:20,847 - db_manager - INFO - Database manager initialized successfully
2025-09-10 11:14:20,847 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-10 11:14:20,847 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-10 11:14:20,847 - db_manager - INFO - Database manager initialized successfully
2025-09-10 11:14:20,847 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-10 11:14:20,847 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-10 11:14:20,847 - db_manager - INFO - Database manager initialized successfully
2025-09-10 11:14:20,847 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-10 11:14:20,847 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-10 11:14:20,847 - db_manager - INFO - Database manager initialized successfully
2025-09-10 11:14:20,847 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-10 11:14:20,848 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-10 11:14:20,848 - db_manager - INFO - Database manager initialized successfully
2025-09-10 11:14:20,848 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-10 11:14:20,848 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-10 11:14:20,848 - db_manager - INFO - Database manager initialized successfully
2025-09-10 11:14:20,848 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-10 11:14:20,848 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-10 11:14:20,848 - db_manager - INFO - Database manager initialized successfully
2025-09-10 11:14:20,848 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-10 11:14:20,848 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-10 11:14:20,848 - db_manager - INFO - Database manager initialized successfully
2025-09-10 11:14:20,848 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-10 11:14:20,848 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-10 11:14:20,848 - db_manager - INFO - Database manager initialized successfully
2025-09-10 11:14:20,848 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-10 11:14:20,848 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-10 11:14:20,848 - db_manager - INFO - Database manager initialized successfully
2025-09-10 11:14:20,848 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-10 11:28:08,808 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-10 11:28:08,809 - db_manager - INFO - Database manager initialized successfully
2025-09-10 11:28:08,809 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-10 11:28:08,809 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-10 11:28:08,809 - db_manager - INFO - Database manager initialized successfully
2025-09-10 11:28:08,809 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-10 11:28:08,809 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-10 11:28:08,809 - db_manager - INFO - Database manager initialized successfully
2025-09-10 11:28:08,809 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-10 11:28:08,809 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-10 11:28:08,809 - db_manager - INFO - Database manager initialized successfully
2025-09-10 11:28:08,809 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-10 11:28:08,809 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-10 11:28:08,809 - db_manager - INFO - Database manager initialized successfully
2025-09-10 11:28:08,809 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-10 11:28:08,810 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-10 11:28:08,810 - db_manager - INFO - Database manager initialized successfully
2025-09-10 11:28:08,810 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-10 11:28:08,810 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-10 11:28:08,810 - db_manager - INFO - Database manager initialized successfully
2025-09-10 11:28:08,810 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-10 11:28:08,810 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-10 11:28:08,810 - db_manager - INFO - Database manager initialized successfully
2025-09-10 11:28:08,810 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-10 11:28:08,810 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-10 11:28:08,810 - db_manager - INFO - Database manager initialized successfully
2025-09-10 11:28:08,810 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-10 11:28:08,810 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-10 11:28:08,810 - db_manager - INFO - Database manager initialized successfully
2025-09-10 11:28:08,810 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-10 11:37:52,280 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-10 11:37:52,280 - db_manager - INFO - Database manager initialized successfully
2025-09-10 11:37:52,281 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-10 11:37:52,281 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-10 11:37:52,281 - db_manager - INFO - Database manager initialized successfully
2025-09-10 11:37:52,281 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-10 11:37:52,281 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-10 11:37:52,281 - db_manager - INFO - Database manager initialized successfully
2025-09-10 11:37:52,281 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-10 11:37:52,281 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-10 11:37:52,281 - db_manager - INFO - Database manager initialized successfully
2025-09-10 11:37:52,281 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-10 11:37:52,281 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-10 11:37:52,281 - db_manager - INFO - Database manager initialized successfully
2025-09-10 11:37:52,281 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-10 11:37:52,281 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-10 11:37:52,281 - db_manager - INFO - Database manager initialized successfully
2025-09-10 11:37:52,282 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-10 11:37:52,282 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-10 11:37:52,282 - db_manager - INFO - Database manager initialized successfully
2025-09-10 11:37:52,282 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-10 11:37:52,282 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-10 11:37:52,282 - db_manager - INFO - Database manager initialized successfully
2025-09-10 11:37:52,282 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-10 11:37:52,282 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-10 11:37:52,282 - db_manager - INFO - Database manager initialized successfully
2025-09-10 11:37:52,282 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-10 11:37:52,282 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-10 11:37:52,282 - db_manager - INFO - Database manager initialized successfully
2025-09-10 11:37:52,282 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-10 11:42:07,336 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-10 11:42:07,336 - db_manager - INFO - Database manager initialized successfully
2025-09-10 11:42:07,336 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-10 11:42:07,336 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-10 11:42:07,336 - db_manager - INFO - Database manager initialized successfully
2025-09-10 11:42:07,337 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-10 11:42:07,337 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-10 11:42:07,337 - db_manager - INFO - Database manager initialized successfully
2025-09-10 11:42:07,337 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-10 11:42:07,337 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-10 11:42:07,337 - db_manager - INFO - Database manager initialized successfully
2025-09-10 11:42:07,337 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-10 11:42:07,337 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-10 11:42:07,337 - db_manager - INFO - Database manager initialized successfully
2025-09-10 11:42:07,337 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-10 11:42:07,337 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-10 11:42:07,337 - db_manager - INFO - Database manager initialized successfully
2025-09-10 11:42:07,337 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-10 11:42:07,337 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-10 11:42:07,337 - db_manager - INFO - Database manager initialized successfully
2025-09-10 11:42:07,337 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-10 11:42:07,337 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-10 11:42:07,337 - db_manager - INFO - Database manager initialized successfully
2025-09-10 11:42:07,337 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-10 11:42:07,337 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-10 11:42:07,338 - db_manager - INFO - Database manager initialized successfully
2025-09-10 11:42:07,338 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-10 11:42:07,338 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-10 11:42:07,338 - db_manager - INFO - Database manager initialized successfully
2025-09-10 11:42:07,338 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-10 11:42:55,023 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-10 11:42:55,023 - db_manager - INFO - Database manager initialized successfully
2025-09-10 11:42:55,023 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-10 11:42:55,023 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-10 11:42:55,023 - db_manager - INFO - Database manager initialized successfully
2025-09-10 11:42:55,023 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-10 11:42:55,024 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-10 11:42:55,024 - db_manager - INFO - Database manager initialized successfully
2025-09-10 11:42:55,024 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-10 11:42:55,024 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-10 11:42:55,024 - db_manager - INFO - Database manager initialized successfully
2025-09-10 11:42:55,024 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-10 11:42:55,024 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-10 11:42:55,024 - db_manager - INFO - Database manager initialized successfully
2025-09-10 11:42:55,024 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-10 11:42:55,024 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-10 11:42:55,024 - db_manager - INFO - Database manager initialized successfully
2025-09-10 11:42:55,024 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-10 11:42:55,024 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-10 11:42:55,024 - db_manager - INFO - Database manager initialized successfully
2025-09-10 11:42:55,024 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-10 11:42:55,024 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-10 11:42:55,024 - db_manager - INFO - Database manager initialized successfully
2025-09-10 11:42:55,024 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-10 11:42:55,024 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-10 11:42:55,024 - db_manager - INFO - Database manager initialized successfully
2025-09-10 11:42:55,024 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-10 11:42:55,024 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-10 11:42:55,024 - db_manager - INFO - Database manager initialized successfully
2025-09-10 11:42:55,024 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-10 11:44:01,566 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-10 11:44:01,566 - db_manager - INFO - Database manager initialized successfully
2025-09-10 11:44:01,566 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-10 11:44:01,566 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-10 11:44:01,566 - db_manager - INFO - Database manager initialized successfully
2025-09-10 11:44:01,567 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-10 11:44:01,567 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-10 11:44:01,567 - db_manager - INFO - Database manager initialized successfully
2025-09-10 11:44:01,567 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-10 11:44:01,567 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-10 11:44:01,567 - db_manager - INFO - Database manager initialized successfully
2025-09-10 11:44:01,567 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-10 11:44:01,567 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-10 11:44:01,567 - db_manager - INFO - Database manager initialized successfully
2025-09-10 11:44:01,567 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-10 11:44:01,567 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-10 11:44:01,567 - db_manager - INFO - Database manager initialized successfully
2025-09-10 11:44:01,567 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-10 11:44:01,567 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-10 11:44:01,567 - db_manager - INFO - Database manager initialized successfully
2025-09-10 11:44:01,567 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-10 11:44:01,567 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-10 11:44:01,567 - db_manager - INFO - Database manager initialized successfully
2025-09-10 11:44:01,567 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-10 11:44:01,567 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-10 11:44:01,567 - db_manager - INFO - Database manager initialized successfully
2025-09-10 11:44:01,567 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-10 11:44:01,567 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-10 11:44:01,567 - db_manager - INFO - Database manager initialized successfully
2025-09-10 11:44:01,568 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-10 11:51:17,520 - db_manager - INFO - create_complainant: Creating complainant with ID: CM-20250910-KOJH-B700-B
2025-09-10 11:51:17,520 - db_manager - DEBUG - encrypted and hashed data at encrypt_and_hash_sensitive_data: {'complainant_id': 'CM-20250910-KOJH-B700-B', 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_unique_id': 'CM-20250910-KOJH-B700-B'}
2025-09-10 11:51:17,521 - db_manager - DEBUG - query_keys at generate_query_string: dict_keys(['complainant_id', 'complainant_province', 'complainant_district', 'complainant_unique_id'])
2025-09-10 11:51:17,521 - db_manager - DEBUG - Generated query: INSERT INTO complainants (complainant_id, complainant_province, complainant_district, complainant_unique_id) VALUES (%s, %s, %s, %s)
2025-09-10 11:51:17,521 - db_manager - DEBUG - len of query_keys: 4
2025-09-10 11:51:17,521 - db_manager - DEBUG - Generated query: INSERT INTO complainants (complainant_id, complainant_province, complainant_district, complainant_unique_id) VALUES (%s, %s, %s, %s)
2025-09-10 11:51:17,521 - db_manager - INFO - Connecting to database: grievance_db
2025-09-10 11:51:17,527 - db_manager - INFO - Starting database transaction
2025-09-10 11:51:17,530 - db_manager - INFO - Transaction committed successfully
2025-09-10 11:51:17,530 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-10 11:51:17,531 - db_manager - INFO - create_complainant: Successfully created complainant with ID: CM-20250910-KOJH-B700-B
2025-09-10 11:51:17,531 - db_manager - INFO - create_grievance: Creating grievance with data: {'grievance_id': 'GR-20250910-KOJH-D2E4-B', 'complainant_id': 'CM-20250910-KOJH-B700-B', 'grievance_description': 'dust everywhere in da house\nkids need to go to hospital', 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_office': None, 'source': 'bot', 'complainant_unique_id': 'CM-20250910-KOJH-B700-B'}
2025-09-10 11:51:17,531 - db_manager - INFO - create_grievance: Creating grievance with ID: GR-20250910-KOJH-D2E4-B
2025-09-10 11:51:17,531 - db_manager - INFO - create_grievance: Creating grievance with allowed fields: ['grievance_id', 'complainant_id', 'grievance_categories', 'grievance_categories_alternative', 'grievance_summary', 'grievance_description', 'grievance_claimed_amount', 'grievance_location', 'is_temporary', 'source', 'language_code', 'grievance_classification_status']
2025-09-10 11:51:17,531 - db_manager - DEBUG - query_keys at generate_query_string: dict_keys(['grievance_id', 'complainant_id', 'grievance_description', 'source'])
2025-09-10 11:51:17,531 - db_manager - DEBUG - Generated query: INSERT INTO grievances (grievance_id, complainant_id, grievance_description, source) VALUES (%s, %s, %s, %s) RETURNING grievance_id
2025-09-10 11:51:17,531 - db_manager - DEBUG - len of query_keys: 4
2025-09-10 11:51:17,531 - db_manager - DEBUG - Generated query: INSERT INTO grievances (grievance_id, complainant_id, grievance_description, source) VALUES (%s, %s, %s, %s) RETURNING grievance_id
2025-09-10 11:51:17,531 - db_manager - INFO - Connecting to database: grievance_db
2025-09-10 11:51:17,536 - db_manager - INFO - Starting database transaction
2025-09-10 11:51:17,542 - db_manager - INFO - Transaction committed successfully
2025-09-10 11:51:17,542 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-10 11:51:17,542 - db_manager - INFO - create_grievance: Successfully created grievance with ID: GR-20250910-KOJH-D2E4-B
2025-09-10 11:51:35,181 - db_manager - INFO - Connecting to database: grievance_db
2025-09-10 11:51:35,187 - db_manager - INFO - Starting database transaction
2025-09-10 11:51:35,187 - db_manager - INFO - Executing get_complainant_by_id: 
            SELECT complainant_id, complainant_unique_id, complainant_full_name,    complainant_pho...
2025-09-10 11:51:35,188 - db_manager - INFO - get_complainant_by_id completed in 0.01s. Rows: 1
2025-09-10 11:51:35,188 - db_manager - INFO - Transaction committed successfully
2025-09-10 11:51:35,188 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-10 11:51:35,189 - db_manager - INFO - Connecting to database: grievance_db
2025-09-10 11:51:35,194 - db_manager - INFO - Starting database transaction
2025-09-10 11:51:35,194 - db_manager - INFO - Executing get_grievance_by_id: 
                SELECT g.*, c.complainant_full_name, c.complainant_phone, c.complainant_email,
    ...
2025-09-10 11:51:35,195 - db_manager - INFO - get_grievance_by_id completed in 0.01s. Rows: 1
2025-09-10 11:51:35,196 - db_manager - INFO - Transaction committed successfully
2025-09-10 11:51:35,196 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-10 11:51:35,196 - db_manager - DEBUG - get_grievance_by_id: grievance_id: {'grievance_id': 'GR-20250910-KOJH-D2E4-B', 'complainant_id': 'CM-20250910-KOJH-B700-B', 'grievance_categories': '{"Environmental - Air Pollution","Safety - Road Safety Provisions"}', 'grievance_categories_alternative': '{"Environmental - Noise Pollution","Relocation Issues - Poor Housing Quality Of The Resettlement Site","Environmental - Drainage And Sewage Management"}', 'grievance_summary': 'Dust from the roadworks is entering the house and causing children to need hospital care.', 'grievance_description': 'dust everywhere in da house\nkids need to go to hospital', 'grievance_claimed_amount': None, 'grievance_location': None, 'language_code': 'en', 'grievance_classification_status': 'pending', 'grievance_creation_date': datetime.datetime(2025, 9, 10, 11, 51, 17, 537024, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'grievance_modification_date': datetime.datetime(2025, 9, 10, 11, 51, 20, 603864, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'is_temporary': True, 'source': 'bot', 'complainant_full_name': None, 'complainant_phone': None, 'complainant_email': None, 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_municipality': None, 'complainant_ward': None, 'complainant_village': None, 'complainant_address': None}, results: [{'grievance_id': 'GR-20250910-KOJH-D2E4-B', 'complainant_id': 'CM-20250910-KOJH-B700-B', 'grievance_categories': '{"Environmental - Air Pollution","Safety - Road Safety Provisions"}', 'grievance_categories_alternative': '{"Environmental - Noise Pollution","Relocation Issues - Poor Housing Quality Of The Resettlement Site","Environmental - Drainage And Sewage Management"}', 'grievance_summary': 'Dust from the roadworks is entering the house and causing children to need hospital care.', 'grievance_description': 'dust everywhere in da house\nkids need to go to hospital', 'grievance_claimed_amount': None, 'grievance_location': None, 'language_code': 'en', 'grievance_classification_status': 'pending', 'grievance_creation_date': datetime.datetime(2025, 9, 10, 11, 51, 17, 537024, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'grievance_modification_date': datetime.datetime(2025, 9, 10, 11, 51, 20, 603864, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'is_temporary': True, 'source': 'bot', 'complainant_full_name': None, 'complainant_phone': None, 'complainant_email': None, 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_municipality': None, 'complainant_ward': None, 'complainant_village': None, 'complainant_address': None}]
2025-09-10 11:51:35,196 - db_manager - INFO - update_complainant: Updating complainant with ID: CM-20250910-KOJH-B700-B
2025-09-10 11:51:35,196 - db_manager - INFO - Connecting to database: grievance_db
2025-09-10 11:51:35,201 - db_manager - INFO - Starting database transaction
2025-09-10 11:51:35,202 - db_manager - INFO - Executing encrypt_field: SELECT encode(pgp_sym_encrypt(%s, %s), 'hex') AS encrypted...
2025-09-10 11:51:35,205 - db_manager - INFO - encrypt_field completed in 0.01s. Rows: 1
2025-09-10 11:51:35,206 - db_manager - INFO - Transaction committed successfully
2025-09-10 11:51:35,206 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-10 11:51:35,206 - db_manager - DEBUG - encrypted phone number Not provided at encrypt_complainant_data: c30d040703028895c3d8ef4ab46664d23d0123c36529f77febfc4fb4f9014eb7ef330bcbda6bc7b07a395ff3aeee033c1ab86468a65e7d3d9523909f1a88d14cd02de7ce1f5b1d1dfdb8ed1d7ea7
2025-09-10 11:51:35,206 - db_manager - INFO - Connecting to database: grievance_db
2025-09-10 11:51:35,211 - db_manager - INFO - Starting database transaction
2025-09-10 11:51:35,211 - db_manager - INFO - Executing encrypt_field: SELECT encode(pgp_sym_encrypt(%s, %s), 'hex') AS encrypted...
2025-09-10 11:51:35,212 - db_manager - INFO - encrypt_field completed in 0.01s. Rows: 1
2025-09-10 11:51:35,212 - db_manager - INFO - Transaction committed successfully
2025-09-10 11:51:35,212 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-10 11:51:35,212 - db_manager - INFO - Connecting to database: grievance_db
2025-09-10 11:51:35,218 - db_manager - INFO - Starting database transaction
2025-09-10 11:51:35,218 - db_manager - INFO - Executing encrypt_field: SELECT encode(pgp_sym_encrypt(%s, %s), 'hex') AS encrypted...
2025-09-10 11:51:35,219 - db_manager - INFO - encrypt_field completed in 0.01s. Rows: 1
2025-09-10 11:51:35,219 - db_manager - INFO - Transaction committed successfully
2025-09-10 11:51:35,219 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-10 11:51:35,219 - db_manager - DEBUG - phone number Not provided hashed to d83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f at hash_sensitive_data
2025-09-10 11:51:35,219 - db_manager - DEBUG - encrypted and hashed data at encrypt_and_hash_sensitive_data: {'complainant_full_name': 'c30d040703021eb2bf1ad398f3bb7ed23d014a316757ecd8ffd4628b94fd99e1891036c7ad5932b0810d534f2a38a05f4408ab1f6e92d3ca3de32e3eb2fffbe54fed28dbd00cc9794c178d22a7c5', 'complainant_phone': 'c30d040703028895c3d8ef4ab46664d23d0123c36529f77febfc4fb4f9014eb7ef330bcbda6bc7b07a395ff3aeee033c1ab86468a65e7d3d9523909f1a88d14cd02de7ce1f5b1d1dfdb8ed1d7ea7', 'complainant_email': 'c30d040703028f9bf36b577110f462d23d018d0976be1b0b47e244c2a95bed8cd650e9d10176540c539da079c457d7ba5e9f94db98fcdaaf8c9c7b6a1220d788cb6e63c2123598d6a71bdec01f88', 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_phone_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'complainant_full_name_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'complainant_email_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f'}
2025-09-10 11:51:35,219 - db_manager - DEBUG - encrypted_data at update_complainant: {'complainant_full_name': 'c30d040703021eb2bf1ad398f3bb7ed23d014a316757ecd8ffd4628b94fd99e1891036c7ad5932b0810d534f2a38a05f4408ab1f6e92d3ca3de32e3eb2fffbe54fed28dbd00cc9794c178d22a7c5', 'complainant_phone': 'c30d040703028895c3d8ef4ab46664d23d0123c36529f77febfc4fb4f9014eb7ef330bcbda6bc7b07a395ff3aeee033c1ab86468a65e7d3d9523909f1a88d14cd02de7ce1f5b1d1dfdb8ed1d7ea7', 'complainant_email': 'c30d040703028f9bf36b577110f462d23d018d0976be1b0b47e244c2a95bed8cd650e9d10176540c539da079c457d7ba5e9f94db98fcdaaf8c9c7b6a1220d788cb6e63c2123598d6a71bdec01f88', 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_phone_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'complainant_full_name_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'complainant_email_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f'}
2025-09-10 11:51:35,219 - db_manager - DEBUG - execute_update values: ('c30d040703021eb2bf1ad398f3bb7ed23d014a316757ecd8ffd4628b94fd99e1891036c7ad5932b0810d534f2a38a05f4408ab1f6e92d3ca3de32e3eb2fffbe54fed28dbd00cc9794c178d22a7c5', 'c30d040703028895c3d8ef4ab46664d23d0123c36529f77febfc4fb4f9014eb7ef330bcbda6bc7b07a395ff3aeee033c1ab86468a65e7d3d9523909f1a88d14cd02de7ce1f5b1d1dfdb8ed1d7ea7', 'c30d040703028f9bf36b577110f462d23d018d0976be1b0b47e244c2a95bed8cd650e9d10176540c539da079c457d7ba5e9f94db98fcdaaf8c9c7b6a1220d788cb6e63c2123598d6a71bdec01f88', 'Koshi', 'Jhapa', 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'CM-20250910-KOJH-B700-B')
2025-09-10 11:51:35,219 - db_manager - DEBUG - execute_update query: UPDATE complainants SET complainant_full_name = %s, complainant_phone = %s, complainant_email = %s, complainant_province = %s, complainant_district = %s, complainant_phone_hash = %s, complainant_full_name_hash = %s, complainant_email_hash = %s WHERE complainant_id = %s
2025-09-10 11:51:35,219 - db_manager - INFO - Connecting to database: grievance_db
2025-09-10 11:51:35,224 - db_manager - INFO - Starting database transaction
2025-09-10 11:51:35,224 - db_manager - INFO - execute_update: Executing update query: UPDATE complainants SET complainant_full_name = %s, complainant_phone = %s, complainant_email = %s, ...
2025-09-10 11:51:35,225 - db_manager - INFO - execute_update: Update completed in 0.01s. Affected rows: 1
2025-09-10 11:51:35,227 - db_manager - INFO - Transaction committed successfully
2025-09-10 11:51:35,227 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-10 11:51:35,227 - db_manager - INFO - Complainant updated in db: CM-20250910-KOJH-B700-B
2025-09-10 11:51:35,227 - db_manager - INFO - update_grievance: Updating grievance with ID: GR-20250910-KOJH-D2E4-B
2025-09-10 11:51:35,227 - db_manager - DEBUG - execute_update values: ('dust everywhere in da house\nkids need to go to hospital', 'GR-20250910-KOJH-D2E4-B')
2025-09-10 11:51:35,227 - db_manager - DEBUG - execute_update query: 
                    UPDATE grievances 
                    SET grievance_description = %s, grievance_modification_date = CURRENT_TIMESTAMP
                    WHERE grievance_id = %s
                    RETURNING grievance_id
                
2025-09-10 11:51:35,227 - db_manager - INFO - Connecting to database: grievance_db
2025-09-10 11:51:35,232 - db_manager - INFO - Starting database transaction
2025-09-10 11:51:35,232 - db_manager - INFO - execute_update: Executing update query: 
                    UPDATE grievances 
                    SET grievance_description = %s, grievanc...
2025-09-10 11:51:35,233 - db_manager - INFO - execute_update: Update completed in 0.01s. Affected rows: 1
2025-09-10 11:51:35,235 - db_manager - INFO - Transaction committed successfully
2025-09-10 11:51:35,236 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-10 11:51:35,236 - db_manager - INFO - update_grievance: Updated grievance with ID: GR-20250910-KOJH-D2E4-B, rows affected: 1
2025-09-10 11:51:35,236 - db_manager - INFO - Grievance updated in db: GR-20250910-KOJH-D2E4-B
2025-09-10 11:51:35,236 - db_manager - INFO - Connecting to database: grievance_db
2025-09-10 11:51:35,240 - db_manager - INFO - Starting database transaction
2025-09-10 11:51:35,240 - db_manager - INFO - Executing get_grievance_files: 
            SELECT file_id, file_name, file_type, file_size, upload_timestamp
            FROM file...
2025-09-10 11:51:35,242 - db_manager - INFO - get_grievance_files completed in 0.01s. Rows: 0
2025-09-10 11:51:35,242 - db_manager - INFO - Transaction committed successfully
2025-09-10 11:51:35,242 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-10 11:51:35,242 - db_manager - INFO - Connecting to database: grievance_db
2025-09-10 11:51:35,246 - db_manager - INFO - Starting database transaction
2025-09-10 11:51:35,246 - db_manager - INFO - Executing get_grievance_files: 
            SELECT file_id, file_name, file_type, file_size, upload_timestamp
            FROM file...
2025-09-10 11:51:35,247 - db_manager - INFO - get_grievance_files completed in 0.01s. Rows: 0
2025-09-10 11:51:35,248 - db_manager - INFO - Transaction committed successfully
2025-09-10 11:51:35,248 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-10 11:51:35,293 - db_manager - INFO - Connecting to database: grievance_db
2025-09-10 11:51:35,300 - db_manager - INFO - Starting database transaction
2025-09-10 11:51:35,300 - db_manager - INFO - Executing get_grievance_by_id: 
                SELECT g.*, c.complainant_full_name, c.complainant_phone, c.complainant_email,
    ...
2025-09-10 11:51:35,301 - db_manager - INFO - get_grievance_by_id completed in 0.01s. Rows: 1
2025-09-10 11:51:35,302 - db_manager - INFO - Transaction committed successfully
2025-09-10 11:51:35,302 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-10 11:51:35,302 - db_manager - DEBUG - get_grievance_by_id: grievance_id: {'grievance_id': 'GR-20250910-KOJH-D2E4-B', 'complainant_id': 'CM-20250910-KOJH-B700-B', 'grievance_categories': '{"Environmental - Air Pollution","Safety - Road Safety Provisions"}', 'grievance_categories_alternative': '{"Environmental - Noise Pollution","Relocation Issues - Poor Housing Quality Of The Resettlement Site","Environmental - Drainage And Sewage Management"}', 'grievance_summary': 'Dust from the roadworks is entering the house and causing children to need hospital care.', 'grievance_description': 'dust everywhere in da house\nkids need to go to hospital', 'grievance_claimed_amount': None, 'grievance_location': None, 'language_code': 'en', 'grievance_classification_status': 'pending', 'grievance_creation_date': datetime.datetime(2025, 9, 10, 11, 51, 17, 537024, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'grievance_modification_date': datetime.datetime(2025, 9, 10, 11, 51, 35, 232921, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'is_temporary': True, 'source': 'bot', 'complainant_full_name': 'c30d040703021eb2bf1ad398f3bb7ed23d014a316757ecd8ffd4628b94fd99e1891036c7ad5932b0810d534f2a38a05f4408ab1f6e92d3ca3de32e3eb2fffbe54fed28dbd00cc9794c178d22a7c5', 'complainant_phone': 'c30d040703028895c3d8ef4ab46664d23d0123c36529f77febfc4fb4f9014eb7ef330bcbda6bc7b07a395ff3aeee033c1ab86468a65e7d3d9523909f1a88d14cd02de7ce1f5b1d1dfdb8ed1d7ea7', 'complainant_email': 'c30d040703028f9bf36b577110f462d23d018d0976be1b0b47e244c2a95bed8cd650e9d10176540c539da079c457d7ba5e9f94db98fcdaaf8c9c7b6a1220d788cb6e63c2123598d6a71bdec01f88', 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_municipality': None, 'complainant_ward': None, 'complainant_village': None, 'complainant_address': None}, results: [{'grievance_id': 'GR-20250910-KOJH-D2E4-B', 'complainant_id': 'CM-20250910-KOJH-B700-B', 'grievance_categories': '{"Environmental - Air Pollution","Safety - Road Safety Provisions"}', 'grievance_categories_alternative': '{"Environmental - Noise Pollution","Relocation Issues - Poor Housing Quality Of The Resettlement Site","Environmental - Drainage And Sewage Management"}', 'grievance_summary': 'Dust from the roadworks is entering the house and causing children to need hospital care.', 'grievance_description': 'dust everywhere in da house\nkids need to go to hospital', 'grievance_claimed_amount': None, 'grievance_location': None, 'language_code': 'en', 'grievance_classification_status': 'pending', 'grievance_creation_date': datetime.datetime(2025, 9, 10, 11, 51, 17, 537024, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'grievance_modification_date': datetime.datetime(2025, 9, 10, 11, 51, 35, 232921, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'is_temporary': True, 'source': 'bot', 'complainant_full_name': 'c30d040703021eb2bf1ad398f3bb7ed23d014a316757ecd8ffd4628b94fd99e1891036c7ad5932b0810d534f2a38a05f4408ab1f6e92d3ca3de32e3eb2fffbe54fed28dbd00cc9794c178d22a7c5', 'complainant_phone': 'c30d040703028895c3d8ef4ab46664d23d0123c36529f77febfc4fb4f9014eb7ef330bcbda6bc7b07a395ff3aeee033c1ab86468a65e7d3d9523909f1a88d14cd02de7ce1f5b1d1dfdb8ed1d7ea7', 'complainant_email': 'c30d040703028f9bf36b577110f462d23d018d0976be1b0b47e244c2a95bed8cd650e9d10176540c539da079c457d7ba5e9f94db98fcdaaf8c9c7b6a1220d788cb6e63c2123598d6a71bdec01f88', 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_municipality': None, 'complainant_ward': None, 'complainant_village': None, 'complainant_address': None}]
2025-09-10 12:05:21,098 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-10 12:05:21,098 - db_manager - INFO - Database manager initialized successfully
2025-09-10 12:05:21,098 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-10 12:05:21,098 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-10 12:05:21,098 - db_manager - INFO - Database manager initialized successfully
2025-09-10 12:05:21,098 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-10 12:05:21,098 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-10 12:05:21,098 - db_manager - INFO - Database manager initialized successfully
2025-09-10 12:05:21,098 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-10 12:05:21,099 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-10 12:05:21,099 - db_manager - INFO - Database manager initialized successfully
2025-09-10 12:05:21,099 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-10 12:05:21,099 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-10 12:05:21,099 - db_manager - INFO - Database manager initialized successfully
2025-09-10 12:05:21,099 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-10 12:05:21,099 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-10 12:05:21,099 - db_manager - INFO - Database manager initialized successfully
2025-09-10 12:05:21,099 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-10 12:05:21,099 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-10 12:05:21,099 - db_manager - INFO - Database manager initialized successfully
2025-09-10 12:05:21,099 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-10 12:05:21,099 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-10 12:05:21,099 - db_manager - INFO - Database manager initialized successfully
2025-09-10 12:05:21,099 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-10 12:05:21,099 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-10 12:05:21,099 - db_manager - INFO - Database manager initialized successfully
2025-09-10 12:05:21,099 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-10 12:05:21,099 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-10 12:05:21,099 - db_manager - INFO - Database manager initialized successfully
2025-09-10 12:05:21,099 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-10 12:06:36,265 - db_manager - INFO - create_complainant: Creating complainant with ID: CM-20250910-KOJH-CD36-B
2025-09-10 12:06:36,266 - db_manager - DEBUG - encrypted and hashed data at encrypt_and_hash_sensitive_data: {'complainant_id': 'CM-20250910-KOJH-CD36-B', 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_unique_id': 'CM-20250910-KOJH-CD36-B'}
2025-09-10 12:06:36,266 - db_manager - DEBUG - query_keys at generate_query_string: dict_keys(['complainant_id', 'complainant_province', 'complainant_district', 'complainant_unique_id'])
2025-09-10 12:06:36,266 - db_manager - DEBUG - Generated query: INSERT INTO complainants (complainant_id, complainant_province, complainant_district, complainant_unique_id) VALUES (%s, %s, %s, %s)
2025-09-10 12:06:36,266 - db_manager - DEBUG - len of query_keys: 4
2025-09-10 12:06:36,266 - db_manager - DEBUG - Generated query: INSERT INTO complainants (complainant_id, complainant_province, complainant_district, complainant_unique_id) VALUES (%s, %s, %s, %s)
2025-09-10 12:06:36,266 - db_manager - INFO - Connecting to database: grievance_db
2025-09-10 12:06:36,275 - db_manager - INFO - Starting database transaction
2025-09-10 12:06:36,278 - db_manager - INFO - Transaction committed successfully
2025-09-10 12:06:36,278 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-10 12:06:36,278 - db_manager - INFO - create_complainant: Successfully created complainant with ID: CM-20250910-KOJH-CD36-B
2025-09-10 12:06:36,278 - db_manager - INFO - create_grievance: Creating grievance with data: {'grievance_id': 'GR-20250910-KOJH-5B90-B', 'complainant_id': 'CM-20250910-KOJH-CD36-B', 'grievance_description': 'dust everywhere in my house\nkids are coughing\nI need to go to the hospital', 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_office': None, 'source': 'bot', 'complainant_unique_id': 'CM-20250910-KOJH-CD36-B'}
2025-09-10 12:06:36,278 - db_manager - INFO - create_grievance: Creating grievance with ID: GR-20250910-KOJH-5B90-B
2025-09-10 12:06:36,278 - db_manager - INFO - create_grievance: Creating grievance with allowed fields: ['grievance_id', 'complainant_id', 'grievance_categories', 'grievance_categories_alternative', 'grievance_summary', 'grievance_description', 'grievance_claimed_amount', 'grievance_location', 'is_temporary', 'source', 'language_code', 'grievance_classification_status']
2025-09-10 12:06:36,278 - db_manager - DEBUG - query_keys at generate_query_string: dict_keys(['grievance_id', 'complainant_id', 'grievance_description', 'source'])
2025-09-10 12:06:36,278 - db_manager - DEBUG - Generated query: INSERT INTO grievances (grievance_id, complainant_id, grievance_description, source) VALUES (%s, %s, %s, %s) RETURNING grievance_id
2025-09-10 12:06:36,279 - db_manager - DEBUG - len of query_keys: 4
2025-09-10 12:06:36,279 - db_manager - DEBUG - Generated query: INSERT INTO grievances (grievance_id, complainant_id, grievance_description, source) VALUES (%s, %s, %s, %s) RETURNING grievance_id
2025-09-10 12:06:36,279 - db_manager - INFO - Connecting to database: grievance_db
2025-09-10 12:06:36,284 - db_manager - INFO - Starting database transaction
2025-09-10 12:06:36,288 - db_manager - INFO - Transaction committed successfully
2025-09-10 12:06:36,288 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-10 12:06:36,289 - db_manager - INFO - create_grievance: Successfully created grievance with ID: GR-20250910-KOJH-5B90-B
2025-09-10 12:06:54,082 - db_manager - INFO - Connecting to database: grievance_db
2025-09-10 12:06:54,089 - db_manager - INFO - Starting database transaction
2025-09-10 12:06:54,089 - db_manager - INFO - Executing get_complainant_by_id: 
            SELECT complainant_id, complainant_unique_id, complainant_full_name,    complainant_pho...
2025-09-10 12:06:54,090 - db_manager - INFO - get_complainant_by_id completed in 0.01s. Rows: 0
2025-09-10 12:06:54,091 - db_manager - INFO - Transaction committed successfully
2025-09-10 12:06:54,091 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-10 12:06:54,091 - db_manager - ERROR - Error - submitting_grievance_to_db: complainant_id not found in db: Not provided
2025-09-10 12:06:54,091 - db_manager - INFO - Connecting to database: grievance_db
2025-09-10 12:06:54,098 - db_manager - INFO - Starting database transaction
2025-09-10 12:06:54,099 - db_manager - INFO - Executing get_grievance_files: 
            SELECT file_id, file_name, file_type, file_size, upload_timestamp
            FROM file...
2025-09-10 12:06:54,100 - db_manager - INFO - get_grievance_files completed in 0.01s. Rows: 0
2025-09-10 12:06:54,101 - db_manager - INFO - Transaction committed successfully
2025-09-10 12:06:54,101 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-10 12:06:54,101 - db_manager - INFO - Connecting to database: grievance_db
2025-09-10 12:06:54,109 - db_manager - INFO - Starting database transaction
2025-09-10 12:06:54,109 - db_manager - INFO - Executing get_grievance_files: 
            SELECT file_id, file_name, file_type, file_size, upload_timestamp
            FROM file...
2025-09-10 12:06:54,111 - db_manager - INFO - get_grievance_files completed in 0.01s. Rows: 0
2025-09-10 12:06:54,111 - db_manager - INFO - Transaction committed successfully
2025-09-10 12:06:54,111 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-10 12:06:54,159 - db_manager - INFO - Connecting to database: grievance_db
2025-09-10 12:06:54,166 - db_manager - INFO - Starting database transaction
2025-09-10 12:06:54,166 - db_manager - INFO - Executing get_grievance_by_id: 
                SELECT g.*, c.complainant_full_name, c.complainant_phone, c.complainant_email,
    ...
2025-09-10 12:06:54,168 - db_manager - INFO - get_grievance_by_id completed in 0.01s. Rows: 0
2025-09-10 12:06:54,168 - db_manager - INFO - Transaction committed successfully
2025-09-10 12:06:54,169 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-10 12:06:54,169 - db_manager - ERROR - Error retrieving grievance by ID: list index out of range
2025-09-10 12:06:54,258 - db_manager - ERROR - Error submitting grievance to db: 'NoneType' object has no attribute 'endswith'
2025-09-10 12:06:54,261 - db_manager - ERROR - Traceback: Traceback (most recent call last):
  File "/home/philg/projects/nepal_chatbot/backend/services/database_services/postgres_services.py", line 185, in update_grievance
    source = self.get_grievance_or_complainant_source(grievance_id)
  File "/home/philg/projects/nepal_chatbot/backend/services/database_services/base_manager.py", line 306, in get_grievance_or_complainant_source
    if id.endswith('-B'):
AttributeError: 'NoneType' object has no attribute 'endswith'

2025-09-10 12:06:54,305 - db_manager - INFO - Connecting to database: grievance_db
2025-09-10 12:06:54,310 - db_manager - INFO - Starting database transaction
2025-09-10 12:06:54,310 - db_manager - INFO - Executing get_grievance_files: 
            SELECT file_id, file_name, file_type, file_size, upload_timestamp
            FROM file...
2025-09-10 12:06:54,311 - db_manager - INFO - get_grievance_files completed in 0.01s. Rows: 0
2025-09-10 12:06:54,311 - db_manager - INFO - Transaction committed successfully
2025-09-10 12:06:54,311 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-10 12:21:10,389 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-10 12:21:10,389 - db_manager - INFO - Database manager initialized successfully
2025-09-10 12:21:10,389 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-10 12:21:10,389 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-10 12:21:10,389 - db_manager - INFO - Database manager initialized successfully
2025-09-10 12:21:10,389 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-10 12:21:10,390 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-10 12:21:10,390 - db_manager - INFO - Database manager initialized successfully
2025-09-10 12:21:10,390 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-10 12:21:10,390 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-10 12:21:10,390 - db_manager - INFO - Database manager initialized successfully
2025-09-10 12:21:10,390 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-10 12:21:10,390 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-10 12:21:10,390 - db_manager - INFO - Database manager initialized successfully
2025-09-10 12:21:10,390 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-10 12:21:10,390 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-10 12:21:10,390 - db_manager - INFO - Database manager initialized successfully
2025-09-10 12:21:10,390 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-10 12:21:10,390 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-10 12:21:10,390 - db_manager - INFO - Database manager initialized successfully
2025-09-10 12:21:10,390 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-10 12:21:10,390 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-10 12:21:10,390 - db_manager - INFO - Database manager initialized successfully
2025-09-10 12:21:10,390 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-10 12:21:10,390 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-10 12:21:10,390 - db_manager - INFO - Database manager initialized successfully
2025-09-10 12:21:10,390 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-10 12:21:10,390 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-10 12:21:10,390 - db_manager - INFO - Database manager initialized successfully
2025-09-10 12:21:10,390 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-10 13:40:10,378 - db_manager - INFO - create_complainant: Creating complainant with ID: CM-20250910-KOJH-4D7E-B
2025-09-10 13:40:10,379 - db_manager - DEBUG - encrypted and hashed data at encrypt_and_hash_sensitive_data: {'complainant_id': 'CM-20250910-KOJH-4D7E-B', 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_unique_id': 'CM-20250910-KOJH-4D7E-B'}
2025-09-10 13:40:10,379 - db_manager - DEBUG - query_keys at generate_query_string: dict_keys(['complainant_id', 'complainant_province', 'complainant_district', 'complainant_unique_id'])
2025-09-10 13:40:10,379 - db_manager - DEBUG - Generated query: INSERT INTO complainants (complainant_id, complainant_province, complainant_district, complainant_unique_id) VALUES (%s, %s, %s, %s)
2025-09-10 13:40:10,379 - db_manager - DEBUG - len of query_keys: 4
2025-09-10 13:40:10,379 - db_manager - DEBUG - Generated query: INSERT INTO complainants (complainant_id, complainant_province, complainant_district, complainant_unique_id) VALUES (%s, %s, %s, %s)
2025-09-10 13:40:10,379 - db_manager - INFO - Connecting to database: grievance_db
2025-09-10 13:40:10,389 - db_manager - INFO - Starting database transaction
2025-09-10 13:40:10,391 - db_manager - INFO - Transaction committed successfully
2025-09-10 13:40:10,391 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-10 13:40:10,392 - db_manager - INFO - create_complainant: Successfully created complainant with ID: CM-20250910-KOJH-4D7E-B
2025-09-10 13:40:10,392 - db_manager - INFO - create_grievance: Creating grievance with data: {'grievance_id': 'GR-20250910-KOJH-3805-B', 'complainant_id': 'CM-20250910-KOJH-4D7E-B', 'grievance_description': 'there is dust everywhere in da house\ni meed to bring kids to hospital tehy sick', 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_office': None, 'source': 'bot', 'complainant_unique_id': 'CM-20250910-KOJH-4D7E-B'}
2025-09-10 13:40:10,392 - db_manager - INFO - create_grievance: Creating grievance with ID: GR-20250910-KOJH-3805-B
2025-09-10 13:40:10,392 - db_manager - INFO - create_grievance: Creating grievance with allowed fields: ['grievance_id', 'complainant_id', 'grievance_categories', 'grievance_categories_alternative', 'grievance_summary', 'grievance_description', 'grievance_claimed_amount', 'grievance_location', 'is_temporary', 'source', 'language_code', 'grievance_classification_status']
2025-09-10 13:40:10,392 - db_manager - DEBUG - query_keys at generate_query_string: dict_keys(['grievance_id', 'complainant_id', 'grievance_description', 'source'])
2025-09-10 13:40:10,392 - db_manager - DEBUG - Generated query: INSERT INTO grievances (grievance_id, complainant_id, grievance_description, source) VALUES (%s, %s, %s, %s) RETURNING grievance_id
2025-09-10 13:40:10,392 - db_manager - DEBUG - len of query_keys: 4
2025-09-10 13:40:10,392 - db_manager - DEBUG - Generated query: INSERT INTO grievances (grievance_id, complainant_id, grievance_description, source) VALUES (%s, %s, %s, %s) RETURNING grievance_id
2025-09-10 13:40:10,392 - db_manager - INFO - Connecting to database: grievance_db
2025-09-10 13:40:10,398 - db_manager - INFO - Starting database transaction
2025-09-10 13:40:10,402 - db_manager - INFO - Transaction committed successfully
2025-09-10 13:40:10,402 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-10 13:40:10,402 - db_manager - INFO - create_grievance: Successfully created grievance with ID: GR-20250910-KOJH-3805-B
2025-09-10 13:40:35,289 - db_manager - INFO - Connecting to database: grievance_db
2025-09-10 13:40:35,295 - db_manager - INFO - Starting database transaction
2025-09-10 13:40:35,295 - db_manager - INFO - Executing get_complainant_by_id: 
            SELECT complainant_id, complainant_unique_id, complainant_full_name,    complainant_pho...
2025-09-10 13:40:35,296 - db_manager - INFO - get_complainant_by_id completed in 0.01s. Rows: 1
2025-09-10 13:40:35,296 - db_manager - INFO - Transaction committed successfully
2025-09-10 13:40:35,296 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-10 13:40:35,296 - db_manager - INFO - Connecting to database: grievance_db
2025-09-10 13:40:35,301 - db_manager - INFO - Starting database transaction
2025-09-10 13:40:35,301 - db_manager - INFO - Executing get_grievance_by_id: 
                SELECT g.*, c.complainant_full_name, c.complainant_phone, c.complainant_email,
    ...
2025-09-10 13:40:35,302 - db_manager - INFO - get_grievance_by_id completed in 0.01s. Rows: 1
2025-09-10 13:40:35,303 - db_manager - INFO - Transaction committed successfully
2025-09-10 13:40:35,303 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-10 13:40:35,303 - db_manager - DEBUG - get_grievance_by_id: grievance_id: {'grievance_id': 'GR-20250910-KOJH-3805-B', 'complainant_id': 'CM-20250910-KOJH-4D7E-B', 'grievance_categories': '{"Environmental - Air Pollution"}', 'grievance_categories_alternative': '{"Safety - Road Safety Provisions","Environmental - Noise Pollution","Environmental - Drainage And Sewage Management"}', 'grievance_summary': 'The house is full of dust causing sickness in children', 'grievance_description': 'there is dust everywhere in da house\ni meed to bring kids to hospital tehy sick', 'grievance_claimed_amount': None, 'grievance_location': None, 'language_code': 'en', 'grievance_classification_status': 'pending', 'grievance_creation_date': datetime.datetime(2025, 9, 10, 13, 40, 10, 398291, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'grievance_modification_date': datetime.datetime(2025, 9, 10, 13, 40, 14, 616981, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'is_temporary': True, 'source': 'bot', 'complainant_full_name': None, 'complainant_phone': None, 'complainant_email': None, 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_municipality': None, 'complainant_ward': None, 'complainant_village': None, 'complainant_address': None}, results: [{'grievance_id': 'GR-20250910-KOJH-3805-B', 'complainant_id': 'CM-20250910-KOJH-4D7E-B', 'grievance_categories': '{"Environmental - Air Pollution"}', 'grievance_categories_alternative': '{"Safety - Road Safety Provisions","Environmental - Noise Pollution","Environmental - Drainage And Sewage Management"}', 'grievance_summary': 'The house is full of dust causing sickness in children', 'grievance_description': 'there is dust everywhere in da house\ni meed to bring kids to hospital tehy sick', 'grievance_claimed_amount': None, 'grievance_location': None, 'language_code': 'en', 'grievance_classification_status': 'pending', 'grievance_creation_date': datetime.datetime(2025, 9, 10, 13, 40, 10, 398291, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'grievance_modification_date': datetime.datetime(2025, 9, 10, 13, 40, 14, 616981, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'is_temporary': True, 'source': 'bot', 'complainant_full_name': None, 'complainant_phone': None, 'complainant_email': None, 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_municipality': None, 'complainant_ward': None, 'complainant_village': None, 'complainant_address': None}]
2025-09-10 13:40:35,303 - db_manager - INFO - update_complainant: Updating complainant with ID: CM-20250910-KOJH-4D7E-B
2025-09-10 13:40:35,303 - db_manager - INFO - Connecting to database: grievance_db
2025-09-10 13:40:35,308 - db_manager - INFO - Starting database transaction
2025-09-10 13:40:35,308 - db_manager - INFO - Executing encrypt_field: SELECT encode(pgp_sym_encrypt(%s, %s), 'hex') AS encrypted...
2025-09-10 13:40:35,314 - db_manager - INFO - encrypt_field completed in 0.01s. Rows: 1
2025-09-10 13:40:35,314 - db_manager - INFO - Transaction committed successfully
2025-09-10 13:40:35,314 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-10 13:40:35,314 - db_manager - DEBUG - encrypted phone number +9779876543210 at encrypt_complainant_data: c30d04070302cb8eb5741f48ad2962d23f019b749ec7505ab1e96a99306e6e3beace908ba0859a1fca55da36748e8d89f5ee952f1e54b7332a1d8e238bb635e26c1d6d35bb90ea811204e0c8c157ec8d
2025-09-10 13:40:35,314 - db_manager - INFO - Connecting to database: grievance_db
2025-09-10 13:40:35,319 - db_manager - INFO - Starting database transaction
2025-09-10 13:40:35,320 - db_manager - INFO - Executing encrypt_field: SELECT encode(pgp_sym_encrypt(%s, %s), 'hex') AS encrypted...
2025-09-10 13:40:35,321 - db_manager - INFO - encrypt_field completed in 0.01s. Rows: 1
2025-09-10 13:40:35,321 - db_manager - INFO - Transaction committed successfully
2025-09-10 13:40:35,321 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-10 13:40:35,321 - db_manager - INFO - Connecting to database: grievance_db
2025-09-10 13:40:35,326 - db_manager - INFO - Starting database transaction
2025-09-10 13:40:35,327 - db_manager - INFO - Executing encrypt_field: SELECT encode(pgp_sym_encrypt(%s, %s), 'hex') AS encrypted...
2025-09-10 13:40:35,328 - db_manager - INFO - encrypt_field completed in 0.01s. Rows: 1
2025-09-10 13:40:35,328 - db_manager - INFO - Transaction committed successfully
2025-09-10 13:40:35,328 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-10 13:40:35,328 - db_manager - DEBUG - phone number +9779876543210 hashed to c95ee4a714418be9379a77482c9a8b2003400429703eabebc8d6d971e864f8e0 at hash_sensitive_data
2025-09-10 13:40:35,328 - db_manager - DEBUG - encrypted and hashed data at encrypt_and_hash_sensitive_data: {'complainant_full_name': 'c30d040703027aef9dce7e9506877cd23d01d4f0b8877567cd1d80000a324b22cf38e15d547567e0e262de42b5005651669407ce8046a4e702220ba2bb5735b61fd609582849ccaf7f80c64508ec', 'complainant_phone': 'c30d04070302cb8eb5741f48ad2962d23f019b749ec7505ab1e96a99306e6e3beace908ba0859a1fca55da36748e8d89f5ee952f1e54b7332a1d8e238bb635e26c1d6d35bb90ea811204e0c8c157ec8d', 'complainant_email': 'c30d040703027059990b735fed366fd23d018793e03349a5076ae1865999a7473cc13de902a2bd350e5b29670b26cba7aea4480efb8a84c93c4f53d635216c42800debe61df2aa471138e50e896e', 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_phone_hash': 'c95ee4a714418be9379a77482c9a8b2003400429703eabebc8d6d971e864f8e0', 'complainant_email_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'complainant_full_name_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f'}
2025-09-10 13:40:35,329 - db_manager - DEBUG - encrypted_data at update_complainant: {'complainant_full_name': 'c30d040703027aef9dce7e9506877cd23d01d4f0b8877567cd1d80000a324b22cf38e15d547567e0e262de42b5005651669407ce8046a4e702220ba2bb5735b61fd609582849ccaf7f80c64508ec', 'complainant_phone': 'c30d04070302cb8eb5741f48ad2962d23f019b749ec7505ab1e96a99306e6e3beace908ba0859a1fca55da36748e8d89f5ee952f1e54b7332a1d8e238bb635e26c1d6d35bb90ea811204e0c8c157ec8d', 'complainant_email': 'c30d040703027059990b735fed366fd23d018793e03349a5076ae1865999a7473cc13de902a2bd350e5b29670b26cba7aea4480efb8a84c93c4f53d635216c42800debe61df2aa471138e50e896e', 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_phone_hash': 'c95ee4a714418be9379a77482c9a8b2003400429703eabebc8d6d971e864f8e0', 'complainant_email_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'complainant_full_name_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f'}
2025-09-10 13:40:35,329 - db_manager - DEBUG - execute_update values: ('c30d040703027aef9dce7e9506877cd23d01d4f0b8877567cd1d80000a324b22cf38e15d547567e0e262de42b5005651669407ce8046a4e702220ba2bb5735b61fd609582849ccaf7f80c64508ec', 'c30d04070302cb8eb5741f48ad2962d23f019b749ec7505ab1e96a99306e6e3beace908ba0859a1fca55da36748e8d89f5ee952f1e54b7332a1d8e238bb635e26c1d6d35bb90ea811204e0c8c157ec8d', 'c30d040703027059990b735fed366fd23d018793e03349a5076ae1865999a7473cc13de902a2bd350e5b29670b26cba7aea4480efb8a84c93c4f53d635216c42800debe61df2aa471138e50e896e', 'Koshi', 'Jhapa', 'c95ee4a714418be9379a77482c9a8b2003400429703eabebc8d6d971e864f8e0', 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'CM-20250910-KOJH-4D7E-B')
2025-09-10 13:40:35,329 - db_manager - DEBUG - execute_update query: UPDATE complainants SET complainant_full_name = %s, complainant_phone = %s, complainant_email = %s, complainant_province = %s, complainant_district = %s, complainant_phone_hash = %s, complainant_email_hash = %s, complainant_full_name_hash = %s WHERE complainant_id = %s
2025-09-10 13:40:35,329 - db_manager - INFO - Connecting to database: grievance_db
2025-09-10 13:40:35,334 - db_manager - INFO - Starting database transaction
2025-09-10 13:40:35,335 - db_manager - INFO - execute_update: Executing update query: UPDATE complainants SET complainant_full_name = %s, complainant_phone = %s, complainant_email = %s, ...
2025-09-10 13:40:35,336 - db_manager - INFO - execute_update: Update completed in 0.01s. Affected rows: 1
2025-09-10 13:40:35,338 - db_manager - INFO - Transaction committed successfully
2025-09-10 13:40:35,338 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-10 13:40:35,338 - db_manager - INFO - Complainant updated in db: CM-20250910-KOJH-4D7E-B
2025-09-10 13:40:35,338 - db_manager - INFO - update_grievance: Updating grievance with ID: GR-20250910-KOJH-3805-B
2025-09-10 13:40:35,338 - db_manager - DEBUG - execute_update values: ('there is dust everywhere in da house\ni meed to bring kids to hospital tehy sick', 'GR-20250910-KOJH-3805-B')
2025-09-10 13:40:35,338 - db_manager - DEBUG - execute_update query: 
                    UPDATE grievances 
                    SET grievance_description = %s, grievance_modification_date = CURRENT_TIMESTAMP
                    WHERE grievance_id = %s
                    RETURNING grievance_id
                
2025-09-10 13:40:35,338 - db_manager - INFO - Connecting to database: grievance_db
2025-09-10 13:40:35,344 - db_manager - INFO - Starting database transaction
2025-09-10 13:40:35,344 - db_manager - INFO - execute_update: Executing update query: 
                    UPDATE grievances 
                    SET grievance_description = %s, grievanc...
2025-09-10 13:40:35,345 - db_manager - INFO - execute_update: Update completed in 0.01s. Affected rows: 1
2025-09-10 13:40:35,348 - db_manager - INFO - Transaction committed successfully
2025-09-10 13:40:35,348 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-10 13:40:35,348 - db_manager - INFO - update_grievance: Updated grievance with ID: GR-20250910-KOJH-3805-B, rows affected: 1
2025-09-10 13:40:35,348 - db_manager - INFO - Grievance updated in db: GR-20250910-KOJH-3805-B
2025-09-10 13:40:35,348 - db_manager - INFO - Connecting to database: grievance_db
2025-09-10 13:40:35,353 - db_manager - INFO - Starting database transaction
2025-09-10 13:40:35,353 - db_manager - INFO - Executing get_grievance_files: 
            SELECT file_id, file_name, file_type, file_size, upload_timestamp
            FROM file...
2025-09-10 13:40:35,355 - db_manager - INFO - get_grievance_files completed in 0.01s. Rows: 0
2025-09-10 13:40:35,355 - db_manager - INFO - Transaction committed successfully
2025-09-10 13:40:35,355 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-10 13:40:35,355 - db_manager - INFO - Connecting to database: grievance_db
2025-09-10 13:40:35,361 - db_manager - INFO - Starting database transaction
2025-09-10 13:40:35,361 - db_manager - INFO - Executing get_grievance_files: 
            SELECT file_id, file_name, file_type, file_size, upload_timestamp
            FROM file...
2025-09-10 13:40:35,362 - db_manager - INFO - get_grievance_files completed in 0.01s. Rows: 0
2025-09-10 13:40:35,362 - db_manager - INFO - Transaction committed successfully
2025-09-10 13:40:35,362 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-10 13:40:35,412 - db_manager - INFO - Connecting to database: grievance_db
2025-09-10 13:40:35,417 - db_manager - INFO - Starting database transaction
2025-09-10 13:40:35,418 - db_manager - INFO - Executing get_grievance_by_id: 
                SELECT g.*, c.complainant_full_name, c.complainant_phone, c.complainant_email,
    ...
2025-09-10 13:40:35,419 - db_manager - INFO - get_grievance_by_id completed in 0.01s. Rows: 1
2025-09-10 13:40:35,419 - db_manager - INFO - Transaction committed successfully
2025-09-10 13:40:35,419 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-10 13:40:35,419 - db_manager - DEBUG - get_grievance_by_id: grievance_id: {'grievance_id': 'GR-20250910-KOJH-3805-B', 'complainant_id': 'CM-20250910-KOJH-4D7E-B', 'grievance_categories': '{"Environmental - Air Pollution"}', 'grievance_categories_alternative': '{"Safety - Road Safety Provisions","Environmental - Noise Pollution","Environmental - Drainage And Sewage Management"}', 'grievance_summary': 'The house is full of dust causing sickness in children', 'grievance_description': 'there is dust everywhere in da house\ni meed to bring kids to hospital tehy sick', 'grievance_claimed_amount': None, 'grievance_location': None, 'language_code': 'en', 'grievance_classification_status': 'pending', 'grievance_creation_date': datetime.datetime(2025, 9, 10, 13, 40, 10, 398291, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'grievance_modification_date': datetime.datetime(2025, 9, 10, 13, 40, 35, 344545, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'is_temporary': True, 'source': 'bot', 'complainant_full_name': 'c30d040703027aef9dce7e9506877cd23d01d4f0b8877567cd1d80000a324b22cf38e15d547567e0e262de42b5005651669407ce8046a4e702220ba2bb5735b61fd609582849ccaf7f80c64508ec', 'complainant_phone': 'c30d04070302cb8eb5741f48ad2962d23f019b749ec7505ab1e96a99306e6e3beace908ba0859a1fca55da36748e8d89f5ee952f1e54b7332a1d8e238bb635e26c1d6d35bb90ea811204e0c8c157ec8d', 'complainant_email': 'c30d040703027059990b735fed366fd23d018793e03349a5076ae1865999a7473cc13de902a2bd350e5b29670b26cba7aea4480efb8a84c93c4f53d635216c42800debe61df2aa471138e50e896e', 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_municipality': None, 'complainant_ward': None, 'complainant_village': None, 'complainant_address': None}, results: [{'grievance_id': 'GR-20250910-KOJH-3805-B', 'complainant_id': 'CM-20250910-KOJH-4D7E-B', 'grievance_categories': '{"Environmental - Air Pollution"}', 'grievance_categories_alternative': '{"Safety - Road Safety Provisions","Environmental - Noise Pollution","Environmental - Drainage And Sewage Management"}', 'grievance_summary': 'The house is full of dust causing sickness in children', 'grievance_description': 'there is dust everywhere in da house\ni meed to bring kids to hospital tehy sick', 'grievance_claimed_amount': None, 'grievance_location': None, 'language_code': 'en', 'grievance_classification_status': 'pending', 'grievance_creation_date': datetime.datetime(2025, 9, 10, 13, 40, 10, 398291, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'grievance_modification_date': datetime.datetime(2025, 9, 10, 13, 40, 35, 344545, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'is_temporary': True, 'source': 'bot', 'complainant_full_name': 'c30d040703027aef9dce7e9506877cd23d01d4f0b8877567cd1d80000a324b22cf38e15d547567e0e262de42b5005651669407ce8046a4e702220ba2bb5735b61fd609582849ccaf7f80c64508ec', 'complainant_phone': 'c30d04070302cb8eb5741f48ad2962d23f019b749ec7505ab1e96a99306e6e3beace908ba0859a1fca55da36748e8d89f5ee952f1e54b7332a1d8e238bb635e26c1d6d35bb90ea811204e0c8c157ec8d', 'complainant_email': 'c30d040703027059990b735fed366fd23d018793e03349a5076ae1865999a7473cc13de902a2bd350e5b29670b26cba7aea4480efb8a84c93c4f53d635216c42800debe61df2aa471138e50e896e', 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_municipality': None, 'complainant_ward': None, 'complainant_village': None, 'complainant_address': None}]
2025-09-10 13:49:28,889 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-10 13:49:28,890 - db_manager - INFO - Database manager initialized successfully
2025-09-10 13:49:28,890 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-10 13:49:28,890 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-10 13:49:28,890 - db_manager - INFO - Database manager initialized successfully
2025-09-10 13:49:28,890 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-10 13:49:28,890 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-10 13:49:28,890 - db_manager - INFO - Database manager initialized successfully
2025-09-10 13:49:28,890 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-10 13:49:28,891 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-10 13:49:28,891 - db_manager - INFO - Database manager initialized successfully
2025-09-10 13:49:28,891 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-10 13:49:28,891 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-10 13:49:28,891 - db_manager - INFO - Database manager initialized successfully
2025-09-10 13:49:28,891 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-10 13:49:28,891 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-10 13:49:28,891 - db_manager - INFO - Database manager initialized successfully
2025-09-10 13:49:28,891 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-10 13:49:28,891 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-10 13:49:28,891 - db_manager - INFO - Database manager initialized successfully
2025-09-10 13:49:28,891 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-10 13:49:28,891 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-10 13:49:28,891 - db_manager - INFO - Database manager initialized successfully
2025-09-10 13:49:28,891 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-10 13:49:28,891 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-10 13:49:28,891 - db_manager - INFO - Database manager initialized successfully
2025-09-10 13:49:28,891 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-10 13:49:28,891 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-10 13:49:28,891 - db_manager - INFO - Database manager initialized successfully
2025-09-10 13:49:28,891 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-10 13:53:01,755 - db_manager - INFO - create_complainant: Creating complainant with ID: CM-20250910-KOJH-5E87-B
2025-09-10 13:53:01,756 - db_manager - DEBUG - encrypted and hashed data at encrypt_and_hash_sensitive_data: {'complainant_id': 'CM-20250910-KOJH-5E87-B', 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_unique_id': 'CM-20250910-KOJH-5E87-B'}
2025-09-10 13:53:01,756 - db_manager - DEBUG - query_keys at generate_query_string: dict_keys(['complainant_id', 'complainant_province', 'complainant_district', 'complainant_unique_id'])
2025-09-10 13:53:01,756 - db_manager - DEBUG - Generated query: INSERT INTO complainants (complainant_id, complainant_province, complainant_district, complainant_unique_id) VALUES (%s, %s, %s, %s)
2025-09-10 13:53:01,756 - db_manager - DEBUG - len of query_keys: 4
2025-09-10 13:53:01,756 - db_manager - DEBUG - Generated query: INSERT INTO complainants (complainant_id, complainant_province, complainant_district, complainant_unique_id) VALUES (%s, %s, %s, %s)
2025-09-10 13:53:01,756 - db_manager - INFO - Connecting to database: grievance_db
2025-09-10 13:53:01,764 - db_manager - INFO - Starting database transaction
2025-09-10 13:53:01,767 - db_manager - INFO - Transaction committed successfully
2025-09-10 13:53:01,767 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-10 13:53:01,768 - db_manager - INFO - create_complainant: Successfully created complainant with ID: CM-20250910-KOJH-5E87-B
2025-09-10 13:53:01,768 - db_manager - INFO - create_grievance: Creating grievance with data: {'grievance_id': 'GR-20250910-KOJH-58DD-B', 'complainant_id': 'CM-20250910-KOJH-5E87-B', 'grievance_description': 'dust everywhere I need to bring the kids to the hospital cause they are coughing too much', 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_office': None, 'source': 'bot', 'complainant_unique_id': 'CM-20250910-KOJH-5E87-B'}
2025-09-10 13:53:01,768 - db_manager - INFO - create_grievance: Creating grievance with ID: GR-20250910-KOJH-58DD-B
2025-09-10 13:53:01,768 - db_manager - INFO - create_grievance: Creating grievance with allowed fields: ['grievance_id', 'complainant_id', 'grievance_categories', 'grievance_categories_alternative', 'grievance_summary', 'grievance_description', 'grievance_claimed_amount', 'grievance_location', 'is_temporary', 'source', 'language_code', 'grievance_classification_status']
2025-09-10 13:53:01,768 - db_manager - DEBUG - query_keys at generate_query_string: dict_keys(['grievance_id', 'complainant_id', 'grievance_description', 'source'])
2025-09-10 13:53:01,768 - db_manager - DEBUG - Generated query: INSERT INTO grievances (grievance_id, complainant_id, grievance_description, source) VALUES (%s, %s, %s, %s) RETURNING grievance_id
2025-09-10 13:53:01,768 - db_manager - DEBUG - len of query_keys: 4
2025-09-10 13:53:01,768 - db_manager - DEBUG - Generated query: INSERT INTO grievances (grievance_id, complainant_id, grievance_description, source) VALUES (%s, %s, %s, %s) RETURNING grievance_id
2025-09-10 13:53:01,768 - db_manager - INFO - Connecting to database: grievance_db
2025-09-10 13:53:01,774 - db_manager - INFO - Starting database transaction
2025-09-10 13:53:01,780 - db_manager - INFO - Transaction committed successfully
2025-09-10 13:53:01,780 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-10 13:53:01,780 - db_manager - INFO - create_grievance: Successfully created grievance with ID: GR-20250910-KOJH-58DD-B
2025-09-10 13:53:17,846 - db_manager - INFO - Connecting to database: grievance_db
2025-09-10 13:53:17,851 - db_manager - INFO - Starting database transaction
2025-09-10 13:53:17,851 - db_manager - INFO - Executing get_complainant_by_id: 
            SELECT complainant_id, complainant_unique_id, complainant_full_name,    complainant_pho...
2025-09-10 13:53:17,852 - db_manager - INFO - get_complainant_by_id completed in 0.01s. Rows: 1
2025-09-10 13:53:17,852 - db_manager - INFO - Transaction committed successfully
2025-09-10 13:53:17,852 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-10 13:53:17,852 - db_manager - INFO - Connecting to database: grievance_db
2025-09-10 13:53:17,856 - db_manager - INFO - Starting database transaction
2025-09-10 13:53:17,856 - db_manager - INFO - Executing get_grievance_by_id: 
                SELECT g.*, c.complainant_full_name, c.complainant_phone, c.complainant_email,
    ...
2025-09-10 13:53:17,858 - db_manager - INFO - get_grievance_by_id completed in 0.01s. Rows: 1
2025-09-10 13:53:17,858 - db_manager - INFO - Transaction committed successfully
2025-09-10 13:53:17,858 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-10 13:53:17,858 - db_manager - DEBUG - get_grievance_by_id: grievance_id: {'grievance_id': 'GR-20250910-KOJH-58DD-B', 'complainant_id': 'CM-20250910-KOJH-5E87-B', 'grievance_categories': '{"Environmental - Air Pollution"}', 'grievance_categories_alternative': '{"Safety - Road Safety Provisions","Environmental - Noise Pollution","Relocation Issues - Lack Of Infrastructure Of The Resettlement Site"}', 'grievance_summary': 'Dust from construction is causing coughing and health issues requiring hospital visits.', 'grievance_description': 'dust everywhere I need to bring the kids to the hospital cause they are coughing too much', 'grievance_claimed_amount': None, 'grievance_location': None, 'language_code': 'en', 'grievance_classification_status': 'pending', 'grievance_creation_date': datetime.datetime(2025, 9, 10, 13, 53, 1, 774831, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'grievance_modification_date': datetime.datetime(2025, 9, 10, 13, 53, 5, 984034, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'is_temporary': True, 'source': 'bot', 'complainant_full_name': None, 'complainant_phone': None, 'complainant_email': None, 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_municipality': None, 'complainant_ward': None, 'complainant_village': None, 'complainant_address': None}, results: [{'grievance_id': 'GR-20250910-KOJH-58DD-B', 'complainant_id': 'CM-20250910-KOJH-5E87-B', 'grievance_categories': '{"Environmental - Air Pollution"}', 'grievance_categories_alternative': '{"Safety - Road Safety Provisions","Environmental - Noise Pollution","Relocation Issues - Lack Of Infrastructure Of The Resettlement Site"}', 'grievance_summary': 'Dust from construction is causing coughing and health issues requiring hospital visits.', 'grievance_description': 'dust everywhere I need to bring the kids to the hospital cause they are coughing too much', 'grievance_claimed_amount': None, 'grievance_location': None, 'language_code': 'en', 'grievance_classification_status': 'pending', 'grievance_creation_date': datetime.datetime(2025, 9, 10, 13, 53, 1, 774831, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'grievance_modification_date': datetime.datetime(2025, 9, 10, 13, 53, 5, 984034, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'is_temporary': True, 'source': 'bot', 'complainant_full_name': None, 'complainant_phone': None, 'complainant_email': None, 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_municipality': None, 'complainant_ward': None, 'complainant_village': None, 'complainant_address': None}]
2025-09-10 13:53:17,858 - db_manager - INFO - update_complainant: Updating complainant with ID: CM-20250910-KOJH-5E87-B
2025-09-10 13:53:17,858 - db_manager - INFO - Connecting to database: grievance_db
2025-09-10 13:53:17,862 - db_manager - INFO - Starting database transaction
2025-09-10 13:53:17,862 - db_manager - INFO - Executing encrypt_field: SELECT encode(pgp_sym_encrypt(%s, %s), 'hex') AS encrypted...
2025-09-10 13:53:17,865 - db_manager - INFO - encrypt_field completed in 0.01s. Rows: 1
2025-09-10 13:53:17,865 - db_manager - INFO - Transaction committed successfully
2025-09-10 13:53:17,866 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-10 13:53:17,866 - db_manager - INFO - Connecting to database: grievance_db
2025-09-10 13:53:17,870 - db_manager - INFO - Starting database transaction
2025-09-10 13:53:17,870 - db_manager - INFO - Executing encrypt_field: SELECT encode(pgp_sym_encrypt(%s, %s), 'hex') AS encrypted...
2025-09-10 13:53:17,871 - db_manager - INFO - encrypt_field completed in 0.01s. Rows: 1
2025-09-10 13:53:17,871 - db_manager - INFO - Transaction committed successfully
2025-09-10 13:53:17,871 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-10 13:53:17,871 - db_manager - INFO - Connecting to database: grievance_db
2025-09-10 13:53:17,876 - db_manager - INFO - Starting database transaction
2025-09-10 13:53:17,876 - db_manager - INFO - Executing encrypt_field: SELECT encode(pgp_sym_encrypt(%s, %s), 'hex') AS encrypted...
2025-09-10 13:53:17,877 - db_manager - INFO - encrypt_field completed in 0.01s. Rows: 1
2025-09-10 13:53:17,877 - db_manager - INFO - Transaction committed successfully
2025-09-10 13:53:17,877 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-10 13:53:17,877 - db_manager - DEBUG - encrypted phone number Not provided at encrypt_complainant_data: c30d04070302d3dbc9f68854ca3c70d23d0120fb811d5a21e79947f009c1a3082b9ceeeb433153d951edb0c372d3daba773119f216e4d7a26729805fd6ca00069b0205e817671917890b37ce155a
2025-09-10 13:53:17,877 - db_manager - DEBUG - phone number Not provided hashed to d83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f at hash_sensitive_data
2025-09-10 13:53:17,877 - db_manager - DEBUG - encrypted and hashed data at encrypt_and_hash_sensitive_data: {'complainant_full_name': 'c30d04070302b9f0cedb8e46deb16cd23d01084b0151c80f6fa5812edb57ef362fd7008668ee9dff7b53714284a24eb02d9586b605b316eeac28ff6cdcac04cf99c773cd4532c71897bd4f10a9b1', 'complainant_phone': 'c30d04070302d3dbc9f68854ca3c70d23d0120fb811d5a21e79947f009c1a3082b9ceeeb433153d951edb0c372d3daba773119f216e4d7a26729805fd6ca00069b0205e817671917890b37ce155a', 'complainant_email': 'c30d04070302d9ed98f1fbce046a7ad23d0108f07360423224117e409f7869094b8614c71f6a5377924fc7b8d22959756f23edbf649757bc755a6cd5ae58cafa554aaee30a9062cd7db3ca179ea1', 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_email_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'complainant_full_name_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'complainant_phone_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f'}
2025-09-10 13:53:17,877 - db_manager - DEBUG - encrypted_data at update_complainant: {'complainant_full_name': 'c30d04070302b9f0cedb8e46deb16cd23d01084b0151c80f6fa5812edb57ef362fd7008668ee9dff7b53714284a24eb02d9586b605b316eeac28ff6cdcac04cf99c773cd4532c71897bd4f10a9b1', 'complainant_phone': 'c30d04070302d3dbc9f68854ca3c70d23d0120fb811d5a21e79947f009c1a3082b9ceeeb433153d951edb0c372d3daba773119f216e4d7a26729805fd6ca00069b0205e817671917890b37ce155a', 'complainant_email': 'c30d04070302d9ed98f1fbce046a7ad23d0108f07360423224117e409f7869094b8614c71f6a5377924fc7b8d22959756f23edbf649757bc755a6cd5ae58cafa554aaee30a9062cd7db3ca179ea1', 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_email_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'complainant_full_name_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'complainant_phone_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f'}
2025-09-10 13:53:17,877 - db_manager - DEBUG - execute_update values: ('c30d04070302b9f0cedb8e46deb16cd23d01084b0151c80f6fa5812edb57ef362fd7008668ee9dff7b53714284a24eb02d9586b605b316eeac28ff6cdcac04cf99c773cd4532c71897bd4f10a9b1', 'c30d04070302d3dbc9f68854ca3c70d23d0120fb811d5a21e79947f009c1a3082b9ceeeb433153d951edb0c372d3daba773119f216e4d7a26729805fd6ca00069b0205e817671917890b37ce155a', 'c30d04070302d9ed98f1fbce046a7ad23d0108f07360423224117e409f7869094b8614c71f6a5377924fc7b8d22959756f23edbf649757bc755a6cd5ae58cafa554aaee30a9062cd7db3ca179ea1', 'Koshi', 'Jhapa', 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'CM-20250910-KOJH-5E87-B')
2025-09-10 13:53:17,877 - db_manager - DEBUG - execute_update query: UPDATE complainants SET complainant_full_name = %s, complainant_phone = %s, complainant_email = %s, complainant_province = %s, complainant_district = %s, complainant_email_hash = %s, complainant_full_name_hash = %s, complainant_phone_hash = %s WHERE complainant_id = %s
2025-09-10 13:53:17,877 - db_manager - INFO - Connecting to database: grievance_db
2025-09-10 13:53:17,882 - db_manager - INFO - Starting database transaction
2025-09-10 13:53:17,882 - db_manager - INFO - execute_update: Executing update query: UPDATE complainants SET complainant_full_name = %s, complainant_phone = %s, complainant_email = %s, ...
2025-09-10 13:53:17,883 - db_manager - INFO - execute_update: Update completed in 0.01s. Affected rows: 1
2025-09-10 13:53:17,885 - db_manager - INFO - Transaction committed successfully
2025-09-10 13:53:17,885 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-10 13:53:17,885 - db_manager - INFO - Complainant updated in db: CM-20250910-KOJH-5E87-B
2025-09-10 13:53:17,885 - db_manager - INFO - update_grievance: Updating grievance with ID: GR-20250910-KOJH-58DD-B
2025-09-10 13:53:17,885 - db_manager - DEBUG - execute_update values: ('dust everywhere I need to bring the kids to the hospital cause they are coughing too much', 'GR-20250910-KOJH-58DD-B')
2025-09-10 13:53:17,885 - db_manager - DEBUG - execute_update query: 
                    UPDATE grievances 
                    SET grievance_description = %s, grievance_modification_date = CURRENT_TIMESTAMP
                    WHERE grievance_id = %s
                    RETURNING grievance_id
                
2025-09-10 13:53:17,885 - db_manager - INFO - Connecting to database: grievance_db
2025-09-10 13:53:17,890 - db_manager - INFO - Starting database transaction
2025-09-10 13:53:17,890 - db_manager - INFO - execute_update: Executing update query: 
                    UPDATE grievances 
                    SET grievance_description = %s, grievanc...
2025-09-10 13:53:17,891 - db_manager - INFO - execute_update: Update completed in 0.01s. Affected rows: 1
2025-09-10 13:53:17,893 - db_manager - INFO - Transaction committed successfully
2025-09-10 13:53:17,894 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-10 13:53:17,894 - db_manager - INFO - update_grievance: Updated grievance with ID: GR-20250910-KOJH-58DD-B, rows affected: 1
2025-09-10 13:53:17,894 - db_manager - INFO - Grievance updated in db: GR-20250910-KOJH-58DD-B
2025-09-10 13:53:17,894 - db_manager - INFO - Connecting to database: grievance_db
2025-09-10 13:53:17,899 - db_manager - INFO - Starting database transaction
2025-09-10 13:53:17,899 - db_manager - INFO - Executing get_grievance_files: 
            SELECT file_id, file_name, file_type, file_size, upload_timestamp
            FROM file...
2025-09-10 13:53:17,900 - db_manager - INFO - get_grievance_files completed in 0.01s. Rows: 0
2025-09-10 13:53:17,900 - db_manager - INFO - Transaction committed successfully
2025-09-10 13:53:17,900 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-10 13:53:17,900 - db_manager - INFO - Connecting to database: grievance_db
2025-09-10 13:53:17,905 - db_manager - INFO - Starting database transaction
2025-09-10 13:53:17,905 - db_manager - INFO - Executing get_grievance_files: 
            SELECT file_id, file_name, file_type, file_size, upload_timestamp
            FROM file...
2025-09-10 13:53:17,906 - db_manager - INFO - get_grievance_files completed in 0.01s. Rows: 0
2025-09-10 13:53:17,906 - db_manager - INFO - Transaction committed successfully
2025-09-10 13:53:17,906 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-10 13:53:17,945 - db_manager - INFO - Connecting to database: grievance_db
2025-09-10 13:53:17,950 - db_manager - INFO - Starting database transaction
2025-09-10 13:53:17,950 - db_manager - INFO - Executing get_grievance_by_id: 
                SELECT g.*, c.complainant_full_name, c.complainant_phone, c.complainant_email,
    ...
2025-09-10 13:53:17,951 - db_manager - INFO - get_grievance_by_id completed in 0.01s. Rows: 1
2025-09-10 13:53:17,952 - db_manager - INFO - Transaction committed successfully
2025-09-10 13:53:17,952 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-10 13:53:17,952 - db_manager - DEBUG - get_grievance_by_id: grievance_id: {'grievance_id': 'GR-20250910-KOJH-58DD-B', 'complainant_id': 'CM-20250910-KOJH-5E87-B', 'grievance_categories': '{"Environmental - Air Pollution"}', 'grievance_categories_alternative': '{"Safety - Road Safety Provisions","Environmental - Noise Pollution","Relocation Issues - Lack Of Infrastructure Of The Resettlement Site"}', 'grievance_summary': 'Dust from construction is causing coughing and health issues requiring hospital visits.', 'grievance_description': 'dust everywhere I need to bring the kids to the hospital cause they are coughing too much', 'grievance_claimed_amount': None, 'grievance_location': None, 'language_code': 'en', 'grievance_classification_status': 'pending', 'grievance_creation_date': datetime.datetime(2025, 9, 10, 13, 53, 1, 774831, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'grievance_modification_date': datetime.datetime(2025, 9, 10, 13, 53, 17, 890410, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'is_temporary': True, 'source': 'bot', 'complainant_full_name': 'c30d04070302b9f0cedb8e46deb16cd23d01084b0151c80f6fa5812edb57ef362fd7008668ee9dff7b53714284a24eb02d9586b605b316eeac28ff6cdcac04cf99c773cd4532c71897bd4f10a9b1', 'complainant_phone': 'c30d04070302d3dbc9f68854ca3c70d23d0120fb811d5a21e79947f009c1a3082b9ceeeb433153d951edb0c372d3daba773119f216e4d7a26729805fd6ca00069b0205e817671917890b37ce155a', 'complainant_email': 'c30d04070302d9ed98f1fbce046a7ad23d0108f07360423224117e409f7869094b8614c71f6a5377924fc7b8d22959756f23edbf649757bc755a6cd5ae58cafa554aaee30a9062cd7db3ca179ea1', 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_municipality': None, 'complainant_ward': None, 'complainant_village': None, 'complainant_address': None}, results: [{'grievance_id': 'GR-20250910-KOJH-58DD-B', 'complainant_id': 'CM-20250910-KOJH-5E87-B', 'grievance_categories': '{"Environmental - Air Pollution"}', 'grievance_categories_alternative': '{"Safety - Road Safety Provisions","Environmental - Noise Pollution","Relocation Issues - Lack Of Infrastructure Of The Resettlement Site"}', 'grievance_summary': 'Dust from construction is causing coughing and health issues requiring hospital visits.', 'grievance_description': 'dust everywhere I need to bring the kids to the hospital cause they are coughing too much', 'grievance_claimed_amount': None, 'grievance_location': None, 'language_code': 'en', 'grievance_classification_status': 'pending', 'grievance_creation_date': datetime.datetime(2025, 9, 10, 13, 53, 1, 774831, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'grievance_modification_date': datetime.datetime(2025, 9, 10, 13, 53, 17, 890410, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'is_temporary': True, 'source': 'bot', 'complainant_full_name': 'c30d04070302b9f0cedb8e46deb16cd23d01084b0151c80f6fa5812edb57ef362fd7008668ee9dff7b53714284a24eb02d9586b605b316eeac28ff6cdcac04cf99c773cd4532c71897bd4f10a9b1', 'complainant_phone': 'c30d04070302d3dbc9f68854ca3c70d23d0120fb811d5a21e79947f009c1a3082b9ceeeb433153d951edb0c372d3daba773119f216e4d7a26729805fd6ca00069b0205e817671917890b37ce155a', 'complainant_email': 'c30d04070302d9ed98f1fbce046a7ad23d0108f07360423224117e409f7869094b8614c71f6a5377924fc7b8d22959756f23edbf649757bc755a6cd5ae58cafa554aaee30a9062cd7db3ca179ea1', 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_municipality': None, 'complainant_ward': None, 'complainant_village': None, 'complainant_address': None}]
2025-09-10 14:33:26,126 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-10 14:33:26,127 - db_manager - INFO - Database manager initialized successfully
2025-09-10 14:33:26,127 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-10 14:33:26,127 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-10 14:33:26,127 - db_manager - INFO - Database manager initialized successfully
2025-09-10 14:33:26,127 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-10 14:33:26,127 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-10 14:33:26,127 - db_manager - INFO - Database manager initialized successfully
2025-09-10 14:33:26,127 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-10 14:33:26,127 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-10 14:33:26,127 - db_manager - INFO - Database manager initialized successfully
2025-09-10 14:33:26,127 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-10 14:33:26,127 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-10 14:33:26,128 - db_manager - INFO - Database manager initialized successfully
2025-09-10 14:33:26,128 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-10 14:33:26,128 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-10 14:33:26,128 - db_manager - INFO - Database manager initialized successfully
2025-09-10 14:33:26,128 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-10 14:33:26,128 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-10 14:33:26,128 - db_manager - INFO - Database manager initialized successfully
2025-09-10 14:33:26,128 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-10 14:33:26,128 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-10 14:33:26,128 - db_manager - INFO - Database manager initialized successfully
2025-09-10 14:33:26,128 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-10 14:33:26,128 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-10 14:33:26,128 - db_manager - INFO - Database manager initialized successfully
2025-09-10 14:33:26,128 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-10 14:33:26,128 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-10 14:33:26,128 - db_manager - INFO - Database manager initialized successfully
2025-09-10 14:33:26,128 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-10 14:34:27,971 - db_manager - INFO - create_complainant: Creating complainant with ID: CM-20250910-KOJH-DD98-B
2025-09-10 14:34:27,972 - db_manager - DEBUG - encrypted and hashed data at encrypt_and_hash_sensitive_data: {'complainant_id': 'CM-20250910-KOJH-DD98-B', 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_unique_id': 'CM-20250910-KOJH-DD98-B'}
2025-09-10 14:34:27,972 - db_manager - DEBUG - query_keys at generate_query_string: dict_keys(['complainant_id', 'complainant_province', 'complainant_district', 'complainant_unique_id'])
2025-09-10 14:34:27,972 - db_manager - DEBUG - Generated query: INSERT INTO complainants (complainant_id, complainant_province, complainant_district, complainant_unique_id) VALUES (%s, %s, %s, %s)
2025-09-10 14:34:27,972 - db_manager - DEBUG - len of query_keys: 4
2025-09-10 14:34:27,972 - db_manager - DEBUG - Generated query: INSERT INTO complainants (complainant_id, complainant_province, complainant_district, complainant_unique_id) VALUES (%s, %s, %s, %s)
2025-09-10 14:34:27,972 - db_manager - INFO - Connecting to database: grievance_db
2025-09-10 14:34:27,981 - db_manager - INFO - Starting database transaction
2025-09-10 14:34:27,984 - db_manager - INFO - Transaction committed successfully
2025-09-10 14:34:27,984 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-10 14:34:27,984 - db_manager - INFO - create_complainant: Successfully created complainant with ID: CM-20250910-KOJH-DD98-B
2025-09-10 14:34:27,984 - db_manager - INFO - create_grievance: Creating grievance with data: {'grievance_id': 'GR-20250910-KOJH-D336-B', 'complainant_id': 'CM-20250910-KOJH-DD98-B', 'grievance_description': 'there is dust everywhere in my house\nmy kids are coughing a lot\ni need to go to the hospital but I dont have money', 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_office': None, 'source': 'bot', 'complainant_unique_id': 'CM-20250910-KOJH-DD98-B'}
2025-09-10 14:34:27,984 - db_manager - INFO - create_grievance: Creating grievance with ID: GR-20250910-KOJH-D336-B
2025-09-10 14:34:27,984 - db_manager - INFO - create_grievance: Creating grievance with allowed fields: ['grievance_id', 'complainant_id', 'grievance_categories', 'grievance_categories_alternative', 'grievance_summary', 'grievance_description', 'grievance_claimed_amount', 'grievance_location', 'is_temporary', 'source', 'language_code', 'grievance_classification_status']
2025-09-10 14:34:27,984 - db_manager - DEBUG - query_keys at generate_query_string: dict_keys(['grievance_id', 'complainant_id', 'grievance_description', 'source'])
2025-09-10 14:34:27,984 - db_manager - DEBUG - Generated query: INSERT INTO grievances (grievance_id, complainant_id, grievance_description, source) VALUES (%s, %s, %s, %s) RETURNING grievance_id
2025-09-10 14:34:27,984 - db_manager - DEBUG - len of query_keys: 4
2025-09-10 14:34:27,985 - db_manager - DEBUG - Generated query: INSERT INTO grievances (grievance_id, complainant_id, grievance_description, source) VALUES (%s, %s, %s, %s) RETURNING grievance_id
2025-09-10 14:34:27,985 - db_manager - INFO - Connecting to database: grievance_db
2025-09-10 14:34:27,990 - db_manager - INFO - Starting database transaction
2025-09-10 14:34:27,997 - db_manager - INFO - Transaction committed successfully
2025-09-10 14:34:27,998 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-10 14:34:27,998 - db_manager - INFO - create_grievance: Successfully created grievance with ID: GR-20250910-KOJH-D336-B
2025-09-10 14:34:40,724 - db_manager - INFO - Connecting to database: grievance_db
2025-09-10 14:34:40,729 - db_manager - INFO - Starting database transaction
2025-09-10 14:34:40,729 - db_manager - INFO - Executing get_complainant_by_id: 
            SELECT complainant_id, complainant_unique_id, complainant_full_name,    complainant_pho...
2025-09-10 14:34:40,730 - db_manager - INFO - get_complainant_by_id completed in 0.01s. Rows: 1
2025-09-10 14:34:40,731 - db_manager - INFO - Transaction committed successfully
2025-09-10 14:34:40,731 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-10 14:34:40,731 - db_manager - INFO - Connecting to database: grievance_db
2025-09-10 14:34:40,735 - db_manager - INFO - Starting database transaction
2025-09-10 14:34:40,736 - db_manager - INFO - Executing get_grievance_by_id: 
                SELECT g.*, c.complainant_full_name, c.complainant_phone, c.complainant_email,
    ...
2025-09-10 14:34:40,737 - db_manager - INFO - get_grievance_by_id completed in 0.01s. Rows: 1
2025-09-10 14:34:40,737 - db_manager - INFO - Transaction committed successfully
2025-09-10 14:34:40,737 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-10 14:34:40,737 - db_manager - DEBUG - get_grievance_by_id: grievance_id: {'grievance_id': 'GR-20250910-KOJH-D336-B', 'complainant_id': 'CM-20250910-KOJH-DD98-B', 'grievance_categories': ['Environmental - Air Pollution'], 'grievance_categories_alternative': ['Safety - Road Safety Provisions'], 'grievance_summary': "The person's house is heavily dusted causing health problems to the kids and they are short of money to visit the hospital.", 'grievance_description': 'there is dust everywhere in my house\nmy kids are coughing a lot\ni need to go to the hospital but I dont have money', 'grievance_claimed_amount': None, 'grievance_location': None, 'language_code': 'en', 'grievance_classification_status': 'pending', 'grievance_creation_date': datetime.datetime(2025, 9, 10, 14, 34, 27, 990982, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'grievance_modification_date': datetime.datetime(2025, 9, 10, 14, 34, 36, 723338, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'is_temporary': True, 'source': 'bot', 'complainant_full_name': None, 'complainant_phone': None, 'complainant_email': None, 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_municipality': None, 'complainant_ward': None, 'complainant_village': None, 'complainant_address': None}, results: [{'grievance_id': 'GR-20250910-KOJH-D336-B', 'complainant_id': 'CM-20250910-KOJH-DD98-B', 'grievance_categories': '["Environmental - Air Pollution"]', 'grievance_categories_alternative': '["Safety - Road Safety Provisions"]', 'grievance_summary': "The person's house is heavily dusted causing health problems to the kids and they are short of money to visit the hospital.", 'grievance_description': 'there is dust everywhere in my house\nmy kids are coughing a lot\ni need to go to the hospital but I dont have money', 'grievance_claimed_amount': None, 'grievance_location': None, 'language_code': 'en', 'grievance_classification_status': 'pending', 'grievance_creation_date': datetime.datetime(2025, 9, 10, 14, 34, 27, 990982, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'grievance_modification_date': datetime.datetime(2025, 9, 10, 14, 34, 36, 723338, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'is_temporary': True, 'source': 'bot', 'complainant_full_name': None, 'complainant_phone': None, 'complainant_email': None, 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_municipality': None, 'complainant_ward': None, 'complainant_village': None, 'complainant_address': None}]
2025-09-10 14:34:40,738 - db_manager - INFO - update_complainant: Updating complainant with ID: CM-20250910-KOJH-DD98-B
2025-09-10 14:34:40,738 - db_manager - INFO - Connecting to database: grievance_db
2025-09-10 14:34:40,742 - db_manager - INFO - Starting database transaction
2025-09-10 14:34:40,742 - db_manager - INFO - Executing encrypt_field: SELECT encode(pgp_sym_encrypt(%s, %s), 'hex') AS encrypted...
2025-09-10 14:34:40,745 - db_manager - INFO - encrypt_field completed in 0.01s. Rows: 1
2025-09-10 14:34:40,746 - db_manager - INFO - Transaction committed successfully
2025-09-10 14:34:40,746 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-10 14:34:40,746 - db_manager - INFO - Connecting to database: grievance_db
2025-09-10 14:34:40,750 - db_manager - INFO - Starting database transaction
2025-09-10 14:34:40,751 - db_manager - INFO - Executing encrypt_field: SELECT encode(pgp_sym_encrypt(%s, %s), 'hex') AS encrypted...
2025-09-10 14:34:40,752 - db_manager - INFO - encrypt_field completed in 0.01s. Rows: 1
2025-09-10 14:34:40,752 - db_manager - INFO - Transaction committed successfully
2025-09-10 14:34:40,752 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-10 14:34:40,752 - db_manager - DEBUG - encrypted phone number Not provided at encrypt_complainant_data: c30d040703024a79cbb619e009a17fd23d0103b76b5408e7fd15e55e4820253b121d6b70649305ba5d5449878659961cd5213770b602cbe2311efe1114c31b60682395fdb4a43369a386338248b8
2025-09-10 14:34:40,752 - db_manager - INFO - Connecting to database: grievance_db
2025-09-10 14:34:40,757 - db_manager - INFO - Starting database transaction
2025-09-10 14:34:40,757 - db_manager - INFO - Executing encrypt_field: SELECT encode(pgp_sym_encrypt(%s, %s), 'hex') AS encrypted...
2025-09-10 14:34:40,758 - db_manager - INFO - encrypt_field completed in 0.01s. Rows: 1
2025-09-10 14:34:40,759 - db_manager - INFO - Transaction committed successfully
2025-09-10 14:34:40,759 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-10 14:34:40,759 - db_manager - DEBUG - phone number Not provided hashed to d83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f at hash_sensitive_data
2025-09-10 14:34:40,759 - db_manager - DEBUG - encrypted and hashed data at encrypt_and_hash_sensitive_data: {'complainant_full_name': 'c30d04070302632468c1fca7659878d23d01f91e1958b29a15584bc3eb23e23d1a57a338f30545fae563e313326c52d7bd828e314e5461b3cf51bbb683e9335f4af454680599003c10f163011e75', 'complainant_phone': 'c30d040703024a79cbb619e009a17fd23d0103b76b5408e7fd15e55e4820253b121d6b70649305ba5d5449878659961cd5213770b602cbe2311efe1114c31b60682395fdb4a43369a386338248b8', 'complainant_email': 'c30d04070302d9ce236b694dbc507fd23d013ed8da455979c4a40ce739d9bd98fb2e02981e3b0f60dba67e89519ffe84b05993d2d90e90bf5376fee4efdf87a0f32ef12244b9423ff52153fc0158', 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_email_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'complainant_phone_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'complainant_full_name_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f'}
2025-09-10 14:34:40,759 - db_manager - DEBUG - encrypted_data at update_complainant: {'complainant_full_name': 'c30d04070302632468c1fca7659878d23d01f91e1958b29a15584bc3eb23e23d1a57a338f30545fae563e313326c52d7bd828e314e5461b3cf51bbb683e9335f4af454680599003c10f163011e75', 'complainant_phone': 'c30d040703024a79cbb619e009a17fd23d0103b76b5408e7fd15e55e4820253b121d6b70649305ba5d5449878659961cd5213770b602cbe2311efe1114c31b60682395fdb4a43369a386338248b8', 'complainant_email': 'c30d04070302d9ce236b694dbc507fd23d013ed8da455979c4a40ce739d9bd98fb2e02981e3b0f60dba67e89519ffe84b05993d2d90e90bf5376fee4efdf87a0f32ef12244b9423ff52153fc0158', 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_email_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'complainant_phone_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'complainant_full_name_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f'}
2025-09-10 14:34:40,759 - db_manager - DEBUG - execute_update values: ('c30d04070302632468c1fca7659878d23d01f91e1958b29a15584bc3eb23e23d1a57a338f30545fae563e313326c52d7bd828e314e5461b3cf51bbb683e9335f4af454680599003c10f163011e75', 'c30d040703024a79cbb619e009a17fd23d0103b76b5408e7fd15e55e4820253b121d6b70649305ba5d5449878659961cd5213770b602cbe2311efe1114c31b60682395fdb4a43369a386338248b8', 'c30d04070302d9ce236b694dbc507fd23d013ed8da455979c4a40ce739d9bd98fb2e02981e3b0f60dba67e89519ffe84b05993d2d90e90bf5376fee4efdf87a0f32ef12244b9423ff52153fc0158', 'Koshi', 'Jhapa', 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'CM-20250910-KOJH-DD98-B')
2025-09-10 14:34:40,759 - db_manager - DEBUG - execute_update query: UPDATE complainants SET complainant_full_name = %s, complainant_phone = %s, complainant_email = %s, complainant_province = %s, complainant_district = %s, complainant_email_hash = %s, complainant_phone_hash = %s, complainant_full_name_hash = %s WHERE complainant_id = %s
2025-09-10 14:34:40,759 - db_manager - INFO - Connecting to database: grievance_db
2025-09-10 14:34:40,763 - db_manager - INFO - Starting database transaction
2025-09-10 14:34:40,763 - db_manager - INFO - execute_update: Executing update query: UPDATE complainants SET complainant_full_name = %s, complainant_phone = %s, complainant_email = %s, ...
2025-09-10 14:34:40,764 - db_manager - INFO - execute_update: Update completed in 0.01s. Affected rows: 1
2025-09-10 14:34:40,766 - db_manager - INFO - Transaction committed successfully
2025-09-10 14:34:40,766 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-10 14:34:40,766 - db_manager - INFO - Complainant updated in db: CM-20250910-KOJH-DD98-B
2025-09-10 14:34:40,766 - db_manager - INFO - update_grievance: Updating grievance with ID: GR-20250910-KOJH-D336-B
2025-09-10 14:34:40,766 - db_manager - DEBUG - execute_update values: ('there is dust everywhere in my house\nmy kids are coughing a lot\ni need to go to the hospital but I dont have money', 'GR-20250910-KOJH-D336-B')
2025-09-10 14:34:40,766 - db_manager - DEBUG - execute_update query: 
                    UPDATE grievances 
                    SET grievance_description = %s, grievance_modification_date = CURRENT_TIMESTAMP
                    WHERE grievance_id = %s
                    RETURNING grievance_id
                
2025-09-10 14:34:40,766 - db_manager - INFO - Connecting to database: grievance_db
2025-09-10 14:34:40,770 - db_manager - INFO - Starting database transaction
2025-09-10 14:34:40,771 - db_manager - INFO - execute_update: Executing update query: 
                    UPDATE grievances 
                    SET grievance_description = %s, grievanc...
2025-09-10 14:34:40,771 - db_manager - INFO - execute_update: Update completed in 0.01s. Affected rows: 1
2025-09-10 14:34:40,774 - db_manager - INFO - Transaction committed successfully
2025-09-10 14:34:40,774 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-10 14:34:40,774 - db_manager - INFO - update_grievance: Updated grievance with ID: GR-20250910-KOJH-D336-B, rows affected: 1
2025-09-10 14:34:40,774 - db_manager - INFO - Grievance updated in db: GR-20250910-KOJH-D336-B
2025-09-10 14:34:40,774 - db_manager - INFO - Connecting to database: grievance_db
2025-09-10 14:34:40,778 - db_manager - INFO - Starting database transaction
2025-09-10 14:34:40,778 - db_manager - INFO - Executing get_grievance_files: 
            SELECT file_id, file_name, file_type, file_size, upload_timestamp
            FROM file...
2025-09-10 14:34:40,780 - db_manager - INFO - get_grievance_files completed in 0.01s. Rows: 0
2025-09-10 14:34:40,780 - db_manager - INFO - Transaction committed successfully
2025-09-10 14:34:40,780 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-10 14:34:40,780 - db_manager - INFO - Connecting to database: grievance_db
2025-09-10 14:34:40,784 - db_manager - INFO - Starting database transaction
2025-09-10 14:34:40,784 - db_manager - INFO - Executing get_grievance_files: 
            SELECT file_id, file_name, file_type, file_size, upload_timestamp
            FROM file...
2025-09-10 14:34:40,785 - db_manager - INFO - get_grievance_files completed in 0.01s. Rows: 0
2025-09-10 14:34:40,786 - db_manager - INFO - Transaction committed successfully
2025-09-10 14:34:40,786 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-10 14:34:40,827 - db_manager - INFO - Connecting to database: grievance_db
2025-09-10 14:34:40,832 - db_manager - INFO - Starting database transaction
2025-09-10 14:34:40,832 - db_manager - INFO - Executing get_grievance_by_id: 
                SELECT g.*, c.complainant_full_name, c.complainant_phone, c.complainant_email,
    ...
2025-09-10 14:34:40,833 - db_manager - INFO - get_grievance_by_id completed in 0.01s. Rows: 1
2025-09-10 14:34:40,833 - db_manager - INFO - Transaction committed successfully
2025-09-10 14:34:40,833 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-10 14:34:40,834 - db_manager - DEBUG - get_grievance_by_id: grievance_id: {'grievance_id': 'GR-20250910-KOJH-D336-B', 'complainant_id': 'CM-20250910-KOJH-DD98-B', 'grievance_categories': ['Environmental - Air Pollution'], 'grievance_categories_alternative': ['Safety - Road Safety Provisions'], 'grievance_summary': "The person's house is heavily dusted causing health problems to the kids and they are short of money to visit the hospital.", 'grievance_description': 'there is dust everywhere in my house\nmy kids are coughing a lot\ni need to go to the hospital but I dont have money', 'grievance_claimed_amount': None, 'grievance_location': None, 'language_code': 'en', 'grievance_classification_status': 'pending', 'grievance_creation_date': datetime.datetime(2025, 9, 10, 14, 34, 27, 990982, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'grievance_modification_date': datetime.datetime(2025, 9, 10, 14, 34, 40, 771101, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'is_temporary': True, 'source': 'bot', 'complainant_full_name': 'c30d04070302632468c1fca7659878d23d01f91e1958b29a15584bc3eb23e23d1a57a338f30545fae563e313326c52d7bd828e314e5461b3cf51bbb683e9335f4af454680599003c10f163011e75', 'complainant_phone': 'c30d040703024a79cbb619e009a17fd23d0103b76b5408e7fd15e55e4820253b121d6b70649305ba5d5449878659961cd5213770b602cbe2311efe1114c31b60682395fdb4a43369a386338248b8', 'complainant_email': 'c30d04070302d9ce236b694dbc507fd23d013ed8da455979c4a40ce739d9bd98fb2e02981e3b0f60dba67e89519ffe84b05993d2d90e90bf5376fee4efdf87a0f32ef12244b9423ff52153fc0158', 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_municipality': None, 'complainant_ward': None, 'complainant_village': None, 'complainant_address': None}, results: [{'grievance_id': 'GR-20250910-KOJH-D336-B', 'complainant_id': 'CM-20250910-KOJH-DD98-B', 'grievance_categories': '["Environmental - Air Pollution"]', 'grievance_categories_alternative': '["Safety - Road Safety Provisions"]', 'grievance_summary': "The person's house is heavily dusted causing health problems to the kids and they are short of money to visit the hospital.", 'grievance_description': 'there is dust everywhere in my house\nmy kids are coughing a lot\ni need to go to the hospital but I dont have money', 'grievance_claimed_amount': None, 'grievance_location': None, 'language_code': 'en', 'grievance_classification_status': 'pending', 'grievance_creation_date': datetime.datetime(2025, 9, 10, 14, 34, 27, 990982, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'grievance_modification_date': datetime.datetime(2025, 9, 10, 14, 34, 40, 771101, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'is_temporary': True, 'source': 'bot', 'complainant_full_name': 'c30d04070302632468c1fca7659878d23d01f91e1958b29a15584bc3eb23e23d1a57a338f30545fae563e313326c52d7bd828e314e5461b3cf51bbb683e9335f4af454680599003c10f163011e75', 'complainant_phone': 'c30d040703024a79cbb619e009a17fd23d0103b76b5408e7fd15e55e4820253b121d6b70649305ba5d5449878659961cd5213770b602cbe2311efe1114c31b60682395fdb4a43369a386338248b8', 'complainant_email': 'c30d04070302d9ce236b694dbc507fd23d013ed8da455979c4a40ce739d9bd98fb2e02981e3b0f60dba67e89519ffe84b05993d2d90e90bf5376fee4efdf87a0f32ef12244b9423ff52153fc0158', 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_municipality': None, 'complainant_ward': None, 'complainant_village': None, 'complainant_address': None}]
2025-09-10 14:35:49,177 - db_manager - INFO - Connecting to database: grievance_db
2025-09-10 14:35:49,182 - db_manager - INFO - Starting database transaction
2025-09-10 14:35:49,182 - db_manager - INFO - Executing get_complainant_id_from_grievance_id: 
            SELECT complainant_id
            FROM grievances
            WHERE grievance_id = %s
 ...
2025-09-10 14:35:49,183 - db_manager - INFO - get_complainant_id_from_grievance_id completed in 0.01s. Rows: 1
2025-09-10 14:35:49,184 - db_manager - INFO - Transaction committed successfully
2025-09-10 14:35:49,184 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-10 14:35:49,184 - db_manager - INFO - update_complainant: Updating complainant with ID: CM-20250910-KOJH-DD98-B
2025-09-10 14:35:49,184 - db_manager - DEBUG - encrypted and hashed data at encrypt_and_hash_sensitive_data: {}
2025-09-10 14:35:49,184 - db_manager - DEBUG - encrypted_data at update_complainant: {}
2025-09-10 14:35:49,184 - db_manager - DEBUG - No complainant field to update
2025-09-10 14:35:49,184 - db_manager - INFO - Complainant updated in db: GR-20250910-KOJH-D336-B
2025-09-10 14:35:49,184 - db_manager - INFO - update_grievance: Updating grievance with ID: GR-20250910-KOJH-D336-B
2025-09-10 14:35:49,184 - db_manager - DEBUG - execute_update values: ('["Environmental - Air Pollution", "Safety - Road Safety Provisions"]', 'popopop', 'GR-20250910-KOJH-D336-B')
2025-09-10 14:35:49,184 - db_manager - DEBUG - execute_update query: 
                    UPDATE grievances 
                    SET grievance_categories = %s, grievance_summary = %s, grievance_modification_date = CURRENT_TIMESTAMP
                    WHERE grievance_id = %s
                    RETURNING grievance_id
                
2025-09-10 14:35:49,184 - db_manager - INFO - Connecting to database: grievance_db
2025-09-10 14:35:49,189 - db_manager - INFO - Starting database transaction
2025-09-10 14:35:49,189 - db_manager - INFO - execute_update: Executing update query: 
                    UPDATE grievances 
                    SET grievance_categories = %s, grievance...
2025-09-10 14:35:49,191 - db_manager - INFO - execute_update: Update completed in 0.01s. Affected rows: 1
2025-09-10 14:35:49,193 - db_manager - INFO - Transaction committed successfully
2025-09-10 14:35:49,194 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-10 14:35:49,194 - db_manager - INFO - update_grievance: Updated grievance with ID: GR-20250910-KOJH-D336-B, rows affected: 1
2025-09-10 14:35:49,194 - db_manager - INFO - Grievance updated in db: GR-20250910-KOJH-D336-B
2025-09-10 14:35:49,238 - db_manager - INFO - Connecting to database: grievance_db
2025-09-10 14:35:49,243 - db_manager - INFO - Starting database transaction
2025-09-10 14:35:49,243 - db_manager - INFO - Executing get_grievance_files: 
            SELECT file_id, file_name, file_type, file_size, upload_timestamp
            FROM file...
2025-09-10 14:35:49,245 - db_manager - INFO - get_grievance_files completed in 0.01s. Rows: 0
2025-09-10 14:35:49,245 - db_manager - INFO - Transaction committed successfully
2025-09-10 14:35:49,245 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-10 14:36:36,612 - db_manager - INFO - create_complainant: Creating complainant with ID: CM-20250910-KOJH-F111-B
2025-09-10 14:36:36,612 - db_manager - DEBUG - encrypted and hashed data at encrypt_and_hash_sensitive_data: {'complainant_id': 'CM-20250910-KOJH-F111-B', 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_unique_id': 'CM-20250910-KOJH-F111-B'}
2025-09-10 14:36:36,613 - db_manager - DEBUG - query_keys at generate_query_string: dict_keys(['complainant_id', 'complainant_province', 'complainant_district', 'complainant_unique_id'])
2025-09-10 14:36:36,613 - db_manager - DEBUG - Generated query: INSERT INTO complainants (complainant_id, complainant_province, complainant_district, complainant_unique_id) VALUES (%s, %s, %s, %s)
2025-09-10 14:36:36,613 - db_manager - DEBUG - len of query_keys: 4
2025-09-10 14:36:36,613 - db_manager - DEBUG - Generated query: INSERT INTO complainants (complainant_id, complainant_province, complainant_district, complainant_unique_id) VALUES (%s, %s, %s, %s)
2025-09-10 14:36:36,613 - db_manager - INFO - Connecting to database: grievance_db
2025-09-10 14:36:36,618 - db_manager - INFO - Starting database transaction
2025-09-10 14:36:36,620 - db_manager - INFO - Transaction committed successfully
2025-09-10 14:36:36,620 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-10 14:36:36,620 - db_manager - INFO - create_complainant: Successfully created complainant with ID: CM-20250910-KOJH-F111-B
2025-09-10 14:36:36,620 - db_manager - INFO - create_grievance: Creating grievance with data: {'grievance_id': 'GR-20250910-KOJH-78FE-B', 'complainant_id': 'CM-20250910-KOJH-F111-B', 'grievance_description': 'there is dust everywhere in my house my kids are coughing a lot i need to go to the hospital but I dont have money', 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_office': None, 'source': 'bot', 'complainant_unique_id': 'CM-20250910-KOJH-F111-B'}
2025-09-10 14:36:36,620 - db_manager - INFO - create_grievance: Creating grievance with ID: GR-20250910-KOJH-78FE-B
2025-09-10 14:36:36,620 - db_manager - INFO - create_grievance: Creating grievance with allowed fields: ['grievance_id', 'complainant_id', 'grievance_categories', 'grievance_categories_alternative', 'grievance_summary', 'grievance_description', 'grievance_claimed_amount', 'grievance_location', 'is_temporary', 'source', 'language_code', 'grievance_classification_status']
2025-09-10 14:36:36,620 - db_manager - DEBUG - query_keys at generate_query_string: dict_keys(['grievance_id', 'complainant_id', 'grievance_description', 'source'])
2025-09-10 14:36:36,620 - db_manager - DEBUG - Generated query: INSERT INTO grievances (grievance_id, complainant_id, grievance_description, source) VALUES (%s, %s, %s, %s) RETURNING grievance_id
2025-09-10 14:36:36,620 - db_manager - DEBUG - len of query_keys: 4
2025-09-10 14:36:36,620 - db_manager - DEBUG - Generated query: INSERT INTO grievances (grievance_id, complainant_id, grievance_description, source) VALUES (%s, %s, %s, %s) RETURNING grievance_id
2025-09-10 14:36:36,620 - db_manager - INFO - Connecting to database: grievance_db
2025-09-10 14:36:36,625 - db_manager - INFO - Starting database transaction
2025-09-10 14:36:36,628 - db_manager - INFO - Transaction committed successfully
2025-09-10 14:36:36,629 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-10 14:36:36,629 - db_manager - INFO - create_grievance: Successfully created grievance with ID: GR-20250910-KOJH-78FE-B
2025-09-10 14:36:49,228 - db_manager - INFO - Connecting to database: grievance_db
2025-09-10 14:36:49,233 - db_manager - INFO - Starting database transaction
2025-09-10 14:36:49,233 - db_manager - INFO - Executing get_complainant_by_id: 
            SELECT complainant_id, complainant_unique_id, complainant_full_name,    complainant_pho...
2025-09-10 14:36:49,234 - db_manager - INFO - get_complainant_by_id completed in 0.01s. Rows: 1
2025-09-10 14:36:49,234 - db_manager - INFO - Transaction committed successfully
2025-09-10 14:36:49,234 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-10 14:36:49,235 - db_manager - INFO - Connecting to database: grievance_db
2025-09-10 14:36:49,239 - db_manager - INFO - Starting database transaction
2025-09-10 14:36:49,239 - db_manager - INFO - Executing get_grievance_by_id: 
                SELECT g.*, c.complainant_full_name, c.complainant_phone, c.complainant_email,
    ...
2025-09-10 14:36:49,241 - db_manager - INFO - get_grievance_by_id completed in 0.01s. Rows: 1
2025-09-10 14:36:49,241 - db_manager - INFO - Transaction committed successfully
2025-09-10 14:36:49,241 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-10 14:36:49,242 - db_manager - DEBUG - get_grievance_by_id: grievance_id: {'grievance_id': 'GR-20250910-KOJH-78FE-B', 'complainant_id': 'CM-20250910-KOJH-F111-B', 'grievance_categories': ['Environmental - Air Pollution'], 'grievance_categories_alternative': ['Safety - Road Safety Provisions', 'Economic, Social - Employment Opportunities'], 'grievance_summary': "The complainant's house is filled with dust causing their children to cough. They need medical attention but are unable to afford it.", 'grievance_description': 'there is dust everywhere in my house my kids are coughing a lot i need to go to the hospital but I dont have money', 'grievance_claimed_amount': None, 'grievance_location': None, 'language_code': 'en', 'grievance_classification_status': 'pending', 'grievance_creation_date': datetime.datetime(2025, 9, 10, 14, 36, 36, 625853, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'grievance_modification_date': datetime.datetime(2025, 9, 10, 14, 36, 40, 344244, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'is_temporary': True, 'source': 'bot', 'complainant_full_name': None, 'complainant_phone': None, 'complainant_email': None, 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_municipality': None, 'complainant_ward': None, 'complainant_village': None, 'complainant_address': None}, results: [{'grievance_id': 'GR-20250910-KOJH-78FE-B', 'complainant_id': 'CM-20250910-KOJH-F111-B', 'grievance_categories': '["Environmental - Air Pollution"]', 'grievance_categories_alternative': '["Safety - Road Safety Provisions", "Economic, Social - Employment Opportunities"]', 'grievance_summary': "The complainant's house is filled with dust causing their children to cough. They need medical attention but are unable to afford it.", 'grievance_description': 'there is dust everywhere in my house my kids are coughing a lot i need to go to the hospital but I dont have money', 'grievance_claimed_amount': None, 'grievance_location': None, 'language_code': 'en', 'grievance_classification_status': 'pending', 'grievance_creation_date': datetime.datetime(2025, 9, 10, 14, 36, 36, 625853, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'grievance_modification_date': datetime.datetime(2025, 9, 10, 14, 36, 40, 344244, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'is_temporary': True, 'source': 'bot', 'complainant_full_name': None, 'complainant_phone': None, 'complainant_email': None, 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_municipality': None, 'complainant_ward': None, 'complainant_village': None, 'complainant_address': None}]
2025-09-10 14:36:49,242 - db_manager - INFO - update_complainant: Updating complainant with ID: CM-20250910-KOJH-F111-B
2025-09-10 14:36:49,242 - db_manager - INFO - Connecting to database: grievance_db
2025-09-10 14:36:49,246 - db_manager - INFO - Starting database transaction
2025-09-10 14:36:49,246 - db_manager - INFO - Executing encrypt_field: SELECT encode(pgp_sym_encrypt(%s, %s), 'hex') AS encrypted...
2025-09-10 14:36:49,247 - db_manager - INFO - encrypt_field completed in 0.01s. Rows: 1
2025-09-10 14:36:49,248 - db_manager - INFO - Transaction committed successfully
2025-09-10 14:36:49,248 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-10 14:36:49,248 - db_manager - INFO - Connecting to database: grievance_db
2025-09-10 14:36:49,252 - db_manager - INFO - Starting database transaction
2025-09-10 14:36:49,253 - db_manager - INFO - Executing encrypt_field: SELECT encode(pgp_sym_encrypt(%s, %s), 'hex') AS encrypted...
2025-09-10 14:36:49,254 - db_manager - INFO - encrypt_field completed in 0.01s. Rows: 1
2025-09-10 14:36:49,254 - db_manager - INFO - Transaction committed successfully
2025-09-10 14:36:49,254 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-10 14:36:49,254 - db_manager - DEBUG - encrypted phone number Not provided at encrypt_complainant_data: c30d04070302334e5d4a1fe113bf73d23d01c62a013ff975dea30e69f617de4ffda6a54deef2035c001a7d93c3a6c7999bfd937d7c9a30b64433457e2c7ba417643962376aaefa27441f7bd743b5
2025-09-10 14:36:49,254 - db_manager - INFO - Connecting to database: grievance_db
2025-09-10 14:36:49,259 - db_manager - INFO - Starting database transaction
2025-09-10 14:36:49,259 - db_manager - INFO - Executing encrypt_field: SELECT encode(pgp_sym_encrypt(%s, %s), 'hex') AS encrypted...
2025-09-10 14:36:49,260 - db_manager - INFO - encrypt_field completed in 0.01s. Rows: 1
2025-09-10 14:36:49,260 - db_manager - INFO - Transaction committed successfully
2025-09-10 14:36:49,260 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-10 14:36:49,260 - db_manager - DEBUG - phone number Not provided hashed to d83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f at hash_sensitive_data
2025-09-10 14:36:49,260 - db_manager - DEBUG - encrypted and hashed data at encrypt_and_hash_sensitive_data: {'complainant_full_name': 'c30d04070302ab1d3b156fd5ea6f76d23d014ef9fd22efb57a54ab6d0b8577c9ec8b0894af65351fd3030e9b69be2b9061d5322da24e78ab48a51482db37d849a5aef20d52bd6216c1adcfc1ecaa', 'complainant_phone': 'c30d04070302334e5d4a1fe113bf73d23d01c62a013ff975dea30e69f617de4ffda6a54deef2035c001a7d93c3a6c7999bfd937d7c9a30b64433457e2c7ba417643962376aaefa27441f7bd743b5', 'complainant_email': 'c30d040703024d9e161f8b174c3d72d23d010326321e8abbe47daa2fc9c78fb935973b9529a7ac7e3bc49ea16051990d2d2c5fd103773f83f4b480bc74ea064c3e8b9c4eb7c1fc17e829b756c494', 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_email_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'complainant_phone_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'complainant_full_name_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f'}
2025-09-10 14:36:49,260 - db_manager - DEBUG - encrypted_data at update_complainant: {'complainant_full_name': 'c30d04070302ab1d3b156fd5ea6f76d23d014ef9fd22efb57a54ab6d0b8577c9ec8b0894af65351fd3030e9b69be2b9061d5322da24e78ab48a51482db37d849a5aef20d52bd6216c1adcfc1ecaa', 'complainant_phone': 'c30d04070302334e5d4a1fe113bf73d23d01c62a013ff975dea30e69f617de4ffda6a54deef2035c001a7d93c3a6c7999bfd937d7c9a30b64433457e2c7ba417643962376aaefa27441f7bd743b5', 'complainant_email': 'c30d040703024d9e161f8b174c3d72d23d010326321e8abbe47daa2fc9c78fb935973b9529a7ac7e3bc49ea16051990d2d2c5fd103773f83f4b480bc74ea064c3e8b9c4eb7c1fc17e829b756c494', 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_email_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'complainant_phone_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'complainant_full_name_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f'}
2025-09-10 14:36:49,260 - db_manager - DEBUG - execute_update values: ('c30d04070302ab1d3b156fd5ea6f76d23d014ef9fd22efb57a54ab6d0b8577c9ec8b0894af65351fd3030e9b69be2b9061d5322da24e78ab48a51482db37d849a5aef20d52bd6216c1adcfc1ecaa', 'c30d04070302334e5d4a1fe113bf73d23d01c62a013ff975dea30e69f617de4ffda6a54deef2035c001a7d93c3a6c7999bfd937d7c9a30b64433457e2c7ba417643962376aaefa27441f7bd743b5', 'c30d040703024d9e161f8b174c3d72d23d010326321e8abbe47daa2fc9c78fb935973b9529a7ac7e3bc49ea16051990d2d2c5fd103773f83f4b480bc74ea064c3e8b9c4eb7c1fc17e829b756c494', 'Koshi', 'Jhapa', 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'CM-20250910-KOJH-F111-B')
2025-09-10 14:36:49,260 - db_manager - DEBUG - execute_update query: UPDATE complainants SET complainant_full_name = %s, complainant_phone = %s, complainant_email = %s, complainant_province = %s, complainant_district = %s, complainant_email_hash = %s, complainant_phone_hash = %s, complainant_full_name_hash = %s WHERE complainant_id = %s
2025-09-10 14:36:49,260 - db_manager - INFO - Connecting to database: grievance_db
2025-09-10 14:36:49,265 - db_manager - INFO - Starting database transaction
2025-09-10 14:36:49,265 - db_manager - INFO - execute_update: Executing update query: UPDATE complainants SET complainant_full_name = %s, complainant_phone = %s, complainant_email = %s, ...
2025-09-10 14:36:49,266 - db_manager - INFO - execute_update: Update completed in 0.01s. Affected rows: 1
2025-09-10 14:36:49,268 - db_manager - INFO - Transaction committed successfully
2025-09-10 14:36:49,268 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-10 14:36:49,268 - db_manager - INFO - Complainant updated in db: CM-20250910-KOJH-F111-B
2025-09-10 14:36:49,268 - db_manager - INFO - update_grievance: Updating grievance with ID: GR-20250910-KOJH-78FE-B
2025-09-10 14:36:49,268 - db_manager - DEBUG - execute_update values: ('there is dust everywhere in my house my kids are coughing a lot i need to go to the hospital but I dont have money', 'GR-20250910-KOJH-78FE-B')
2025-09-10 14:36:49,268 - db_manager - DEBUG - execute_update query: 
                    UPDATE grievances 
                    SET grievance_description = %s, grievance_modification_date = CURRENT_TIMESTAMP
                    WHERE grievance_id = %s
                    RETURNING grievance_id
                
2025-09-10 14:36:49,268 - db_manager - INFO - Connecting to database: grievance_db
2025-09-10 14:36:49,272 - db_manager - INFO - Starting database transaction
2025-09-10 14:36:49,272 - db_manager - INFO - execute_update: Executing update query: 
                    UPDATE grievances 
                    SET grievance_description = %s, grievanc...
2025-09-10 14:36:49,274 - db_manager - INFO - execute_update: Update completed in 0.01s. Affected rows: 1
2025-09-10 14:36:49,276 - db_manager - INFO - Transaction committed successfully
2025-09-10 14:36:49,276 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-10 14:36:49,276 - db_manager - INFO - update_grievance: Updated grievance with ID: GR-20250910-KOJH-78FE-B, rows affected: 1
2025-09-10 14:36:49,276 - db_manager - INFO - Grievance updated in db: GR-20250910-KOJH-78FE-B
2025-09-10 14:36:49,276 - db_manager - INFO - Connecting to database: grievance_db
2025-09-10 14:36:49,281 - db_manager - INFO - Starting database transaction
2025-09-10 14:36:49,281 - db_manager - INFO - Executing get_grievance_files: 
            SELECT file_id, file_name, file_type, file_size, upload_timestamp
            FROM file...
2025-09-10 14:36:49,282 - db_manager - INFO - get_grievance_files completed in 0.01s. Rows: 0
2025-09-10 14:36:49,282 - db_manager - INFO - Transaction committed successfully
2025-09-10 14:36:49,282 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-10 14:36:49,282 - db_manager - INFO - Connecting to database: grievance_db
2025-09-10 14:36:49,286 - db_manager - INFO - Starting database transaction
2025-09-10 14:36:49,287 - db_manager - INFO - Executing get_grievance_files: 
            SELECT file_id, file_name, file_type, file_size, upload_timestamp
            FROM file...
2025-09-10 14:36:49,287 - db_manager - INFO - get_grievance_files completed in 0.01s. Rows: 0
2025-09-10 14:36:49,288 - db_manager - INFO - Transaction committed successfully
2025-09-10 14:36:49,288 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-10 14:36:49,328 - db_manager - INFO - Connecting to database: grievance_db
2025-09-10 14:36:49,333 - db_manager - INFO - Starting database transaction
2025-09-10 14:36:49,333 - db_manager - INFO - Executing get_grievance_by_id: 
                SELECT g.*, c.complainant_full_name, c.complainant_phone, c.complainant_email,
    ...
2025-09-10 14:36:49,334 - db_manager - INFO - get_grievance_by_id completed in 0.01s. Rows: 1
2025-09-10 14:36:49,334 - db_manager - INFO - Transaction committed successfully
2025-09-10 14:36:49,334 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-10 14:36:49,335 - db_manager - DEBUG - get_grievance_by_id: grievance_id: {'grievance_id': 'GR-20250910-KOJH-78FE-B', 'complainant_id': 'CM-20250910-KOJH-F111-B', 'grievance_categories': ['Environmental - Air Pollution'], 'grievance_categories_alternative': ['Safety - Road Safety Provisions', 'Economic, Social - Employment Opportunities'], 'grievance_summary': "The complainant's house is filled with dust causing their children to cough. They need medical attention but are unable to afford it.", 'grievance_description': 'there is dust everywhere in my house my kids are coughing a lot i need to go to the hospital but I dont have money', 'grievance_claimed_amount': None, 'grievance_location': None, 'language_code': 'en', 'grievance_classification_status': 'pending', 'grievance_creation_date': datetime.datetime(2025, 9, 10, 14, 36, 36, 625853, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'grievance_modification_date': datetime.datetime(2025, 9, 10, 14, 36, 49, 273050, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'is_temporary': True, 'source': 'bot', 'complainant_full_name': 'c30d04070302ab1d3b156fd5ea6f76d23d014ef9fd22efb57a54ab6d0b8577c9ec8b0894af65351fd3030e9b69be2b9061d5322da24e78ab48a51482db37d849a5aef20d52bd6216c1adcfc1ecaa', 'complainant_phone': 'c30d04070302334e5d4a1fe113bf73d23d01c62a013ff975dea30e69f617de4ffda6a54deef2035c001a7d93c3a6c7999bfd937d7c9a30b64433457e2c7ba417643962376aaefa27441f7bd743b5', 'complainant_email': 'c30d040703024d9e161f8b174c3d72d23d010326321e8abbe47daa2fc9c78fb935973b9529a7ac7e3bc49ea16051990d2d2c5fd103773f83f4b480bc74ea064c3e8b9c4eb7c1fc17e829b756c494', 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_municipality': None, 'complainant_ward': None, 'complainant_village': None, 'complainant_address': None}, results: [{'grievance_id': 'GR-20250910-KOJH-78FE-B', 'complainant_id': 'CM-20250910-KOJH-F111-B', 'grievance_categories': '["Environmental - Air Pollution"]', 'grievance_categories_alternative': '["Safety - Road Safety Provisions", "Economic, Social - Employment Opportunities"]', 'grievance_summary': "The complainant's house is filled with dust causing their children to cough. They need medical attention but are unable to afford it.", 'grievance_description': 'there is dust everywhere in my house my kids are coughing a lot i need to go to the hospital but I dont have money', 'grievance_claimed_amount': None, 'grievance_location': None, 'language_code': 'en', 'grievance_classification_status': 'pending', 'grievance_creation_date': datetime.datetime(2025, 9, 10, 14, 36, 36, 625853, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'grievance_modification_date': datetime.datetime(2025, 9, 10, 14, 36, 49, 273050, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'is_temporary': True, 'source': 'bot', 'complainant_full_name': 'c30d04070302ab1d3b156fd5ea6f76d23d014ef9fd22efb57a54ab6d0b8577c9ec8b0894af65351fd3030e9b69be2b9061d5322da24e78ab48a51482db37d849a5aef20d52bd6216c1adcfc1ecaa', 'complainant_phone': 'c30d04070302334e5d4a1fe113bf73d23d01c62a013ff975dea30e69f617de4ffda6a54deef2035c001a7d93c3a6c7999bfd937d7c9a30b64433457e2c7ba417643962376aaefa27441f7bd743b5', 'complainant_email': 'c30d040703024d9e161f8b174c3d72d23d010326321e8abbe47daa2fc9c78fb935973b9529a7ac7e3bc49ea16051990d2d2c5fd103773f83f4b480bc74ea064c3e8b9c4eb7c1fc17e829b756c494', 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_municipality': None, 'complainant_ward': None, 'complainant_village': None, 'complainant_address': None}]
2025-09-10 14:50:47,836 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-10 14:50:47,836 - db_manager - INFO - Database manager initialized successfully
2025-09-10 14:50:47,836 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-10 14:50:47,837 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-10 14:50:47,837 - db_manager - INFO - Database manager initialized successfully
2025-09-10 14:50:47,837 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-10 14:50:47,837 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-10 14:50:47,837 - db_manager - INFO - Database manager initialized successfully
2025-09-10 14:50:47,837 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-10 14:50:47,837 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-10 14:50:47,837 - db_manager - INFO - Database manager initialized successfully
2025-09-10 14:50:47,837 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-10 14:50:47,837 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-10 14:50:47,837 - db_manager - INFO - Database manager initialized successfully
2025-09-10 14:50:47,837 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-10 14:50:47,837 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-10 14:50:47,837 - db_manager - INFO - Database manager initialized successfully
2025-09-10 14:50:47,837 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-10 14:50:47,837 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-10 14:50:47,838 - db_manager - INFO - Database manager initialized successfully
2025-09-10 14:50:47,838 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-10 14:50:47,838 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-10 14:50:47,838 - db_manager - INFO - Database manager initialized successfully
2025-09-10 14:50:47,838 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-10 14:50:47,838 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-10 14:50:47,838 - db_manager - INFO - Database manager initialized successfully
2025-09-10 14:50:47,838 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-10 14:50:47,838 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-10 14:50:47,838 - db_manager - INFO - Database manager initialized successfully
2025-09-10 14:50:47,838 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-10 14:58:05,872 - db_manager - INFO - create_complainant: Creating complainant with ID: CM-20250910-KOJH-B2EB-B
2025-09-10 14:58:05,873 - db_manager - DEBUG - encrypted and hashed data at encrypt_and_hash_sensitive_data: {'complainant_id': 'CM-20250910-KOJH-B2EB-B', 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_unique_id': 'CM-20250910-KOJH-B2EB-B'}
2025-09-10 14:58:05,873 - db_manager - DEBUG - query_keys at generate_query_string: dict_keys(['complainant_id', 'complainant_province', 'complainant_district', 'complainant_unique_id'])
2025-09-10 14:58:05,873 - db_manager - DEBUG - Generated query: INSERT INTO complainants (complainant_id, complainant_province, complainant_district, complainant_unique_id) VALUES (%s, %s, %s, %s)
2025-09-10 14:58:05,873 - db_manager - DEBUG - len of query_keys: 4
2025-09-10 14:58:05,873 - db_manager - DEBUG - Generated query: INSERT INTO complainants (complainant_id, complainant_province, complainant_district, complainant_unique_id) VALUES (%s, %s, %s, %s)
2025-09-10 14:58:05,873 - db_manager - INFO - Connecting to database: grievance_db
2025-09-10 14:58:05,881 - db_manager - INFO - Starting database transaction
2025-09-10 14:58:05,885 - db_manager - INFO - Transaction committed successfully
2025-09-10 14:58:05,886 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-10 14:58:05,886 - db_manager - INFO - create_complainant: Successfully created complainant with ID: CM-20250910-KOJH-B2EB-B
2025-09-10 14:58:05,886 - db_manager - INFO - create_grievance: Creating grievance with data: {'grievance_id': 'GR-20250910-KOJH-F571-B', 'complainant_id': 'CM-20250910-KOJH-B2EB-B', 'grievance_description': 'dust everywhere in my house\nI need to go to the hospital for my kids\nthey are so sick', 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_office': None, 'source': 'bot', 'complainant_unique_id': 'CM-20250910-KOJH-B2EB-B'}
2025-09-10 14:58:05,886 - db_manager - INFO - create_grievance: Creating grievance with ID: GR-20250910-KOJH-F571-B
2025-09-10 14:58:05,886 - db_manager - INFO - create_grievance: Creating grievance with allowed fields: ['grievance_id', 'complainant_id', 'grievance_categories', 'grievance_categories_alternative', 'grievance_summary', 'grievance_description', 'grievance_claimed_amount', 'grievance_location', 'is_temporary', 'source', 'language_code', 'grievance_classification_status']
2025-09-10 14:58:05,886 - db_manager - DEBUG - query_keys at generate_query_string: dict_keys(['grievance_id', 'complainant_id', 'grievance_description', 'source'])
2025-09-10 14:58:05,886 - db_manager - DEBUG - Generated query: INSERT INTO grievances (grievance_id, complainant_id, grievance_description, source) VALUES (%s, %s, %s, %s) RETURNING grievance_id
2025-09-10 14:58:05,886 - db_manager - DEBUG - len of query_keys: 4
2025-09-10 14:58:05,886 - db_manager - DEBUG - Generated query: INSERT INTO grievances (grievance_id, complainant_id, grievance_description, source) VALUES (%s, %s, %s, %s) RETURNING grievance_id
2025-09-10 14:58:05,886 - db_manager - INFO - Connecting to database: grievance_db
2025-09-10 14:58:05,891 - db_manager - INFO - Starting database transaction
2025-09-10 14:58:05,896 - db_manager - INFO - Transaction committed successfully
2025-09-10 14:58:05,896 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-10 14:58:05,896 - db_manager - INFO - create_grievance: Successfully created grievance with ID: GR-20250910-KOJH-F571-B
2025-09-10 14:58:23,182 - db_manager - INFO - Connecting to database: grievance_db
2025-09-10 14:58:23,188 - db_manager - INFO - Starting database transaction
2025-09-10 14:58:23,188 - db_manager - INFO - Executing get_complainant_by_id: 
            SELECT complainant_id, complainant_unique_id, complainant_full_name,    complainant_pho...
2025-09-10 14:58:23,189 - db_manager - INFO - get_complainant_by_id completed in 0.01s. Rows: 1
2025-09-10 14:58:23,189 - db_manager - INFO - Transaction committed successfully
2025-09-10 14:58:23,189 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-10 14:58:23,189 - db_manager - INFO - Connecting to database: grievance_db
2025-09-10 14:58:23,194 - db_manager - INFO - Starting database transaction
2025-09-10 14:58:23,194 - db_manager - INFO - Executing get_grievance_by_id: 
                SELECT g.*, c.complainant_full_name, c.complainant_phone, c.complainant_email,
    ...
2025-09-10 14:58:23,195 - db_manager - INFO - get_grievance_by_id completed in 0.01s. Rows: 1
2025-09-10 14:58:23,195 - db_manager - INFO - Transaction committed successfully
2025-09-10 14:58:23,196 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-10 14:58:23,196 - db_manager - DEBUG - get_grievance_by_id: grievance_id: {'grievance_id': 'GR-20250910-KOJH-F571-B', 'complainant_id': 'CM-20250910-KOJH-B2EB-B', 'grievance_categories': ['Environmental - Air Pollution', 'Safety - Road Safety Provisions'], 'grievance_categories_alternative': ['Environmental - Drainage And Sewage Management', 'Environmental - Noise Pollution'], 'grievance_summary': 'Dust from road works is making the house dirty and causing sickness in children', 'grievance_description': 'dust everywhere in my house\nI need to go to the hospital for my kids\nthey are so sick', 'grievance_claimed_amount': None, 'grievance_location': None, 'language_code': 'en', 'grievance_classification_status': 'pending', 'grievance_creation_date': datetime.datetime(2025, 9, 10, 14, 58, 5, 891926, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'grievance_modification_date': datetime.datetime(2025, 9, 10, 14, 58, 10, 147361, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'is_temporary': True, 'source': 'bot', 'complainant_full_name': None, 'complainant_phone': None, 'complainant_email': None, 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_municipality': None, 'complainant_ward': None, 'complainant_village': None, 'complainant_address': None}, results: [{'grievance_id': 'GR-20250910-KOJH-F571-B', 'complainant_id': 'CM-20250910-KOJH-B2EB-B', 'grievance_categories': '["Environmental - Air Pollution", "Safety - Road Safety Provisions"]', 'grievance_categories_alternative': '["Environmental - Drainage And Sewage Management", "Environmental - Noise Pollution"]', 'grievance_summary': 'Dust from road works is making the house dirty and causing sickness in children', 'grievance_description': 'dust everywhere in my house\nI need to go to the hospital for my kids\nthey are so sick', 'grievance_claimed_amount': None, 'grievance_location': None, 'language_code': 'en', 'grievance_classification_status': 'pending', 'grievance_creation_date': datetime.datetime(2025, 9, 10, 14, 58, 5, 891926, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'grievance_modification_date': datetime.datetime(2025, 9, 10, 14, 58, 10, 147361, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'is_temporary': True, 'source': 'bot', 'complainant_full_name': None, 'complainant_phone': None, 'complainant_email': None, 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_municipality': None, 'complainant_ward': None, 'complainant_village': None, 'complainant_address': None}]
2025-09-10 14:58:23,196 - db_manager - INFO - update_complainant: Updating complainant with ID: CM-20250910-KOJH-B2EB-B
2025-09-10 14:58:23,196 - db_manager - INFO - Connecting to database: grievance_db
2025-09-10 14:58:23,200 - db_manager - INFO - Starting database transaction
2025-09-10 14:58:23,200 - db_manager - INFO - Executing encrypt_field: SELECT encode(pgp_sym_encrypt(%s, %s), 'hex') AS encrypted...
2025-09-10 14:58:23,203 - db_manager - INFO - encrypt_field completed in 0.01s. Rows: 1
2025-09-10 14:58:23,203 - db_manager - INFO - Transaction committed successfully
2025-09-10 14:58:23,203 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-10 14:58:23,203 - db_manager - INFO - Connecting to database: grievance_db
2025-09-10 14:58:23,208 - db_manager - INFO - Starting database transaction
2025-09-10 14:58:23,208 - db_manager - INFO - Executing encrypt_field: SELECT encode(pgp_sym_encrypt(%s, %s), 'hex') AS encrypted...
2025-09-10 14:58:23,209 - db_manager - INFO - encrypt_field completed in 0.01s. Rows: 1
2025-09-10 14:58:23,209 - db_manager - INFO - Transaction committed successfully
2025-09-10 14:58:23,209 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-10 14:58:23,209 - db_manager - INFO - Connecting to database: grievance_db
2025-09-10 14:58:23,214 - db_manager - INFO - Starting database transaction
2025-09-10 14:58:23,214 - db_manager - INFO - Executing encrypt_field: SELECT encode(pgp_sym_encrypt(%s, %s), 'hex') AS encrypted...
2025-09-10 14:58:23,215 - db_manager - INFO - encrypt_field completed in 0.01s. Rows: 1
2025-09-10 14:58:23,215 - db_manager - INFO - Transaction committed successfully
2025-09-10 14:58:23,215 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-10 14:58:23,215 - db_manager - DEBUG - encrypted phone number Not provided at encrypt_complainant_data: c30d04070302a4b4699be0838c4d6bd23d01e706defab03cbc93d62655ca3544bfbc4e9ed111883ba5f635e290f262214e81318af62bd37e82beed84d0835bacac77754712d49a0ac562e6c51ca4
2025-09-10 14:58:23,215 - db_manager - DEBUG - phone number Not provided hashed to d83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f at hash_sensitive_data
2025-09-10 14:58:23,215 - db_manager - DEBUG - encrypted and hashed data at encrypt_and_hash_sensitive_data: {'complainant_full_name': 'c30d04070302dac7395e6663ccb470d23d01b6a20475d00b5e2c73594bb36041f0608c6481bfbe842c55a243345122e4af80c059fd050ac5d285106194c600a2b146fb1c3c45575438bd87dde6cb', 'complainant_phone': 'c30d04070302a4b4699be0838c4d6bd23d01e706defab03cbc93d62655ca3544bfbc4e9ed111883ba5f635e290f262214e81318af62bd37e82beed84d0835bacac77754712d49a0ac562e6c51ca4', 'complainant_email': 'c30d04070302729d7540e380d65d6dd23d01770c69882896310610ff5378e9052364fab1988ce0f6f178ceacc10da0d9351db9e8c32ae05d84a19a99dccf98de79cdbaa580257c9087722314a462', 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_full_name_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'complainant_email_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'complainant_phone_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f'}
2025-09-10 14:58:23,215 - db_manager - DEBUG - encrypted_data at update_complainant: {'complainant_full_name': 'c30d04070302dac7395e6663ccb470d23d01b6a20475d00b5e2c73594bb36041f0608c6481bfbe842c55a243345122e4af80c059fd050ac5d285106194c600a2b146fb1c3c45575438bd87dde6cb', 'complainant_phone': 'c30d04070302a4b4699be0838c4d6bd23d01e706defab03cbc93d62655ca3544bfbc4e9ed111883ba5f635e290f262214e81318af62bd37e82beed84d0835bacac77754712d49a0ac562e6c51ca4', 'complainant_email': 'c30d04070302729d7540e380d65d6dd23d01770c69882896310610ff5378e9052364fab1988ce0f6f178ceacc10da0d9351db9e8c32ae05d84a19a99dccf98de79cdbaa580257c9087722314a462', 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_full_name_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'complainant_email_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'complainant_phone_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f'}
2025-09-10 14:58:23,215 - db_manager - DEBUG - execute_update values: ('c30d04070302dac7395e6663ccb470d23d01b6a20475d00b5e2c73594bb36041f0608c6481bfbe842c55a243345122e4af80c059fd050ac5d285106194c600a2b146fb1c3c45575438bd87dde6cb', 'c30d04070302a4b4699be0838c4d6bd23d01e706defab03cbc93d62655ca3544bfbc4e9ed111883ba5f635e290f262214e81318af62bd37e82beed84d0835bacac77754712d49a0ac562e6c51ca4', 'c30d04070302729d7540e380d65d6dd23d01770c69882896310610ff5378e9052364fab1988ce0f6f178ceacc10da0d9351db9e8c32ae05d84a19a99dccf98de79cdbaa580257c9087722314a462', 'Koshi', 'Jhapa', 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'CM-20250910-KOJH-B2EB-B')
2025-09-10 14:58:23,215 - db_manager - DEBUG - execute_update query: UPDATE complainants SET complainant_full_name = %s, complainant_phone = %s, complainant_email = %s, complainant_province = %s, complainant_district = %s, complainant_full_name_hash = %s, complainant_email_hash = %s, complainant_phone_hash = %s WHERE complainant_id = %s
2025-09-10 14:58:23,215 - db_manager - INFO - Connecting to database: grievance_db
2025-09-10 14:58:23,220 - db_manager - INFO - Starting database transaction
2025-09-10 14:58:23,221 - db_manager - INFO - execute_update: Executing update query: UPDATE complainants SET complainant_full_name = %s, complainant_phone = %s, complainant_email = %s, ...
2025-09-10 14:58:23,221 - db_manager - INFO - execute_update: Update completed in 0.01s. Affected rows: 1
2025-09-10 14:58:23,223 - db_manager - INFO - Transaction committed successfully
2025-09-10 14:58:23,223 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-10 14:58:23,224 - db_manager - INFO - Complainant updated in db: CM-20250910-KOJH-B2EB-B
2025-09-10 14:58:23,224 - db_manager - INFO - update_grievance: Updating grievance with ID: GR-20250910-KOJH-F571-B
2025-09-10 14:58:23,224 - db_manager - DEBUG - execute_update values: ('dust everywhere in my house\nI need to go to the hospital for my kids\nthey are so sick', 'GR-20250910-KOJH-F571-B')
2025-09-10 14:58:23,224 - db_manager - DEBUG - execute_update query: 
                    UPDATE grievances 
                    SET grievance_description = %s, grievance_modification_date = CURRENT_TIMESTAMP
                    WHERE grievance_id = %s
                    RETURNING grievance_id
                
2025-09-10 14:58:23,224 - db_manager - INFO - Connecting to database: grievance_db
2025-09-10 14:58:23,229 - db_manager - INFO - Starting database transaction
2025-09-10 14:58:23,229 - db_manager - INFO - execute_update: Executing update query: 
                    UPDATE grievances 
                    SET grievance_description = %s, grievanc...
2025-09-10 14:58:23,230 - db_manager - INFO - execute_update: Update completed in 0.01s. Affected rows: 1
2025-09-10 14:58:23,232 - db_manager - INFO - Transaction committed successfully
2025-09-10 14:58:23,232 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-10 14:58:23,232 - db_manager - INFO - update_grievance: Updated grievance with ID: GR-20250910-KOJH-F571-B, rows affected: 1
2025-09-10 14:58:23,232 - db_manager - INFO - Grievance updated in db: GR-20250910-KOJH-F571-B
2025-09-10 14:58:23,232 - db_manager - INFO - Connecting to database: grievance_db
2025-09-10 14:58:23,237 - db_manager - INFO - Starting database transaction
2025-09-10 14:58:23,237 - db_manager - INFO - Executing get_grievance_files: 
            SELECT file_id, file_name, file_type, file_size, upload_timestamp
            FROM file...
2025-09-10 14:58:23,239 - db_manager - INFO - get_grievance_files completed in 0.01s. Rows: 0
2025-09-10 14:58:23,239 - db_manager - INFO - Transaction committed successfully
2025-09-10 14:58:23,239 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-10 14:58:23,239 - db_manager - INFO - Connecting to database: grievance_db
2025-09-10 14:58:23,243 - db_manager - INFO - Starting database transaction
2025-09-10 14:58:23,243 - db_manager - INFO - Executing get_grievance_files: 
            SELECT file_id, file_name, file_type, file_size, upload_timestamp
            FROM file...
2025-09-10 14:58:23,244 - db_manager - INFO - get_grievance_files completed in 0.01s. Rows: 0
2025-09-10 14:58:23,244 - db_manager - INFO - Transaction committed successfully
2025-09-10 14:58:23,244 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-10 14:58:23,286 - db_manager - INFO - Connecting to database: grievance_db
2025-09-10 14:58:23,291 - db_manager - INFO - Starting database transaction
2025-09-10 14:58:23,291 - db_manager - INFO - Executing get_grievance_by_id: 
                SELECT g.*, c.complainant_full_name, c.complainant_phone, c.complainant_email,
    ...
2025-09-10 14:58:23,293 - db_manager - INFO - get_grievance_by_id completed in 0.01s. Rows: 1
2025-09-10 14:58:23,293 - db_manager - INFO - Transaction committed successfully
2025-09-10 14:58:23,293 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-10 14:58:23,293 - db_manager - DEBUG - get_grievance_by_id: grievance_id: {'grievance_id': 'GR-20250910-KOJH-F571-B', 'complainant_id': 'CM-20250910-KOJH-B2EB-B', 'grievance_categories': ['Environmental - Air Pollution', 'Safety - Road Safety Provisions'], 'grievance_categories_alternative': ['Environmental - Drainage And Sewage Management', 'Environmental - Noise Pollution'], 'grievance_summary': 'Dust from road works is making the house dirty and causing sickness in children', 'grievance_description': 'dust everywhere in my house\nI need to go to the hospital for my kids\nthey are so sick', 'grievance_claimed_amount': None, 'grievance_location': None, 'language_code': 'en', 'grievance_classification_status': 'pending', 'grievance_creation_date': datetime.datetime(2025, 9, 10, 14, 58, 5, 891926, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'grievance_modification_date': datetime.datetime(2025, 9, 10, 14, 58, 23, 229632, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'is_temporary': True, 'source': 'bot', 'complainant_full_name': 'c30d04070302dac7395e6663ccb470d23d01b6a20475d00b5e2c73594bb36041f0608c6481bfbe842c55a243345122e4af80c059fd050ac5d285106194c600a2b146fb1c3c45575438bd87dde6cb', 'complainant_phone': 'c30d04070302a4b4699be0838c4d6bd23d01e706defab03cbc93d62655ca3544bfbc4e9ed111883ba5f635e290f262214e81318af62bd37e82beed84d0835bacac77754712d49a0ac562e6c51ca4', 'complainant_email': 'c30d04070302729d7540e380d65d6dd23d01770c69882896310610ff5378e9052364fab1988ce0f6f178ceacc10da0d9351db9e8c32ae05d84a19a99dccf98de79cdbaa580257c9087722314a462', 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_municipality': None, 'complainant_ward': None, 'complainant_village': None, 'complainant_address': None}, results: [{'grievance_id': 'GR-20250910-KOJH-F571-B', 'complainant_id': 'CM-20250910-KOJH-B2EB-B', 'grievance_categories': '["Environmental - Air Pollution", "Safety - Road Safety Provisions"]', 'grievance_categories_alternative': '["Environmental - Drainage And Sewage Management", "Environmental - Noise Pollution"]', 'grievance_summary': 'Dust from road works is making the house dirty and causing sickness in children', 'grievance_description': 'dust everywhere in my house\nI need to go to the hospital for my kids\nthey are so sick', 'grievance_claimed_amount': None, 'grievance_location': None, 'language_code': 'en', 'grievance_classification_status': 'pending', 'grievance_creation_date': datetime.datetime(2025, 9, 10, 14, 58, 5, 891926, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'grievance_modification_date': datetime.datetime(2025, 9, 10, 14, 58, 23, 229632, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'is_temporary': True, 'source': 'bot', 'complainant_full_name': 'c30d04070302dac7395e6663ccb470d23d01b6a20475d00b5e2c73594bb36041f0608c6481bfbe842c55a243345122e4af80c059fd050ac5d285106194c600a2b146fb1c3c45575438bd87dde6cb', 'complainant_phone': 'c30d04070302a4b4699be0838c4d6bd23d01e706defab03cbc93d62655ca3544bfbc4e9ed111883ba5f635e290f262214e81318af62bd37e82beed84d0835bacac77754712d49a0ac562e6c51ca4', 'complainant_email': 'c30d04070302729d7540e380d65d6dd23d01770c69882896310610ff5378e9052364fab1988ce0f6f178ceacc10da0d9351db9e8c32ae05d84a19a99dccf98de79cdbaa580257c9087722314a462', 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_municipality': None, 'complainant_ward': None, 'complainant_village': None, 'complainant_address': None}]
2025-09-10 15:09:50,877 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-10 15:09:50,877 - db_manager - INFO - Database manager initialized successfully
2025-09-10 15:09:50,877 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-10 15:09:50,878 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-10 15:09:50,878 - db_manager - INFO - Database manager initialized successfully
2025-09-10 15:09:50,878 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-10 15:09:50,878 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-10 15:09:50,878 - db_manager - INFO - Database manager initialized successfully
2025-09-10 15:09:50,878 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-10 15:09:50,878 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-10 15:09:50,878 - db_manager - INFO - Database manager initialized successfully
2025-09-10 15:09:50,878 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-10 15:09:50,878 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-10 15:09:50,878 - db_manager - INFO - Database manager initialized successfully
2025-09-10 15:09:50,878 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-10 15:09:50,878 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-10 15:09:50,878 - db_manager - INFO - Database manager initialized successfully
2025-09-10 15:09:50,878 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-10 15:09:50,878 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-10 15:09:50,878 - db_manager - INFO - Database manager initialized successfully
2025-09-10 15:09:50,878 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-10 15:09:50,879 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-10 15:09:50,879 - db_manager - INFO - Database manager initialized successfully
2025-09-10 15:09:50,879 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-10 15:09:50,879 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-10 15:09:50,879 - db_manager - INFO - Database manager initialized successfully
2025-09-10 15:09:50,879 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-10 15:09:50,879 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-10 15:09:50,879 - db_manager - INFO - Database manager initialized successfully
2025-09-10 15:09:50,879 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-10 15:11:17,618 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-10 15:11:17,619 - db_manager - INFO - Database manager initialized successfully
2025-09-10 15:11:17,619 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-10 15:11:17,619 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-10 15:11:17,619 - db_manager - INFO - Database manager initialized successfully
2025-09-10 15:11:17,619 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-10 15:11:17,619 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-10 15:11:17,619 - db_manager - INFO - Database manager initialized successfully
2025-09-10 15:11:17,619 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-10 15:11:17,619 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-10 15:11:17,619 - db_manager - INFO - Database manager initialized successfully
2025-09-10 15:11:17,619 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-10 15:11:17,619 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-10 15:11:17,619 - db_manager - INFO - Database manager initialized successfully
2025-09-10 15:11:17,619 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-10 15:11:17,619 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-10 15:11:17,619 - db_manager - INFO - Database manager initialized successfully
2025-09-10 15:11:17,619 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-10 15:11:17,619 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-10 15:11:17,620 - db_manager - INFO - Database manager initialized successfully
2025-09-10 15:11:17,620 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-10 15:11:17,620 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-10 15:11:17,620 - db_manager - INFO - Database manager initialized successfully
2025-09-10 15:11:17,620 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-10 15:11:17,620 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-10 15:11:17,620 - db_manager - INFO - Database manager initialized successfully
2025-09-10 15:11:17,620 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-10 15:11:17,620 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-10 15:11:17,620 - db_manager - INFO - Database manager initialized successfully
2025-09-10 15:11:17,620 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-10 15:13:02,570 - db_manager - INFO - create_complainant: Creating complainant with ID: CM-20250910-KOJH-837A-B
2025-09-10 15:13:02,570 - db_manager - DEBUG - encrypted and hashed data at encrypt_and_hash_sensitive_data: {'complainant_id': 'CM-20250910-KOJH-837A-B', 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_unique_id': 'CM-20250910-KOJH-837A-B'}
2025-09-10 15:13:02,570 - db_manager - DEBUG - query_keys at generate_query_string: dict_keys(['complainant_id', 'complainant_province', 'complainant_district', 'complainant_unique_id'])
2025-09-10 15:13:02,570 - db_manager - DEBUG - Generated query: INSERT INTO complainants (complainant_id, complainant_province, complainant_district, complainant_unique_id) VALUES (%s, %s, %s, %s)
2025-09-10 15:13:02,570 - db_manager - DEBUG - len of query_keys: 4
2025-09-10 15:13:02,570 - db_manager - DEBUG - Generated query: INSERT INTO complainants (complainant_id, complainant_province, complainant_district, complainant_unique_id) VALUES (%s, %s, %s, %s)
2025-09-10 15:13:02,570 - db_manager - INFO - Connecting to database: grievance_db
2025-09-10 15:13:02,577 - db_manager - INFO - Starting database transaction
2025-09-10 15:13:02,580 - db_manager - INFO - Transaction committed successfully
2025-09-10 15:13:02,580 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-10 15:13:02,580 - db_manager - INFO - create_complainant: Successfully created complainant with ID: CM-20250910-KOJH-837A-B
2025-09-10 15:13:02,580 - db_manager - INFO - create_grievance: Creating grievance with data: {'grievance_id': 'GR-20250910-KOJH-307B-B', 'complainant_id': 'CM-20250910-KOJH-837A-B', 'grievance_description': 'there is dust everywhere I need to go to the hospital i dont know what to do', 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_office': None, 'source': 'bot', 'complainant_unique_id': 'CM-20250910-KOJH-837A-B'}
2025-09-10 15:13:02,580 - db_manager - INFO - create_grievance: Creating grievance with ID: GR-20250910-KOJH-307B-B
2025-09-10 15:13:02,580 - db_manager - INFO - create_grievance: Creating grievance with allowed fields: ['grievance_id', 'complainant_id', 'grievance_categories', 'grievance_categories_alternative', 'grievance_summary', 'grievance_description', 'grievance_claimed_amount', 'grievance_location', 'is_temporary', 'source', 'language_code', 'grievance_classification_status']
2025-09-10 15:13:02,580 - db_manager - DEBUG - query_keys at generate_query_string: dict_keys(['grievance_id', 'complainant_id', 'grievance_description', 'source'])
2025-09-10 15:13:02,580 - db_manager - DEBUG - Generated query: INSERT INTO grievances (grievance_id, complainant_id, grievance_description, source) VALUES (%s, %s, %s, %s) RETURNING grievance_id
2025-09-10 15:13:02,580 - db_manager - DEBUG - len of query_keys: 4
2025-09-10 15:13:02,580 - db_manager - DEBUG - Generated query: INSERT INTO grievances (grievance_id, complainant_id, grievance_description, source) VALUES (%s, %s, %s, %s) RETURNING grievance_id
2025-09-10 15:13:02,580 - db_manager - INFO - Connecting to database: grievance_db
2025-09-10 15:13:02,585 - db_manager - INFO - Starting database transaction
2025-09-10 15:13:02,590 - db_manager - INFO - Transaction committed successfully
2025-09-10 15:13:02,590 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-10 15:13:02,590 - db_manager - INFO - create_grievance: Successfully created grievance with ID: GR-20250910-KOJH-307B-B
2025-09-10 15:13:22,402 - db_manager - INFO - Connecting to database: grievance_db
2025-09-10 15:13:22,407 - db_manager - INFO - Starting database transaction
2025-09-10 15:13:22,407 - db_manager - INFO - Executing get_complainant_by_id: 
            SELECT complainant_id, complainant_unique_id, complainant_full_name,    complainant_pho...
2025-09-10 15:13:22,408 - db_manager - INFO - get_complainant_by_id completed in 0.01s. Rows: 1
2025-09-10 15:13:22,408 - db_manager - INFO - Transaction committed successfully
2025-09-10 15:13:22,408 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-10 15:13:22,408 - db_manager - INFO - Connecting to database: grievance_db
2025-09-10 15:13:22,413 - db_manager - INFO - Starting database transaction
2025-09-10 15:13:22,413 - db_manager - INFO - Executing get_grievance_by_id: 
                SELECT g.*, c.complainant_full_name, c.complainant_phone, c.complainant_email,
    ...
2025-09-10 15:13:22,414 - db_manager - INFO - get_grievance_by_id completed in 0.01s. Rows: 1
2025-09-10 15:13:22,414 - db_manager - INFO - Transaction committed successfully
2025-09-10 15:13:22,414 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-10 15:13:22,414 - db_manager - DEBUG - get_grievance_by_id: grievance_id: {'grievance_id': 'GR-20250910-KOJH-307B-B', 'complainant_id': 'CM-20250910-KOJH-837A-B', 'grievance_categories': None, 'grievance_categories_alternative': None, 'grievance_summary': None, 'grievance_description': 'there is dust everywhere I need to go to the hospital i dont know what to do', 'grievance_claimed_amount': None, 'grievance_location': None, 'language_code': 'ne', 'grievance_classification_status': 'pending', 'grievance_creation_date': datetime.datetime(2025, 9, 10, 15, 13, 2, 585446, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'grievance_modification_date': datetime.datetime(2025, 9, 10, 15, 13, 2, 585446, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'is_temporary': True, 'source': 'bot', 'complainant_full_name': None, 'complainant_phone': None, 'complainant_email': None, 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_municipality': None, 'complainant_ward': None, 'complainant_village': None, 'complainant_address': None}, results: [{'grievance_id': 'GR-20250910-KOJH-307B-B', 'complainant_id': 'CM-20250910-KOJH-837A-B', 'grievance_categories': None, 'grievance_categories_alternative': None, 'grievance_summary': None, 'grievance_description': 'there is dust everywhere I need to go to the hospital i dont know what to do', 'grievance_claimed_amount': None, 'grievance_location': None, 'language_code': 'ne', 'grievance_classification_status': 'pending', 'grievance_creation_date': datetime.datetime(2025, 9, 10, 15, 13, 2, 585446, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'grievance_modification_date': datetime.datetime(2025, 9, 10, 15, 13, 2, 585446, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'is_temporary': True, 'source': 'bot', 'complainant_full_name': None, 'complainant_phone': None, 'complainant_email': None, 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_municipality': None, 'complainant_ward': None, 'complainant_village': None, 'complainant_address': None}]
2025-09-10 15:13:22,414 - db_manager - INFO - update_complainant: Updating complainant with ID: CM-20250910-KOJH-837A-B
2025-09-10 15:13:22,415 - db_manager - INFO - Connecting to database: grievance_db
2025-09-10 15:13:22,419 - db_manager - INFO - Starting database transaction
2025-09-10 15:13:22,419 - db_manager - INFO - Executing encrypt_field: SELECT encode(pgp_sym_encrypt(%s, %s), 'hex') AS encrypted...
2025-09-10 15:13:22,422 - db_manager - INFO - encrypt_field completed in 0.01s. Rows: 1
2025-09-10 15:13:22,422 - db_manager - INFO - Transaction committed successfully
2025-09-10 15:13:22,422 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-10 15:13:22,422 - db_manager - INFO - Connecting to database: grievance_db
2025-09-10 15:13:22,426 - db_manager - INFO - Starting database transaction
2025-09-10 15:13:22,427 - db_manager - INFO - Executing encrypt_field: SELECT encode(pgp_sym_encrypt(%s, %s), 'hex') AS encrypted...
2025-09-10 15:13:22,427 - db_manager - INFO - encrypt_field completed in 0.01s. Rows: 1
2025-09-10 15:13:22,428 - db_manager - INFO - Transaction committed successfully
2025-09-10 15:13:22,428 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-10 15:13:22,428 - db_manager - DEBUG - encrypted phone number Not provided at encrypt_complainant_data: c30d04070302ae64cb0a34eada0e78d23d0155c13d38d8d64f03b1fe9d170915465672c2f9e637db5e97047399d098370aceda29631e858e380a57e144f1f6054e0da835bf122a97d72d684fbcdd
2025-09-10 15:13:22,428 - db_manager - INFO - Connecting to database: grievance_db
2025-09-10 15:13:22,432 - db_manager - INFO - Starting database transaction
2025-09-10 15:13:22,432 - db_manager - INFO - Executing encrypt_field: SELECT encode(pgp_sym_encrypt(%s, %s), 'hex') AS encrypted...
2025-09-10 15:13:22,433 - db_manager - INFO - encrypt_field completed in 0.01s. Rows: 1
2025-09-10 15:13:22,433 - db_manager - INFO - Transaction committed successfully
2025-09-10 15:13:22,433 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-10 15:13:22,434 - db_manager - DEBUG - phone number Not provided hashed to d83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f at hash_sensitive_data
2025-09-10 15:13:22,434 - db_manager - DEBUG - encrypted and hashed data at encrypt_and_hash_sensitive_data: {'complainant_full_name': 'c30d040703022465a761c4a05f5878d23d01017d726d2794898d6cb3739b38b1fb20391ce612501b29a993535405c680d66638874fd497f012e9e8fa7802e9b869df6dd1d03d92d39fac541cbcaf', 'complainant_phone': 'c30d04070302ae64cb0a34eada0e78d23d0155c13d38d8d64f03b1fe9d170915465672c2f9e637db5e97047399d098370aceda29631e858e380a57e144f1f6054e0da835bf122a97d72d684fbcdd', 'complainant_email': 'c30d04070302a945928eee5d699470d23d011fc8d6b18a346988af873bae6b2d95d0a5d275113fa1e610ffef19f565ba7e09a7e4c920e2b3bf6246430be7868aae97c1194223c5e7084908a027a6', 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_email_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'complainant_phone_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'complainant_full_name_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f'}
2025-09-10 15:13:22,434 - db_manager - DEBUG - encrypted_data at update_complainant: {'complainant_full_name': 'c30d040703022465a761c4a05f5878d23d01017d726d2794898d6cb3739b38b1fb20391ce612501b29a993535405c680d66638874fd497f012e9e8fa7802e9b869df6dd1d03d92d39fac541cbcaf', 'complainant_phone': 'c30d04070302ae64cb0a34eada0e78d23d0155c13d38d8d64f03b1fe9d170915465672c2f9e637db5e97047399d098370aceda29631e858e380a57e144f1f6054e0da835bf122a97d72d684fbcdd', 'complainant_email': 'c30d04070302a945928eee5d699470d23d011fc8d6b18a346988af873bae6b2d95d0a5d275113fa1e610ffef19f565ba7e09a7e4c920e2b3bf6246430be7868aae97c1194223c5e7084908a027a6', 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_email_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'complainant_phone_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'complainant_full_name_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f'}
2025-09-10 15:13:22,434 - db_manager - DEBUG - execute_update values: ('c30d040703022465a761c4a05f5878d23d01017d726d2794898d6cb3739b38b1fb20391ce612501b29a993535405c680d66638874fd497f012e9e8fa7802e9b869df6dd1d03d92d39fac541cbcaf', 'c30d04070302ae64cb0a34eada0e78d23d0155c13d38d8d64f03b1fe9d170915465672c2f9e637db5e97047399d098370aceda29631e858e380a57e144f1f6054e0da835bf122a97d72d684fbcdd', 'c30d04070302a945928eee5d699470d23d011fc8d6b18a346988af873bae6b2d95d0a5d275113fa1e610ffef19f565ba7e09a7e4c920e2b3bf6246430be7868aae97c1194223c5e7084908a027a6', 'Koshi', 'Jhapa', 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'CM-20250910-KOJH-837A-B')
2025-09-10 15:13:22,434 - db_manager - DEBUG - execute_update query: UPDATE complainants SET complainant_full_name = %s, complainant_phone = %s, complainant_email = %s, complainant_province = %s, complainant_district = %s, complainant_email_hash = %s, complainant_phone_hash = %s, complainant_full_name_hash = %s WHERE complainant_id = %s
2025-09-10 15:13:22,434 - db_manager - INFO - Connecting to database: grievance_db
2025-09-10 15:13:22,440 - db_manager - INFO - Starting database transaction
2025-09-10 15:13:22,440 - db_manager - INFO - execute_update: Executing update query: UPDATE complainants SET complainant_full_name = %s, complainant_phone = %s, complainant_email = %s, ...
2025-09-10 15:13:22,442 - db_manager - INFO - execute_update: Update completed in 0.01s. Affected rows: 1
2025-09-10 15:13:22,444 - db_manager - INFO - Transaction committed successfully
2025-09-10 15:13:22,444 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-10 15:13:22,445 - db_manager - INFO - Complainant updated in db: CM-20250910-KOJH-837A-B
2025-09-10 15:13:22,445 - db_manager - INFO - update_grievance: Updating grievance with ID: GR-20250910-KOJH-307B-B
2025-09-10 15:13:22,445 - db_manager - DEBUG - execute_update values: ('there is dust everywhere I need to go to the hospital i dont know what to do', 'GR-20250910-KOJH-307B-B')
2025-09-10 15:13:22,445 - db_manager - DEBUG - execute_update query: 
                    UPDATE grievances 
                    SET grievance_description = %s, grievance_modification_date = CURRENT_TIMESTAMP
                    WHERE grievance_id = %s
                    RETURNING grievance_id
                
2025-09-10 15:13:22,445 - db_manager - INFO - Connecting to database: grievance_db
2025-09-10 15:13:22,450 - db_manager - INFO - Starting database transaction
2025-09-10 15:13:22,450 - db_manager - INFO - execute_update: Executing update query: 
                    UPDATE grievances 
                    SET grievance_description = %s, grievanc...
2025-09-10 15:13:22,451 - db_manager - INFO - execute_update: Update completed in 0.01s. Affected rows: 1
2025-09-10 15:13:22,453 - db_manager - INFO - Transaction committed successfully
2025-09-10 15:13:22,453 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-10 15:13:22,453 - db_manager - INFO - update_grievance: Updated grievance with ID: GR-20250910-KOJH-307B-B, rows affected: 1
2025-09-10 15:13:22,453 - db_manager - INFO - Grievance updated in db: GR-20250910-KOJH-307B-B
2025-09-10 15:13:22,453 - db_manager - INFO - Connecting to database: grievance_db
2025-09-10 15:13:22,458 - db_manager - INFO - Starting database transaction
2025-09-10 15:13:22,458 - db_manager - INFO - Executing get_grievance_files: 
            SELECT file_id, file_name, file_type, file_size, upload_timestamp
            FROM file...
2025-09-10 15:13:22,459 - db_manager - INFO - get_grievance_files completed in 0.01s. Rows: 0
2025-09-10 15:13:22,459 - db_manager - INFO - Transaction committed successfully
2025-09-10 15:13:22,459 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-10 15:13:22,459 - db_manager - INFO - Connecting to database: grievance_db
2025-09-10 15:13:22,464 - db_manager - INFO - Starting database transaction
2025-09-10 15:13:22,464 - db_manager - INFO - Executing get_grievance_files: 
            SELECT file_id, file_name, file_type, file_size, upload_timestamp
            FROM file...
2025-09-10 15:13:22,465 - db_manager - INFO - get_grievance_files completed in 0.01s. Rows: 0
2025-09-10 15:13:22,465 - db_manager - INFO - Transaction committed successfully
2025-09-10 15:13:22,465 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-10 15:13:22,508 - db_manager - INFO - Connecting to database: grievance_db
2025-09-10 15:13:22,513 - db_manager - INFO - Starting database transaction
2025-09-10 15:13:22,514 - db_manager - INFO - Executing get_grievance_by_id: 
                SELECT g.*, c.complainant_full_name, c.complainant_phone, c.complainant_email,
    ...
2025-09-10 15:13:22,515 - db_manager - INFO - get_grievance_by_id completed in 0.01s. Rows: 1
2025-09-10 15:13:22,515 - db_manager - INFO - Transaction committed successfully
2025-09-10 15:13:22,515 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-10 15:13:22,515 - db_manager - DEBUG - get_grievance_by_id: grievance_id: {'grievance_id': 'GR-20250910-KOJH-307B-B', 'complainant_id': 'CM-20250910-KOJH-837A-B', 'grievance_categories': None, 'grievance_categories_alternative': None, 'grievance_summary': None, 'grievance_description': 'there is dust everywhere I need to go to the hospital i dont know what to do', 'grievance_claimed_amount': None, 'grievance_location': None, 'language_code': 'ne', 'grievance_classification_status': 'pending', 'grievance_creation_date': datetime.datetime(2025, 9, 10, 15, 13, 2, 585446, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'grievance_modification_date': datetime.datetime(2025, 9, 10, 15, 13, 22, 450464, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'is_temporary': True, 'source': 'bot', 'complainant_full_name': 'c30d040703022465a761c4a05f5878d23d01017d726d2794898d6cb3739b38b1fb20391ce612501b29a993535405c680d66638874fd497f012e9e8fa7802e9b869df6dd1d03d92d39fac541cbcaf', 'complainant_phone': 'c30d04070302ae64cb0a34eada0e78d23d0155c13d38d8d64f03b1fe9d170915465672c2f9e637db5e97047399d098370aceda29631e858e380a57e144f1f6054e0da835bf122a97d72d684fbcdd', 'complainant_email': 'c30d04070302a945928eee5d699470d23d011fc8d6b18a346988af873bae6b2d95d0a5d275113fa1e610ffef19f565ba7e09a7e4c920e2b3bf6246430be7868aae97c1194223c5e7084908a027a6', 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_municipality': None, 'complainant_ward': None, 'complainant_village': None, 'complainant_address': None}, results: [{'grievance_id': 'GR-20250910-KOJH-307B-B', 'complainant_id': 'CM-20250910-KOJH-837A-B', 'grievance_categories': None, 'grievance_categories_alternative': None, 'grievance_summary': None, 'grievance_description': 'there is dust everywhere I need to go to the hospital i dont know what to do', 'grievance_claimed_amount': None, 'grievance_location': None, 'language_code': 'ne', 'grievance_classification_status': 'pending', 'grievance_creation_date': datetime.datetime(2025, 9, 10, 15, 13, 2, 585446, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'grievance_modification_date': datetime.datetime(2025, 9, 10, 15, 13, 22, 450464, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'is_temporary': True, 'source': 'bot', 'complainant_full_name': 'c30d040703022465a761c4a05f5878d23d01017d726d2794898d6cb3739b38b1fb20391ce612501b29a993535405c680d66638874fd497f012e9e8fa7802e9b869df6dd1d03d92d39fac541cbcaf', 'complainant_phone': 'c30d04070302ae64cb0a34eada0e78d23d0155c13d38d8d64f03b1fe9d170915465672c2f9e637db5e97047399d098370aceda29631e858e380a57e144f1f6054e0da835bf122a97d72d684fbcdd', 'complainant_email': 'c30d04070302a945928eee5d699470d23d011fc8d6b18a346988af873bae6b2d95d0a5d275113fa1e610ffef19f565ba7e09a7e4c920e2b3bf6246430be7868aae97c1194223c5e7084908a027a6', 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_municipality': None, 'complainant_ward': None, 'complainant_village': None, 'complainant_address': None}]
2025-09-10 15:13:22,606 - db_manager - INFO - Connecting to database: grievance_db
2025-09-10 15:13:22,611 - db_manager - INFO - Starting database transaction
2025-09-10 15:13:22,611 - db_manager - INFO - Executing get_complainant_id_from_grievance_id: 
            SELECT complainant_id
            FROM grievances
            WHERE grievance_id = %s
 ...
2025-09-10 15:13:22,612 - db_manager - INFO - get_complainant_id_from_grievance_id completed in 0.01s. Rows: 1
2025-09-10 15:13:22,612 - db_manager - INFO - Transaction committed successfully
2025-09-10 15:13:22,612 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-10 15:13:22,612 - db_manager - INFO - update_complainant: Updating complainant with ID: CM-20250910-KOJH-837A-B
2025-09-10 15:13:22,612 - db_manager - DEBUG - encrypted and hashed data at encrypt_and_hash_sensitive_data: {}
2025-09-10 15:13:22,612 - db_manager - DEBUG - encrypted_data at update_complainant: {}
2025-09-10 15:13:22,612 - db_manager - DEBUG - No complainant field to update
2025-09-10 15:13:22,612 - db_manager - INFO - Complainant updated in db: GR-20250910-KOJH-307B-B
2025-09-10 15:13:22,612 - db_manager - INFO - update_grievance: Updating grievance with ID: GR-20250910-KOJH-307B-B
2025-09-10 15:13:22,612 - db_manager - WARNING - update_grievance: No fields to update for this query
2025-09-10 15:13:22,612 - db_manager - WARNING - update_grievance: No fields to update for this query: {'grievance_categories': None, 'grievance_summary': None, 'grievance_categories_status': None, 'grievance_summary_status': None, 'grievance_cat_modify': None, 'grievance_summary_temp': None, 'source': 'bot', 'complainant_id': None} with expected fields: ['grievance_categories', 'grievance_categories_alternative', 'grievance_summary', 'grievance_description', 'grievance_claimed_amount', 'grievance_location', 'language_code'] for grievance_id: GR-20250910-KOJH-307B-B
2025-09-10 15:13:22,612 - db_manager - INFO - Grievance updated in db: GR-20250910-KOJH-307B-B
2025-09-10 15:13:22,653 - db_manager - INFO - Connecting to database: grievance_db
2025-09-10 15:13:22,658 - db_manager - INFO - Starting database transaction
2025-09-10 15:13:22,658 - db_manager - INFO - Executing get_grievance_files: 
            SELECT file_id, file_name, file_type, file_size, upload_timestamp
            FROM file...
2025-09-10 15:13:22,659 - db_manager - INFO - get_grievance_files completed in 0.01s. Rows: 0
2025-09-10 15:13:22,659 - db_manager - INFO - Transaction committed successfully
2025-09-10 15:13:22,660 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-10 15:17:28,674 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-10 15:17:28,674 - db_manager - INFO - Database manager initialized successfully
2025-09-10 15:17:28,674 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-10 15:17:28,674 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-10 15:17:28,674 - db_manager - INFO - Database manager initialized successfully
2025-09-10 15:17:28,674 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-10 15:17:28,674 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-10 15:17:28,674 - db_manager - INFO - Database manager initialized successfully
2025-09-10 15:17:28,674 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-10 15:17:28,674 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-10 15:17:28,674 - db_manager - INFO - Database manager initialized successfully
2025-09-10 15:17:28,674 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-10 15:17:28,674 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-10 15:17:28,674 - db_manager - INFO - Database manager initialized successfully
2025-09-10 15:17:28,674 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-10 15:17:28,674 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-10 15:17:28,674 - db_manager - INFO - Database manager initialized successfully
2025-09-10 15:17:28,674 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-10 15:17:28,674 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-10 15:17:28,674 - db_manager - INFO - Database manager initialized successfully
2025-09-10 15:17:28,674 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-10 15:17:28,675 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-10 15:17:28,675 - db_manager - INFO - Database manager initialized successfully
2025-09-10 15:17:28,675 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-10 15:17:28,675 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-10 15:17:28,675 - db_manager - INFO - Database manager initialized successfully
2025-09-10 15:17:28,675 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-10 15:17:28,675 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-10 15:17:28,675 - db_manager - INFO - Database manager initialized successfully
2025-09-10 15:17:28,675 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-10 15:21:20,474 - db_manager - INFO - create_complainant: Creating complainant with ID: CM-20250910-KOJH-2ECB-B
2025-09-10 15:21:20,474 - db_manager - DEBUG - encrypted and hashed data at encrypt_and_hash_sensitive_data: {'complainant_id': 'CM-20250910-KOJH-2ECB-B', 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_unique_id': 'CM-20250910-KOJH-2ECB-B'}
2025-09-10 15:21:20,474 - db_manager - DEBUG - query_keys at generate_query_string: dict_keys(['complainant_id', 'complainant_province', 'complainant_district', 'complainant_unique_id'])
2025-09-10 15:21:20,475 - db_manager - DEBUG - Generated query: INSERT INTO complainants (complainant_id, complainant_province, complainant_district, complainant_unique_id) VALUES (%s, %s, %s, %s)
2025-09-10 15:21:20,475 - db_manager - DEBUG - len of query_keys: 4
2025-09-10 15:21:20,475 - db_manager - DEBUG - Generated query: INSERT INTO complainants (complainant_id, complainant_province, complainant_district, complainant_unique_id) VALUES (%s, %s, %s, %s)
2025-09-10 15:21:20,475 - db_manager - INFO - Connecting to database: grievance_db
2025-09-10 15:21:20,481 - db_manager - INFO - Starting database transaction
2025-09-10 15:21:20,484 - db_manager - INFO - Transaction committed successfully
2025-09-10 15:21:20,484 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-10 15:21:20,484 - db_manager - INFO - create_complainant: Successfully created complainant with ID: CM-20250910-KOJH-2ECB-B
2025-09-10 15:21:20,484 - db_manager - INFO - create_grievance: Creating grievance with data: {'grievance_id': 'GR-20250910-KOJH-8E14-B', 'complainant_id': 'CM-20250910-KOJH-2ECB-B', 'grievance_description': 'there is dust everrywhere\nkids are sick\nI need to go to the hospital', 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_office': None, 'source': 'bot', 'complainant_unique_id': 'CM-20250910-KOJH-2ECB-B'}
2025-09-10 15:21:20,484 - db_manager - INFO - create_grievance: Creating grievance with ID: GR-20250910-KOJH-8E14-B
2025-09-10 15:21:20,484 - db_manager - INFO - create_grievance: Creating grievance with allowed fields: ['grievance_id', 'complainant_id', 'grievance_categories', 'grievance_categories_alternative', 'grievance_summary', 'grievance_description', 'grievance_claimed_amount', 'grievance_location', 'is_temporary', 'source', 'language_code', 'grievance_classification_status']
2025-09-10 15:21:20,484 - db_manager - DEBUG - query_keys at generate_query_string: dict_keys(['grievance_id', 'complainant_id', 'grievance_description', 'source'])
2025-09-10 15:21:20,484 - db_manager - DEBUG - Generated query: INSERT INTO grievances (grievance_id, complainant_id, grievance_description, source) VALUES (%s, %s, %s, %s) RETURNING grievance_id
2025-09-10 15:21:20,484 - db_manager - DEBUG - len of query_keys: 4
2025-09-10 15:21:20,484 - db_manager - DEBUG - Generated query: INSERT INTO grievances (grievance_id, complainant_id, grievance_description, source) VALUES (%s, %s, %s, %s) RETURNING grievance_id
2025-09-10 15:21:20,484 - db_manager - INFO - Connecting to database: grievance_db
2025-09-10 15:21:20,490 - db_manager - INFO - Starting database transaction
2025-09-10 15:21:20,493 - db_manager - INFO - Transaction committed successfully
2025-09-10 15:21:20,494 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-10 15:21:20,494 - db_manager - INFO - create_grievance: Successfully created grievance with ID: GR-20250910-KOJH-8E14-B
2025-09-10 15:21:51,649 - db_manager - INFO - Connecting to database: grievance_db
2025-09-10 15:21:51,656 - db_manager - INFO - Starting database transaction
2025-09-10 15:21:51,656 - db_manager - INFO - Executing get_complainant_by_id: 
            SELECT complainant_id, complainant_unique_id, complainant_full_name,    complainant_pho...
2025-09-10 15:21:51,657 - db_manager - INFO - get_complainant_by_id completed in 0.01s. Rows: 1
2025-09-10 15:21:51,658 - db_manager - INFO - Transaction committed successfully
2025-09-10 15:21:51,658 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-10 15:21:51,658 - db_manager - INFO - Connecting to database: grievance_db
2025-09-10 15:21:51,664 - db_manager - INFO - Starting database transaction
2025-09-10 15:21:51,664 - db_manager - INFO - Executing get_grievance_by_id: 
                SELECT g.*, c.complainant_full_name, c.complainant_phone, c.complainant_email,
    ...
2025-09-10 15:21:51,666 - db_manager - INFO - get_grievance_by_id completed in 0.01s. Rows: 1
2025-09-10 15:21:51,666 - db_manager - INFO - Transaction committed successfully
2025-09-10 15:21:51,666 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-10 15:21:51,666 - db_manager - DEBUG - get_grievance_by_id: grievance_id: {'grievance_id': 'GR-20250910-KOJH-8E14-B', 'complainant_id': 'CM-20250910-KOJH-2ECB-B', 'grievance_categories': ['Environmental - Air Pollution'], 'grievance_categories_alternative': ['Safety - Road Safety Provisions', 'Environmental - Drainage And Sewage Management'], 'grievance_summary': "There's dust everywhere which is making children sick and leading to hospital visits.", 'grievance_description': 'there is dust everrywhere\nkids are sick\nI need to go to the hospital', 'grievance_claimed_amount': None, 'grievance_location': None, 'language_code': 'en', 'grievance_classification_status': 'pending', 'grievance_creation_date': datetime.datetime(2025, 9, 10, 15, 21, 20, 490313, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'grievance_modification_date': datetime.datetime(2025, 9, 10, 15, 21, 25, 375030, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'is_temporary': True, 'source': 'bot', 'complainant_full_name': None, 'complainant_phone': None, 'complainant_email': None, 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_municipality': None, 'complainant_ward': None, 'complainant_village': None, 'complainant_address': None}, results: [{'grievance_id': 'GR-20250910-KOJH-8E14-B', 'complainant_id': 'CM-20250910-KOJH-2ECB-B', 'grievance_categories': '["Environmental - Air Pollution"]', 'grievance_categories_alternative': '["Safety - Road Safety Provisions", "Environmental - Drainage And Sewage Management"]', 'grievance_summary': "There's dust everywhere which is making children sick and leading to hospital visits.", 'grievance_description': 'there is dust everrywhere\nkids are sick\nI need to go to the hospital', 'grievance_claimed_amount': None, 'grievance_location': None, 'language_code': 'en', 'grievance_classification_status': 'pending', 'grievance_creation_date': datetime.datetime(2025, 9, 10, 15, 21, 20, 490313, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'grievance_modification_date': datetime.datetime(2025, 9, 10, 15, 21, 25, 375030, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'is_temporary': True, 'source': 'bot', 'complainant_full_name': None, 'complainant_phone': None, 'complainant_email': None, 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_municipality': None, 'complainant_ward': None, 'complainant_village': None, 'complainant_address': None}]
2025-09-10 15:21:51,666 - db_manager - INFO - update_complainant: Updating complainant with ID: CM-20250910-KOJH-2ECB-B
2025-09-10 15:21:51,666 - db_manager - INFO - Connecting to database: grievance_db
2025-09-10 15:21:51,671 - db_manager - INFO - Starting database transaction
2025-09-10 15:21:51,672 - db_manager - INFO - Executing encrypt_field: SELECT encode(pgp_sym_encrypt(%s, %s), 'hex') AS encrypted...
2025-09-10 15:21:51,673 - db_manager - INFO - encrypt_field completed in 0.01s. Rows: 1
2025-09-10 15:21:51,673 - db_manager - INFO - Transaction committed successfully
2025-09-10 15:21:51,673 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-10 15:21:51,673 - db_manager - DEBUG - encrypted phone number Not provided at encrypt_complainant_data: c30d04070302ad363e1aeedd28c878d23d0103a9dba10c47399a42697ec927897a9fff80aa63b6fa617b6069feea0e637713b88e08ef0b97b6f375088ff2472bd18d0eff9e5b6f37155d09981aa0
2025-09-10 15:21:51,673 - db_manager - INFO - Connecting to database: grievance_db
2025-09-10 15:21:51,679 - db_manager - INFO - Starting database transaction
2025-09-10 15:21:51,679 - db_manager - INFO - Executing encrypt_field: SELECT encode(pgp_sym_encrypt(%s, %s), 'hex') AS encrypted...
2025-09-10 15:21:51,680 - db_manager - INFO - encrypt_field completed in 0.01s. Rows: 1
2025-09-10 15:21:51,680 - db_manager - INFO - Transaction committed successfully
2025-09-10 15:21:51,680 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-10 15:21:51,680 - db_manager - INFO - Connecting to database: grievance_db
2025-09-10 15:21:51,686 - db_manager - INFO - Starting database transaction
2025-09-10 15:21:51,686 - db_manager - INFO - Executing encrypt_field: SELECT encode(pgp_sym_encrypt(%s, %s), 'hex') AS encrypted...
2025-09-10 15:21:51,688 - db_manager - INFO - encrypt_field completed in 0.01s. Rows: 1
2025-09-10 15:21:51,688 - db_manager - INFO - Transaction committed successfully
2025-09-10 15:21:51,688 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-10 15:21:51,689 - db_manager - DEBUG - phone number Not provided hashed to d83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f at hash_sensitive_data
2025-09-10 15:21:51,689 - db_manager - DEBUG - encrypted and hashed data at encrypt_and_hash_sensitive_data: {'complainant_full_name': 'c30d040703021c79c7769e032d9477d23d01eac1cbf74fb55d56ec0c508b1c327beb770647117579a708c6bf0f4c66c056860b446ad748b8f2db9867fde4e5ddebc94de2b26855303d3352da2a78', 'complainant_phone': 'c30d04070302ad363e1aeedd28c878d23d0103a9dba10c47399a42697ec927897a9fff80aa63b6fa617b6069feea0e637713b88e08ef0b97b6f375088ff2472bd18d0eff9e5b6f37155d09981aa0', 'complainant_email': 'c30d0407030266f2ad7d5fd5b5b774d23d012f444d8896dfe59a3f2fca2138f1c58a87b9b916e214fd98fb44c4eca7b6a7bc24534782466f08ceb5788f5b966b74736f9508608270691ba5544ab5', 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_phone_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'complainant_full_name_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'complainant_email_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f'}
2025-09-10 15:21:51,689 - db_manager - DEBUG - encrypted_data at update_complainant: {'complainant_full_name': 'c30d040703021c79c7769e032d9477d23d01eac1cbf74fb55d56ec0c508b1c327beb770647117579a708c6bf0f4c66c056860b446ad748b8f2db9867fde4e5ddebc94de2b26855303d3352da2a78', 'complainant_phone': 'c30d04070302ad363e1aeedd28c878d23d0103a9dba10c47399a42697ec927897a9fff80aa63b6fa617b6069feea0e637713b88e08ef0b97b6f375088ff2472bd18d0eff9e5b6f37155d09981aa0', 'complainant_email': 'c30d0407030266f2ad7d5fd5b5b774d23d012f444d8896dfe59a3f2fca2138f1c58a87b9b916e214fd98fb44c4eca7b6a7bc24534782466f08ceb5788f5b966b74736f9508608270691ba5544ab5', 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_phone_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'complainant_full_name_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'complainant_email_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f'}
2025-09-10 15:21:51,689 - db_manager - DEBUG - execute_update values: ('c30d040703021c79c7769e032d9477d23d01eac1cbf74fb55d56ec0c508b1c327beb770647117579a708c6bf0f4c66c056860b446ad748b8f2db9867fde4e5ddebc94de2b26855303d3352da2a78', 'c30d04070302ad363e1aeedd28c878d23d0103a9dba10c47399a42697ec927897a9fff80aa63b6fa617b6069feea0e637713b88e08ef0b97b6f375088ff2472bd18d0eff9e5b6f37155d09981aa0', 'c30d0407030266f2ad7d5fd5b5b774d23d012f444d8896dfe59a3f2fca2138f1c58a87b9b916e214fd98fb44c4eca7b6a7bc24534782466f08ceb5788f5b966b74736f9508608270691ba5544ab5', 'Koshi', 'Jhapa', 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'CM-20250910-KOJH-2ECB-B')
2025-09-10 15:21:51,689 - db_manager - DEBUG - execute_update query: UPDATE complainants SET complainant_full_name = %s, complainant_phone = %s, complainant_email = %s, complainant_province = %s, complainant_district = %s, complainant_phone_hash = %s, complainant_full_name_hash = %s, complainant_email_hash = %s WHERE complainant_id = %s
2025-09-10 15:21:51,689 - db_manager - INFO - Connecting to database: grievance_db
2025-09-10 15:21:51,696 - db_manager - INFO - Starting database transaction
2025-09-10 15:21:51,696 - db_manager - INFO - execute_update: Executing update query: UPDATE complainants SET complainant_full_name = %s, complainant_phone = %s, complainant_email = %s, ...
2025-09-10 15:21:51,699 - db_manager - INFO - execute_update: Update completed in 0.01s. Affected rows: 1
2025-09-10 15:21:51,700 - db_manager - INFO - Transaction committed successfully
2025-09-10 15:21:51,700 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-10 15:21:51,701 - db_manager - INFO - Complainant updated in db: CM-20250910-KOJH-2ECB-B
2025-09-10 15:21:51,701 - db_manager - INFO - update_grievance: Updating grievance with ID: GR-20250910-KOJH-8E14-B
2025-09-10 15:21:51,701 - db_manager - DEBUG - execute_update values: ('there is dust everrywhere\nkids are sick\nI need to go to the hospital', 'GR-20250910-KOJH-8E14-B')
2025-09-10 15:21:51,701 - db_manager - DEBUG - execute_update query: 
                    UPDATE grievances 
                    SET grievance_description = %s, grievance_modification_date = CURRENT_TIMESTAMP
                    WHERE grievance_id = %s
                    RETURNING grievance_id
                
2025-09-10 15:21:51,701 - db_manager - INFO - Connecting to database: grievance_db
2025-09-10 15:21:51,705 - db_manager - INFO - Starting database transaction
2025-09-10 15:21:51,706 - db_manager - INFO - execute_update: Executing update query: 
                    UPDATE grievances 
                    SET grievance_description = %s, grievanc...
2025-09-10 15:21:51,707 - db_manager - INFO - execute_update: Update completed in 0.01s. Affected rows: 1
2025-09-10 15:21:51,709 - db_manager - INFO - Transaction committed successfully
2025-09-10 15:21:51,709 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-10 15:21:51,709 - db_manager - INFO - update_grievance: Updated grievance with ID: GR-20250910-KOJH-8E14-B, rows affected: 1
2025-09-10 15:21:51,709 - db_manager - INFO - Grievance updated in db: GR-20250910-KOJH-8E14-B
2025-09-10 15:21:51,709 - db_manager - INFO - Connecting to database: grievance_db
2025-09-10 15:21:51,714 - db_manager - INFO - Starting database transaction
2025-09-10 15:21:51,714 - db_manager - INFO - Executing get_grievance_files: 
            SELECT file_id, file_name, file_type, file_size, upload_timestamp
            FROM file...
2025-09-10 15:21:51,715 - db_manager - INFO - get_grievance_files completed in 0.01s. Rows: 0
2025-09-10 15:21:51,715 - db_manager - INFO - Transaction committed successfully
2025-09-10 15:21:51,715 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-10 15:21:51,716 - db_manager - INFO - Connecting to database: grievance_db
2025-09-10 15:21:51,721 - db_manager - INFO - Starting database transaction
2025-09-10 15:21:51,721 - db_manager - INFO - Executing get_grievance_files: 
            SELECT file_id, file_name, file_type, file_size, upload_timestamp
            FROM file...
2025-09-10 15:21:51,722 - db_manager - INFO - get_grievance_files completed in 0.01s. Rows: 0
2025-09-10 15:21:51,722 - db_manager - INFO - Transaction committed successfully
2025-09-10 15:21:51,722 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-10 15:21:51,763 - db_manager - INFO - Connecting to database: grievance_db
2025-09-10 15:21:51,768 - db_manager - INFO - Starting database transaction
2025-09-10 15:21:51,768 - db_manager - INFO - Executing get_grievance_by_id: 
                SELECT g.*, c.complainant_full_name, c.complainant_phone, c.complainant_email,
    ...
2025-09-10 15:21:51,769 - db_manager - INFO - get_grievance_by_id completed in 0.01s. Rows: 1
2025-09-10 15:21:51,769 - db_manager - INFO - Transaction committed successfully
2025-09-10 15:21:51,770 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-10 15:21:51,770 - db_manager - DEBUG - get_grievance_by_id: grievance_id: {'grievance_id': 'GR-20250910-KOJH-8E14-B', 'complainant_id': 'CM-20250910-KOJH-2ECB-B', 'grievance_categories': ['Environmental - Air Pollution'], 'grievance_categories_alternative': ['Safety - Road Safety Provisions', 'Environmental - Drainage And Sewage Management'], 'grievance_summary': "There's dust everywhere which is making children sick and leading to hospital visits.", 'grievance_description': 'there is dust everrywhere\nkids are sick\nI need to go to the hospital', 'grievance_claimed_amount': None, 'grievance_location': None, 'language_code': 'en', 'grievance_classification_status': 'pending', 'grievance_creation_date': datetime.datetime(2025, 9, 10, 15, 21, 20, 490313, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'grievance_modification_date': datetime.datetime(2025, 9, 10, 15, 21, 51, 706189, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'is_temporary': True, 'source': 'bot', 'complainant_full_name': 'c30d040703021c79c7769e032d9477d23d01eac1cbf74fb55d56ec0c508b1c327beb770647117579a708c6bf0f4c66c056860b446ad748b8f2db9867fde4e5ddebc94de2b26855303d3352da2a78', 'complainant_phone': 'c30d04070302ad363e1aeedd28c878d23d0103a9dba10c47399a42697ec927897a9fff80aa63b6fa617b6069feea0e637713b88e08ef0b97b6f375088ff2472bd18d0eff9e5b6f37155d09981aa0', 'complainant_email': 'c30d0407030266f2ad7d5fd5b5b774d23d012f444d8896dfe59a3f2fca2138f1c58a87b9b916e214fd98fb44c4eca7b6a7bc24534782466f08ceb5788f5b966b74736f9508608270691ba5544ab5', 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_municipality': None, 'complainant_ward': None, 'complainant_village': None, 'complainant_address': None}, results: [{'grievance_id': 'GR-20250910-KOJH-8E14-B', 'complainant_id': 'CM-20250910-KOJH-2ECB-B', 'grievance_categories': '["Environmental - Air Pollution"]', 'grievance_categories_alternative': '["Safety - Road Safety Provisions", "Environmental - Drainage And Sewage Management"]', 'grievance_summary': "There's dust everywhere which is making children sick and leading to hospital visits.", 'grievance_description': 'there is dust everrywhere\nkids are sick\nI need to go to the hospital', 'grievance_claimed_amount': None, 'grievance_location': None, 'language_code': 'en', 'grievance_classification_status': 'pending', 'grievance_creation_date': datetime.datetime(2025, 9, 10, 15, 21, 20, 490313, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'grievance_modification_date': datetime.datetime(2025, 9, 10, 15, 21, 51, 706189, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'is_temporary': True, 'source': 'bot', 'complainant_full_name': 'c30d040703021c79c7769e032d9477d23d01eac1cbf74fb55d56ec0c508b1c327beb770647117579a708c6bf0f4c66c056860b446ad748b8f2db9867fde4e5ddebc94de2b26855303d3352da2a78', 'complainant_phone': 'c30d04070302ad363e1aeedd28c878d23d0103a9dba10c47399a42697ec927897a9fff80aa63b6fa617b6069feea0e637713b88e08ef0b97b6f375088ff2472bd18d0eff9e5b6f37155d09981aa0', 'complainant_email': 'c30d0407030266f2ad7d5fd5b5b774d23d012f444d8896dfe59a3f2fca2138f1c58a87b9b916e214fd98fb44c4eca7b6a7bc24534782466f08ceb5788f5b966b74736f9508608270691ba5544ab5', 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_municipality': None, 'complainant_ward': None, 'complainant_village': None, 'complainant_address': None}]
2025-09-10 15:34:19,277 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-10 15:34:19,278 - db_manager - INFO - Database manager initialized successfully
2025-09-10 15:34:19,278 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-10 15:34:19,278 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-10 15:34:19,278 - db_manager - INFO - Database manager initialized successfully
2025-09-10 15:34:19,278 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-10 15:34:19,278 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-10 15:34:19,278 - db_manager - INFO - Database manager initialized successfully
2025-09-10 15:34:19,278 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-10 15:34:19,278 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-10 15:34:19,278 - db_manager - INFO - Database manager initialized successfully
2025-09-10 15:34:19,278 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-10 15:34:19,279 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-10 15:34:19,279 - db_manager - INFO - Database manager initialized successfully
2025-09-10 15:34:19,279 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-10 15:34:19,279 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-10 15:34:19,279 - db_manager - INFO - Database manager initialized successfully
2025-09-10 15:34:19,279 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-10 15:34:19,279 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-10 15:34:19,279 - db_manager - INFO - Database manager initialized successfully
2025-09-10 15:34:19,279 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-10 15:34:19,279 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-10 15:34:19,279 - db_manager - INFO - Database manager initialized successfully
2025-09-10 15:34:19,279 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-10 15:34:19,279 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-10 15:34:19,279 - db_manager - INFO - Database manager initialized successfully
2025-09-10 15:34:19,279 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-10 15:34:19,279 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-10 15:34:19,279 - db_manager - INFO - Database manager initialized successfully
2025-09-10 15:34:19,279 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-10 15:35:17,645 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-10 15:35:17,645 - db_manager - INFO - Database manager initialized successfully
2025-09-10 15:35:17,645 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-10 15:35:17,645 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-10 15:35:17,645 - db_manager - INFO - Database manager initialized successfully
2025-09-10 15:35:17,645 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-10 15:35:17,645 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-10 15:35:17,645 - db_manager - INFO - Database manager initialized successfully
2025-09-10 15:35:17,645 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-10 15:35:17,645 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-10 15:35:17,645 - db_manager - INFO - Database manager initialized successfully
2025-09-10 15:35:17,645 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-10 15:35:17,645 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-10 15:35:17,645 - db_manager - INFO - Database manager initialized successfully
2025-09-10 15:35:17,645 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-10 15:35:17,645 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-10 15:35:17,645 - db_manager - INFO - Database manager initialized successfully
2025-09-10 15:35:17,645 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-10 15:35:17,646 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-10 15:35:17,646 - db_manager - INFO - Database manager initialized successfully
2025-09-10 15:35:17,646 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-10 15:35:17,646 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-10 15:35:17,646 - db_manager - INFO - Database manager initialized successfully
2025-09-10 15:35:17,646 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-10 15:35:17,646 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-10 15:35:17,646 - db_manager - INFO - Database manager initialized successfully
2025-09-10 15:35:17,646 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-10 15:35:17,646 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-10 15:35:17,646 - db_manager - INFO - Database manager initialized successfully
2025-09-10 15:35:17,646 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-10 15:36:35,283 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-10 15:36:35,283 - db_manager - INFO - Database manager initialized successfully
2025-09-10 15:36:35,283 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-10 15:36:35,283 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-10 15:36:35,283 - db_manager - INFO - Database manager initialized successfully
2025-09-10 15:36:35,283 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-10 15:36:35,283 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-10 15:36:35,283 - db_manager - INFO - Database manager initialized successfully
2025-09-10 15:36:35,283 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-10 15:36:35,284 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-10 15:36:35,284 - db_manager - INFO - Database manager initialized successfully
2025-09-10 15:36:35,284 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-10 15:36:35,284 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-10 15:36:35,284 - db_manager - INFO - Database manager initialized successfully
2025-09-10 15:36:35,284 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-10 15:36:35,284 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-10 15:36:35,284 - db_manager - INFO - Database manager initialized successfully
2025-09-10 15:36:35,284 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-10 15:36:35,284 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-10 15:36:35,284 - db_manager - INFO - Database manager initialized successfully
2025-09-10 15:36:35,284 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-10 15:36:35,284 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-10 15:36:35,284 - db_manager - INFO - Database manager initialized successfully
2025-09-10 15:36:35,284 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-10 15:36:35,284 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-10 15:36:35,284 - db_manager - INFO - Database manager initialized successfully
2025-09-10 15:36:35,284 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-10 15:36:35,285 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-10 15:36:35,285 - db_manager - INFO - Database manager initialized successfully
2025-09-10 15:36:35,285 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-10 15:41:09,238 - db_manager - INFO - create_complainant: Creating complainant with ID: CM-20250910-KOJH-3AB5-B
2025-09-10 15:41:09,239 - db_manager - DEBUG - encrypted and hashed data at encrypt_and_hash_sensitive_data: {'complainant_id': 'CM-20250910-KOJH-3AB5-B', 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_unique_id': 'CM-20250910-KOJH-3AB5-B'}
2025-09-10 15:41:09,239 - db_manager - DEBUG - query_keys at generate_query_string: dict_keys(['complainant_id', 'complainant_province', 'complainant_district', 'complainant_unique_id'])
2025-09-10 15:41:09,239 - db_manager - DEBUG - Generated query: INSERT INTO complainants (complainant_id, complainant_province, complainant_district, complainant_unique_id) VALUES (%s, %s, %s, %s)
2025-09-10 15:41:09,239 - db_manager - DEBUG - len of query_keys: 4
2025-09-10 15:41:09,239 - db_manager - DEBUG - Generated query: INSERT INTO complainants (complainant_id, complainant_province, complainant_district, complainant_unique_id) VALUES (%s, %s, %s, %s)
2025-09-10 15:41:09,239 - db_manager - INFO - Connecting to database: grievance_db
2025-09-10 15:41:09,246 - db_manager - INFO - Starting database transaction
2025-09-10 15:41:09,250 - db_manager - INFO - Transaction committed successfully
2025-09-10 15:41:09,250 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-10 15:41:09,250 - db_manager - INFO - create_complainant: Successfully created complainant with ID: CM-20250910-KOJH-3AB5-B
2025-09-10 15:41:09,250 - db_manager - INFO - create_grievance: Creating grievance with data: {'grievance_id': 'GR-20250910-KOJH-9B97-B', 'complainant_id': 'CM-20250910-KOJH-3AB5-B', 'grievance_description': 'there is dust everrywhere kids are sick I need to go to the hospital*', 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_office': None, 'source': 'bot', 'complainant_unique_id': 'CM-20250910-KOJH-3AB5-B'}
2025-09-10 15:41:09,251 - db_manager - INFO - create_grievance: Creating grievance with ID: GR-20250910-KOJH-9B97-B
2025-09-10 15:41:09,251 - db_manager - INFO - create_grievance: Creating grievance with allowed fields: ['grievance_id', 'complainant_id', 'grievance_categories', 'grievance_categories_alternative', 'grievance_summary', 'grievance_description', 'grievance_claimed_amount', 'grievance_location', 'is_temporary', 'source', 'language_code', 'grievance_classification_status']
2025-09-10 15:41:09,251 - db_manager - DEBUG - query_keys at generate_query_string: dict_keys(['grievance_id', 'complainant_id', 'grievance_description', 'source'])
2025-09-10 15:41:09,251 - db_manager - DEBUG - Generated query: INSERT INTO grievances (grievance_id, complainant_id, grievance_description, source) VALUES (%s, %s, %s, %s) RETURNING grievance_id
2025-09-10 15:41:09,251 - db_manager - DEBUG - len of query_keys: 4
2025-09-10 15:41:09,251 - db_manager - DEBUG - Generated query: INSERT INTO grievances (grievance_id, complainant_id, grievance_description, source) VALUES (%s, %s, %s, %s) RETURNING grievance_id
2025-09-10 15:41:09,251 - db_manager - INFO - Connecting to database: grievance_db
2025-09-10 15:41:09,256 - db_manager - INFO - Starting database transaction
2025-09-10 15:41:09,261 - db_manager - INFO - Transaction committed successfully
2025-09-10 15:41:09,261 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-10 15:41:09,261 - db_manager - INFO - create_grievance: Successfully created grievance with ID: GR-20250910-KOJH-9B97-B
2025-09-10 15:41:26,638 - db_manager - INFO - Connecting to database: grievance_db
2025-09-10 15:41:26,643 - db_manager - INFO - Starting database transaction
2025-09-10 15:41:26,643 - db_manager - INFO - Executing get_complainant_by_id: 
            SELECT complainant_id, complainant_unique_id, complainant_full_name,    complainant_pho...
2025-09-10 15:41:26,644 - db_manager - INFO - get_complainant_by_id completed in 0.01s. Rows: 1
2025-09-10 15:41:26,644 - db_manager - INFO - Transaction committed successfully
2025-09-10 15:41:26,644 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-10 15:41:26,645 - db_manager - INFO - Connecting to database: grievance_db
2025-09-10 15:41:26,649 - db_manager - INFO - Starting database transaction
2025-09-10 15:41:26,649 - db_manager - INFO - Executing get_grievance_by_id: 
                SELECT g.*, c.complainant_full_name, c.complainant_phone, c.complainant_email,
    ...
2025-09-10 15:41:26,650 - db_manager - INFO - get_grievance_by_id completed in 0.01s. Rows: 1
2025-09-10 15:41:26,651 - db_manager - INFO - Transaction committed successfully
2025-09-10 15:41:26,651 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-10 15:41:26,651 - db_manager - DEBUG - get_grievance_by_id: grievance_id: {'grievance_id': 'GR-20250910-KOJH-9B97-B', 'complainant_id': 'CM-20250910-KOJH-3AB5-B', 'grievance_categories': ['Environmental - Air Pollution', 'Safety - Road Safety Provisions'], 'grievance_categories_alternative': ['Environmental - Drainage And Sewage Management', 'Relocation Issues - Poor Housing Quality Of The Resettlement Site'], 'grievance_summary': 'Dust from road work is causing health issues, especially in children who need hospital care.', 'grievance_description': 'there is dust everrywhere kids are sick I need to go to the hospital*', 'grievance_claimed_amount': None, 'grievance_location': None, 'language_code': 'en', 'grievance_classification_status': 'pending', 'grievance_creation_date': datetime.datetime(2025, 9, 10, 15, 41, 9, 256708, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'grievance_modification_date': datetime.datetime(2025, 9, 10, 15, 41, 14, 799573, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'is_temporary': True, 'source': 'bot', 'complainant_full_name': None, 'complainant_phone': None, 'complainant_email': None, 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_municipality': None, 'complainant_ward': None, 'complainant_village': None, 'complainant_address': None}, results: [{'grievance_id': 'GR-20250910-KOJH-9B97-B', 'complainant_id': 'CM-20250910-KOJH-3AB5-B', 'grievance_categories': '["Environmental - Air Pollution", "Safety - Road Safety Provisions"]', 'grievance_categories_alternative': '["Environmental - Drainage And Sewage Management", "Relocation Issues - Poor Housing Quality Of The Resettlement Site"]', 'grievance_summary': 'Dust from road work is causing health issues, especially in children who need hospital care.', 'grievance_description': 'there is dust everrywhere kids are sick I need to go to the hospital*', 'grievance_claimed_amount': None, 'grievance_location': None, 'language_code': 'en', 'grievance_classification_status': 'pending', 'grievance_creation_date': datetime.datetime(2025, 9, 10, 15, 41, 9, 256708, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'grievance_modification_date': datetime.datetime(2025, 9, 10, 15, 41, 14, 799573, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'is_temporary': True, 'source': 'bot', 'complainant_full_name': None, 'complainant_phone': None, 'complainant_email': None, 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_municipality': None, 'complainant_ward': None, 'complainant_village': None, 'complainant_address': None}]
2025-09-10 15:41:26,651 - db_manager - INFO - update_complainant: Updating complainant with ID: CM-20250910-KOJH-3AB5-B
2025-09-10 15:41:26,651 - db_manager - INFO - Connecting to database: grievance_db
2025-09-10 15:41:26,656 - db_manager - INFO - Starting database transaction
2025-09-10 15:41:26,656 - db_manager - INFO - Executing encrypt_field: SELECT encode(pgp_sym_encrypt(%s, %s), 'hex') AS encrypted...
2025-09-10 15:41:26,659 - db_manager - INFO - encrypt_field completed in 0.01s. Rows: 1
2025-09-10 15:41:26,659 - db_manager - INFO - Transaction committed successfully
2025-09-10 15:41:26,659 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-10 15:41:26,659 - db_manager - INFO - Connecting to database: grievance_db
2025-09-10 15:41:26,664 - db_manager - INFO - Starting database transaction
2025-09-10 15:41:26,664 - db_manager - INFO - Executing encrypt_field: SELECT encode(pgp_sym_encrypt(%s, %s), 'hex') AS encrypted...
2025-09-10 15:41:26,665 - db_manager - INFO - encrypt_field completed in 0.01s. Rows: 1
2025-09-10 15:41:26,665 - db_manager - INFO - Transaction committed successfully
2025-09-10 15:41:26,665 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-10 15:41:26,665 - db_manager - DEBUG - encrypted phone number Not provided at encrypt_complainant_data: c30d0407030255bf905d5e497a367dd23d017fbf8b72e965d40ce17cb5b41270bbcf1e9489eb7bc9b9a1db8e67b526a181c0fae987164440454a1c5d88dd913943943b0e82807e52f45ad283cf07
2025-09-10 15:41:26,665 - db_manager - INFO - Connecting to database: grievance_db
2025-09-10 15:41:26,670 - db_manager - INFO - Starting database transaction
2025-09-10 15:41:26,670 - db_manager - INFO - Executing encrypt_field: SELECT encode(pgp_sym_encrypt(%s, %s), 'hex') AS encrypted...
2025-09-10 15:41:26,671 - db_manager - INFO - encrypt_field completed in 0.01s. Rows: 1
2025-09-10 15:41:26,671 - db_manager - INFO - Transaction committed successfully
2025-09-10 15:41:26,671 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-10 15:41:26,671 - db_manager - DEBUG - phone number Not provided hashed to d83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f at hash_sensitive_data
2025-09-10 15:41:26,671 - db_manager - DEBUG - encrypted and hashed data at encrypt_and_hash_sensitive_data: {'complainant_full_name': 'c30d040703024e49c4d77e6328077ad23d01e51d653150666afcf46e27690adf4bcdfb58201aea9e7a37fbf37f8708fed387330eb334648c718f68c7f85381afd73aec969404cf1b6852b6d0e6b6', 'complainant_phone': 'c30d0407030255bf905d5e497a367dd23d017fbf8b72e965d40ce17cb5b41270bbcf1e9489eb7bc9b9a1db8e67b526a181c0fae987164440454a1c5d88dd913943943b0e82807e52f45ad283cf07', 'complainant_email': 'c30d04070302fd892da1aba2830a7cd23d01ef55cee6ef4fec1e974025c985d332f347e68343043617d3e0a431e3b8091aa4ab2847f1ecb2fd1508b9e1bacd0b0cd2b65b49e02463daa9bbf21550', 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_email_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'complainant_phone_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'complainant_full_name_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f'}
2025-09-10 15:41:26,671 - db_manager - DEBUG - encrypted_data at update_complainant: {'complainant_full_name': 'c30d040703024e49c4d77e6328077ad23d01e51d653150666afcf46e27690adf4bcdfb58201aea9e7a37fbf37f8708fed387330eb334648c718f68c7f85381afd73aec969404cf1b6852b6d0e6b6', 'complainant_phone': 'c30d0407030255bf905d5e497a367dd23d017fbf8b72e965d40ce17cb5b41270bbcf1e9489eb7bc9b9a1db8e67b526a181c0fae987164440454a1c5d88dd913943943b0e82807e52f45ad283cf07', 'complainant_email': 'c30d04070302fd892da1aba2830a7cd23d01ef55cee6ef4fec1e974025c985d332f347e68343043617d3e0a431e3b8091aa4ab2847f1ecb2fd1508b9e1bacd0b0cd2b65b49e02463daa9bbf21550', 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_email_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'complainant_phone_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'complainant_full_name_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f'}
2025-09-10 15:41:26,671 - db_manager - DEBUG - execute_update values: ('c30d040703024e49c4d77e6328077ad23d01e51d653150666afcf46e27690adf4bcdfb58201aea9e7a37fbf37f8708fed387330eb334648c718f68c7f85381afd73aec969404cf1b6852b6d0e6b6', 'c30d0407030255bf905d5e497a367dd23d017fbf8b72e965d40ce17cb5b41270bbcf1e9489eb7bc9b9a1db8e67b526a181c0fae987164440454a1c5d88dd913943943b0e82807e52f45ad283cf07', 'c30d04070302fd892da1aba2830a7cd23d01ef55cee6ef4fec1e974025c985d332f347e68343043617d3e0a431e3b8091aa4ab2847f1ecb2fd1508b9e1bacd0b0cd2b65b49e02463daa9bbf21550', 'Koshi', 'Jhapa', 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'CM-20250910-KOJH-3AB5-B')
2025-09-10 15:41:26,671 - db_manager - DEBUG - execute_update query: UPDATE complainants SET complainant_full_name = %s, complainant_phone = %s, complainant_email = %s, complainant_province = %s, complainant_district = %s, complainant_email_hash = %s, complainant_phone_hash = %s, complainant_full_name_hash = %s WHERE complainant_id = %s
2025-09-10 15:41:26,671 - db_manager - INFO - Connecting to database: grievance_db
2025-09-10 15:41:26,676 - db_manager - INFO - Starting database transaction
2025-09-10 15:41:26,676 - db_manager - INFO - execute_update: Executing update query: UPDATE complainants SET complainant_full_name = %s, complainant_phone = %s, complainant_email = %s, ...
2025-09-10 15:41:26,677 - db_manager - INFO - execute_update: Update completed in 0.01s. Affected rows: 1
2025-09-10 15:41:26,678 - db_manager - INFO - Transaction committed successfully
2025-09-10 15:41:26,678 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-10 15:41:26,678 - db_manager - INFO - Complainant updated in db: CM-20250910-KOJH-3AB5-B
2025-09-10 15:41:26,679 - db_manager - INFO - update_grievance: Updating grievance with ID: GR-20250910-KOJH-9B97-B
2025-09-10 15:41:26,679 - db_manager - DEBUG - execute_update values: ('there is dust everrywhere kids are sick I need to go to the hospital*', 'GR-20250910-KOJH-9B97-B')
2025-09-10 15:41:26,679 - db_manager - DEBUG - execute_update query: 
                    UPDATE grievances 
                    SET grievance_description = %s, grievance_modification_date = CURRENT_TIMESTAMP
                    WHERE grievance_id = %s
                    RETURNING grievance_id
                
2025-09-10 15:41:26,679 - db_manager - INFO - Connecting to database: grievance_db
2025-09-10 15:41:26,683 - db_manager - INFO - Starting database transaction
2025-09-10 15:41:26,683 - db_manager - INFO - execute_update: Executing update query: 
                    UPDATE grievances 
                    SET grievance_description = %s, grievanc...
2025-09-10 15:41:26,684 - db_manager - INFO - execute_update: Update completed in 0.01s. Affected rows: 1
2025-09-10 15:41:26,686 - db_manager - INFO - Transaction committed successfully
2025-09-10 15:41:26,687 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-10 15:41:26,687 - db_manager - INFO - update_grievance: Updated grievance with ID: GR-20250910-KOJH-9B97-B, rows affected: 1
2025-09-10 15:41:26,687 - db_manager - INFO - Grievance updated in db: GR-20250910-KOJH-9B97-B
2025-09-10 15:41:26,687 - db_manager - INFO - Connecting to database: grievance_db
2025-09-10 15:41:26,691 - db_manager - INFO - Starting database transaction
2025-09-10 15:41:26,691 - db_manager - INFO - Executing get_grievance_files: 
            SELECT file_id, file_name, file_type, file_size, upload_timestamp
            FROM file...
2025-09-10 15:41:26,692 - db_manager - INFO - get_grievance_files completed in 0.01s. Rows: 0
2025-09-10 15:41:26,692 - db_manager - INFO - Transaction committed successfully
2025-09-10 15:41:26,692 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-10 15:41:26,692 - db_manager - INFO - Connecting to database: grievance_db
2025-09-10 15:41:26,696 - db_manager - INFO - Starting database transaction
2025-09-10 15:41:26,697 - db_manager - INFO - Executing get_grievance_files: 
            SELECT file_id, file_name, file_type, file_size, upload_timestamp
            FROM file...
2025-09-10 15:41:26,698 - db_manager - INFO - get_grievance_files completed in 0.01s. Rows: 0
2025-09-10 15:41:26,698 - db_manager - INFO - Transaction committed successfully
2025-09-10 15:41:26,698 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-10 15:41:26,739 - db_manager - INFO - Connecting to database: grievance_db
2025-09-10 15:41:26,745 - db_manager - INFO - Starting database transaction
2025-09-10 15:41:26,745 - db_manager - INFO - Executing get_grievance_by_id: 
                SELECT g.*, c.complainant_full_name, c.complainant_phone, c.complainant_email,
    ...
2025-09-10 15:41:26,746 - db_manager - INFO - get_grievance_by_id completed in 0.01s. Rows: 1
2025-09-10 15:41:26,746 - db_manager - INFO - Transaction committed successfully
2025-09-10 15:41:26,746 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-10 15:41:26,747 - db_manager - DEBUG - get_grievance_by_id: grievance_id: {'grievance_id': 'GR-20250910-KOJH-9B97-B', 'complainant_id': 'CM-20250910-KOJH-3AB5-B', 'grievance_categories': ['Environmental - Air Pollution', 'Safety - Road Safety Provisions'], 'grievance_categories_alternative': ['Environmental - Drainage And Sewage Management', 'Relocation Issues - Poor Housing Quality Of The Resettlement Site'], 'grievance_summary': 'Dust from road work is causing health issues, especially in children who need hospital care.', 'grievance_description': 'there is dust everrywhere kids are sick I need to go to the hospital*', 'grievance_claimed_amount': None, 'grievance_location': None, 'language_code': 'en', 'grievance_classification_status': 'pending', 'grievance_creation_date': datetime.datetime(2025, 9, 10, 15, 41, 9, 256708, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'grievance_modification_date': datetime.datetime(2025, 9, 10, 15, 41, 26, 684052, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'is_temporary': True, 'source': 'bot', 'complainant_full_name': 'c30d040703024e49c4d77e6328077ad23d01e51d653150666afcf46e27690adf4bcdfb58201aea9e7a37fbf37f8708fed387330eb334648c718f68c7f85381afd73aec969404cf1b6852b6d0e6b6', 'complainant_phone': 'c30d0407030255bf905d5e497a367dd23d017fbf8b72e965d40ce17cb5b41270bbcf1e9489eb7bc9b9a1db8e67b526a181c0fae987164440454a1c5d88dd913943943b0e82807e52f45ad283cf07', 'complainant_email': 'c30d04070302fd892da1aba2830a7cd23d01ef55cee6ef4fec1e974025c985d332f347e68343043617d3e0a431e3b8091aa4ab2847f1ecb2fd1508b9e1bacd0b0cd2b65b49e02463daa9bbf21550', 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_municipality': None, 'complainant_ward': None, 'complainant_village': None, 'complainant_address': None}, results: [{'grievance_id': 'GR-20250910-KOJH-9B97-B', 'complainant_id': 'CM-20250910-KOJH-3AB5-B', 'grievance_categories': '["Environmental - Air Pollution", "Safety - Road Safety Provisions"]', 'grievance_categories_alternative': '["Environmental - Drainage And Sewage Management", "Relocation Issues - Poor Housing Quality Of The Resettlement Site"]', 'grievance_summary': 'Dust from road work is causing health issues, especially in children who need hospital care.', 'grievance_description': 'there is dust everrywhere kids are sick I need to go to the hospital*', 'grievance_claimed_amount': None, 'grievance_location': None, 'language_code': 'en', 'grievance_classification_status': 'pending', 'grievance_creation_date': datetime.datetime(2025, 9, 10, 15, 41, 9, 256708, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'grievance_modification_date': datetime.datetime(2025, 9, 10, 15, 41, 26, 684052, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'is_temporary': True, 'source': 'bot', 'complainant_full_name': 'c30d040703024e49c4d77e6328077ad23d01e51d653150666afcf46e27690adf4bcdfb58201aea9e7a37fbf37f8708fed387330eb334648c718f68c7f85381afd73aec969404cf1b6852b6d0e6b6', 'complainant_phone': 'c30d0407030255bf905d5e497a367dd23d017fbf8b72e965d40ce17cb5b41270bbcf1e9489eb7bc9b9a1db8e67b526a181c0fae987164440454a1c5d88dd913943943b0e82807e52f45ad283cf07', 'complainant_email': 'c30d04070302fd892da1aba2830a7cd23d01ef55cee6ef4fec1e974025c985d332f347e68343043617d3e0a431e3b8091aa4ab2847f1ecb2fd1508b9e1bacd0b0cd2b65b49e02463daa9bbf21550', 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_municipality': None, 'complainant_ward': None, 'complainant_village': None, 'complainant_address': None}]
2025-09-10 15:45:16,512 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-10 15:45:16,512 - db_manager - INFO - Database manager initialized successfully
2025-09-10 15:45:16,512 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-10 15:45:16,512 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-10 15:45:16,512 - db_manager - INFO - Database manager initialized successfully
2025-09-10 15:45:16,512 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-10 15:45:16,513 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-10 15:45:16,513 - db_manager - INFO - Database manager initialized successfully
2025-09-10 15:45:16,513 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-10 15:45:16,513 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-10 15:45:16,513 - db_manager - INFO - Database manager initialized successfully
2025-09-10 15:45:16,513 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-10 15:45:16,513 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-10 15:45:16,513 - db_manager - INFO - Database manager initialized successfully
2025-09-10 15:45:16,513 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-10 15:45:16,513 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-10 15:45:16,513 - db_manager - INFO - Database manager initialized successfully
2025-09-10 15:45:16,513 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-10 15:45:16,513 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-10 15:45:16,513 - db_manager - INFO - Database manager initialized successfully
2025-09-10 15:45:16,513 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-10 15:45:16,513 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-10 15:45:16,513 - db_manager - INFO - Database manager initialized successfully
2025-09-10 15:45:16,513 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-10 15:45:16,513 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-10 15:45:16,513 - db_manager - INFO - Database manager initialized successfully
2025-09-10 15:45:16,513 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-10 15:45:16,513 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-10 15:45:16,513 - db_manager - INFO - Database manager initialized successfully
2025-09-10 15:45:16,513 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-10 15:46:38,027 - db_manager - INFO - create_complainant: Creating complainant with ID: CM-20250910-KOJH-EDD5-B
2025-09-10 15:46:38,027 - db_manager - DEBUG - encrypted and hashed data at encrypt_and_hash_sensitive_data: {'complainant_id': 'CM-20250910-KOJH-EDD5-B', 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_unique_id': 'CM-20250910-KOJH-EDD5-B'}
2025-09-10 15:46:38,027 - db_manager - DEBUG - query_keys at generate_query_string: dict_keys(['complainant_id', 'complainant_province', 'complainant_district', 'complainant_unique_id'])
2025-09-10 15:46:38,027 - db_manager - DEBUG - Generated query: INSERT INTO complainants (complainant_id, complainant_province, complainant_district, complainant_unique_id) VALUES (%s, %s, %s, %s)
2025-09-10 15:46:38,027 - db_manager - DEBUG - len of query_keys: 4
2025-09-10 15:46:38,027 - db_manager - DEBUG - Generated query: INSERT INTO complainants (complainant_id, complainant_province, complainant_district, complainant_unique_id) VALUES (%s, %s, %s, %s)
2025-09-10 15:46:38,027 - db_manager - INFO - Connecting to database: grievance_db
2025-09-10 15:46:38,033 - db_manager - INFO - Starting database transaction
2025-09-10 15:46:38,035 - db_manager - INFO - Transaction committed successfully
2025-09-10 15:46:38,035 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-10 15:46:38,035 - db_manager - INFO - create_complainant: Successfully created complainant with ID: CM-20250910-KOJH-EDD5-B
2025-09-10 15:46:38,035 - db_manager - INFO - create_grievance: Creating grievance with data: {'grievance_id': 'GR-20250910-KOJH-C9DB-B', 'complainant_id': 'CM-20250910-KOJH-EDD5-B', 'grievance_description': 'there is dust everywhere in the house\nkids are sick and need to go to hospital', 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_office': None, 'source': 'bot', 'complainant_unique_id': 'CM-20250910-KOJH-EDD5-B'}
2025-09-10 15:46:38,035 - db_manager - INFO - create_grievance: Creating grievance with ID: GR-20250910-KOJH-C9DB-B
2025-09-10 15:46:38,035 - db_manager - INFO - create_grievance: Creating grievance with allowed fields: ['grievance_id', 'complainant_id', 'grievance_categories', 'grievance_categories_alternative', 'grievance_summary', 'grievance_description', 'grievance_claimed_amount', 'grievance_location', 'is_temporary', 'source', 'language_code', 'grievance_classification_status']
2025-09-10 15:46:38,035 - db_manager - DEBUG - query_keys at generate_query_string: dict_keys(['grievance_id', 'complainant_id', 'grievance_description', 'source'])
2025-09-10 15:46:38,035 - db_manager - DEBUG - Generated query: INSERT INTO grievances (grievance_id, complainant_id, grievance_description, source) VALUES (%s, %s, %s, %s) RETURNING grievance_id
2025-09-10 15:46:38,035 - db_manager - DEBUG - len of query_keys: 4
2025-09-10 15:46:38,036 - db_manager - DEBUG - Generated query: INSERT INTO grievances (grievance_id, complainant_id, grievance_description, source) VALUES (%s, %s, %s, %s) RETURNING grievance_id
2025-09-10 15:46:38,036 - db_manager - INFO - Connecting to database: grievance_db
2025-09-10 15:46:38,040 - db_manager - INFO - Starting database transaction
2025-09-10 15:46:38,043 - db_manager - INFO - Transaction committed successfully
2025-09-10 15:46:38,043 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-10 15:46:38,043 - db_manager - INFO - create_grievance: Successfully created grievance with ID: GR-20250910-KOJH-C9DB-B
2025-09-10 15:46:54,031 - db_manager - INFO - Connecting to database: grievance_db
2025-09-10 15:46:54,037 - db_manager - INFO - Starting database transaction
2025-09-10 15:46:54,037 - db_manager - INFO - Executing get_complainant_by_id: 
            SELECT complainant_id, complainant_unique_id, complainant_full_name,    complainant_pho...
2025-09-10 15:46:54,038 - db_manager - INFO - get_complainant_by_id completed in 0.01s. Rows: 1
2025-09-10 15:46:54,038 - db_manager - INFO - Transaction committed successfully
2025-09-10 15:46:54,038 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-10 15:46:54,038 - db_manager - INFO - Connecting to database: grievance_db
2025-09-10 15:46:54,043 - db_manager - INFO - Starting database transaction
2025-09-10 15:46:54,043 - db_manager - INFO - Executing get_grievance_by_id: 
                SELECT g.*, c.complainant_full_name, c.complainant_phone, c.complainant_email,
    ...
2025-09-10 15:46:54,044 - db_manager - INFO - get_grievance_by_id completed in 0.01s. Rows: 1
2025-09-10 15:46:54,044 - db_manager - INFO - Transaction committed successfully
2025-09-10 15:46:54,044 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-10 15:46:54,044 - db_manager - DEBUG - get_grievance_by_id: grievance_id: {'grievance_id': 'GR-20250910-KOJH-C9DB-B', 'complainant_id': 'CM-20250910-KOJH-EDD5-B', 'grievance_categories': ['Environmental - Air Pollution', 'Safety - Road Safety Provisions'], 'grievance_categories_alternative': ['Environmental - Drainage And Sewage Management', 'Relocation Issues - Poor Housing Quality Of The Resettlement Site'], 'grievance_summary': 'Dust from road works is making kids sick and needs hospitalization', 'grievance_description': 'there is dust everywhere in the house\nkids are sick and need to go to hospital', 'grievance_claimed_amount': None, 'grievance_location': None, 'language_code': 'en', 'grievance_classification_status': 'pending', 'grievance_creation_date': datetime.datetime(2025, 9, 10, 15, 46, 38, 40671, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'grievance_modification_date': datetime.datetime(2025, 9, 10, 15, 46, 41, 838005, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'is_temporary': True, 'source': 'bot', 'complainant_full_name': None, 'complainant_phone': None, 'complainant_email': None, 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_municipality': None, 'complainant_ward': None, 'complainant_village': None, 'complainant_address': None}, results: [{'grievance_id': 'GR-20250910-KOJH-C9DB-B', 'complainant_id': 'CM-20250910-KOJH-EDD5-B', 'grievance_categories': '["Environmental - Air Pollution", "Safety - Road Safety Provisions"]', 'grievance_categories_alternative': '["Environmental - Drainage And Sewage Management", "Relocation Issues - Poor Housing Quality Of The Resettlement Site"]', 'grievance_summary': 'Dust from road works is making kids sick and needs hospitalization', 'grievance_description': 'there is dust everywhere in the house\nkids are sick and need to go to hospital', 'grievance_claimed_amount': None, 'grievance_location': None, 'language_code': 'en', 'grievance_classification_status': 'pending', 'grievance_creation_date': datetime.datetime(2025, 9, 10, 15, 46, 38, 40671, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'grievance_modification_date': datetime.datetime(2025, 9, 10, 15, 46, 41, 838005, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'is_temporary': True, 'source': 'bot', 'complainant_full_name': None, 'complainant_phone': None, 'complainant_email': None, 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_municipality': None, 'complainant_ward': None, 'complainant_village': None, 'complainant_address': None}]
2025-09-10 15:46:54,044 - db_manager - INFO - update_complainant: Updating complainant with ID: CM-20250910-KOJH-EDD5-B
2025-09-10 15:46:54,045 - db_manager - INFO - Connecting to database: grievance_db
2025-09-10 15:46:54,049 - db_manager - INFO - Starting database transaction
2025-09-10 15:46:54,049 - db_manager - INFO - Executing encrypt_field: SELECT encode(pgp_sym_encrypt(%s, %s), 'hex') AS encrypted...
2025-09-10 15:46:54,050 - db_manager - INFO - encrypt_field completed in 0.01s. Rows: 1
2025-09-10 15:46:54,050 - db_manager - INFO - Transaction committed successfully
2025-09-10 15:46:54,051 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-10 15:46:54,051 - db_manager - INFO - Connecting to database: grievance_db
2025-09-10 15:46:54,055 - db_manager - INFO - Starting database transaction
2025-09-10 15:46:54,055 - db_manager - INFO - Executing encrypt_field: SELECT encode(pgp_sym_encrypt(%s, %s), 'hex') AS encrypted...
2025-09-10 15:46:54,056 - db_manager - INFO - encrypt_field completed in 0.01s. Rows: 1
2025-09-10 15:46:54,056 - db_manager - INFO - Transaction committed successfully
2025-09-10 15:46:54,056 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-10 15:46:54,056 - db_manager - INFO - Connecting to database: grievance_db
2025-09-10 15:46:54,061 - db_manager - INFO - Starting database transaction
2025-09-10 15:46:54,061 - db_manager - INFO - Executing encrypt_field: SELECT encode(pgp_sym_encrypt(%s, %s), 'hex') AS encrypted...
2025-09-10 15:46:54,062 - db_manager - INFO - encrypt_field completed in 0.01s. Rows: 1
2025-09-10 15:46:54,062 - db_manager - INFO - Transaction committed successfully
2025-09-10 15:46:54,062 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-10 15:46:54,062 - db_manager - DEBUG - encrypted phone number Not provided at encrypt_complainant_data: c30d04070302a91e19525dd0c2457ed23d0162c04e61c7ce43c1f1166227ff761d31d872cbad0c80e36ae1007a76c7e4bf49cd02660cf3b37a0807649f356e76e329882e5097556ca0658648ec6c
2025-09-10 15:46:54,062 - db_manager - DEBUG - phone number Not provided hashed to d83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f at hash_sensitive_data
2025-09-10 15:46:54,062 - db_manager - DEBUG - encrypted and hashed data at encrypt_and_hash_sensitive_data: {'complainant_full_name': 'c30d0407030264c4cb897eacaf576ed23d01d8fc0ec46a1efa7d326257f383a3b3a89f65577875b6f301f3551d06c032ac0ee118488134366e767138d9aae4f6af3b6e284647af9da7c66731f316', 'complainant_phone': 'c30d04070302a91e19525dd0c2457ed23d0162c04e61c7ce43c1f1166227ff761d31d872cbad0c80e36ae1007a76c7e4bf49cd02660cf3b37a0807649f356e76e329882e5097556ca0658648ec6c', 'complainant_email': 'c30d04070302e00db81745516fb762d23d011c21c692512cfe437f97e09c14f74d6ad593b6d9d9a5f7c577741dd142bf1fc19a907717deea53250ecdd3098e1b0d40404e283e9d29b1ad6e0c62dd', 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_email_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'complainant_full_name_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'complainant_phone_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f'}
2025-09-10 15:46:54,062 - db_manager - DEBUG - encrypted_data at update_complainant: {'complainant_full_name': 'c30d0407030264c4cb897eacaf576ed23d01d8fc0ec46a1efa7d326257f383a3b3a89f65577875b6f301f3551d06c032ac0ee118488134366e767138d9aae4f6af3b6e284647af9da7c66731f316', 'complainant_phone': 'c30d04070302a91e19525dd0c2457ed23d0162c04e61c7ce43c1f1166227ff761d31d872cbad0c80e36ae1007a76c7e4bf49cd02660cf3b37a0807649f356e76e329882e5097556ca0658648ec6c', 'complainant_email': 'c30d04070302e00db81745516fb762d23d011c21c692512cfe437f97e09c14f74d6ad593b6d9d9a5f7c577741dd142bf1fc19a907717deea53250ecdd3098e1b0d40404e283e9d29b1ad6e0c62dd', 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_email_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'complainant_full_name_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'complainant_phone_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f'}
2025-09-10 15:46:54,062 - db_manager - DEBUG - execute_update values: ('c30d0407030264c4cb897eacaf576ed23d01d8fc0ec46a1efa7d326257f383a3b3a89f65577875b6f301f3551d06c032ac0ee118488134366e767138d9aae4f6af3b6e284647af9da7c66731f316', 'c30d04070302a91e19525dd0c2457ed23d0162c04e61c7ce43c1f1166227ff761d31d872cbad0c80e36ae1007a76c7e4bf49cd02660cf3b37a0807649f356e76e329882e5097556ca0658648ec6c', 'c30d04070302e00db81745516fb762d23d011c21c692512cfe437f97e09c14f74d6ad593b6d9d9a5f7c577741dd142bf1fc19a907717deea53250ecdd3098e1b0d40404e283e9d29b1ad6e0c62dd', 'Koshi', 'Jhapa', 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'CM-20250910-KOJH-EDD5-B')
2025-09-10 15:46:54,062 - db_manager - DEBUG - execute_update query: UPDATE complainants SET complainant_full_name = %s, complainant_phone = %s, complainant_email = %s, complainant_province = %s, complainant_district = %s, complainant_email_hash = %s, complainant_full_name_hash = %s, complainant_phone_hash = %s WHERE complainant_id = %s
2025-09-10 15:46:54,062 - db_manager - INFO - Connecting to database: grievance_db
2025-09-10 15:46:54,067 - db_manager - INFO - Starting database transaction
2025-09-10 15:46:54,067 - db_manager - INFO - execute_update: Executing update query: UPDATE complainants SET complainant_full_name = %s, complainant_phone = %s, complainant_email = %s, ...
2025-09-10 15:46:54,068 - db_manager - INFO - execute_update: Update completed in 0.01s. Affected rows: 1
2025-09-10 15:46:54,070 - db_manager - INFO - Transaction committed successfully
2025-09-10 15:46:54,070 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-10 15:46:54,070 - db_manager - INFO - Complainant updated in db: CM-20250910-KOJH-EDD5-B
2025-09-10 15:46:54,070 - db_manager - INFO - update_grievance: Updating grievance with ID: GR-20250910-KOJH-C9DB-B
2025-09-10 15:46:54,070 - db_manager - DEBUG - execute_update values: ('there is dust everywhere in the house\nkids are sick and need to go to hospital', 'GR-20250910-KOJH-C9DB-B')
2025-09-10 15:46:54,070 - db_manager - DEBUG - execute_update query: 
                    UPDATE grievances 
                    SET grievance_description = %s, grievance_modification_date = CURRENT_TIMESTAMP
                    WHERE grievance_id = %s
                    RETURNING grievance_id
                
2025-09-10 15:46:54,070 - db_manager - INFO - Connecting to database: grievance_db
2025-09-10 15:46:54,074 - db_manager - INFO - Starting database transaction
2025-09-10 15:46:54,074 - db_manager - INFO - execute_update: Executing update query: 
                    UPDATE grievances 
                    SET grievance_description = %s, grievanc...
2025-09-10 15:46:54,075 - db_manager - INFO - execute_update: Update completed in 0.01s. Affected rows: 1
2025-09-10 15:46:54,077 - db_manager - INFO - Transaction committed successfully
2025-09-10 15:46:54,077 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-10 15:46:54,077 - db_manager - INFO - update_grievance: Updated grievance with ID: GR-20250910-KOJH-C9DB-B, rows affected: 1
2025-09-10 15:46:54,077 - db_manager - INFO - Grievance updated in db: GR-20250910-KOJH-C9DB-B
2025-09-10 15:46:54,077 - db_manager - INFO - Connecting to database: grievance_db
2025-09-10 15:46:54,082 - db_manager - INFO - Starting database transaction
2025-09-10 15:46:54,082 - db_manager - INFO - Executing get_grievance_files: 
            SELECT file_id, file_name, file_type, file_size, upload_timestamp
            FROM file...
2025-09-10 15:46:54,083 - db_manager - INFO - get_grievance_files completed in 0.01s. Rows: 0
2025-09-10 15:46:54,083 - db_manager - INFO - Transaction committed successfully
2025-09-10 15:46:54,083 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-10 15:46:54,083 - db_manager - INFO - Connecting to database: grievance_db
2025-09-10 15:46:54,088 - db_manager - INFO - Starting database transaction
2025-09-10 15:46:54,088 - db_manager - INFO - Executing get_grievance_files: 
            SELECT file_id, file_name, file_type, file_size, upload_timestamp
            FROM file...
2025-09-10 15:46:54,088 - db_manager - INFO - get_grievance_files completed in 0.01s. Rows: 0
2025-09-10 15:46:54,089 - db_manager - INFO - Transaction committed successfully
2025-09-10 15:46:54,089 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-10 15:46:54,128 - db_manager - INFO - Connecting to database: grievance_db
2025-09-10 15:46:54,135 - db_manager - INFO - Starting database transaction
2025-09-10 15:46:54,135 - db_manager - INFO - Executing get_grievance_by_id: 
                SELECT g.*, c.complainant_full_name, c.complainant_phone, c.complainant_email,
    ...
2025-09-10 15:46:54,137 - db_manager - INFO - get_grievance_by_id completed in 0.01s. Rows: 1
2025-09-10 15:46:54,137 - db_manager - INFO - Transaction committed successfully
2025-09-10 15:46:54,137 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-10 15:46:54,138 - db_manager - DEBUG - get_grievance_by_id: grievance_id: {'grievance_id': 'GR-20250910-KOJH-C9DB-B', 'complainant_id': 'CM-20250910-KOJH-EDD5-B', 'grievance_categories': ['Environmental - Air Pollution', 'Safety - Road Safety Provisions'], 'grievance_categories_alternative': ['Environmental - Drainage And Sewage Management', 'Relocation Issues - Poor Housing Quality Of The Resettlement Site'], 'grievance_summary': 'Dust from road works is making kids sick and needs hospitalization', 'grievance_description': 'there is dust everywhere in the house\nkids are sick and need to go to hospital', 'grievance_claimed_amount': None, 'grievance_location': None, 'language_code': 'en', 'grievance_classification_status': 'pending', 'grievance_creation_date': datetime.datetime(2025, 9, 10, 15, 46, 38, 40671, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'grievance_modification_date': datetime.datetime(2025, 9, 10, 15, 46, 54, 74788, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'is_temporary': True, 'source': 'bot', 'complainant_full_name': 'c30d0407030264c4cb897eacaf576ed23d01d8fc0ec46a1efa7d326257f383a3b3a89f65577875b6f301f3551d06c032ac0ee118488134366e767138d9aae4f6af3b6e284647af9da7c66731f316', 'complainant_phone': 'c30d04070302a91e19525dd0c2457ed23d0162c04e61c7ce43c1f1166227ff761d31d872cbad0c80e36ae1007a76c7e4bf49cd02660cf3b37a0807649f356e76e329882e5097556ca0658648ec6c', 'complainant_email': 'c30d04070302e00db81745516fb762d23d011c21c692512cfe437f97e09c14f74d6ad593b6d9d9a5f7c577741dd142bf1fc19a907717deea53250ecdd3098e1b0d40404e283e9d29b1ad6e0c62dd', 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_municipality': None, 'complainant_ward': None, 'complainant_village': None, 'complainant_address': None}, results: [{'grievance_id': 'GR-20250910-KOJH-C9DB-B', 'complainant_id': 'CM-20250910-KOJH-EDD5-B', 'grievance_categories': '["Environmental - Air Pollution", "Safety - Road Safety Provisions"]', 'grievance_categories_alternative': '["Environmental - Drainage And Sewage Management", "Relocation Issues - Poor Housing Quality Of The Resettlement Site"]', 'grievance_summary': 'Dust from road works is making kids sick and needs hospitalization', 'grievance_description': 'there is dust everywhere in the house\nkids are sick and need to go to hospital', 'grievance_claimed_amount': None, 'grievance_location': None, 'language_code': 'en', 'grievance_classification_status': 'pending', 'grievance_creation_date': datetime.datetime(2025, 9, 10, 15, 46, 38, 40671, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'grievance_modification_date': datetime.datetime(2025, 9, 10, 15, 46, 54, 74788, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'is_temporary': True, 'source': 'bot', 'complainant_full_name': 'c30d0407030264c4cb897eacaf576ed23d01d8fc0ec46a1efa7d326257f383a3b3a89f65577875b6f301f3551d06c032ac0ee118488134366e767138d9aae4f6af3b6e284647af9da7c66731f316', 'complainant_phone': 'c30d04070302a91e19525dd0c2457ed23d0162c04e61c7ce43c1f1166227ff761d31d872cbad0c80e36ae1007a76c7e4bf49cd02660cf3b37a0807649f356e76e329882e5097556ca0658648ec6c', 'complainant_email': 'c30d04070302e00db81745516fb762d23d011c21c692512cfe437f97e09c14f74d6ad593b6d9d9a5f7c577741dd142bf1fc19a907717deea53250ecdd3098e1b0d40404e283e9d29b1ad6e0c62dd', 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_municipality': None, 'complainant_ward': None, 'complainant_village': None, 'complainant_address': None}]
2025-09-10 15:50:14,984 - db_manager - INFO - Connecting to database: grievance_db
2025-09-10 15:50:14,990 - db_manager - INFO - Starting database transaction
2025-09-10 15:50:14,990 - db_manager - INFO - Executing get_complainant_id_from_grievance_id: 
            SELECT complainant_id
            FROM grievances
            WHERE grievance_id = %s
 ...
2025-09-10 15:50:14,991 - db_manager - INFO - get_complainant_id_from_grievance_id completed in 0.01s. Rows: 1
2025-09-10 15:50:14,991 - db_manager - INFO - Transaction committed successfully
2025-09-10 15:50:14,992 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-10 15:50:14,992 - db_manager - INFO - update_complainant: Updating complainant with ID: CM-20250910-KOJH-EDD5-B
2025-09-10 15:50:14,992 - db_manager - DEBUG - encrypted and hashed data at encrypt_and_hash_sensitive_data: {}
2025-09-10 15:50:14,992 - db_manager - DEBUG - encrypted_data at update_complainant: {}
2025-09-10 15:50:14,992 - db_manager - DEBUG - No complainant field to update
2025-09-10 15:50:14,992 - db_manager - INFO - Complainant updated in db: GR-20250910-KOJH-C9DB-B
2025-09-10 15:50:14,992 - db_manager - INFO - update_grievance: Updating grievance with ID: GR-20250910-KOJH-C9DB-B
2025-09-10 15:50:14,992 - db_manager - DEBUG - execute_update values: ('["Environmental - Air Pollution", "Safety - Road Safety Provisions", "Environmental - Drainage And Sewage Management"]', 'GR-20250910-KOJH-C9DB-B')
2025-09-10 15:50:14,992 - db_manager - DEBUG - execute_update query: 
                    UPDATE grievances 
                    SET grievance_categories = %s, grievance_modification_date = CURRENT_TIMESTAMP
                    WHERE grievance_id = %s
                    RETURNING grievance_id
                
2025-09-10 15:50:14,992 - db_manager - INFO - Connecting to database: grievance_db
2025-09-10 15:50:14,997 - db_manager - INFO - Starting database transaction
2025-09-10 15:50:14,998 - db_manager - INFO - execute_update: Executing update query: 
                    UPDATE grievances 
                    SET grievance_categories = %s, grievance...
2025-09-10 15:50:14,999 - db_manager - INFO - execute_update: Update completed in 0.01s. Affected rows: 1
2025-09-10 15:50:15,002 - db_manager - INFO - Transaction committed successfully
2025-09-10 15:50:15,002 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-10 15:50:15,002 - db_manager - INFO - update_grievance: Updated grievance with ID: GR-20250910-KOJH-C9DB-B, rows affected: 1
2025-09-10 15:50:15,002 - db_manager - INFO - Grievance updated in db: GR-20250910-KOJH-C9DB-B
2025-09-10 15:50:15,050 - db_manager - INFO - Connecting to database: grievance_db
2025-09-10 15:50:15,056 - db_manager - INFO - Starting database transaction
2025-09-10 15:50:15,056 - db_manager - INFO - Executing get_grievance_files: 
            SELECT file_id, file_name, file_type, file_size, upload_timestamp
            FROM file...
2025-09-10 15:50:15,057 - db_manager - INFO - get_grievance_files completed in 0.01s. Rows: 0
2025-09-10 15:50:15,058 - db_manager - INFO - Transaction committed successfully
2025-09-10 15:50:15,058 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-10 15:51:01,958 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-10 15:51:01,958 - db_manager - INFO - Database manager initialized successfully
2025-09-10 15:51:01,958 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-10 15:51:01,958 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-10 15:51:01,958 - db_manager - INFO - Database manager initialized successfully
2025-09-10 15:51:01,958 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-10 15:51:01,958 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-10 15:51:01,959 - db_manager - INFO - Database manager initialized successfully
2025-09-10 15:51:01,959 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-10 15:51:01,959 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-10 15:51:01,959 - db_manager - INFO - Database manager initialized successfully
2025-09-10 15:51:01,959 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-10 15:51:01,959 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-10 15:51:01,959 - db_manager - INFO - Database manager initialized successfully
2025-09-10 15:51:01,959 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-10 15:51:01,959 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-10 15:51:01,960 - db_manager - INFO - Database manager initialized successfully
2025-09-10 15:51:01,960 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-10 15:51:01,960 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-10 15:51:01,960 - db_manager - INFO - Database manager initialized successfully
2025-09-10 15:51:01,960 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-10 15:51:01,960 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-10 15:51:01,960 - db_manager - INFO - Database manager initialized successfully
2025-09-10 15:51:01,960 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-10 15:51:01,960 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-10 15:51:01,960 - db_manager - INFO - Database manager initialized successfully
2025-09-10 15:51:01,960 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-10 15:51:01,960 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-10 15:51:01,961 - db_manager - INFO - Database manager initialized successfully
2025-09-10 15:51:01,961 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-10 15:53:32,689 - db_manager - INFO - create_complainant: Creating complainant with ID: CM-20250910-KOJH-4FD5-B
2025-09-10 15:53:32,689 - db_manager - DEBUG - encrypted and hashed data at encrypt_and_hash_sensitive_data: {'complainant_id': 'CM-20250910-KOJH-4FD5-B', 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_unique_id': 'CM-20250910-KOJH-4FD5-B'}
2025-09-10 15:53:32,690 - db_manager - DEBUG - query_keys at generate_query_string: dict_keys(['complainant_id', 'complainant_province', 'complainant_district', 'complainant_unique_id'])
2025-09-10 15:53:32,690 - db_manager - DEBUG - Generated query: INSERT INTO complainants (complainant_id, complainant_province, complainant_district, complainant_unique_id) VALUES (%s, %s, %s, %s)
2025-09-10 15:53:32,690 - db_manager - DEBUG - len of query_keys: 4
2025-09-10 15:53:32,690 - db_manager - DEBUG - Generated query: INSERT INTO complainants (complainant_id, complainant_province, complainant_district, complainant_unique_id) VALUES (%s, %s, %s, %s)
2025-09-10 15:53:32,690 - db_manager - INFO - Connecting to database: grievance_db
2025-09-10 15:53:32,696 - db_manager - INFO - Starting database transaction
2025-09-10 15:53:32,698 - db_manager - INFO - Transaction committed successfully
2025-09-10 15:53:32,698 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-10 15:53:32,698 - db_manager - INFO - create_complainant: Successfully created complainant with ID: CM-20250910-KOJH-4FD5-B
2025-09-10 15:53:32,698 - db_manager - INFO - create_grievance: Creating grievance with data: {'grievance_id': 'GR-20250910-KOJH-73A7-B', 'complainant_id': 'CM-20250910-KOJH-4FD5-B', 'grievance_description': 'there is dust everywhere in the house kids are coughing I need to go to the hospital', 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_office': None, 'source': 'bot', 'complainant_unique_id': 'CM-20250910-KOJH-4FD5-B'}
2025-09-10 15:53:32,698 - db_manager - INFO - create_grievance: Creating grievance with ID: GR-20250910-KOJH-73A7-B
2025-09-10 15:53:32,698 - db_manager - INFO - create_grievance: Creating grievance with allowed fields: ['grievance_id', 'complainant_id', 'grievance_categories', 'grievance_categories_alternative', 'grievance_summary', 'grievance_description', 'grievance_claimed_amount', 'grievance_location', 'is_temporary', 'source', 'language_code', 'grievance_classification_status']
2025-09-10 15:53:32,698 - db_manager - DEBUG - query_keys at generate_query_string: dict_keys(['grievance_id', 'complainant_id', 'grievance_description', 'source'])
2025-09-10 15:53:32,698 - db_manager - DEBUG - Generated query: INSERT INTO grievances (grievance_id, complainant_id, grievance_description, source) VALUES (%s, %s, %s, %s) RETURNING grievance_id
2025-09-10 15:53:32,699 - db_manager - DEBUG - len of query_keys: 4
2025-09-10 15:53:32,699 - db_manager - DEBUG - Generated query: INSERT INTO grievances (grievance_id, complainant_id, grievance_description, source) VALUES (%s, %s, %s, %s) RETURNING grievance_id
2025-09-10 15:53:32,699 - db_manager - INFO - Connecting to database: grievance_db
2025-09-10 15:53:32,703 - db_manager - INFO - Starting database transaction
2025-09-10 15:53:32,707 - db_manager - INFO - Transaction committed successfully
2025-09-10 15:53:32,707 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-10 15:53:32,707 - db_manager - INFO - create_grievance: Successfully created grievance with ID: GR-20250910-KOJH-73A7-B
2025-09-10 15:53:55,913 - db_manager - INFO - Connecting to database: grievance_db
2025-09-10 15:53:55,919 - db_manager - INFO - Starting database transaction
2025-09-10 15:53:55,919 - db_manager - INFO - Executing get_complainant_by_id: 
            SELECT complainant_id, complainant_unique_id, complainant_full_name,    complainant_pho...
2025-09-10 15:53:55,920 - db_manager - INFO - get_complainant_by_id completed in 0.01s. Rows: 1
2025-09-10 15:53:55,920 - db_manager - INFO - Transaction committed successfully
2025-09-10 15:53:55,920 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-10 15:53:55,920 - db_manager - INFO - Connecting to database: grievance_db
2025-09-10 15:53:55,925 - db_manager - INFO - Starting database transaction
2025-09-10 15:53:55,925 - db_manager - INFO - Executing get_grievance_by_id: 
                SELECT g.*, c.complainant_full_name, c.complainant_phone, c.complainant_email,
    ...
2025-09-10 15:53:55,926 - db_manager - INFO - get_grievance_by_id completed in 0.01s. Rows: 1
2025-09-10 15:53:55,927 - db_manager - INFO - Transaction committed successfully
2025-09-10 15:53:55,927 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-10 15:53:55,927 - db_manager - DEBUG - get_grievance_by_id: grievance_id: {'grievance_id': 'GR-20250910-KOJH-73A7-B', 'complainant_id': 'CM-20250910-KOJH-4FD5-B', 'grievance_categories': ['Environmental - Air Pollution'], 'grievance_categories_alternative': ['Safety - Road Safety Provisions', 'Environmental - Drainage And Sewage Management'], 'grievance_summary': 'House is filled with dust causing children to cough and need hospital treatment.', 'grievance_description': 'there is dust everywhere in the house kids are coughing I need to go to the hospital', 'grievance_claimed_amount': None, 'grievance_location': None, 'language_code': 'en', 'grievance_classification_status': 'pending', 'grievance_creation_date': datetime.datetime(2025, 9, 10, 15, 53, 32, 703863, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'grievance_modification_date': datetime.datetime(2025, 9, 10, 15, 53, 36, 258854, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'is_temporary': True, 'source': 'bot', 'complainant_full_name': None, 'complainant_phone': None, 'complainant_email': None, 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_municipality': None, 'complainant_ward': None, 'complainant_village': None, 'complainant_address': None}, results: [{'grievance_id': 'GR-20250910-KOJH-73A7-B', 'complainant_id': 'CM-20250910-KOJH-4FD5-B', 'grievance_categories': '["Environmental - Air Pollution"]', 'grievance_categories_alternative': '["Safety - Road Safety Provisions", "Environmental - Drainage And Sewage Management"]', 'grievance_summary': 'House is filled with dust causing children to cough and need hospital treatment.', 'grievance_description': 'there is dust everywhere in the house kids are coughing I need to go to the hospital', 'grievance_claimed_amount': None, 'grievance_location': None, 'language_code': 'en', 'grievance_classification_status': 'pending', 'grievance_creation_date': datetime.datetime(2025, 9, 10, 15, 53, 32, 703863, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'grievance_modification_date': datetime.datetime(2025, 9, 10, 15, 53, 36, 258854, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'is_temporary': True, 'source': 'bot', 'complainant_full_name': None, 'complainant_phone': None, 'complainant_email': None, 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_municipality': None, 'complainant_ward': None, 'complainant_village': None, 'complainant_address': None}]
2025-09-10 15:53:55,927 - db_manager - INFO - update_complainant: Updating complainant with ID: CM-20250910-KOJH-4FD5-B
2025-09-10 15:53:55,927 - db_manager - INFO - Connecting to database: grievance_db
2025-09-10 15:53:55,932 - db_manager - INFO - Starting database transaction
2025-09-10 15:53:55,932 - db_manager - INFO - Executing encrypt_field: SELECT encode(pgp_sym_encrypt(%s, %s), 'hex') AS encrypted...
2025-09-10 15:53:55,935 - db_manager - INFO - encrypt_field completed in 0.01s. Rows: 1
2025-09-10 15:53:55,935 - db_manager - INFO - Transaction committed successfully
2025-09-10 15:53:55,935 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-10 15:53:55,936 - db_manager - INFO - Connecting to database: grievance_db
2025-09-10 15:53:55,941 - db_manager - INFO - Starting database transaction
2025-09-10 15:53:55,941 - db_manager - INFO - Executing encrypt_field: SELECT encode(pgp_sym_encrypt(%s, %s), 'hex') AS encrypted...
2025-09-10 15:53:55,942 - db_manager - INFO - encrypt_field completed in 0.01s. Rows: 1
2025-09-10 15:53:55,942 - db_manager - INFO - Transaction committed successfully
2025-09-10 15:53:55,942 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-10 15:53:55,942 - db_manager - INFO - Connecting to database: grievance_db
2025-09-10 15:53:55,947 - db_manager - INFO - Starting database transaction
2025-09-10 15:53:55,947 - db_manager - INFO - Executing encrypt_field: SELECT encode(pgp_sym_encrypt(%s, %s), 'hex') AS encrypted...
2025-09-10 15:53:55,948 - db_manager - INFO - encrypt_field completed in 0.01s. Rows: 1
2025-09-10 15:53:55,948 - db_manager - INFO - Transaction committed successfully
2025-09-10 15:53:55,948 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-10 15:53:55,948 - db_manager - DEBUG - encrypted phone number Not provided at encrypt_complainant_data: c30d04070302a67cc676e079bef07dd23d01e7765e1c42aee4b6455522dc30babac7760d5ddab56c31a4fee8b3cd724167fb007e3cc59a4e0566bd8ef90afc8efd63a38aa9fda0ee044c558d0853
2025-09-10 15:53:55,949 - db_manager - DEBUG - phone number Not provided hashed to d83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f at hash_sensitive_data
2025-09-10 15:53:55,949 - db_manager - DEBUG - encrypted and hashed data at encrypt_and_hash_sensitive_data: {'complainant_full_name': 'c30d04070302d54af3006a33f71878d23d01cf1e9a66434d75ebaa8fb7960af54b51ce6783e980dd31f383632b4332e1c44c82813b015800bc396d74e5c75150d26b577837147a6b4fdea044a3bb', 'complainant_phone': 'c30d04070302a67cc676e079bef07dd23d01e7765e1c42aee4b6455522dc30babac7760d5ddab56c31a4fee8b3cd724167fb007e3cc59a4e0566bd8ef90afc8efd63a38aa9fda0ee044c558d0853', 'complainant_email': 'c30d04070302d335a177c191681676d23d0186fd7f65d8c37e43765fc6df242dd46840d004c8a5ef4b6c33042b1d3d0fde1cf7b22ca51969fe9a633c8c9ac236f35e5cf0935963c7f50c03d4747d', 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_email_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'complainant_full_name_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'complainant_phone_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f'}
2025-09-10 15:53:55,949 - db_manager - DEBUG - encrypted_data at update_complainant: {'complainant_full_name': 'c30d04070302d54af3006a33f71878d23d01cf1e9a66434d75ebaa8fb7960af54b51ce6783e980dd31f383632b4332e1c44c82813b015800bc396d74e5c75150d26b577837147a6b4fdea044a3bb', 'complainant_phone': 'c30d04070302a67cc676e079bef07dd23d01e7765e1c42aee4b6455522dc30babac7760d5ddab56c31a4fee8b3cd724167fb007e3cc59a4e0566bd8ef90afc8efd63a38aa9fda0ee044c558d0853', 'complainant_email': 'c30d04070302d335a177c191681676d23d0186fd7f65d8c37e43765fc6df242dd46840d004c8a5ef4b6c33042b1d3d0fde1cf7b22ca51969fe9a633c8c9ac236f35e5cf0935963c7f50c03d4747d', 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_email_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'complainant_full_name_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'complainant_phone_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f'}
2025-09-10 15:53:55,949 - db_manager - DEBUG - execute_update values: ('c30d04070302d54af3006a33f71878d23d01cf1e9a66434d75ebaa8fb7960af54b51ce6783e980dd31f383632b4332e1c44c82813b015800bc396d74e5c75150d26b577837147a6b4fdea044a3bb', 'c30d04070302a67cc676e079bef07dd23d01e7765e1c42aee4b6455522dc30babac7760d5ddab56c31a4fee8b3cd724167fb007e3cc59a4e0566bd8ef90afc8efd63a38aa9fda0ee044c558d0853', 'c30d04070302d335a177c191681676d23d0186fd7f65d8c37e43765fc6df242dd46840d004c8a5ef4b6c33042b1d3d0fde1cf7b22ca51969fe9a633c8c9ac236f35e5cf0935963c7f50c03d4747d', 'Koshi', 'Jhapa', 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'CM-20250910-KOJH-4FD5-B')
2025-09-10 15:53:55,949 - db_manager - DEBUG - execute_update query: UPDATE complainants SET complainant_full_name = %s, complainant_phone = %s, complainant_email = %s, complainant_province = %s, complainant_district = %s, complainant_email_hash = %s, complainant_full_name_hash = %s, complainant_phone_hash = %s WHERE complainant_id = %s
2025-09-10 15:53:55,949 - db_manager - INFO - Connecting to database: grievance_db
2025-09-10 15:53:55,953 - db_manager - INFO - Starting database transaction
2025-09-10 15:53:55,953 - db_manager - INFO - execute_update: Executing update query: UPDATE complainants SET complainant_full_name = %s, complainant_phone = %s, complainant_email = %s, ...
2025-09-10 15:53:55,954 - db_manager - INFO - execute_update: Update completed in 0.01s. Affected rows: 1
2025-09-10 15:53:55,956 - db_manager - INFO - Transaction committed successfully
2025-09-10 15:53:55,956 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-10 15:53:55,956 - db_manager - INFO - Complainant updated in db: CM-20250910-KOJH-4FD5-B
2025-09-10 15:53:55,956 - db_manager - INFO - update_grievance: Updating grievance with ID: GR-20250910-KOJH-73A7-B
2025-09-10 15:53:55,956 - db_manager - DEBUG - execute_update values: ('there is dust everywhere in the house kids are coughing I need to go to the hospital', 'GR-20250910-KOJH-73A7-B')
2025-09-10 15:53:55,956 - db_manager - DEBUG - execute_update query: 
                    UPDATE grievances 
                    SET grievance_description = %s, grievance_modification_date = CURRENT_TIMESTAMP
                    WHERE grievance_id = %s
                    RETURNING grievance_id
                
2025-09-10 15:53:55,956 - db_manager - INFO - Connecting to database: grievance_db
2025-09-10 15:53:55,960 - db_manager - INFO - Starting database transaction
2025-09-10 15:53:55,960 - db_manager - INFO - execute_update: Executing update query: 
                    UPDATE grievances 
                    SET grievance_description = %s, grievanc...
2025-09-10 15:53:55,961 - db_manager - INFO - execute_update: Update completed in 0.01s. Affected rows: 1
2025-09-10 15:53:55,963 - db_manager - INFO - Transaction committed successfully
2025-09-10 15:53:55,963 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-10 15:53:55,963 - db_manager - INFO - update_grievance: Updated grievance with ID: GR-20250910-KOJH-73A7-B, rows affected: 1
2025-09-10 15:53:55,963 - db_manager - INFO - Grievance updated in db: GR-20250910-KOJH-73A7-B
2025-09-10 15:53:55,963 - db_manager - INFO - Connecting to database: grievance_db
2025-09-10 15:53:55,968 - db_manager - INFO - Starting database transaction
2025-09-10 15:53:55,968 - db_manager - INFO - Executing get_grievance_files: 
            SELECT file_id, file_name, file_type, file_size, upload_timestamp
            FROM file...
2025-09-10 15:53:55,969 - db_manager - INFO - get_grievance_files completed in 0.01s. Rows: 0
2025-09-10 15:53:55,969 - db_manager - INFO - Transaction committed successfully
2025-09-10 15:53:55,969 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-10 15:53:55,969 - db_manager - INFO - Connecting to database: grievance_db
2025-09-10 15:53:55,973 - db_manager - INFO - Starting database transaction
2025-09-10 15:53:55,974 - db_manager - INFO - Executing get_grievance_files: 
            SELECT file_id, file_name, file_type, file_size, upload_timestamp
            FROM file...
2025-09-10 15:53:55,975 - db_manager - INFO - get_grievance_files completed in 0.01s. Rows: 0
2025-09-10 15:53:55,975 - db_manager - INFO - Transaction committed successfully
2025-09-10 15:53:55,975 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-10 15:53:56,016 - db_manager - INFO - Connecting to database: grievance_db
2025-09-10 15:53:56,021 - db_manager - INFO - Starting database transaction
2025-09-10 15:53:56,021 - db_manager - INFO - Executing get_grievance_by_id: 
                SELECT g.*, c.complainant_full_name, c.complainant_phone, c.complainant_email,
    ...
2025-09-10 15:53:56,023 - db_manager - INFO - get_grievance_by_id completed in 0.01s. Rows: 1
2025-09-10 15:53:56,023 - db_manager - INFO - Transaction committed successfully
2025-09-10 15:53:56,023 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-10 15:53:56,023 - db_manager - DEBUG - get_grievance_by_id: grievance_id: {'grievance_id': 'GR-20250910-KOJH-73A7-B', 'complainant_id': 'CM-20250910-KOJH-4FD5-B', 'grievance_categories': ['Environmental - Air Pollution'], 'grievance_categories_alternative': ['Safety - Road Safety Provisions', 'Environmental - Drainage And Sewage Management'], 'grievance_summary': 'House is filled with dust causing children to cough and need hospital treatment.', 'grievance_description': 'there is dust everywhere in the house kids are coughing I need to go to the hospital', 'grievance_claimed_amount': None, 'grievance_location': None, 'language_code': 'en', 'grievance_classification_status': 'pending', 'grievance_creation_date': datetime.datetime(2025, 9, 10, 15, 53, 32, 703863, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'grievance_modification_date': datetime.datetime(2025, 9, 10, 15, 53, 55, 960682, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'is_temporary': True, 'source': 'bot', 'complainant_full_name': 'c30d04070302d54af3006a33f71878d23d01cf1e9a66434d75ebaa8fb7960af54b51ce6783e980dd31f383632b4332e1c44c82813b015800bc396d74e5c75150d26b577837147a6b4fdea044a3bb', 'complainant_phone': 'c30d04070302a67cc676e079bef07dd23d01e7765e1c42aee4b6455522dc30babac7760d5ddab56c31a4fee8b3cd724167fb007e3cc59a4e0566bd8ef90afc8efd63a38aa9fda0ee044c558d0853', 'complainant_email': 'c30d04070302d335a177c191681676d23d0186fd7f65d8c37e43765fc6df242dd46840d004c8a5ef4b6c33042b1d3d0fde1cf7b22ca51969fe9a633c8c9ac236f35e5cf0935963c7f50c03d4747d', 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_municipality': None, 'complainant_ward': None, 'complainant_village': None, 'complainant_address': None}, results: [{'grievance_id': 'GR-20250910-KOJH-73A7-B', 'complainant_id': 'CM-20250910-KOJH-4FD5-B', 'grievance_categories': '["Environmental - Air Pollution"]', 'grievance_categories_alternative': '["Safety - Road Safety Provisions", "Environmental - Drainage And Sewage Management"]', 'grievance_summary': 'House is filled with dust causing children to cough and need hospital treatment.', 'grievance_description': 'there is dust everywhere in the house kids are coughing I need to go to the hospital', 'grievance_claimed_amount': None, 'grievance_location': None, 'language_code': 'en', 'grievance_classification_status': 'pending', 'grievance_creation_date': datetime.datetime(2025, 9, 10, 15, 53, 32, 703863, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'grievance_modification_date': datetime.datetime(2025, 9, 10, 15, 53, 55, 960682, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'is_temporary': True, 'source': 'bot', 'complainant_full_name': 'c30d04070302d54af3006a33f71878d23d01cf1e9a66434d75ebaa8fb7960af54b51ce6783e980dd31f383632b4332e1c44c82813b015800bc396d74e5c75150d26b577837147a6b4fdea044a3bb', 'complainant_phone': 'c30d04070302a67cc676e079bef07dd23d01e7765e1c42aee4b6455522dc30babac7760d5ddab56c31a4fee8b3cd724167fb007e3cc59a4e0566bd8ef90afc8efd63a38aa9fda0ee044c558d0853', 'complainant_email': 'c30d04070302d335a177c191681676d23d0186fd7f65d8c37e43765fc6df242dd46840d004c8a5ef4b6c33042b1d3d0fde1cf7b22ca51969fe9a633c8c9ac236f35e5cf0935963c7f50c03d4747d', 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_municipality': None, 'complainant_ward': None, 'complainant_village': None, 'complainant_address': None}]
2025-09-10 15:54:26,167 - db_manager - INFO - Connecting to database: grievance_db
2025-09-10 15:54:26,172 - db_manager - INFO - Starting database transaction
2025-09-10 15:54:26,172 - db_manager - INFO - Executing get_complainant_id_from_grievance_id: 
            SELECT complainant_id
            FROM grievances
            WHERE grievance_id = %s
 ...
2025-09-10 15:54:26,173 - db_manager - INFO - get_complainant_id_from_grievance_id completed in 0.01s. Rows: 1
2025-09-10 15:54:26,173 - db_manager - INFO - Transaction committed successfully
2025-09-10 15:54:26,174 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-10 15:54:26,174 - db_manager - INFO - update_complainant: Updating complainant with ID: CM-20250910-KOJH-4FD5-B
2025-09-10 15:54:26,174 - db_manager - DEBUG - encrypted and hashed data at encrypt_and_hash_sensitive_data: {}
2025-09-10 15:54:26,174 - db_manager - DEBUG - encrypted_data at update_complainant: {}
2025-09-10 15:54:26,174 - db_manager - DEBUG - No complainant field to update
2025-09-10 15:54:26,174 - db_manager - INFO - Complainant updated in db: GR-20250910-KOJH-73A7-B
2025-09-10 15:54:26,174 - db_manager - INFO - update_grievance: Updating grievance with ID: GR-20250910-KOJH-73A7-B
2025-09-10 15:54:26,174 - db_manager - DEBUG - execute_update values: ('[]', 'GR-20250910-KOJH-73A7-B')
2025-09-10 15:54:26,174 - db_manager - DEBUG - execute_update query: 
                    UPDATE grievances 
                    SET grievance_categories = %s, grievance_modification_date = CURRENT_TIMESTAMP
                    WHERE grievance_id = %s
                    RETURNING grievance_id
                
2025-09-10 15:54:26,174 - db_manager - INFO - Connecting to database: grievance_db
2025-09-10 15:54:26,179 - db_manager - INFO - Starting database transaction
2025-09-10 15:54:26,179 - db_manager - INFO - execute_update: Executing update query: 
                    UPDATE grievances 
                    SET grievance_categories = %s, grievance...
2025-09-10 15:54:26,180 - db_manager - INFO - execute_update: Update completed in 0.01s. Affected rows: 1
2025-09-10 15:54:26,182 - db_manager - INFO - Transaction committed successfully
2025-09-10 15:54:26,182 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-10 15:54:26,182 - db_manager - INFO - update_grievance: Updated grievance with ID: GR-20250910-KOJH-73A7-B, rows affected: 1
2025-09-10 15:54:26,182 - db_manager - INFO - Grievance updated in db: GR-20250910-KOJH-73A7-B
2025-09-10 15:54:26,227 - db_manager - INFO - Connecting to database: grievance_db
2025-09-10 15:54:26,232 - db_manager - INFO - Starting database transaction
2025-09-10 15:54:26,232 - db_manager - INFO - Executing get_grievance_files: 
            SELECT file_id, file_name, file_type, file_size, upload_timestamp
            FROM file...
2025-09-10 15:54:26,233 - db_manager - INFO - get_grievance_files completed in 0.01s. Rows: 0
2025-09-10 15:54:26,233 - db_manager - INFO - Transaction committed successfully
2025-09-10 15:54:26,234 - db_manager - INFO - Database connection closed. Duration: 0.01s
