2025-09-18 08:44:24,199 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-18 08:44:24,201 - db_manager - INFO - Database manager initialized successfully
2025-09-18 08:44:24,201 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-18 08:44:24,201 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-18 08:44:24,201 - db_manager - INFO - Database manager initialized successfully
2025-09-18 08:44:24,201 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-18 08:44:24,201 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-18 08:44:24,201 - db_manager - INFO - Database manager initialized successfully
2025-09-18 08:44:24,201 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-18 08:44:24,202 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-18 08:44:24,202 - db_manager - INFO - Database manager initialized successfully
2025-09-18 08:44:24,202 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-18 08:44:24,202 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-18 08:44:24,202 - db_manager - INFO - Database manager initialized successfully
2025-09-18 08:44:24,202 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-18 08:44:24,202 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-18 08:44:24,202 - db_manager - INFO - Database manager initialized successfully
2025-09-18 08:44:24,202 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-18 08:44:24,202 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-18 08:44:24,202 - db_manager - INFO - Database manager initialized successfully
2025-09-18 08:44:24,202 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-18 08:44:24,202 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-18 08:44:24,202 - db_manager - INFO - Database manager initialized successfully
2025-09-18 08:44:24,202 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-18 08:44:24,202 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-18 08:44:24,202 - db_manager - INFO - Database manager initialized successfully
2025-09-18 08:44:24,202 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-18 08:44:24,202 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-18 08:44:24,202 - db_manager - INFO - Database manager initialized successfully
2025-09-18 08:44:24,202 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-18 08:45:22,357 - db_manager - INFO - create_complainant: Creating complainant with ID: CM-20250918-KOJH-5403-B
2025-09-18 08:45:22,357 - db_manager - DEBUG - encrypted and hashed data at encrypt_and_hash_sensitive_data: {'complainant_id': 'CM-20250918-KOJH-5403-B', 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_unique_id': 'CM-20250918-KOJH-5403-B'}
2025-09-18 08:45:22,357 - db_manager - DEBUG - query_keys at generate_query_string: dict_keys(['complainant_id', 'complainant_province', 'complainant_district', 'complainant_unique_id'])
2025-09-18 08:45:22,357 - db_manager - DEBUG - Generated query: INSERT INTO complainants (complainant_id, complainant_province, complainant_district, complainant_unique_id) VALUES (%s, %s, %s, %s)
2025-09-18 08:45:22,357 - db_manager - DEBUG - len of query_keys: 4
2025-09-18 08:45:22,357 - db_manager - DEBUG - Generated query: INSERT INTO complainants (complainant_id, complainant_province, complainant_district, complainant_unique_id) VALUES (%s, %s, %s, %s)
2025-09-18 08:45:22,357 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 08:45:22,363 - db_manager - INFO - Starting database transaction
2025-09-18 08:45:22,366 - db_manager - INFO - Transaction committed successfully
2025-09-18 08:45:22,367 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 08:45:22,367 - db_manager - INFO - create_complainant: Successfully created complainant with ID: CM-20250918-KOJH-5403-B
2025-09-18 08:45:22,367 - db_manager - INFO - create_grievance: Creating grievance with data: {'grievance_id': 'GR-20250918-KOJH-C16F-B', 'complainant_id': 'CM-20250918-KOJH-5403-B', 'grievance_description': 'dust everywhere my kids are sick I want to go to the hospital', 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_office': None, 'source': 'bot', 'complainant_unique_id': 'CM-20250918-KOJH-5403-B'}
2025-09-18 08:45:22,367 - db_manager - INFO - create_grievance: Creating grievance with ID: GR-20250918-KOJH-C16F-B
2025-09-18 08:45:22,367 - db_manager - INFO - create_grievance: Creating grievance with allowed fields: ['grievance_id', 'complainant_id', 'grievance_categories', 'grievance_categories_alternative', 'follow_up_question', 'grievance_summary', 'grievance_description', 'grievance_claimed_amount', 'grievance_location', 'is_temporary', 'source', 'language_code', 'grievance_classification_status']
2025-09-18 08:45:22,367 - db_manager - DEBUG - query_keys at generate_query_string: dict_keys(['grievance_id', 'complainant_id', 'grievance_description', 'source'])
2025-09-18 08:45:22,367 - db_manager - DEBUG - Generated query: INSERT INTO grievances (grievance_id, complainant_id, grievance_description, source) VALUES (%s, %s, %s, %s) RETURNING grievance_id
2025-09-18 08:45:22,367 - db_manager - DEBUG - len of query_keys: 4
2025-09-18 08:45:22,367 - db_manager - DEBUG - Generated query: INSERT INTO grievances (grievance_id, complainant_id, grievance_description, source) VALUES (%s, %s, %s, %s) RETURNING grievance_id
2025-09-18 08:45:22,367 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 08:45:22,372 - db_manager - INFO - Starting database transaction
2025-09-18 08:45:22,379 - db_manager - INFO - Transaction committed successfully
2025-09-18 08:45:22,379 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 08:45:22,380 - db_manager - INFO - create_grievance: Successfully created grievance with ID: GR-20250918-KOJH-C16F-B
2025-09-18 08:45:45,619 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 08:45:45,625 - db_manager - INFO - Starting database transaction
2025-09-18 08:45:45,625 - db_manager - INFO - Executing get_complainant_by_id: 
            SELECT complainant_id, complainant_unique_id, complainant_full_name,    complainant_pho...
2025-09-18 08:45:45,626 - db_manager - INFO - get_complainant_by_id completed in 0.01s. Rows: 1
2025-09-18 08:45:45,626 - db_manager - INFO - Transaction committed successfully
2025-09-18 08:45:45,626 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 08:45:45,626 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 08:45:45,632 - db_manager - INFO - Starting database transaction
2025-09-18 08:45:45,632 - db_manager - INFO - Executing get_grievance_by_id: 
                SELECT g.*, c.complainant_full_name, c.complainant_phone, c.complainant_email,
    ...
2025-09-18 08:45:45,633 - db_manager - INFO - get_grievance_by_id completed in 0.01s. Rows: 1
2025-09-18 08:45:45,634 - db_manager - INFO - Transaction committed successfully
2025-09-18 08:45:45,634 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 08:45:45,634 - db_manager - DEBUG - get_grievance_by_id: grievance_id: {'grievance_id': 'GR-20250918-KOJH-C16F-B', 'complainant_id': 'CM-20250918-KOJH-5403-B', 'grievance_categories': ['Environmental - Air Pollution'], 'grievance_categories_alternative': [], 'follow_up_question': ['How many people in your household are affected by the dust, and what health issues have occurred (e.g., illnesses or hospital visits)?'], 'grievance_summary': 'Dust from the road works is making my kids sick, and I want to take them to the hospital.', 'grievance_description': 'dust everywhere my kids are sick I want to go to the hospital', 'grievance_claimed_amount': None, 'grievance_location': None, 'language_code': 'en', 'grievance_classification_status': 'pending', 'grievance_creation_date': datetime.datetime(2025, 9, 18, 8, 45, 22, 372962, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'grievance_modification_date': datetime.datetime(2025, 9, 18, 8, 45, 30, 498049, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'is_temporary': True, 'source': 'bot', 'complainant_full_name': None, 'complainant_phone': None, 'complainant_email': None, 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_municipality': None, 'complainant_ward': None, 'complainant_village': None, 'complainant_address': None}, results: [{'grievance_id': 'GR-20250918-KOJH-C16F-B', 'complainant_id': 'CM-20250918-KOJH-5403-B', 'grievance_categories': '["Environmental - Air Pollution"]', 'grievance_categories_alternative': '[]', 'follow_up_question': '["How many people in your household are affected by the dust, and what health issues have occurred (e.g., illnesses or hospital visits)?"]', 'grievance_summary': 'Dust from the road works is making my kids sick, and I want to take them to the hospital.', 'grievance_description': 'dust everywhere my kids are sick I want to go to the hospital', 'grievance_claimed_amount': None, 'grievance_location': None, 'language_code': 'en', 'grievance_classification_status': 'pending', 'grievance_creation_date': datetime.datetime(2025, 9, 18, 8, 45, 22, 372962, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'grievance_modification_date': datetime.datetime(2025, 9, 18, 8, 45, 30, 498049, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'is_temporary': True, 'source': 'bot', 'complainant_full_name': None, 'complainant_phone': None, 'complainant_email': None, 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_municipality': None, 'complainant_ward': None, 'complainant_village': None, 'complainant_address': None}]
2025-09-18 08:45:45,634 - db_manager - INFO - update_complainant: Updating complainant with ID: CM-20250918-KOJH-5403-B
2025-09-18 08:45:45,634 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 08:45:45,640 - db_manager - INFO - Starting database transaction
2025-09-18 08:45:45,640 - db_manager - INFO - Executing encrypt_field: SELECT encode(pgp_sym_encrypt(%s, %s), 'hex') AS encrypted...
2025-09-18 08:45:45,645 - db_manager - INFO - encrypt_field completed in 0.01s. Rows: 1
2025-09-18 08:45:45,646 - db_manager - INFO - Transaction committed successfully
2025-09-18 08:45:45,646 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 08:45:45,646 - db_manager - DEBUG - encrypted phone number Not provided at encrypt_complainant_data: c30d0407030264b167c6a6e6a44568d23d01b3bbaf15981b27f57336be68842745a575f1d9b3cb769d5130d333facc36ca3f6e0eed39e38c14fa97a1ca1b412c922a3dcf0d1c138fbfd9d132babc
2025-09-18 08:45:45,646 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 08:45:45,651 - db_manager - INFO - Starting database transaction
2025-09-18 08:45:45,651 - db_manager - INFO - Executing encrypt_field: SELECT encode(pgp_sym_encrypt(%s, %s), 'hex') AS encrypted...
2025-09-18 08:45:45,652 - db_manager - INFO - encrypt_field completed in 0.01s. Rows: 1
2025-09-18 08:45:45,652 - db_manager - INFO - Transaction committed successfully
2025-09-18 08:45:45,652 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 08:45:45,652 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 08:45:45,657 - db_manager - INFO - Starting database transaction
2025-09-18 08:45:45,657 - db_manager - INFO - Executing encrypt_field: SELECT encode(pgp_sym_encrypt(%s, %s), 'hex') AS encrypted...
2025-09-18 08:45:45,658 - db_manager - INFO - encrypt_field completed in 0.01s. Rows: 1
2025-09-18 08:45:45,659 - db_manager - INFO - Transaction committed successfully
2025-09-18 08:45:45,659 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 08:45:45,659 - db_manager - DEBUG - phone number Not provided hashed to d83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f at hash_sensitive_data
2025-09-18 08:45:45,659 - db_manager - DEBUG - encrypted and hashed data at encrypt_and_hash_sensitive_data: {'complainant_full_name': 'c30d04070302e082da3fe2a093956dd23d01f3228d3e95ed04807660b3e9799b7df1369b5b44bbaab83c85816668c4842d8abcf6b1e3125768bd7fd38d64b6093c50cbb80844bbf3c0625f1db56d', 'complainant_phone': 'c30d0407030264b167c6a6e6a44568d23d01b3bbaf15981b27f57336be68842745a575f1d9b3cb769d5130d333facc36ca3f6e0eed39e38c14fa97a1ca1b412c922a3dcf0d1c138fbfd9d132babc', 'complainant_email': 'c30d04070302923f894a1881f0ad73d23d0124274b014461258532677f890a3e275484f9e85f1f8e2715e1f57ed81f348cb19d81513969292bb0d14427d282c800c89889d747928789e25fdc3611', 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_phone_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'complainant_full_name_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'complainant_email_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f'}
2025-09-18 08:45:45,659 - db_manager - DEBUG - encrypted_data at update_complainant: {'complainant_full_name': 'c30d04070302e082da3fe2a093956dd23d01f3228d3e95ed04807660b3e9799b7df1369b5b44bbaab83c85816668c4842d8abcf6b1e3125768bd7fd38d64b6093c50cbb80844bbf3c0625f1db56d', 'complainant_phone': 'c30d0407030264b167c6a6e6a44568d23d01b3bbaf15981b27f57336be68842745a575f1d9b3cb769d5130d333facc36ca3f6e0eed39e38c14fa97a1ca1b412c922a3dcf0d1c138fbfd9d132babc', 'complainant_email': 'c30d04070302923f894a1881f0ad73d23d0124274b014461258532677f890a3e275484f9e85f1f8e2715e1f57ed81f348cb19d81513969292bb0d14427d282c800c89889d747928789e25fdc3611', 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_phone_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'complainant_full_name_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'complainant_email_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f'}
2025-09-18 08:45:45,659 - db_manager - DEBUG - execute_update values: ('c30d04070302e082da3fe2a093956dd23d01f3228d3e95ed04807660b3e9799b7df1369b5b44bbaab83c85816668c4842d8abcf6b1e3125768bd7fd38d64b6093c50cbb80844bbf3c0625f1db56d', 'c30d0407030264b167c6a6e6a44568d23d01b3bbaf15981b27f57336be68842745a575f1d9b3cb769d5130d333facc36ca3f6e0eed39e38c14fa97a1ca1b412c922a3dcf0d1c138fbfd9d132babc', 'c30d04070302923f894a1881f0ad73d23d0124274b014461258532677f890a3e275484f9e85f1f8e2715e1f57ed81f348cb19d81513969292bb0d14427d282c800c89889d747928789e25fdc3611', 'Koshi', 'Jhapa', 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'CM-20250918-KOJH-5403-B')
2025-09-18 08:45:45,659 - db_manager - DEBUG - execute_update query: UPDATE complainants SET complainant_full_name = %s, complainant_phone = %s, complainant_email = %s, complainant_province = %s, complainant_district = %s, complainant_phone_hash = %s, complainant_full_name_hash = %s, complainant_email_hash = %s WHERE complainant_id = %s
2025-09-18 08:45:45,659 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 08:45:45,664 - db_manager - INFO - Starting database transaction
2025-09-18 08:45:45,664 - db_manager - INFO - execute_update: Executing update query: UPDATE complainants SET complainant_full_name = %s, complainant_phone = %s, complainant_email = %s, ...
2025-09-18 08:45:45,665 - db_manager - INFO - execute_update: Update completed in 0.01s. Affected rows: 1
2025-09-18 08:45:45,668 - db_manager - INFO - Transaction committed successfully
2025-09-18 08:45:45,668 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 08:45:45,668 - db_manager - INFO - Complainant updated in db: CM-20250918-KOJH-5403-B
2025-09-18 08:45:45,668 - db_manager - INFO - update_grievance: Updating grievance with ID: GR-20250918-KOJH-C16F-B
2025-09-18 08:45:45,668 - db_manager - DEBUG - execute_update values: ('dust everywhere my kids are sick I want to go to the hospital', 'GR-20250918-KOJH-C16F-B')
2025-09-18 08:45:45,668 - db_manager - DEBUG - execute_update query: 
                    UPDATE grievances 
                    SET grievance_description = %s, grievance_modification_date = CURRENT_TIMESTAMP
                    WHERE grievance_id = %s
                    RETURNING grievance_id
                
2025-09-18 08:45:45,668 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 08:45:45,673 - db_manager - INFO - Starting database transaction
2025-09-18 08:45:45,673 - db_manager - INFO - execute_update: Executing update query: 
                    UPDATE grievances 
                    SET grievance_description = %s, grievanc...
2025-09-18 08:45:45,674 - db_manager - INFO - execute_update: Update completed in 0.01s. Affected rows: 1
2025-09-18 08:45:45,676 - db_manager - INFO - Transaction committed successfully
2025-09-18 08:45:45,676 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 08:45:45,676 - db_manager - INFO - update_grievance: Updated grievance with ID: GR-20250918-KOJH-C16F-B, rows affected: 1
2025-09-18 08:45:45,676 - db_manager - INFO - Grievance updated in db: GR-20250918-KOJH-C16F-B
2025-09-18 08:45:45,677 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 08:45:45,681 - db_manager - INFO - Starting database transaction
2025-09-18 08:45:45,681 - db_manager - INFO - Executing get_grievance_files: 
            SELECT file_id, file_name, file_type, file_size, upload_timestamp
            FROM file...
2025-09-18 08:45:45,683 - db_manager - INFO - get_grievance_files completed in 0.01s. Rows: 0
2025-09-18 08:45:45,684 - db_manager - INFO - Transaction committed successfully
2025-09-18 08:45:45,684 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 08:45:45,684 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 08:45:45,688 - db_manager - INFO - Starting database transaction
2025-09-18 08:45:45,688 - db_manager - INFO - Executing get_grievance_files: 
            SELECT file_id, file_name, file_type, file_size, upload_timestamp
            FROM file...
2025-09-18 08:45:45,689 - db_manager - INFO - get_grievance_files completed in 0.01s. Rows: 0
2025-09-18 08:45:45,689 - db_manager - INFO - Transaction committed successfully
2025-09-18 08:45:45,690 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 08:45:45,733 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 08:45:45,738 - db_manager - INFO - Starting database transaction
2025-09-18 08:45:45,738 - db_manager - INFO - Executing get_grievance_by_id: 
                SELECT g.*, c.complainant_full_name, c.complainant_phone, c.complainant_email,
    ...
2025-09-18 08:45:45,739 - db_manager - INFO - get_grievance_by_id completed in 0.01s. Rows: 1
2025-09-18 08:45:45,739 - db_manager - INFO - Transaction committed successfully
2025-09-18 08:45:45,740 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 08:45:45,740 - db_manager - DEBUG - get_grievance_by_id: grievance_id: {'grievance_id': 'GR-20250918-KOJH-C16F-B', 'complainant_id': 'CM-20250918-KOJH-5403-B', 'grievance_categories': ['Environmental - Air Pollution'], 'grievance_categories_alternative': [], 'follow_up_question': ['How many people in your household are affected by the dust, and what health issues have occurred (e.g., illnesses or hospital visits)?'], 'grievance_summary': 'Dust from the road works is making my kids sick, and I want to take them to the hospital.', 'grievance_description': 'dust everywhere my kids are sick I want to go to the hospital', 'grievance_claimed_amount': None, 'grievance_location': None, 'language_code': 'en', 'grievance_classification_status': 'pending', 'grievance_creation_date': datetime.datetime(2025, 9, 18, 8, 45, 22, 372962, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'grievance_modification_date': datetime.datetime(2025, 9, 18, 8, 45, 45, 673866, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'is_temporary': True, 'source': 'bot', 'complainant_full_name': 'c30d04070302e082da3fe2a093956dd23d01f3228d3e95ed04807660b3e9799b7df1369b5b44bbaab83c85816668c4842d8abcf6b1e3125768bd7fd38d64b6093c50cbb80844bbf3c0625f1db56d', 'complainant_phone': 'c30d0407030264b167c6a6e6a44568d23d01b3bbaf15981b27f57336be68842745a575f1d9b3cb769d5130d333facc36ca3f6e0eed39e38c14fa97a1ca1b412c922a3dcf0d1c138fbfd9d132babc', 'complainant_email': 'c30d04070302923f894a1881f0ad73d23d0124274b014461258532677f890a3e275484f9e85f1f8e2715e1f57ed81f348cb19d81513969292bb0d14427d282c800c89889d747928789e25fdc3611', 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_municipality': None, 'complainant_ward': None, 'complainant_village': None, 'complainant_address': None}, results: [{'grievance_id': 'GR-20250918-KOJH-C16F-B', 'complainant_id': 'CM-20250918-KOJH-5403-B', 'grievance_categories': '["Environmental - Air Pollution"]', 'grievance_categories_alternative': '[]', 'follow_up_question': '["How many people in your household are affected by the dust, and what health issues have occurred (e.g., illnesses or hospital visits)?"]', 'grievance_summary': 'Dust from the road works is making my kids sick, and I want to take them to the hospital.', 'grievance_description': 'dust everywhere my kids are sick I want to go to the hospital', 'grievance_claimed_amount': None, 'grievance_location': None, 'language_code': 'en', 'grievance_classification_status': 'pending', 'grievance_creation_date': datetime.datetime(2025, 9, 18, 8, 45, 22, 372962, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'grievance_modification_date': datetime.datetime(2025, 9, 18, 8, 45, 45, 673866, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'is_temporary': True, 'source': 'bot', 'complainant_full_name': 'c30d04070302e082da3fe2a093956dd23d01f3228d3e95ed04807660b3e9799b7df1369b5b44bbaab83c85816668c4842d8abcf6b1e3125768bd7fd38d64b6093c50cbb80844bbf3c0625f1db56d', 'complainant_phone': 'c30d0407030264b167c6a6e6a44568d23d01b3bbaf15981b27f57336be68842745a575f1d9b3cb769d5130d333facc36ca3f6e0eed39e38c14fa97a1ca1b412c922a3dcf0d1c138fbfd9d132babc', 'complainant_email': 'c30d04070302923f894a1881f0ad73d23d0124274b014461258532677f890a3e275484f9e85f1f8e2715e1f57ed81f348cb19d81513969292bb0d14427d282c800c89889d747928789e25fdc3611', 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_municipality': None, 'complainant_ward': None, 'complainant_village': None, 'complainant_address': None}]
2025-09-18 08:45:54,913 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 08:45:54,920 - db_manager - INFO - Starting database transaction
2025-09-18 08:45:54,920 - db_manager - INFO - Executing get_complainant_id_from_grievance_id: 
            SELECT complainant_id
            FROM grievances
            WHERE grievance_id = %s
 ...
2025-09-18 08:45:54,922 - db_manager - INFO - get_complainant_id_from_grievance_id completed in 0.01s. Rows: 1
2025-09-18 08:45:54,922 - db_manager - INFO - Transaction committed successfully
2025-09-18 08:45:54,922 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 08:45:54,923 - db_manager - INFO - update_complainant: Updating complainant with ID: CM-20250918-KOJH-5403-B
2025-09-18 08:45:54,923 - db_manager - DEBUG - encrypted and hashed data at encrypt_and_hash_sensitive_data: {}
2025-09-18 08:45:54,923 - db_manager - DEBUG - encrypted_data at update_complainant: {}
2025-09-18 08:45:54,923 - db_manager - DEBUG - No complainant field to update
2025-09-18 08:45:54,923 - db_manager - INFO - Complainant updated in db: GR-20250918-KOJH-C16F-B
2025-09-18 08:45:54,923 - db_manager - INFO - update_grievance: Updating grievance with ID: GR-20250918-KOJH-C16F-B
2025-09-18 08:45:54,923 - db_manager - DEBUG - execute_update values: ('["Environmental - Air Pollution"]', 'GR-20250918-KOJH-C16F-B')
2025-09-18 08:45:54,923 - db_manager - DEBUG - execute_update query: 
                    UPDATE grievances 
                    SET grievance_categories = %s, grievance_modification_date = CURRENT_TIMESTAMP
                    WHERE grievance_id = %s
                    RETURNING grievance_id
                
2025-09-18 08:45:54,923 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 08:45:54,929 - db_manager - INFO - Starting database transaction
2025-09-18 08:45:54,929 - db_manager - INFO - execute_update: Executing update query: 
                    UPDATE grievances 
                    SET grievance_categories = %s, grievance...
2025-09-18 08:45:54,930 - db_manager - INFO - execute_update: Update completed in 0.01s. Affected rows: 1
2025-09-18 08:45:54,933 - db_manager - INFO - Transaction committed successfully
2025-09-18 08:45:54,933 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 08:45:54,933 - db_manager - INFO - update_grievance: Updated grievance with ID: GR-20250918-KOJH-C16F-B, rows affected: 1
2025-09-18 08:45:54,933 - db_manager - INFO - Grievance updated in db: GR-20250918-KOJH-C16F-B
2025-09-18 08:45:54,982 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 08:45:54,988 - db_manager - INFO - Starting database transaction
2025-09-18 08:45:54,988 - db_manager - INFO - Executing get_grievance_files: 
            SELECT file_id, file_name, file_type, file_size, upload_timestamp
            FROM file...
2025-09-18 08:45:54,989 - db_manager - INFO - get_grievance_files completed in 0.01s. Rows: 0
2025-09-18 08:45:54,990 - db_manager - INFO - Transaction committed successfully
2025-09-18 08:45:54,990 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 09:00:50,544 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-18 09:00:50,544 - db_manager - INFO - Database manager initialized successfully
2025-09-18 09:00:50,544 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-18 09:00:50,544 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-18 09:00:50,544 - db_manager - INFO - Database manager initialized successfully
2025-09-18 09:00:50,544 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-18 09:00:50,544 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-18 09:00:50,545 - db_manager - INFO - Database manager initialized successfully
2025-09-18 09:00:50,545 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-18 09:00:50,545 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-18 09:00:50,545 - db_manager - INFO - Database manager initialized successfully
2025-09-18 09:00:50,545 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-18 09:00:50,545 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-18 09:00:50,545 - db_manager - INFO - Database manager initialized successfully
2025-09-18 09:00:50,545 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-18 09:00:50,545 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-18 09:00:50,545 - db_manager - INFO - Database manager initialized successfully
2025-09-18 09:00:50,545 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-18 09:00:50,545 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-18 09:00:50,545 - db_manager - INFO - Database manager initialized successfully
2025-09-18 09:00:50,545 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-18 09:00:50,545 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-18 09:00:50,545 - db_manager - INFO - Database manager initialized successfully
2025-09-18 09:00:50,545 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-18 09:00:50,545 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-18 09:00:50,545 - db_manager - INFO - Database manager initialized successfully
2025-09-18 09:00:50,545 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-18 09:00:50,545 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-18 09:00:50,545 - db_manager - INFO - Database manager initialized successfully
2025-09-18 09:00:50,545 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-18 09:01:43,497 - db_manager - INFO - create_complainant: Creating complainant with ID: CM-20250918-KOJH-6B17-B
2025-09-18 09:01:43,497 - db_manager - DEBUG - encrypted and hashed data at encrypt_and_hash_sensitive_data: {'complainant_id': 'CM-20250918-KOJH-6B17-B', 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_unique_id': 'CM-20250918-KOJH-6B17-B'}
2025-09-18 09:01:43,497 - db_manager - DEBUG - query_keys at generate_query_string: dict_keys(['complainant_id', 'complainant_province', 'complainant_district', 'complainant_unique_id'])
2025-09-18 09:01:43,497 - db_manager - DEBUG - Generated query: INSERT INTO complainants (complainant_id, complainant_province, complainant_district, complainant_unique_id) VALUES (%s, %s, %s, %s)
2025-09-18 09:01:43,497 - db_manager - DEBUG - len of query_keys: 4
2025-09-18 09:01:43,497 - db_manager - DEBUG - Generated query: INSERT INTO complainants (complainant_id, complainant_province, complainant_district, complainant_unique_id) VALUES (%s, %s, %s, %s)
2025-09-18 09:01:43,497 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 09:01:43,504 - db_manager - INFO - Starting database transaction
2025-09-18 09:01:43,506 - db_manager - INFO - Transaction committed successfully
2025-09-18 09:01:43,506 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 09:01:43,506 - db_manager - INFO - create_complainant: Successfully created complainant with ID: CM-20250918-KOJH-6B17-B
2025-09-18 09:01:43,506 - db_manager - INFO - create_grievance: Creating grievance with data: {'grievance_id': 'GR-20250918-KOJH-DFC0-B', 'complainant_id': 'CM-20250918-KOJH-6B17-B', 'grievance_description': 'dust everywhere my kids are sick I want to go to the hospital', 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_office': None, 'source': 'bot', 'complainant_unique_id': 'CM-20250918-KOJH-6B17-B'}
2025-09-18 09:01:43,506 - db_manager - INFO - create_grievance: Creating grievance with ID: GR-20250918-KOJH-DFC0-B
2025-09-18 09:01:43,506 - db_manager - INFO - create_grievance: Creating grievance with allowed fields: ['grievance_id', 'complainant_id', 'grievance_categories', 'grievance_categories_alternative', 'follow_up_question', 'grievance_summary', 'grievance_description', 'grievance_claimed_amount', 'grievance_location', 'is_temporary', 'source', 'language_code', 'grievance_classification_status']
2025-09-18 09:01:43,506 - db_manager - DEBUG - query_keys at generate_query_string: dict_keys(['grievance_id', 'complainant_id', 'grievance_description', 'source'])
2025-09-18 09:01:43,506 - db_manager - DEBUG - Generated query: INSERT INTO grievances (grievance_id, complainant_id, grievance_description, source) VALUES (%s, %s, %s, %s) RETURNING grievance_id
2025-09-18 09:01:43,507 - db_manager - DEBUG - len of query_keys: 4
2025-09-18 09:01:43,507 - db_manager - DEBUG - Generated query: INSERT INTO grievances (grievance_id, complainant_id, grievance_description, source) VALUES (%s, %s, %s, %s) RETURNING grievance_id
2025-09-18 09:01:43,507 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 09:01:43,511 - db_manager - INFO - Starting database transaction
2025-09-18 09:01:43,516 - db_manager - INFO - Transaction committed successfully
2025-09-18 09:01:43,516 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 09:01:43,516 - db_manager - INFO - create_grievance: Successfully created grievance with ID: GR-20250918-KOJH-DFC0-B
2025-09-18 09:02:14,967 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 09:02:14,973 - db_manager - INFO - Starting database transaction
2025-09-18 09:02:14,973 - db_manager - INFO - Executing get_complainant_by_id: 
            SELECT complainant_id, complainant_unique_id, complainant_full_name,    complainant_pho...
2025-09-18 09:02:14,974 - db_manager - INFO - get_complainant_by_id completed in 0.01s. Rows: 1
2025-09-18 09:02:14,974 - db_manager - INFO - Transaction committed successfully
2025-09-18 09:02:14,974 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 09:02:14,975 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 09:02:14,980 - db_manager - INFO - Starting database transaction
2025-09-18 09:02:14,980 - db_manager - INFO - Executing get_grievance_by_id: 
                SELECT g.*, c.complainant_full_name, c.complainant_phone, c.complainant_email,
    ...
2025-09-18 09:02:14,981 - db_manager - INFO - get_grievance_by_id completed in 0.01s. Rows: 1
2025-09-18 09:02:14,982 - db_manager - INFO - Transaction committed successfully
2025-09-18 09:02:14,982 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 09:02:14,982 - db_manager - DEBUG - get_grievance_by_id: grievance_id: {'grievance_id': 'GR-20250918-KOJH-DFC0-B', 'complainant_id': 'CM-20250918-KOJH-6B17-B', 'grievance_categories': ['Environmental - Air Pollution'], 'grievance_categories_alternative': ['Environmental - Noise Pollution', 'Safety - Road Safety Provisions'], 'follow_up_question': ['How many people are affected, can you list them?'], 'grievance_summary': 'Dust from road works is causing my children to be sick; I want to take them to the hospital.', 'grievance_description': 'dust everywhere my kids are sick I want to go to the hospital', 'grievance_claimed_amount': None, 'grievance_location': None, 'language_code': 'en', 'grievance_classification_status': 'pending', 'grievance_creation_date': datetime.datetime(2025, 9, 18, 9, 1, 43, 511952, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'grievance_modification_date': datetime.datetime(2025, 9, 18, 9, 2, 8, 438079, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'is_temporary': True, 'source': 'bot', 'complainant_full_name': None, 'complainant_phone': None, 'complainant_email': None, 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_municipality': None, 'complainant_ward': None, 'complainant_village': None, 'complainant_address': None}, results: [{'grievance_id': 'GR-20250918-KOJH-DFC0-B', 'complainant_id': 'CM-20250918-KOJH-6B17-B', 'grievance_categories': '["Environmental - Air Pollution"]', 'grievance_categories_alternative': '["Environmental - Noise Pollution", "Safety - Road Safety Provisions"]', 'follow_up_question': '["How many people are affected, can you list them?"]', 'grievance_summary': 'Dust from road works is causing my children to be sick; I want to take them to the hospital.', 'grievance_description': 'dust everywhere my kids are sick I want to go to the hospital', 'grievance_claimed_amount': None, 'grievance_location': None, 'language_code': 'en', 'grievance_classification_status': 'pending', 'grievance_creation_date': datetime.datetime(2025, 9, 18, 9, 1, 43, 511952, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'grievance_modification_date': datetime.datetime(2025, 9, 18, 9, 2, 8, 438079, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'is_temporary': True, 'source': 'bot', 'complainant_full_name': None, 'complainant_phone': None, 'complainant_email': None, 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_municipality': None, 'complainant_ward': None, 'complainant_village': None, 'complainant_address': None}]
2025-09-18 09:02:14,982 - db_manager - INFO - update_complainant: Updating complainant with ID: CM-20250918-KOJH-6B17-B
2025-09-18 09:02:14,982 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 09:02:14,987 - db_manager - INFO - Starting database transaction
2025-09-18 09:02:14,987 - db_manager - INFO - Executing encrypt_field: SELECT encode(pgp_sym_encrypt(%s, %s), 'hex') AS encrypted...
2025-09-18 09:02:14,990 - db_manager - INFO - encrypt_field completed in 0.01s. Rows: 1
2025-09-18 09:02:14,990 - db_manager - INFO - Transaction committed successfully
2025-09-18 09:02:14,990 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 09:02:14,991 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 09:02:14,995 - db_manager - INFO - Starting database transaction
2025-09-18 09:02:14,995 - db_manager - INFO - Executing encrypt_field: SELECT encode(pgp_sym_encrypt(%s, %s), 'hex') AS encrypted...
2025-09-18 09:02:14,996 - db_manager - INFO - encrypt_field completed in 0.01s. Rows: 1
2025-09-18 09:02:14,996 - db_manager - INFO - Transaction committed successfully
2025-09-18 09:02:14,997 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 09:02:14,997 - db_manager - DEBUG - encrypted phone number Not provided at encrypt_complainant_data: c30d040703020e15a8af912e855f64d23d01e84339ec0065af055ee6c80d69a3395d7f598784c5ff7906f464924a4c16fca88cb27e1b40e6231c0f8fa8194418715364e00daea8324c2e686ff6f3
2025-09-18 09:02:14,997 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 09:02:15,001 - db_manager - INFO - Starting database transaction
2025-09-18 09:02:15,001 - db_manager - INFO - Executing encrypt_field: SELECT encode(pgp_sym_encrypt(%s, %s), 'hex') AS encrypted...
2025-09-18 09:02:15,002 - db_manager - INFO - encrypt_field completed in 0.01s. Rows: 1
2025-09-18 09:02:15,002 - db_manager - INFO - Transaction committed successfully
2025-09-18 09:02:15,002 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 09:02:15,002 - db_manager - DEBUG - phone number Not provided hashed to d83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f at hash_sensitive_data
2025-09-18 09:02:15,002 - db_manager - DEBUG - encrypted and hashed data at encrypt_and_hash_sensitive_data: {'complainant_full_name': 'c30d040703027f4c40adca86bcfc7ed23d01769eaea331c2f619353d9c3385bca488919074b4e7ea0f7e8a51247dcc3a0cc05ddf93c382367225c07c0ac3646f6ad665b25cd74e8d50dcf5a8dbe4', 'complainant_phone': 'c30d040703020e15a8af912e855f64d23d01e84339ec0065af055ee6c80d69a3395d7f598784c5ff7906f464924a4c16fca88cb27e1b40e6231c0f8fa8194418715364e00daea8324c2e686ff6f3', 'complainant_email': 'c30d040703028491919131ff76c772d23d014b0db6bcdb525d2c8929a2725ddd5648b5b564fb595972df7e849ad6d13281c8e674f9173c04d95524d458f42ecdc3da59b978359cffd6f6ae186644', 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_email_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'complainant_phone_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'complainant_full_name_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f'}
2025-09-18 09:02:15,003 - db_manager - DEBUG - encrypted_data at update_complainant: {'complainant_full_name': 'c30d040703027f4c40adca86bcfc7ed23d01769eaea331c2f619353d9c3385bca488919074b4e7ea0f7e8a51247dcc3a0cc05ddf93c382367225c07c0ac3646f6ad665b25cd74e8d50dcf5a8dbe4', 'complainant_phone': 'c30d040703020e15a8af912e855f64d23d01e84339ec0065af055ee6c80d69a3395d7f598784c5ff7906f464924a4c16fca88cb27e1b40e6231c0f8fa8194418715364e00daea8324c2e686ff6f3', 'complainant_email': 'c30d040703028491919131ff76c772d23d014b0db6bcdb525d2c8929a2725ddd5648b5b564fb595972df7e849ad6d13281c8e674f9173c04d95524d458f42ecdc3da59b978359cffd6f6ae186644', 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_email_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'complainant_phone_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'complainant_full_name_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f'}
2025-09-18 09:02:15,003 - db_manager - DEBUG - execute_update values: ('c30d040703027f4c40adca86bcfc7ed23d01769eaea331c2f619353d9c3385bca488919074b4e7ea0f7e8a51247dcc3a0cc05ddf93c382367225c07c0ac3646f6ad665b25cd74e8d50dcf5a8dbe4', 'c30d040703020e15a8af912e855f64d23d01e84339ec0065af055ee6c80d69a3395d7f598784c5ff7906f464924a4c16fca88cb27e1b40e6231c0f8fa8194418715364e00daea8324c2e686ff6f3', 'c30d040703028491919131ff76c772d23d014b0db6bcdb525d2c8929a2725ddd5648b5b564fb595972df7e849ad6d13281c8e674f9173c04d95524d458f42ecdc3da59b978359cffd6f6ae186644', 'Koshi', 'Jhapa', 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'CM-20250918-KOJH-6B17-B')
2025-09-18 09:02:15,003 - db_manager - DEBUG - execute_update query: UPDATE complainants SET complainant_full_name = %s, complainant_phone = %s, complainant_email = %s, complainant_province = %s, complainant_district = %s, complainant_email_hash = %s, complainant_phone_hash = %s, complainant_full_name_hash = %s WHERE complainant_id = %s
2025-09-18 09:02:15,003 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 09:02:15,007 - db_manager - INFO - Starting database transaction
2025-09-18 09:02:15,007 - db_manager - INFO - execute_update: Executing update query: UPDATE complainants SET complainant_full_name = %s, complainant_phone = %s, complainant_email = %s, ...
2025-09-18 09:02:15,008 - db_manager - INFO - execute_update: Update completed in 0.01s. Affected rows: 1
2025-09-18 09:02:15,010 - db_manager - INFO - Transaction committed successfully
2025-09-18 09:02:15,010 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 09:02:15,010 - db_manager - INFO - Complainant updated in db: CM-20250918-KOJH-6B17-B
2025-09-18 09:02:15,010 - db_manager - INFO - update_grievance: Updating grievance with ID: GR-20250918-KOJH-DFC0-B
2025-09-18 09:02:15,010 - db_manager - DEBUG - execute_update values: ('dust everywhere my kids are sick I want to go to the hospital', 'GR-20250918-KOJH-DFC0-B')
2025-09-18 09:02:15,010 - db_manager - DEBUG - execute_update query: 
                    UPDATE grievances 
                    SET grievance_description = %s, grievance_modification_date = CURRENT_TIMESTAMP
                    WHERE grievance_id = %s
                    RETURNING grievance_id
                
2025-09-18 09:02:15,010 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 09:02:15,015 - db_manager - INFO - Starting database transaction
2025-09-18 09:02:15,015 - db_manager - INFO - execute_update: Executing update query: 
                    UPDATE grievances 
                    SET grievance_description = %s, grievanc...
2025-09-18 09:02:15,016 - db_manager - INFO - execute_update: Update completed in 0.01s. Affected rows: 1
2025-09-18 09:02:15,018 - db_manager - INFO - Transaction committed successfully
2025-09-18 09:02:15,018 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 09:02:15,018 - db_manager - INFO - update_grievance: Updated grievance with ID: GR-20250918-KOJH-DFC0-B, rows affected: 1
2025-09-18 09:02:15,018 - db_manager - INFO - Grievance updated in db: GR-20250918-KOJH-DFC0-B
2025-09-18 09:02:15,018 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 09:02:15,023 - db_manager - INFO - Starting database transaction
2025-09-18 09:02:15,023 - db_manager - INFO - Executing get_grievance_files: 
            SELECT file_id, file_name, file_type, file_size, upload_timestamp
            FROM file...
2025-09-18 09:02:15,024 - db_manager - INFO - get_grievance_files completed in 0.01s. Rows: 0
2025-09-18 09:02:15,025 - db_manager - INFO - Transaction committed successfully
2025-09-18 09:02:15,025 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 09:02:15,025 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 09:02:15,029 - db_manager - INFO - Starting database transaction
2025-09-18 09:02:15,030 - db_manager - INFO - Executing get_grievance_files: 
            SELECT file_id, file_name, file_type, file_size, upload_timestamp
            FROM file...
2025-09-18 09:02:15,031 - db_manager - INFO - get_grievance_files completed in 0.01s. Rows: 0
2025-09-18 09:02:15,031 - db_manager - INFO - Transaction committed successfully
2025-09-18 09:02:15,031 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 09:02:15,077 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 09:02:15,082 - db_manager - INFO - Starting database transaction
2025-09-18 09:02:15,082 - db_manager - INFO - Executing get_grievance_by_id: 
                SELECT g.*, c.complainant_full_name, c.complainant_phone, c.complainant_email,
    ...
2025-09-18 09:02:15,084 - db_manager - INFO - get_grievance_by_id completed in 0.01s. Rows: 1
2025-09-18 09:02:15,084 - db_manager - INFO - Transaction committed successfully
2025-09-18 09:02:15,084 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 09:02:15,084 - db_manager - DEBUG - get_grievance_by_id: grievance_id: {'grievance_id': 'GR-20250918-KOJH-DFC0-B', 'complainant_id': 'CM-20250918-KOJH-6B17-B', 'grievance_categories': ['Environmental - Air Pollution'], 'grievance_categories_alternative': ['Environmental - Noise Pollution', 'Safety - Road Safety Provisions'], 'follow_up_question': ['How many people are affected, can you list them?'], 'grievance_summary': 'Dust from road works is causing my children to be sick; I want to take them to the hospital.', 'grievance_description': 'dust everywhere my kids are sick I want to go to the hospital', 'grievance_claimed_amount': None, 'grievance_location': None, 'language_code': 'en', 'grievance_classification_status': 'pending', 'grievance_creation_date': datetime.datetime(2025, 9, 18, 9, 1, 43, 511952, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'grievance_modification_date': datetime.datetime(2025, 9, 18, 9, 2, 15, 15564, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'is_temporary': True, 'source': 'bot', 'complainant_full_name': 'c30d040703027f4c40adca86bcfc7ed23d01769eaea331c2f619353d9c3385bca488919074b4e7ea0f7e8a51247dcc3a0cc05ddf93c382367225c07c0ac3646f6ad665b25cd74e8d50dcf5a8dbe4', 'complainant_phone': 'c30d040703020e15a8af912e855f64d23d01e84339ec0065af055ee6c80d69a3395d7f598784c5ff7906f464924a4c16fca88cb27e1b40e6231c0f8fa8194418715364e00daea8324c2e686ff6f3', 'complainant_email': 'c30d040703028491919131ff76c772d23d014b0db6bcdb525d2c8929a2725ddd5648b5b564fb595972df7e849ad6d13281c8e674f9173c04d95524d458f42ecdc3da59b978359cffd6f6ae186644', 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_municipality': None, 'complainant_ward': None, 'complainant_village': None, 'complainant_address': None}, results: [{'grievance_id': 'GR-20250918-KOJH-DFC0-B', 'complainant_id': 'CM-20250918-KOJH-6B17-B', 'grievance_categories': '["Environmental - Air Pollution"]', 'grievance_categories_alternative': '["Environmental - Noise Pollution", "Safety - Road Safety Provisions"]', 'follow_up_question': '["How many people are affected, can you list them?"]', 'grievance_summary': 'Dust from road works is causing my children to be sick; I want to take them to the hospital.', 'grievance_description': 'dust everywhere my kids are sick I want to go to the hospital', 'grievance_claimed_amount': None, 'grievance_location': None, 'language_code': 'en', 'grievance_classification_status': 'pending', 'grievance_creation_date': datetime.datetime(2025, 9, 18, 9, 1, 43, 511952, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'grievance_modification_date': datetime.datetime(2025, 9, 18, 9, 2, 15, 15564, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'is_temporary': True, 'source': 'bot', 'complainant_full_name': 'c30d040703027f4c40adca86bcfc7ed23d01769eaea331c2f619353d9c3385bca488919074b4e7ea0f7e8a51247dcc3a0cc05ddf93c382367225c07c0ac3646f6ad665b25cd74e8d50dcf5a8dbe4', 'complainant_phone': 'c30d040703020e15a8af912e855f64d23d01e84339ec0065af055ee6c80d69a3395d7f598784c5ff7906f464924a4c16fca88cb27e1b40e6231c0f8fa8194418715364e00daea8324c2e686ff6f3', 'complainant_email': 'c30d040703028491919131ff76c772d23d014b0db6bcdb525d2c8929a2725ddd5648b5b564fb595972df7e849ad6d13281c8e674f9173c04d95524d458f42ecdc3da59b978359cffd6f6ae186644', 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_municipality': None, 'complainant_ward': None, 'complainant_village': None, 'complainant_address': None}]
2025-09-18 09:02:22,400 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 09:02:22,405 - db_manager - INFO - Starting database transaction
2025-09-18 09:02:22,405 - db_manager - INFO - Executing get_complainant_id_from_grievance_id: 
            SELECT complainant_id
            FROM grievances
            WHERE grievance_id = %s
 ...
2025-09-18 09:02:22,406 - db_manager - INFO - get_complainant_id_from_grievance_id completed in 0.01s. Rows: 1
2025-09-18 09:02:22,406 - db_manager - INFO - Transaction committed successfully
2025-09-18 09:02:22,406 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 09:02:22,406 - db_manager - INFO - update_complainant: Updating complainant with ID: CM-20250918-KOJH-6B17-B
2025-09-18 09:02:22,407 - db_manager - DEBUG - encrypted and hashed data at encrypt_and_hash_sensitive_data: {}
2025-09-18 09:02:22,407 - db_manager - DEBUG - encrypted_data at update_complainant: {}
2025-09-18 09:02:22,407 - db_manager - DEBUG - No complainant field to update
2025-09-18 09:02:22,407 - db_manager - INFO - Complainant updated in db: GR-20250918-KOJH-DFC0-B
2025-09-18 09:02:22,407 - db_manager - INFO - update_grievance: Updating grievance with ID: GR-20250918-KOJH-DFC0-B
2025-09-18 09:02:22,407 - db_manager - DEBUG - execute_update values: ('["Environmental - Air Pollution"]', 'GR-20250918-KOJH-DFC0-B')
2025-09-18 09:02:22,407 - db_manager - DEBUG - execute_update query: 
                    UPDATE grievances 
                    SET grievance_categories = %s, grievance_modification_date = CURRENT_TIMESTAMP
                    WHERE grievance_id = %s
                    RETURNING grievance_id
                
2025-09-18 09:02:22,407 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 09:02:22,411 - db_manager - INFO - Starting database transaction
2025-09-18 09:02:22,411 - db_manager - INFO - execute_update: Executing update query: 
                    UPDATE grievances 
                    SET grievance_categories = %s, grievance...
2025-09-18 09:02:22,412 - db_manager - INFO - execute_update: Update completed in 0.01s. Affected rows: 1
2025-09-18 09:02:22,416 - db_manager - INFO - Transaction committed successfully
2025-09-18 09:02:22,416 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 09:02:22,416 - db_manager - INFO - update_grievance: Updated grievance with ID: GR-20250918-KOJH-DFC0-B, rows affected: 1
2025-09-18 09:02:22,416 - db_manager - INFO - Grievance updated in db: GR-20250918-KOJH-DFC0-B
2025-09-18 09:02:22,460 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 09:02:22,465 - db_manager - INFO - Starting database transaction
2025-09-18 09:02:22,465 - db_manager - INFO - Executing get_grievance_files: 
            SELECT file_id, file_name, file_type, file_size, upload_timestamp
            FROM file...
2025-09-18 09:02:22,466 - db_manager - INFO - get_grievance_files completed in 0.01s. Rows: 0
2025-09-18 09:02:22,467 - db_manager - INFO - Transaction committed successfully
2025-09-18 09:02:22,467 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 09:02:22,467 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 09:02:22,472 - db_manager - INFO - Starting database transaction
2025-09-18 09:02:22,472 - db_manager - INFO - Executing get_complainant_by_id: 
            SELECT complainant_id, complainant_unique_id, complainant_full_name,    complainant_pho...
2025-09-18 09:02:22,473 - db_manager - INFO - get_complainant_by_id completed in 0.01s. Rows: 1
2025-09-18 09:02:22,473 - db_manager - INFO - Transaction committed successfully
2025-09-18 09:02:22,473 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 09:02:22,474 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 09:02:22,479 - db_manager - INFO - Starting database transaction
2025-09-18 09:02:22,479 - db_manager - INFO - Executing decrypt_field: SELECT pgp_sym_decrypt(decode(%s, 'hex'), %s) AS decrypted...
2025-09-18 09:02:22,481 - db_manager - INFO - decrypt_field completed in 0.01s. Rows: 1
2025-09-18 09:02:22,481 - db_manager - INFO - Transaction committed successfully
2025-09-18 09:02:22,481 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 09:02:22,482 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 09:02:22,486 - db_manager - INFO - Starting database transaction
2025-09-18 09:02:22,486 - db_manager - INFO - Executing decrypt_field: SELECT pgp_sym_decrypt(decode(%s, 'hex'), %s) AS decrypted...
2025-09-18 09:02:22,487 - db_manager - INFO - decrypt_field completed in 0.01s. Rows: 1
2025-09-18 09:02:22,487 - db_manager - INFO - Transaction committed successfully
2025-09-18 09:02:22,487 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 09:02:22,487 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 09:02:22,492 - db_manager - INFO - Starting database transaction
2025-09-18 09:02:22,492 - db_manager - INFO - Executing decrypt_field: SELECT pgp_sym_decrypt(decode(%s, 'hex'), %s) AS decrypted...
2025-09-18 09:02:22,493 - db_manager - INFO - decrypt_field completed in 0.01s. Rows: 1
2025-09-18 09:02:22,493 - db_manager - INFO - Transaction committed successfully
2025-09-18 09:02:22,493 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 09:02:22,493 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 09:02:22,498 - db_manager - INFO - Starting database transaction
2025-09-18 09:02:22,498 - db_manager - INFO - Executing get_grievance_by_id: 
                SELECT g.*, c.complainant_full_name, c.complainant_phone, c.complainant_email,
    ...
2025-09-18 09:02:22,499 - db_manager - INFO - get_grievance_by_id completed in 0.01s. Rows: 1
2025-09-18 09:02:22,499 - db_manager - INFO - Transaction committed successfully
2025-09-18 09:02:22,499 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 09:02:22,499 - db_manager - DEBUG - get_grievance_by_id: grievance_id: {'grievance_id': 'GR-20250918-KOJH-DFC0-B', 'complainant_id': 'CM-20250918-KOJH-6B17-B', 'grievance_categories': ['Environmental - Air Pollution'], 'grievance_categories_alternative': ['Environmental - Noise Pollution', 'Safety - Road Safety Provisions'], 'follow_up_question': ['How many people are affected, can you list them?'], 'grievance_summary': 'Dust from road works is causing my children to be sick; I want to take them to the hospital.', 'grievance_description': 'dust everywhere my kids are sick I want to go to the hospital', 'grievance_claimed_amount': None, 'grievance_location': None, 'language_code': 'en', 'grievance_classification_status': 'pending', 'grievance_creation_date': datetime.datetime(2025, 9, 18, 9, 1, 43, 511952, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'grievance_modification_date': datetime.datetime(2025, 9, 18, 9, 2, 22, 411842, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'is_temporary': True, 'source': 'bot', 'complainant_full_name': 'c30d040703027f4c40adca86bcfc7ed23d01769eaea331c2f619353d9c3385bca488919074b4e7ea0f7e8a51247dcc3a0cc05ddf93c382367225c07c0ac3646f6ad665b25cd74e8d50dcf5a8dbe4', 'complainant_phone': 'c30d040703020e15a8af912e855f64d23d01e84339ec0065af055ee6c80d69a3395d7f598784c5ff7906f464924a4c16fca88cb27e1b40e6231c0f8fa8194418715364e00daea8324c2e686ff6f3', 'complainant_email': 'c30d040703028491919131ff76c772d23d014b0db6bcdb525d2c8929a2725ddd5648b5b564fb595972df7e849ad6d13281c8e674f9173c04d95524d458f42ecdc3da59b978359cffd6f6ae186644', 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_municipality': None, 'complainant_ward': None, 'complainant_village': None, 'complainant_address': None}, results: [{'grievance_id': 'GR-20250918-KOJH-DFC0-B', 'complainant_id': 'CM-20250918-KOJH-6B17-B', 'grievance_categories': '["Environmental - Air Pollution"]', 'grievance_categories_alternative': '["Environmental - Noise Pollution", "Safety - Road Safety Provisions"]', 'follow_up_question': '["How many people are affected, can you list them?"]', 'grievance_summary': 'Dust from road works is causing my children to be sick; I want to take them to the hospital.', 'grievance_description': 'dust everywhere my kids are sick I want to go to the hospital', 'grievance_claimed_amount': None, 'grievance_location': None, 'language_code': 'en', 'grievance_classification_status': 'pending', 'grievance_creation_date': datetime.datetime(2025, 9, 18, 9, 1, 43, 511952, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'grievance_modification_date': datetime.datetime(2025, 9, 18, 9, 2, 22, 411842, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'is_temporary': True, 'source': 'bot', 'complainant_full_name': 'c30d040703027f4c40adca86bcfc7ed23d01769eaea331c2f619353d9c3385bca488919074b4e7ea0f7e8a51247dcc3a0cc05ddf93c382367225c07c0ac3646f6ad665b25cd74e8d50dcf5a8dbe4', 'complainant_phone': 'c30d040703020e15a8af912e855f64d23d01e84339ec0065af055ee6c80d69a3395d7f598784c5ff7906f464924a4c16fca88cb27e1b40e6231c0f8fa8194418715364e00daea8324c2e686ff6f3', 'complainant_email': 'c30d040703028491919131ff76c772d23d014b0db6bcdb525d2c8929a2725ddd5648b5b564fb595972df7e849ad6d13281c8e674f9173c04d95524d458f42ecdc3da59b978359cffd6f6ae186644', 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_municipality': None, 'complainant_ward': None, 'complainant_village': None, 'complainant_address': None}]
2025-09-18 09:02:22,499 - db_manager - INFO - update_complainant: Updating complainant with ID: CM-20250918-KOJH-6B17-B
2025-09-18 09:02:22,499 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 09:02:22,504 - db_manager - INFO - Starting database transaction
2025-09-18 09:02:22,504 - db_manager - INFO - Executing encrypt_field: SELECT encode(pgp_sym_encrypt(%s, %s), 'hex') AS encrypted...
2025-09-18 09:02:22,505 - db_manager - INFO - encrypt_field completed in 0.01s. Rows: 1
2025-09-18 09:02:22,505 - db_manager - INFO - Transaction committed successfully
2025-09-18 09:02:22,505 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 09:02:22,505 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 09:02:22,510 - db_manager - INFO - Starting database transaction
2025-09-18 09:02:22,510 - db_manager - INFO - Executing encrypt_field: SELECT encode(pgp_sym_encrypt(%s, %s), 'hex') AS encrypted...
2025-09-18 09:02:22,511 - db_manager - INFO - encrypt_field completed in 0.01s. Rows: 1
2025-09-18 09:02:22,511 - db_manager - INFO - Transaction committed successfully
2025-09-18 09:02:22,511 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 09:02:22,511 - db_manager - DEBUG - encrypted phone number Not provided at encrypt_complainant_data: c30d04070302f9e915d24a0496dd70d23d014943e4c959190f9483044f948c33443eaae2cca1837a5a2f705d6da40f953d3ee210fc8947c547cda0fe347beefb1a3573b249f11cb3e363e6ffd4c4
2025-09-18 09:02:22,511 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 09:02:22,515 - db_manager - INFO - Starting database transaction
2025-09-18 09:02:22,515 - db_manager - INFO - Executing encrypt_field: SELECT encode(pgp_sym_encrypt(%s, %s), 'hex') AS encrypted...
2025-09-18 09:02:22,516 - db_manager - INFO - encrypt_field completed in 0.01s. Rows: 1
2025-09-18 09:02:22,516 - db_manager - INFO - Transaction committed successfully
2025-09-18 09:02:22,516 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 09:02:22,517 - db_manager - DEBUG - phone number Not provided hashed to d83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f at hash_sensitive_data
2025-09-18 09:02:22,517 - db_manager - DEBUG - encrypted and hashed data at encrypt_and_hash_sensitive_data: {'complainant_full_name': 'c30d040703022e8e31e5a068f59861d23d01b8b4bccc5a1cbaf70237ea5db7792875521d0a84bbb58c4299a547eb55e737bae1ada66668bf76298e42d0121d72e8bd8d1dc6859a787b92eaeae6ae', 'complainant_phone': 'c30d04070302f9e915d24a0496dd70d23d014943e4c959190f9483044f948c33443eaae2cca1837a5a2f705d6da40f953d3ee210fc8947c547cda0fe347beefb1a3573b249f11cb3e363e6ffd4c4', 'complainant_email': 'c30d04070302466bc837bfbb3b0a63d23d019de2d662752c0d9bc1b1a1e30a85832d03f69b76c6d615d23123e38d9276fa2851c9578dc2f4974fd9f17402a68e63cd0b394cd95a4fe46c870d2c01', 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_email_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'complainant_phone_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'complainant_full_name_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f'}
2025-09-18 09:02:22,517 - db_manager - DEBUG - encrypted_data at update_complainant: {'complainant_full_name': 'c30d040703022e8e31e5a068f59861d23d01b8b4bccc5a1cbaf70237ea5db7792875521d0a84bbb58c4299a547eb55e737bae1ada66668bf76298e42d0121d72e8bd8d1dc6859a787b92eaeae6ae', 'complainant_phone': 'c30d04070302f9e915d24a0496dd70d23d014943e4c959190f9483044f948c33443eaae2cca1837a5a2f705d6da40f953d3ee210fc8947c547cda0fe347beefb1a3573b249f11cb3e363e6ffd4c4', 'complainant_email': 'c30d04070302466bc837bfbb3b0a63d23d019de2d662752c0d9bc1b1a1e30a85832d03f69b76c6d615d23123e38d9276fa2851c9578dc2f4974fd9f17402a68e63cd0b394cd95a4fe46c870d2c01', 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_email_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'complainant_phone_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'complainant_full_name_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f'}
2025-09-18 09:02:22,517 - db_manager - DEBUG - execute_update values: ('c30d040703022e8e31e5a068f59861d23d01b8b4bccc5a1cbaf70237ea5db7792875521d0a84bbb58c4299a547eb55e737bae1ada66668bf76298e42d0121d72e8bd8d1dc6859a787b92eaeae6ae', 'c30d04070302f9e915d24a0496dd70d23d014943e4c959190f9483044f948c33443eaae2cca1837a5a2f705d6da40f953d3ee210fc8947c547cda0fe347beefb1a3573b249f11cb3e363e6ffd4c4', 'c30d04070302466bc837bfbb3b0a63d23d019de2d662752c0d9bc1b1a1e30a85832d03f69b76c6d615d23123e38d9276fa2851c9578dc2f4974fd9f17402a68e63cd0b394cd95a4fe46c870d2c01', 'Koshi', 'Jhapa', 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'CM-20250918-KOJH-6B17-B')
2025-09-18 09:02:22,517 - db_manager - DEBUG - execute_update query: UPDATE complainants SET complainant_full_name = %s, complainant_phone = %s, complainant_email = %s, complainant_province = %s, complainant_district = %s, complainant_email_hash = %s, complainant_phone_hash = %s, complainant_full_name_hash = %s WHERE complainant_id = %s
2025-09-18 09:02:22,517 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 09:02:22,522 - db_manager - INFO - Starting database transaction
2025-09-18 09:02:22,522 - db_manager - INFO - execute_update: Executing update query: UPDATE complainants SET complainant_full_name = %s, complainant_phone = %s, complainant_email = %s, ...
2025-09-18 09:02:22,523 - db_manager - INFO - execute_update: Update completed in 0.01s. Affected rows: 1
2025-09-18 09:02:22,525 - db_manager - INFO - Transaction committed successfully
2025-09-18 09:02:22,525 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 09:02:22,526 - db_manager - INFO - Complainant updated in db: CM-20250918-KOJH-6B17-B
2025-09-18 09:02:22,526 - db_manager - INFO - update_grievance: Updating grievance with ID: GR-20250918-KOJH-DFC0-B
2025-09-18 09:02:22,526 - db_manager - DEBUG - execute_update values: ('["Environmental - Air Pollution"]', '["Environmental - Noise Pollution", "Safety - Road Safety Provisions"]', 'Not provided', 'dust everywhere my kids are sick I want to go to the hospital', 'GR-20250918-KOJH-DFC0-B')
2025-09-18 09:02:22,526 - db_manager - DEBUG - execute_update query: 
                    UPDATE grievances 
                    SET grievance_categories = %s, grievance_categories_alternative = %s, grievance_summary = %s, grievance_description = %s, grievance_modification_date = CURRENT_TIMESTAMP
                    WHERE grievance_id = %s
                    RETURNING grievance_id
                
2025-09-18 09:02:22,526 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 09:02:22,531 - db_manager - INFO - Starting database transaction
2025-09-18 09:02:22,531 - db_manager - INFO - execute_update: Executing update query: 
                    UPDATE grievances 
                    SET grievance_categories = %s, grievance...
2025-09-18 09:02:22,532 - db_manager - INFO - execute_update: Update completed in 0.01s. Affected rows: 1
2025-09-18 09:02:22,535 - db_manager - INFO - Transaction committed successfully
2025-09-18 09:02:22,535 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 09:02:22,535 - db_manager - INFO - update_grievance: Updated grievance with ID: GR-20250918-KOJH-DFC0-B, rows affected: 1
2025-09-18 09:02:22,535 - db_manager - INFO - Grievance updated in db: GR-20250918-KOJH-DFC0-B
2025-09-18 09:13:33,003 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-18 09:13:33,003 - db_manager - INFO - Database manager initialized successfully
2025-09-18 09:13:33,003 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-18 09:13:33,003 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-18 09:13:33,003 - db_manager - INFO - Database manager initialized successfully
2025-09-18 09:13:33,003 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-18 09:13:33,003 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-18 09:13:33,003 - db_manager - INFO - Database manager initialized successfully
2025-09-18 09:13:33,003 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-18 09:13:33,003 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-18 09:13:33,003 - db_manager - INFO - Database manager initialized successfully
2025-09-18 09:13:33,003 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-18 09:13:33,004 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-18 09:13:33,004 - db_manager - INFO - Database manager initialized successfully
2025-09-18 09:13:33,004 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-18 09:13:33,004 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-18 09:13:33,004 - db_manager - INFO - Database manager initialized successfully
2025-09-18 09:13:33,004 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-18 09:13:33,004 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-18 09:13:33,004 - db_manager - INFO - Database manager initialized successfully
2025-09-18 09:13:33,004 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-18 09:13:33,004 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-18 09:13:33,004 - db_manager - INFO - Database manager initialized successfully
2025-09-18 09:13:33,004 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-18 09:13:33,004 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-18 09:13:33,004 - db_manager - INFO - Database manager initialized successfully
2025-09-18 09:13:33,004 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-18 09:13:33,004 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-18 09:13:33,004 - db_manager - INFO - Database manager initialized successfully
2025-09-18 09:13:33,004 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-18 09:14:37,034 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-18 09:14:37,034 - db_manager - INFO - Database manager initialized successfully
2025-09-18 09:14:37,034 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-18 09:14:37,034 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-18 09:14:37,034 - db_manager - INFO - Database manager initialized successfully
2025-09-18 09:14:37,034 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-18 09:14:37,034 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-18 09:14:37,034 - db_manager - INFO - Database manager initialized successfully
2025-09-18 09:14:37,034 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-18 09:14:37,035 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-18 09:14:37,035 - db_manager - INFO - Database manager initialized successfully
2025-09-18 09:14:37,035 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-18 09:14:37,035 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-18 09:14:37,035 - db_manager - INFO - Database manager initialized successfully
2025-09-18 09:14:37,035 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-18 09:14:37,035 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-18 09:14:37,035 - db_manager - INFO - Database manager initialized successfully
2025-09-18 09:14:37,035 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-18 09:14:37,035 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-18 09:14:37,035 - db_manager - INFO - Database manager initialized successfully
2025-09-18 09:14:37,035 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-18 09:14:37,035 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-18 09:14:37,035 - db_manager - INFO - Database manager initialized successfully
2025-09-18 09:14:37,035 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-18 09:14:37,035 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-18 09:14:37,035 - db_manager - INFO - Database manager initialized successfully
2025-09-18 09:14:37,035 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-18 09:14:37,035 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-18 09:14:37,035 - db_manager - INFO - Database manager initialized successfully
2025-09-18 09:14:37,035 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-18 09:16:45,468 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-18 09:16:45,468 - db_manager - INFO - Database manager initialized successfully
2025-09-18 09:16:45,468 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-18 09:16:45,468 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-18 09:16:45,468 - db_manager - INFO - Database manager initialized successfully
2025-09-18 09:16:45,468 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-18 09:16:45,468 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-18 09:16:45,468 - db_manager - INFO - Database manager initialized successfully
2025-09-18 09:16:45,468 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-18 09:16:45,468 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-18 09:16:45,468 - db_manager - INFO - Database manager initialized successfully
2025-09-18 09:16:45,468 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-18 09:16:45,468 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-18 09:16:45,468 - db_manager - INFO - Database manager initialized successfully
2025-09-18 09:16:45,468 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-18 09:16:45,468 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-18 09:16:45,469 - db_manager - INFO - Database manager initialized successfully
2025-09-18 09:16:45,469 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-18 09:16:45,469 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-18 09:16:45,469 - db_manager - INFO - Database manager initialized successfully
2025-09-18 09:16:45,469 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-18 09:16:45,469 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-18 09:16:45,469 - db_manager - INFO - Database manager initialized successfully
2025-09-18 09:16:45,469 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-18 09:16:45,469 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-18 09:16:45,469 - db_manager - INFO - Database manager initialized successfully
2025-09-18 09:16:45,469 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-18 09:16:45,469 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-18 09:16:45,470 - db_manager - INFO - Database manager initialized successfully
2025-09-18 09:16:45,470 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-18 09:17:50,684 - db_manager - INFO - create_complainant: Creating complainant with ID: CM-20250918-KOJH-6371-B
2025-09-18 09:17:50,685 - db_manager - DEBUG - encrypted and hashed data at encrypt_and_hash_sensitive_data: {'complainant_id': 'CM-20250918-KOJH-6371-B', 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_unique_id': 'CM-20250918-KOJH-6371-B'}
2025-09-18 09:17:50,685 - db_manager - DEBUG - query_keys at generate_query_string: dict_keys(['complainant_id', 'complainant_province', 'complainant_district', 'complainant_unique_id'])
2025-09-18 09:17:50,685 - db_manager - DEBUG - Generated query: INSERT INTO complainants (complainant_id, complainant_province, complainant_district, complainant_unique_id) VALUES (%s, %s, %s, %s)
2025-09-18 09:17:50,685 - db_manager - DEBUG - len of query_keys: 4
2025-09-18 09:17:50,685 - db_manager - DEBUG - Generated query: INSERT INTO complainants (complainant_id, complainant_province, complainant_district, complainant_unique_id) VALUES (%s, %s, %s, %s)
2025-09-18 09:17:50,685 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 09:17:50,693 - db_manager - INFO - Starting database transaction
2025-09-18 09:17:50,696 - db_manager - INFO - Transaction committed successfully
2025-09-18 09:17:50,696 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 09:17:50,696 - db_manager - INFO - create_complainant: Successfully created complainant with ID: CM-20250918-KOJH-6371-B
2025-09-18 09:17:50,696 - db_manager - INFO - create_grievance: Creating grievance with data: {'grievance_id': 'GR-20250918-KOJH-B6F0-B', 'complainant_id': 'CM-20250918-KOJH-6371-B', 'grievance_description': 'dust everywhere my kids are sick I want to go to the hospital', 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_office': None, 'source': 'bot', 'complainant_unique_id': 'CM-20250918-KOJH-6371-B'}
2025-09-18 09:17:50,696 - db_manager - INFO - create_grievance: Creating grievance with ID: GR-20250918-KOJH-B6F0-B
2025-09-18 09:17:50,696 - db_manager - INFO - create_grievance: Creating grievance with allowed fields: ['grievance_id', 'complainant_id', 'grievance_categories', 'grievance_categories_alternative', 'follow_up_question', 'grievance_summary', 'grievance_description', 'grievance_claimed_amount', 'grievance_location', 'is_temporary', 'source', 'language_code', 'grievance_classification_status']
2025-09-18 09:17:50,697 - db_manager - DEBUG - query_keys at generate_query_string: dict_keys(['grievance_id', 'complainant_id', 'grievance_description', 'source'])
2025-09-18 09:17:50,697 - db_manager - DEBUG - Generated query: INSERT INTO grievances (grievance_id, complainant_id, grievance_description, source) VALUES (%s, %s, %s, %s) RETURNING grievance_id
2025-09-18 09:17:50,697 - db_manager - DEBUG - len of query_keys: 4
2025-09-18 09:17:50,697 - db_manager - DEBUG - Generated query: INSERT INTO grievances (grievance_id, complainant_id, grievance_description, source) VALUES (%s, %s, %s, %s) RETURNING grievance_id
2025-09-18 09:17:50,697 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 09:17:50,703 - db_manager - INFO - Starting database transaction
2025-09-18 09:17:50,710 - db_manager - INFO - Transaction committed successfully
2025-09-18 09:17:50,710 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 09:17:50,710 - db_manager - INFO - create_grievance: Successfully created grievance with ID: GR-20250918-KOJH-B6F0-B
2025-09-18 09:18:07,124 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 09:18:07,130 - db_manager - INFO - Starting database transaction
2025-09-18 09:18:07,131 - db_manager - INFO - Executing get_complainant_by_id: 
            SELECT complainant_id, complainant_unique_id, complainant_full_name,    complainant_pho...
2025-09-18 09:18:07,132 - db_manager - INFO - get_complainant_by_id completed in 0.01s. Rows: 1
2025-09-18 09:18:07,132 - db_manager - INFO - Transaction committed successfully
2025-09-18 09:18:07,132 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 09:18:07,132 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 09:18:07,138 - db_manager - INFO - Starting database transaction
2025-09-18 09:18:07,138 - db_manager - INFO - Executing get_grievance_by_id: 
                SELECT g.*, c.complainant_full_name, c.complainant_phone, c.complainant_email,
    ...
2025-09-18 09:18:07,139 - db_manager - INFO - get_grievance_by_id completed in 0.01s. Rows: 1
2025-09-18 09:18:07,139 - db_manager - INFO - Transaction committed successfully
2025-09-18 09:18:07,139 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 09:18:07,140 - db_manager - DEBUG - get_grievance_by_id: grievance_id: {'grievance_id': 'GR-20250918-KOJH-B6F0-B', 'complainant_id': 'CM-20250918-KOJH-6371-B', 'grievance_categories': None, 'grievance_categories_alternative': None, 'follow_up_question': None, 'grievance_summary': None, 'grievance_description': 'dust everywhere my kids are sick I want to go to the hospital', 'grievance_claimed_amount': None, 'grievance_location': None, 'language_code': 'ne', 'grievance_classification_status': 'pending', 'grievance_creation_date': datetime.datetime(2025, 9, 18, 9, 17, 50, 703590, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'grievance_modification_date': datetime.datetime(2025, 9, 18, 9, 17, 50, 703590, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'is_temporary': True, 'source': 'bot', 'complainant_full_name': None, 'complainant_phone': None, 'complainant_email': None, 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_municipality': None, 'complainant_ward': None, 'complainant_village': None, 'complainant_address': None}, results: [{'grievance_id': 'GR-20250918-KOJH-B6F0-B', 'complainant_id': 'CM-20250918-KOJH-6371-B', 'grievance_categories': None, 'grievance_categories_alternative': None, 'follow_up_question': None, 'grievance_summary': None, 'grievance_description': 'dust everywhere my kids are sick I want to go to the hospital', 'grievance_claimed_amount': None, 'grievance_location': None, 'language_code': 'ne', 'grievance_classification_status': 'pending', 'grievance_creation_date': datetime.datetime(2025, 9, 18, 9, 17, 50, 703590, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'grievance_modification_date': datetime.datetime(2025, 9, 18, 9, 17, 50, 703590, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'is_temporary': True, 'source': 'bot', 'complainant_full_name': None, 'complainant_phone': None, 'complainant_email': None, 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_municipality': None, 'complainant_ward': None, 'complainant_village': None, 'complainant_address': None}]
2025-09-18 09:18:07,140 - db_manager - INFO - update_complainant: Updating complainant with ID: CM-20250918-KOJH-6371-B
2025-09-18 09:18:07,140 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 09:18:07,145 - db_manager - INFO - Starting database transaction
2025-09-18 09:18:07,145 - db_manager - INFO - Executing encrypt_field: SELECT encode(pgp_sym_encrypt(%s, %s), 'hex') AS encrypted...
2025-09-18 09:18:07,146 - db_manager - INFO - encrypt_field completed in 0.01s. Rows: 1
2025-09-18 09:18:07,146 - db_manager - INFO - Transaction committed successfully
2025-09-18 09:18:07,146 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 09:18:07,146 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 09:18:07,151 - db_manager - INFO - Starting database transaction
2025-09-18 09:18:07,151 - db_manager - INFO - Executing encrypt_field: SELECT encode(pgp_sym_encrypt(%s, %s), 'hex') AS encrypted...
2025-09-18 09:18:07,152 - db_manager - INFO - encrypt_field completed in 0.01s. Rows: 1
2025-09-18 09:18:07,152 - db_manager - INFO - Transaction committed successfully
2025-09-18 09:18:07,152 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 09:18:07,152 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 09:18:07,157 - db_manager - INFO - Starting database transaction
2025-09-18 09:18:07,157 - db_manager - INFO - Executing encrypt_field: SELECT encode(pgp_sym_encrypt(%s, %s), 'hex') AS encrypted...
2025-09-18 09:18:07,158 - db_manager - INFO - encrypt_field completed in 0.01s. Rows: 1
2025-09-18 09:18:07,158 - db_manager - INFO - Transaction committed successfully
2025-09-18 09:18:07,158 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 09:18:07,158 - db_manager - DEBUG - encrypted phone number Not provided at encrypt_complainant_data: c30d040703023caa33ffaa63321378d23d01b2b7d715b7c9f19cb84d1646a4e0654f42b32a9b240a879f183b8fe536351d71ac208d1edd42783d9d539b90373296db2de511b5c94a7b626332abba
2025-09-18 09:18:07,159 - db_manager - DEBUG - phone number Not provided hashed to d83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f at hash_sensitive_data
2025-09-18 09:18:07,159 - db_manager - DEBUG - encrypted and hashed data at encrypt_and_hash_sensitive_data: {'complainant_full_name': 'c30d04070302e55d1cd97a78fb7e6ad23d01d4b84db5eed6e7013db53669a6f2e21ca48171477dd79a98eddc4ff085fc3f8abb4e808948d56c18ce1ae0b0a03fddb7e23debcbd0fb830a4ac9292e', 'complainant_phone': 'c30d040703023caa33ffaa63321378d23d01b2b7d715b7c9f19cb84d1646a4e0654f42b32a9b240a879f183b8fe536351d71ac208d1edd42783d9d539b90373296db2de511b5c94a7b626332abba', 'complainant_email': 'c30d04070302222c27957bbb213974d23d01b086c60f4500672468af5d724361f9f9c2f4daf3cca32c3d7cadd4b283b0fff29b446ca91d9b2b8477e227768ed4c662d7fe76f9003ba67b2c9ef541', 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_full_name_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'complainant_email_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'complainant_phone_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f'}
2025-09-18 09:18:07,159 - db_manager - DEBUG - encrypted_data at update_complainant: {'complainant_full_name': 'c30d04070302e55d1cd97a78fb7e6ad23d01d4b84db5eed6e7013db53669a6f2e21ca48171477dd79a98eddc4ff085fc3f8abb4e808948d56c18ce1ae0b0a03fddb7e23debcbd0fb830a4ac9292e', 'complainant_phone': 'c30d040703023caa33ffaa63321378d23d01b2b7d715b7c9f19cb84d1646a4e0654f42b32a9b240a879f183b8fe536351d71ac208d1edd42783d9d539b90373296db2de511b5c94a7b626332abba', 'complainant_email': 'c30d04070302222c27957bbb213974d23d01b086c60f4500672468af5d724361f9f9c2f4daf3cca32c3d7cadd4b283b0fff29b446ca91d9b2b8477e227768ed4c662d7fe76f9003ba67b2c9ef541', 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_full_name_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'complainant_email_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'complainant_phone_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f'}
2025-09-18 09:18:07,159 - db_manager - DEBUG - execute_update values: ('c30d04070302e55d1cd97a78fb7e6ad23d01d4b84db5eed6e7013db53669a6f2e21ca48171477dd79a98eddc4ff085fc3f8abb4e808948d56c18ce1ae0b0a03fddb7e23debcbd0fb830a4ac9292e', 'c30d040703023caa33ffaa63321378d23d01b2b7d715b7c9f19cb84d1646a4e0654f42b32a9b240a879f183b8fe536351d71ac208d1edd42783d9d539b90373296db2de511b5c94a7b626332abba', 'c30d04070302222c27957bbb213974d23d01b086c60f4500672468af5d724361f9f9c2f4daf3cca32c3d7cadd4b283b0fff29b446ca91d9b2b8477e227768ed4c662d7fe76f9003ba67b2c9ef541', 'Koshi', 'Jhapa', 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'CM-20250918-KOJH-6371-B')
2025-09-18 09:18:07,159 - db_manager - DEBUG - execute_update query: UPDATE complainants SET complainant_full_name = %s, complainant_phone = %s, complainant_email = %s, complainant_province = %s, complainant_district = %s, complainant_full_name_hash = %s, complainant_email_hash = %s, complainant_phone_hash = %s WHERE complainant_id = %s
2025-09-18 09:18:07,159 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 09:18:07,163 - db_manager - INFO - Starting database transaction
2025-09-18 09:18:07,164 - db_manager - INFO - execute_update: Executing update query: UPDATE complainants SET complainant_full_name = %s, complainant_phone = %s, complainant_email = %s, ...
2025-09-18 09:18:07,164 - db_manager - INFO - execute_update: Update completed in 0.01s. Affected rows: 1
2025-09-18 09:18:07,167 - db_manager - INFO - Transaction committed successfully
2025-09-18 09:18:07,167 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 09:18:07,167 - db_manager - INFO - Complainant updated in db: CM-20250918-KOJH-6371-B
2025-09-18 09:18:07,167 - db_manager - INFO - update_grievance: Updating grievance with ID: GR-20250918-KOJH-B6F0-B
2025-09-18 09:18:07,167 - db_manager - DEBUG - execute_update values: ('dust everywhere my kids are sick I want to go to the hospital', 'GR-20250918-KOJH-B6F0-B')
2025-09-18 09:18:07,167 - db_manager - DEBUG - execute_update query: 
                    UPDATE grievances 
                    SET grievance_description = %s, grievance_modification_date = CURRENT_TIMESTAMP
                    WHERE grievance_id = %s
                    RETURNING grievance_id
                
2025-09-18 09:18:07,167 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 09:18:07,173 - db_manager - INFO - Starting database transaction
2025-09-18 09:18:07,173 - db_manager - INFO - execute_update: Executing update query: 
                    UPDATE grievances 
                    SET grievance_description = %s, grievanc...
2025-09-18 09:18:07,174 - db_manager - INFO - execute_update: Update completed in 0.01s. Affected rows: 1
2025-09-18 09:18:07,176 - db_manager - INFO - Transaction committed successfully
2025-09-18 09:18:07,176 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 09:18:07,177 - db_manager - INFO - update_grievance: Updated grievance with ID: GR-20250918-KOJH-B6F0-B, rows affected: 1
2025-09-18 09:18:07,177 - db_manager - INFO - Grievance updated in db: GR-20250918-KOJH-B6F0-B
2025-09-18 09:18:07,177 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 09:18:07,182 - db_manager - INFO - Starting database transaction
2025-09-18 09:18:07,182 - db_manager - INFO - Executing get_grievance_files: 
            SELECT file_id, file_name, file_type, file_size, upload_timestamp
            FROM file...
2025-09-18 09:18:07,183 - db_manager - INFO - get_grievance_files completed in 0.01s. Rows: 0
2025-09-18 09:18:07,183 - db_manager - INFO - Transaction committed successfully
2025-09-18 09:18:07,183 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 09:18:07,183 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 09:18:07,189 - db_manager - INFO - Starting database transaction
2025-09-18 09:18:07,189 - db_manager - INFO - Executing get_grievance_files: 
            SELECT file_id, file_name, file_type, file_size, upload_timestamp
            FROM file...
2025-09-18 09:18:07,190 - db_manager - INFO - get_grievance_files completed in 0.01s. Rows: 0
2025-09-18 09:18:07,190 - db_manager - INFO - Transaction committed successfully
2025-09-18 09:18:07,190 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 09:18:07,237 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 09:18:07,242 - db_manager - INFO - Starting database transaction
2025-09-18 09:18:07,242 - db_manager - INFO - Executing get_grievance_by_id: 
                SELECT g.*, c.complainant_full_name, c.complainant_phone, c.complainant_email,
    ...
2025-09-18 09:18:07,244 - db_manager - INFO - get_grievance_by_id completed in 0.01s. Rows: 1
2025-09-18 09:18:07,244 - db_manager - INFO - Transaction committed successfully
2025-09-18 09:18:07,244 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 09:18:07,244 - db_manager - DEBUG - get_grievance_by_id: grievance_id: {'grievance_id': 'GR-20250918-KOJH-B6F0-B', 'complainant_id': 'CM-20250918-KOJH-6371-B', 'grievance_categories': None, 'grievance_categories_alternative': None, 'follow_up_question': None, 'grievance_summary': None, 'grievance_description': 'dust everywhere my kids are sick I want to go to the hospital', 'grievance_claimed_amount': None, 'grievance_location': None, 'language_code': 'ne', 'grievance_classification_status': 'pending', 'grievance_creation_date': datetime.datetime(2025, 9, 18, 9, 17, 50, 703590, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'grievance_modification_date': datetime.datetime(2025, 9, 18, 9, 18, 7, 173800, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'is_temporary': True, 'source': 'bot', 'complainant_full_name': 'c30d04070302e55d1cd97a78fb7e6ad23d01d4b84db5eed6e7013db53669a6f2e21ca48171477dd79a98eddc4ff085fc3f8abb4e808948d56c18ce1ae0b0a03fddb7e23debcbd0fb830a4ac9292e', 'complainant_phone': 'c30d040703023caa33ffaa63321378d23d01b2b7d715b7c9f19cb84d1646a4e0654f42b32a9b240a879f183b8fe536351d71ac208d1edd42783d9d539b90373296db2de511b5c94a7b626332abba', 'complainant_email': 'c30d04070302222c27957bbb213974d23d01b086c60f4500672468af5d724361f9f9c2f4daf3cca32c3d7cadd4b283b0fff29b446ca91d9b2b8477e227768ed4c662d7fe76f9003ba67b2c9ef541', 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_municipality': None, 'complainant_ward': None, 'complainant_village': None, 'complainant_address': None}, results: [{'grievance_id': 'GR-20250918-KOJH-B6F0-B', 'complainant_id': 'CM-20250918-KOJH-6371-B', 'grievance_categories': None, 'grievance_categories_alternative': None, 'follow_up_question': None, 'grievance_summary': None, 'grievance_description': 'dust everywhere my kids are sick I want to go to the hospital', 'grievance_claimed_amount': None, 'grievance_location': None, 'language_code': 'ne', 'grievance_classification_status': 'pending', 'grievance_creation_date': datetime.datetime(2025, 9, 18, 9, 17, 50, 703590, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'grievance_modification_date': datetime.datetime(2025, 9, 18, 9, 18, 7, 173800, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'is_temporary': True, 'source': 'bot', 'complainant_full_name': 'c30d04070302e55d1cd97a78fb7e6ad23d01d4b84db5eed6e7013db53669a6f2e21ca48171477dd79a98eddc4ff085fc3f8abb4e808948d56c18ce1ae0b0a03fddb7e23debcbd0fb830a4ac9292e', 'complainant_phone': 'c30d040703023caa33ffaa63321378d23d01b2b7d715b7c9f19cb84d1646a4e0654f42b32a9b240a879f183b8fe536351d71ac208d1edd42783d9d539b90373296db2de511b5c94a7b626332abba', 'complainant_email': 'c30d04070302222c27957bbb213974d23d01b086c60f4500672468af5d724361f9f9c2f4daf3cca32c3d7cadd4b283b0fff29b446ca91d9b2b8477e227768ed4c662d7fe76f9003ba67b2c9ef541', 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_municipality': None, 'complainant_ward': None, 'complainant_village': None, 'complainant_address': None}]
2025-09-18 09:20:26,010 - db_manager - INFO - create_complainant: Creating complainant with ID: CM-20250918-KOJH-0E3F-B
2025-09-18 09:20:26,010 - db_manager - DEBUG - encrypted and hashed data at encrypt_and_hash_sensitive_data: {'complainant_id': 'CM-20250918-KOJH-0E3F-B', 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_unique_id': 'CM-20250918-KOJH-0E3F-B'}
2025-09-18 09:20:26,010 - db_manager - DEBUG - query_keys at generate_query_string: dict_keys(['complainant_id', 'complainant_province', 'complainant_district', 'complainant_unique_id'])
2025-09-18 09:20:26,010 - db_manager - DEBUG - Generated query: INSERT INTO complainants (complainant_id, complainant_province, complainant_district, complainant_unique_id) VALUES (%s, %s, %s, %s)
2025-09-18 09:20:26,010 - db_manager - DEBUG - len of query_keys: 4
2025-09-18 09:20:26,010 - db_manager - DEBUG - Generated query: INSERT INTO complainants (complainant_id, complainant_province, complainant_district, complainant_unique_id) VALUES (%s, %s, %s, %s)
2025-09-18 09:20:26,010 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 09:20:26,015 - db_manager - INFO - Starting database transaction
2025-09-18 09:20:26,018 - db_manager - INFO - Transaction committed successfully
2025-09-18 09:20:26,018 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 09:20:26,018 - db_manager - INFO - create_complainant: Successfully created complainant with ID: CM-20250918-KOJH-0E3F-B
2025-09-18 09:20:26,018 - db_manager - INFO - create_grievance: Creating grievance with data: {'grievance_id': 'GR-20250918-KOJH-5DAA-B', 'complainant_id': 'CM-20250918-KOJH-0E3F-B', 'grievance_description': 'dust everywhere my kids are sick I want to go to the hospital', 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_office': None, 'source': 'bot', 'complainant_unique_id': 'CM-20250918-KOJH-0E3F-B'}
2025-09-18 09:20:26,018 - db_manager - INFO - create_grievance: Creating grievance with ID: GR-20250918-KOJH-5DAA-B
2025-09-18 09:20:26,018 - db_manager - INFO - create_grievance: Creating grievance with allowed fields: ['grievance_id', 'complainant_id', 'grievance_categories', 'grievance_categories_alternative', 'follow_up_question', 'grievance_summary', 'grievance_description', 'grievance_claimed_amount', 'grievance_location', 'is_temporary', 'source', 'language_code', 'grievance_classification_status']
2025-09-18 09:20:26,018 - db_manager - DEBUG - query_keys at generate_query_string: dict_keys(['grievance_id', 'complainant_id', 'grievance_description', 'source'])
2025-09-18 09:20:26,018 - db_manager - DEBUG - Generated query: INSERT INTO grievances (grievance_id, complainant_id, grievance_description, source) VALUES (%s, %s, %s, %s) RETURNING grievance_id
2025-09-18 09:20:26,018 - db_manager - DEBUG - len of query_keys: 4
2025-09-18 09:20:26,018 - db_manager - DEBUG - Generated query: INSERT INTO grievances (grievance_id, complainant_id, grievance_description, source) VALUES (%s, %s, %s, %s) RETURNING grievance_id
2025-09-18 09:20:26,018 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 09:20:26,023 - db_manager - INFO - Starting database transaction
2025-09-18 09:20:26,027 - db_manager - INFO - Transaction committed successfully
2025-09-18 09:20:26,027 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 09:20:26,027 - db_manager - INFO - create_grievance: Successfully created grievance with ID: GR-20250918-KOJH-5DAA-B
2025-09-18 09:20:45,845 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 09:20:45,851 - db_manager - INFO - Starting database transaction
2025-09-18 09:20:45,851 - db_manager - INFO - Executing get_complainant_by_id: 
            SELECT complainant_id, complainant_unique_id, complainant_full_name,    complainant_pho...
2025-09-18 09:20:45,852 - db_manager - INFO - get_complainant_by_id completed in 0.01s. Rows: 1
2025-09-18 09:20:45,852 - db_manager - INFO - Transaction committed successfully
2025-09-18 09:20:45,853 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 09:20:45,853 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 09:20:45,857 - db_manager - INFO - Starting database transaction
2025-09-18 09:20:45,857 - db_manager - INFO - Executing get_grievance_by_id: 
                SELECT g.*, c.complainant_full_name, c.complainant_phone, c.complainant_email,
    ...
2025-09-18 09:20:45,859 - db_manager - INFO - get_grievance_by_id completed in 0.01s. Rows: 1
2025-09-18 09:20:45,859 - db_manager - INFO - Transaction committed successfully
2025-09-18 09:20:45,859 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 09:20:45,859 - db_manager - DEBUG - get_grievance_by_id: grievance_id: {'grievance_id': 'GR-20250918-KOJH-5DAA-B', 'complainant_id': 'CM-20250918-KOJH-0E3F-B', 'grievance_categories': ['Environmental - Air Pollution'], 'grievance_categories_alternative': ['Environmental - Noise Pollution', 'Safety - Road Safety Provisions', 'Environmental - Drainage and Sewage Management'], 'follow_up_question': ['How many people in your household are affected by the dust, and what health problems have you observed? Have you visited a hospital or doctor for this issue?'], 'grievance_summary': 'Dust from road works is making my kids sick; I need to take them to the hospital.', 'grievance_description': 'dust everywhere my kids are sick I want to go to the hospital', 'grievance_claimed_amount': None, 'grievance_location': None, 'language_code': 'en', 'grievance_classification_status': 'pending', 'grievance_creation_date': datetime.datetime(2025, 9, 18, 9, 20, 26, 23988, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'grievance_modification_date': datetime.datetime(2025, 9, 18, 9, 20, 38, 967098, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'is_temporary': True, 'source': 'bot', 'complainant_full_name': None, 'complainant_phone': None, 'complainant_email': None, 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_municipality': None, 'complainant_ward': None, 'complainant_village': None, 'complainant_address': None}, results: [{'grievance_id': 'GR-20250918-KOJH-5DAA-B', 'complainant_id': 'CM-20250918-KOJH-0E3F-B', 'grievance_categories': '["Environmental - Air Pollution"]', 'grievance_categories_alternative': '["Environmental - Noise Pollution", "Safety - Road Safety Provisions", "Environmental - Drainage and Sewage Management"]', 'follow_up_question': '["How many people in your household are affected by the dust, and what health problems have you observed? Have you visited a hospital or doctor for this issue?"]', 'grievance_summary': 'Dust from road works is making my kids sick; I need to take them to the hospital.', 'grievance_description': 'dust everywhere my kids are sick I want to go to the hospital', 'grievance_claimed_amount': None, 'grievance_location': None, 'language_code': 'en', 'grievance_classification_status': 'pending', 'grievance_creation_date': datetime.datetime(2025, 9, 18, 9, 20, 26, 23988, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'grievance_modification_date': datetime.datetime(2025, 9, 18, 9, 20, 38, 967098, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'is_temporary': True, 'source': 'bot', 'complainant_full_name': None, 'complainant_phone': None, 'complainant_email': None, 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_municipality': None, 'complainant_ward': None, 'complainant_village': None, 'complainant_address': None}]
2025-09-18 09:20:45,859 - db_manager - INFO - update_complainant: Updating complainant with ID: CM-20250918-KOJH-0E3F-B
2025-09-18 09:20:45,859 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 09:20:45,864 - db_manager - INFO - Starting database transaction
2025-09-18 09:20:45,864 - db_manager - INFO - Executing encrypt_field: SELECT encode(pgp_sym_encrypt(%s, %s), 'hex') AS encrypted...
2025-09-18 09:20:45,866 - db_manager - INFO - encrypt_field completed in 0.01s. Rows: 1
2025-09-18 09:20:45,866 - db_manager - INFO - Transaction committed successfully
2025-09-18 09:20:45,866 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 09:20:45,866 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 09:20:45,871 - db_manager - INFO - Starting database transaction
2025-09-18 09:20:45,871 - db_manager - INFO - Executing encrypt_field: SELECT encode(pgp_sym_encrypt(%s, %s), 'hex') AS encrypted...
2025-09-18 09:20:45,872 - db_manager - INFO - encrypt_field completed in 0.01s. Rows: 1
2025-09-18 09:20:45,872 - db_manager - INFO - Transaction committed successfully
2025-09-18 09:20:45,872 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 09:20:45,872 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 09:20:45,877 - db_manager - INFO - Starting database transaction
2025-09-18 09:20:45,877 - db_manager - INFO - Executing encrypt_field: SELECT encode(pgp_sym_encrypt(%s, %s), 'hex') AS encrypted...
2025-09-18 09:20:45,878 - db_manager - INFO - encrypt_field completed in 0.01s. Rows: 1
2025-09-18 09:20:45,878 - db_manager - INFO - Transaction committed successfully
2025-09-18 09:20:45,878 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 09:20:45,878 - db_manager - DEBUG - encrypted phone number Not provided at encrypt_complainant_data: c30d0407030207b02fb2410972736dd23d01f06ff1c1d5542cce3fb75bd9a0d8e9de5c3781fa1b6e82221f1c46954daf6cc50d9ca090979a3d5201adb7b6ddb615bf16a3e460cc52bca557e7d65c
2025-09-18 09:20:45,878 - db_manager - DEBUG - phone number Not provided hashed to d83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f at hash_sensitive_data
2025-09-18 09:20:45,878 - db_manager - DEBUG - encrypted and hashed data at encrypt_and_hash_sensitive_data: {'complainant_full_name': 'c30d04070302365167992bf7938c7fd23d01bed01c40c3fd5a89bb113e08cb9640f2b38880bb682d010d1193251768c91936d02780849144ca577a9df1f850b67eca633baa29a53eb3679324888e', 'complainant_phone': 'c30d0407030207b02fb2410972736dd23d01f06ff1c1d5542cce3fb75bd9a0d8e9de5c3781fa1b6e82221f1c46954daf6cc50d9ca090979a3d5201adb7b6ddb615bf16a3e460cc52bca557e7d65c', 'complainant_email': 'c30d040703028137c4681420682d6dd23d01e724a065dc5bc75ad19781e87476d9336b07f79a8442dcd4866331bc0a6342daa062ab63a30b39ae5b309161b23dac81e81fd6e045fee1f777736dcb', 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_full_name_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'complainant_email_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'complainant_phone_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f'}
2025-09-18 09:20:45,878 - db_manager - DEBUG - encrypted_data at update_complainant: {'complainant_full_name': 'c30d04070302365167992bf7938c7fd23d01bed01c40c3fd5a89bb113e08cb9640f2b38880bb682d010d1193251768c91936d02780849144ca577a9df1f850b67eca633baa29a53eb3679324888e', 'complainant_phone': 'c30d0407030207b02fb2410972736dd23d01f06ff1c1d5542cce3fb75bd9a0d8e9de5c3781fa1b6e82221f1c46954daf6cc50d9ca090979a3d5201adb7b6ddb615bf16a3e460cc52bca557e7d65c', 'complainant_email': 'c30d040703028137c4681420682d6dd23d01e724a065dc5bc75ad19781e87476d9336b07f79a8442dcd4866331bc0a6342daa062ab63a30b39ae5b309161b23dac81e81fd6e045fee1f777736dcb', 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_full_name_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'complainant_email_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'complainant_phone_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f'}
2025-09-18 09:20:45,878 - db_manager - DEBUG - execute_update values: ('c30d04070302365167992bf7938c7fd23d01bed01c40c3fd5a89bb113e08cb9640f2b38880bb682d010d1193251768c91936d02780849144ca577a9df1f850b67eca633baa29a53eb3679324888e', 'c30d0407030207b02fb2410972736dd23d01f06ff1c1d5542cce3fb75bd9a0d8e9de5c3781fa1b6e82221f1c46954daf6cc50d9ca090979a3d5201adb7b6ddb615bf16a3e460cc52bca557e7d65c', 'c30d040703028137c4681420682d6dd23d01e724a065dc5bc75ad19781e87476d9336b07f79a8442dcd4866331bc0a6342daa062ab63a30b39ae5b309161b23dac81e81fd6e045fee1f777736dcb', 'Koshi', 'Jhapa', 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'CM-20250918-KOJH-0E3F-B')
2025-09-18 09:20:45,878 - db_manager - DEBUG - execute_update query: UPDATE complainants SET complainant_full_name = %s, complainant_phone = %s, complainant_email = %s, complainant_province = %s, complainant_district = %s, complainant_full_name_hash = %s, complainant_email_hash = %s, complainant_phone_hash = %s WHERE complainant_id = %s
2025-09-18 09:20:45,878 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 09:20:45,883 - db_manager - INFO - Starting database transaction
2025-09-18 09:20:45,883 - db_manager - INFO - execute_update: Executing update query: UPDATE complainants SET complainant_full_name = %s, complainant_phone = %s, complainant_email = %s, ...
2025-09-18 09:20:45,885 - db_manager - INFO - execute_update: Update completed in 0.01s. Affected rows: 1
2025-09-18 09:20:45,887 - db_manager - INFO - Transaction committed successfully
2025-09-18 09:20:45,887 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 09:20:45,887 - db_manager - INFO - Complainant updated in db: CM-20250918-KOJH-0E3F-B
2025-09-18 09:20:45,887 - db_manager - INFO - update_grievance: Updating grievance with ID: GR-20250918-KOJH-5DAA-B
2025-09-18 09:20:45,888 - db_manager - DEBUG - execute_update values: ('dust everywhere my kids are sick I want to go to the hospital', 'GR-20250918-KOJH-5DAA-B')
2025-09-18 09:20:45,888 - db_manager - DEBUG - execute_update query: 
                    UPDATE grievances 
                    SET grievance_description = %s, grievance_modification_date = CURRENT_TIMESTAMP
                    WHERE grievance_id = %s
                    RETURNING grievance_id
                
2025-09-18 09:20:45,888 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 09:20:45,892 - db_manager - INFO - Starting database transaction
2025-09-18 09:20:45,893 - db_manager - INFO - execute_update: Executing update query: 
                    UPDATE grievances 
                    SET grievance_description = %s, grievanc...
2025-09-18 09:20:45,893 - db_manager - INFO - execute_update: Update completed in 0.01s. Affected rows: 1
2025-09-18 09:20:45,896 - db_manager - INFO - Transaction committed successfully
2025-09-18 09:20:45,896 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 09:20:45,896 - db_manager - INFO - update_grievance: Updated grievance with ID: GR-20250918-KOJH-5DAA-B, rows affected: 1
2025-09-18 09:20:45,896 - db_manager - INFO - Grievance updated in db: GR-20250918-KOJH-5DAA-B
2025-09-18 09:20:45,896 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 09:20:45,901 - db_manager - INFO - Starting database transaction
2025-09-18 09:20:45,901 - db_manager - INFO - Executing get_grievance_files: 
            SELECT file_id, file_name, file_type, file_size, upload_timestamp
            FROM file...
2025-09-18 09:20:45,902 - db_manager - INFO - get_grievance_files completed in 0.01s. Rows: 0
2025-09-18 09:20:45,902 - db_manager - INFO - Transaction committed successfully
2025-09-18 09:20:45,902 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 09:20:45,903 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 09:20:45,907 - db_manager - INFO - Starting database transaction
2025-09-18 09:20:45,907 - db_manager - INFO - Executing get_grievance_files: 
            SELECT file_id, file_name, file_type, file_size, upload_timestamp
            FROM file...
2025-09-18 09:20:45,908 - db_manager - INFO - get_grievance_files completed in 0.01s. Rows: 0
2025-09-18 09:20:45,908 - db_manager - INFO - Transaction committed successfully
2025-09-18 09:20:45,908 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 09:20:45,951 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 09:20:45,957 - db_manager - INFO - Starting database transaction
2025-09-18 09:20:45,957 - db_manager - INFO - Executing get_grievance_by_id: 
                SELECT g.*, c.complainant_full_name, c.complainant_phone, c.complainant_email,
    ...
2025-09-18 09:20:45,959 - db_manager - INFO - get_grievance_by_id completed in 0.01s. Rows: 1
2025-09-18 09:20:45,959 - db_manager - INFO - Transaction committed successfully
2025-09-18 09:20:45,959 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 09:20:45,959 - db_manager - DEBUG - get_grievance_by_id: grievance_id: {'grievance_id': 'GR-20250918-KOJH-5DAA-B', 'complainant_id': 'CM-20250918-KOJH-0E3F-B', 'grievance_categories': ['Environmental - Air Pollution'], 'grievance_categories_alternative': ['Environmental - Noise Pollution', 'Safety - Road Safety Provisions', 'Environmental - Drainage and Sewage Management'], 'follow_up_question': ['How many people in your household are affected by the dust, and what health problems have you observed? Have you visited a hospital or doctor for this issue?'], 'grievance_summary': 'Dust from road works is making my kids sick; I need to take them to the hospital.', 'grievance_description': 'dust everywhere my kids are sick I want to go to the hospital', 'grievance_claimed_amount': None, 'grievance_location': None, 'language_code': 'en', 'grievance_classification_status': 'pending', 'grievance_creation_date': datetime.datetime(2025, 9, 18, 9, 20, 26, 23988, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'grievance_modification_date': datetime.datetime(2025, 9, 18, 9, 20, 45, 893163, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'is_temporary': True, 'source': 'bot', 'complainant_full_name': 'c30d04070302365167992bf7938c7fd23d01bed01c40c3fd5a89bb113e08cb9640f2b38880bb682d010d1193251768c91936d02780849144ca577a9df1f850b67eca633baa29a53eb3679324888e', 'complainant_phone': 'c30d0407030207b02fb2410972736dd23d01f06ff1c1d5542cce3fb75bd9a0d8e9de5c3781fa1b6e82221f1c46954daf6cc50d9ca090979a3d5201adb7b6ddb615bf16a3e460cc52bca557e7d65c', 'complainant_email': 'c30d040703028137c4681420682d6dd23d01e724a065dc5bc75ad19781e87476d9336b07f79a8442dcd4866331bc0a6342daa062ab63a30b39ae5b309161b23dac81e81fd6e045fee1f777736dcb', 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_municipality': None, 'complainant_ward': None, 'complainant_village': None, 'complainant_address': None}, results: [{'grievance_id': 'GR-20250918-KOJH-5DAA-B', 'complainant_id': 'CM-20250918-KOJH-0E3F-B', 'grievance_categories': '["Environmental - Air Pollution"]', 'grievance_categories_alternative': '["Environmental - Noise Pollution", "Safety - Road Safety Provisions", "Environmental - Drainage and Sewage Management"]', 'follow_up_question': '["How many people in your household are affected by the dust, and what health problems have you observed? Have you visited a hospital or doctor for this issue?"]', 'grievance_summary': 'Dust from road works is making my kids sick; I need to take them to the hospital.', 'grievance_description': 'dust everywhere my kids are sick I want to go to the hospital', 'grievance_claimed_amount': None, 'grievance_location': None, 'language_code': 'en', 'grievance_classification_status': 'pending', 'grievance_creation_date': datetime.datetime(2025, 9, 18, 9, 20, 26, 23988, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'grievance_modification_date': datetime.datetime(2025, 9, 18, 9, 20, 45, 893163, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'is_temporary': True, 'source': 'bot', 'complainant_full_name': 'c30d04070302365167992bf7938c7fd23d01bed01c40c3fd5a89bb113e08cb9640f2b38880bb682d010d1193251768c91936d02780849144ca577a9df1f850b67eca633baa29a53eb3679324888e', 'complainant_phone': 'c30d0407030207b02fb2410972736dd23d01f06ff1c1d5542cce3fb75bd9a0d8e9de5c3781fa1b6e82221f1c46954daf6cc50d9ca090979a3d5201adb7b6ddb615bf16a3e460cc52bca557e7d65c', 'complainant_email': 'c30d040703028137c4681420682d6dd23d01e724a065dc5bc75ad19781e87476d9336b07f79a8442dcd4866331bc0a6342daa062ab63a30b39ae5b309161b23dac81e81fd6e045fee1f777736dcb', 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_municipality': None, 'complainant_ward': None, 'complainant_village': None, 'complainant_address': None}]
2025-09-18 09:20:52,043 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 09:20:52,048 - db_manager - INFO - Starting database transaction
2025-09-18 09:20:52,048 - db_manager - INFO - Executing get_complainant_id_from_grievance_id: 
            SELECT complainant_id
            FROM grievances
            WHERE grievance_id = %s
 ...
2025-09-18 09:20:52,049 - db_manager - INFO - get_complainant_id_from_grievance_id completed in 0.01s. Rows: 1
2025-09-18 09:20:52,049 - db_manager - INFO - Transaction committed successfully
2025-09-18 09:20:52,049 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 09:20:52,050 - db_manager - INFO - update_complainant: Updating complainant with ID: CM-20250918-KOJH-0E3F-B
2025-09-18 09:20:52,050 - db_manager - DEBUG - encrypted and hashed data at encrypt_and_hash_sensitive_data: {}
2025-09-18 09:20:52,050 - db_manager - DEBUG - encrypted_data at update_complainant: {}
2025-09-18 09:20:52,050 - db_manager - DEBUG - No complainant field to update
2025-09-18 09:20:52,050 - db_manager - INFO - Complainant updated in db: GR-20250918-KOJH-5DAA-B
2025-09-18 09:20:52,050 - db_manager - INFO - update_grievance: Updating grievance with ID: GR-20250918-KOJH-5DAA-B
2025-09-18 09:20:52,050 - db_manager - DEBUG - execute_update values: ('["Environmental - Air Pollution"]', 'GR-20250918-KOJH-5DAA-B')
2025-09-18 09:20:52,050 - db_manager - DEBUG - execute_update query: 
                    UPDATE grievances 
                    SET grievance_categories = %s, grievance_modification_date = CURRENT_TIMESTAMP
                    WHERE grievance_id = %s
                    RETURNING grievance_id
                
2025-09-18 09:20:52,050 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 09:20:52,055 - db_manager - INFO - Starting database transaction
2025-09-18 09:20:52,055 - db_manager - INFO - execute_update: Executing update query: 
                    UPDATE grievances 
                    SET grievance_categories = %s, grievance...
2025-09-18 09:20:52,056 - db_manager - INFO - execute_update: Update completed in 0.01s. Affected rows: 1
2025-09-18 09:20:52,058 - db_manager - INFO - Transaction committed successfully
2025-09-18 09:20:52,058 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 09:20:52,058 - db_manager - INFO - update_grievance: Updated grievance with ID: GR-20250918-KOJH-5DAA-B, rows affected: 1
2025-09-18 09:20:52,059 - db_manager - INFO - Grievance updated in db: GR-20250918-KOJH-5DAA-B
2025-09-18 09:20:52,101 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 09:20:52,107 - db_manager - INFO - Starting database transaction
2025-09-18 09:20:52,107 - db_manager - INFO - Executing get_grievance_files: 
            SELECT file_id, file_name, file_type, file_size, upload_timestamp
            FROM file...
2025-09-18 09:20:52,108 - db_manager - INFO - get_grievance_files completed in 0.01s. Rows: 0
2025-09-18 09:20:52,108 - db_manager - INFO - Transaction committed successfully
2025-09-18 09:20:52,108 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 09:20:52,108 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 09:20:52,113 - db_manager - INFO - Starting database transaction
2025-09-18 09:20:52,113 - db_manager - INFO - Executing get_complainant_by_id: 
            SELECT complainant_id, complainant_unique_id, complainant_full_name,    complainant_pho...
2025-09-18 09:20:52,114 - db_manager - INFO - get_complainant_by_id completed in 0.01s. Rows: 1
2025-09-18 09:20:52,114 - db_manager - INFO - Transaction committed successfully
2025-09-18 09:20:52,114 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 09:20:52,114 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 09:20:52,119 - db_manager - INFO - Starting database transaction
2025-09-18 09:20:52,119 - db_manager - INFO - Executing decrypt_field: SELECT pgp_sym_decrypt(decode(%s, 'hex'), %s) AS decrypted...
2025-09-18 09:20:52,120 - db_manager - INFO - decrypt_field completed in 0.01s. Rows: 1
2025-09-18 09:20:52,120 - db_manager - INFO - Transaction committed successfully
2025-09-18 09:20:52,120 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 09:20:52,120 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 09:20:52,125 - db_manager - INFO - Starting database transaction
2025-09-18 09:20:52,125 - db_manager - INFO - Executing decrypt_field: SELECT pgp_sym_decrypt(decode(%s, 'hex'), %s) AS decrypted...
2025-09-18 09:20:52,126 - db_manager - INFO - decrypt_field completed in 0.01s. Rows: 1
2025-09-18 09:20:52,126 - db_manager - INFO - Transaction committed successfully
2025-09-18 09:20:52,126 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 09:20:52,126 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 09:20:52,131 - db_manager - INFO - Starting database transaction
2025-09-18 09:20:52,133 - db_manager - INFO - Executing decrypt_field: SELECT pgp_sym_decrypt(decode(%s, 'hex'), %s) AS decrypted...
2025-09-18 09:20:52,133 - db_manager - INFO - decrypt_field completed in 0.01s. Rows: 1
2025-09-18 09:20:52,134 - db_manager - INFO - Transaction committed successfully
2025-09-18 09:20:52,134 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 09:20:52,134 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 09:20:52,142 - db_manager - INFO - Starting database transaction
2025-09-18 09:20:52,142 - db_manager - INFO - Executing get_grievance_by_id: 
                SELECT g.*, c.complainant_full_name, c.complainant_phone, c.complainant_email,
    ...
2025-09-18 09:20:52,144 - db_manager - INFO - get_grievance_by_id completed in 0.01s. Rows: 1
2025-09-18 09:20:52,144 - db_manager - INFO - Transaction committed successfully
2025-09-18 09:20:52,144 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 09:20:52,144 - db_manager - DEBUG - get_grievance_by_id: grievance_id: {'grievance_id': 'GR-20250918-KOJH-5DAA-B', 'complainant_id': 'CM-20250918-KOJH-0E3F-B', 'grievance_categories': ['Environmental - Air Pollution'], 'grievance_categories_alternative': ['Environmental - Noise Pollution', 'Safety - Road Safety Provisions', 'Environmental - Drainage and Sewage Management'], 'follow_up_question': ['How many people in your household are affected by the dust, and what health problems have you observed? Have you visited a hospital or doctor for this issue?'], 'grievance_summary': 'Dust from road works is making my kids sick; I need to take them to the hospital.', 'grievance_description': 'dust everywhere my kids are sick I want to go to the hospital', 'grievance_claimed_amount': None, 'grievance_location': None, 'language_code': 'en', 'grievance_classification_status': 'pending', 'grievance_creation_date': datetime.datetime(2025, 9, 18, 9, 20, 26, 23988, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'grievance_modification_date': datetime.datetime(2025, 9, 18, 9, 20, 52, 55343, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'is_temporary': True, 'source': 'bot', 'complainant_full_name': 'c30d04070302365167992bf7938c7fd23d01bed01c40c3fd5a89bb113e08cb9640f2b38880bb682d010d1193251768c91936d02780849144ca577a9df1f850b67eca633baa29a53eb3679324888e', 'complainant_phone': 'c30d0407030207b02fb2410972736dd23d01f06ff1c1d5542cce3fb75bd9a0d8e9de5c3781fa1b6e82221f1c46954daf6cc50d9ca090979a3d5201adb7b6ddb615bf16a3e460cc52bca557e7d65c', 'complainant_email': 'c30d040703028137c4681420682d6dd23d01e724a065dc5bc75ad19781e87476d9336b07f79a8442dcd4866331bc0a6342daa062ab63a30b39ae5b309161b23dac81e81fd6e045fee1f777736dcb', 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_municipality': None, 'complainant_ward': None, 'complainant_village': None, 'complainant_address': None}, results: [{'grievance_id': 'GR-20250918-KOJH-5DAA-B', 'complainant_id': 'CM-20250918-KOJH-0E3F-B', 'grievance_categories': '["Environmental - Air Pollution"]', 'grievance_categories_alternative': '["Environmental - Noise Pollution", "Safety - Road Safety Provisions", "Environmental - Drainage and Sewage Management"]', 'follow_up_question': '["How many people in your household are affected by the dust, and what health problems have you observed? Have you visited a hospital or doctor for this issue?"]', 'grievance_summary': 'Dust from road works is making my kids sick; I need to take them to the hospital.', 'grievance_description': 'dust everywhere my kids are sick I want to go to the hospital', 'grievance_claimed_amount': None, 'grievance_location': None, 'language_code': 'en', 'grievance_classification_status': 'pending', 'grievance_creation_date': datetime.datetime(2025, 9, 18, 9, 20, 26, 23988, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'grievance_modification_date': datetime.datetime(2025, 9, 18, 9, 20, 52, 55343, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'is_temporary': True, 'source': 'bot', 'complainant_full_name': 'c30d04070302365167992bf7938c7fd23d01bed01c40c3fd5a89bb113e08cb9640f2b38880bb682d010d1193251768c91936d02780849144ca577a9df1f850b67eca633baa29a53eb3679324888e', 'complainant_phone': 'c30d0407030207b02fb2410972736dd23d01f06ff1c1d5542cce3fb75bd9a0d8e9de5c3781fa1b6e82221f1c46954daf6cc50d9ca090979a3d5201adb7b6ddb615bf16a3e460cc52bca557e7d65c', 'complainant_email': 'c30d040703028137c4681420682d6dd23d01e724a065dc5bc75ad19781e87476d9336b07f79a8442dcd4866331bc0a6342daa062ab63a30b39ae5b309161b23dac81e81fd6e045fee1f777736dcb', 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_municipality': None, 'complainant_ward': None, 'complainant_village': None, 'complainant_address': None}]
2025-09-18 09:20:52,145 - db_manager - INFO - update_complainant: Updating complainant with ID: CM-20250918-KOJH-0E3F-B
2025-09-18 09:20:52,145 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 09:20:52,149 - db_manager - INFO - Starting database transaction
2025-09-18 09:20:52,150 - db_manager - INFO - Executing encrypt_field: SELECT encode(pgp_sym_encrypt(%s, %s), 'hex') AS encrypted...
2025-09-18 09:20:52,151 - db_manager - INFO - encrypt_field completed in 0.01s. Rows: 1
2025-09-18 09:20:52,151 - db_manager - INFO - Transaction committed successfully
2025-09-18 09:20:52,151 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 09:20:52,151 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 09:20:52,156 - db_manager - INFO - Starting database transaction
2025-09-18 09:20:52,156 - db_manager - INFO - Executing encrypt_field: SELECT encode(pgp_sym_encrypt(%s, %s), 'hex') AS encrypted...
2025-09-18 09:20:52,157 - db_manager - INFO - encrypt_field completed in 0.01s. Rows: 1
2025-09-18 09:20:52,157 - db_manager - INFO - Transaction committed successfully
2025-09-18 09:20:52,157 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 09:20:52,158 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 09:20:52,162 - db_manager - INFO - Starting database transaction
2025-09-18 09:20:52,162 - db_manager - INFO - Executing encrypt_field: SELECT encode(pgp_sym_encrypt(%s, %s), 'hex') AS encrypted...
2025-09-18 09:20:52,163 - db_manager - INFO - encrypt_field completed in 0.01s. Rows: 1
2025-09-18 09:20:52,163 - db_manager - INFO - Transaction committed successfully
2025-09-18 09:20:52,163 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 09:20:52,164 - db_manager - DEBUG - encrypted phone number Not provided at encrypt_complainant_data: c30d040703028aa24b3549af44c27cd23d01a5e5be9b413b686a0ce73def4763c6e8eb56264499b50ade0a66c9caac7ee31146b884e35c903cdb8fce0b230df75ef04676639815040ea440ffe590
2025-09-18 09:20:52,164 - db_manager - DEBUG - phone number Not provided hashed to d83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f at hash_sensitive_data
2025-09-18 09:20:52,164 - db_manager - DEBUG - encrypted and hashed data at encrypt_and_hash_sensitive_data: {'complainant_full_name': 'c30d04070302859c887410eceb0b7bd23d015ddb3683a152cadb88a55bd09b601a73102993849b518cade3dff7f22b549d987e29f52fb8ffd17bcfca2c3efcd6a803c4e2623d3c50d426b85a0263', 'complainant_phone': 'c30d040703028aa24b3549af44c27cd23d01a5e5be9b413b686a0ce73def4763c6e8eb56264499b50ade0a66c9caac7ee31146b884e35c903cdb8fce0b230df75ef04676639815040ea440ffe590', 'complainant_email': 'c30d040703024799dd54eff680c664d23d0119c03bf0a426f020dc508b8b149ae3946b2e444b6813f536b5ae4ff54bfddcc9451ad76884a783f489ccf4389103e18f8cf15eeb68888cf5f0bf961d', 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_full_name_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'complainant_email_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'complainant_phone_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f'}
2025-09-18 09:20:52,164 - db_manager - DEBUG - encrypted_data at update_complainant: {'complainant_full_name': 'c30d04070302859c887410eceb0b7bd23d015ddb3683a152cadb88a55bd09b601a73102993849b518cade3dff7f22b549d987e29f52fb8ffd17bcfca2c3efcd6a803c4e2623d3c50d426b85a0263', 'complainant_phone': 'c30d040703028aa24b3549af44c27cd23d01a5e5be9b413b686a0ce73def4763c6e8eb56264499b50ade0a66c9caac7ee31146b884e35c903cdb8fce0b230df75ef04676639815040ea440ffe590', 'complainant_email': 'c30d040703024799dd54eff680c664d23d0119c03bf0a426f020dc508b8b149ae3946b2e444b6813f536b5ae4ff54bfddcc9451ad76884a783f489ccf4389103e18f8cf15eeb68888cf5f0bf961d', 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_full_name_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'complainant_email_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'complainant_phone_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f'}
2025-09-18 09:20:52,164 - db_manager - DEBUG - execute_update values: ('c30d04070302859c887410eceb0b7bd23d015ddb3683a152cadb88a55bd09b601a73102993849b518cade3dff7f22b549d987e29f52fb8ffd17bcfca2c3efcd6a803c4e2623d3c50d426b85a0263', 'c30d040703028aa24b3549af44c27cd23d01a5e5be9b413b686a0ce73def4763c6e8eb56264499b50ade0a66c9caac7ee31146b884e35c903cdb8fce0b230df75ef04676639815040ea440ffe590', 'c30d040703024799dd54eff680c664d23d0119c03bf0a426f020dc508b8b149ae3946b2e444b6813f536b5ae4ff54bfddcc9451ad76884a783f489ccf4389103e18f8cf15eeb68888cf5f0bf961d', 'Koshi', 'Jhapa', 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'CM-20250918-KOJH-0E3F-B')
2025-09-18 09:20:52,164 - db_manager - DEBUG - execute_update query: UPDATE complainants SET complainant_full_name = %s, complainant_phone = %s, complainant_email = %s, complainant_province = %s, complainant_district = %s, complainant_full_name_hash = %s, complainant_email_hash = %s, complainant_phone_hash = %s WHERE complainant_id = %s
2025-09-18 09:20:52,164 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 09:20:52,169 - db_manager - INFO - Starting database transaction
2025-09-18 09:20:52,169 - db_manager - INFO - execute_update: Executing update query: UPDATE complainants SET complainant_full_name = %s, complainant_phone = %s, complainant_email = %s, ...
2025-09-18 09:20:52,170 - db_manager - INFO - execute_update: Update completed in 0.01s. Affected rows: 1
2025-09-18 09:20:52,172 - db_manager - INFO - Transaction committed successfully
2025-09-18 09:20:52,173 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 09:20:52,173 - db_manager - INFO - Complainant updated in db: CM-20250918-KOJH-0E3F-B
2025-09-18 09:20:52,173 - db_manager - INFO - update_grievance: Updating grievance with ID: GR-20250918-KOJH-5DAA-B
2025-09-18 09:20:52,173 - db_manager - DEBUG - execute_update values: ('["Environmental - Air Pollution"]', '["Environmental - Noise Pollution", "Safety - Road Safety Provisions", "Environmental - Drainage and Sewage Management"]', 'Not provided', 'dust everywhere my kids are sick I want to go to the hospital', 'GR-20250918-KOJH-5DAA-B')
2025-09-18 09:20:52,173 - db_manager - DEBUG - execute_update query: 
                    UPDATE grievances 
                    SET grievance_categories = %s, grievance_categories_alternative = %s, grievance_summary = %s, grievance_description = %s, grievance_modification_date = CURRENT_TIMESTAMP
                    WHERE grievance_id = %s
                    RETURNING grievance_id
                
2025-09-18 09:20:52,173 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 09:20:52,178 - db_manager - INFO - Starting database transaction
2025-09-18 09:20:52,178 - db_manager - INFO - execute_update: Executing update query: 
                    UPDATE grievances 
                    SET grievance_categories = %s, grievance...
2025-09-18 09:20:52,179 - db_manager - INFO - execute_update: Update completed in 0.01s. Affected rows: 1
2025-09-18 09:20:52,181 - db_manager - INFO - Transaction committed successfully
2025-09-18 09:20:52,181 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 09:20:52,181 - db_manager - INFO - update_grievance: Updated grievance with ID: GR-20250918-KOJH-5DAA-B, rows affected: 1
2025-09-18 09:20:52,181 - db_manager - INFO - Grievance updated in db: GR-20250918-KOJH-5DAA-B
2025-09-18 09:45:35,255 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-18 09:45:35,256 - db_manager - INFO - Database manager initialized successfully
2025-09-18 09:45:35,256 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-18 09:45:35,256 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-18 09:45:35,256 - db_manager - INFO - Database manager initialized successfully
2025-09-18 09:45:35,256 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-18 09:45:35,256 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-18 09:45:35,257 - db_manager - INFO - Database manager initialized successfully
2025-09-18 09:45:35,257 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-18 09:45:35,257 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-18 09:45:35,257 - db_manager - INFO - Database manager initialized successfully
2025-09-18 09:45:35,257 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-18 09:45:35,257 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-18 09:45:35,257 - db_manager - INFO - Database manager initialized successfully
2025-09-18 09:45:35,257 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-18 09:45:35,257 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-18 09:45:35,257 - db_manager - INFO - Database manager initialized successfully
2025-09-18 09:45:35,257 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-18 09:45:35,257 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-18 09:45:35,257 - db_manager - INFO - Database manager initialized successfully
2025-09-18 09:45:35,257 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-18 09:45:35,257 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-18 09:45:35,257 - db_manager - INFO - Database manager initialized successfully
2025-09-18 09:45:35,257 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-18 09:45:35,257 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-18 09:45:35,257 - db_manager - INFO - Database manager initialized successfully
2025-09-18 09:45:35,257 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-18 09:45:35,258 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-18 09:45:35,258 - db_manager - INFO - Database manager initialized successfully
2025-09-18 09:45:35,258 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-18 09:46:30,354 - db_manager - INFO - create_complainant: Creating complainant with ID: CM-20250918-KOJH-1465-B
2025-09-18 09:46:30,354 - db_manager - DEBUG - encrypted and hashed data at encrypt_and_hash_sensitive_data: {'complainant_id': 'CM-20250918-KOJH-1465-B', 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_unique_id': 'CM-20250918-KOJH-1465-B'}
2025-09-18 09:46:30,355 - db_manager - DEBUG - query_keys at generate_query_string: dict_keys(['complainant_id', 'complainant_province', 'complainant_district', 'complainant_unique_id'])
2025-09-18 09:46:30,355 - db_manager - DEBUG - Generated query: INSERT INTO complainants (complainant_id, complainant_province, complainant_district, complainant_unique_id) VALUES (%s, %s, %s, %s)
2025-09-18 09:46:30,355 - db_manager - DEBUG - len of query_keys: 4
2025-09-18 09:46:30,356 - db_manager - DEBUG - Generated query: INSERT INTO complainants (complainant_id, complainant_province, complainant_district, complainant_unique_id) VALUES (%s, %s, %s, %s)
2025-09-18 09:46:30,356 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 09:46:30,362 - db_manager - INFO - Starting database transaction
2025-09-18 09:46:30,365 - db_manager - INFO - Transaction committed successfully
2025-09-18 09:46:30,365 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 09:46:30,365 - db_manager - INFO - create_complainant: Successfully created complainant with ID: CM-20250918-KOJH-1465-B
2025-09-18 09:46:30,365 - db_manager - INFO - create_grievance: Creating grievance with data: {'grievance_id': 'GR-20250918-KOJH-917B-B', 'complainant_id': 'CM-20250918-KOJH-1465-B', 'grievance_description': 'dust everywhere in my house\nkids are coughing hard', 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_office': None, 'source': 'bot', 'complainant_unique_id': 'CM-20250918-KOJH-1465-B'}
2025-09-18 09:46:30,366 - db_manager - INFO - create_grievance: Creating grievance with ID: GR-20250918-KOJH-917B-B
2025-09-18 09:46:30,366 - db_manager - INFO - create_grievance: Creating grievance with allowed fields: ['grievance_id', 'complainant_id', 'grievance_categories', 'grievance_categories_alternative', 'follow_up_question', 'grievance_summary', 'grievance_description', 'grievance_claimed_amount', 'grievance_location', 'is_temporary', 'source', 'language_code', 'grievance_classification_status']
2025-09-18 09:46:30,366 - db_manager - DEBUG - query_keys at generate_query_string: dict_keys(['grievance_id', 'complainant_id', 'grievance_description', 'source'])
2025-09-18 09:46:30,366 - db_manager - DEBUG - Generated query: INSERT INTO grievances (grievance_id, complainant_id, grievance_description, source) VALUES (%s, %s, %s, %s) RETURNING grievance_id
2025-09-18 09:46:30,366 - db_manager - DEBUG - len of query_keys: 4
2025-09-18 09:46:30,366 - db_manager - DEBUG - Generated query: INSERT INTO grievances (grievance_id, complainant_id, grievance_description, source) VALUES (%s, %s, %s, %s) RETURNING grievance_id
2025-09-18 09:46:30,366 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 09:46:30,372 - db_manager - INFO - Starting database transaction
2025-09-18 09:46:30,376 - db_manager - INFO - Transaction committed successfully
2025-09-18 09:46:30,377 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 09:46:30,377 - db_manager - INFO - create_grievance: Successfully created grievance with ID: GR-20250918-KOJH-917B-B
2025-09-18 09:47:14,128 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 09:47:14,135 - db_manager - INFO - Starting database transaction
2025-09-18 09:47:14,136 - db_manager - INFO - Executing get_complainant_by_id: 
            SELECT complainant_id, complainant_unique_id, complainant_full_name,    complainant_pho...
2025-09-18 09:47:14,137 - db_manager - INFO - get_complainant_by_id completed in 0.01s. Rows: 1
2025-09-18 09:47:14,137 - db_manager - INFO - Transaction committed successfully
2025-09-18 09:47:14,137 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 09:47:14,137 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 09:47:14,143 - db_manager - INFO - Starting database transaction
2025-09-18 09:47:14,143 - db_manager - INFO - Executing get_grievance_by_id: 
                SELECT g.*, c.complainant_full_name, c.complainant_phone, c.complainant_email,
    ...
2025-09-18 09:47:14,144 - db_manager - INFO - get_grievance_by_id completed in 0.01s. Rows: 1
2025-09-18 09:47:14,145 - db_manager - INFO - Transaction committed successfully
2025-09-18 09:47:14,145 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 09:47:14,145 - db_manager - DEBUG - get_grievance_by_id: grievance_id: {'grievance_id': 'GR-20250918-KOJH-917B-B', 'complainant_id': 'CM-20250918-KOJH-1465-B', 'grievance_categories': ['Environmental - Air Pollution'], 'grievance_categories_alternative': ['Environmental - Noise Pollution'], 'follow_up_question': ['How many people are affected by the dust and coughing, and for how long has dust entered your home?'], 'grievance_summary': 'Dust from road works is entering my house, and my kids are coughing hard.', 'grievance_description': 'dust everywhere in my house\nkids are coughing hard', 'grievance_claimed_amount': None, 'grievance_location': None, 'language_code': 'en', 'grievance_classification_status': 'pending', 'grievance_creation_date': datetime.datetime(2025, 9, 18, 9, 46, 30, 372537, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'grievance_modification_date': datetime.datetime(2025, 9, 18, 9, 46, 41, 979311, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'is_temporary': True, 'source': 'bot', 'complainant_full_name': None, 'complainant_phone': None, 'complainant_email': None, 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_municipality': None, 'complainant_ward': None, 'complainant_village': None, 'complainant_address': None}, results: [{'grievance_id': 'GR-20250918-KOJH-917B-B', 'complainant_id': 'CM-20250918-KOJH-1465-B', 'grievance_categories': '["Environmental - Air Pollution"]', 'grievance_categories_alternative': '["Environmental - Noise Pollution"]', 'follow_up_question': '["How many people are affected by the dust and coughing, and for how long has dust entered your home?"]', 'grievance_summary': 'Dust from road works is entering my house, and my kids are coughing hard.', 'grievance_description': 'dust everywhere in my house\nkids are coughing hard', 'grievance_claimed_amount': None, 'grievance_location': None, 'language_code': 'en', 'grievance_classification_status': 'pending', 'grievance_creation_date': datetime.datetime(2025, 9, 18, 9, 46, 30, 372537, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'grievance_modification_date': datetime.datetime(2025, 9, 18, 9, 46, 41, 979311, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'is_temporary': True, 'source': 'bot', 'complainant_full_name': None, 'complainant_phone': None, 'complainant_email': None, 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_municipality': None, 'complainant_ward': None, 'complainant_village': None, 'complainant_address': None}]
2025-09-18 09:47:14,145 - db_manager - INFO - update_complainant: Updating complainant with ID: CM-20250918-KOJH-1465-B
2025-09-18 09:47:14,145 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 09:47:14,150 - db_manager - INFO - Starting database transaction
2025-09-18 09:47:14,151 - db_manager - INFO - Executing encrypt_field: SELECT encode(pgp_sym_encrypt(%s, %s), 'hex') AS encrypted...
2025-09-18 09:47:14,153 - db_manager - INFO - encrypt_field completed in 0.01s. Rows: 1
2025-09-18 09:47:14,153 - db_manager - INFO - Transaction committed successfully
2025-09-18 09:47:14,153 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 09:47:14,153 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 09:47:14,159 - db_manager - INFO - Starting database transaction
2025-09-18 09:47:14,159 - db_manager - INFO - Executing encrypt_field: SELECT encode(pgp_sym_encrypt(%s, %s), 'hex') AS encrypted...
2025-09-18 09:47:14,160 - db_manager - INFO - encrypt_field completed in 0.01s. Rows: 1
2025-09-18 09:47:14,160 - db_manager - INFO - Transaction committed successfully
2025-09-18 09:47:14,160 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 09:47:14,161 - db_manager - DEBUG - encrypted phone number +9779876543219 at encrypt_complainant_data: c30d040703020bf5b4155d31ae337fd23f01521089dc17de25f1f3165d60711442e8dd6653f9d7f4417a3d601a086b50f00bf1bfe43fd9035759a5eb9d2a987c245244ef6f5ee755a47c3fa7c6261b6c
2025-09-18 09:47:14,161 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 09:47:14,167 - db_manager - INFO - Starting database transaction
2025-09-18 09:47:14,167 - db_manager - INFO - Executing encrypt_field: SELECT encode(pgp_sym_encrypt(%s, %s), 'hex') AS encrypted...
2025-09-18 09:47:14,168 - db_manager - INFO - encrypt_field completed in 0.01s. Rows: 1
2025-09-18 09:47:14,168 - db_manager - INFO - Transaction committed successfully
2025-09-18 09:47:14,168 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 09:47:14,169 - db_manager - DEBUG - phone number +9779876543219 hashed to cf42591c8ae28c8a9db30d058769bfba382f6eb81a5fe2cc3a94a43243277a6c at hash_sensitive_data
2025-09-18 09:47:14,169 - db_manager - DEBUG - encrypted and hashed data at encrypt_and_hash_sensitive_data: {'complainant_full_name': 'c30d04070302796fe83b5a1b016670d23801081c3ec6d81d853536c75a0ff3f56251cca3014538a12b3194556b8e8c386dff0e8d77bf5383413782549c01ca2cfeb9139cf6e6d7111b', 'complainant_phone': 'c30d040703020bf5b4155d31ae337fd23f01521089dc17de25f1f3165d60711442e8dd6653f9d7f4417a3d601a086b50f00bf1bfe43fd9035759a5eb9d2a987c245244ef6f5ee755a47c3fa7c6261b6c', 'complainant_email': 'c30d04070302bf9ba0b16b0019566bd23d015948182a34c60900697ffcf2a9c5e300283e5d68c7b88f029732a302879f10535a2e3e56d9eb8bfbf56d8dc1aed0fe3eeeb69c53b830b104b7d7e72f', 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_full_name_hash': '05e7c72c5cc8d12ebec4fa3d9b3feaf503fe7a6372d29a7de3047cacc6f2ae39', 'complainant_phone_hash': 'cf42591c8ae28c8a9db30d058769bfba382f6eb81a5fe2cc3a94a43243277a6c', 'complainant_email_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f'}
2025-09-18 09:47:14,169 - db_manager - DEBUG - encrypted_data at update_complainant: {'complainant_full_name': 'c30d04070302796fe83b5a1b016670d23801081c3ec6d81d853536c75a0ff3f56251cca3014538a12b3194556b8e8c386dff0e8d77bf5383413782549c01ca2cfeb9139cf6e6d7111b', 'complainant_phone': 'c30d040703020bf5b4155d31ae337fd23f01521089dc17de25f1f3165d60711442e8dd6653f9d7f4417a3d601a086b50f00bf1bfe43fd9035759a5eb9d2a987c245244ef6f5ee755a47c3fa7c6261b6c', 'complainant_email': 'c30d04070302bf9ba0b16b0019566bd23d015948182a34c60900697ffcf2a9c5e300283e5d68c7b88f029732a302879f10535a2e3e56d9eb8bfbf56d8dc1aed0fe3eeeb69c53b830b104b7d7e72f', 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_full_name_hash': '05e7c72c5cc8d12ebec4fa3d9b3feaf503fe7a6372d29a7de3047cacc6f2ae39', 'complainant_phone_hash': 'cf42591c8ae28c8a9db30d058769bfba382f6eb81a5fe2cc3a94a43243277a6c', 'complainant_email_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f'}
2025-09-18 09:47:14,169 - db_manager - DEBUG - execute_update values: ('c30d04070302796fe83b5a1b016670d23801081c3ec6d81d853536c75a0ff3f56251cca3014538a12b3194556b8e8c386dff0e8d77bf5383413782549c01ca2cfeb9139cf6e6d7111b', 'c30d040703020bf5b4155d31ae337fd23f01521089dc17de25f1f3165d60711442e8dd6653f9d7f4417a3d601a086b50f00bf1bfe43fd9035759a5eb9d2a987c245244ef6f5ee755a47c3fa7c6261b6c', 'c30d04070302bf9ba0b16b0019566bd23d015948182a34c60900697ffcf2a9c5e300283e5d68c7b88f029732a302879f10535a2e3e56d9eb8bfbf56d8dc1aed0fe3eeeb69c53b830b104b7d7e72f', 'Koshi', 'Jhapa', '05e7c72c5cc8d12ebec4fa3d9b3feaf503fe7a6372d29a7de3047cacc6f2ae39', 'cf42591c8ae28c8a9db30d058769bfba382f6eb81a5fe2cc3a94a43243277a6c', 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'CM-20250918-KOJH-1465-B')
2025-09-18 09:47:14,169 - db_manager - DEBUG - execute_update query: UPDATE complainants SET complainant_full_name = %s, complainant_phone = %s, complainant_email = %s, complainant_province = %s, complainant_district = %s, complainant_full_name_hash = %s, complainant_phone_hash = %s, complainant_email_hash = %s WHERE complainant_id = %s
2025-09-18 09:47:14,169 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 09:47:14,174 - db_manager - INFO - Starting database transaction
2025-09-18 09:47:14,175 - db_manager - INFO - execute_update: Executing update query: UPDATE complainants SET complainant_full_name = %s, complainant_phone = %s, complainant_email = %s, ...
2025-09-18 09:47:14,177 - db_manager - INFO - execute_update: Update completed in 0.01s. Affected rows: 1
2025-09-18 09:47:14,179 - db_manager - INFO - Transaction committed successfully
2025-09-18 09:47:14,179 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 09:47:14,179 - db_manager - INFO - Complainant updated in db: CM-20250918-KOJH-1465-B
2025-09-18 09:47:14,179 - db_manager - INFO - update_grievance: Updating grievance with ID: GR-20250918-KOJH-917B-B
2025-09-18 09:47:14,180 - db_manager - DEBUG - execute_update values: ('dust everywhere in my house\nkids are coughing hard', 'GR-20250918-KOJH-917B-B')
2025-09-18 09:47:14,180 - db_manager - DEBUG - execute_update query: 
                    UPDATE grievances 
                    SET grievance_description = %s, grievance_modification_date = CURRENT_TIMESTAMP
                    WHERE grievance_id = %s
                    RETURNING grievance_id
                
2025-09-18 09:47:14,180 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 09:47:14,184 - db_manager - INFO - Starting database transaction
2025-09-18 09:47:14,185 - db_manager - INFO - execute_update: Executing update query: 
                    UPDATE grievances 
                    SET grievance_description = %s, grievanc...
2025-09-18 09:47:14,186 - db_manager - INFO - execute_update: Update completed in 0.01s. Affected rows: 1
2025-09-18 09:47:14,187 - db_manager - INFO - Transaction committed successfully
2025-09-18 09:47:14,187 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 09:47:14,187 - db_manager - INFO - update_grievance: Updated grievance with ID: GR-20250918-KOJH-917B-B, rows affected: 1
2025-09-18 09:47:14,187 - db_manager - INFO - Grievance updated in db: GR-20250918-KOJH-917B-B
2025-09-18 09:47:14,188 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 09:47:14,192 - db_manager - INFO - Starting database transaction
2025-09-18 09:47:14,192 - db_manager - INFO - Executing get_grievance_files: 
            SELECT file_id, file_name, file_type, file_size, upload_timestamp
            FROM file...
2025-09-18 09:47:14,194 - db_manager - INFO - get_grievance_files completed in 0.01s. Rows: 0
2025-09-18 09:47:14,194 - db_manager - INFO - Transaction committed successfully
2025-09-18 09:47:14,194 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 09:47:14,194 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 09:47:14,199 - db_manager - INFO - Starting database transaction
2025-09-18 09:47:14,199 - db_manager - INFO - Executing get_grievance_files: 
            SELECT file_id, file_name, file_type, file_size, upload_timestamp
            FROM file...
2025-09-18 09:47:14,200 - db_manager - INFO - get_grievance_files completed in 0.01s. Rows: 0
2025-09-18 09:47:14,200 - db_manager - INFO - Transaction committed successfully
2025-09-18 09:47:14,200 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 09:47:14,247 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 09:47:14,253 - db_manager - INFO - Starting database transaction
2025-09-18 09:47:14,253 - db_manager - INFO - Executing get_grievance_by_id: 
                SELECT g.*, c.complainant_full_name, c.complainant_phone, c.complainant_email,
    ...
2025-09-18 09:47:14,254 - db_manager - INFO - get_grievance_by_id completed in 0.01s. Rows: 1
2025-09-18 09:47:14,255 - db_manager - INFO - Transaction committed successfully
2025-09-18 09:47:14,255 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 09:47:14,255 - db_manager - DEBUG - get_grievance_by_id: grievance_id: {'grievance_id': 'GR-20250918-KOJH-917B-B', 'complainant_id': 'CM-20250918-KOJH-1465-B', 'grievance_categories': ['Environmental - Air Pollution'], 'grievance_categories_alternative': ['Environmental - Noise Pollution'], 'follow_up_question': ['How many people are affected by the dust and coughing, and for how long has dust entered your home?'], 'grievance_summary': 'Dust from road works is entering my house, and my kids are coughing hard.', 'grievance_description': 'dust everywhere in my house\nkids are coughing hard', 'grievance_claimed_amount': None, 'grievance_location': None, 'language_code': 'en', 'grievance_classification_status': 'pending', 'grievance_creation_date': datetime.datetime(2025, 9, 18, 9, 46, 30, 372537, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'grievance_modification_date': datetime.datetime(2025, 9, 18, 9, 47, 14, 185191, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'is_temporary': True, 'source': 'bot', 'complainant_full_name': 'c30d04070302796fe83b5a1b016670d23801081c3ec6d81d853536c75a0ff3f56251cca3014538a12b3194556b8e8c386dff0e8d77bf5383413782549c01ca2cfeb9139cf6e6d7111b', 'complainant_phone': 'c30d040703020bf5b4155d31ae337fd23f01521089dc17de25f1f3165d60711442e8dd6653f9d7f4417a3d601a086b50f00bf1bfe43fd9035759a5eb9d2a987c245244ef6f5ee755a47c3fa7c6261b6c', 'complainant_email': 'c30d04070302bf9ba0b16b0019566bd23d015948182a34c60900697ffcf2a9c5e300283e5d68c7b88f029732a302879f10535a2e3e56d9eb8bfbf56d8dc1aed0fe3eeeb69c53b830b104b7d7e72f', 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_municipality': None, 'complainant_ward': None, 'complainant_village': None, 'complainant_address': None}, results: [{'grievance_id': 'GR-20250918-KOJH-917B-B', 'complainant_id': 'CM-20250918-KOJH-1465-B', 'grievance_categories': '["Environmental - Air Pollution"]', 'grievance_categories_alternative': '["Environmental - Noise Pollution"]', 'follow_up_question': '["How many people are affected by the dust and coughing, and for how long has dust entered your home?"]', 'grievance_summary': 'Dust from road works is entering my house, and my kids are coughing hard.', 'grievance_description': 'dust everywhere in my house\nkids are coughing hard', 'grievance_claimed_amount': None, 'grievance_location': None, 'language_code': 'en', 'grievance_classification_status': 'pending', 'grievance_creation_date': datetime.datetime(2025, 9, 18, 9, 46, 30, 372537, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'grievance_modification_date': datetime.datetime(2025, 9, 18, 9, 47, 14, 185191, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'is_temporary': True, 'source': 'bot', 'complainant_full_name': 'c30d04070302796fe83b5a1b016670d23801081c3ec6d81d853536c75a0ff3f56251cca3014538a12b3194556b8e8c386dff0e8d77bf5383413782549c01ca2cfeb9139cf6e6d7111b', 'complainant_phone': 'c30d040703020bf5b4155d31ae337fd23f01521089dc17de25f1f3165d60711442e8dd6653f9d7f4417a3d601a086b50f00bf1bfe43fd9035759a5eb9d2a987c245244ef6f5ee755a47c3fa7c6261b6c', 'complainant_email': 'c30d04070302bf9ba0b16b0019566bd23d015948182a34c60900697ffcf2a9c5e300283e5d68c7b88f029732a302879f10535a2e3e56d9eb8bfbf56d8dc1aed0fe3eeeb69c53b830b104b7d7e72f', 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_municipality': None, 'complainant_ward': None, 'complainant_village': None, 'complainant_address': None}]
2025-09-18 09:47:17,802 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 09:47:17,808 - db_manager - INFO - Starting database transaction
2025-09-18 09:47:17,808 - db_manager - INFO - Executing get_complainant_id_from_grievance_id: 
            SELECT complainant_id
            FROM grievances
            WHERE grievance_id = %s
 ...
2025-09-18 09:47:17,809 - db_manager - INFO - get_complainant_id_from_grievance_id completed in 0.01s. Rows: 1
2025-09-18 09:47:17,809 - db_manager - INFO - Transaction committed successfully
2025-09-18 09:47:17,809 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 09:47:17,809 - db_manager - INFO - update_complainant: Updating complainant with ID: CM-20250918-KOJH-1465-B
2025-09-18 09:47:17,810 - db_manager - DEBUG - encrypted and hashed data at encrypt_and_hash_sensitive_data: {}
2025-09-18 09:47:17,810 - db_manager - DEBUG - encrypted_data at update_complainant: {}
2025-09-18 09:47:17,810 - db_manager - DEBUG - No complainant field to update
2025-09-18 09:47:17,810 - db_manager - INFO - Complainant updated in db: GR-20250918-KOJH-917B-B
2025-09-18 09:47:17,810 - db_manager - INFO - update_grievance: Updating grievance with ID: GR-20250918-KOJH-917B-B
2025-09-18 09:47:17,810 - db_manager - DEBUG - execute_update values: ('["Environmental - Air Pollution"]', 'GR-20250918-KOJH-917B-B')
2025-09-18 09:47:17,810 - db_manager - DEBUG - execute_update query: 
                    UPDATE grievances 
                    SET grievance_categories = %s, grievance_modification_date = CURRENT_TIMESTAMP
                    WHERE grievance_id = %s
                    RETURNING grievance_id
                
2025-09-18 09:47:17,810 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 09:47:17,815 - db_manager - INFO - Starting database transaction
2025-09-18 09:47:17,815 - db_manager - INFO - execute_update: Executing update query: 
                    UPDATE grievances 
                    SET grievance_categories = %s, grievance...
2025-09-18 09:47:17,816 - db_manager - INFO - execute_update: Update completed in 0.01s. Affected rows: 1
2025-09-18 09:47:17,820 - db_manager - INFO - Transaction committed successfully
2025-09-18 09:47:17,820 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 09:47:17,820 - db_manager - INFO - update_grievance: Updated grievance with ID: GR-20250918-KOJH-917B-B, rows affected: 1
2025-09-18 09:47:17,820 - db_manager - INFO - Grievance updated in db: GR-20250918-KOJH-917B-B
2025-09-18 09:47:17,869 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 09:47:17,874 - db_manager - INFO - Starting database transaction
2025-09-18 09:47:17,874 - db_manager - INFO - Executing get_grievance_files: 
            SELECT file_id, file_name, file_type, file_size, upload_timestamp
            FROM file...
2025-09-18 09:47:17,875 - db_manager - INFO - get_grievance_files completed in 0.01s. Rows: 0
2025-09-18 09:47:17,876 - db_manager - INFO - Transaction committed successfully
2025-09-18 09:47:17,876 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 09:47:17,876 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 09:47:17,881 - db_manager - INFO - Starting database transaction
2025-09-18 09:47:17,881 - db_manager - INFO - Executing get_complainant_by_id: 
            SELECT complainant_id, complainant_unique_id, complainant_full_name,    complainant_pho...
2025-09-18 09:47:17,882 - db_manager - INFO - get_complainant_by_id completed in 0.01s. Rows: 1
2025-09-18 09:47:17,882 - db_manager - INFO - Transaction committed successfully
2025-09-18 09:47:17,883 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 09:47:17,883 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 09:47:17,887 - db_manager - INFO - Starting database transaction
2025-09-18 09:47:17,887 - db_manager - INFO - Executing decrypt_field: SELECT pgp_sym_decrypt(decode(%s, 'hex'), %s) AS decrypted...
2025-09-18 09:47:17,888 - db_manager - INFO - decrypt_field completed in 0.01s. Rows: 1
2025-09-18 09:47:17,889 - db_manager - INFO - Transaction committed successfully
2025-09-18 09:47:17,889 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 09:47:17,889 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 09:47:17,893 - db_manager - INFO - Starting database transaction
2025-09-18 09:47:17,893 - db_manager - INFO - Executing decrypt_field: SELECT pgp_sym_decrypt(decode(%s, 'hex'), %s) AS decrypted...
2025-09-18 09:47:17,895 - db_manager - INFO - decrypt_field completed in 0.01s. Rows: 1
2025-09-18 09:47:17,895 - db_manager - INFO - Transaction committed successfully
2025-09-18 09:47:17,895 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 09:47:17,895 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 09:47:17,900 - db_manager - INFO - Starting database transaction
2025-09-18 09:47:17,900 - db_manager - INFO - Executing decrypt_field: SELECT pgp_sym_decrypt(decode(%s, 'hex'), %s) AS decrypted...
2025-09-18 09:47:17,901 - db_manager - INFO - decrypt_field completed in 0.01s. Rows: 1
2025-09-18 09:47:17,902 - db_manager - INFO - Transaction committed successfully
2025-09-18 09:47:17,902 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 09:47:17,902 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 09:47:17,907 - db_manager - INFO - Starting database transaction
2025-09-18 09:47:17,907 - db_manager - INFO - Executing get_grievance_by_id: 
                SELECT g.*, c.complainant_full_name, c.complainant_phone, c.complainant_email,
    ...
2025-09-18 09:47:17,908 - db_manager - INFO - get_grievance_by_id completed in 0.01s. Rows: 1
2025-09-18 09:47:17,908 - db_manager - INFO - Transaction committed successfully
2025-09-18 09:47:17,908 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 09:47:17,909 - db_manager - DEBUG - get_grievance_by_id: grievance_id: {'grievance_id': 'GR-20250918-KOJH-917B-B', 'complainant_id': 'CM-20250918-KOJH-1465-B', 'grievance_categories': ['Environmental - Air Pollution'], 'grievance_categories_alternative': ['Environmental - Noise Pollution'], 'follow_up_question': ['How many people are affected by the dust and coughing, and for how long has dust entered your home?'], 'grievance_summary': 'Dust from road works is entering my house, and my kids are coughing hard.', 'grievance_description': 'dust everywhere in my house\nkids are coughing hard', 'grievance_claimed_amount': None, 'grievance_location': None, 'language_code': 'en', 'grievance_classification_status': 'pending', 'grievance_creation_date': datetime.datetime(2025, 9, 18, 9, 46, 30, 372537, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'grievance_modification_date': datetime.datetime(2025, 9, 18, 9, 47, 17, 815583, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'is_temporary': True, 'source': 'bot', 'complainant_full_name': 'c30d04070302796fe83b5a1b016670d23801081c3ec6d81d853536c75a0ff3f56251cca3014538a12b3194556b8e8c386dff0e8d77bf5383413782549c01ca2cfeb9139cf6e6d7111b', 'complainant_phone': 'c30d040703020bf5b4155d31ae337fd23f01521089dc17de25f1f3165d60711442e8dd6653f9d7f4417a3d601a086b50f00bf1bfe43fd9035759a5eb9d2a987c245244ef6f5ee755a47c3fa7c6261b6c', 'complainant_email': 'c30d04070302bf9ba0b16b0019566bd23d015948182a34c60900697ffcf2a9c5e300283e5d68c7b88f029732a302879f10535a2e3e56d9eb8bfbf56d8dc1aed0fe3eeeb69c53b830b104b7d7e72f', 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_municipality': None, 'complainant_ward': None, 'complainant_village': None, 'complainant_address': None}, results: [{'grievance_id': 'GR-20250918-KOJH-917B-B', 'complainant_id': 'CM-20250918-KOJH-1465-B', 'grievance_categories': '["Environmental - Air Pollution"]', 'grievance_categories_alternative': '["Environmental - Noise Pollution"]', 'follow_up_question': '["How many people are affected by the dust and coughing, and for how long has dust entered your home?"]', 'grievance_summary': 'Dust from road works is entering my house, and my kids are coughing hard.', 'grievance_description': 'dust everywhere in my house\nkids are coughing hard', 'grievance_claimed_amount': None, 'grievance_location': None, 'language_code': 'en', 'grievance_classification_status': 'pending', 'grievance_creation_date': datetime.datetime(2025, 9, 18, 9, 46, 30, 372537, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'grievance_modification_date': datetime.datetime(2025, 9, 18, 9, 47, 17, 815583, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'is_temporary': True, 'source': 'bot', 'complainant_full_name': 'c30d04070302796fe83b5a1b016670d23801081c3ec6d81d853536c75a0ff3f56251cca3014538a12b3194556b8e8c386dff0e8d77bf5383413782549c01ca2cfeb9139cf6e6d7111b', 'complainant_phone': 'c30d040703020bf5b4155d31ae337fd23f01521089dc17de25f1f3165d60711442e8dd6653f9d7f4417a3d601a086b50f00bf1bfe43fd9035759a5eb9d2a987c245244ef6f5ee755a47c3fa7c6261b6c', 'complainant_email': 'c30d04070302bf9ba0b16b0019566bd23d015948182a34c60900697ffcf2a9c5e300283e5d68c7b88f029732a302879f10535a2e3e56d9eb8bfbf56d8dc1aed0fe3eeeb69c53b830b104b7d7e72f', 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_municipality': None, 'complainant_ward': None, 'complainant_village': None, 'complainant_address': None}]
2025-09-18 09:47:17,909 - db_manager - INFO - update_complainant: Updating complainant with ID: CM-20250918-KOJH-1465-B
2025-09-18 09:47:17,909 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 09:47:17,914 - db_manager - INFO - Starting database transaction
2025-09-18 09:47:17,914 - db_manager - INFO - Executing encrypt_field: SELECT encode(pgp_sym_encrypt(%s, %s), 'hex') AS encrypted...
2025-09-18 09:47:17,915 - db_manager - INFO - encrypt_field completed in 0.01s. Rows: 1
2025-09-18 09:47:17,915 - db_manager - INFO - Transaction committed successfully
2025-09-18 09:47:17,915 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 09:47:17,915 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 09:47:17,920 - db_manager - INFO - Starting database transaction
2025-09-18 09:47:17,920 - db_manager - INFO - Executing encrypt_field: SELECT encode(pgp_sym_encrypt(%s, %s), 'hex') AS encrypted...
2025-09-18 09:47:17,921 - db_manager - INFO - encrypt_field completed in 0.01s. Rows: 1
2025-09-18 09:47:17,921 - db_manager - INFO - Transaction committed successfully
2025-09-18 09:47:17,921 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 09:47:17,921 - db_manager - DEBUG - encrypted phone number +9779876543219 at encrypt_complainant_data: c30d040703021cd4d5fef029694478d23f01ef61b0fc2bf769e710090ec10dcff428bb0f65f6f365eaf8fd35b65b04aabcc7da980ea912634087166929a6d3c9db0202e1025c32da6f7275014d790a6e
2025-09-18 09:47:17,921 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 09:47:17,926 - db_manager - INFO - Starting database transaction
2025-09-18 09:47:17,926 - db_manager - INFO - Executing encrypt_field: SELECT encode(pgp_sym_encrypt(%s, %s), 'hex') AS encrypted...
2025-09-18 09:47:17,927 - db_manager - INFO - encrypt_field completed in 0.01s. Rows: 1
2025-09-18 09:47:17,927 - db_manager - INFO - Transaction committed successfully
2025-09-18 09:47:17,928 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 09:47:17,928 - db_manager - DEBUG - phone number +9779876543219 hashed to cf42591c8ae28c8a9db30d058769bfba382f6eb81a5fe2cc3a94a43243277a6c at hash_sensitive_data
2025-09-18 09:47:17,928 - db_manager - DEBUG - encrypted and hashed data at encrypt_and_hash_sensitive_data: {'complainant_full_name': 'c30d0407030242cf3d9a12ff84a168d238019361d0b94766fc5d18120e12f11ef6faee34e381a0017155c0669580b7629a0bec0f5ede9a5c60ed1723a1f16de76063d5b8ca3f7a24d3', 'complainant_phone': 'c30d040703021cd4d5fef029694478d23f01ef61b0fc2bf769e710090ec10dcff428bb0f65f6f365eaf8fd35b65b04aabcc7da980ea912634087166929a6d3c9db0202e1025c32da6f7275014d790a6e', 'complainant_email': 'c30d04070302cec2b26da22cdbbe6ad23d019bf2009a91f0c58822aadd92d950f200d29be655eb24cc8b4285a33fea38ea801850b7e60206be39896345e9215fbde45d06a9754ffa9f45b93c2356', 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_full_name_hash': '05e7c72c5cc8d12ebec4fa3d9b3feaf503fe7a6372d29a7de3047cacc6f2ae39', 'complainant_phone_hash': 'cf42591c8ae28c8a9db30d058769bfba382f6eb81a5fe2cc3a94a43243277a6c', 'complainant_email_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f'}
2025-09-18 09:47:17,928 - db_manager - DEBUG - encrypted_data at update_complainant: {'complainant_full_name': 'c30d0407030242cf3d9a12ff84a168d238019361d0b94766fc5d18120e12f11ef6faee34e381a0017155c0669580b7629a0bec0f5ede9a5c60ed1723a1f16de76063d5b8ca3f7a24d3', 'complainant_phone': 'c30d040703021cd4d5fef029694478d23f01ef61b0fc2bf769e710090ec10dcff428bb0f65f6f365eaf8fd35b65b04aabcc7da980ea912634087166929a6d3c9db0202e1025c32da6f7275014d790a6e', 'complainant_email': 'c30d04070302cec2b26da22cdbbe6ad23d019bf2009a91f0c58822aadd92d950f200d29be655eb24cc8b4285a33fea38ea801850b7e60206be39896345e9215fbde45d06a9754ffa9f45b93c2356', 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_full_name_hash': '05e7c72c5cc8d12ebec4fa3d9b3feaf503fe7a6372d29a7de3047cacc6f2ae39', 'complainant_phone_hash': 'cf42591c8ae28c8a9db30d058769bfba382f6eb81a5fe2cc3a94a43243277a6c', 'complainant_email_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f'}
2025-09-18 09:47:17,928 - db_manager - DEBUG - execute_update values: ('c30d0407030242cf3d9a12ff84a168d238019361d0b94766fc5d18120e12f11ef6faee34e381a0017155c0669580b7629a0bec0f5ede9a5c60ed1723a1f16de76063d5b8ca3f7a24d3', 'c30d040703021cd4d5fef029694478d23f01ef61b0fc2bf769e710090ec10dcff428bb0f65f6f365eaf8fd35b65b04aabcc7da980ea912634087166929a6d3c9db0202e1025c32da6f7275014d790a6e', 'c30d04070302cec2b26da22cdbbe6ad23d019bf2009a91f0c58822aadd92d950f200d29be655eb24cc8b4285a33fea38ea801850b7e60206be39896345e9215fbde45d06a9754ffa9f45b93c2356', 'Koshi', 'Jhapa', '05e7c72c5cc8d12ebec4fa3d9b3feaf503fe7a6372d29a7de3047cacc6f2ae39', 'cf42591c8ae28c8a9db30d058769bfba382f6eb81a5fe2cc3a94a43243277a6c', 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'CM-20250918-KOJH-1465-B')
2025-09-18 09:47:17,928 - db_manager - DEBUG - execute_update query: UPDATE complainants SET complainant_full_name = %s, complainant_phone = %s, complainant_email = %s, complainant_province = %s, complainant_district = %s, complainant_full_name_hash = %s, complainant_phone_hash = %s, complainant_email_hash = %s WHERE complainant_id = %s
2025-09-18 09:47:17,928 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 09:47:17,933 - db_manager - INFO - Starting database transaction
2025-09-18 09:47:17,933 - db_manager - INFO - execute_update: Executing update query: UPDATE complainants SET complainant_full_name = %s, complainant_phone = %s, complainant_email = %s, ...
2025-09-18 09:47:17,934 - db_manager - INFO - execute_update: Update completed in 0.01s. Affected rows: 1
2025-09-18 09:47:17,936 - db_manager - INFO - Transaction committed successfully
2025-09-18 09:47:17,936 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 09:47:17,936 - db_manager - INFO - Complainant updated in db: CM-20250918-KOJH-1465-B
2025-09-18 09:47:17,936 - db_manager - INFO - update_grievance: Updating grievance with ID: GR-20250918-KOJH-917B-B
2025-09-18 09:47:17,936 - db_manager - DEBUG - execute_update values: ('["Environmental - Air Pollution"]', 'Not provided', 'dust everywhere in my house\nkids are coughing hard', 'GR-20250918-KOJH-917B-B')
2025-09-18 09:47:17,936 - db_manager - DEBUG - execute_update query: 
                    UPDATE grievances 
                    SET grievance_categories = %s, grievance_summary = %s, grievance_description = %s, grievance_modification_date = CURRENT_TIMESTAMP
                    WHERE grievance_id = %s
                    RETURNING grievance_id
                
2025-09-18 09:47:17,936 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 09:47:17,942 - db_manager - INFO - Starting database transaction
2025-09-18 09:47:17,942 - db_manager - INFO - execute_update: Executing update query: 
                    UPDATE grievances 
                    SET grievance_categories = %s, grievance...
2025-09-18 09:47:17,944 - db_manager - INFO - execute_update: Update completed in 0.01s. Affected rows: 1
2025-09-18 09:47:17,946 - db_manager - INFO - Transaction committed successfully
2025-09-18 09:47:17,946 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 09:47:17,947 - db_manager - INFO - update_grievance: Updated grievance with ID: GR-20250918-KOJH-917B-B, rows affected: 1
2025-09-18 09:47:17,947 - db_manager - INFO - Grievance updated in db: GR-20250918-KOJH-917B-B
2025-09-18 10:11:28,307 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-18 10:11:28,307 - db_manager - INFO - Database manager initialized successfully
2025-09-18 10:11:28,307 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-18 10:11:28,307 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-18 10:11:28,307 - db_manager - INFO - Database manager initialized successfully
2025-09-18 10:11:28,307 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-18 10:11:28,307 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-18 10:11:28,308 - db_manager - INFO - Database manager initialized successfully
2025-09-18 10:11:28,308 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-18 10:11:28,308 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-18 10:11:28,308 - db_manager - INFO - Database manager initialized successfully
2025-09-18 10:11:28,308 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-18 10:11:28,308 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-18 10:11:28,308 - db_manager - INFO - Database manager initialized successfully
2025-09-18 10:11:28,308 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-18 10:11:28,308 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-18 10:11:28,308 - db_manager - INFO - Database manager initialized successfully
2025-09-18 10:11:28,308 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-18 10:11:28,308 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-18 10:11:28,308 - db_manager - INFO - Database manager initialized successfully
2025-09-18 10:11:28,308 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-18 10:11:28,308 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-18 10:11:28,308 - db_manager - INFO - Database manager initialized successfully
2025-09-18 10:11:28,308 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-18 10:11:28,308 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-18 10:11:28,308 - db_manager - INFO - Database manager initialized successfully
2025-09-18 10:11:28,308 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-18 10:11:28,309 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-18 10:11:28,309 - db_manager - INFO - Database manager initialized successfully
2025-09-18 10:11:28,309 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-18 10:14:26,815 - db_manager - INFO - create_complainant: Creating complainant with ID: CM-20250918-KOJH-44EB-B
2025-09-18 10:14:26,815 - db_manager - DEBUG - encrypted and hashed data at encrypt_and_hash_sensitive_data: {'complainant_id': 'CM-20250918-KOJH-44EB-B', 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_unique_id': 'CM-20250918-KOJH-44EB-B'}
2025-09-18 10:14:26,815 - db_manager - DEBUG - query_keys at generate_query_string: dict_keys(['complainant_id', 'complainant_province', 'complainant_district', 'complainant_unique_id'])
2025-09-18 10:14:26,815 - db_manager - DEBUG - Generated query: INSERT INTO complainants (complainant_id, complainant_province, complainant_district, complainant_unique_id) VALUES (%s, %s, %s, %s)
2025-09-18 10:14:26,815 - db_manager - DEBUG - len of query_keys: 4
2025-09-18 10:14:26,815 - db_manager - DEBUG - Generated query: INSERT INTO complainants (complainant_id, complainant_province, complainant_district, complainant_unique_id) VALUES (%s, %s, %s, %s)
2025-09-18 10:14:26,816 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 10:14:26,824 - db_manager - INFO - Starting database transaction
2025-09-18 10:14:26,827 - db_manager - INFO - Transaction committed successfully
2025-09-18 10:14:26,827 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 10:14:26,827 - db_manager - INFO - create_complainant: Successfully created complainant with ID: CM-20250918-KOJH-44EB-B
2025-09-18 10:14:26,827 - db_manager - INFO - create_grievance: Creating grievance with data: {'grievance_id': 'GR-20250918-KOJH-83F0-B', 'complainant_id': 'CM-20250918-KOJH-44EB-B', 'grievance_description': 'dust everywhere in my house kids are coughing hard', 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_office': None, 'source': 'bot', 'complainant_unique_id': 'CM-20250918-KOJH-44EB-B'}
2025-09-18 10:14:26,827 - db_manager - INFO - create_grievance: Creating grievance with ID: GR-20250918-KOJH-83F0-B
2025-09-18 10:14:26,829 - db_manager - INFO - create_grievance: Creating grievance with allowed fields: ['grievance_id', 'complainant_id', 'grievance_categories', 'grievance_categories_alternative', 'follow_up_question', 'grievance_summary', 'grievance_description', 'grievance_claimed_amount', 'grievance_location', 'is_temporary', 'source', 'language_code', 'grievance_classification_status']
2025-09-18 10:14:26,829 - db_manager - DEBUG - query_keys at generate_query_string: dict_keys(['grievance_id', 'complainant_id', 'grievance_description', 'source'])
2025-09-18 10:14:26,829 - db_manager - DEBUG - Generated query: INSERT INTO grievances (grievance_id, complainant_id, grievance_description, source) VALUES (%s, %s, %s, %s) RETURNING grievance_id
2025-09-18 10:14:26,829 - db_manager - DEBUG - len of query_keys: 4
2025-09-18 10:14:26,829 - db_manager - DEBUG - Generated query: INSERT INTO grievances (grievance_id, complainant_id, grievance_description, source) VALUES (%s, %s, %s, %s) RETURNING grievance_id
2025-09-18 10:14:26,829 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 10:14:26,837 - db_manager - INFO - Starting database transaction
2025-09-18 10:14:26,846 - db_manager - INFO - Transaction committed successfully
2025-09-18 10:14:26,846 - db_manager - INFO - Database connection closed. Duration: 0.02s
2025-09-18 10:14:26,846 - db_manager - INFO - create_grievance: Successfully created grievance with ID: GR-20250918-KOJH-83F0-B
2025-09-18 10:15:18,092 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 10:15:18,098 - db_manager - INFO - Starting database transaction
2025-09-18 10:15:18,098 - db_manager - INFO - Executing get_complainant_by_id: 
            SELECT complainant_id, complainant_unique_id, complainant_full_name,    complainant_pho...
2025-09-18 10:15:18,100 - db_manager - INFO - get_complainant_by_id completed in 0.01s. Rows: 1
2025-09-18 10:15:18,100 - db_manager - INFO - Transaction committed successfully
2025-09-18 10:15:18,100 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 10:15:18,100 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 10:15:18,105 - db_manager - INFO - Starting database transaction
2025-09-18 10:15:18,105 - db_manager - INFO - Executing get_grievance_by_id: 
                SELECT g.*, c.complainant_full_name, c.complainant_phone, c.complainant_email,
    ...
2025-09-18 10:15:18,107 - db_manager - INFO - get_grievance_by_id completed in 0.01s. Rows: 1
2025-09-18 10:15:18,108 - db_manager - INFO - Transaction committed successfully
2025-09-18 10:15:18,108 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 10:15:18,108 - db_manager - DEBUG - get_grievance_by_id: grievance_id: {'grievance_id': 'GR-20250918-KOJH-83F0-B', 'complainant_id': 'CM-20250918-KOJH-44EB-B', 'grievance_categories': ['Environmental - Air Pollution'], 'grievance_categories_alternative': ['Environmental - Noise Pollution', 'Safety - Road Safety Provisions'], 'follow_up_question': ['How many people in your household are affected by the dust and coughing? Please list them.'], 'grievance_summary': 'Dust from road works is filling my house; my kids are coughing a lot.', 'grievance_description': 'dust everywhere in my house kids are coughing hard', 'grievance_claimed_amount': None, 'grievance_location': None, 'language_code': 'en', 'grievance_classification_status': 'pending', 'grievance_creation_date': datetime.datetime(2025, 9, 18, 10, 14, 26, 837635, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'grievance_modification_date': datetime.datetime(2025, 9, 18, 10, 14, 39, 168870, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'is_temporary': True, 'source': 'bot', 'complainant_full_name': None, 'complainant_phone': None, 'complainant_email': None, 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_municipality': None, 'complainant_ward': None, 'complainant_village': None, 'complainant_address': None}, results: [{'grievance_id': 'GR-20250918-KOJH-83F0-B', 'complainant_id': 'CM-20250918-KOJH-44EB-B', 'grievance_categories': '["Environmental - Air Pollution"]', 'grievance_categories_alternative': '["Environmental - Noise Pollution", "Safety - Road Safety Provisions"]', 'follow_up_question': '["How many people in your household are affected by the dust and coughing? Please list them."]', 'grievance_summary': 'Dust from road works is filling my house; my kids are coughing a lot.', 'grievance_description': 'dust everywhere in my house kids are coughing hard', 'grievance_claimed_amount': None, 'grievance_location': None, 'language_code': 'en', 'grievance_classification_status': 'pending', 'grievance_creation_date': datetime.datetime(2025, 9, 18, 10, 14, 26, 837635, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'grievance_modification_date': datetime.datetime(2025, 9, 18, 10, 14, 39, 168870, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'is_temporary': True, 'source': 'bot', 'complainant_full_name': None, 'complainant_phone': None, 'complainant_email': None, 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_municipality': None, 'complainant_ward': None, 'complainant_village': None, 'complainant_address': None}]
2025-09-18 10:15:18,108 - db_manager - INFO - update_complainant: Updating complainant with ID: CM-20250918-KOJH-44EB-B
2025-09-18 10:15:18,108 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 10:15:18,114 - db_manager - INFO - Starting database transaction
2025-09-18 10:15:18,114 - db_manager - INFO - Executing encrypt_field: SELECT encode(pgp_sym_encrypt(%s, %s), 'hex') AS encrypted...
2025-09-18 10:15:18,117 - db_manager - INFO - encrypt_field completed in 0.01s. Rows: 1
2025-09-18 10:15:18,117 - db_manager - INFO - Transaction committed successfully
2025-09-18 10:15:18,117 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 10:15:18,117 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 10:15:18,122 - db_manager - INFO - Starting database transaction
2025-09-18 10:15:18,122 - db_manager - INFO - Executing encrypt_field: SELECT encode(pgp_sym_encrypt(%s, %s), 'hex') AS encrypted...
2025-09-18 10:15:18,124 - db_manager - INFO - encrypt_field completed in 0.01s. Rows: 1
2025-09-18 10:15:18,124 - db_manager - INFO - Transaction committed successfully
2025-09-18 10:15:18,124 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 10:15:18,124 - db_manager - DEBUG - encrypted phone number +9779876543217 at encrypt_complainant_data: c30d04070302a90a265f8b55187068d23f018087585ac3e7b22eb93efcc379d8c3395f6d7737e07b9b8df19675031ef995125304c3efeee0a62e9d3ba8327a18db95a2d0fee2961857e1f076cbca5def
2025-09-18 10:15:18,124 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 10:15:18,130 - db_manager - INFO - Starting database transaction
2025-09-18 10:15:18,130 - db_manager - INFO - Executing encrypt_field: SELECT encode(pgp_sym_encrypt(%s, %s), 'hex') AS encrypted...
2025-09-18 10:15:18,131 - db_manager - INFO - encrypt_field completed in 0.01s. Rows: 1
2025-09-18 10:15:18,131 - db_manager - INFO - Transaction committed successfully
2025-09-18 10:15:18,131 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 10:15:18,132 - db_manager - DEBUG - phone number +9779876543217 hashed to b919316383e40fdf08a05cb67a2783cdd2adf57aeadcd11053e49267fa634b21 at hash_sensitive_data
2025-09-18 10:15:18,132 - db_manager - DEBUG - encrypted and hashed data at encrypt_and_hash_sensitive_data: {'complainant_full_name': 'c30d0407030287f3a6293ac252cb6cd23801961b09a6c756be6f2dc88b30727625b39692331f398e1fea5e14ccc89fb9afd32358c84f6cb30bfef8ba26a5ffcb089f70a00f1bd6ff06', 'complainant_phone': 'c30d04070302a90a265f8b55187068d23f018087585ac3e7b22eb93efcc379d8c3395f6d7737e07b9b8df19675031ef995125304c3efeee0a62e9d3ba8327a18db95a2d0fee2961857e1f076cbca5def', 'complainant_email': 'c30d0407030237740fc4f12e05ec74d23d01b30d882f93b17124e978d69bae218a8cd96b998807f0308eceaf2c0d490820f75c8b9cc5fdb4c4104c6c30211c4387c1e6e5d4884b18dd57a8b7df29', 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_email_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'complainant_phone_hash': 'b919316383e40fdf08a05cb67a2783cdd2adf57aeadcd11053e49267fa634b21', 'complainant_full_name_hash': 'ca6a7b7418d48e1ecb30b33e849bf356e4375160cc9e317025866ad60c1dadca'}
2025-09-18 10:15:18,132 - db_manager - DEBUG - encrypted_data at update_complainant: {'complainant_full_name': 'c30d0407030287f3a6293ac252cb6cd23801961b09a6c756be6f2dc88b30727625b39692331f398e1fea5e14ccc89fb9afd32358c84f6cb30bfef8ba26a5ffcb089f70a00f1bd6ff06', 'complainant_phone': 'c30d04070302a90a265f8b55187068d23f018087585ac3e7b22eb93efcc379d8c3395f6d7737e07b9b8df19675031ef995125304c3efeee0a62e9d3ba8327a18db95a2d0fee2961857e1f076cbca5def', 'complainant_email': 'c30d0407030237740fc4f12e05ec74d23d01b30d882f93b17124e978d69bae218a8cd96b998807f0308eceaf2c0d490820f75c8b9cc5fdb4c4104c6c30211c4387c1e6e5d4884b18dd57a8b7df29', 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_email_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'complainant_phone_hash': 'b919316383e40fdf08a05cb67a2783cdd2adf57aeadcd11053e49267fa634b21', 'complainant_full_name_hash': 'ca6a7b7418d48e1ecb30b33e849bf356e4375160cc9e317025866ad60c1dadca'}
2025-09-18 10:15:18,132 - db_manager - DEBUG - execute_update values: ('c30d0407030287f3a6293ac252cb6cd23801961b09a6c756be6f2dc88b30727625b39692331f398e1fea5e14ccc89fb9afd32358c84f6cb30bfef8ba26a5ffcb089f70a00f1bd6ff06', 'c30d04070302a90a265f8b55187068d23f018087585ac3e7b22eb93efcc379d8c3395f6d7737e07b9b8df19675031ef995125304c3efeee0a62e9d3ba8327a18db95a2d0fee2961857e1f076cbca5def', 'c30d0407030237740fc4f12e05ec74d23d01b30d882f93b17124e978d69bae218a8cd96b998807f0308eceaf2c0d490820f75c8b9cc5fdb4c4104c6c30211c4387c1e6e5d4884b18dd57a8b7df29', 'Koshi', 'Jhapa', 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'b919316383e40fdf08a05cb67a2783cdd2adf57aeadcd11053e49267fa634b21', 'ca6a7b7418d48e1ecb30b33e849bf356e4375160cc9e317025866ad60c1dadca', 'CM-20250918-KOJH-44EB-B')
2025-09-18 10:15:18,132 - db_manager - DEBUG - execute_update query: UPDATE complainants SET complainant_full_name = %s, complainant_phone = %s, complainant_email = %s, complainant_province = %s, complainant_district = %s, complainant_email_hash = %s, complainant_phone_hash = %s, complainant_full_name_hash = %s WHERE complainant_id = %s
2025-09-18 10:15:18,132 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 10:15:18,136 - db_manager - INFO - Starting database transaction
2025-09-18 10:15:18,136 - db_manager - INFO - execute_update: Executing update query: UPDATE complainants SET complainant_full_name = %s, complainant_phone = %s, complainant_email = %s, ...
2025-09-18 10:15:18,137 - db_manager - INFO - execute_update: Update completed in 0.01s. Affected rows: 1
2025-09-18 10:15:18,140 - db_manager - INFO - Transaction committed successfully
2025-09-18 10:15:18,140 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 10:15:18,140 - db_manager - INFO - Complainant updated in db: CM-20250918-KOJH-44EB-B
2025-09-18 10:15:18,140 - db_manager - INFO - update_grievance: Updating grievance with ID: GR-20250918-KOJH-83F0-B
2025-09-18 10:15:18,140 - db_manager - DEBUG - execute_update values: ('dust everywhere in my house kids are coughing hard', 'GR-20250918-KOJH-83F0-B')
2025-09-18 10:15:18,140 - db_manager - DEBUG - execute_update query: 
                    UPDATE grievances 
                    SET grievance_description = %s, grievance_modification_date = CURRENT_TIMESTAMP
                    WHERE grievance_id = %s
                    RETURNING grievance_id
                
2025-09-18 10:15:18,140 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 10:15:18,146 - db_manager - INFO - Starting database transaction
2025-09-18 10:15:18,146 - db_manager - INFO - execute_update: Executing update query: 
                    UPDATE grievances 
                    SET grievance_description = %s, grievanc...
2025-09-18 10:15:18,148 - db_manager - INFO - execute_update: Update completed in 0.01s. Affected rows: 1
2025-09-18 10:15:18,149 - db_manager - INFO - Transaction committed successfully
2025-09-18 10:15:18,150 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 10:15:18,150 - db_manager - INFO - update_grievance: Updated grievance with ID: GR-20250918-KOJH-83F0-B, rows affected: 1
2025-09-18 10:15:18,150 - db_manager - INFO - Grievance updated in db: GR-20250918-KOJH-83F0-B
2025-09-18 10:15:18,150 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 10:15:18,155 - db_manager - INFO - Starting database transaction
2025-09-18 10:15:18,155 - db_manager - INFO - Executing get_grievance_files: 
            SELECT file_id, file_name, file_type, file_size, upload_timestamp
            FROM file...
2025-09-18 10:15:18,156 - db_manager - INFO - get_grievance_files completed in 0.01s. Rows: 0
2025-09-18 10:15:18,156 - db_manager - INFO - Transaction committed successfully
2025-09-18 10:15:18,156 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 10:15:18,157 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 10:15:18,162 - db_manager - INFO - Starting database transaction
2025-09-18 10:15:18,162 - db_manager - INFO - Executing get_grievance_files: 
            SELECT file_id, file_name, file_type, file_size, upload_timestamp
            FROM file...
2025-09-18 10:15:18,164 - db_manager - INFO - get_grievance_files completed in 0.01s. Rows: 0
2025-09-18 10:15:18,164 - db_manager - INFO - Transaction committed successfully
2025-09-18 10:15:18,164 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 10:15:18,650 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 10:15:18,655 - db_manager - INFO - Starting database transaction
2025-09-18 10:15:18,656 - db_manager - INFO - Executing get_grievance_by_id: 
                SELECT g.*, c.complainant_full_name, c.complainant_phone, c.complainant_email,
    ...
2025-09-18 10:15:18,657 - db_manager - INFO - get_grievance_by_id completed in 0.01s. Rows: 1
2025-09-18 10:15:18,657 - db_manager - INFO - Transaction committed successfully
2025-09-18 10:15:18,657 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 10:15:18,658 - db_manager - DEBUG - get_grievance_by_id: grievance_id: {'grievance_id': 'GR-20250918-KOJH-83F0-B', 'complainant_id': 'CM-20250918-KOJH-44EB-B', 'grievance_categories': ['Environmental - Air Pollution'], 'grievance_categories_alternative': ['Environmental - Noise Pollution', 'Safety - Road Safety Provisions'], 'follow_up_question': ['How many people in your household are affected by the dust and coughing? Please list them.'], 'grievance_summary': 'Dust from road works is filling my house; my kids are coughing a lot.', 'grievance_description': 'dust everywhere in my house kids are coughing hard', 'grievance_claimed_amount': None, 'grievance_location': None, 'language_code': 'en', 'grievance_classification_status': 'pending', 'grievance_creation_date': datetime.datetime(2025, 9, 18, 10, 14, 26, 837635, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'grievance_modification_date': datetime.datetime(2025, 9, 18, 10, 15, 18, 146989, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'is_temporary': True, 'source': 'bot', 'complainant_full_name': 'c30d0407030287f3a6293ac252cb6cd23801961b09a6c756be6f2dc88b30727625b39692331f398e1fea5e14ccc89fb9afd32358c84f6cb30bfef8ba26a5ffcb089f70a00f1bd6ff06', 'complainant_phone': 'c30d04070302a90a265f8b55187068d23f018087585ac3e7b22eb93efcc379d8c3395f6d7737e07b9b8df19675031ef995125304c3efeee0a62e9d3ba8327a18db95a2d0fee2961857e1f076cbca5def', 'complainant_email': 'c30d0407030237740fc4f12e05ec74d23d01b30d882f93b17124e978d69bae218a8cd96b998807f0308eceaf2c0d490820f75c8b9cc5fdb4c4104c6c30211c4387c1e6e5d4884b18dd57a8b7df29', 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_municipality': None, 'complainant_ward': None, 'complainant_village': None, 'complainant_address': None}, results: [{'grievance_id': 'GR-20250918-KOJH-83F0-B', 'complainant_id': 'CM-20250918-KOJH-44EB-B', 'grievance_categories': '["Environmental - Air Pollution"]', 'grievance_categories_alternative': '["Environmental - Noise Pollution", "Safety - Road Safety Provisions"]', 'follow_up_question': '["How many people in your household are affected by the dust and coughing? Please list them."]', 'grievance_summary': 'Dust from road works is filling my house; my kids are coughing a lot.', 'grievance_description': 'dust everywhere in my house kids are coughing hard', 'grievance_claimed_amount': None, 'grievance_location': None, 'language_code': 'en', 'grievance_classification_status': 'pending', 'grievance_creation_date': datetime.datetime(2025, 9, 18, 10, 14, 26, 837635, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'grievance_modification_date': datetime.datetime(2025, 9, 18, 10, 15, 18, 146989, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'is_temporary': True, 'source': 'bot', 'complainant_full_name': 'c30d0407030287f3a6293ac252cb6cd23801961b09a6c756be6f2dc88b30727625b39692331f398e1fea5e14ccc89fb9afd32358c84f6cb30bfef8ba26a5ffcb089f70a00f1bd6ff06', 'complainant_phone': 'c30d04070302a90a265f8b55187068d23f018087585ac3e7b22eb93efcc379d8c3395f6d7737e07b9b8df19675031ef995125304c3efeee0a62e9d3ba8327a18db95a2d0fee2961857e1f076cbca5def', 'complainant_email': 'c30d0407030237740fc4f12e05ec74d23d01b30d882f93b17124e978d69bae218a8cd96b998807f0308eceaf2c0d490820f75c8b9cc5fdb4c4104c6c30211c4387c1e6e5d4884b18dd57a8b7df29', 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_municipality': None, 'complainant_ward': None, 'complainant_village': None, 'complainant_address': None}]
2025-09-18 10:15:22,332 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 10:15:22,338 - db_manager - INFO - Starting database transaction
2025-09-18 10:15:22,338 - db_manager - INFO - Executing get_complainant_id_from_grievance_id: 
            SELECT complainant_id
            FROM grievances
            WHERE grievance_id = %s
 ...
2025-09-18 10:15:22,339 - db_manager - INFO - get_complainant_id_from_grievance_id completed in 0.01s. Rows: 1
2025-09-18 10:15:22,339 - db_manager - INFO - Transaction committed successfully
2025-09-18 10:15:22,339 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 10:15:22,339 - db_manager - INFO - update_complainant: Updating complainant with ID: CM-20250918-KOJH-44EB-B
2025-09-18 10:15:22,339 - db_manager - DEBUG - encrypted and hashed data at encrypt_and_hash_sensitive_data: {}
2025-09-18 10:15:22,339 - db_manager - DEBUG - encrypted_data at update_complainant: {}
2025-09-18 10:15:22,339 - db_manager - DEBUG - No complainant field to update
2025-09-18 10:15:22,339 - db_manager - INFO - Complainant updated in db: GR-20250918-KOJH-83F0-B
2025-09-18 10:15:22,340 - db_manager - INFO - update_grievance: Updating grievance with ID: GR-20250918-KOJH-83F0-B
2025-09-18 10:15:22,340 - db_manager - DEBUG - execute_update values: ('["Environmental - Air Pollution"]', 'GR-20250918-KOJH-83F0-B')
2025-09-18 10:15:22,340 - db_manager - DEBUG - execute_update query: 
                    UPDATE grievances 
                    SET grievance_categories = %s, grievance_modification_date = CURRENT_TIMESTAMP
                    WHERE grievance_id = %s
                    RETURNING grievance_id
                
2025-09-18 10:15:22,340 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 10:15:22,344 - db_manager - INFO - Starting database transaction
2025-09-18 10:15:22,344 - db_manager - INFO - execute_update: Executing update query: 
                    UPDATE grievances 
                    SET grievance_categories = %s, grievance...
2025-09-18 10:15:22,345 - db_manager - INFO - execute_update: Update completed in 0.01s. Affected rows: 1
2025-09-18 10:15:22,348 - db_manager - INFO - Transaction committed successfully
2025-09-18 10:15:22,348 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 10:15:22,348 - db_manager - INFO - update_grievance: Updated grievance with ID: GR-20250918-KOJH-83F0-B, rows affected: 1
2025-09-18 10:15:22,348 - db_manager - INFO - Grievance updated in db: GR-20250918-KOJH-83F0-B
2025-09-18 10:15:22,394 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 10:15:22,401 - db_manager - INFO - Starting database transaction
2025-09-18 10:15:22,401 - db_manager - INFO - Executing get_grievance_files: 
            SELECT file_id, file_name, file_type, file_size, upload_timestamp
            FROM file...
2025-09-18 10:15:22,402 - db_manager - INFO - get_grievance_files completed in 0.01s. Rows: 0
2025-09-18 10:15:22,402 - db_manager - INFO - Transaction committed successfully
2025-09-18 10:15:22,402 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 10:15:22,403 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 10:15:22,407 - db_manager - INFO - Starting database transaction
2025-09-18 10:15:22,407 - db_manager - INFO - Executing get_complainant_by_id: 
            SELECT complainant_id, complainant_unique_id, complainant_full_name,    complainant_pho...
2025-09-18 10:15:22,408 - db_manager - INFO - get_complainant_by_id completed in 0.01s. Rows: 1
2025-09-18 10:15:22,408 - db_manager - INFO - Transaction committed successfully
2025-09-18 10:15:22,408 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 10:15:22,409 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 10:15:22,413 - db_manager - INFO - Starting database transaction
2025-09-18 10:15:22,413 - db_manager - INFO - Executing decrypt_field: SELECT pgp_sym_decrypt(decode(%s, 'hex'), %s) AS decrypted...
2025-09-18 10:15:22,414 - db_manager - INFO - decrypt_field completed in 0.01s. Rows: 1
2025-09-18 10:15:22,414 - db_manager - INFO - Transaction committed successfully
2025-09-18 10:15:22,414 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 10:15:22,414 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 10:15:22,420 - db_manager - INFO - Starting database transaction
2025-09-18 10:15:22,420 - db_manager - INFO - Executing decrypt_field: SELECT pgp_sym_decrypt(decode(%s, 'hex'), %s) AS decrypted...
2025-09-18 10:15:22,421 - db_manager - INFO - decrypt_field completed in 0.01s. Rows: 1
2025-09-18 10:15:22,421 - db_manager - INFO - Transaction committed successfully
2025-09-18 10:15:22,421 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 10:15:22,422 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 10:15:22,428 - db_manager - INFO - Starting database transaction
2025-09-18 10:15:22,429 - db_manager - INFO - Executing decrypt_field: SELECT pgp_sym_decrypt(decode(%s, 'hex'), %s) AS decrypted...
2025-09-18 10:15:22,429 - db_manager - INFO - decrypt_field completed in 0.01s. Rows: 1
2025-09-18 10:15:22,430 - db_manager - INFO - Transaction committed successfully
2025-09-18 10:15:22,430 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 10:15:22,430 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 10:15:22,435 - db_manager - INFO - Starting database transaction
2025-09-18 10:15:22,435 - db_manager - INFO - Executing get_grievance_by_id: 
                SELECT g.*, c.complainant_full_name, c.complainant_phone, c.complainant_email,
    ...
2025-09-18 10:15:22,437 - db_manager - INFO - get_grievance_by_id completed in 0.01s. Rows: 1
2025-09-18 10:15:22,437 - db_manager - INFO - Transaction committed successfully
2025-09-18 10:15:22,437 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 10:15:22,437 - db_manager - DEBUG - get_grievance_by_id: grievance_id: {'grievance_id': 'GR-20250918-KOJH-83F0-B', 'complainant_id': 'CM-20250918-KOJH-44EB-B', 'grievance_categories': ['Environmental - Air Pollution'], 'grievance_categories_alternative': ['Environmental - Noise Pollution', 'Safety - Road Safety Provisions'], 'follow_up_question': ['How many people in your household are affected by the dust and coughing? Please list them.'], 'grievance_summary': 'Dust from road works is filling my house; my kids are coughing a lot.', 'grievance_description': 'dust everywhere in my house kids are coughing hard', 'grievance_claimed_amount': None, 'grievance_location': None, 'language_code': 'en', 'grievance_classification_status': 'pending', 'grievance_creation_date': datetime.datetime(2025, 9, 18, 10, 14, 26, 837635, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'grievance_modification_date': datetime.datetime(2025, 9, 18, 10, 15, 22, 344806, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'is_temporary': True, 'source': 'bot', 'complainant_full_name': 'c30d0407030287f3a6293ac252cb6cd23801961b09a6c756be6f2dc88b30727625b39692331f398e1fea5e14ccc89fb9afd32358c84f6cb30bfef8ba26a5ffcb089f70a00f1bd6ff06', 'complainant_phone': 'c30d04070302a90a265f8b55187068d23f018087585ac3e7b22eb93efcc379d8c3395f6d7737e07b9b8df19675031ef995125304c3efeee0a62e9d3ba8327a18db95a2d0fee2961857e1f076cbca5def', 'complainant_email': 'c30d0407030237740fc4f12e05ec74d23d01b30d882f93b17124e978d69bae218a8cd96b998807f0308eceaf2c0d490820f75c8b9cc5fdb4c4104c6c30211c4387c1e6e5d4884b18dd57a8b7df29', 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_municipality': None, 'complainant_ward': None, 'complainant_village': None, 'complainant_address': None}, results: [{'grievance_id': 'GR-20250918-KOJH-83F0-B', 'complainant_id': 'CM-20250918-KOJH-44EB-B', 'grievance_categories': '["Environmental - Air Pollution"]', 'grievance_categories_alternative': '["Environmental - Noise Pollution", "Safety - Road Safety Provisions"]', 'follow_up_question': '["How many people in your household are affected by the dust and coughing? Please list them."]', 'grievance_summary': 'Dust from road works is filling my house; my kids are coughing a lot.', 'grievance_description': 'dust everywhere in my house kids are coughing hard', 'grievance_claimed_amount': None, 'grievance_location': None, 'language_code': 'en', 'grievance_classification_status': 'pending', 'grievance_creation_date': datetime.datetime(2025, 9, 18, 10, 14, 26, 837635, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'grievance_modification_date': datetime.datetime(2025, 9, 18, 10, 15, 22, 344806, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'is_temporary': True, 'source': 'bot', 'complainant_full_name': 'c30d0407030287f3a6293ac252cb6cd23801961b09a6c756be6f2dc88b30727625b39692331f398e1fea5e14ccc89fb9afd32358c84f6cb30bfef8ba26a5ffcb089f70a00f1bd6ff06', 'complainant_phone': 'c30d04070302a90a265f8b55187068d23f018087585ac3e7b22eb93efcc379d8c3395f6d7737e07b9b8df19675031ef995125304c3efeee0a62e9d3ba8327a18db95a2d0fee2961857e1f076cbca5def', 'complainant_email': 'c30d0407030237740fc4f12e05ec74d23d01b30d882f93b17124e978d69bae218a8cd96b998807f0308eceaf2c0d490820f75c8b9cc5fdb4c4104c6c30211c4387c1e6e5d4884b18dd57a8b7df29', 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_municipality': None, 'complainant_ward': None, 'complainant_village': None, 'complainant_address': None}]
2025-09-18 10:15:22,437 - db_manager - INFO - update_complainant: Updating complainant with ID: CM-20250918-KOJH-44EB-B
2025-09-18 10:15:22,437 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 10:15:22,443 - db_manager - INFO - Starting database transaction
2025-09-18 10:15:22,443 - db_manager - INFO - Executing encrypt_field: SELECT encode(pgp_sym_encrypt(%s, %s), 'hex') AS encrypted...
2025-09-18 10:15:22,444 - db_manager - INFO - encrypt_field completed in 0.01s. Rows: 1
2025-09-18 10:15:22,444 - db_manager - INFO - Transaction committed successfully
2025-09-18 10:15:22,444 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 10:15:22,444 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 10:15:22,448 - db_manager - INFO - Starting database transaction
2025-09-18 10:15:22,449 - db_manager - INFO - Executing encrypt_field: SELECT encode(pgp_sym_encrypt(%s, %s), 'hex') AS encrypted...
2025-09-18 10:15:22,450 - db_manager - INFO - encrypt_field completed in 0.01s. Rows: 1
2025-09-18 10:15:22,450 - db_manager - INFO - Transaction committed successfully
2025-09-18 10:15:22,450 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 10:15:22,450 - db_manager - DEBUG - encrypted phone number +9779876543217 at encrypt_complainant_data: c30d040703028ee0b4604018ac4476d23f01d7784fe187b98496c4abf48c7a342ef9161f4226e68a59252cbce3f175e0cc9eec93ec621476816a414f45f04af3fd8b2f75be5352c138388b4d29703d74
2025-09-18 10:15:22,450 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 10:15:22,455 - db_manager - INFO - Starting database transaction
2025-09-18 10:15:22,455 - db_manager - INFO - Executing encrypt_field: SELECT encode(pgp_sym_encrypt(%s, %s), 'hex') AS encrypted...
2025-09-18 10:15:22,456 - db_manager - INFO - encrypt_field completed in 0.01s. Rows: 1
2025-09-18 10:15:22,456 - db_manager - INFO - Transaction committed successfully
2025-09-18 10:15:22,456 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 10:15:22,456 - db_manager - DEBUG - phone number +9779876543217 hashed to b919316383e40fdf08a05cb67a2783cdd2adf57aeadcd11053e49267fa634b21 at hash_sensitive_data
2025-09-18 10:15:22,456 - db_manager - DEBUG - encrypted and hashed data at encrypt_and_hash_sensitive_data: {'complainant_full_name': 'c30d040703021ae1af7ee08dd3c673d23801109619d6141f2d57025e29e0f66c9186a41422002dd2e75b3cae6bf5a340cf673d8b69b049f7a27dac5dd2613f0663d4c1ea1b6e362623', 'complainant_phone': 'c30d040703028ee0b4604018ac4476d23f01d7784fe187b98496c4abf48c7a342ef9161f4226e68a59252cbce3f175e0cc9eec93ec621476816a414f45f04af3fd8b2f75be5352c138388b4d29703d74', 'complainant_email': 'c30d04070302cde9d55c79b5cf9c7cd23d01605b856c7e1aa18c638f9d4c2536dd6370505c01fda8a9e0fa17beeb9ae300f98ab78d5ab61f1927ea6cd861ef352fd42fd9cb4f64e9b6a86340c13a', 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_email_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'complainant_phone_hash': 'b919316383e40fdf08a05cb67a2783cdd2adf57aeadcd11053e49267fa634b21', 'complainant_full_name_hash': 'ca6a7b7418d48e1ecb30b33e849bf356e4375160cc9e317025866ad60c1dadca'}
2025-09-18 10:15:22,456 - db_manager - DEBUG - encrypted_data at update_complainant: {'complainant_full_name': 'c30d040703021ae1af7ee08dd3c673d23801109619d6141f2d57025e29e0f66c9186a41422002dd2e75b3cae6bf5a340cf673d8b69b049f7a27dac5dd2613f0663d4c1ea1b6e362623', 'complainant_phone': 'c30d040703028ee0b4604018ac4476d23f01d7784fe187b98496c4abf48c7a342ef9161f4226e68a59252cbce3f175e0cc9eec93ec621476816a414f45f04af3fd8b2f75be5352c138388b4d29703d74', 'complainant_email': 'c30d04070302cde9d55c79b5cf9c7cd23d01605b856c7e1aa18c638f9d4c2536dd6370505c01fda8a9e0fa17beeb9ae300f98ab78d5ab61f1927ea6cd861ef352fd42fd9cb4f64e9b6a86340c13a', 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_email_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'complainant_phone_hash': 'b919316383e40fdf08a05cb67a2783cdd2adf57aeadcd11053e49267fa634b21', 'complainant_full_name_hash': 'ca6a7b7418d48e1ecb30b33e849bf356e4375160cc9e317025866ad60c1dadca'}
2025-09-18 10:15:22,456 - db_manager - DEBUG - execute_update values: ('c30d040703021ae1af7ee08dd3c673d23801109619d6141f2d57025e29e0f66c9186a41422002dd2e75b3cae6bf5a340cf673d8b69b049f7a27dac5dd2613f0663d4c1ea1b6e362623', 'c30d040703028ee0b4604018ac4476d23f01d7784fe187b98496c4abf48c7a342ef9161f4226e68a59252cbce3f175e0cc9eec93ec621476816a414f45f04af3fd8b2f75be5352c138388b4d29703d74', 'c30d04070302cde9d55c79b5cf9c7cd23d01605b856c7e1aa18c638f9d4c2536dd6370505c01fda8a9e0fa17beeb9ae300f98ab78d5ab61f1927ea6cd861ef352fd42fd9cb4f64e9b6a86340c13a', 'Koshi', 'Jhapa', 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'b919316383e40fdf08a05cb67a2783cdd2adf57aeadcd11053e49267fa634b21', 'ca6a7b7418d48e1ecb30b33e849bf356e4375160cc9e317025866ad60c1dadca', 'CM-20250918-KOJH-44EB-B')
2025-09-18 10:15:22,456 - db_manager - DEBUG - execute_update query: UPDATE complainants SET complainant_full_name = %s, complainant_phone = %s, complainant_email = %s, complainant_province = %s, complainant_district = %s, complainant_email_hash = %s, complainant_phone_hash = %s, complainant_full_name_hash = %s WHERE complainant_id = %s
2025-09-18 10:15:22,456 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 10:15:22,461 - db_manager - INFO - Starting database transaction
2025-09-18 10:15:22,461 - db_manager - INFO - execute_update: Executing update query: UPDATE complainants SET complainant_full_name = %s, complainant_phone = %s, complainant_email = %s, ...
2025-09-18 10:15:22,462 - db_manager - INFO - execute_update: Update completed in 0.01s. Affected rows: 1
2025-09-18 10:15:22,464 - db_manager - INFO - Transaction committed successfully
2025-09-18 10:15:22,464 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 10:15:22,464 - db_manager - INFO - Complainant updated in db: CM-20250918-KOJH-44EB-B
2025-09-18 10:15:22,464 - db_manager - INFO - update_grievance: Updating grievance with ID: GR-20250918-KOJH-83F0-B
2025-09-18 10:15:22,465 - db_manager - DEBUG - execute_update values: ('["Environmental - Air Pollution"]', 'Not provided', 'dust everywhere in my house kids are coughing hard', 'GR-20250918-KOJH-83F0-B')
2025-09-18 10:15:22,465 - db_manager - DEBUG - execute_update query: 
                    UPDATE grievances 
                    SET grievance_categories = %s, grievance_summary = %s, grievance_description = %s, grievance_modification_date = CURRENT_TIMESTAMP
                    WHERE grievance_id = %s
                    RETURNING grievance_id
                
2025-09-18 10:15:22,465 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 10:15:22,470 - db_manager - INFO - Starting database transaction
2025-09-18 10:15:22,470 - db_manager - INFO - execute_update: Executing update query: 
                    UPDATE grievances 
                    SET grievance_categories = %s, grievance...
2025-09-18 10:15:22,471 - db_manager - INFO - execute_update: Update completed in 0.01s. Affected rows: 1
2025-09-18 10:15:22,473 - db_manager - INFO - Transaction committed successfully
2025-09-18 10:15:22,473 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 10:15:22,473 - db_manager - INFO - update_grievance: Updated grievance with ID: GR-20250918-KOJH-83F0-B, rows affected: 1
2025-09-18 10:15:22,473 - db_manager - INFO - Grievance updated in db: GR-20250918-KOJH-83F0-B
2025-09-18 10:27:23,139 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-18 10:27:23,140 - db_manager - INFO - Database manager initialized successfully
2025-09-18 10:27:23,140 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-18 10:27:23,140 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-18 10:27:23,140 - db_manager - INFO - Database manager initialized successfully
2025-09-18 10:27:23,140 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-18 10:27:23,140 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-18 10:27:23,140 - db_manager - INFO - Database manager initialized successfully
2025-09-18 10:27:23,140 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-18 10:27:23,140 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-18 10:27:23,140 - db_manager - INFO - Database manager initialized successfully
2025-09-18 10:27:23,140 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-18 10:27:23,140 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-18 10:27:23,140 - db_manager - INFO - Database manager initialized successfully
2025-09-18 10:27:23,140 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-18 10:27:23,140 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-18 10:27:23,140 - db_manager - INFO - Database manager initialized successfully
2025-09-18 10:27:23,140 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-18 10:27:23,140 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-18 10:27:23,141 - db_manager - INFO - Database manager initialized successfully
2025-09-18 10:27:23,141 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-18 10:27:23,141 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-18 10:27:23,141 - db_manager - INFO - Database manager initialized successfully
2025-09-18 10:27:23,141 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-18 10:27:23,141 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-18 10:27:23,141 - db_manager - INFO - Database manager initialized successfully
2025-09-18 10:27:23,141 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-18 10:27:23,141 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-18 10:27:23,141 - db_manager - INFO - Database manager initialized successfully
2025-09-18 10:27:23,141 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-18 10:28:54,486 - db_manager - INFO - create_complainant: Creating complainant with ID: CM-20250918-KOJH-1AB9-B
2025-09-18 10:28:54,487 - db_manager - DEBUG - encrypted and hashed data at encrypt_and_hash_sensitive_data: {'complainant_id': 'CM-20250918-KOJH-1AB9-B', 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_unique_id': 'CM-20250918-KOJH-1AB9-B'}
2025-09-18 10:28:54,487 - db_manager - DEBUG - query_keys at generate_query_string: dict_keys(['complainant_id', 'complainant_province', 'complainant_district', 'complainant_unique_id'])
2025-09-18 10:28:54,487 - db_manager - DEBUG - Generated query: INSERT INTO complainants (complainant_id, complainant_province, complainant_district, complainant_unique_id) VALUES (%s, %s, %s, %s)
2025-09-18 10:28:54,487 - db_manager - DEBUG - len of query_keys: 4
2025-09-18 10:28:54,487 - db_manager - DEBUG - Generated query: INSERT INTO complainants (complainant_id, complainant_province, complainant_district, complainant_unique_id) VALUES (%s, %s, %s, %s)
2025-09-18 10:28:54,487 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 10:28:54,497 - db_manager - INFO - Starting database transaction
2025-09-18 10:28:54,500 - db_manager - INFO - Transaction committed successfully
2025-09-18 10:28:54,500 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 10:28:54,500 - db_manager - INFO - create_complainant: Successfully created complainant with ID: CM-20250918-KOJH-1AB9-B
2025-09-18 10:28:54,500 - db_manager - INFO - create_grievance: Creating grievance with data: {'grievance_id': 'GR-20250918-KOJH-4CAD-B', 'complainant_id': 'CM-20250918-KOJH-1AB9-B', 'grievance_description': 'dust everywhere in my house kids are coughing hard', 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_office': None, 'source': 'bot', 'complainant_unique_id': 'CM-20250918-KOJH-1AB9-B'}
2025-09-18 10:28:54,501 - db_manager - INFO - create_grievance: Creating grievance with ID: GR-20250918-KOJH-4CAD-B
2025-09-18 10:28:54,501 - db_manager - INFO - create_grievance: Creating grievance with allowed fields: ['grievance_id', 'complainant_id', 'grievance_categories', 'grievance_categories_alternative', 'follow_up_question', 'grievance_summary', 'grievance_description', 'grievance_claimed_amount', 'grievance_location', 'is_temporary', 'source', 'language_code', 'grievance_classification_status']
2025-09-18 10:28:54,501 - db_manager - DEBUG - query_keys at generate_query_string: dict_keys(['grievance_id', 'complainant_id', 'grievance_description', 'source'])
2025-09-18 10:28:54,501 - db_manager - DEBUG - Generated query: INSERT INTO grievances (grievance_id, complainant_id, grievance_description, source) VALUES (%s, %s, %s, %s) RETURNING grievance_id
2025-09-18 10:28:54,501 - db_manager - DEBUG - len of query_keys: 4
2025-09-18 10:28:54,501 - db_manager - DEBUG - Generated query: INSERT INTO grievances (grievance_id, complainant_id, grievance_description, source) VALUES (%s, %s, %s, %s) RETURNING grievance_id
2025-09-18 10:28:54,501 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 10:28:54,506 - db_manager - INFO - Starting database transaction
2025-09-18 10:28:54,511 - db_manager - INFO - Transaction committed successfully
2025-09-18 10:28:54,511 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 10:28:54,511 - db_manager - INFO - create_grievance: Successfully created grievance with ID: GR-20250918-KOJH-4CAD-B
2025-09-18 10:29:28,511 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 10:29:28,517 - db_manager - INFO - Starting database transaction
2025-09-18 10:29:28,517 - db_manager - INFO - Executing get_complainant_by_id: 
            SELECT complainant_id, complainant_unique_id, complainant_full_name,    complainant_pho...
2025-09-18 10:29:28,518 - db_manager - INFO - get_complainant_by_id completed in 0.01s. Rows: 1
2025-09-18 10:29:28,519 - db_manager - INFO - Transaction committed successfully
2025-09-18 10:29:28,519 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 10:29:28,519 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 10:29:28,525 - db_manager - INFO - Starting database transaction
2025-09-18 10:29:28,525 - db_manager - INFO - Executing get_grievance_by_id: 
                SELECT g.*, c.complainant_full_name, c.complainant_phone, c.complainant_email,
    ...
2025-09-18 10:29:28,526 - db_manager - INFO - get_grievance_by_id completed in 0.01s. Rows: 1
2025-09-18 10:29:28,527 - db_manager - INFO - Transaction committed successfully
2025-09-18 10:29:28,527 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 10:29:28,527 - db_manager - DEBUG - get_grievance_by_id: grievance_id: {'grievance_id': 'GR-20250918-KOJH-4CAD-B', 'complainant_id': 'CM-20250918-KOJH-1AB9-B', 'grievance_categories': ['Environmental - Air Pollution'], 'grievance_categories_alternative': ['Environmental - Noise Pollution', 'Environmental - Drainage and Sewage Management', 'Environmental, Social - Cutting of Trees'], 'follow_up_question': ['How does it affect the health of your relatives?'], 'grievance_summary': 'Dust from road works is inside my house and my kids are coughing a lot.', 'grievance_description': 'dust everywhere in my house kids are coughing hard', 'grievance_claimed_amount': None, 'grievance_location': None, 'language_code': 'en', 'grievance_classification_status': 'pending', 'grievance_creation_date': datetime.datetime(2025, 9, 18, 10, 28, 54, 507139, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'grievance_modification_date': datetime.datetime(2025, 9, 18, 10, 29, 12, 228062, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'is_temporary': True, 'source': 'bot', 'complainant_full_name': None, 'complainant_phone': None, 'complainant_email': None, 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_municipality': None, 'complainant_ward': None, 'complainant_village': None, 'complainant_address': None}, results: [{'grievance_id': 'GR-20250918-KOJH-4CAD-B', 'complainant_id': 'CM-20250918-KOJH-1AB9-B', 'grievance_categories': '["Environmental - Air Pollution"]', 'grievance_categories_alternative': '["Environmental - Noise Pollution", "Environmental - Drainage and Sewage Management", "Environmental, Social - Cutting of Trees"]', 'follow_up_question': '["How does it affect the health of your relatives?"]', 'grievance_summary': 'Dust from road works is inside my house and my kids are coughing a lot.', 'grievance_description': 'dust everywhere in my house kids are coughing hard', 'grievance_claimed_amount': None, 'grievance_location': None, 'language_code': 'en', 'grievance_classification_status': 'pending', 'grievance_creation_date': datetime.datetime(2025, 9, 18, 10, 28, 54, 507139, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'grievance_modification_date': datetime.datetime(2025, 9, 18, 10, 29, 12, 228062, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'is_temporary': True, 'source': 'bot', 'complainant_full_name': None, 'complainant_phone': None, 'complainant_email': None, 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_municipality': None, 'complainant_ward': None, 'complainant_village': None, 'complainant_address': None}]
2025-09-18 10:29:28,527 - db_manager - INFO - update_complainant: Updating complainant with ID: CM-20250918-KOJH-1AB9-B
2025-09-18 10:29:28,527 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 10:29:28,532 - db_manager - INFO - Starting database transaction
2025-09-18 10:29:28,532 - db_manager - INFO - Executing encrypt_field: SELECT encode(pgp_sym_encrypt(%s, %s), 'hex') AS encrypted...
2025-09-18 10:29:28,535 - db_manager - INFO - encrypt_field completed in 0.01s. Rows: 1
2025-09-18 10:29:28,536 - db_manager - INFO - Transaction committed successfully
2025-09-18 10:29:28,536 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 10:29:28,536 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 10:29:28,542 - db_manager - INFO - Starting database transaction
2025-09-18 10:29:28,542 - db_manager - INFO - Executing encrypt_field: SELECT encode(pgp_sym_encrypt(%s, %s), 'hex') AS encrypted...
2025-09-18 10:29:28,543 - db_manager - INFO - encrypt_field completed in 0.01s. Rows: 1
2025-09-18 10:29:28,543 - db_manager - INFO - Transaction committed successfully
2025-09-18 10:29:28,543 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 10:29:28,543 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 10:29:28,548 - db_manager - INFO - Starting database transaction
2025-09-18 10:29:28,548 - db_manager - INFO - Executing encrypt_field: SELECT encode(pgp_sym_encrypt(%s, %s), 'hex') AS encrypted...
2025-09-18 10:29:28,549 - db_manager - INFO - encrypt_field completed in 0.01s. Rows: 1
2025-09-18 10:29:28,550 - db_manager - INFO - Transaction committed successfully
2025-09-18 10:29:28,550 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 10:29:28,550 - db_manager - DEBUG - encrypted phone number +9779876543210 at encrypt_complainant_data: c30d04070302993a9056eb4260cc72d23f01d5f349bc0b38180babbcee991ae71a172d348011038c7c1aeac8e8c8dd8e49e2941d74f8ba0630e3d60081caee26c8b53bc12ce4b8905ec8112f53bf063d
2025-09-18 10:29:28,550 - db_manager - DEBUG - phone number +9779876543210 hashed to c95ee4a714418be9379a77482c9a8b2003400429703eabebc8d6d971e864f8e0 at hash_sensitive_data
2025-09-18 10:29:28,550 - db_manager - DEBUG - encrypted and hashed data at encrypt_and_hash_sensitive_data: {'complainant_full_name': 'c30d04070302065fcf3e9986e68477d23d011e895ea30e4ef8adf73c300cc9da3130477acd926194c17ce2d44ecdb492352e528ff1109a4395a7e42c87493d42777dc3f6660e90fd659904ca4d69', 'complainant_phone': 'c30d04070302993a9056eb4260cc72d23f01d5f349bc0b38180babbcee991ae71a172d348011038c7c1aeac8e8c8dd8e49e2941d74f8ba0630e3d60081caee26c8b53bc12ce4b8905ec8112f53bf063d', 'complainant_email': 'c30d040703024de63195a894e87575d23d01c787aeccd4408e6773c29d69fdffe25ae8d680a0b500d825616644fe4513b38f7cef8840dc49fde5b9cd8353001da94618a2d8917655434632131569', 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_full_name_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'complainant_email_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'complainant_phone_hash': 'c95ee4a714418be9379a77482c9a8b2003400429703eabebc8d6d971e864f8e0'}
2025-09-18 10:29:28,550 - db_manager - DEBUG - encrypted_data at update_complainant: {'complainant_full_name': 'c30d04070302065fcf3e9986e68477d23d011e895ea30e4ef8adf73c300cc9da3130477acd926194c17ce2d44ecdb492352e528ff1109a4395a7e42c87493d42777dc3f6660e90fd659904ca4d69', 'complainant_phone': 'c30d04070302993a9056eb4260cc72d23f01d5f349bc0b38180babbcee991ae71a172d348011038c7c1aeac8e8c8dd8e49e2941d74f8ba0630e3d60081caee26c8b53bc12ce4b8905ec8112f53bf063d', 'complainant_email': 'c30d040703024de63195a894e87575d23d01c787aeccd4408e6773c29d69fdffe25ae8d680a0b500d825616644fe4513b38f7cef8840dc49fde5b9cd8353001da94618a2d8917655434632131569', 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_full_name_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'complainant_email_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'complainant_phone_hash': 'c95ee4a714418be9379a77482c9a8b2003400429703eabebc8d6d971e864f8e0'}
2025-09-18 10:29:28,550 - db_manager - DEBUG - execute_update values: ('c30d04070302065fcf3e9986e68477d23d011e895ea30e4ef8adf73c300cc9da3130477acd926194c17ce2d44ecdb492352e528ff1109a4395a7e42c87493d42777dc3f6660e90fd659904ca4d69', 'c30d04070302993a9056eb4260cc72d23f01d5f349bc0b38180babbcee991ae71a172d348011038c7c1aeac8e8c8dd8e49e2941d74f8ba0630e3d60081caee26c8b53bc12ce4b8905ec8112f53bf063d', 'c30d040703024de63195a894e87575d23d01c787aeccd4408e6773c29d69fdffe25ae8d680a0b500d825616644fe4513b38f7cef8840dc49fde5b9cd8353001da94618a2d8917655434632131569', 'Koshi', 'Jhapa', 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'c95ee4a714418be9379a77482c9a8b2003400429703eabebc8d6d971e864f8e0', 'CM-20250918-KOJH-1AB9-B')
2025-09-18 10:29:28,550 - db_manager - DEBUG - execute_update query: UPDATE complainants SET complainant_full_name = %s, complainant_phone = %s, complainant_email = %s, complainant_province = %s, complainant_district = %s, complainant_full_name_hash = %s, complainant_email_hash = %s, complainant_phone_hash = %s WHERE complainant_id = %s
2025-09-18 10:29:28,550 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 10:29:28,556 - db_manager - INFO - Starting database transaction
2025-09-18 10:29:28,556 - db_manager - INFO - execute_update: Executing update query: UPDATE complainants SET complainant_full_name = %s, complainant_phone = %s, complainant_email = %s, ...
2025-09-18 10:29:28,557 - db_manager - INFO - execute_update: Update completed in 0.01s. Affected rows: 1
2025-09-18 10:29:28,559 - db_manager - INFO - Transaction committed successfully
2025-09-18 10:29:28,559 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 10:29:28,559 - db_manager - INFO - Complainant updated in db: CM-20250918-KOJH-1AB9-B
2025-09-18 10:29:28,559 - db_manager - INFO - update_grievance: Updating grievance with ID: GR-20250918-KOJH-4CAD-B
2025-09-18 10:29:28,559 - db_manager - DEBUG - execute_update values: ('dust everywhere in my house kids are coughing hard', 'GR-20250918-KOJH-4CAD-B')
2025-09-18 10:29:28,559 - db_manager - DEBUG - execute_update query: 
                    UPDATE grievances 
                    SET grievance_description = %s, grievance_modification_date = CURRENT_TIMESTAMP
                    WHERE grievance_id = %s
                    RETURNING grievance_id
                
2025-09-18 10:29:28,559 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 10:29:28,565 - db_manager - INFO - Starting database transaction
2025-09-18 10:29:28,565 - db_manager - INFO - execute_update: Executing update query: 
                    UPDATE grievances 
                    SET grievance_description = %s, grievanc...
2025-09-18 10:29:28,566 - db_manager - INFO - execute_update: Update completed in 0.01s. Affected rows: 1
2025-09-18 10:29:28,568 - db_manager - INFO - Transaction committed successfully
2025-09-18 10:29:28,568 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 10:29:28,568 - db_manager - INFO - update_grievance: Updated grievance with ID: GR-20250918-KOJH-4CAD-B, rows affected: 1
2025-09-18 10:29:28,568 - db_manager - INFO - Grievance updated in db: GR-20250918-KOJH-4CAD-B
2025-09-18 10:29:28,568 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 10:29:28,574 - db_manager - INFO - Starting database transaction
2025-09-18 10:29:28,574 - db_manager - INFO - Executing get_grievance_files: 
            SELECT file_id, file_name, file_type, file_size, upload_timestamp
            FROM file...
2025-09-18 10:29:28,575 - db_manager - INFO - get_grievance_files completed in 0.01s. Rows: 0
2025-09-18 10:29:28,575 - db_manager - INFO - Transaction committed successfully
2025-09-18 10:29:28,575 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 10:29:28,576 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 10:29:28,581 - db_manager - INFO - Starting database transaction
2025-09-18 10:29:28,581 - db_manager - INFO - Executing get_grievance_files: 
            SELECT file_id, file_name, file_type, file_size, upload_timestamp
            FROM file...
2025-09-18 10:29:28,582 - db_manager - INFO - get_grievance_files completed in 0.01s. Rows: 0
2025-09-18 10:29:28,582 - db_manager - INFO - Transaction committed successfully
2025-09-18 10:29:28,582 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 10:29:29,054 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 10:29:29,060 - db_manager - INFO - Starting database transaction
2025-09-18 10:29:29,060 - db_manager - INFO - Executing get_grievance_by_id: 
                SELECT g.*, c.complainant_full_name, c.complainant_phone, c.complainant_email,
    ...
2025-09-18 10:29:29,061 - db_manager - INFO - get_grievance_by_id completed in 0.01s. Rows: 1
2025-09-18 10:29:29,062 - db_manager - INFO - Transaction committed successfully
2025-09-18 10:29:29,062 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 10:29:29,062 - db_manager - DEBUG - get_grievance_by_id: grievance_id: {'grievance_id': 'GR-20250918-KOJH-4CAD-B', 'complainant_id': 'CM-20250918-KOJH-1AB9-B', 'grievance_categories': ['Environmental - Air Pollution'], 'grievance_categories_alternative': ['Environmental - Noise Pollution', 'Environmental - Drainage and Sewage Management', 'Environmental, Social - Cutting of Trees'], 'follow_up_question': ['How does it affect the health of your relatives?'], 'grievance_summary': 'Dust from road works is inside my house and my kids are coughing a lot.', 'grievance_description': 'dust everywhere in my house kids are coughing hard', 'grievance_claimed_amount': None, 'grievance_location': None, 'language_code': 'en', 'grievance_classification_status': 'pending', 'grievance_creation_date': datetime.datetime(2025, 9, 18, 10, 28, 54, 507139, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'grievance_modification_date': datetime.datetime(2025, 9, 18, 10, 29, 28, 565323, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'is_temporary': True, 'source': 'bot', 'complainant_full_name': 'c30d04070302065fcf3e9986e68477d23d011e895ea30e4ef8adf73c300cc9da3130477acd926194c17ce2d44ecdb492352e528ff1109a4395a7e42c87493d42777dc3f6660e90fd659904ca4d69', 'complainant_phone': 'c30d04070302993a9056eb4260cc72d23f01d5f349bc0b38180babbcee991ae71a172d348011038c7c1aeac8e8c8dd8e49e2941d74f8ba0630e3d60081caee26c8b53bc12ce4b8905ec8112f53bf063d', 'complainant_email': 'c30d040703024de63195a894e87575d23d01c787aeccd4408e6773c29d69fdffe25ae8d680a0b500d825616644fe4513b38f7cef8840dc49fde5b9cd8353001da94618a2d8917655434632131569', 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_municipality': None, 'complainant_ward': None, 'complainant_village': None, 'complainant_address': None}, results: [{'grievance_id': 'GR-20250918-KOJH-4CAD-B', 'complainant_id': 'CM-20250918-KOJH-1AB9-B', 'grievance_categories': '["Environmental - Air Pollution"]', 'grievance_categories_alternative': '["Environmental - Noise Pollution", "Environmental - Drainage and Sewage Management", "Environmental, Social - Cutting of Trees"]', 'follow_up_question': '["How does it affect the health of your relatives?"]', 'grievance_summary': 'Dust from road works is inside my house and my kids are coughing a lot.', 'grievance_description': 'dust everywhere in my house kids are coughing hard', 'grievance_claimed_amount': None, 'grievance_location': None, 'language_code': 'en', 'grievance_classification_status': 'pending', 'grievance_creation_date': datetime.datetime(2025, 9, 18, 10, 28, 54, 507139, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'grievance_modification_date': datetime.datetime(2025, 9, 18, 10, 29, 28, 565323, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'is_temporary': True, 'source': 'bot', 'complainant_full_name': 'c30d04070302065fcf3e9986e68477d23d011e895ea30e4ef8adf73c300cc9da3130477acd926194c17ce2d44ecdb492352e528ff1109a4395a7e42c87493d42777dc3f6660e90fd659904ca4d69', 'complainant_phone': 'c30d04070302993a9056eb4260cc72d23f01d5f349bc0b38180babbcee991ae71a172d348011038c7c1aeac8e8c8dd8e49e2941d74f8ba0630e3d60081caee26c8b53bc12ce4b8905ec8112f53bf063d', 'complainant_email': 'c30d040703024de63195a894e87575d23d01c787aeccd4408e6773c29d69fdffe25ae8d680a0b500d825616644fe4513b38f7cef8840dc49fde5b9cd8353001da94618a2d8917655434632131569', 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_municipality': None, 'complainant_ward': None, 'complainant_village': None, 'complainant_address': None}]
2025-09-18 10:30:42,344 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-18 10:30:42,344 - db_manager - INFO - Database manager initialized successfully
2025-09-18 10:30:42,344 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-18 10:30:42,344 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-18 10:30:42,344 - db_manager - INFO - Database manager initialized successfully
2025-09-18 10:30:42,344 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-18 10:30:42,344 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-18 10:30:42,344 - db_manager - INFO - Database manager initialized successfully
2025-09-18 10:30:42,344 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-18 10:30:42,344 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-18 10:30:42,344 - db_manager - INFO - Database manager initialized successfully
2025-09-18 10:30:42,344 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-18 10:30:42,344 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-18 10:30:42,345 - db_manager - INFO - Database manager initialized successfully
2025-09-18 10:30:42,345 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-18 10:30:42,345 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-18 10:30:42,345 - db_manager - INFO - Database manager initialized successfully
2025-09-18 10:30:42,345 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-18 10:30:42,345 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-18 10:30:42,345 - db_manager - INFO - Database manager initialized successfully
2025-09-18 10:30:42,345 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-18 10:30:42,345 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-18 10:30:42,345 - db_manager - INFO - Database manager initialized successfully
2025-09-18 10:30:42,345 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-18 10:30:42,345 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-18 10:30:42,345 - db_manager - INFO - Database manager initialized successfully
2025-09-18 10:30:42,345 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-18 10:30:42,345 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-18 10:30:42,345 - db_manager - INFO - Database manager initialized successfully
2025-09-18 10:30:42,345 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-18 10:34:05,191 - db_manager - INFO - create_complainant: Creating complainant with ID: CM-20250918-KOJH-0673-B
2025-09-18 10:34:05,191 - db_manager - DEBUG - encrypted and hashed data at encrypt_and_hash_sensitive_data: {'complainant_id': 'CM-20250918-KOJH-0673-B', 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_unique_id': 'CM-20250918-KOJH-0673-B'}
2025-09-18 10:34:05,191 - db_manager - DEBUG - query_keys at generate_query_string: dict_keys(['complainant_id', 'complainant_province', 'complainant_district', 'complainant_unique_id'])
2025-09-18 10:34:05,191 - db_manager - DEBUG - Generated query: INSERT INTO complainants (complainant_id, complainant_province, complainant_district, complainant_unique_id) VALUES (%s, %s, %s, %s)
2025-09-18 10:34:05,191 - db_manager - DEBUG - len of query_keys: 4
2025-09-18 10:34:05,191 - db_manager - DEBUG - Generated query: INSERT INTO complainants (complainant_id, complainant_province, complainant_district, complainant_unique_id) VALUES (%s, %s, %s, %s)
2025-09-18 10:34:05,191 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 10:34:05,199 - db_manager - INFO - Starting database transaction
2025-09-18 10:34:05,204 - db_manager - INFO - Transaction committed successfully
2025-09-18 10:34:05,204 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 10:34:05,204 - db_manager - INFO - create_complainant: Successfully created complainant with ID: CM-20250918-KOJH-0673-B
2025-09-18 10:34:05,204 - db_manager - INFO - create_grievance: Creating grievance with data: {'grievance_id': 'GR-20250918-KOJH-A8B5-B', 'complainant_id': 'CM-20250918-KOJH-0673-B', 'grievance_description': 'dust everywhere in my house kids are coughing hard', 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_office': None, 'source': 'bot', 'complainant_unique_id': 'CM-20250918-KOJH-0673-B'}
2025-09-18 10:34:05,204 - db_manager - INFO - create_grievance: Creating grievance with ID: GR-20250918-KOJH-A8B5-B
2025-09-18 10:34:05,204 - db_manager - INFO - create_grievance: Creating grievance with allowed fields: ['grievance_id', 'complainant_id', 'grievance_categories', 'grievance_categories_alternative', 'follow_up_question', 'grievance_summary', 'grievance_description', 'grievance_claimed_amount', 'grievance_location', 'is_temporary', 'source', 'language_code', 'grievance_classification_status']
2025-09-18 10:34:05,204 - db_manager - DEBUG - query_keys at generate_query_string: dict_keys(['grievance_id', 'complainant_id', 'grievance_description', 'source'])
2025-09-18 10:34:05,204 - db_manager - DEBUG - Generated query: INSERT INTO grievances (grievance_id, complainant_id, grievance_description, source) VALUES (%s, %s, %s, %s) RETURNING grievance_id
2025-09-18 10:34:05,204 - db_manager - DEBUG - len of query_keys: 4
2025-09-18 10:34:05,204 - db_manager - DEBUG - Generated query: INSERT INTO grievances (grievance_id, complainant_id, grievance_description, source) VALUES (%s, %s, %s, %s) RETURNING grievance_id
2025-09-18 10:34:05,204 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 10:34:05,210 - db_manager - INFO - Starting database transaction
2025-09-18 10:34:05,218 - db_manager - INFO - Transaction committed successfully
2025-09-18 10:34:05,219 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 10:34:05,219 - db_manager - INFO - create_grievance: Successfully created grievance with ID: GR-20250918-KOJH-A8B5-B
2025-09-18 10:34:26,108 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 10:34:26,114 - db_manager - INFO - Starting database transaction
2025-09-18 10:34:26,114 - db_manager - INFO - Executing get_complainant_by_id: 
            SELECT complainant_id, complainant_unique_id, complainant_full_name,    complainant_pho...
2025-09-18 10:34:26,115 - db_manager - INFO - get_complainant_by_id completed in 0.01s. Rows: 1
2025-09-18 10:34:26,115 - db_manager - INFO - Transaction committed successfully
2025-09-18 10:34:26,115 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 10:34:26,115 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 10:34:26,121 - db_manager - INFO - Starting database transaction
2025-09-18 10:34:26,121 - db_manager - INFO - Executing get_grievance_by_id: 
                SELECT g.*, c.complainant_full_name, c.complainant_phone, c.complainant_email,
    ...
2025-09-18 10:34:26,122 - db_manager - INFO - get_grievance_by_id completed in 0.01s. Rows: 1
2025-09-18 10:34:26,122 - db_manager - INFO - Transaction committed successfully
2025-09-18 10:34:26,122 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 10:34:26,123 - db_manager - DEBUG - get_grievance_by_id: grievance_id: {'grievance_id': 'GR-20250918-KOJH-A8B5-B', 'complainant_id': 'CM-20250918-KOJH-0673-B', 'grievance_categories': ['Environmental - Air Pollution'], 'grievance_categories_alternative': ['Environmental - Noise Pollution', 'Destruction of Agrarian Resources - Soil Pollution', 'Environmental, Social - Cutting of Trees', 'Environmental - Drainage and Sewage Management'], 'follow_up_question': ['How many people in your household are affected by the dust, and since when has this problem started?'], 'grievance_summary': 'Dust from road works is blowing into my house and my kids are coughing hard.', 'grievance_description': 'dust everywhere in my house kids are coughing hard', 'grievance_claimed_amount': None, 'grievance_location': None, 'language_code': 'en', 'grievance_classification_status': 'pending', 'grievance_creation_date': datetime.datetime(2025, 9, 18, 10, 34, 5, 210952, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'grievance_modification_date': datetime.datetime(2025, 9, 18, 10, 34, 23, 578707, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'is_temporary': True, 'source': 'bot', 'complainant_full_name': None, 'complainant_phone': None, 'complainant_email': None, 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_municipality': None, 'complainant_ward': None, 'complainant_village': None, 'complainant_address': None}, results: [{'grievance_id': 'GR-20250918-KOJH-A8B5-B', 'complainant_id': 'CM-20250918-KOJH-0673-B', 'grievance_categories': '["Environmental - Air Pollution"]', 'grievance_categories_alternative': '["Environmental - Noise Pollution", "Destruction of Agrarian Resources - Soil Pollution", "Environmental, Social - Cutting of Trees", "Environmental - Drainage and Sewage Management"]', 'follow_up_question': '["How many people in your household are affected by the dust, and since when has this problem started?"]', 'grievance_summary': 'Dust from road works is blowing into my house and my kids are coughing hard.', 'grievance_description': 'dust everywhere in my house kids are coughing hard', 'grievance_claimed_amount': None, 'grievance_location': None, 'language_code': 'en', 'grievance_classification_status': 'pending', 'grievance_creation_date': datetime.datetime(2025, 9, 18, 10, 34, 5, 210952, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'grievance_modification_date': datetime.datetime(2025, 9, 18, 10, 34, 23, 578707, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'is_temporary': True, 'source': 'bot', 'complainant_full_name': None, 'complainant_phone': None, 'complainant_email': None, 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_municipality': None, 'complainant_ward': None, 'complainant_village': None, 'complainant_address': None}]
2025-09-18 10:34:26,123 - db_manager - INFO - update_complainant: Updating complainant with ID: CM-20250918-KOJH-0673-B
2025-09-18 10:34:26,123 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 10:34:26,128 - db_manager - INFO - Starting database transaction
2025-09-18 10:34:26,128 - db_manager - INFO - Executing encrypt_field: SELECT encode(pgp_sym_encrypt(%s, %s), 'hex') AS encrypted...
2025-09-18 10:34:26,129 - db_manager - INFO - encrypt_field completed in 0.01s. Rows: 1
2025-09-18 10:34:26,130 - db_manager - INFO - Transaction committed successfully
2025-09-18 10:34:26,130 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 10:34:26,130 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 10:34:26,135 - db_manager - INFO - Starting database transaction
2025-09-18 10:34:26,135 - db_manager - INFO - Executing encrypt_field: SELECT encode(pgp_sym_encrypt(%s, %s), 'hex') AS encrypted...
2025-09-18 10:34:26,136 - db_manager - INFO - encrypt_field completed in 0.01s. Rows: 1
2025-09-18 10:34:26,136 - db_manager - INFO - Transaction committed successfully
2025-09-18 10:34:26,137 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 10:34:26,137 - db_manager - DEBUG - encrypted phone number Not provided at encrypt_complainant_data: c30d040703021811d72af89608ef70d23d01741e2d1be2fa896c1472346cf94f8a26f7534a41d9092a99daf31f8aa6fa7b0071d4cd0b07e39a60be218cdede6f3e8789a00a915ee5100016d09d38
2025-09-18 10:34:26,137 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 10:34:26,142 - db_manager - INFO - Starting database transaction
2025-09-18 10:34:26,142 - db_manager - INFO - Executing encrypt_field: SELECT encode(pgp_sym_encrypt(%s, %s), 'hex') AS encrypted...
2025-09-18 10:34:26,143 - db_manager - INFO - encrypt_field completed in 0.01s. Rows: 1
2025-09-18 10:34:26,143 - db_manager - INFO - Transaction committed successfully
2025-09-18 10:34:26,143 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 10:34:26,143 - db_manager - DEBUG - phone number Not provided hashed to d83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f at hash_sensitive_data
2025-09-18 10:34:26,143 - db_manager - DEBUG - encrypted and hashed data at encrypt_and_hash_sensitive_data: {'complainant_full_name': 'c30d04070302c19a4715a61c62d379d23d019058bd88e1c2346defde36d655c2056143d6e6f3a8bfb8e23433742f5e9a7df64455539f71dd0d15213d4941d7da93938d305ab7713b4c0e64c8076b', 'complainant_phone': 'c30d040703021811d72af89608ef70d23d01741e2d1be2fa896c1472346cf94f8a26f7534a41d9092a99daf31f8aa6fa7b0071d4cd0b07e39a60be218cdede6f3e8789a00a915ee5100016d09d38', 'complainant_email': 'c30d04070302aa943a7c8abddec67bd23d01b7ba4e4db488e65b4b336fe092e38cc03aef2d173307d08ecf1f0feb11ca8f62dcbba3ae42e0d9392a2dd7a5900981e6338e1ae150ffb7fa7774610f', 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_email_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'complainant_phone_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'complainant_full_name_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f'}
2025-09-18 10:34:26,143 - db_manager - DEBUG - encrypted_data at update_complainant: {'complainant_full_name': 'c30d04070302c19a4715a61c62d379d23d019058bd88e1c2346defde36d655c2056143d6e6f3a8bfb8e23433742f5e9a7df64455539f71dd0d15213d4941d7da93938d305ab7713b4c0e64c8076b', 'complainant_phone': 'c30d040703021811d72af89608ef70d23d01741e2d1be2fa896c1472346cf94f8a26f7534a41d9092a99daf31f8aa6fa7b0071d4cd0b07e39a60be218cdede6f3e8789a00a915ee5100016d09d38', 'complainant_email': 'c30d04070302aa943a7c8abddec67bd23d01b7ba4e4db488e65b4b336fe092e38cc03aef2d173307d08ecf1f0feb11ca8f62dcbba3ae42e0d9392a2dd7a5900981e6338e1ae150ffb7fa7774610f', 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_email_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'complainant_phone_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'complainant_full_name_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f'}
2025-09-18 10:34:26,144 - db_manager - DEBUG - execute_update values: ('c30d04070302c19a4715a61c62d379d23d019058bd88e1c2346defde36d655c2056143d6e6f3a8bfb8e23433742f5e9a7df64455539f71dd0d15213d4941d7da93938d305ab7713b4c0e64c8076b', 'c30d040703021811d72af89608ef70d23d01741e2d1be2fa896c1472346cf94f8a26f7534a41d9092a99daf31f8aa6fa7b0071d4cd0b07e39a60be218cdede6f3e8789a00a915ee5100016d09d38', 'c30d04070302aa943a7c8abddec67bd23d01b7ba4e4db488e65b4b336fe092e38cc03aef2d173307d08ecf1f0feb11ca8f62dcbba3ae42e0d9392a2dd7a5900981e6338e1ae150ffb7fa7774610f', 'Koshi', 'Jhapa', 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'CM-20250918-KOJH-0673-B')
2025-09-18 10:34:26,144 - db_manager - DEBUG - execute_update query: UPDATE complainants SET complainant_full_name = %s, complainant_phone = %s, complainant_email = %s, complainant_province = %s, complainant_district = %s, complainant_email_hash = %s, complainant_phone_hash = %s, complainant_full_name_hash = %s WHERE complainant_id = %s
2025-09-18 10:34:26,144 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 10:34:26,148 - db_manager - INFO - Starting database transaction
2025-09-18 10:34:26,149 - db_manager - INFO - execute_update: Executing update query: UPDATE complainants SET complainant_full_name = %s, complainant_phone = %s, complainant_email = %s, ...
2025-09-18 10:34:26,149 - db_manager - INFO - execute_update: Update completed in 0.01s. Affected rows: 1
2025-09-18 10:34:26,152 - db_manager - INFO - Transaction committed successfully
2025-09-18 10:34:26,152 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 10:34:26,152 - db_manager - INFO - Complainant updated in db: CM-20250918-KOJH-0673-B
2025-09-18 10:34:26,152 - db_manager - INFO - update_grievance: Updating grievance with ID: GR-20250918-KOJH-A8B5-B
2025-09-18 10:34:26,152 - db_manager - DEBUG - execute_update values: ('dust everywhere in my house kids are coughing hard', 'GR-20250918-KOJH-A8B5-B')
2025-09-18 10:34:26,152 - db_manager - DEBUG - execute_update query: 
                    UPDATE grievances 
                    SET grievance_description = %s, grievance_modification_date = CURRENT_TIMESTAMP
                    WHERE grievance_id = %s
                    RETURNING grievance_id
                
2025-09-18 10:34:26,152 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 10:34:26,157 - db_manager - INFO - Starting database transaction
2025-09-18 10:34:26,157 - db_manager - INFO - execute_update: Executing update query: 
                    UPDATE grievances 
                    SET grievance_description = %s, grievanc...
2025-09-18 10:34:26,158 - db_manager - INFO - execute_update: Update completed in 0.01s. Affected rows: 1
2025-09-18 10:34:26,160 - db_manager - INFO - Transaction committed successfully
2025-09-18 10:34:26,160 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 10:34:26,161 - db_manager - INFO - update_grievance: Updated grievance with ID: GR-20250918-KOJH-A8B5-B, rows affected: 1
2025-09-18 10:34:26,161 - db_manager - INFO - Grievance updated in db: GR-20250918-KOJH-A8B5-B
2025-09-18 10:34:26,161 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 10:34:26,165 - db_manager - INFO - Starting database transaction
2025-09-18 10:34:26,165 - db_manager - INFO - Executing get_grievance_files: 
            SELECT file_id, file_name, file_type, file_size, upload_timestamp
            FROM file...
2025-09-18 10:34:26,166 - db_manager - INFO - get_grievance_files completed in 0.01s. Rows: 0
2025-09-18 10:34:26,167 - db_manager - INFO - Transaction committed successfully
2025-09-18 10:34:26,167 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 10:34:26,167 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 10:34:26,171 - db_manager - INFO - Starting database transaction
2025-09-18 10:34:26,171 - db_manager - INFO - Executing get_grievance_files: 
            SELECT file_id, file_name, file_type, file_size, upload_timestamp
            FROM file...
2025-09-18 10:34:26,172 - db_manager - INFO - get_grievance_files completed in 0.01s. Rows: 0
2025-09-18 10:34:26,173 - db_manager - INFO - Transaction committed successfully
2025-09-18 10:34:26,173 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 10:34:26,750 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 10:34:26,757 - db_manager - INFO - Starting database transaction
2025-09-18 10:34:26,757 - db_manager - INFO - Executing get_grievance_by_id: 
                SELECT g.*, c.complainant_full_name, c.complainant_phone, c.complainant_email,
    ...
2025-09-18 10:34:26,759 - db_manager - INFO - get_grievance_by_id completed in 0.01s. Rows: 1
2025-09-18 10:34:26,759 - db_manager - INFO - Transaction committed successfully
2025-09-18 10:34:26,759 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 10:34:26,760 - db_manager - DEBUG - get_grievance_by_id: grievance_id: {'grievance_id': 'GR-20250918-KOJH-A8B5-B', 'complainant_id': 'CM-20250918-KOJH-0673-B', 'grievance_categories': ['Environmental - Air Pollution'], 'grievance_categories_alternative': ['Environmental - Noise Pollution', 'Destruction of Agrarian Resources - Soil Pollution', 'Environmental, Social - Cutting of Trees', 'Environmental - Drainage and Sewage Management'], 'follow_up_question': ['How many people in your household are affected by the dust, and since when has this problem started?'], 'grievance_summary': 'Dust from road works is blowing into my house and my kids are coughing hard.', 'grievance_description': 'dust everywhere in my house kids are coughing hard', 'grievance_claimed_amount': None, 'grievance_location': None, 'language_code': 'en', 'grievance_classification_status': 'pending', 'grievance_creation_date': datetime.datetime(2025, 9, 18, 10, 34, 5, 210952, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'grievance_modification_date': datetime.datetime(2025, 9, 18, 10, 34, 26, 157687, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'is_temporary': True, 'source': 'bot', 'complainant_full_name': 'c30d04070302c19a4715a61c62d379d23d019058bd88e1c2346defde36d655c2056143d6e6f3a8bfb8e23433742f5e9a7df64455539f71dd0d15213d4941d7da93938d305ab7713b4c0e64c8076b', 'complainant_phone': 'c30d040703021811d72af89608ef70d23d01741e2d1be2fa896c1472346cf94f8a26f7534a41d9092a99daf31f8aa6fa7b0071d4cd0b07e39a60be218cdede6f3e8789a00a915ee5100016d09d38', 'complainant_email': 'c30d04070302aa943a7c8abddec67bd23d01b7ba4e4db488e65b4b336fe092e38cc03aef2d173307d08ecf1f0feb11ca8f62dcbba3ae42e0d9392a2dd7a5900981e6338e1ae150ffb7fa7774610f', 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_municipality': None, 'complainant_ward': None, 'complainant_village': None, 'complainant_address': None}, results: [{'grievance_id': 'GR-20250918-KOJH-A8B5-B', 'complainant_id': 'CM-20250918-KOJH-0673-B', 'grievance_categories': '["Environmental - Air Pollution"]', 'grievance_categories_alternative': '["Environmental - Noise Pollution", "Destruction of Agrarian Resources - Soil Pollution", "Environmental, Social - Cutting of Trees", "Environmental - Drainage and Sewage Management"]', 'follow_up_question': '["How many people in your household are affected by the dust, and since when has this problem started?"]', 'grievance_summary': 'Dust from road works is blowing into my house and my kids are coughing hard.', 'grievance_description': 'dust everywhere in my house kids are coughing hard', 'grievance_claimed_amount': None, 'grievance_location': None, 'language_code': 'en', 'grievance_classification_status': 'pending', 'grievance_creation_date': datetime.datetime(2025, 9, 18, 10, 34, 5, 210952, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'grievance_modification_date': datetime.datetime(2025, 9, 18, 10, 34, 26, 157687, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'is_temporary': True, 'source': 'bot', 'complainant_full_name': 'c30d04070302c19a4715a61c62d379d23d019058bd88e1c2346defde36d655c2056143d6e6f3a8bfb8e23433742f5e9a7df64455539f71dd0d15213d4941d7da93938d305ab7713b4c0e64c8076b', 'complainant_phone': 'c30d040703021811d72af89608ef70d23d01741e2d1be2fa896c1472346cf94f8a26f7534a41d9092a99daf31f8aa6fa7b0071d4cd0b07e39a60be218cdede6f3e8789a00a915ee5100016d09d38', 'complainant_email': 'c30d04070302aa943a7c8abddec67bd23d01b7ba4e4db488e65b4b336fe092e38cc03aef2d173307d08ecf1f0feb11ca8f62dcbba3ae42e0d9392a2dd7a5900981e6338e1ae150ffb7fa7774610f', 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_municipality': None, 'complainant_ward': None, 'complainant_village': None, 'complainant_address': None}]
2025-09-18 10:40:22,037 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-18 10:40:22,038 - db_manager - INFO - Database manager initialized successfully
2025-09-18 10:40:22,038 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-18 10:40:22,038 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-18 10:40:22,038 - db_manager - INFO - Database manager initialized successfully
2025-09-18 10:40:22,038 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-18 10:40:22,038 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-18 10:40:22,039 - db_manager - INFO - Database manager initialized successfully
2025-09-18 10:40:22,039 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-18 10:40:22,039 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-18 10:40:22,039 - db_manager - INFO - Database manager initialized successfully
2025-09-18 10:40:22,039 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-18 10:40:22,039 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-18 10:40:22,039 - db_manager - INFO - Database manager initialized successfully
2025-09-18 10:40:22,039 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-18 10:40:22,039 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-18 10:40:22,039 - db_manager - INFO - Database manager initialized successfully
2025-09-18 10:40:22,039 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-18 10:40:22,039 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-18 10:40:22,039 - db_manager - INFO - Database manager initialized successfully
2025-09-18 10:40:22,039 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-18 10:40:22,039 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-18 10:40:22,039 - db_manager - INFO - Database manager initialized successfully
2025-09-18 10:40:22,040 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-18 10:40:22,040 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-18 10:40:22,040 - db_manager - INFO - Database manager initialized successfully
2025-09-18 10:40:22,040 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-18 10:40:22,040 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-18 10:40:22,040 - db_manager - INFO - Database manager initialized successfully
2025-09-18 10:40:22,040 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-18 10:41:38,387 - db_manager - INFO - create_complainant: Creating complainant with ID: CM-20250918-KOJH-61F6-B
2025-09-18 10:41:38,388 - db_manager - DEBUG - encrypted and hashed data at encrypt_and_hash_sensitive_data: {'complainant_id': 'CM-20250918-KOJH-61F6-B', 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_unique_id': 'CM-20250918-KOJH-61F6-B'}
2025-09-18 10:41:38,388 - db_manager - DEBUG - query_keys at generate_query_string: dict_keys(['complainant_id', 'complainant_province', 'complainant_district', 'complainant_unique_id'])
2025-09-18 10:41:38,388 - db_manager - DEBUG - Generated query: INSERT INTO complainants (complainant_id, complainant_province, complainant_district, complainant_unique_id) VALUES (%s, %s, %s, %s)
2025-09-18 10:41:38,388 - db_manager - DEBUG - len of query_keys: 4
2025-09-18 10:41:38,388 - db_manager - DEBUG - Generated query: INSERT INTO complainants (complainant_id, complainant_province, complainant_district, complainant_unique_id) VALUES (%s, %s, %s, %s)
2025-09-18 10:41:38,388 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 10:41:38,397 - db_manager - INFO - Starting database transaction
2025-09-18 10:41:38,400 - db_manager - INFO - Transaction committed successfully
2025-09-18 10:41:38,400 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 10:41:38,400 - db_manager - INFO - create_complainant: Successfully created complainant with ID: CM-20250918-KOJH-61F6-B
2025-09-18 10:41:38,400 - db_manager - INFO - create_grievance: Creating grievance with data: {'grievance_id': 'GR-20250918-KOJH-5DA1-B', 'complainant_id': 'CM-20250918-KOJH-61F6-B', 'grievance_description': 'dust everywhere in my house kids are coughing hard', 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_office': None, 'source': 'bot', 'complainant_unique_id': 'CM-20250918-KOJH-61F6-B'}
2025-09-18 10:41:38,400 - db_manager - INFO - create_grievance: Creating grievance with ID: GR-20250918-KOJH-5DA1-B
2025-09-18 10:41:38,400 - db_manager - INFO - create_grievance: Creating grievance with allowed fields: ['grievance_id', 'complainant_id', 'grievance_categories', 'grievance_categories_alternative', 'follow_up_question', 'grievance_summary', 'grievance_description', 'grievance_claimed_amount', 'grievance_location', 'is_temporary', 'source', 'language_code', 'grievance_classification_status']
2025-09-18 10:41:38,400 - db_manager - DEBUG - query_keys at generate_query_string: dict_keys(['grievance_id', 'complainant_id', 'grievance_description', 'source'])
2025-09-18 10:41:38,401 - db_manager - DEBUG - Generated query: INSERT INTO grievances (grievance_id, complainant_id, grievance_description, source) VALUES (%s, %s, %s, %s) RETURNING grievance_id
2025-09-18 10:41:38,401 - db_manager - DEBUG - len of query_keys: 4
2025-09-18 10:41:38,401 - db_manager - DEBUG - Generated query: INSERT INTO grievances (grievance_id, complainant_id, grievance_description, source) VALUES (%s, %s, %s, %s) RETURNING grievance_id
2025-09-18 10:41:38,401 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 10:41:38,406 - db_manager - INFO - Starting database transaction
2025-09-18 10:41:38,411 - db_manager - INFO - Transaction committed successfully
2025-09-18 10:41:38,411 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 10:41:38,411 - db_manager - INFO - create_grievance: Successfully created grievance with ID: GR-20250918-KOJH-5DA1-B
2025-09-18 10:42:13,753 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 10:42:13,759 - db_manager - INFO - Starting database transaction
2025-09-18 10:42:13,759 - db_manager - INFO - Executing get_complainant_by_id: 
            SELECT complainant_id, complainant_unique_id, complainant_full_name,    complainant_pho...
2025-09-18 10:42:13,760 - db_manager - INFO - get_complainant_by_id completed in 0.01s. Rows: 1
2025-09-18 10:42:13,761 - db_manager - INFO - Transaction committed successfully
2025-09-18 10:42:13,761 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 10:42:13,761 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 10:42:13,766 - db_manager - INFO - Starting database transaction
2025-09-18 10:42:13,766 - db_manager - INFO - Executing get_grievance_by_id: 
                SELECT g.*, c.complainant_full_name, c.complainant_phone, c.complainant_email,
    ...
2025-09-18 10:42:13,768 - db_manager - INFO - get_grievance_by_id completed in 0.01s. Rows: 1
2025-09-18 10:42:13,768 - db_manager - INFO - Transaction committed successfully
2025-09-18 10:42:13,768 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 10:42:13,769 - db_manager - DEBUG - get_grievance_by_id: grievance_id: {'grievance_id': 'GR-20250918-KOJH-5DA1-B', 'complainant_id': 'CM-20250918-KOJH-61F6-B', 'grievance_categories': ['Environmental - Air Pollution'], 'grievance_categories_alternative': [], 'follow_up_question': ['How does it affect the health of your relatives?'], 'grievance_summary': 'Dust from construction is entering the house, causing my kids to cough heavily.', 'grievance_description': 'dust everywhere in my house kids are coughing hard', 'grievance_claimed_amount': None, 'grievance_location': None, 'language_code': 'en', 'grievance_classification_status': 'pending', 'grievance_creation_date': datetime.datetime(2025, 9, 18, 10, 41, 38, 407036, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'grievance_modification_date': datetime.datetime(2025, 9, 18, 10, 41, 52, 722199, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'is_temporary': True, 'source': 'bot', 'complainant_full_name': None, 'complainant_phone': None, 'complainant_email': None, 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_municipality': None, 'complainant_ward': None, 'complainant_village': None, 'complainant_address': None}, results: [{'grievance_id': 'GR-20250918-KOJH-5DA1-B', 'complainant_id': 'CM-20250918-KOJH-61F6-B', 'grievance_categories': '["Environmental - Air Pollution"]', 'grievance_categories_alternative': '[]', 'follow_up_question': '["How does it affect the health of your relatives?"]', 'grievance_summary': 'Dust from construction is entering the house, causing my kids to cough heavily.', 'grievance_description': 'dust everywhere in my house kids are coughing hard', 'grievance_claimed_amount': None, 'grievance_location': None, 'language_code': 'en', 'grievance_classification_status': 'pending', 'grievance_creation_date': datetime.datetime(2025, 9, 18, 10, 41, 38, 407036, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'grievance_modification_date': datetime.datetime(2025, 9, 18, 10, 41, 52, 722199, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'is_temporary': True, 'source': 'bot', 'complainant_full_name': None, 'complainant_phone': None, 'complainant_email': None, 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_municipality': None, 'complainant_ward': None, 'complainant_village': None, 'complainant_address': None}]
2025-09-18 10:42:13,769 - db_manager - INFO - update_complainant: Updating complainant with ID: CM-20250918-KOJH-61F6-B
2025-09-18 10:42:13,769 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 10:42:13,775 - db_manager - INFO - Starting database transaction
2025-09-18 10:42:13,775 - db_manager - INFO - Executing encrypt_field: SELECT encode(pgp_sym_encrypt(%s, %s), 'hex') AS encrypted...
2025-09-18 10:42:13,778 - db_manager - INFO - encrypt_field completed in 0.01s. Rows: 1
2025-09-18 10:42:13,779 - db_manager - INFO - Transaction committed successfully
2025-09-18 10:42:13,779 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 10:42:13,779 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 10:42:13,784 - db_manager - INFO - Starting database transaction
2025-09-18 10:42:13,785 - db_manager - INFO - Executing encrypt_field: SELECT encode(pgp_sym_encrypt(%s, %s), 'hex') AS encrypted...
2025-09-18 10:42:13,786 - db_manager - INFO - encrypt_field completed in 0.01s. Rows: 1
2025-09-18 10:42:13,786 - db_manager - INFO - Transaction committed successfully
2025-09-18 10:42:13,786 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 10:42:13,786 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 10:42:13,790 - db_manager - INFO - Starting database transaction
2025-09-18 10:42:13,791 - db_manager - INFO - Executing encrypt_field: SELECT encode(pgp_sym_encrypt(%s, %s), 'hex') AS encrypted...
2025-09-18 10:42:13,792 - db_manager - INFO - encrypt_field completed in 0.01s. Rows: 1
2025-09-18 10:42:13,792 - db_manager - INFO - Transaction committed successfully
2025-09-18 10:42:13,792 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 10:42:13,792 - db_manager - DEBUG - encrypted phone number +9779876543210 at encrypt_complainant_data: c30d04070302f320ed3a38a9b93d6ed23f017f51cec456ce1cda9b88eb9b3aaaad56968a374f3e59fa42f6c266439ef650b7c81245ca6d7efba5812b9f65793eb744d5676572dd7f1d1dce98950cc784
2025-09-18 10:42:13,792 - db_manager - DEBUG - phone number +9779876543210 hashed to c95ee4a714418be9379a77482c9a8b2003400429703eabebc8d6d971e864f8e0 at hash_sensitive_data
2025-09-18 10:42:13,792 - db_manager - DEBUG - encrypted and hashed data at encrypt_and_hash_sensitive_data: {'complainant_full_name': 'c30d04070302b5710b667af7a7cf6dd23d01410cda2d93064e10400fbcda8db2e342b84fdb8f13fac3372cb61ad8c453248d532d039c5ef43fce45159a36b94c44efb487eea94111cb0423303b19', 'complainant_phone': 'c30d04070302f320ed3a38a9b93d6ed23f017f51cec456ce1cda9b88eb9b3aaaad56968a374f3e59fa42f6c266439ef650b7c81245ca6d7efba5812b9f65793eb744d5676572dd7f1d1dce98950cc784', 'complainant_email': 'c30d04070302a412706aacc96a337ad23d01df5f132f6d61218e946fe861bb7e754795e45bb10b84ce28475875e16457bd9074e4d2b7271453796b97a2b894c70a0b9fab300b82571308e7dd0c1b', 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_email_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'complainant_full_name_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'complainant_phone_hash': 'c95ee4a714418be9379a77482c9a8b2003400429703eabebc8d6d971e864f8e0'}
2025-09-18 10:42:13,792 - db_manager - DEBUG - encrypted_data at update_complainant: {'complainant_full_name': 'c30d04070302b5710b667af7a7cf6dd23d01410cda2d93064e10400fbcda8db2e342b84fdb8f13fac3372cb61ad8c453248d532d039c5ef43fce45159a36b94c44efb487eea94111cb0423303b19', 'complainant_phone': 'c30d04070302f320ed3a38a9b93d6ed23f017f51cec456ce1cda9b88eb9b3aaaad56968a374f3e59fa42f6c266439ef650b7c81245ca6d7efba5812b9f65793eb744d5676572dd7f1d1dce98950cc784', 'complainant_email': 'c30d04070302a412706aacc96a337ad23d01df5f132f6d61218e946fe861bb7e754795e45bb10b84ce28475875e16457bd9074e4d2b7271453796b97a2b894c70a0b9fab300b82571308e7dd0c1b', 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_email_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'complainant_full_name_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'complainant_phone_hash': 'c95ee4a714418be9379a77482c9a8b2003400429703eabebc8d6d971e864f8e0'}
2025-09-18 10:42:13,792 - db_manager - DEBUG - execute_update values: ('c30d04070302b5710b667af7a7cf6dd23d01410cda2d93064e10400fbcda8db2e342b84fdb8f13fac3372cb61ad8c453248d532d039c5ef43fce45159a36b94c44efb487eea94111cb0423303b19', 'c30d04070302f320ed3a38a9b93d6ed23f017f51cec456ce1cda9b88eb9b3aaaad56968a374f3e59fa42f6c266439ef650b7c81245ca6d7efba5812b9f65793eb744d5676572dd7f1d1dce98950cc784', 'c30d04070302a412706aacc96a337ad23d01df5f132f6d61218e946fe861bb7e754795e45bb10b84ce28475875e16457bd9074e4d2b7271453796b97a2b894c70a0b9fab300b82571308e7dd0c1b', 'Koshi', 'Jhapa', 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'c95ee4a714418be9379a77482c9a8b2003400429703eabebc8d6d971e864f8e0', 'CM-20250918-KOJH-61F6-B')
2025-09-18 10:42:13,792 - db_manager - DEBUG - execute_update query: UPDATE complainants SET complainant_full_name = %s, complainant_phone = %s, complainant_email = %s, complainant_province = %s, complainant_district = %s, complainant_email_hash = %s, complainant_full_name_hash = %s, complainant_phone_hash = %s WHERE complainant_id = %s
2025-09-18 10:42:13,792 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 10:42:13,797 - db_manager - INFO - Starting database transaction
2025-09-18 10:42:13,798 - db_manager - INFO - execute_update: Executing update query: UPDATE complainants SET complainant_full_name = %s, complainant_phone = %s, complainant_email = %s, ...
2025-09-18 10:42:13,799 - db_manager - INFO - execute_update: Update completed in 0.01s. Affected rows: 1
2025-09-18 10:42:13,801 - db_manager - INFO - Transaction committed successfully
2025-09-18 10:42:13,801 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 10:42:13,801 - db_manager - INFO - Complainant updated in db: CM-20250918-KOJH-61F6-B
2025-09-18 10:42:13,801 - db_manager - INFO - update_grievance: Updating grievance with ID: GR-20250918-KOJH-5DA1-B
2025-09-18 10:42:13,801 - db_manager - DEBUG - execute_update values: ('dust everywhere in my house kids are coughing hard', 'GR-20250918-KOJH-5DA1-B')
2025-09-18 10:42:13,801 - db_manager - DEBUG - execute_update query: 
                    UPDATE grievances 
                    SET grievance_description = %s, grievance_modification_date = CURRENT_TIMESTAMP
                    WHERE grievance_id = %s
                    RETURNING grievance_id
                
2025-09-18 10:42:13,801 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 10:42:13,806 - db_manager - INFO - Starting database transaction
2025-09-18 10:42:13,806 - db_manager - INFO - execute_update: Executing update query: 
                    UPDATE grievances 
                    SET grievance_description = %s, grievanc...
2025-09-18 10:42:13,807 - db_manager - INFO - execute_update: Update completed in 0.01s. Affected rows: 1
2025-09-18 10:42:13,810 - db_manager - INFO - Transaction committed successfully
2025-09-18 10:42:13,810 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 10:42:13,811 - db_manager - INFO - update_grievance: Updated grievance with ID: GR-20250918-KOJH-5DA1-B, rows affected: 1
2025-09-18 10:42:13,811 - db_manager - INFO - Grievance updated in db: GR-20250918-KOJH-5DA1-B
2025-09-18 10:42:13,811 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 10:42:13,817 - db_manager - INFO - Starting database transaction
2025-09-18 10:42:13,817 - db_manager - INFO - Executing get_grievance_files: 
            SELECT file_id, file_name, file_type, file_size, upload_timestamp
            FROM file...
2025-09-18 10:42:13,818 - db_manager - INFO - get_grievance_files completed in 0.01s. Rows: 0
2025-09-18 10:42:13,818 - db_manager - INFO - Transaction committed successfully
2025-09-18 10:42:13,818 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 10:42:13,819 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 10:42:13,824 - db_manager - INFO - Starting database transaction
2025-09-18 10:42:13,824 - db_manager - INFO - Executing get_grievance_files: 
            SELECT file_id, file_name, file_type, file_size, upload_timestamp
            FROM file...
2025-09-18 10:42:13,825 - db_manager - INFO - get_grievance_files completed in 0.01s. Rows: 0
2025-09-18 10:42:13,825 - db_manager - INFO - Transaction committed successfully
2025-09-18 10:42:13,825 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 10:42:14,562 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 10:42:14,567 - db_manager - INFO - Starting database transaction
2025-09-18 10:42:14,567 - db_manager - INFO - Executing get_grievance_by_id: 
                SELECT g.*, c.complainant_full_name, c.complainant_phone, c.complainant_email,
    ...
2025-09-18 10:42:14,569 - db_manager - INFO - get_grievance_by_id completed in 0.01s. Rows: 1
2025-09-18 10:42:14,569 - db_manager - INFO - Transaction committed successfully
2025-09-18 10:42:14,569 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 10:42:14,570 - db_manager - DEBUG - get_grievance_by_id: grievance_id: {'grievance_id': 'GR-20250918-KOJH-5DA1-B', 'complainant_id': 'CM-20250918-KOJH-61F6-B', 'grievance_categories': ['Environmental - Air Pollution'], 'grievance_categories_alternative': [], 'follow_up_question': ['How does it affect the health of your relatives?'], 'grievance_summary': 'Dust from construction is entering the house, causing my kids to cough heavily.', 'grievance_description': 'dust everywhere in my house kids are coughing hard', 'grievance_claimed_amount': None, 'grievance_location': None, 'language_code': 'en', 'grievance_classification_status': 'pending', 'grievance_creation_date': datetime.datetime(2025, 9, 18, 10, 41, 38, 407036, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'grievance_modification_date': datetime.datetime(2025, 9, 18, 10, 42, 13, 806709, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'is_temporary': True, 'source': 'bot', 'complainant_full_name': 'c30d04070302b5710b667af7a7cf6dd23d01410cda2d93064e10400fbcda8db2e342b84fdb8f13fac3372cb61ad8c453248d532d039c5ef43fce45159a36b94c44efb487eea94111cb0423303b19', 'complainant_phone': 'c30d04070302f320ed3a38a9b93d6ed23f017f51cec456ce1cda9b88eb9b3aaaad56968a374f3e59fa42f6c266439ef650b7c81245ca6d7efba5812b9f65793eb744d5676572dd7f1d1dce98950cc784', 'complainant_email': 'c30d04070302a412706aacc96a337ad23d01df5f132f6d61218e946fe861bb7e754795e45bb10b84ce28475875e16457bd9074e4d2b7271453796b97a2b894c70a0b9fab300b82571308e7dd0c1b', 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_municipality': None, 'complainant_ward': None, 'complainant_village': None, 'complainant_address': None}, results: [{'grievance_id': 'GR-20250918-KOJH-5DA1-B', 'complainant_id': 'CM-20250918-KOJH-61F6-B', 'grievance_categories': '["Environmental - Air Pollution"]', 'grievance_categories_alternative': '[]', 'follow_up_question': '["How does it affect the health of your relatives?"]', 'grievance_summary': 'Dust from construction is entering the house, causing my kids to cough heavily.', 'grievance_description': 'dust everywhere in my house kids are coughing hard', 'grievance_claimed_amount': None, 'grievance_location': None, 'language_code': 'en', 'grievance_classification_status': 'pending', 'grievance_creation_date': datetime.datetime(2025, 9, 18, 10, 41, 38, 407036, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'grievance_modification_date': datetime.datetime(2025, 9, 18, 10, 42, 13, 806709, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'is_temporary': True, 'source': 'bot', 'complainant_full_name': 'c30d04070302b5710b667af7a7cf6dd23d01410cda2d93064e10400fbcda8db2e342b84fdb8f13fac3372cb61ad8c453248d532d039c5ef43fce45159a36b94c44efb487eea94111cb0423303b19', 'complainant_phone': 'c30d04070302f320ed3a38a9b93d6ed23f017f51cec456ce1cda9b88eb9b3aaaad56968a374f3e59fa42f6c266439ef650b7c81245ca6d7efba5812b9f65793eb744d5676572dd7f1d1dce98950cc784', 'complainant_email': 'c30d04070302a412706aacc96a337ad23d01df5f132f6d61218e946fe861bb7e754795e45bb10b84ce28475875e16457bd9074e4d2b7271453796b97a2b894c70a0b9fab300b82571308e7dd0c1b', 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_municipality': None, 'complainant_ward': None, 'complainant_village': None, 'complainant_address': None}]
2025-09-18 10:42:16,888 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 10:42:16,894 - db_manager - INFO - Starting database transaction
2025-09-18 10:42:16,894 - db_manager - INFO - Executing get_complainant_id_from_grievance_id: 
            SELECT complainant_id
            FROM grievances
            WHERE grievance_id = %s
 ...
2025-09-18 10:42:16,895 - db_manager - INFO - get_complainant_id_from_grievance_id completed in 0.01s. Rows: 1
2025-09-18 10:42:16,895 - db_manager - INFO - Transaction committed successfully
2025-09-18 10:42:16,895 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 10:42:16,895 - db_manager - INFO - update_complainant: Updating complainant with ID: CM-20250918-KOJH-61F6-B
2025-09-18 10:42:16,895 - db_manager - DEBUG - encrypted and hashed data at encrypt_and_hash_sensitive_data: {}
2025-09-18 10:42:16,896 - db_manager - DEBUG - encrypted_data at update_complainant: {}
2025-09-18 10:42:16,896 - db_manager - DEBUG - No complainant field to update
2025-09-18 10:42:16,896 - db_manager - INFO - Complainant updated in db: GR-20250918-KOJH-5DA1-B
2025-09-18 10:42:16,896 - db_manager - INFO - update_grievance: Updating grievance with ID: GR-20250918-KOJH-5DA1-B
2025-09-18 10:42:16,896 - db_manager - DEBUG - execute_update values: ('["Environmental - Air Pollution"]', 'GR-20250918-KOJH-5DA1-B')
2025-09-18 10:42:16,896 - db_manager - DEBUG - execute_update query: 
                    UPDATE grievances 
                    SET grievance_categories = %s, grievance_modification_date = CURRENT_TIMESTAMP
                    WHERE grievance_id = %s
                    RETURNING grievance_id
                
2025-09-18 10:42:16,896 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 10:42:16,901 - db_manager - INFO - Starting database transaction
2025-09-18 10:42:16,901 - db_manager - INFO - execute_update: Executing update query: 
                    UPDATE grievances 
                    SET grievance_categories = %s, grievance...
2025-09-18 10:42:16,902 - db_manager - INFO - execute_update: Update completed in 0.01s. Affected rows: 1
2025-09-18 10:42:16,905 - db_manager - INFO - Transaction committed successfully
2025-09-18 10:42:16,905 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 10:42:16,905 - db_manager - INFO - update_grievance: Updated grievance with ID: GR-20250918-KOJH-5DA1-B, rows affected: 1
2025-09-18 10:42:16,905 - db_manager - INFO - Grievance updated in db: GR-20250918-KOJH-5DA1-B
2025-09-18 10:42:16,954 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 10:42:16,960 - db_manager - INFO - Starting database transaction
2025-09-18 10:42:16,960 - db_manager - INFO - Executing get_grievance_files: 
            SELECT file_id, file_name, file_type, file_size, upload_timestamp
            FROM file...
2025-09-18 10:42:16,961 - db_manager - INFO - get_grievance_files completed in 0.01s. Rows: 0
2025-09-18 10:42:16,961 - db_manager - INFO - Transaction committed successfully
2025-09-18 10:42:16,961 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 10:42:16,962 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 10:42:16,967 - db_manager - INFO - Starting database transaction
2025-09-18 10:42:16,967 - db_manager - INFO - Executing get_complainant_by_id: 
            SELECT complainant_id, complainant_unique_id, complainant_full_name,    complainant_pho...
2025-09-18 10:42:16,968 - db_manager - INFO - get_complainant_by_id completed in 0.01s. Rows: 1
2025-09-18 10:42:16,968 - db_manager - INFO - Transaction committed successfully
2025-09-18 10:42:16,968 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 10:42:16,968 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 10:42:16,973 - db_manager - INFO - Starting database transaction
2025-09-18 10:42:16,973 - db_manager - INFO - Executing decrypt_field: SELECT pgp_sym_decrypt(decode(%s, 'hex'), %s) AS decrypted...
2025-09-18 10:42:16,974 - db_manager - INFO - decrypt_field completed in 0.01s. Rows: 1
2025-09-18 10:42:16,975 - db_manager - INFO - Transaction committed successfully
2025-09-18 10:42:16,975 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 10:42:16,975 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 10:42:16,980 - db_manager - INFO - Starting database transaction
2025-09-18 10:42:16,980 - db_manager - INFO - Executing decrypt_field: SELECT pgp_sym_decrypt(decode(%s, 'hex'), %s) AS decrypted...
2025-09-18 10:42:16,981 - db_manager - INFO - decrypt_field completed in 0.01s. Rows: 1
2025-09-18 10:42:16,981 - db_manager - INFO - Transaction committed successfully
2025-09-18 10:42:16,981 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 10:42:16,981 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 10:42:16,986 - db_manager - INFO - Starting database transaction
2025-09-18 10:42:16,986 - db_manager - INFO - Executing decrypt_field: SELECT pgp_sym_decrypt(decode(%s, 'hex'), %s) AS decrypted...
2025-09-18 10:42:16,987 - db_manager - INFO - decrypt_field completed in 0.01s. Rows: 1
2025-09-18 10:42:16,987 - db_manager - INFO - Transaction committed successfully
2025-09-18 10:42:16,987 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 10:42:16,987 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 10:42:16,992 - db_manager - INFO - Starting database transaction
2025-09-18 10:42:16,992 - db_manager - INFO - Executing get_grievance_by_id: 
                SELECT g.*, c.complainant_full_name, c.complainant_phone, c.complainant_email,
    ...
2025-09-18 10:42:16,993 - db_manager - INFO - get_grievance_by_id completed in 0.01s. Rows: 1
2025-09-18 10:42:16,993 - db_manager - INFO - Transaction committed successfully
2025-09-18 10:42:16,993 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 10:42:16,993 - db_manager - DEBUG - get_grievance_by_id: grievance_id: {'grievance_id': 'GR-20250918-KOJH-5DA1-B', 'complainant_id': 'CM-20250918-KOJH-61F6-B', 'grievance_categories': ['Environmental - Air Pollution'], 'grievance_categories_alternative': [], 'follow_up_question': ['How does it affect the health of your relatives?'], 'grievance_summary': 'Dust from construction is entering the house, causing my kids to cough heavily.', 'grievance_description': 'dust everywhere in my house kids are coughing hard', 'grievance_claimed_amount': None, 'grievance_location': None, 'language_code': 'en', 'grievance_classification_status': 'pending', 'grievance_creation_date': datetime.datetime(2025, 9, 18, 10, 41, 38, 407036, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'grievance_modification_date': datetime.datetime(2025, 9, 18, 10, 42, 16, 901741, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'is_temporary': True, 'source': 'bot', 'complainant_full_name': 'c30d04070302b5710b667af7a7cf6dd23d01410cda2d93064e10400fbcda8db2e342b84fdb8f13fac3372cb61ad8c453248d532d039c5ef43fce45159a36b94c44efb487eea94111cb0423303b19', 'complainant_phone': 'c30d04070302f320ed3a38a9b93d6ed23f017f51cec456ce1cda9b88eb9b3aaaad56968a374f3e59fa42f6c266439ef650b7c81245ca6d7efba5812b9f65793eb744d5676572dd7f1d1dce98950cc784', 'complainant_email': 'c30d04070302a412706aacc96a337ad23d01df5f132f6d61218e946fe861bb7e754795e45bb10b84ce28475875e16457bd9074e4d2b7271453796b97a2b894c70a0b9fab300b82571308e7dd0c1b', 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_municipality': None, 'complainant_ward': None, 'complainant_village': None, 'complainant_address': None}, results: [{'grievance_id': 'GR-20250918-KOJH-5DA1-B', 'complainant_id': 'CM-20250918-KOJH-61F6-B', 'grievance_categories': '["Environmental - Air Pollution"]', 'grievance_categories_alternative': '[]', 'follow_up_question': '["How does it affect the health of your relatives?"]', 'grievance_summary': 'Dust from construction is entering the house, causing my kids to cough heavily.', 'grievance_description': 'dust everywhere in my house kids are coughing hard', 'grievance_claimed_amount': None, 'grievance_location': None, 'language_code': 'en', 'grievance_classification_status': 'pending', 'grievance_creation_date': datetime.datetime(2025, 9, 18, 10, 41, 38, 407036, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'grievance_modification_date': datetime.datetime(2025, 9, 18, 10, 42, 16, 901741, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'is_temporary': True, 'source': 'bot', 'complainant_full_name': 'c30d04070302b5710b667af7a7cf6dd23d01410cda2d93064e10400fbcda8db2e342b84fdb8f13fac3372cb61ad8c453248d532d039c5ef43fce45159a36b94c44efb487eea94111cb0423303b19', 'complainant_phone': 'c30d04070302f320ed3a38a9b93d6ed23f017f51cec456ce1cda9b88eb9b3aaaad56968a374f3e59fa42f6c266439ef650b7c81245ca6d7efba5812b9f65793eb744d5676572dd7f1d1dce98950cc784', 'complainant_email': 'c30d04070302a412706aacc96a337ad23d01df5f132f6d61218e946fe861bb7e754795e45bb10b84ce28475875e16457bd9074e4d2b7271453796b97a2b894c70a0b9fab300b82571308e7dd0c1b', 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_municipality': None, 'complainant_ward': None, 'complainant_village': None, 'complainant_address': None}]
2025-09-18 10:42:16,993 - db_manager - INFO - update_complainant: Updating complainant with ID: CM-20250918-KOJH-61F6-B
2025-09-18 10:42:16,994 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 10:42:16,998 - db_manager - INFO - Starting database transaction
2025-09-18 10:42:16,998 - db_manager - INFO - Executing encrypt_field: SELECT encode(pgp_sym_encrypt(%s, %s), 'hex') AS encrypted...
2025-09-18 10:42:16,999 - db_manager - INFO - encrypt_field completed in 0.01s. Rows: 1
2025-09-18 10:42:16,999 - db_manager - INFO - Transaction committed successfully
2025-09-18 10:42:16,999 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 10:42:17,000 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 10:42:17,004 - db_manager - INFO - Starting database transaction
2025-09-18 10:42:17,004 - db_manager - INFO - Executing encrypt_field: SELECT encode(pgp_sym_encrypt(%s, %s), 'hex') AS encrypted...
2025-09-18 10:42:17,005 - db_manager - INFO - encrypt_field completed in 0.01s. Rows: 1
2025-09-18 10:42:17,006 - db_manager - INFO - Transaction committed successfully
2025-09-18 10:42:17,006 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 10:42:17,006 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 10:42:17,010 - db_manager - INFO - Starting database transaction
2025-09-18 10:42:17,011 - db_manager - INFO - Executing encrypt_field: SELECT encode(pgp_sym_encrypt(%s, %s), 'hex') AS encrypted...
2025-09-18 10:42:17,012 - db_manager - INFO - encrypt_field completed in 0.01s. Rows: 1
2025-09-18 10:42:17,012 - db_manager - INFO - Transaction committed successfully
2025-09-18 10:42:17,012 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 10:42:17,012 - db_manager - DEBUG - encrypted phone number +9779876543210 at encrypt_complainant_data: c30d040703022c5e6efc0ad92ea573d23f019875886a738a11b021efa5f4cd771aff87ef4f93bb303787d4051050a01062986509596f22b5094f371ca82233c64112867e1c4e2bb950c5e5118b60aa09
2025-09-18 10:42:17,012 - db_manager - DEBUG - phone number +9779876543210 hashed to c95ee4a714418be9379a77482c9a8b2003400429703eabebc8d6d971e864f8e0 at hash_sensitive_data
2025-09-18 10:42:17,012 - db_manager - DEBUG - encrypted and hashed data at encrypt_and_hash_sensitive_data: {'complainant_full_name': 'c30d0407030221d1d99dc52a76db7dd23d0125b3b5302704c491bba412efc922f1787cc3833496bd09397576fc54e69a289c81ecd3069ce8ccb152f4e3df0c4f7bfe57b7c82c29823e5867daf6cf', 'complainant_phone': 'c30d040703022c5e6efc0ad92ea573d23f019875886a738a11b021efa5f4cd771aff87ef4f93bb303787d4051050a01062986509596f22b5094f371ca82233c64112867e1c4e2bb950c5e5118b60aa09', 'complainant_email': 'c30d04070302ba59822d403f8a397ad23d0184f1d7da155c2a95d9d7b11a6745044c143261c76a9ac362883d101c5c20924003485c1b69b45dfe74af8f7d3c16a011b74f79d9251935a8f640e031', 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_email_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'complainant_full_name_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'complainant_phone_hash': 'c95ee4a714418be9379a77482c9a8b2003400429703eabebc8d6d971e864f8e0'}
2025-09-18 10:42:17,012 - db_manager - DEBUG - encrypted_data at update_complainant: {'complainant_full_name': 'c30d0407030221d1d99dc52a76db7dd23d0125b3b5302704c491bba412efc922f1787cc3833496bd09397576fc54e69a289c81ecd3069ce8ccb152f4e3df0c4f7bfe57b7c82c29823e5867daf6cf', 'complainant_phone': 'c30d040703022c5e6efc0ad92ea573d23f019875886a738a11b021efa5f4cd771aff87ef4f93bb303787d4051050a01062986509596f22b5094f371ca82233c64112867e1c4e2bb950c5e5118b60aa09', 'complainant_email': 'c30d04070302ba59822d403f8a397ad23d0184f1d7da155c2a95d9d7b11a6745044c143261c76a9ac362883d101c5c20924003485c1b69b45dfe74af8f7d3c16a011b74f79d9251935a8f640e031', 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_email_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'complainant_full_name_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'complainant_phone_hash': 'c95ee4a714418be9379a77482c9a8b2003400429703eabebc8d6d971e864f8e0'}
2025-09-18 10:42:17,012 - db_manager - DEBUG - execute_update values: ('c30d0407030221d1d99dc52a76db7dd23d0125b3b5302704c491bba412efc922f1787cc3833496bd09397576fc54e69a289c81ecd3069ce8ccb152f4e3df0c4f7bfe57b7c82c29823e5867daf6cf', 'c30d040703022c5e6efc0ad92ea573d23f019875886a738a11b021efa5f4cd771aff87ef4f93bb303787d4051050a01062986509596f22b5094f371ca82233c64112867e1c4e2bb950c5e5118b60aa09', 'c30d04070302ba59822d403f8a397ad23d0184f1d7da155c2a95d9d7b11a6745044c143261c76a9ac362883d101c5c20924003485c1b69b45dfe74af8f7d3c16a011b74f79d9251935a8f640e031', 'Koshi', 'Jhapa', 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'c95ee4a714418be9379a77482c9a8b2003400429703eabebc8d6d971e864f8e0', 'CM-20250918-KOJH-61F6-B')
2025-09-18 10:42:17,012 - db_manager - DEBUG - execute_update query: UPDATE complainants SET complainant_full_name = %s, complainant_phone = %s, complainant_email = %s, complainant_province = %s, complainant_district = %s, complainant_email_hash = %s, complainant_full_name_hash = %s, complainant_phone_hash = %s WHERE complainant_id = %s
2025-09-18 10:42:17,012 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 10:42:17,017 - db_manager - INFO - Starting database transaction
2025-09-18 10:42:17,017 - db_manager - INFO - execute_update: Executing update query: UPDATE complainants SET complainant_full_name = %s, complainant_phone = %s, complainant_email = %s, ...
2025-09-18 10:42:17,018 - db_manager - INFO - execute_update: Update completed in 0.01s. Affected rows: 1
2025-09-18 10:42:17,020 - db_manager - INFO - Transaction committed successfully
2025-09-18 10:42:17,021 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 10:42:17,021 - db_manager - INFO - Complainant updated in db: CM-20250918-KOJH-61F6-B
2025-09-18 10:42:17,021 - db_manager - INFO - update_grievance: Updating grievance with ID: GR-20250918-KOJH-5DA1-B
2025-09-18 10:42:17,021 - db_manager - DEBUG - execute_update values: ('["Environmental - Air Pollution"]', 'Not provided', 'dust everywhere in my house kids are coughing hard', 'GR-20250918-KOJH-5DA1-B')
2025-09-18 10:42:17,021 - db_manager - DEBUG - execute_update query: 
                    UPDATE grievances 
                    SET grievance_categories = %s, grievance_summary = %s, grievance_description = %s, grievance_modification_date = CURRENT_TIMESTAMP
                    WHERE grievance_id = %s
                    RETURNING grievance_id
                
2025-09-18 10:42:17,021 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 10:42:17,026 - db_manager - INFO - Starting database transaction
2025-09-18 10:42:17,026 - db_manager - INFO - execute_update: Executing update query: 
                    UPDATE grievances 
                    SET grievance_categories = %s, grievance...
2025-09-18 10:42:17,027 - db_manager - INFO - execute_update: Update completed in 0.01s. Affected rows: 1
2025-09-18 10:42:17,029 - db_manager - INFO - Transaction committed successfully
2025-09-18 10:42:17,029 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 10:42:17,029 - db_manager - INFO - update_grievance: Updated grievance with ID: GR-20250918-KOJH-5DA1-B, rows affected: 1
2025-09-18 10:42:17,029 - db_manager - INFO - Grievance updated in db: GR-20250918-KOJH-5DA1-B
2025-09-18 11:00:44,613 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-18 11:00:44,613 - db_manager - INFO - Database manager initialized successfully
2025-09-18 11:00:44,613 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-18 11:00:44,614 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-18 11:00:44,614 - db_manager - INFO - Database manager initialized successfully
2025-09-18 11:00:44,614 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-18 11:00:44,614 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-18 11:00:44,614 - db_manager - INFO - Database manager initialized successfully
2025-09-18 11:00:44,614 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-18 11:00:44,614 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-18 11:00:44,614 - db_manager - INFO - Database manager initialized successfully
2025-09-18 11:00:44,614 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-18 11:00:44,614 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-18 11:00:44,614 - db_manager - INFO - Database manager initialized successfully
2025-09-18 11:00:44,614 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-18 11:00:44,614 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-18 11:00:44,614 - db_manager - INFO - Database manager initialized successfully
2025-09-18 11:00:44,614 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-18 11:00:44,614 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-18 11:00:44,614 - db_manager - INFO - Database manager initialized successfully
2025-09-18 11:00:44,614 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-18 11:00:44,614 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-18 11:00:44,615 - db_manager - INFO - Database manager initialized successfully
2025-09-18 11:00:44,615 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-18 11:00:44,615 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-18 11:00:44,615 - db_manager - INFO - Database manager initialized successfully
2025-09-18 11:00:44,615 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-18 11:00:44,615 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-18 11:00:44,615 - db_manager - INFO - Database manager initialized successfully
2025-09-18 11:00:44,615 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-18 11:09:47,039 - db_manager - INFO - create_complainant: Creating complainant with ID: CM-20250918-KOJH-9363-B
2025-09-18 11:09:47,039 - db_manager - DEBUG - encrypted and hashed data at encrypt_and_hash_sensitive_data: {'complainant_id': 'CM-20250918-KOJH-9363-B', 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_unique_id': 'CM-20250918-KOJH-9363-B'}
2025-09-18 11:09:47,039 - db_manager - DEBUG - query_keys at generate_query_string: dict_keys(['complainant_id', 'complainant_province', 'complainant_district', 'complainant_unique_id'])
2025-09-18 11:09:47,039 - db_manager - DEBUG - Generated query: INSERT INTO complainants (complainant_id, complainant_province, complainant_district, complainant_unique_id) VALUES (%s, %s, %s, %s)
2025-09-18 11:09:47,039 - db_manager - DEBUG - len of query_keys: 4
2025-09-18 11:09:47,039 - db_manager - DEBUG - Generated query: INSERT INTO complainants (complainant_id, complainant_province, complainant_district, complainant_unique_id) VALUES (%s, %s, %s, %s)
2025-09-18 11:09:47,039 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 11:09:47,047 - db_manager - INFO - Starting database transaction
2025-09-18 11:09:47,051 - db_manager - INFO - Transaction committed successfully
2025-09-18 11:09:47,051 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 11:09:47,051 - db_manager - INFO - create_complainant: Successfully created complainant with ID: CM-20250918-KOJH-9363-B
2025-09-18 11:09:47,051 - db_manager - INFO - create_grievance: Creating grievance with data: {'grievance_id': 'GR-20250918-KOJH-99F6-B', 'complainant_id': 'CM-20250918-KOJH-9363-B', 'grievance_description': 'dust everywhere in my house kids are coughing hard', 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_office': None, 'source': 'bot', 'complainant_unique_id': 'CM-20250918-KOJH-9363-B'}
2025-09-18 11:09:47,051 - db_manager - INFO - create_grievance: Creating grievance with ID: GR-20250918-KOJH-99F6-B
2025-09-18 11:09:47,051 - db_manager - INFO - create_grievance: Creating grievance with allowed fields: ['grievance_id', 'complainant_id', 'grievance_categories', 'grievance_categories_alternative', 'follow_up_question', 'grievance_summary', 'grievance_description', 'grievance_claimed_amount', 'grievance_location', 'is_temporary', 'source', 'language_code', 'grievance_classification_status']
2025-09-18 11:09:47,052 - db_manager - DEBUG - query_keys at generate_query_string: dict_keys(['grievance_id', 'complainant_id', 'grievance_description', 'source'])
2025-09-18 11:09:47,052 - db_manager - DEBUG - Generated query: INSERT INTO grievances (grievance_id, complainant_id, grievance_description, source) VALUES (%s, %s, %s, %s) RETURNING grievance_id
2025-09-18 11:09:47,052 - db_manager - DEBUG - len of query_keys: 4
2025-09-18 11:09:47,052 - db_manager - DEBUG - Generated query: INSERT INTO grievances (grievance_id, complainant_id, grievance_description, source) VALUES (%s, %s, %s, %s) RETURNING grievance_id
2025-09-18 11:09:47,052 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 11:09:47,057 - db_manager - INFO - Starting database transaction
2025-09-18 11:09:47,062 - db_manager - INFO - Transaction committed successfully
2025-09-18 11:09:47,062 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 11:09:47,062 - db_manager - INFO - create_grievance: Successfully created grievance with ID: GR-20250918-KOJH-99F6-B
2025-09-18 11:09:49,877 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 11:09:49,882 - db_manager - INFO - Starting database transaction
2025-09-18 11:09:49,883 - db_manager - INFO - Executing get_complainant_by_id: 
            SELECT complainant_id, complainant_unique_id, complainant_full_name,    complainant_pho...
2025-09-18 11:09:49,884 - db_manager - INFO - get_complainant_by_id completed in 0.01s. Rows: 1
2025-09-18 11:09:49,884 - db_manager - INFO - Transaction committed successfully
2025-09-18 11:09:49,884 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 11:09:49,884 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 11:09:49,889 - db_manager - INFO - Starting database transaction
2025-09-18 11:09:49,889 - db_manager - INFO - Executing get_grievance_by_id: 
                SELECT g.*, c.complainant_full_name, c.complainant_phone, c.complainant_email,
    ...
2025-09-18 11:09:49,891 - db_manager - INFO - get_grievance_by_id completed in 0.01s. Rows: 1
2025-09-18 11:09:49,891 - db_manager - INFO - Transaction committed successfully
2025-09-18 11:09:49,891 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 11:09:49,891 - db_manager - DEBUG - get_grievance_by_id: grievance_id: {'grievance_id': 'GR-20250918-KOJH-99F6-B', 'complainant_id': 'CM-20250918-KOJH-9363-B', 'grievance_categories': None, 'grievance_categories_alternative': None, 'follow_up_question': None, 'grievance_summary': None, 'grievance_description': 'dust everywhere in my house kids are coughing hard', 'grievance_claimed_amount': None, 'grievance_location': None, 'language_code': 'ne', 'grievance_classification_status': 'pending', 'grievance_creation_date': datetime.datetime(2025, 9, 18, 11, 9, 47, 57660, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'grievance_modification_date': datetime.datetime(2025, 9, 18, 11, 9, 47, 57660, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'is_temporary': True, 'source': 'bot', 'complainant_full_name': None, 'complainant_phone': None, 'complainant_email': None, 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_municipality': None, 'complainant_ward': None, 'complainant_village': None, 'complainant_address': None}, results: [{'grievance_id': 'GR-20250918-KOJH-99F6-B', 'complainant_id': 'CM-20250918-KOJH-9363-B', 'grievance_categories': None, 'grievance_categories_alternative': None, 'follow_up_question': None, 'grievance_summary': None, 'grievance_description': 'dust everywhere in my house kids are coughing hard', 'grievance_claimed_amount': None, 'grievance_location': None, 'language_code': 'ne', 'grievance_classification_status': 'pending', 'grievance_creation_date': datetime.datetime(2025, 9, 18, 11, 9, 47, 57660, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'grievance_modification_date': datetime.datetime(2025, 9, 18, 11, 9, 47, 57660, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'is_temporary': True, 'source': 'bot', 'complainant_full_name': None, 'complainant_phone': None, 'complainant_email': None, 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_municipality': None, 'complainant_ward': None, 'complainant_village': None, 'complainant_address': None}]
2025-09-18 11:09:49,891 - db_manager - INFO - update_complainant: Updating complainant with ID: CM-20250918-KOJH-9363-B
2025-09-18 11:09:49,891 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 11:09:49,896 - db_manager - INFO - Starting database transaction
2025-09-18 11:09:49,896 - db_manager - INFO - Executing encrypt_field: SELECT encode(pgp_sym_encrypt(%s, %s), 'hex') AS encrypted...
2025-09-18 11:09:49,899 - db_manager - INFO - encrypt_field completed in 0.01s. Rows: 1
2025-09-18 11:09:49,899 - db_manager - INFO - Transaction committed successfully
2025-09-18 11:09:49,899 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 11:09:49,900 - db_manager - DEBUG - encrypted phone number Not provided at encrypt_complainant_data: c30d040703024111b234ada05d5c7cd23d011fe2bb10f943edc525d7b96e1658eb12cd2bd4c046c676b77a6a63321ab0ff482bc0be101692c40c1d0900c28eb45181b1748a74ac1e9761284989f7
2025-09-18 11:09:49,900 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 11:09:49,904 - db_manager - INFO - Starting database transaction
2025-09-18 11:09:49,904 - db_manager - INFO - Executing encrypt_field: SELECT encode(pgp_sym_encrypt(%s, %s), 'hex') AS encrypted...
2025-09-18 11:09:49,905 - db_manager - INFO - encrypt_field completed in 0.01s. Rows: 1
2025-09-18 11:09:49,906 - db_manager - INFO - Transaction committed successfully
2025-09-18 11:09:49,906 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 11:09:49,906 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 11:09:49,910 - db_manager - INFO - Starting database transaction
2025-09-18 11:09:49,910 - db_manager - INFO - Executing encrypt_field: SELECT encode(pgp_sym_encrypt(%s, %s), 'hex') AS encrypted...
2025-09-18 11:09:49,911 - db_manager - INFO - encrypt_field completed in 0.01s. Rows: 1
2025-09-18 11:09:49,911 - db_manager - INFO - Transaction committed successfully
2025-09-18 11:09:49,911 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 11:09:49,912 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 11:09:49,917 - db_manager - INFO - Starting database transaction
2025-09-18 11:09:49,917 - db_manager - INFO - Executing encrypt_field: SELECT encode(pgp_sym_encrypt(%s, %s), 'hex') AS encrypted...
2025-09-18 11:09:49,918 - db_manager - INFO - encrypt_field completed in 0.01s. Rows: 1
2025-09-18 11:09:49,918 - db_manager - INFO - Transaction committed successfully
2025-09-18 11:09:49,918 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 11:09:49,918 - db_manager - DEBUG - phone number Not provided hashed to d83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f at hash_sensitive_data
2025-09-18 11:09:49,918 - db_manager - DEBUG - encrypted and hashed data at encrypt_and_hash_sensitive_data: {'complainant_full_name': 'c30d040703021eed85c64f3488ea75d23d01006d98041f71dc8a64a8bfa728b139e29f2a5d0788f97cf5c7d8c267c8ce4dcc895ab5b27718b34c8e8e54103dbe9beea187b9a5e036b7e1fb6a440a', 'complainant_phone': 'c30d040703024111b234ada05d5c7cd23d011fe2bb10f943edc525d7b96e1658eb12cd2bd4c046c676b77a6a63321ab0ff482bc0be101692c40c1d0900c28eb45181b1748a74ac1e9761284989f7', 'complainant_email': 'c30d04070302c3c3adcdbb7a7ca26ad23d011d1afbd15a4e044c2303d3c54e64a076275eb8ec7c5e2b6dae6fe0f610c39dc37df71d9d0b8ec0602715d561a6f466052c22c7a2f6e07e0496382fc5', 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_municipality': 'Not provided', 'complainant_village': 'Not provided', 'complainant_address': 'c30d04070302e1a1e6ebd4b5099973d23d01383333440484e832c064c27ffb585976df354b36c3995503d0e3840ab9382b4495072b2811bc90dbae2566c2a1c1a684a069ee04e195043fd6e725b7', 'complainant_phone_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'complainant_email_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'complainant_full_name_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f'}
2025-09-18 11:09:49,918 - db_manager - DEBUG - encrypted_data at update_complainant: {'complainant_full_name': 'c30d040703021eed85c64f3488ea75d23d01006d98041f71dc8a64a8bfa728b139e29f2a5d0788f97cf5c7d8c267c8ce4dcc895ab5b27718b34c8e8e54103dbe9beea187b9a5e036b7e1fb6a440a', 'complainant_phone': 'c30d040703024111b234ada05d5c7cd23d011fe2bb10f943edc525d7b96e1658eb12cd2bd4c046c676b77a6a63321ab0ff482bc0be101692c40c1d0900c28eb45181b1748a74ac1e9761284989f7', 'complainant_email': 'c30d04070302c3c3adcdbb7a7ca26ad23d011d1afbd15a4e044c2303d3c54e64a076275eb8ec7c5e2b6dae6fe0f610c39dc37df71d9d0b8ec0602715d561a6f466052c22c7a2f6e07e0496382fc5', 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_municipality': 'Not provided', 'complainant_village': 'Not provided', 'complainant_address': 'c30d04070302e1a1e6ebd4b5099973d23d01383333440484e832c064c27ffb585976df354b36c3995503d0e3840ab9382b4495072b2811bc90dbae2566c2a1c1a684a069ee04e195043fd6e725b7', 'complainant_phone_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'complainant_email_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'complainant_full_name_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f'}
2025-09-18 11:09:49,918 - db_manager - DEBUG - execute_update values: ('c30d040703021eed85c64f3488ea75d23d01006d98041f71dc8a64a8bfa728b139e29f2a5d0788f97cf5c7d8c267c8ce4dcc895ab5b27718b34c8e8e54103dbe9beea187b9a5e036b7e1fb6a440a', 'c30d040703024111b234ada05d5c7cd23d011fe2bb10f943edc525d7b96e1658eb12cd2bd4c046c676b77a6a63321ab0ff482bc0be101692c40c1d0900c28eb45181b1748a74ac1e9761284989f7', 'c30d04070302c3c3adcdbb7a7ca26ad23d011d1afbd15a4e044c2303d3c54e64a076275eb8ec7c5e2b6dae6fe0f610c39dc37df71d9d0b8ec0602715d561a6f466052c22c7a2f6e07e0496382fc5', 'Koshi', 'Jhapa', 'Not provided', 'Not provided', 'c30d04070302e1a1e6ebd4b5099973d23d01383333440484e832c064c27ffb585976df354b36c3995503d0e3840ab9382b4495072b2811bc90dbae2566c2a1c1a684a069ee04e195043fd6e725b7', 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'CM-20250918-KOJH-9363-B')
2025-09-18 11:09:49,919 - db_manager - DEBUG - execute_update query: UPDATE complainants SET complainant_full_name = %s, complainant_phone = %s, complainant_email = %s, complainant_province = %s, complainant_district = %s, complainant_municipality = %s, complainant_village = %s, complainant_address = %s, complainant_phone_hash = %s, complainant_email_hash = %s, complainant_full_name_hash = %s WHERE complainant_id = %s
2025-09-18 11:09:49,919 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 11:09:49,923 - db_manager - INFO - Starting database transaction
2025-09-18 11:09:49,923 - db_manager - INFO - execute_update: Executing update query: UPDATE complainants SET complainant_full_name = %s, complainant_phone = %s, complainant_email = %s, ...
2025-09-18 11:09:49,924 - db_manager - INFO - execute_update: Update completed in 0.01s. Affected rows: 1
2025-09-18 11:09:49,926 - db_manager - INFO - Transaction committed successfully
2025-09-18 11:09:49,926 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 11:09:49,926 - db_manager - INFO - Complainant updated in db: CM-20250918-KOJH-9363-B
2025-09-18 11:09:49,926 - db_manager - INFO - update_grievance: Updating grievance with ID: GR-20250918-KOJH-99F6-B
2025-09-18 11:09:49,926 - db_manager - DEBUG - execute_update values: ('dust everywhere in my house kids are coughing hard', 'GR-20250918-KOJH-99F6-B')
2025-09-18 11:09:49,926 - db_manager - DEBUG - execute_update query: 
                    UPDATE grievances 
                    SET grievance_description = %s, grievance_modification_date = CURRENT_TIMESTAMP
                    WHERE grievance_id = %s
                    RETURNING grievance_id
                
2025-09-18 11:09:49,926 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 11:09:49,931 - db_manager - INFO - Starting database transaction
2025-09-18 11:09:49,931 - db_manager - INFO - execute_update: Executing update query: 
                    UPDATE grievances 
                    SET grievance_description = %s, grievanc...
2025-09-18 11:09:49,932 - db_manager - INFO - execute_update: Update completed in 0.01s. Affected rows: 1
2025-09-18 11:09:49,935 - db_manager - INFO - Transaction committed successfully
2025-09-18 11:09:49,935 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 11:09:49,935 - db_manager - INFO - update_grievance: Updated grievance with ID: GR-20250918-KOJH-99F6-B, rows affected: 1
2025-09-18 11:09:49,935 - db_manager - INFO - Grievance updated in db: GR-20250918-KOJH-99F6-B
2025-09-18 11:09:49,935 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 11:09:49,940 - db_manager - INFO - Starting database transaction
2025-09-18 11:09:49,940 - db_manager - INFO - Executing get_grievance_files: 
            SELECT file_id, file_name, file_type, file_size, upload_timestamp
            FROM file...
2025-09-18 11:09:49,941 - db_manager - INFO - get_grievance_files completed in 0.01s. Rows: 0
2025-09-18 11:09:49,941 - db_manager - INFO - Transaction committed successfully
2025-09-18 11:09:49,941 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 11:09:49,941 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 11:09:49,946 - db_manager - INFO - Starting database transaction
2025-09-18 11:09:49,946 - db_manager - INFO - Executing get_grievance_files: 
            SELECT file_id, file_name, file_type, file_size, upload_timestamp
            FROM file...
2025-09-18 11:09:49,947 - db_manager - INFO - get_grievance_files completed in 0.01s. Rows: 0
2025-09-18 11:09:49,947 - db_manager - INFO - Transaction committed successfully
2025-09-18 11:09:49,947 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 11:09:50,405 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 11:09:50,410 - db_manager - INFO - Starting database transaction
2025-09-18 11:09:50,410 - db_manager - INFO - Executing get_grievance_by_id: 
                SELECT g.*, c.complainant_full_name, c.complainant_phone, c.complainant_email,
    ...
2025-09-18 11:09:50,411 - db_manager - INFO - get_grievance_by_id completed in 0.01s. Rows: 1
2025-09-18 11:09:50,412 - db_manager - INFO - Transaction committed successfully
2025-09-18 11:09:50,412 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 11:09:50,412 - db_manager - DEBUG - get_grievance_by_id: grievance_id: {'grievance_id': 'GR-20250918-KOJH-99F6-B', 'complainant_id': 'CM-20250918-KOJH-9363-B', 'grievance_categories': None, 'grievance_categories_alternative': None, 'follow_up_question': None, 'grievance_summary': None, 'grievance_description': 'dust everywhere in my house kids are coughing hard', 'grievance_claimed_amount': None, 'grievance_location': None, 'language_code': 'ne', 'grievance_classification_status': 'pending', 'grievance_creation_date': datetime.datetime(2025, 9, 18, 11, 9, 47, 57660, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'grievance_modification_date': datetime.datetime(2025, 9, 18, 11, 9, 49, 931839, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'is_temporary': True, 'source': 'bot', 'complainant_full_name': 'c30d040703021eed85c64f3488ea75d23d01006d98041f71dc8a64a8bfa728b139e29f2a5d0788f97cf5c7d8c267c8ce4dcc895ab5b27718b34c8e8e54103dbe9beea187b9a5e036b7e1fb6a440a', 'complainant_phone': 'c30d040703024111b234ada05d5c7cd23d011fe2bb10f943edc525d7b96e1658eb12cd2bd4c046c676b77a6a63321ab0ff482bc0be101692c40c1d0900c28eb45181b1748a74ac1e9761284989f7', 'complainant_email': 'c30d04070302c3c3adcdbb7a7ca26ad23d011d1afbd15a4e044c2303d3c54e64a076275eb8ec7c5e2b6dae6fe0f610c39dc37df71d9d0b8ec0602715d561a6f466052c22c7a2f6e07e0496382fc5', 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_municipality': 'Not provided', 'complainant_ward': None, 'complainant_village': 'Not provided', 'complainant_address': 'c30d04070302e1a1e6ebd4b5099973d23d01383333440484e832c064c27ffb585976df354b36c3995503d0e3840ab9382b4495072b2811bc90dbae2566c2a1c1a684a069ee04e195043fd6e725b7'}, results: [{'grievance_id': 'GR-20250918-KOJH-99F6-B', 'complainant_id': 'CM-20250918-KOJH-9363-B', 'grievance_categories': None, 'grievance_categories_alternative': None, 'follow_up_question': None, 'grievance_summary': None, 'grievance_description': 'dust everywhere in my house kids are coughing hard', 'grievance_claimed_amount': None, 'grievance_location': None, 'language_code': 'ne', 'grievance_classification_status': 'pending', 'grievance_creation_date': datetime.datetime(2025, 9, 18, 11, 9, 47, 57660, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'grievance_modification_date': datetime.datetime(2025, 9, 18, 11, 9, 49, 931839, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'is_temporary': True, 'source': 'bot', 'complainant_full_name': 'c30d040703021eed85c64f3488ea75d23d01006d98041f71dc8a64a8bfa728b139e29f2a5d0788f97cf5c7d8c267c8ce4dcc895ab5b27718b34c8e8e54103dbe9beea187b9a5e036b7e1fb6a440a', 'complainant_phone': 'c30d040703024111b234ada05d5c7cd23d011fe2bb10f943edc525d7b96e1658eb12cd2bd4c046c676b77a6a63321ab0ff482bc0be101692c40c1d0900c28eb45181b1748a74ac1e9761284989f7', 'complainant_email': 'c30d04070302c3c3adcdbb7a7ca26ad23d011d1afbd15a4e044c2303d3c54e64a076275eb8ec7c5e2b6dae6fe0f610c39dc37df71d9d0b8ec0602715d561a6f466052c22c7a2f6e07e0496382fc5', 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_municipality': 'Not provided', 'complainant_ward': None, 'complainant_village': 'Not provided', 'complainant_address': 'c30d04070302e1a1e6ebd4b5099973d23d01383333440484e832c064c27ffb585976df354b36c3995503d0e3840ab9382b4495072b2811bc90dbae2566c2a1c1a684a069ee04e195043fd6e725b7'}]
2025-09-18 11:20:35,446 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-18 11:20:35,446 - db_manager - INFO - Database manager initialized successfully
2025-09-18 11:20:35,446 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-18 11:20:35,447 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-18 11:20:35,447 - db_manager - INFO - Database manager initialized successfully
2025-09-18 11:20:35,447 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-18 11:20:35,447 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-18 11:20:35,447 - db_manager - INFO - Database manager initialized successfully
2025-09-18 11:20:35,447 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-18 11:20:35,447 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-18 11:20:35,447 - db_manager - INFO - Database manager initialized successfully
2025-09-18 11:20:35,447 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-18 11:20:35,447 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-18 11:20:35,447 - db_manager - INFO - Database manager initialized successfully
2025-09-18 11:20:35,447 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-18 11:20:35,447 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-18 11:20:35,447 - db_manager - INFO - Database manager initialized successfully
2025-09-18 11:20:35,447 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-18 11:20:35,448 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-18 11:20:35,448 - db_manager - INFO - Database manager initialized successfully
2025-09-18 11:20:35,448 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-18 11:20:35,448 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-18 11:20:35,448 - db_manager - INFO - Database manager initialized successfully
2025-09-18 11:20:35,448 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-18 11:20:35,448 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-18 11:20:35,448 - db_manager - INFO - Database manager initialized successfully
2025-09-18 11:20:35,448 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-18 11:20:35,448 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-18 11:20:35,448 - db_manager - INFO - Database manager initialized successfully
2025-09-18 11:20:35,448 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-18 11:21:28,949 - db_manager - INFO - create_complainant: Creating complainant with ID: CM-20250918-KOJH-7488-B
2025-09-18 11:21:28,949 - db_manager - DEBUG - encrypted and hashed data at encrypt_and_hash_sensitive_data: {'complainant_id': 'CM-20250918-KOJH-7488-B', 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_unique_id': 'CM-20250918-KOJH-7488-B'}
2025-09-18 11:21:28,949 - db_manager - DEBUG - query_keys at generate_query_string: dict_keys(['complainant_id', 'complainant_province', 'complainant_district', 'complainant_unique_id'])
2025-09-18 11:21:28,950 - db_manager - DEBUG - Generated query: INSERT INTO complainants (complainant_id, complainant_province, complainant_district, complainant_unique_id) VALUES (%s, %s, %s, %s)
2025-09-18 11:21:28,950 - db_manager - DEBUG - len of query_keys: 4
2025-09-18 11:21:28,950 - db_manager - DEBUG - Generated query: INSERT INTO complainants (complainant_id, complainant_province, complainant_district, complainant_unique_id) VALUES (%s, %s, %s, %s)
2025-09-18 11:21:28,950 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 11:21:28,960 - db_manager - INFO - Starting database transaction
2025-09-18 11:21:28,963 - db_manager - INFO - Transaction committed successfully
2025-09-18 11:21:28,963 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 11:21:28,963 - db_manager - INFO - create_complainant: Successfully created complainant with ID: CM-20250918-KOJH-7488-B
2025-09-18 11:21:28,963 - db_manager - INFO - create_grievance: Creating grievance with data: {'grievance_id': 'GR-20250918-KOJH-4EDB-B', 'complainant_id': 'CM-20250918-KOJH-7488-B', 'grievance_description': 'dust everywhere in my house kids are coughing hard', 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_office': None, 'source': 'bot', 'complainant_unique_id': 'CM-20250918-KOJH-7488-B'}
2025-09-18 11:21:28,963 - db_manager - INFO - create_grievance: Creating grievance with ID: GR-20250918-KOJH-4EDB-B
2025-09-18 11:21:28,963 - db_manager - INFO - create_grievance: Creating grievance with allowed fields: ['grievance_id', 'complainant_id', 'grievance_categories', 'grievance_categories_alternative', 'follow_up_question', 'grievance_summary', 'grievance_description', 'grievance_claimed_amount', 'grievance_location', 'is_temporary', 'source', 'language_code', 'grievance_classification_status']
2025-09-18 11:21:28,963 - db_manager - DEBUG - query_keys at generate_query_string: dict_keys(['grievance_id', 'complainant_id', 'grievance_description', 'source'])
2025-09-18 11:21:28,963 - db_manager - DEBUG - Generated query: INSERT INTO grievances (grievance_id, complainant_id, grievance_description, source) VALUES (%s, %s, %s, %s) RETURNING grievance_id
2025-09-18 11:21:28,964 - db_manager - DEBUG - len of query_keys: 4
2025-09-18 11:21:28,964 - db_manager - DEBUG - Generated query: INSERT INTO grievances (grievance_id, complainant_id, grievance_description, source) VALUES (%s, %s, %s, %s) RETURNING grievance_id
2025-09-18 11:21:28,964 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 11:21:28,970 - db_manager - INFO - Starting database transaction
2025-09-18 11:21:28,975 - db_manager - INFO - Transaction committed successfully
2025-09-18 11:21:28,975 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 11:21:28,976 - db_manager - INFO - create_grievance: Successfully created grievance with ID: GR-20250918-KOJH-4EDB-B
2025-09-18 11:21:31,215 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 11:21:31,221 - db_manager - INFO - Starting database transaction
2025-09-18 11:21:31,221 - db_manager - INFO - Executing get_complainant_by_id: 
            SELECT complainant_id, complainant_unique_id, complainant_full_name,    complainant_pho...
2025-09-18 11:21:31,223 - db_manager - INFO - get_complainant_by_id completed in 0.01s. Rows: 1
2025-09-18 11:21:31,223 - db_manager - INFO - Transaction committed successfully
2025-09-18 11:21:31,223 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 11:21:31,223 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 11:21:31,229 - db_manager - INFO - Starting database transaction
2025-09-18 11:21:31,229 - db_manager - INFO - Executing get_grievance_by_id: 
                SELECT g.*, c.complainant_full_name, c.complainant_phone, c.complainant_email,
    ...
2025-09-18 11:21:31,230 - db_manager - INFO - get_grievance_by_id completed in 0.01s. Rows: 1
2025-09-18 11:21:31,230 - db_manager - INFO - Transaction committed successfully
2025-09-18 11:21:31,230 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 11:21:31,231 - db_manager - DEBUG - get_grievance_by_id: grievance_id: {'grievance_id': 'GR-20250918-KOJH-4EDB-B', 'complainant_id': 'CM-20250918-KOJH-7488-B', 'grievance_categories': None, 'grievance_categories_alternative': None, 'follow_up_question': None, 'grievance_summary': None, 'grievance_description': 'dust everywhere in my house kids are coughing hard', 'grievance_claimed_amount': None, 'grievance_location': None, 'language_code': 'ne', 'grievance_classification_status': 'pending', 'grievance_creation_date': datetime.datetime(2025, 9, 18, 11, 21, 28, 970608, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'grievance_modification_date': datetime.datetime(2025, 9, 18, 11, 21, 28, 970608, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'is_temporary': True, 'source': 'bot', 'complainant_full_name': None, 'complainant_phone': None, 'complainant_email': None, 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_municipality': None, 'complainant_ward': None, 'complainant_village': None, 'complainant_address': None}, results: [{'grievance_id': 'GR-20250918-KOJH-4EDB-B', 'complainant_id': 'CM-20250918-KOJH-7488-B', 'grievance_categories': None, 'grievance_categories_alternative': None, 'follow_up_question': None, 'grievance_summary': None, 'grievance_description': 'dust everywhere in my house kids are coughing hard', 'grievance_claimed_amount': None, 'grievance_location': None, 'language_code': 'ne', 'grievance_classification_status': 'pending', 'grievance_creation_date': datetime.datetime(2025, 9, 18, 11, 21, 28, 970608, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'grievance_modification_date': datetime.datetime(2025, 9, 18, 11, 21, 28, 970608, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'is_temporary': True, 'source': 'bot', 'complainant_full_name': None, 'complainant_phone': None, 'complainant_email': None, 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_municipality': None, 'complainant_ward': None, 'complainant_village': None, 'complainant_address': None}]
2025-09-18 11:21:31,231 - db_manager - INFO - update_complainant: Updating complainant with ID: CM-20250918-KOJH-7488-B
2025-09-18 11:21:31,231 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 11:21:31,236 - db_manager - INFO - Starting database transaction
2025-09-18 11:21:31,236 - db_manager - INFO - Executing encrypt_field: SELECT encode(pgp_sym_encrypt(%s, %s), 'hex') AS encrypted...
2025-09-18 11:21:31,238 - db_manager - INFO - encrypt_field completed in 0.01s. Rows: 1
2025-09-18 11:21:31,239 - db_manager - INFO - Transaction committed successfully
2025-09-18 11:21:31,239 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 11:21:31,239 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 11:21:31,244 - db_manager - INFO - Starting database transaction
2025-09-18 11:21:31,244 - db_manager - INFO - Executing encrypt_field: SELECT encode(pgp_sym_encrypt(%s, %s), 'hex') AS encrypted...
2025-09-18 11:21:31,245 - db_manager - INFO - encrypt_field completed in 0.01s. Rows: 1
2025-09-18 11:21:31,245 - db_manager - INFO - Transaction committed successfully
2025-09-18 11:21:31,245 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 11:21:31,245 - db_manager - DEBUG - encrypted phone number Not provided at encrypt_complainant_data: c30d040703023424e9f327a81ba569d23d01c7de944aaf10b36b877f10b5b65ee77724a1b998e064791ab6a372eb5c60ff72c192e55e41ea887e40a8126de24084146ef1fb88d15d2a978f16e21c
2025-09-18 11:21:31,245 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 11:21:31,250 - db_manager - INFO - Starting database transaction
2025-09-18 11:21:31,250 - db_manager - INFO - Executing encrypt_field: SELECT encode(pgp_sym_encrypt(%s, %s), 'hex') AS encrypted...
2025-09-18 11:21:31,251 - db_manager - INFO - encrypt_field completed in 0.01s. Rows: 1
2025-09-18 11:21:31,251 - db_manager - INFO - Transaction committed successfully
2025-09-18 11:21:31,252 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 11:21:31,252 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 11:21:31,257 - db_manager - INFO - Starting database transaction
2025-09-18 11:21:31,257 - db_manager - INFO - Executing encrypt_field: SELECT encode(pgp_sym_encrypt(%s, %s), 'hex') AS encrypted...
2025-09-18 11:21:31,258 - db_manager - INFO - encrypt_field completed in 0.01s. Rows: 1
2025-09-18 11:21:31,258 - db_manager - INFO - Transaction committed successfully
2025-09-18 11:21:31,258 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 11:21:31,258 - db_manager - DEBUG - phone number Not provided hashed to d83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f at hash_sensitive_data
2025-09-18 11:21:31,258 - db_manager - DEBUG - encrypted and hashed data at encrypt_and_hash_sensitive_data: {'complainant_full_name': 'c30d0407030257056c7aa6939f4573d23d01a7163d5f106db01bc0f579f80e5fa75d028153f822b2ac7d3534f3048a726317dc325f5ad3314a19572d198dd1936768917498262f3b97dba66f6bf1', 'complainant_phone': 'c30d040703023424e9f327a81ba569d23d01c7de944aaf10b36b877f10b5b65ee77724a1b998e064791ab6a372eb5c60ff72c192e55e41ea887e40a8126de24084146ef1fb88d15d2a978f16e21c', 'complainant_email': 'c30d04070302150cd9d3e198f5cb63d23d0176e1dd9ec2a50e0157b195e5fa434035439b12dca96cba73304663b07ff8f485b10f259382c0f93ced61e4c38f366fb4b1207a07b92a6d979fea90c4', 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_municipality': 'Not provided', 'complainant_village': 'Not provided', 'complainant_address': 'c30d040703025fc8fd32c6a012697cd23d01fbbcdaf785edfaa990fde537f060201c2f459a0e428bd2eebba7e62f6b13705d388d7fa8ac4c95cab1f83c4fb260fe4a36995eb145d439af27c17e88', 'complainant_phone_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'complainant_full_name_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'complainant_email_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f'}
2025-09-18 11:21:31,258 - db_manager - DEBUG - encrypted_data at update_complainant: {'complainant_full_name': 'c30d0407030257056c7aa6939f4573d23d01a7163d5f106db01bc0f579f80e5fa75d028153f822b2ac7d3534f3048a726317dc325f5ad3314a19572d198dd1936768917498262f3b97dba66f6bf1', 'complainant_phone': 'c30d040703023424e9f327a81ba569d23d01c7de944aaf10b36b877f10b5b65ee77724a1b998e064791ab6a372eb5c60ff72c192e55e41ea887e40a8126de24084146ef1fb88d15d2a978f16e21c', 'complainant_email': 'c30d04070302150cd9d3e198f5cb63d23d0176e1dd9ec2a50e0157b195e5fa434035439b12dca96cba73304663b07ff8f485b10f259382c0f93ced61e4c38f366fb4b1207a07b92a6d979fea90c4', 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_municipality': 'Not provided', 'complainant_village': 'Not provided', 'complainant_address': 'c30d040703025fc8fd32c6a012697cd23d01fbbcdaf785edfaa990fde537f060201c2f459a0e428bd2eebba7e62f6b13705d388d7fa8ac4c95cab1f83c4fb260fe4a36995eb145d439af27c17e88', 'complainant_phone_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'complainant_full_name_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'complainant_email_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f'}
2025-09-18 11:21:31,259 - db_manager - DEBUG - execute_update values: ('c30d0407030257056c7aa6939f4573d23d01a7163d5f106db01bc0f579f80e5fa75d028153f822b2ac7d3534f3048a726317dc325f5ad3314a19572d198dd1936768917498262f3b97dba66f6bf1', 'c30d040703023424e9f327a81ba569d23d01c7de944aaf10b36b877f10b5b65ee77724a1b998e064791ab6a372eb5c60ff72c192e55e41ea887e40a8126de24084146ef1fb88d15d2a978f16e21c', 'c30d04070302150cd9d3e198f5cb63d23d0176e1dd9ec2a50e0157b195e5fa434035439b12dca96cba73304663b07ff8f485b10f259382c0f93ced61e4c38f366fb4b1207a07b92a6d979fea90c4', 'Koshi', 'Jhapa', 'Not provided', 'Not provided', 'c30d040703025fc8fd32c6a012697cd23d01fbbcdaf785edfaa990fde537f060201c2f459a0e428bd2eebba7e62f6b13705d388d7fa8ac4c95cab1f83c4fb260fe4a36995eb145d439af27c17e88', 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'CM-20250918-KOJH-7488-B')
2025-09-18 11:21:31,259 - db_manager - DEBUG - execute_update query: UPDATE complainants SET complainant_full_name = %s, complainant_phone = %s, complainant_email = %s, complainant_province = %s, complainant_district = %s, complainant_municipality = %s, complainant_village = %s, complainant_address = %s, complainant_phone_hash = %s, complainant_full_name_hash = %s, complainant_email_hash = %s WHERE complainant_id = %s
2025-09-18 11:21:31,259 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 11:21:31,263 - db_manager - INFO - Starting database transaction
2025-09-18 11:21:31,263 - db_manager - INFO - execute_update: Executing update query: UPDATE complainants SET complainant_full_name = %s, complainant_phone = %s, complainant_email = %s, ...
2025-09-18 11:21:31,264 - db_manager - INFO - execute_update: Update completed in 0.01s. Affected rows: 1
2025-09-18 11:21:31,266 - db_manager - INFO - Transaction committed successfully
2025-09-18 11:21:31,267 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 11:21:31,267 - db_manager - INFO - Complainant updated in db: CM-20250918-KOJH-7488-B
2025-09-18 11:21:31,267 - db_manager - INFO - update_grievance: Updating grievance with ID: GR-20250918-KOJH-4EDB-B
2025-09-18 11:21:31,267 - db_manager - DEBUG - execute_update values: ('dust everywhere in my house kids are coughing hard', 'GR-20250918-KOJH-4EDB-B')
2025-09-18 11:21:31,267 - db_manager - DEBUG - execute_update query: 
                    UPDATE grievances 
                    SET grievance_description = %s, grievance_modification_date = CURRENT_TIMESTAMP
                    WHERE grievance_id = %s
                    RETURNING grievance_id
                
2025-09-18 11:21:31,267 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 11:21:31,271 - db_manager - INFO - Starting database transaction
2025-09-18 11:21:31,272 - db_manager - INFO - execute_update: Executing update query: 
                    UPDATE grievances 
                    SET grievance_description = %s, grievanc...
2025-09-18 11:21:31,273 - db_manager - INFO - execute_update: Update completed in 0.01s. Affected rows: 1
2025-09-18 11:21:31,274 - db_manager - INFO - Transaction committed successfully
2025-09-18 11:21:31,274 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 11:21:31,275 - db_manager - INFO - update_grievance: Updated grievance with ID: GR-20250918-KOJH-4EDB-B, rows affected: 1
2025-09-18 11:21:31,275 - db_manager - INFO - Grievance updated in db: GR-20250918-KOJH-4EDB-B
2025-09-18 11:21:31,275 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 11:21:31,279 - db_manager - INFO - Starting database transaction
2025-09-18 11:21:31,280 - db_manager - INFO - Executing get_grievance_files: 
            SELECT file_id, file_name, file_type, file_size, upload_timestamp
            FROM file...
2025-09-18 11:21:31,281 - db_manager - INFO - get_grievance_files completed in 0.01s. Rows: 0
2025-09-18 11:21:31,281 - db_manager - INFO - Transaction committed successfully
2025-09-18 11:21:31,281 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 11:21:31,281 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 11:21:31,286 - db_manager - INFO - Starting database transaction
2025-09-18 11:21:31,286 - db_manager - INFO - Executing get_grievance_files: 
            SELECT file_id, file_name, file_type, file_size, upload_timestamp
            FROM file...
2025-09-18 11:21:31,287 - db_manager - INFO - get_grievance_files completed in 0.01s. Rows: 0
2025-09-18 11:21:31,287 - db_manager - INFO - Transaction committed successfully
2025-09-18 11:21:31,288 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 11:21:31,674 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 11:21:31,680 - db_manager - INFO - Starting database transaction
2025-09-18 11:21:31,680 - db_manager - INFO - Executing get_grievance_by_id: 
                SELECT g.*, c.complainant_full_name, c.complainant_phone, c.complainant_email,
    ...
2025-09-18 11:21:31,682 - db_manager - INFO - get_grievance_by_id completed in 0.01s. Rows: 1
2025-09-18 11:21:31,682 - db_manager - INFO - Transaction committed successfully
2025-09-18 11:21:31,682 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 11:21:31,682 - db_manager - DEBUG - get_grievance_by_id: grievance_id: {'grievance_id': 'GR-20250918-KOJH-4EDB-B', 'complainant_id': 'CM-20250918-KOJH-7488-B', 'grievance_categories': None, 'grievance_categories_alternative': None, 'follow_up_question': None, 'grievance_summary': None, 'grievance_description': 'dust everywhere in my house kids are coughing hard', 'grievance_claimed_amount': None, 'grievance_location': None, 'language_code': 'ne', 'grievance_classification_status': 'pending', 'grievance_creation_date': datetime.datetime(2025, 9, 18, 11, 21, 28, 970608, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'grievance_modification_date': datetime.datetime(2025, 9, 18, 11, 21, 31, 272214, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'is_temporary': True, 'source': 'bot', 'complainant_full_name': 'c30d0407030257056c7aa6939f4573d23d01a7163d5f106db01bc0f579f80e5fa75d028153f822b2ac7d3534f3048a726317dc325f5ad3314a19572d198dd1936768917498262f3b97dba66f6bf1', 'complainant_phone': 'c30d040703023424e9f327a81ba569d23d01c7de944aaf10b36b877f10b5b65ee77724a1b998e064791ab6a372eb5c60ff72c192e55e41ea887e40a8126de24084146ef1fb88d15d2a978f16e21c', 'complainant_email': 'c30d04070302150cd9d3e198f5cb63d23d0176e1dd9ec2a50e0157b195e5fa434035439b12dca96cba73304663b07ff8f485b10f259382c0f93ced61e4c38f366fb4b1207a07b92a6d979fea90c4', 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_municipality': 'Not provided', 'complainant_ward': None, 'complainant_village': 'Not provided', 'complainant_address': 'c30d040703025fc8fd32c6a012697cd23d01fbbcdaf785edfaa990fde537f060201c2f459a0e428bd2eebba7e62f6b13705d388d7fa8ac4c95cab1f83c4fb260fe4a36995eb145d439af27c17e88'}, results: [{'grievance_id': 'GR-20250918-KOJH-4EDB-B', 'complainant_id': 'CM-20250918-KOJH-7488-B', 'grievance_categories': None, 'grievance_categories_alternative': None, 'follow_up_question': None, 'grievance_summary': None, 'grievance_description': 'dust everywhere in my house kids are coughing hard', 'grievance_claimed_amount': None, 'grievance_location': None, 'language_code': 'ne', 'grievance_classification_status': 'pending', 'grievance_creation_date': datetime.datetime(2025, 9, 18, 11, 21, 28, 970608, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'grievance_modification_date': datetime.datetime(2025, 9, 18, 11, 21, 31, 272214, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'is_temporary': True, 'source': 'bot', 'complainant_full_name': 'c30d0407030257056c7aa6939f4573d23d01a7163d5f106db01bc0f579f80e5fa75d028153f822b2ac7d3534f3048a726317dc325f5ad3314a19572d198dd1936768917498262f3b97dba66f6bf1', 'complainant_phone': 'c30d040703023424e9f327a81ba569d23d01c7de944aaf10b36b877f10b5b65ee77724a1b998e064791ab6a372eb5c60ff72c192e55e41ea887e40a8126de24084146ef1fb88d15d2a978f16e21c', 'complainant_email': 'c30d04070302150cd9d3e198f5cb63d23d0176e1dd9ec2a50e0157b195e5fa434035439b12dca96cba73304663b07ff8f485b10f259382c0f93ced61e4c38f366fb4b1207a07b92a6d979fea90c4', 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_municipality': 'Not provided', 'complainant_ward': None, 'complainant_village': 'Not provided', 'complainant_address': 'c30d040703025fc8fd32c6a012697cd23d01fbbcdaf785edfaa990fde537f060201c2f459a0e428bd2eebba7e62f6b13705d388d7fa8ac4c95cab1f83c4fb260fe4a36995eb145d439af27c17e88'}]
2025-09-18 11:22:43,749 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-18 11:22:43,749 - db_manager - INFO - Database manager initialized successfully
2025-09-18 11:22:43,749 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-18 11:22:43,749 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-18 11:22:43,749 - db_manager - INFO - Database manager initialized successfully
2025-09-18 11:22:43,749 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-18 11:22:43,749 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-18 11:22:43,749 - db_manager - INFO - Database manager initialized successfully
2025-09-18 11:22:43,749 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-18 11:22:43,749 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-18 11:22:43,749 - db_manager - INFO - Database manager initialized successfully
2025-09-18 11:22:43,749 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-18 11:22:43,749 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-18 11:22:43,749 - db_manager - INFO - Database manager initialized successfully
2025-09-18 11:22:43,749 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-18 11:22:43,749 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-18 11:22:43,749 - db_manager - INFO - Database manager initialized successfully
2025-09-18 11:22:43,749 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-18 11:22:43,750 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-18 11:22:43,750 - db_manager - INFO - Database manager initialized successfully
2025-09-18 11:22:43,750 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-18 11:22:43,750 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-18 11:22:43,750 - db_manager - INFO - Database manager initialized successfully
2025-09-18 11:22:43,750 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-18 11:22:43,750 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-18 11:22:43,750 - db_manager - INFO - Database manager initialized successfully
2025-09-18 11:22:43,750 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-18 11:22:43,750 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-18 11:22:43,750 - db_manager - INFO - Database manager initialized successfully
2025-09-18 11:22:43,751 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-18 11:23:38,778 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-18 11:23:38,778 - db_manager - INFO - Database manager initialized successfully
2025-09-18 11:23:38,778 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-18 11:23:38,778 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-18 11:23:38,778 - db_manager - INFO - Database manager initialized successfully
2025-09-18 11:23:38,778 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-18 11:23:38,778 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-18 11:23:38,778 - db_manager - INFO - Database manager initialized successfully
2025-09-18 11:23:38,778 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-18 11:23:38,778 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-18 11:23:38,778 - db_manager - INFO - Database manager initialized successfully
2025-09-18 11:23:38,778 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-18 11:23:38,779 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-18 11:23:38,779 - db_manager - INFO - Database manager initialized successfully
2025-09-18 11:23:38,779 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-18 11:23:38,779 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-18 11:23:38,779 - db_manager - INFO - Database manager initialized successfully
2025-09-18 11:23:38,779 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-18 11:23:38,779 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-18 11:23:38,779 - db_manager - INFO - Database manager initialized successfully
2025-09-18 11:23:38,779 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-18 11:23:38,779 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-18 11:23:38,779 - db_manager - INFO - Database manager initialized successfully
2025-09-18 11:23:38,779 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-18 11:23:38,779 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-18 11:23:38,779 - db_manager - INFO - Database manager initialized successfully
2025-09-18 11:23:38,779 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-18 11:23:38,779 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-18 11:23:38,779 - db_manager - INFO - Database manager initialized successfully
2025-09-18 11:23:38,779 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-18 11:24:33,024 - db_manager - INFO - create_complainant: Creating complainant with ID: CM-20250918-KOJH-F203-B
2025-09-18 11:24:33,024 - db_manager - DEBUG - encrypted and hashed data at encrypt_and_hash_sensitive_data: {'complainant_id': 'CM-20250918-KOJH-F203-B', 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_unique_id': 'CM-20250918-KOJH-F203-B'}
2025-09-18 11:24:33,025 - db_manager - DEBUG - query_keys at generate_query_string: dict_keys(['complainant_id', 'complainant_province', 'complainant_district', 'complainant_unique_id'])
2025-09-18 11:24:33,025 - db_manager - DEBUG - Generated query: INSERT INTO complainants (complainant_id, complainant_province, complainant_district, complainant_unique_id) VALUES (%s, %s, %s, %s)
2025-09-18 11:24:33,025 - db_manager - DEBUG - len of query_keys: 4
2025-09-18 11:24:33,025 - db_manager - DEBUG - Generated query: INSERT INTO complainants (complainant_id, complainant_province, complainant_district, complainant_unique_id) VALUES (%s, %s, %s, %s)
2025-09-18 11:24:33,025 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 11:24:33,031 - db_manager - INFO - Starting database transaction
2025-09-18 11:24:33,034 - db_manager - INFO - Transaction committed successfully
2025-09-18 11:24:33,034 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 11:24:33,034 - db_manager - INFO - create_complainant: Successfully created complainant with ID: CM-20250918-KOJH-F203-B
2025-09-18 11:24:33,034 - db_manager - INFO - create_grievance: Creating grievance with data: {'grievance_id': 'GR-20250918-KOJH-74BE-B', 'complainant_id': 'CM-20250918-KOJH-F203-B', 'grievance_description': 'dust everywhere in my house kids are coughing hard', 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_office': None, 'source': 'bot', 'complainant_unique_id': 'CM-20250918-KOJH-F203-B'}
2025-09-18 11:24:33,034 - db_manager - INFO - create_grievance: Creating grievance with ID: GR-20250918-KOJH-74BE-B
2025-09-18 11:24:33,034 - db_manager - INFO - create_grievance: Creating grievance with allowed fields: ['grievance_id', 'complainant_id', 'grievance_categories', 'grievance_categories_alternative', 'follow_up_question', 'grievance_summary', 'grievance_description', 'grievance_claimed_amount', 'grievance_location', 'is_temporary', 'source', 'language_code', 'grievance_classification_status']
2025-09-18 11:24:33,034 - db_manager - DEBUG - query_keys at generate_query_string: dict_keys(['grievance_id', 'complainant_id', 'grievance_description', 'source'])
2025-09-18 11:24:33,034 - db_manager - DEBUG - Generated query: INSERT INTO grievances (grievance_id, complainant_id, grievance_description, source) VALUES (%s, %s, %s, %s) RETURNING grievance_id
2025-09-18 11:24:33,034 - db_manager - DEBUG - len of query_keys: 4
2025-09-18 11:24:33,034 - db_manager - DEBUG - Generated query: INSERT INTO grievances (grievance_id, complainant_id, grievance_description, source) VALUES (%s, %s, %s, %s) RETURNING grievance_id
2025-09-18 11:24:33,034 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 11:24:33,040 - db_manager - INFO - Starting database transaction
2025-09-18 11:24:33,044 - db_manager - INFO - Transaction committed successfully
2025-09-18 11:24:33,045 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 11:24:33,045 - db_manager - INFO - create_grievance: Successfully created grievance with ID: GR-20250918-KOJH-74BE-B
2025-09-18 11:24:36,727 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 11:24:36,733 - db_manager - INFO - Starting database transaction
2025-09-18 11:24:36,733 - db_manager - INFO - Executing get_complainant_by_id: 
            SELECT complainant_id, complainant_unique_id, complainant_full_name,    complainant_pho...
2025-09-18 11:24:36,734 - db_manager - INFO - get_complainant_by_id completed in 0.01s. Rows: 1
2025-09-18 11:24:36,734 - db_manager - INFO - Transaction committed successfully
2025-09-18 11:24:36,734 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 11:24:36,735 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 11:24:36,740 - db_manager - INFO - Starting database transaction
2025-09-18 11:24:36,740 - db_manager - INFO - Executing get_grievance_by_id: 
                SELECT g.*, c.complainant_full_name, c.complainant_phone, c.complainant_email,
    ...
2025-09-18 11:24:36,741 - db_manager - INFO - get_grievance_by_id completed in 0.01s. Rows: 1
2025-09-18 11:24:36,742 - db_manager - INFO - Transaction committed successfully
2025-09-18 11:24:36,742 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 11:24:36,742 - db_manager - DEBUG - get_grievance_by_id: grievance_id: {'grievance_id': 'GR-20250918-KOJH-74BE-B', 'complainant_id': 'CM-20250918-KOJH-F203-B', 'grievance_categories': None, 'grievance_categories_alternative': None, 'follow_up_question': None, 'grievance_summary': None, 'grievance_description': 'dust everywhere in my house kids are coughing hard', 'grievance_claimed_amount': None, 'grievance_location': None, 'language_code': 'ne', 'grievance_classification_status': 'pending', 'grievance_creation_date': datetime.datetime(2025, 9, 18, 11, 24, 33, 40894, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'grievance_modification_date': datetime.datetime(2025, 9, 18, 11, 24, 33, 40894, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'is_temporary': True, 'source': 'bot', 'complainant_full_name': None, 'complainant_phone': None, 'complainant_email': None, 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_municipality': None, 'complainant_ward': None, 'complainant_village': None, 'complainant_address': None}, results: [{'grievance_id': 'GR-20250918-KOJH-74BE-B', 'complainant_id': 'CM-20250918-KOJH-F203-B', 'grievance_categories': None, 'grievance_categories_alternative': None, 'follow_up_question': None, 'grievance_summary': None, 'grievance_description': 'dust everywhere in my house kids are coughing hard', 'grievance_claimed_amount': None, 'grievance_location': None, 'language_code': 'ne', 'grievance_classification_status': 'pending', 'grievance_creation_date': datetime.datetime(2025, 9, 18, 11, 24, 33, 40894, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'grievance_modification_date': datetime.datetime(2025, 9, 18, 11, 24, 33, 40894, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'is_temporary': True, 'source': 'bot', 'complainant_full_name': None, 'complainant_phone': None, 'complainant_email': None, 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_municipality': None, 'complainant_ward': None, 'complainant_village': None, 'complainant_address': None}]
2025-09-18 11:24:36,742 - db_manager - INFO - update_complainant: Updating complainant with ID: CM-20250918-KOJH-F203-B
2025-09-18 11:24:36,742 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 11:24:36,747 - db_manager - INFO - Starting database transaction
2025-09-18 11:24:36,747 - db_manager - INFO - Executing encrypt_field: SELECT encode(pgp_sym_encrypt(%s, %s), 'hex') AS encrypted...
2025-09-18 11:24:36,748 - db_manager - INFO - encrypt_field completed in 0.01s. Rows: 1
2025-09-18 11:24:36,748 - db_manager - INFO - Transaction committed successfully
2025-09-18 11:24:36,748 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 11:24:36,749 - db_manager - DEBUG - encrypted phone number Not provided at encrypt_complainant_data: c30d040703028d6fac24f83f400260d23d010f927e45fa8c768be0cb89017505a4a9fc88cc53dfc45e2af0e99e7d554c88902ccf9a8fcdd0803fb0ab3d35b20e75cfa6a88dc4c4c36e9d25028a0d
2025-09-18 11:24:36,749 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 11:24:36,753 - db_manager - INFO - Starting database transaction
2025-09-18 11:24:36,754 - db_manager - INFO - Executing encrypt_field: SELECT encode(pgp_sym_encrypt(%s, %s), 'hex') AS encrypted...
2025-09-18 11:24:36,754 - db_manager - INFO - encrypt_field completed in 0.01s. Rows: 1
2025-09-18 11:24:36,755 - db_manager - INFO - Transaction committed successfully
2025-09-18 11:24:36,755 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 11:24:36,755 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 11:24:36,760 - db_manager - INFO - Starting database transaction
2025-09-18 11:24:36,760 - db_manager - INFO - Executing encrypt_field: SELECT encode(pgp_sym_encrypt(%s, %s), 'hex') AS encrypted...
2025-09-18 11:24:36,761 - db_manager - INFO - encrypt_field completed in 0.01s. Rows: 1
2025-09-18 11:24:36,761 - db_manager - INFO - Transaction committed successfully
2025-09-18 11:24:36,761 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 11:24:36,761 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 11:24:36,766 - db_manager - INFO - Starting database transaction
2025-09-18 11:24:36,766 - db_manager - INFO - Executing encrypt_field: SELECT encode(pgp_sym_encrypt(%s, %s), 'hex') AS encrypted...
2025-09-18 11:24:36,767 - db_manager - INFO - encrypt_field completed in 0.01s. Rows: 1
2025-09-18 11:24:36,768 - db_manager - INFO - Transaction committed successfully
2025-09-18 11:24:36,768 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 11:24:36,768 - db_manager - DEBUG - phone number Not provided hashed to d83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f at hash_sensitive_data
2025-09-18 11:24:36,768 - db_manager - DEBUG - encrypted and hashed data at encrypt_and_hash_sensitive_data: {'complainant_full_name': 'c30d0407030211e5b8480863e12d6cd23d01ec80107efa91ac8da3b0330ba046c8a1bdac2a559c05a9dab9d9f442894e3d4891c6b1416f6e802aab007d954156fdd2b02a09731a043b0d7a6467d1', 'complainant_phone': 'c30d040703028d6fac24f83f400260d23d010f927e45fa8c768be0cb89017505a4a9fc88cc53dfc45e2af0e99e7d554c88902ccf9a8fcdd0803fb0ab3d35b20e75cfa6a88dc4c4c36e9d25028a0d', 'complainant_email': 'c30d040703027806aa97b0466bf878d23d015361ddaff8e39659483177991e534e015a8e7d9ff6f0e1cc9824095f45679d9d2386a5c29fc131233149ea098de78c6f13d26d41810ef1f33f29490d', 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_municipality': 'Not provided', 'complainant_village': 'Not provided', 'complainant_address': 'c30d0407030246935d6cbca433126ed23d0118be88278f4d7521715d8e9c4cd0351184f3be34857dd083dcf4c740c5ea87033bd295e46cee85ff075f75253a93a5b372693acc4e9b1e45516e132d', 'complainant_phone_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'complainant_email_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'complainant_full_name_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f'}
2025-09-18 11:24:36,768 - db_manager - DEBUG - encrypted_data at update_complainant: {'complainant_full_name': 'c30d0407030211e5b8480863e12d6cd23d01ec80107efa91ac8da3b0330ba046c8a1bdac2a559c05a9dab9d9f442894e3d4891c6b1416f6e802aab007d954156fdd2b02a09731a043b0d7a6467d1', 'complainant_phone': 'c30d040703028d6fac24f83f400260d23d010f927e45fa8c768be0cb89017505a4a9fc88cc53dfc45e2af0e99e7d554c88902ccf9a8fcdd0803fb0ab3d35b20e75cfa6a88dc4c4c36e9d25028a0d', 'complainant_email': 'c30d040703027806aa97b0466bf878d23d015361ddaff8e39659483177991e534e015a8e7d9ff6f0e1cc9824095f45679d9d2386a5c29fc131233149ea098de78c6f13d26d41810ef1f33f29490d', 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_municipality': 'Not provided', 'complainant_village': 'Not provided', 'complainant_address': 'c30d0407030246935d6cbca433126ed23d0118be88278f4d7521715d8e9c4cd0351184f3be34857dd083dcf4c740c5ea87033bd295e46cee85ff075f75253a93a5b372693acc4e9b1e45516e132d', 'complainant_phone_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'complainant_email_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'complainant_full_name_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f'}
2025-09-18 11:24:36,768 - db_manager - DEBUG - execute_update values: ('c30d0407030211e5b8480863e12d6cd23d01ec80107efa91ac8da3b0330ba046c8a1bdac2a559c05a9dab9d9f442894e3d4891c6b1416f6e802aab007d954156fdd2b02a09731a043b0d7a6467d1', 'c30d040703028d6fac24f83f400260d23d010f927e45fa8c768be0cb89017505a4a9fc88cc53dfc45e2af0e99e7d554c88902ccf9a8fcdd0803fb0ab3d35b20e75cfa6a88dc4c4c36e9d25028a0d', 'c30d040703027806aa97b0466bf878d23d015361ddaff8e39659483177991e534e015a8e7d9ff6f0e1cc9824095f45679d9d2386a5c29fc131233149ea098de78c6f13d26d41810ef1f33f29490d', 'Koshi', 'Jhapa', 'Not provided', 'Not provided', 'c30d0407030246935d6cbca433126ed23d0118be88278f4d7521715d8e9c4cd0351184f3be34857dd083dcf4c740c5ea87033bd295e46cee85ff075f75253a93a5b372693acc4e9b1e45516e132d', 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'CM-20250918-KOJH-F203-B')
2025-09-18 11:24:36,768 - db_manager - DEBUG - execute_update query: UPDATE complainants SET complainant_full_name = %s, complainant_phone = %s, complainant_email = %s, complainant_province = %s, complainant_district = %s, complainant_municipality = %s, complainant_village = %s, complainant_address = %s, complainant_phone_hash = %s, complainant_email_hash = %s, complainant_full_name_hash = %s WHERE complainant_id = %s
2025-09-18 11:24:36,768 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 11:24:36,773 - db_manager - INFO - Starting database transaction
2025-09-18 11:24:36,773 - db_manager - INFO - execute_update: Executing update query: UPDATE complainants SET complainant_full_name = %s, complainant_phone = %s, complainant_email = %s, ...
2025-09-18 11:24:36,775 - db_manager - INFO - execute_update: Update completed in 0.01s. Affected rows: 1
2025-09-18 11:24:36,776 - db_manager - INFO - Transaction committed successfully
2025-09-18 11:24:36,777 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 11:24:36,777 - db_manager - INFO - Complainant updated in db: CM-20250918-KOJH-F203-B
2025-09-18 11:24:36,777 - db_manager - INFO - update_grievance: Updating grievance with ID: GR-20250918-KOJH-74BE-B
2025-09-18 11:24:36,777 - db_manager - DEBUG - execute_update values: ('dust everywhere in my house kids are coughing hard', 'GR-20250918-KOJH-74BE-B')
2025-09-18 11:24:36,777 - db_manager - DEBUG - execute_update query: 
                    UPDATE grievances 
                    SET grievance_description = %s, grievance_modification_date = CURRENT_TIMESTAMP
                    WHERE grievance_id = %s
                    RETURNING grievance_id
                
2025-09-18 11:24:36,777 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 11:24:36,782 - db_manager - INFO - Starting database transaction
2025-09-18 11:24:36,782 - db_manager - INFO - execute_update: Executing update query: 
                    UPDATE grievances 
                    SET grievance_description = %s, grievanc...
2025-09-18 11:24:36,783 - db_manager - INFO - execute_update: Update completed in 0.01s. Affected rows: 1
2025-09-18 11:24:36,785 - db_manager - INFO - Transaction committed successfully
2025-09-18 11:24:36,785 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 11:24:36,785 - db_manager - INFO - update_grievance: Updated grievance with ID: GR-20250918-KOJH-74BE-B, rows affected: 1
2025-09-18 11:24:36,785 - db_manager - INFO - Grievance updated in db: GR-20250918-KOJH-74BE-B
2025-09-18 11:24:36,786 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 11:24:36,790 - db_manager - INFO - Starting database transaction
2025-09-18 11:24:36,790 - db_manager - INFO - Executing get_grievance_files: 
            SELECT file_id, file_name, file_type, file_size, upload_timestamp
            FROM file...
2025-09-18 11:24:36,791 - db_manager - INFO - get_grievance_files completed in 0.01s. Rows: 0
2025-09-18 11:24:36,792 - db_manager - INFO - Transaction committed successfully
2025-09-18 11:24:36,792 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 11:24:36,792 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 11:24:36,797 - db_manager - INFO - Starting database transaction
2025-09-18 11:24:36,797 - db_manager - INFO - Executing get_grievance_files: 
            SELECT file_id, file_name, file_type, file_size, upload_timestamp
            FROM file...
2025-09-18 11:24:36,798 - db_manager - INFO - get_grievance_files completed in 0.01s. Rows: 0
2025-09-18 11:24:36,798 - db_manager - INFO - Transaction committed successfully
2025-09-18 11:24:36,798 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 11:24:37,252 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 11:24:37,258 - db_manager - INFO - Starting database transaction
2025-09-18 11:24:37,258 - db_manager - INFO - Executing get_grievance_by_id: 
                SELECT g.*, c.complainant_full_name, c.complainant_phone, c.complainant_email,
    ...
2025-09-18 11:24:37,260 - db_manager - INFO - get_grievance_by_id completed in 0.01s. Rows: 1
2025-09-18 11:24:37,260 - db_manager - INFO - Transaction committed successfully
2025-09-18 11:24:37,260 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 11:24:37,260 - db_manager - DEBUG - get_grievance_by_id: grievance_id: {'grievance_id': 'GR-20250918-KOJH-74BE-B', 'complainant_id': 'CM-20250918-KOJH-F203-B', 'grievance_categories': None, 'grievance_categories_alternative': None, 'follow_up_question': None, 'grievance_summary': None, 'grievance_description': 'dust everywhere in my house kids are coughing hard', 'grievance_claimed_amount': None, 'grievance_location': None, 'language_code': 'ne', 'grievance_classification_status': 'pending', 'grievance_creation_date': datetime.datetime(2025, 9, 18, 11, 24, 33, 40894, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'grievance_modification_date': datetime.datetime(2025, 9, 18, 11, 24, 36, 782470, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'is_temporary': True, 'source': 'bot', 'complainant_full_name': 'c30d0407030211e5b8480863e12d6cd23d01ec80107efa91ac8da3b0330ba046c8a1bdac2a559c05a9dab9d9f442894e3d4891c6b1416f6e802aab007d954156fdd2b02a09731a043b0d7a6467d1', 'complainant_phone': 'c30d040703028d6fac24f83f400260d23d010f927e45fa8c768be0cb89017505a4a9fc88cc53dfc45e2af0e99e7d554c88902ccf9a8fcdd0803fb0ab3d35b20e75cfa6a88dc4c4c36e9d25028a0d', 'complainant_email': 'c30d040703027806aa97b0466bf878d23d015361ddaff8e39659483177991e534e015a8e7d9ff6f0e1cc9824095f45679d9d2386a5c29fc131233149ea098de78c6f13d26d41810ef1f33f29490d', 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_municipality': 'Not provided', 'complainant_ward': None, 'complainant_village': 'Not provided', 'complainant_address': 'c30d0407030246935d6cbca433126ed23d0118be88278f4d7521715d8e9c4cd0351184f3be34857dd083dcf4c740c5ea87033bd295e46cee85ff075f75253a93a5b372693acc4e9b1e45516e132d'}, results: [{'grievance_id': 'GR-20250918-KOJH-74BE-B', 'complainant_id': 'CM-20250918-KOJH-F203-B', 'grievance_categories': None, 'grievance_categories_alternative': None, 'follow_up_question': None, 'grievance_summary': None, 'grievance_description': 'dust everywhere in my house kids are coughing hard', 'grievance_claimed_amount': None, 'grievance_location': None, 'language_code': 'ne', 'grievance_classification_status': 'pending', 'grievance_creation_date': datetime.datetime(2025, 9, 18, 11, 24, 33, 40894, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'grievance_modification_date': datetime.datetime(2025, 9, 18, 11, 24, 36, 782470, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'is_temporary': True, 'source': 'bot', 'complainant_full_name': 'c30d0407030211e5b8480863e12d6cd23d01ec80107efa91ac8da3b0330ba046c8a1bdac2a559c05a9dab9d9f442894e3d4891c6b1416f6e802aab007d954156fdd2b02a09731a043b0d7a6467d1', 'complainant_phone': 'c30d040703028d6fac24f83f400260d23d010f927e45fa8c768be0cb89017505a4a9fc88cc53dfc45e2af0e99e7d554c88902ccf9a8fcdd0803fb0ab3d35b20e75cfa6a88dc4c4c36e9d25028a0d', 'complainant_email': 'c30d040703027806aa97b0466bf878d23d015361ddaff8e39659483177991e534e015a8e7d9ff6f0e1cc9824095f45679d9d2386a5c29fc131233149ea098de78c6f13d26d41810ef1f33f29490d', 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_municipality': 'Not provided', 'complainant_ward': None, 'complainant_village': 'Not provided', 'complainant_address': 'c30d0407030246935d6cbca433126ed23d0118be88278f4d7521715d8e9c4cd0351184f3be34857dd083dcf4c740c5ea87033bd295e46cee85ff075f75253a93a5b372693acc4e9b1e45516e132d'}]
2025-09-18 11:31:55,498 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-18 11:31:55,498 - db_manager - INFO - Database manager initialized successfully
2025-09-18 11:31:55,498 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-18 11:31:55,499 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-18 11:31:55,499 - db_manager - INFO - Database manager initialized successfully
2025-09-18 11:31:55,499 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-18 11:31:55,499 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-18 11:31:55,499 - db_manager - INFO - Database manager initialized successfully
2025-09-18 11:31:55,499 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-18 11:31:55,499 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-18 11:31:55,499 - db_manager - INFO - Database manager initialized successfully
2025-09-18 11:31:55,499 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-18 11:31:55,499 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-18 11:31:55,499 - db_manager - INFO - Database manager initialized successfully
2025-09-18 11:31:55,499 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-18 11:31:55,499 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-18 11:31:55,499 - db_manager - INFO - Database manager initialized successfully
2025-09-18 11:31:55,499 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-18 11:31:55,499 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-18 11:31:55,499 - db_manager - INFO - Database manager initialized successfully
2025-09-18 11:31:55,499 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-18 11:31:55,499 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-18 11:31:55,499 - db_manager - INFO - Database manager initialized successfully
2025-09-18 11:31:55,500 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-18 11:31:55,500 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-18 11:31:55,500 - db_manager - INFO - Database manager initialized successfully
2025-09-18 11:31:55,500 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-18 11:31:55,500 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-18 11:31:55,500 - db_manager - INFO - Database manager initialized successfully
2025-09-18 11:31:55,500 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-18 11:32:27,284 - db_manager - INFO - create_complainant: Creating complainant with ID: CM-20250918-KOJH-EB1D-B
2025-09-18 11:32:27,284 - db_manager - DEBUG - encrypted and hashed data at encrypt_and_hash_sensitive_data: {'complainant_id': 'CM-20250918-KOJH-EB1D-B', 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_unique_id': 'CM-20250918-KOJH-EB1D-B'}
2025-09-18 11:32:27,284 - db_manager - DEBUG - query_keys at generate_query_string: dict_keys(['complainant_id', 'complainant_province', 'complainant_district', 'complainant_unique_id'])
2025-09-18 11:32:27,284 - db_manager - DEBUG - Generated query: INSERT INTO complainants (complainant_id, complainant_province, complainant_district, complainant_unique_id) VALUES (%s, %s, %s, %s)
2025-09-18 11:32:27,284 - db_manager - DEBUG - len of query_keys: 4
2025-09-18 11:32:27,284 - db_manager - DEBUG - Generated query: INSERT INTO complainants (complainant_id, complainant_province, complainant_district, complainant_unique_id) VALUES (%s, %s, %s, %s)
2025-09-18 11:32:27,284 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 11:32:27,291 - db_manager - INFO - Starting database transaction
2025-09-18 11:32:27,294 - db_manager - INFO - Transaction committed successfully
2025-09-18 11:32:27,294 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 11:32:27,294 - db_manager - INFO - create_complainant: Successfully created complainant with ID: CM-20250918-KOJH-EB1D-B
2025-09-18 11:32:27,294 - db_manager - INFO - create_grievance: Creating grievance with data: {'grievance_id': 'GR-20250918-KOJH-3D5E-B', 'complainant_id': 'CM-20250918-KOJH-EB1D-B', 'grievance_description': 'dust everywhere in my house kids are coughing hard', 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_office': None, 'source': 'bot', 'complainant_unique_id': 'CM-20250918-KOJH-EB1D-B'}
2025-09-18 11:32:27,294 - db_manager - INFO - create_grievance: Creating grievance with ID: GR-20250918-KOJH-3D5E-B
2025-09-18 11:32:27,294 - db_manager - INFO - create_grievance: Creating grievance with allowed fields: ['grievance_id', 'complainant_id', 'grievance_categories', 'grievance_categories_alternative', 'follow_up_question', 'grievance_summary', 'grievance_description', 'grievance_claimed_amount', 'grievance_location', 'is_temporary', 'source', 'language_code', 'grievance_classification_status']
2025-09-18 11:32:27,294 - db_manager - DEBUG - query_keys at generate_query_string: dict_keys(['grievance_id', 'complainant_id', 'grievance_description', 'source'])
2025-09-18 11:32:27,294 - db_manager - DEBUG - Generated query: INSERT INTO grievances (grievance_id, complainant_id, grievance_description, source) VALUES (%s, %s, %s, %s) RETURNING grievance_id
2025-09-18 11:32:27,294 - db_manager - DEBUG - len of query_keys: 4
2025-09-18 11:32:27,294 - db_manager - DEBUG - Generated query: INSERT INTO grievances (grievance_id, complainant_id, grievance_description, source) VALUES (%s, %s, %s, %s) RETURNING grievance_id
2025-09-18 11:32:27,294 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 11:32:27,301 - db_manager - INFO - Starting database transaction
2025-09-18 11:32:27,305 - db_manager - INFO - Transaction committed successfully
2025-09-18 11:32:27,305 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 11:32:27,306 - db_manager - INFO - create_grievance: Successfully created grievance with ID: GR-20250918-KOJH-3D5E-B
2025-09-18 11:32:29,805 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 11:32:29,811 - db_manager - INFO - Starting database transaction
2025-09-18 11:32:29,811 - db_manager - INFO - Executing get_complainant_by_id: 
            SELECT complainant_id, complainant_unique_id, complainant_full_name,    complainant_pho...
2025-09-18 11:32:29,812 - db_manager - INFO - get_complainant_by_id completed in 0.01s. Rows: 1
2025-09-18 11:32:29,812 - db_manager - INFO - Transaction committed successfully
2025-09-18 11:32:29,812 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 11:32:29,812 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 11:32:29,818 - db_manager - INFO - Starting database transaction
2025-09-18 11:32:29,818 - db_manager - INFO - Executing get_grievance_by_id: 
                SELECT g.*, c.complainant_full_name, c.complainant_phone, c.complainant_email,
    ...
2025-09-18 11:32:29,819 - db_manager - INFO - get_grievance_by_id completed in 0.01s. Rows: 1
2025-09-18 11:32:29,819 - db_manager - INFO - Transaction committed successfully
2025-09-18 11:32:29,819 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 11:32:29,819 - db_manager - DEBUG - get_grievance_by_id: grievance_id: {'grievance_id': 'GR-20250918-KOJH-3D5E-B', 'complainant_id': 'CM-20250918-KOJH-EB1D-B', 'grievance_categories': None, 'grievance_categories_alternative': None, 'follow_up_question': None, 'grievance_summary': None, 'grievance_description': 'dust everywhere in my house kids are coughing hard', 'grievance_claimed_amount': None, 'grievance_location': None, 'language_code': 'ne', 'grievance_classification_status': 'pending', 'grievance_creation_date': datetime.datetime(2025, 9, 18, 11, 32, 27, 301442, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'grievance_modification_date': datetime.datetime(2025, 9, 18, 11, 32, 27, 301442, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'is_temporary': True, 'source': 'bot', 'complainant_full_name': None, 'complainant_phone': None, 'complainant_email': None, 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_municipality': None, 'complainant_ward': None, 'complainant_village': None, 'complainant_address': None}, results: [{'grievance_id': 'GR-20250918-KOJH-3D5E-B', 'complainant_id': 'CM-20250918-KOJH-EB1D-B', 'grievance_categories': None, 'grievance_categories_alternative': None, 'follow_up_question': None, 'grievance_summary': None, 'grievance_description': 'dust everywhere in my house kids are coughing hard', 'grievance_claimed_amount': None, 'grievance_location': None, 'language_code': 'ne', 'grievance_classification_status': 'pending', 'grievance_creation_date': datetime.datetime(2025, 9, 18, 11, 32, 27, 301442, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'grievance_modification_date': datetime.datetime(2025, 9, 18, 11, 32, 27, 301442, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'is_temporary': True, 'source': 'bot', 'complainant_full_name': None, 'complainant_phone': None, 'complainant_email': None, 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_municipality': None, 'complainant_ward': None, 'complainant_village': None, 'complainant_address': None}]
2025-09-18 11:32:29,819 - db_manager - INFO - update_complainant: Updating complainant with ID: CM-20250918-KOJH-EB1D-B
2025-09-18 11:32:29,820 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 11:32:29,824 - db_manager - INFO - Starting database transaction
2025-09-18 11:32:29,824 - db_manager - INFO - Executing encrypt_field: SELECT encode(pgp_sym_encrypt(%s, %s), 'hex') AS encrypted...
2025-09-18 11:32:29,826 - db_manager - INFO - encrypt_field completed in 0.01s. Rows: 1
2025-09-18 11:32:29,826 - db_manager - INFO - Transaction committed successfully
2025-09-18 11:32:29,826 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 11:32:29,826 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 11:32:29,831 - db_manager - INFO - Starting database transaction
2025-09-18 11:32:29,831 - db_manager - INFO - Executing encrypt_field: SELECT encode(pgp_sym_encrypt(%s, %s), 'hex') AS encrypted...
2025-09-18 11:32:29,832 - db_manager - INFO - encrypt_field completed in 0.01s. Rows: 1
2025-09-18 11:32:29,833 - db_manager - INFO - Transaction committed successfully
2025-09-18 11:32:29,833 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 11:32:29,833 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 11:32:29,839 - db_manager - INFO - Starting database transaction
2025-09-18 11:32:29,839 - db_manager - INFO - Executing encrypt_field: SELECT encode(pgp_sym_encrypt(%s, %s), 'hex') AS encrypted...
2025-09-18 11:32:29,841 - db_manager - INFO - encrypt_field completed in 0.01s. Rows: 1
2025-09-18 11:32:29,841 - db_manager - INFO - Transaction committed successfully
2025-09-18 11:32:29,841 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 11:32:29,841 - db_manager - DEBUG - encrypted phone number Not provided at encrypt_complainant_data: c30d04070302f73b20be11952f107bd23d011a29223377cb3a2d7c6a4b8287f96e13508ed17022ea336475b8ae4074df0db83ee539dced548536476e06830b0ce2171ce83dcb7e6933cd1c8c2311
2025-09-18 11:32:29,842 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 11:32:29,847 - db_manager - INFO - Starting database transaction
2025-09-18 11:32:29,847 - db_manager - INFO - Executing encrypt_field: SELECT encode(pgp_sym_encrypt(%s, %s), 'hex') AS encrypted...
2025-09-18 11:32:29,849 - db_manager - INFO - encrypt_field completed in 0.01s. Rows: 1
2025-09-18 11:32:29,849 - db_manager - INFO - Transaction committed successfully
2025-09-18 11:32:29,849 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 11:32:29,849 - db_manager - DEBUG - phone number Not provided hashed to d83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f at hash_sensitive_data
2025-09-18 11:32:29,849 - db_manager - DEBUG - encrypted and hashed data at encrypt_and_hash_sensitive_data: {'complainant_full_name': 'c30d040703023d460cfb126bd41b71d23d01b1a8324130da00f2cfa4b6ee939b06d17cdc43a6f7d456baeb7ff56c53057e3ada1ca173a7e4dc58d9516ecb242a3b976aee0c5d4ab92dd50f9a122d', 'complainant_phone': 'c30d04070302f73b20be11952f107bd23d011a29223377cb3a2d7c6a4b8287f96e13508ed17022ea336475b8ae4074df0db83ee539dced548536476e06830b0ce2171ce83dcb7e6933cd1c8c2311', 'complainant_email': 'c30d04070302db59e5c4984a12927bd23d018ea095b971a9a5a175cb40ccfe4103aa4b482cf6dc08c226f7901a44ce127718b8da7979ceb4c6c73fdc72408bb945aa3a22090a4f337e9720ae5d48', 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_municipality': 'Not provided', 'complainant_village': 'Not provided', 'complainant_address': 'c30d040703025433ac2c4cee74e47ed23d018a1a857294c12dc11855fcf256213b878ec7383e07dc0de20f63643be7683c4b6eb415f9dd22be32aa8f0e90a087b23a4218507a23fd18cb33117a56', 'complainant_email_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'complainant_phone_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'complainant_full_name_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f'}
2025-09-18 11:32:29,849 - db_manager - DEBUG - encrypted_data at update_complainant: {'complainant_full_name': 'c30d040703023d460cfb126bd41b71d23d01b1a8324130da00f2cfa4b6ee939b06d17cdc43a6f7d456baeb7ff56c53057e3ada1ca173a7e4dc58d9516ecb242a3b976aee0c5d4ab92dd50f9a122d', 'complainant_phone': 'c30d04070302f73b20be11952f107bd23d011a29223377cb3a2d7c6a4b8287f96e13508ed17022ea336475b8ae4074df0db83ee539dced548536476e06830b0ce2171ce83dcb7e6933cd1c8c2311', 'complainant_email': 'c30d04070302db59e5c4984a12927bd23d018ea095b971a9a5a175cb40ccfe4103aa4b482cf6dc08c226f7901a44ce127718b8da7979ceb4c6c73fdc72408bb945aa3a22090a4f337e9720ae5d48', 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_municipality': 'Not provided', 'complainant_village': 'Not provided', 'complainant_address': 'c30d040703025433ac2c4cee74e47ed23d018a1a857294c12dc11855fcf256213b878ec7383e07dc0de20f63643be7683c4b6eb415f9dd22be32aa8f0e90a087b23a4218507a23fd18cb33117a56', 'complainant_email_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'complainant_phone_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'complainant_full_name_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f'}
2025-09-18 11:32:29,849 - db_manager - DEBUG - execute_update values: ('c30d040703023d460cfb126bd41b71d23d01b1a8324130da00f2cfa4b6ee939b06d17cdc43a6f7d456baeb7ff56c53057e3ada1ca173a7e4dc58d9516ecb242a3b976aee0c5d4ab92dd50f9a122d', 'c30d04070302f73b20be11952f107bd23d011a29223377cb3a2d7c6a4b8287f96e13508ed17022ea336475b8ae4074df0db83ee539dced548536476e06830b0ce2171ce83dcb7e6933cd1c8c2311', 'c30d04070302db59e5c4984a12927bd23d018ea095b971a9a5a175cb40ccfe4103aa4b482cf6dc08c226f7901a44ce127718b8da7979ceb4c6c73fdc72408bb945aa3a22090a4f337e9720ae5d48', 'Koshi', 'Jhapa', 'Not provided', 'Not provided', 'c30d040703025433ac2c4cee74e47ed23d018a1a857294c12dc11855fcf256213b878ec7383e07dc0de20f63643be7683c4b6eb415f9dd22be32aa8f0e90a087b23a4218507a23fd18cb33117a56', 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'CM-20250918-KOJH-EB1D-B')
2025-09-18 11:32:29,849 - db_manager - DEBUG - execute_update query: UPDATE complainants SET complainant_full_name = %s, complainant_phone = %s, complainant_email = %s, complainant_province = %s, complainant_district = %s, complainant_municipality = %s, complainant_village = %s, complainant_address = %s, complainant_email_hash = %s, complainant_phone_hash = %s, complainant_full_name_hash = %s WHERE complainant_id = %s
2025-09-18 11:32:29,849 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 11:32:29,854 - db_manager - INFO - Starting database transaction
2025-09-18 11:32:29,854 - db_manager - INFO - execute_update: Executing update query: UPDATE complainants SET complainant_full_name = %s, complainant_phone = %s, complainant_email = %s, ...
2025-09-18 11:32:29,856 - db_manager - INFO - execute_update: Update completed in 0.01s. Affected rows: 1
2025-09-18 11:32:29,858 - db_manager - INFO - Transaction committed successfully
2025-09-18 11:32:29,858 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 11:32:29,858 - db_manager - INFO - Complainant updated in db: CM-20250918-KOJH-EB1D-B
2025-09-18 11:32:29,858 - db_manager - INFO - update_grievance: Updating grievance with ID: GR-20250918-KOJH-3D5E-B
2025-09-18 11:32:29,858 - db_manager - DEBUG - execute_update values: ('dust everywhere in my house kids are coughing hard', 'GR-20250918-KOJH-3D5E-B')
2025-09-18 11:32:29,858 - db_manager - DEBUG - execute_update query: 
                    UPDATE grievances 
                    SET grievance_description = %s, grievance_modification_date = CURRENT_TIMESTAMP
                    WHERE grievance_id = %s
                    RETURNING grievance_id
                
2025-09-18 11:32:29,858 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 11:32:29,863 - db_manager - INFO - Starting database transaction
2025-09-18 11:32:29,863 - db_manager - INFO - execute_update: Executing update query: 
                    UPDATE grievances 
                    SET grievance_description = %s, grievanc...
2025-09-18 11:32:29,864 - db_manager - INFO - execute_update: Update completed in 0.01s. Affected rows: 1
2025-09-18 11:32:29,866 - db_manager - INFO - Transaction committed successfully
2025-09-18 11:32:29,867 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 11:32:29,867 - db_manager - INFO - update_grievance: Updated grievance with ID: GR-20250918-KOJH-3D5E-B, rows affected: 1
2025-09-18 11:32:29,867 - db_manager - INFO - Grievance updated in db: GR-20250918-KOJH-3D5E-B
2025-09-18 11:32:29,867 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 11:32:29,872 - db_manager - INFO - Starting database transaction
2025-09-18 11:32:29,872 - db_manager - INFO - Executing get_grievance_files: 
            SELECT file_id, file_name, file_type, file_size, upload_timestamp
            FROM file...
2025-09-18 11:32:29,873 - db_manager - INFO - get_grievance_files completed in 0.01s. Rows: 0
2025-09-18 11:32:29,873 - db_manager - INFO - Transaction committed successfully
2025-09-18 11:32:29,873 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 11:32:29,873 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 11:32:29,878 - db_manager - INFO - Starting database transaction
2025-09-18 11:32:29,878 - db_manager - INFO - Executing get_grievance_files: 
            SELECT file_id, file_name, file_type, file_size, upload_timestamp
            FROM file...
2025-09-18 11:32:29,879 - db_manager - INFO - get_grievance_files completed in 0.01s. Rows: 0
2025-09-18 11:32:29,879 - db_manager - INFO - Transaction committed successfully
2025-09-18 11:32:29,879 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 11:32:27,860 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 11:32:27,866 - db_manager - INFO - Starting database transaction
2025-09-18 11:32:27,866 - db_manager - INFO - Executing get_grievance_by_id: 
                SELECT g.*, c.complainant_full_name, c.complainant_phone, c.complainant_email,
    ...
2025-09-18 11:32:27,867 - db_manager - INFO - get_grievance_by_id completed in 0.01s. Rows: 1
2025-09-18 11:32:27,868 - db_manager - INFO - Transaction committed successfully
2025-09-18 11:32:27,868 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 11:32:27,868 - db_manager - DEBUG - get_grievance_by_id: grievance_id: {'grievance_id': 'GR-20250918-KOJH-3D5E-B', 'complainant_id': 'CM-20250918-KOJH-EB1D-B', 'grievance_categories': None, 'grievance_categories_alternative': None, 'follow_up_question': None, 'grievance_summary': None, 'grievance_description': 'dust everywhere in my house kids are coughing hard', 'grievance_claimed_amount': None, 'grievance_location': None, 'language_code': 'ne', 'grievance_classification_status': 'pending', 'grievance_creation_date': datetime.datetime(2025, 9, 18, 11, 32, 27, 301442, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'grievance_modification_date': datetime.datetime(2025, 9, 18, 11, 32, 29, 863873, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'is_temporary': True, 'source': 'bot', 'complainant_full_name': 'c30d040703023d460cfb126bd41b71d23d01b1a8324130da00f2cfa4b6ee939b06d17cdc43a6f7d456baeb7ff56c53057e3ada1ca173a7e4dc58d9516ecb242a3b976aee0c5d4ab92dd50f9a122d', 'complainant_phone': 'c30d04070302f73b20be11952f107bd23d011a29223377cb3a2d7c6a4b8287f96e13508ed17022ea336475b8ae4074df0db83ee539dced548536476e06830b0ce2171ce83dcb7e6933cd1c8c2311', 'complainant_email': 'c30d04070302db59e5c4984a12927bd23d018ea095b971a9a5a175cb40ccfe4103aa4b482cf6dc08c226f7901a44ce127718b8da7979ceb4c6c73fdc72408bb945aa3a22090a4f337e9720ae5d48', 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_municipality': 'Not provided', 'complainant_ward': None, 'complainant_village': 'Not provided', 'complainant_address': 'c30d040703025433ac2c4cee74e47ed23d018a1a857294c12dc11855fcf256213b878ec7383e07dc0de20f63643be7683c4b6eb415f9dd22be32aa8f0e90a087b23a4218507a23fd18cb33117a56'}, results: [{'grievance_id': 'GR-20250918-KOJH-3D5E-B', 'complainant_id': 'CM-20250918-KOJH-EB1D-B', 'grievance_categories': None, 'grievance_categories_alternative': None, 'follow_up_question': None, 'grievance_summary': None, 'grievance_description': 'dust everywhere in my house kids are coughing hard', 'grievance_claimed_amount': None, 'grievance_location': None, 'language_code': 'ne', 'grievance_classification_status': 'pending', 'grievance_creation_date': datetime.datetime(2025, 9, 18, 11, 32, 27, 301442, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'grievance_modification_date': datetime.datetime(2025, 9, 18, 11, 32, 29, 863873, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'is_temporary': True, 'source': 'bot', 'complainant_full_name': 'c30d040703023d460cfb126bd41b71d23d01b1a8324130da00f2cfa4b6ee939b06d17cdc43a6f7d456baeb7ff56c53057e3ada1ca173a7e4dc58d9516ecb242a3b976aee0c5d4ab92dd50f9a122d', 'complainant_phone': 'c30d04070302f73b20be11952f107bd23d011a29223377cb3a2d7c6a4b8287f96e13508ed17022ea336475b8ae4074df0db83ee539dced548536476e06830b0ce2171ce83dcb7e6933cd1c8c2311', 'complainant_email': 'c30d04070302db59e5c4984a12927bd23d018ea095b971a9a5a175cb40ccfe4103aa4b482cf6dc08c226f7901a44ce127718b8da7979ceb4c6c73fdc72408bb945aa3a22090a4f337e9720ae5d48', 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_municipality': 'Not provided', 'complainant_ward': None, 'complainant_village': 'Not provided', 'complainant_address': 'c30d040703025433ac2c4cee74e47ed23d018a1a857294c12dc11855fcf256213b878ec7383e07dc0de20f63643be7683c4b6eb415f9dd22be32aa8f0e90a087b23a4218507a23fd18cb33117a56'}]
2025-09-18 11:39:22,248 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-18 11:39:22,249 - db_manager - INFO - Database manager initialized successfully
2025-09-18 11:39:22,249 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-18 11:39:22,249 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-18 11:39:22,249 - db_manager - INFO - Database manager initialized successfully
2025-09-18 11:39:22,249 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-18 11:39:22,249 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-18 11:39:22,249 - db_manager - INFO - Database manager initialized successfully
2025-09-18 11:39:22,249 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-18 11:39:22,249 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-18 11:39:22,249 - db_manager - INFO - Database manager initialized successfully
2025-09-18 11:39:22,249 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-18 11:39:22,250 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-18 11:39:22,250 - db_manager - INFO - Database manager initialized successfully
2025-09-18 11:39:22,250 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-18 11:39:22,250 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-18 11:39:22,250 - db_manager - INFO - Database manager initialized successfully
2025-09-18 11:39:22,250 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-18 11:39:22,250 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-18 11:39:22,250 - db_manager - INFO - Database manager initialized successfully
2025-09-18 11:39:22,250 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-18 11:39:22,250 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-18 11:39:22,250 - db_manager - INFO - Database manager initialized successfully
2025-09-18 11:39:22,250 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-18 11:39:22,250 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-18 11:39:22,250 - db_manager - INFO - Database manager initialized successfully
2025-09-18 11:39:22,250 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-18 11:39:22,250 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-18 11:39:22,250 - db_manager - INFO - Database manager initialized successfully
2025-09-18 11:39:22,250 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-18 11:41:27,224 - db_manager - INFO - create_complainant: Creating complainant with ID: CM-20250918-KOJH-6764-B
2025-09-18 11:41:27,224 - db_manager - DEBUG - encrypted and hashed data at encrypt_and_hash_sensitive_data: {'complainant_id': 'CM-20250918-KOJH-6764-B', 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_unique_id': 'CM-20250918-KOJH-6764-B'}
2025-09-18 11:41:27,224 - db_manager - DEBUG - query_keys at generate_query_string: dict_keys(['complainant_id', 'complainant_province', 'complainant_district', 'complainant_unique_id'])
2025-09-18 11:41:27,224 - db_manager - DEBUG - Generated query: INSERT INTO complainants (complainant_id, complainant_province, complainant_district, complainant_unique_id) VALUES (%s, %s, %s, %s)
2025-09-18 11:41:27,224 - db_manager - DEBUG - len of query_keys: 4
2025-09-18 11:41:27,224 - db_manager - DEBUG - Generated query: INSERT INTO complainants (complainant_id, complainant_province, complainant_district, complainant_unique_id) VALUES (%s, %s, %s, %s)
2025-09-18 11:41:27,224 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 11:41:27,232 - db_manager - INFO - Starting database transaction
2025-09-18 11:41:27,234 - db_manager - INFO - Transaction committed successfully
2025-09-18 11:41:27,234 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 11:41:27,235 - db_manager - INFO - create_complainant: Successfully created complainant with ID: CM-20250918-KOJH-6764-B
2025-09-18 11:41:27,235 - db_manager - INFO - create_grievance: Creating grievance with data: {'grievance_id': 'GR-20250918-KOJH-C8F5-B', 'complainant_id': 'CM-20250918-KOJH-6764-B', 'grievance_description': 'dust everywhere in my house kids are coughing hard', 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_office': None, 'source': 'bot', 'complainant_unique_id': 'CM-20250918-KOJH-6764-B'}
2025-09-18 11:41:27,235 - db_manager - INFO - create_grievance: Creating grievance with ID: GR-20250918-KOJH-C8F5-B
2025-09-18 11:41:27,235 - db_manager - INFO - create_grievance: Creating grievance with allowed fields: ['grievance_id', 'complainant_id', 'grievance_categories', 'grievance_categories_alternative', 'follow_up_question', 'grievance_summary', 'grievance_description', 'grievance_claimed_amount', 'grievance_location', 'is_temporary', 'source', 'language_code', 'grievance_classification_status']
2025-09-18 11:41:27,235 - db_manager - DEBUG - query_keys at generate_query_string: dict_keys(['grievance_id', 'complainant_id', 'grievance_description', 'source'])
2025-09-18 11:41:27,235 - db_manager - DEBUG - Generated query: INSERT INTO grievances (grievance_id, complainant_id, grievance_description, source) VALUES (%s, %s, %s, %s) RETURNING grievance_id
2025-09-18 11:41:27,235 - db_manager - DEBUG - len of query_keys: 4
2025-09-18 11:41:27,235 - db_manager - DEBUG - Generated query: INSERT INTO grievances (grievance_id, complainant_id, grievance_description, source) VALUES (%s, %s, %s, %s) RETURNING grievance_id
2025-09-18 11:41:27,235 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 11:41:27,240 - db_manager - INFO - Starting database transaction
2025-09-18 11:41:27,245 - db_manager - INFO - Transaction committed successfully
2025-09-18 11:41:27,245 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 11:41:27,245 - db_manager - INFO - create_grievance: Successfully created grievance with ID: GR-20250918-KOJH-C8F5-B
2025-09-18 11:41:26,380 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 11:41:26,386 - db_manager - INFO - Starting database transaction
2025-09-18 11:41:26,386 - db_manager - INFO - Executing get_complainant_by_id: 
            SELECT complainant_id, complainant_unique_id, complainant_full_name,    complainant_pho...
2025-09-18 11:41:26,387 - db_manager - INFO - get_complainant_by_id completed in 0.01s. Rows: 1
2025-09-18 11:41:26,387 - db_manager - INFO - Transaction committed successfully
2025-09-18 11:41:26,387 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 11:41:26,387 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 11:41:26,392 - db_manager - INFO - Starting database transaction
2025-09-18 11:41:26,392 - db_manager - INFO - Executing get_grievance_by_id: 
                SELECT g.*, c.complainant_full_name, c.complainant_phone, c.complainant_email,
    ...
2025-09-18 11:41:26,394 - db_manager - INFO - get_grievance_by_id completed in 0.01s. Rows: 1
2025-09-18 11:41:26,394 - db_manager - INFO - Transaction committed successfully
2025-09-18 11:41:26,394 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 11:41:26,394 - db_manager - DEBUG - get_grievance_by_id: grievance_id: {'grievance_id': 'GR-20250918-KOJH-C8F5-B', 'complainant_id': 'CM-20250918-KOJH-6764-B', 'grievance_categories': None, 'grievance_categories_alternative': None, 'follow_up_question': None, 'grievance_summary': None, 'grievance_description': 'dust everywhere in my house kids are coughing hard', 'grievance_claimed_amount': None, 'grievance_location': None, 'language_code': 'ne', 'grievance_classification_status': 'pending', 'grievance_creation_date': datetime.datetime(2025, 9, 18, 11, 41, 27, 240735, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'grievance_modification_date': datetime.datetime(2025, 9, 18, 11, 41, 27, 240735, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'is_temporary': True, 'source': 'bot', 'complainant_full_name': None, 'complainant_phone': None, 'complainant_email': None, 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_municipality': None, 'complainant_ward': None, 'complainant_village': None, 'complainant_address': None}, results: [{'grievance_id': 'GR-20250918-KOJH-C8F5-B', 'complainant_id': 'CM-20250918-KOJH-6764-B', 'grievance_categories': None, 'grievance_categories_alternative': None, 'follow_up_question': None, 'grievance_summary': None, 'grievance_description': 'dust everywhere in my house kids are coughing hard', 'grievance_claimed_amount': None, 'grievance_location': None, 'language_code': 'ne', 'grievance_classification_status': 'pending', 'grievance_creation_date': datetime.datetime(2025, 9, 18, 11, 41, 27, 240735, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'grievance_modification_date': datetime.datetime(2025, 9, 18, 11, 41, 27, 240735, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'is_temporary': True, 'source': 'bot', 'complainant_full_name': None, 'complainant_phone': None, 'complainant_email': None, 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_municipality': None, 'complainant_ward': None, 'complainant_village': None, 'complainant_address': None}]
2025-09-18 11:41:26,394 - db_manager - INFO - update_complainant: Updating complainant with ID: CM-20250918-KOJH-6764-B
2025-09-18 11:41:26,394 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 11:41:26,399 - db_manager - INFO - Starting database transaction
2025-09-18 11:41:26,399 - db_manager - INFO - Executing encrypt_field: SELECT encode(pgp_sym_encrypt(%s, %s), 'hex') AS encrypted...
2025-09-18 11:41:26,402 - db_manager - INFO - encrypt_field completed in 0.01s. Rows: 1
2025-09-18 11:41:26,402 - db_manager - INFO - Transaction committed successfully
2025-09-18 11:41:26,402 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 11:41:26,402 - db_manager - DEBUG - encrypted phone number Not provided at encrypt_complainant_data: c30d040703023a84b24b953060eb65d23d0150fcfe583f5aeed040bc23e40ce0b1bd728cffcd19495a22f66eb1e922d9cc3c3eb4977223d314cfee859b65e9f1d4f5eeb6d5ce94402c0ac9403ca6
2025-09-18 11:41:26,402 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 11:41:26,407 - db_manager - INFO - Starting database transaction
2025-09-18 11:41:26,407 - db_manager - INFO - Executing encrypt_field: SELECT encode(pgp_sym_encrypt(%s, %s), 'hex') AS encrypted...
2025-09-18 11:41:26,408 - db_manager - INFO - encrypt_field completed in 0.01s. Rows: 1
2025-09-18 11:41:26,408 - db_manager - INFO - Transaction committed successfully
2025-09-18 11:41:26,408 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 11:41:26,408 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 11:41:26,413 - db_manager - INFO - Starting database transaction
2025-09-18 11:41:26,413 - db_manager - INFO - Executing encrypt_field: SELECT encode(pgp_sym_encrypt(%s, %s), 'hex') AS encrypted...
2025-09-18 11:41:26,414 - db_manager - INFO - encrypt_field completed in 0.01s. Rows: 1
2025-09-18 11:41:26,414 - db_manager - INFO - Transaction committed successfully
2025-09-18 11:41:26,414 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 11:41:26,414 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 11:41:26,419 - db_manager - INFO - Starting database transaction
2025-09-18 11:41:26,419 - db_manager - INFO - Executing encrypt_field: SELECT encode(pgp_sym_encrypt(%s, %s), 'hex') AS encrypted...
2025-09-18 11:41:26,420 - db_manager - INFO - encrypt_field completed in 0.01s. Rows: 1
2025-09-18 11:41:26,421 - db_manager - INFO - Transaction committed successfully
2025-09-18 11:41:26,421 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 11:41:26,421 - db_manager - DEBUG - phone number Not provided hashed to d83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f at hash_sensitive_data
2025-09-18 11:41:26,421 - db_manager - DEBUG - encrypted and hashed data at encrypt_and_hash_sensitive_data: {'complainant_full_name': 'c30d040703029e4bb917019d432a67d23d01363733cd505cf095ef9336486b3d39a99c3c53337a9ec221ea65685c89507b3fafe14490cde943f9021594c64414a392332614ea2725cee19a935493', 'complainant_phone': 'c30d040703023a84b24b953060eb65d23d0150fcfe583f5aeed040bc23e40ce0b1bd728cffcd19495a22f66eb1e922d9cc3c3eb4977223d314cfee859b65e9f1d4f5eeb6d5ce94402c0ac9403ca6', 'complainant_email': 'c30d0407030213dcc0936aa76e056cd23d01ff5ae071c1ebaf788ca8598c9ce383593cb1a9984d60a3ac2897abfb9563c40122e107f279e4cf7ac76058361a082af65b13931df01f731229c7df20', 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_municipality': 'Not provided', 'complainant_village': 'Not provided', 'complainant_address': 'c30d040703021fa1f2e37d83634f72d23d0103f4909bcc83794c3d560e8bbc7281cdc1eac1b16c7d88981b34397ab300f2e125d2199679638a8fd0f035873fa3f8ff927a6d8d4b90d4b2fe46c60f', 'complainant_phone_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'complainant_email_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'complainant_full_name_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f'}
2025-09-18 11:41:26,421 - db_manager - DEBUG - encrypted_data at update_complainant: {'complainant_full_name': 'c30d040703029e4bb917019d432a67d23d01363733cd505cf095ef9336486b3d39a99c3c53337a9ec221ea65685c89507b3fafe14490cde943f9021594c64414a392332614ea2725cee19a935493', 'complainant_phone': 'c30d040703023a84b24b953060eb65d23d0150fcfe583f5aeed040bc23e40ce0b1bd728cffcd19495a22f66eb1e922d9cc3c3eb4977223d314cfee859b65e9f1d4f5eeb6d5ce94402c0ac9403ca6', 'complainant_email': 'c30d0407030213dcc0936aa76e056cd23d01ff5ae071c1ebaf788ca8598c9ce383593cb1a9984d60a3ac2897abfb9563c40122e107f279e4cf7ac76058361a082af65b13931df01f731229c7df20', 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_municipality': 'Not provided', 'complainant_village': 'Not provided', 'complainant_address': 'c30d040703021fa1f2e37d83634f72d23d0103f4909bcc83794c3d560e8bbc7281cdc1eac1b16c7d88981b34397ab300f2e125d2199679638a8fd0f035873fa3f8ff927a6d8d4b90d4b2fe46c60f', 'complainant_phone_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'complainant_email_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'complainant_full_name_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f'}
2025-09-18 11:41:26,421 - db_manager - DEBUG - execute_update values: ('c30d040703029e4bb917019d432a67d23d01363733cd505cf095ef9336486b3d39a99c3c53337a9ec221ea65685c89507b3fafe14490cde943f9021594c64414a392332614ea2725cee19a935493', 'c30d040703023a84b24b953060eb65d23d0150fcfe583f5aeed040bc23e40ce0b1bd728cffcd19495a22f66eb1e922d9cc3c3eb4977223d314cfee859b65e9f1d4f5eeb6d5ce94402c0ac9403ca6', 'c30d0407030213dcc0936aa76e056cd23d01ff5ae071c1ebaf788ca8598c9ce383593cb1a9984d60a3ac2897abfb9563c40122e107f279e4cf7ac76058361a082af65b13931df01f731229c7df20', 'Koshi', 'Jhapa', 'Not provided', 'Not provided', 'c30d040703021fa1f2e37d83634f72d23d0103f4909bcc83794c3d560e8bbc7281cdc1eac1b16c7d88981b34397ab300f2e125d2199679638a8fd0f035873fa3f8ff927a6d8d4b90d4b2fe46c60f', 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'CM-20250918-KOJH-6764-B')
2025-09-18 11:41:26,421 - db_manager - DEBUG - execute_update query: UPDATE complainants SET complainant_full_name = %s, complainant_phone = %s, complainant_email = %s, complainant_province = %s, complainant_district = %s, complainant_municipality = %s, complainant_village = %s, complainant_address = %s, complainant_phone_hash = %s, complainant_email_hash = %s, complainant_full_name_hash = %s WHERE complainant_id = %s
2025-09-18 11:41:26,421 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 11:41:26,426 - db_manager - INFO - Starting database transaction
2025-09-18 11:41:26,426 - db_manager - INFO - execute_update: Executing update query: UPDATE complainants SET complainant_full_name = %s, complainant_phone = %s, complainant_email = %s, ...
2025-09-18 11:41:26,427 - db_manager - INFO - execute_update: Update completed in 0.01s. Affected rows: 1
2025-09-18 11:41:26,429 - db_manager - INFO - Transaction committed successfully
2025-09-18 11:41:26,430 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 11:41:26,430 - db_manager - INFO - Complainant updated in db: CM-20250918-KOJH-6764-B
2025-09-18 11:41:26,430 - db_manager - INFO - update_grievance: Updating grievance with ID: GR-20250918-KOJH-C8F5-B
2025-09-18 11:41:26,430 - db_manager - DEBUG - execute_update values: ('dust everywhere in my house kids are coughing hard', 'GR-20250918-KOJH-C8F5-B')
2025-09-18 11:41:26,430 - db_manager - DEBUG - execute_update query: 
                    UPDATE grievances 
                    SET grievance_description = %s, grievance_modification_date = CURRENT_TIMESTAMP
                    WHERE grievance_id = %s
                    RETURNING grievance_id
                
2025-09-18 11:41:26,430 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 11:41:26,435 - db_manager - INFO - Starting database transaction
2025-09-18 11:41:26,436 - db_manager - INFO - execute_update: Executing update query: 
                    UPDATE grievances 
                    SET grievance_description = %s, grievanc...
2025-09-18 11:41:26,437 - db_manager - INFO - execute_update: Update completed in 0.01s. Affected rows: 1
2025-09-18 11:41:26,439 - db_manager - INFO - Transaction committed successfully
2025-09-18 11:41:26,439 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 11:41:26,440 - db_manager - INFO - update_grievance: Updated grievance with ID: GR-20250918-KOJH-C8F5-B, rows affected: 1
2025-09-18 11:41:26,440 - db_manager - INFO - Grievance updated in db: GR-20250918-KOJH-C8F5-B
2025-09-18 11:41:26,440 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 11:41:26,446 - db_manager - INFO - Starting database transaction
2025-09-18 11:41:26,446 - db_manager - INFO - Executing get_grievance_files: 
            SELECT file_id, file_name, file_type, file_size, upload_timestamp
            FROM file...
2025-09-18 11:41:26,447 - db_manager - INFO - get_grievance_files completed in 0.01s. Rows: 0
2025-09-18 11:41:26,448 - db_manager - INFO - Transaction committed successfully
2025-09-18 11:41:26,448 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 11:41:26,448 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 11:41:26,453 - db_manager - INFO - Starting database transaction
2025-09-18 11:41:26,453 - db_manager - INFO - Executing get_grievance_files: 
            SELECT file_id, file_name, file_type, file_size, upload_timestamp
            FROM file...
2025-09-18 11:41:26,454 - db_manager - INFO - get_grievance_files completed in 0.01s. Rows: 0
2025-09-18 11:41:26,454 - db_manager - INFO - Transaction committed successfully
2025-09-18 11:41:26,454 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 11:41:26,874 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 11:41:26,879 - db_manager - INFO - Starting database transaction
2025-09-18 11:41:26,880 - db_manager - INFO - Executing get_grievance_by_id: 
                SELECT g.*, c.complainant_full_name, c.complainant_phone, c.complainant_email,
    ...
2025-09-18 11:41:26,881 - db_manager - INFO - get_grievance_by_id completed in 0.01s. Rows: 1
2025-09-18 11:41:26,881 - db_manager - INFO - Transaction committed successfully
2025-09-18 11:41:26,881 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 11:41:26,882 - db_manager - DEBUG - get_grievance_by_id: grievance_id: {'grievance_id': 'GR-20250918-KOJH-C8F5-B', 'complainant_id': 'CM-20250918-KOJH-6764-B', 'grievance_categories': None, 'grievance_categories_alternative': None, 'follow_up_question': None, 'grievance_summary': None, 'grievance_description': 'dust everywhere in my house kids are coughing hard', 'grievance_claimed_amount': None, 'grievance_location': None, 'language_code': 'ne', 'grievance_classification_status': 'pending', 'grievance_creation_date': datetime.datetime(2025, 9, 18, 11, 41, 27, 240735, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'grievance_modification_date': datetime.datetime(2025, 9, 18, 11, 41, 26, 436105, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'is_temporary': True, 'source': 'bot', 'complainant_full_name': 'c30d040703029e4bb917019d432a67d23d01363733cd505cf095ef9336486b3d39a99c3c53337a9ec221ea65685c89507b3fafe14490cde943f9021594c64414a392332614ea2725cee19a935493', 'complainant_phone': 'c30d040703023a84b24b953060eb65d23d0150fcfe583f5aeed040bc23e40ce0b1bd728cffcd19495a22f66eb1e922d9cc3c3eb4977223d314cfee859b65e9f1d4f5eeb6d5ce94402c0ac9403ca6', 'complainant_email': 'c30d0407030213dcc0936aa76e056cd23d01ff5ae071c1ebaf788ca8598c9ce383593cb1a9984d60a3ac2897abfb9563c40122e107f279e4cf7ac76058361a082af65b13931df01f731229c7df20', 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_municipality': 'Not provided', 'complainant_ward': None, 'complainant_village': 'Not provided', 'complainant_address': 'c30d040703021fa1f2e37d83634f72d23d0103f4909bcc83794c3d560e8bbc7281cdc1eac1b16c7d88981b34397ab300f2e125d2199679638a8fd0f035873fa3f8ff927a6d8d4b90d4b2fe46c60f'}, results: [{'grievance_id': 'GR-20250918-KOJH-C8F5-B', 'complainant_id': 'CM-20250918-KOJH-6764-B', 'grievance_categories': None, 'grievance_categories_alternative': None, 'follow_up_question': None, 'grievance_summary': None, 'grievance_description': 'dust everywhere in my house kids are coughing hard', 'grievance_claimed_amount': None, 'grievance_location': None, 'language_code': 'ne', 'grievance_classification_status': 'pending', 'grievance_creation_date': datetime.datetime(2025, 9, 18, 11, 41, 27, 240735, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'grievance_modification_date': datetime.datetime(2025, 9, 18, 11, 41, 26, 436105, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'is_temporary': True, 'source': 'bot', 'complainant_full_name': 'c30d040703029e4bb917019d432a67d23d01363733cd505cf095ef9336486b3d39a99c3c53337a9ec221ea65685c89507b3fafe14490cde943f9021594c64414a392332614ea2725cee19a935493', 'complainant_phone': 'c30d040703023a84b24b953060eb65d23d0150fcfe583f5aeed040bc23e40ce0b1bd728cffcd19495a22f66eb1e922d9cc3c3eb4977223d314cfee859b65e9f1d4f5eeb6d5ce94402c0ac9403ca6', 'complainant_email': 'c30d0407030213dcc0936aa76e056cd23d01ff5ae071c1ebaf788ca8598c9ce383593cb1a9984d60a3ac2897abfb9563c40122e107f279e4cf7ac76058361a082af65b13931df01f731229c7df20', 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_municipality': 'Not provided', 'complainant_ward': None, 'complainant_village': 'Not provided', 'complainant_address': 'c30d040703021fa1f2e37d83634f72d23d0103f4909bcc83794c3d560e8bbc7281cdc1eac1b16c7d88981b34397ab300f2e125d2199679638a8fd0f035873fa3f8ff927a6d8d4b90d4b2fe46c60f'}]
2025-09-18 11:41:26,977 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 11:41:26,982 - db_manager - INFO - Starting database transaction
2025-09-18 11:41:26,982 - db_manager - INFO - Executing get_complainant_id_from_grievance_id: 
            SELECT complainant_id
            FROM grievances
            WHERE grievance_id = %s
 ...
2025-09-18 11:41:26,983 - db_manager - INFO - get_complainant_id_from_grievance_id completed in 0.01s. Rows: 1
2025-09-18 11:41:26,984 - db_manager - INFO - Transaction committed successfully
2025-09-18 11:41:26,984 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 11:41:26,984 - db_manager - INFO - update_complainant: Updating complainant with ID: CM-20250918-KOJH-6764-B
2025-09-18 11:41:26,984 - db_manager - DEBUG - encrypted and hashed data at encrypt_and_hash_sensitive_data: {}
2025-09-18 11:41:26,984 - db_manager - DEBUG - encrypted_data at update_complainant: {}
2025-09-18 11:41:26,984 - db_manager - DEBUG - No complainant field to update
2025-09-18 11:41:26,984 - db_manager - INFO - Complainant updated in db: GR-20250918-KOJH-C8F5-B
2025-09-18 11:41:26,984 - db_manager - INFO - update_grievance: Updating grievance with ID: GR-20250918-KOJH-C8F5-B
2025-09-18 11:41:26,984 - db_manager - DEBUG - execute_update values: ('["N/A"]', 'N/A', 'GR-20250918-KOJH-C8F5-B')
2025-09-18 11:41:26,984 - db_manager - DEBUG - execute_update query: 
                    UPDATE grievances 
                    SET grievance_categories = %s, grievance_summary = %s, grievance_modification_date = CURRENT_TIMESTAMP
                    WHERE grievance_id = %s
                    RETURNING grievance_id
                
2025-09-18 11:41:26,984 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 11:41:26,989 - db_manager - INFO - Starting database transaction
2025-09-18 11:41:26,989 - db_manager - INFO - execute_update: Executing update query: 
                    UPDATE grievances 
                    SET grievance_categories = %s, grievance...
2025-09-18 11:41:26,990 - db_manager - INFO - execute_update: Update completed in 0.01s. Affected rows: 1
2025-09-18 11:41:26,992 - db_manager - INFO - Transaction committed successfully
2025-09-18 11:41:26,993 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 11:41:26,993 - db_manager - INFO - update_grievance: Updated grievance with ID: GR-20250918-KOJH-C8F5-B, rows affected: 1
2025-09-18 11:41:26,993 - db_manager - INFO - Grievance updated in db: GR-20250918-KOJH-C8F5-B
2025-09-18 11:41:27,035 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 11:41:27,040 - db_manager - INFO - Starting database transaction
2025-09-18 11:41:27,040 - db_manager - INFO - Executing get_grievance_files: 
            SELECT file_id, file_name, file_type, file_size, upload_timestamp
            FROM file...
2025-09-18 11:41:27,041 - db_manager - INFO - get_grievance_files completed in 0.01s. Rows: 0
2025-09-18 11:41:27,041 - db_manager - INFO - Transaction committed successfully
2025-09-18 11:41:27,041 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 11:41:27,042 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 11:41:27,046 - db_manager - INFO - Starting database transaction
2025-09-18 11:41:27,046 - db_manager - INFO - Executing get_complainant_by_id: 
            SELECT complainant_id, complainant_unique_id, complainant_full_name,    complainant_pho...
2025-09-18 11:41:27,047 - db_manager - INFO - get_complainant_by_id completed in 0.01s. Rows: 1
2025-09-18 11:41:27,047 - db_manager - INFO - Transaction committed successfully
2025-09-18 11:41:27,047 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 11:41:27,047 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 11:41:27,053 - db_manager - INFO - Starting database transaction
2025-09-18 11:41:27,053 - db_manager - INFO - Executing decrypt_field: SELECT pgp_sym_decrypt(decode(%s, 'hex'), %s) AS decrypted...
2025-09-18 11:41:27,055 - db_manager - INFO - decrypt_field completed in 0.01s. Rows: 1
2025-09-18 11:41:27,055 - db_manager - INFO - Transaction committed successfully
2025-09-18 11:41:27,055 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 11:41:27,055 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 11:41:27,061 - db_manager - INFO - Starting database transaction
2025-09-18 11:41:27,061 - db_manager - INFO - Executing decrypt_field: SELECT pgp_sym_decrypt(decode(%s, 'hex'), %s) AS decrypted...
2025-09-18 11:41:27,062 - db_manager - INFO - decrypt_field completed in 0.01s. Rows: 1
2025-09-18 11:41:27,063 - db_manager - INFO - Transaction committed successfully
2025-09-18 11:41:27,063 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 11:41:27,063 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 11:41:27,068 - db_manager - INFO - Starting database transaction
2025-09-18 11:41:27,068 - db_manager - INFO - Executing decrypt_field: SELECT pgp_sym_decrypt(decode(%s, 'hex'), %s) AS decrypted...
2025-09-18 11:41:27,069 - db_manager - INFO - decrypt_field completed in 0.01s. Rows: 1
2025-09-18 11:41:27,069 - db_manager - INFO - Transaction committed successfully
2025-09-18 11:41:27,069 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 11:41:27,070 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 11:41:27,075 - db_manager - INFO - Starting database transaction
2025-09-18 11:41:27,075 - db_manager - INFO - Executing decrypt_field: SELECT pgp_sym_decrypt(decode(%s, 'hex'), %s) AS decrypted...
2025-09-18 11:41:27,076 - db_manager - INFO - decrypt_field completed in 0.01s. Rows: 1
2025-09-18 11:41:27,076 - db_manager - INFO - Transaction committed successfully
2025-09-18 11:41:27,076 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 11:41:27,076 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 11:41:27,081 - db_manager - INFO - Starting database transaction
2025-09-18 11:41:27,081 - db_manager - INFO - Executing get_grievance_by_id: 
                SELECT g.*, c.complainant_full_name, c.complainant_phone, c.complainant_email,
    ...
2025-09-18 11:41:27,082 - db_manager - INFO - get_grievance_by_id completed in 0.01s. Rows: 1
2025-09-18 11:41:27,082 - db_manager - INFO - Transaction committed successfully
2025-09-18 11:41:27,082 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 11:41:27,082 - db_manager - DEBUG - get_grievance_by_id: grievance_id: {'grievance_id': 'GR-20250918-KOJH-C8F5-B', 'complainant_id': 'CM-20250918-KOJH-6764-B', 'grievance_categories': ['N/A'], 'grievance_categories_alternative': None, 'follow_up_question': None, 'grievance_summary': 'N/A', 'grievance_description': 'dust everywhere in my house kids are coughing hard', 'grievance_claimed_amount': None, 'grievance_location': None, 'language_code': 'ne', 'grievance_classification_status': 'pending', 'grievance_creation_date': datetime.datetime(2025, 9, 18, 11, 41, 27, 240735, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'grievance_modification_date': datetime.datetime(2025, 9, 18, 11, 41, 26, 989841, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'is_temporary': True, 'source': 'bot', 'complainant_full_name': 'c30d040703029e4bb917019d432a67d23d01363733cd505cf095ef9336486b3d39a99c3c53337a9ec221ea65685c89507b3fafe14490cde943f9021594c64414a392332614ea2725cee19a935493', 'complainant_phone': 'c30d040703023a84b24b953060eb65d23d0150fcfe583f5aeed040bc23e40ce0b1bd728cffcd19495a22f66eb1e922d9cc3c3eb4977223d314cfee859b65e9f1d4f5eeb6d5ce94402c0ac9403ca6', 'complainant_email': 'c30d0407030213dcc0936aa76e056cd23d01ff5ae071c1ebaf788ca8598c9ce383593cb1a9984d60a3ac2897abfb9563c40122e107f279e4cf7ac76058361a082af65b13931df01f731229c7df20', 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_municipality': 'Not provided', 'complainant_ward': None, 'complainant_village': 'Not provided', 'complainant_address': 'c30d040703021fa1f2e37d83634f72d23d0103f4909bcc83794c3d560e8bbc7281cdc1eac1b16c7d88981b34397ab300f2e125d2199679638a8fd0f035873fa3f8ff927a6d8d4b90d4b2fe46c60f'}, results: [{'grievance_id': 'GR-20250918-KOJH-C8F5-B', 'complainant_id': 'CM-20250918-KOJH-6764-B', 'grievance_categories': '["N/A"]', 'grievance_categories_alternative': None, 'follow_up_question': None, 'grievance_summary': 'N/A', 'grievance_description': 'dust everywhere in my house kids are coughing hard', 'grievance_claimed_amount': None, 'grievance_location': None, 'language_code': 'ne', 'grievance_classification_status': 'pending', 'grievance_creation_date': datetime.datetime(2025, 9, 18, 11, 41, 27, 240735, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'grievance_modification_date': datetime.datetime(2025, 9, 18, 11, 41, 26, 989841, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'is_temporary': True, 'source': 'bot', 'complainant_full_name': 'c30d040703029e4bb917019d432a67d23d01363733cd505cf095ef9336486b3d39a99c3c53337a9ec221ea65685c89507b3fafe14490cde943f9021594c64414a392332614ea2725cee19a935493', 'complainant_phone': 'c30d040703023a84b24b953060eb65d23d0150fcfe583f5aeed040bc23e40ce0b1bd728cffcd19495a22f66eb1e922d9cc3c3eb4977223d314cfee859b65e9f1d4f5eeb6d5ce94402c0ac9403ca6', 'complainant_email': 'c30d0407030213dcc0936aa76e056cd23d01ff5ae071c1ebaf788ca8598c9ce383593cb1a9984d60a3ac2897abfb9563c40122e107f279e4cf7ac76058361a082af65b13931df01f731229c7df20', 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_municipality': 'Not provided', 'complainant_ward': None, 'complainant_village': 'Not provided', 'complainant_address': 'c30d040703021fa1f2e37d83634f72d23d0103f4909bcc83794c3d560e8bbc7281cdc1eac1b16c7d88981b34397ab300f2e125d2199679638a8fd0f035873fa3f8ff927a6d8d4b90d4b2fe46c60f'}]
2025-09-18 11:41:27,082 - db_manager - INFO - update_complainant: Updating complainant with ID: CM-20250918-KOJH-6764-B
2025-09-18 11:41:27,082 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 11:41:27,087 - db_manager - INFO - Starting database transaction
2025-09-18 11:41:27,088 - db_manager - INFO - Executing encrypt_field: SELECT encode(pgp_sym_encrypt(%s, %s), 'hex') AS encrypted...
2025-09-18 11:41:27,089 - db_manager - INFO - encrypt_field completed in 0.01s. Rows: 1
2025-09-18 11:41:27,089 - db_manager - INFO - Transaction committed successfully
2025-09-18 11:41:27,089 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 11:41:27,089 - db_manager - DEBUG - encrypted phone number Not provided at encrypt_complainant_data: c30d0407030291f92cef798186226bd23d01c84a4d8b1965095226a783e807bb4a24ffd65bfd0eef3bf97698a119dd6b2bee484b36910c521899d79222694c14f1de987c79aaf2d39587db34508d
2025-09-18 11:41:27,089 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 11:41:27,094 - db_manager - INFO - Starting database transaction
2025-09-18 11:41:27,094 - db_manager - INFO - Executing encrypt_field: SELECT encode(pgp_sym_encrypt(%s, %s), 'hex') AS encrypted...
2025-09-18 11:41:27,095 - db_manager - INFO - encrypt_field completed in 0.01s. Rows: 1
2025-09-18 11:41:27,095 - db_manager - INFO - Transaction committed successfully
2025-09-18 11:41:27,095 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 11:41:27,096 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 11:41:27,101 - db_manager - INFO - Starting database transaction
2025-09-18 11:41:27,101 - db_manager - INFO - Executing encrypt_field: SELECT encode(pgp_sym_encrypt(%s, %s), 'hex') AS encrypted...
2025-09-18 11:41:27,102 - db_manager - INFO - encrypt_field completed in 0.01s. Rows: 1
2025-09-18 11:41:27,103 - db_manager - INFO - Transaction committed successfully
2025-09-18 11:41:27,103 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 11:41:27,103 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 11:41:27,109 - db_manager - INFO - Starting database transaction
2025-09-18 11:41:27,109 - db_manager - INFO - Executing encrypt_field: SELECT encode(pgp_sym_encrypt(%s, %s), 'hex') AS encrypted...
2025-09-18 11:41:27,110 - db_manager - INFO - encrypt_field completed in 0.01s. Rows: 1
2025-09-18 11:41:27,110 - db_manager - INFO - Transaction committed successfully
2025-09-18 11:41:27,110 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 11:41:27,111 - db_manager - DEBUG - phone number Not provided hashed to d83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f at hash_sensitive_data
2025-09-18 11:41:27,111 - db_manager - DEBUG - encrypted and hashed data at encrypt_and_hash_sensitive_data: {'complainant_full_name': 'c30d04070302451cde079a6c3e9c7fd23d0123e0ed2fe9bd752f2dee599d994de03261da0d2ed2536c5947010ea307af37859d6cff8c52977947d7bccfaaa9e44378cf67ea5697ba9179a7557588', 'complainant_phone': 'c30d0407030291f92cef798186226bd23d01c84a4d8b1965095226a783e807bb4a24ffd65bfd0eef3bf97698a119dd6b2bee484b36910c521899d79222694c14f1de987c79aaf2d39587db34508d', 'complainant_email': 'c30d04070302630469b8dbbd5b3c6bd23d01aaf1ee34c6c5003c8e99841945f846b01cdb35ba1472f1e4bb3cc7b54db11334c76023ca74cb427583dc6eed6d747a366815eb89f261110ab5a421e5', 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_municipality': 'Not provided', 'complainant_village': 'Not provided', 'complainant_address': 'c30d040703022877f979c92fc4ca6dd23d0102766ce79d1d41296eaea0a93f7d8d159cc47782971238321f78ab5985963ce2a5a2b2065b78a6cc83cd617f24f1e644ea566392166727e42d6a935a', 'complainant_phone_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'complainant_email_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'complainant_full_name_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f'}
2025-09-18 11:41:27,111 - db_manager - DEBUG - encrypted_data at update_complainant: {'complainant_full_name': 'c30d04070302451cde079a6c3e9c7fd23d0123e0ed2fe9bd752f2dee599d994de03261da0d2ed2536c5947010ea307af37859d6cff8c52977947d7bccfaaa9e44378cf67ea5697ba9179a7557588', 'complainant_phone': 'c30d0407030291f92cef798186226bd23d01c84a4d8b1965095226a783e807bb4a24ffd65bfd0eef3bf97698a119dd6b2bee484b36910c521899d79222694c14f1de987c79aaf2d39587db34508d', 'complainant_email': 'c30d04070302630469b8dbbd5b3c6bd23d01aaf1ee34c6c5003c8e99841945f846b01cdb35ba1472f1e4bb3cc7b54db11334c76023ca74cb427583dc6eed6d747a366815eb89f261110ab5a421e5', 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_municipality': 'Not provided', 'complainant_village': 'Not provided', 'complainant_address': 'c30d040703022877f979c92fc4ca6dd23d0102766ce79d1d41296eaea0a93f7d8d159cc47782971238321f78ab5985963ce2a5a2b2065b78a6cc83cd617f24f1e644ea566392166727e42d6a935a', 'complainant_phone_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'complainant_email_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'complainant_full_name_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f'}
2025-09-18 11:41:27,111 - db_manager - DEBUG - execute_update values: ('c30d04070302451cde079a6c3e9c7fd23d0123e0ed2fe9bd752f2dee599d994de03261da0d2ed2536c5947010ea307af37859d6cff8c52977947d7bccfaaa9e44378cf67ea5697ba9179a7557588', 'c30d0407030291f92cef798186226bd23d01c84a4d8b1965095226a783e807bb4a24ffd65bfd0eef3bf97698a119dd6b2bee484b36910c521899d79222694c14f1de987c79aaf2d39587db34508d', 'c30d04070302630469b8dbbd5b3c6bd23d01aaf1ee34c6c5003c8e99841945f846b01cdb35ba1472f1e4bb3cc7b54db11334c76023ca74cb427583dc6eed6d747a366815eb89f261110ab5a421e5', 'Koshi', 'Jhapa', 'Not provided', 'Not provided', 'c30d040703022877f979c92fc4ca6dd23d0102766ce79d1d41296eaea0a93f7d8d159cc47782971238321f78ab5985963ce2a5a2b2065b78a6cc83cd617f24f1e644ea566392166727e42d6a935a', 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'CM-20250918-KOJH-6764-B')
2025-09-18 11:41:27,111 - db_manager - DEBUG - execute_update query: UPDATE complainants SET complainant_full_name = %s, complainant_phone = %s, complainant_email = %s, complainant_province = %s, complainant_district = %s, complainant_municipality = %s, complainant_village = %s, complainant_address = %s, complainant_phone_hash = %s, complainant_email_hash = %s, complainant_full_name_hash = %s WHERE complainant_id = %s
2025-09-18 11:41:27,111 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 11:41:27,116 - db_manager - INFO - Starting database transaction
2025-09-18 11:41:27,116 - db_manager - INFO - execute_update: Executing update query: UPDATE complainants SET complainant_full_name = %s, complainant_phone = %s, complainant_email = %s, ...
2025-09-18 11:41:27,117 - db_manager - INFO - execute_update: Update completed in 0.01s. Affected rows: 1
2025-09-18 11:41:27,120 - db_manager - INFO - Transaction committed successfully
2025-09-18 11:41:27,120 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 11:41:27,120 - db_manager - INFO - Complainant updated in db: CM-20250918-KOJH-6764-B
2025-09-18 11:41:27,121 - db_manager - INFO - update_grievance: Updating grievance with ID: GR-20250918-KOJH-C8F5-B
2025-09-18 11:41:27,121 - db_manager - DEBUG - execute_update values: ('["N/A"]', 'N/A', 'dust everywhere in my house kids are coughing hard', 'GR-20250918-KOJH-C8F5-B')
2025-09-18 11:41:27,121 - db_manager - DEBUG - execute_update query: 
                    UPDATE grievances 
                    SET grievance_categories = %s, grievance_summary = %s, grievance_description = %s, grievance_modification_date = CURRENT_TIMESTAMP
                    WHERE grievance_id = %s
                    RETURNING grievance_id
                
2025-09-18 11:41:27,121 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 11:41:27,127 - db_manager - INFO - Starting database transaction
2025-09-18 11:41:27,127 - db_manager - INFO - execute_update: Executing update query: 
                    UPDATE grievances 
                    SET grievance_categories = %s, grievance...
2025-09-18 11:41:27,128 - db_manager - INFO - execute_update: Update completed in 0.01s. Affected rows: 1
2025-09-18 11:41:27,130 - db_manager - INFO - Transaction committed successfully
2025-09-18 11:41:27,130 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 11:41:27,130 - db_manager - INFO - update_grievance: Updated grievance with ID: GR-20250918-KOJH-C8F5-B, rows affected: 1
2025-09-18 11:41:27,131 - db_manager - INFO - Grievance updated in db: GR-20250918-KOJH-C8F5-B
2025-09-18 11:52:56,540 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-18 11:52:56,540 - db_manager - INFO - Database manager initialized successfully
2025-09-18 11:52:56,540 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-18 11:52:56,541 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-18 11:52:56,541 - db_manager - INFO - Database manager initialized successfully
2025-09-18 11:52:56,541 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-18 11:52:56,541 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-18 11:52:56,541 - db_manager - INFO - Database manager initialized successfully
2025-09-18 11:52:56,541 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-18 11:52:56,541 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-18 11:52:56,541 - db_manager - INFO - Database manager initialized successfully
2025-09-18 11:52:56,541 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-18 11:52:56,541 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-18 11:52:56,541 - db_manager - INFO - Database manager initialized successfully
2025-09-18 11:52:56,542 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-18 11:52:56,542 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-18 11:52:56,542 - db_manager - INFO - Database manager initialized successfully
2025-09-18 11:52:56,542 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-18 11:52:56,542 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-18 11:52:56,542 - db_manager - INFO - Database manager initialized successfully
2025-09-18 11:52:56,542 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-18 11:52:56,542 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-18 11:52:56,542 - db_manager - INFO - Database manager initialized successfully
2025-09-18 11:52:56,542 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-18 11:52:56,542 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-18 11:52:56,542 - db_manager - INFO - Database manager initialized successfully
2025-09-18 11:52:56,542 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-18 11:52:56,542 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-18 11:52:56,542 - db_manager - INFO - Database manager initialized successfully
2025-09-18 11:52:56,542 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-18 11:53:35,604 - db_manager - INFO - create_complainant: Creating complainant with ID: CM-20250918-KOJH-E5A7-B
2025-09-18 11:53:35,604 - db_manager - DEBUG - encrypted and hashed data at encrypt_and_hash_sensitive_data: {'complainant_id': 'CM-20250918-KOJH-E5A7-B', 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_unique_id': 'CM-20250918-KOJH-E5A7-B'}
2025-09-18 11:53:35,604 - db_manager - DEBUG - query_keys at generate_query_string: dict_keys(['complainant_id', 'complainant_province', 'complainant_district', 'complainant_unique_id'])
2025-09-18 11:53:35,604 - db_manager - DEBUG - Generated query: INSERT INTO complainants (complainant_id, complainant_province, complainant_district, complainant_unique_id) VALUES (%s, %s, %s, %s)
2025-09-18 11:53:35,604 - db_manager - DEBUG - len of query_keys: 4
2025-09-18 11:53:35,604 - db_manager - DEBUG - Generated query: INSERT INTO complainants (complainant_id, complainant_province, complainant_district, complainant_unique_id) VALUES (%s, %s, %s, %s)
2025-09-18 11:53:35,604 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 11:53:35,611 - db_manager - INFO - Starting database transaction
2025-09-18 11:53:35,616 - db_manager - INFO - Transaction committed successfully
2025-09-18 11:53:35,616 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 11:53:35,616 - db_manager - INFO - create_complainant: Successfully created complainant with ID: CM-20250918-KOJH-E5A7-B
2025-09-18 11:53:35,616 - db_manager - INFO - create_grievance: Creating grievance with data: {'grievance_id': 'GR-20250918-KOJH-BBEF-B', 'complainant_id': 'CM-20250918-KOJH-E5A7-B', 'grievance_description': 'dust everywhere in my house kids are coughing hard', 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_office': None, 'source': 'bot', 'complainant_unique_id': 'CM-20250918-KOJH-E5A7-B'}
2025-09-18 11:53:35,616 - db_manager - INFO - create_grievance: Creating grievance with ID: GR-20250918-KOJH-BBEF-B
2025-09-18 11:53:35,616 - db_manager - INFO - create_grievance: Creating grievance with allowed fields: ['grievance_id', 'complainant_id', 'grievance_categories', 'grievance_categories_alternative', 'follow_up_question', 'grievance_summary', 'grievance_description', 'grievance_claimed_amount', 'grievance_location', 'is_temporary', 'source', 'language_code', 'grievance_classification_status']
2025-09-18 11:53:35,617 - db_manager - DEBUG - query_keys at generate_query_string: dict_keys(['grievance_id', 'complainant_id', 'grievance_description', 'source'])
2025-09-18 11:53:35,617 - db_manager - DEBUG - Generated query: INSERT INTO grievances (grievance_id, complainant_id, grievance_description, source) VALUES (%s, %s, %s, %s) RETURNING grievance_id
2025-09-18 11:53:35,617 - db_manager - DEBUG - len of query_keys: 4
2025-09-18 11:53:35,617 - db_manager - DEBUG - Generated query: INSERT INTO grievances (grievance_id, complainant_id, grievance_description, source) VALUES (%s, %s, %s, %s) RETURNING grievance_id
2025-09-18 11:53:35,617 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 11:53:35,622 - db_manager - INFO - Starting database transaction
2025-09-18 11:53:35,626 - db_manager - INFO - Transaction committed successfully
2025-09-18 11:53:35,626 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 11:53:35,626 - db_manager - INFO - create_grievance: Successfully created grievance with ID: GR-20250918-KOJH-BBEF-B
2025-09-18 11:54:12,538 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 11:54:12,546 - db_manager - INFO - Starting database transaction
2025-09-18 11:54:12,546 - db_manager - INFO - Executing get_complainant_by_id: 
            SELECT complainant_id, complainant_unique_id, complainant_full_name,    complainant_pho...
2025-09-18 11:54:12,548 - db_manager - INFO - get_complainant_by_id completed in 0.01s. Rows: 1
2025-09-18 11:54:12,548 - db_manager - INFO - Transaction committed successfully
2025-09-18 11:54:12,548 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 11:54:12,548 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 11:54:12,554 - db_manager - INFO - Starting database transaction
2025-09-18 11:54:12,555 - db_manager - INFO - Executing get_grievance_by_id: 
                SELECT g.*, c.complainant_full_name, c.complainant_phone, c.complainant_email,
    ...
2025-09-18 11:54:12,556 - db_manager - INFO - get_grievance_by_id completed in 0.01s. Rows: 1
2025-09-18 11:54:12,557 - db_manager - INFO - Transaction committed successfully
2025-09-18 11:54:12,557 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 11:54:12,557 - db_manager - DEBUG - get_grievance_by_id: grievance_id: {'grievance_id': 'GR-20250918-KOJH-BBEF-B', 'complainant_id': 'CM-20250918-KOJH-E5A7-B', 'grievance_categories': ['Environmental - Air Pollution'], 'grievance_categories_alternative': ['Environmental - Noise Pollution', 'Environmental - Drainage and Sewage Management'], 'follow_up_question': ['How many people in your household are affected by dust and coughing, and for how long has this been happening? Have you or your children needed medical attention?'], 'grievance_summary': 'Dust from road works is spreading into my house and causing my kids to cough a lot.', 'grievance_description': 'dust everywhere in my house kids are coughing hard', 'grievance_claimed_amount': None, 'grievance_location': None, 'language_code': 'en', 'grievance_classification_status': 'pending', 'grievance_creation_date': datetime.datetime(2025, 9, 18, 11, 53, 35, 622758, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'grievance_modification_date': datetime.datetime(2025, 9, 18, 11, 53, 46, 395800, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'is_temporary': True, 'source': 'bot', 'complainant_full_name': None, 'complainant_phone': None, 'complainant_email': None, 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_municipality': None, 'complainant_ward': None, 'complainant_village': None, 'complainant_address': None}, results: [{'grievance_id': 'GR-20250918-KOJH-BBEF-B', 'complainant_id': 'CM-20250918-KOJH-E5A7-B', 'grievance_categories': '["Environmental - Air Pollution"]', 'grievance_categories_alternative': '["Environmental - Noise Pollution", "Environmental - Drainage and Sewage Management"]', 'follow_up_question': '["How many people in your household are affected by dust and coughing, and for how long has this been happening? Have you or your children needed medical attention?"]', 'grievance_summary': 'Dust from road works is spreading into my house and causing my kids to cough a lot.', 'grievance_description': 'dust everywhere in my house kids are coughing hard', 'grievance_claimed_amount': None, 'grievance_location': None, 'language_code': 'en', 'grievance_classification_status': 'pending', 'grievance_creation_date': datetime.datetime(2025, 9, 18, 11, 53, 35, 622758, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'grievance_modification_date': datetime.datetime(2025, 9, 18, 11, 53, 46, 395800, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'is_temporary': True, 'source': 'bot', 'complainant_full_name': None, 'complainant_phone': None, 'complainant_email': None, 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_municipality': None, 'complainant_ward': None, 'complainant_village': None, 'complainant_address': None}]
2025-09-18 11:54:12,557 - db_manager - INFO - update_complainant: Updating complainant with ID: CM-20250918-KOJH-E5A7-B
2025-09-18 11:54:12,557 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 11:54:12,566 - db_manager - INFO - Starting database transaction
2025-09-18 11:54:12,566 - db_manager - INFO - Executing encrypt_field: SELECT encode(pgp_sym_encrypt(%s, %s), 'hex') AS encrypted...
2025-09-18 11:54:12,569 - db_manager - INFO - encrypt_field completed in 0.01s. Rows: 1
2025-09-18 11:54:12,569 - db_manager - INFO - Transaction committed successfully
2025-09-18 11:54:12,570 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 11:54:12,570 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 11:54:12,578 - db_manager - INFO - Starting database transaction
2025-09-18 11:54:12,578 - db_manager - INFO - Executing encrypt_field: SELECT encode(pgp_sym_encrypt(%s, %s), 'hex') AS encrypted...
2025-09-18 11:54:12,580 - db_manager - INFO - encrypt_field completed in 0.01s. Rows: 1
2025-09-18 11:54:12,580 - db_manager - INFO - Transaction committed successfully
2025-09-18 11:54:12,580 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 11:54:12,580 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 11:54:12,587 - db_manager - INFO - Starting database transaction
2025-09-18 11:54:12,587 - db_manager - INFO - Executing encrypt_field: SELECT encode(pgp_sym_encrypt(%s, %s), 'hex') AS encrypted...
2025-09-18 11:54:12,588 - db_manager - INFO - encrypt_field completed in 0.01s. Rows: 1
2025-09-18 11:54:12,589 - db_manager - INFO - Transaction committed successfully
2025-09-18 11:54:12,589 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 11:54:12,589 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 11:54:12,596 - db_manager - INFO - Starting database transaction
2025-09-18 11:54:12,596 - db_manager - INFO - Executing encrypt_field: SELECT encode(pgp_sym_encrypt(%s, %s), 'hex') AS encrypted...
2025-09-18 11:54:12,597 - db_manager - INFO - encrypt_field completed in 0.01s. Rows: 1
2025-09-18 11:54:12,597 - db_manager - INFO - Transaction committed successfully
2025-09-18 11:54:12,598 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 11:54:12,598 - db_manager - DEBUG - encrypted phone number +9779876543219 at encrypt_complainant_data: c30d0407030221a7ecd24b080f4970d23f01d5d3094da3dcce546027cfe418cdb5151758317d63a95341084300e3c9196361b5c122e47ceb4c5747b6082f93ff637c5fa58df79c48f2c25869c67dc446
2025-09-18 11:54:12,598 - db_manager - DEBUG - phone number +9779876543219 hashed to cf42591c8ae28c8a9db30d058769bfba382f6eb81a5fe2cc3a94a43243277a6c at hash_sensitive_data
2025-09-18 11:54:12,598 - db_manager - DEBUG - encrypted and hashed data at encrypt_and_hash_sensitive_data: {'complainant_full_name': 'c30d04070302edfbe04daeb4c4d07ad23d014c062ce043ebf363cfb932c5072e4884468ef42891828701434c971c6f24c14a1a766f325fc4712d6649530a4cf5a2c0f29e2dfb1b32b707e050ce26', 'complainant_phone': 'c30d0407030221a7ecd24b080f4970d23f01d5d3094da3dcce546027cfe418cdb5151758317d63a95341084300e3c9196361b5c122e47ceb4c5747b6082f93ff637c5fa58df79c48f2c25869c67dc446', 'complainant_email': 'c30d040703020ec8f2eb0cfbc3f561d23d01f6ed0c235d0bb7b99f10882f8af8b7fd0239cf29e6b602eb6a1fdf6c3f37112f794dbdebacf12c305e63a764fc72e5e0f7af124030d406d5a72f2630', 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_municipality': 'Not provided', 'complainant_village': 'Slot_Skipped', 'complainant_address': 'c30d0407030274fec6118dad415762d23d016dd31beec14208ec5ce3bb61df24510dd5e86b08a4d3cebc8e195b265abfb0c8ace0e7a4613c6c28fc0a28cfb9be8ed36da8475c2998e9bf29c55e78', 'complainant_email_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'complainant_full_name_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'complainant_phone_hash': 'cf42591c8ae28c8a9db30d058769bfba382f6eb81a5fe2cc3a94a43243277a6c'}
2025-09-18 11:54:12,598 - db_manager - DEBUG - encrypted_data at update_complainant: {'complainant_full_name': 'c30d04070302edfbe04daeb4c4d07ad23d014c062ce043ebf363cfb932c5072e4884468ef42891828701434c971c6f24c14a1a766f325fc4712d6649530a4cf5a2c0f29e2dfb1b32b707e050ce26', 'complainant_phone': 'c30d0407030221a7ecd24b080f4970d23f01d5d3094da3dcce546027cfe418cdb5151758317d63a95341084300e3c9196361b5c122e47ceb4c5747b6082f93ff637c5fa58df79c48f2c25869c67dc446', 'complainant_email': 'c30d040703020ec8f2eb0cfbc3f561d23d01f6ed0c235d0bb7b99f10882f8af8b7fd0239cf29e6b602eb6a1fdf6c3f37112f794dbdebacf12c305e63a764fc72e5e0f7af124030d406d5a72f2630', 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_municipality': 'Not provided', 'complainant_village': 'Slot_Skipped', 'complainant_address': 'c30d0407030274fec6118dad415762d23d016dd31beec14208ec5ce3bb61df24510dd5e86b08a4d3cebc8e195b265abfb0c8ace0e7a4613c6c28fc0a28cfb9be8ed36da8475c2998e9bf29c55e78', 'complainant_email_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'complainant_full_name_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'complainant_phone_hash': 'cf42591c8ae28c8a9db30d058769bfba382f6eb81a5fe2cc3a94a43243277a6c'}
2025-09-18 11:54:12,598 - db_manager - DEBUG - execute_update values: ('c30d04070302edfbe04daeb4c4d07ad23d014c062ce043ebf363cfb932c5072e4884468ef42891828701434c971c6f24c14a1a766f325fc4712d6649530a4cf5a2c0f29e2dfb1b32b707e050ce26', 'c30d0407030221a7ecd24b080f4970d23f01d5d3094da3dcce546027cfe418cdb5151758317d63a95341084300e3c9196361b5c122e47ceb4c5747b6082f93ff637c5fa58df79c48f2c25869c67dc446', 'c30d040703020ec8f2eb0cfbc3f561d23d01f6ed0c235d0bb7b99f10882f8af8b7fd0239cf29e6b602eb6a1fdf6c3f37112f794dbdebacf12c305e63a764fc72e5e0f7af124030d406d5a72f2630', 'Koshi', 'Jhapa', 'Not provided', 'Slot_Skipped', 'c30d0407030274fec6118dad415762d23d016dd31beec14208ec5ce3bb61df24510dd5e86b08a4d3cebc8e195b265abfb0c8ace0e7a4613c6c28fc0a28cfb9be8ed36da8475c2998e9bf29c55e78', 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'cf42591c8ae28c8a9db30d058769bfba382f6eb81a5fe2cc3a94a43243277a6c', 'CM-20250918-KOJH-E5A7-B')
2025-09-18 11:54:12,598 - db_manager - DEBUG - execute_update query: UPDATE complainants SET complainant_full_name = %s, complainant_phone = %s, complainant_email = %s, complainant_province = %s, complainant_district = %s, complainant_municipality = %s, complainant_village = %s, complainant_address = %s, complainant_email_hash = %s, complainant_full_name_hash = %s, complainant_phone_hash = %s WHERE complainant_id = %s
2025-09-18 11:54:12,598 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 11:54:12,606 - db_manager - INFO - Starting database transaction
2025-09-18 11:54:12,606 - db_manager - INFO - execute_update: Executing update query: UPDATE complainants SET complainant_full_name = %s, complainant_phone = %s, complainant_email = %s, ...
2025-09-18 11:54:12,607 - db_manager - INFO - execute_update: Update completed in 0.01s. Affected rows: 1
2025-09-18 11:54:12,609 - db_manager - INFO - Transaction committed successfully
2025-09-18 11:54:12,609 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 11:54:12,609 - db_manager - INFO - Complainant updated in db: CM-20250918-KOJH-E5A7-B
2025-09-18 11:54:12,610 - db_manager - INFO - update_grievance: Updating grievance with ID: GR-20250918-KOJH-BBEF-B
2025-09-18 11:54:12,610 - db_manager - DEBUG - execute_update values: ('dust everywhere in my house kids are coughing hard', 'GR-20250918-KOJH-BBEF-B')
2025-09-18 11:54:12,610 - db_manager - DEBUG - execute_update query: 
                    UPDATE grievances 
                    SET grievance_description = %s, grievance_modification_date = CURRENT_TIMESTAMP
                    WHERE grievance_id = %s
                    RETURNING grievance_id
                
2025-09-18 11:54:12,610 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 11:54:12,615 - db_manager - INFO - Starting database transaction
2025-09-18 11:54:12,616 - db_manager - INFO - execute_update: Executing update query: 
                    UPDATE grievances 
                    SET grievance_description = %s, grievanc...
2025-09-18 11:54:12,617 - db_manager - INFO - execute_update: Update completed in 0.01s. Affected rows: 1
2025-09-18 11:54:12,619 - db_manager - INFO - Transaction committed successfully
2025-09-18 11:54:12,619 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 11:54:12,619 - db_manager - INFO - update_grievance: Updated grievance with ID: GR-20250918-KOJH-BBEF-B, rows affected: 1
2025-09-18 11:54:12,619 - db_manager - INFO - Grievance updated in db: GR-20250918-KOJH-BBEF-B
2025-09-18 11:54:12,619 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 11:54:12,625 - db_manager - INFO - Starting database transaction
2025-09-18 11:54:12,625 - db_manager - INFO - Executing get_grievance_files: 
            SELECT file_id, file_name, file_type, file_size, upload_timestamp
            FROM file...
2025-09-18 11:54:12,626 - db_manager - INFO - get_grievance_files completed in 0.01s. Rows: 0
2025-09-18 11:54:12,627 - db_manager - INFO - Transaction committed successfully
2025-09-18 11:54:12,627 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 11:54:12,627 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 11:54:12,633 - db_manager - INFO - Starting database transaction
2025-09-18 11:54:12,633 - db_manager - INFO - Executing get_grievance_files: 
            SELECT file_id, file_name, file_type, file_size, upload_timestamp
            FROM file...
2025-09-18 11:54:12,634 - db_manager - INFO - get_grievance_files completed in 0.01s. Rows: 0
2025-09-18 11:54:12,635 - db_manager - INFO - Transaction committed successfully
2025-09-18 11:54:12,635 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 11:54:13,152 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 11:54:13,158 - db_manager - INFO - Starting database transaction
2025-09-18 11:54:13,158 - db_manager - INFO - Executing get_grievance_by_id: 
                SELECT g.*, c.complainant_full_name, c.complainant_phone, c.complainant_email,
    ...
2025-09-18 11:54:13,160 - db_manager - INFO - get_grievance_by_id completed in 0.01s. Rows: 1
2025-09-18 11:54:13,160 - db_manager - INFO - Transaction committed successfully
2025-09-18 11:54:13,160 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 11:54:13,161 - db_manager - DEBUG - get_grievance_by_id: grievance_id: {'grievance_id': 'GR-20250918-KOJH-BBEF-B', 'complainant_id': 'CM-20250918-KOJH-E5A7-B', 'grievance_categories': ['Environmental - Air Pollution'], 'grievance_categories_alternative': ['Environmental - Noise Pollution', 'Environmental - Drainage and Sewage Management'], 'follow_up_question': ['How many people in your household are affected by dust and coughing, and for how long has this been happening? Have you or your children needed medical attention?'], 'grievance_summary': 'Dust from road works is spreading into my house and causing my kids to cough a lot.', 'grievance_description': 'dust everywhere in my house kids are coughing hard', 'grievance_claimed_amount': None, 'grievance_location': None, 'language_code': 'en', 'grievance_classification_status': 'pending', 'grievance_creation_date': datetime.datetime(2025, 9, 18, 11, 53, 35, 622758, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'grievance_modification_date': datetime.datetime(2025, 9, 18, 11, 54, 12, 616304, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'is_temporary': True, 'source': 'bot', 'complainant_full_name': 'c30d04070302edfbe04daeb4c4d07ad23d014c062ce043ebf363cfb932c5072e4884468ef42891828701434c971c6f24c14a1a766f325fc4712d6649530a4cf5a2c0f29e2dfb1b32b707e050ce26', 'complainant_phone': 'c30d0407030221a7ecd24b080f4970d23f01d5d3094da3dcce546027cfe418cdb5151758317d63a95341084300e3c9196361b5c122e47ceb4c5747b6082f93ff637c5fa58df79c48f2c25869c67dc446', 'complainant_email': 'c30d040703020ec8f2eb0cfbc3f561d23d01f6ed0c235d0bb7b99f10882f8af8b7fd0239cf29e6b602eb6a1fdf6c3f37112f794dbdebacf12c305e63a764fc72e5e0f7af124030d406d5a72f2630', 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_municipality': 'Not provided', 'complainant_ward': None, 'complainant_village': 'Slot_Skipped', 'complainant_address': 'c30d0407030274fec6118dad415762d23d016dd31beec14208ec5ce3bb61df24510dd5e86b08a4d3cebc8e195b265abfb0c8ace0e7a4613c6c28fc0a28cfb9be8ed36da8475c2998e9bf29c55e78'}, results: [{'grievance_id': 'GR-20250918-KOJH-BBEF-B', 'complainant_id': 'CM-20250918-KOJH-E5A7-B', 'grievance_categories': '["Environmental - Air Pollution"]', 'grievance_categories_alternative': '["Environmental - Noise Pollution", "Environmental - Drainage and Sewage Management"]', 'follow_up_question': '["How many people in your household are affected by dust and coughing, and for how long has this been happening? Have you or your children needed medical attention?"]', 'grievance_summary': 'Dust from road works is spreading into my house and causing my kids to cough a lot.', 'grievance_description': 'dust everywhere in my house kids are coughing hard', 'grievance_claimed_amount': None, 'grievance_location': None, 'language_code': 'en', 'grievance_classification_status': 'pending', 'grievance_creation_date': datetime.datetime(2025, 9, 18, 11, 53, 35, 622758, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'grievance_modification_date': datetime.datetime(2025, 9, 18, 11, 54, 12, 616304, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'is_temporary': True, 'source': 'bot', 'complainant_full_name': 'c30d04070302edfbe04daeb4c4d07ad23d014c062ce043ebf363cfb932c5072e4884468ef42891828701434c971c6f24c14a1a766f325fc4712d6649530a4cf5a2c0f29e2dfb1b32b707e050ce26', 'complainant_phone': 'c30d0407030221a7ecd24b080f4970d23f01d5d3094da3dcce546027cfe418cdb5151758317d63a95341084300e3c9196361b5c122e47ceb4c5747b6082f93ff637c5fa58df79c48f2c25869c67dc446', 'complainant_email': 'c30d040703020ec8f2eb0cfbc3f561d23d01f6ed0c235d0bb7b99f10882f8af8b7fd0239cf29e6b602eb6a1fdf6c3f37112f794dbdebacf12c305e63a764fc72e5e0f7af124030d406d5a72f2630', 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_municipality': 'Not provided', 'complainant_ward': None, 'complainant_village': 'Slot_Skipped', 'complainant_address': 'c30d0407030274fec6118dad415762d23d016dd31beec14208ec5ce3bb61df24510dd5e86b08a4d3cebc8e195b265abfb0c8ace0e7a4613c6c28fc0a28cfb9be8ed36da8475c2998e9bf29c55e78'}]
2025-09-18 11:58:38,499 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-18 11:58:38,499 - db_manager - INFO - Database manager initialized successfully
2025-09-18 11:58:38,499 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-18 11:58:38,499 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-18 11:58:38,499 - db_manager - INFO - Database manager initialized successfully
2025-09-18 11:58:38,499 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-18 11:58:38,499 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-18 11:58:38,499 - db_manager - INFO - Database manager initialized successfully
2025-09-18 11:58:38,499 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-18 11:58:38,499 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-18 11:58:38,499 - db_manager - INFO - Database manager initialized successfully
2025-09-18 11:58:38,499 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-18 11:58:38,499 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-18 11:58:38,499 - db_manager - INFO - Database manager initialized successfully
2025-09-18 11:58:38,499 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-18 11:58:38,499 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-18 11:58:38,499 - db_manager - INFO - Database manager initialized successfully
2025-09-18 11:58:38,500 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-18 11:58:38,500 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-18 11:58:38,500 - db_manager - INFO - Database manager initialized successfully
2025-09-18 11:58:38,500 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-18 11:58:38,500 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-18 11:58:38,500 - db_manager - INFO - Database manager initialized successfully
2025-09-18 11:58:38,500 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-18 11:58:38,500 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-18 11:58:38,500 - db_manager - INFO - Database manager initialized successfully
2025-09-18 11:58:38,500 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-18 11:58:38,500 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-18 11:58:38,500 - db_manager - INFO - Database manager initialized successfully
2025-09-18 11:58:38,500 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-18 12:00:20,349 - db_manager - INFO - create_complainant: Creating complainant with ID: CM-20250918-KOJH-AB6F-B
2025-09-18 12:00:20,349 - db_manager - DEBUG - encrypted and hashed data at encrypt_and_hash_sensitive_data: {'complainant_id': 'CM-20250918-KOJH-AB6F-B', 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_unique_id': 'CM-20250918-KOJH-AB6F-B'}
2025-09-18 12:00:20,349 - db_manager - DEBUG - query_keys at generate_query_string: dict_keys(['complainant_id', 'complainant_province', 'complainant_district', 'complainant_unique_id'])
2025-09-18 12:00:20,349 - db_manager - DEBUG - Generated query: INSERT INTO complainants (complainant_id, complainant_province, complainant_district, complainant_unique_id) VALUES (%s, %s, %s, %s)
2025-09-18 12:00:20,350 - db_manager - DEBUG - len of query_keys: 4
2025-09-18 12:00:20,350 - db_manager - DEBUG - Generated query: INSERT INTO complainants (complainant_id, complainant_province, complainant_district, complainant_unique_id) VALUES (%s, %s, %s, %s)
2025-09-18 12:00:20,350 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 12:00:20,358 - db_manager - INFO - Starting database transaction
2025-09-18 12:00:20,361 - db_manager - INFO - Transaction committed successfully
2025-09-18 12:00:20,362 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 12:00:20,362 - db_manager - INFO - create_complainant: Successfully created complainant with ID: CM-20250918-KOJH-AB6F-B
2025-09-18 12:00:20,362 - db_manager - INFO - create_grievance: Creating grievance with data: {'grievance_id': 'GR-20250918-KOJH-0D5E-B', 'complainant_id': 'CM-20250918-KOJH-AB6F-B', 'grievance_description': 'dust everywhere in my house kids are coughing hard', 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_office': None, 'source': 'bot', 'complainant_unique_id': 'CM-20250918-KOJH-AB6F-B'}
2025-09-18 12:00:20,362 - db_manager - INFO - create_grievance: Creating grievance with ID: GR-20250918-KOJH-0D5E-B
2025-09-18 12:00:20,362 - db_manager - INFO - create_grievance: Creating grievance with allowed fields: ['grievance_id', 'complainant_id', 'grievance_categories', 'grievance_categories_alternative', 'follow_up_question', 'grievance_summary', 'grievance_description', 'grievance_claimed_amount', 'grievance_location', 'is_temporary', 'source', 'language_code', 'grievance_classification_status']
2025-09-18 12:00:20,362 - db_manager - DEBUG - query_keys at generate_query_string: dict_keys(['grievance_id', 'complainant_id', 'grievance_description', 'source'])
2025-09-18 12:00:20,362 - db_manager - DEBUG - Generated query: INSERT INTO grievances (grievance_id, complainant_id, grievance_description, source) VALUES (%s, %s, %s, %s) RETURNING grievance_id
2025-09-18 12:00:20,362 - db_manager - DEBUG - len of query_keys: 4
2025-09-18 12:00:20,362 - db_manager - DEBUG - Generated query: INSERT INTO grievances (grievance_id, complainant_id, grievance_description, source) VALUES (%s, %s, %s, %s) RETURNING grievance_id
2025-09-18 12:00:20,362 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 12:00:20,368 - db_manager - INFO - Starting database transaction
2025-09-18 12:00:20,374 - db_manager - INFO - Transaction committed successfully
2025-09-18 12:00:20,374 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 12:00:20,374 - db_manager - INFO - create_grievance: Successfully created grievance with ID: GR-20250918-KOJH-0D5E-B
2025-09-18 12:00:34,476 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 12:00:34,483 - db_manager - INFO - Starting database transaction
2025-09-18 12:00:34,483 - db_manager - INFO - Executing get_complainant_by_id: 
            SELECT complainant_id, complainant_unique_id, complainant_full_name,    complainant_pho...
2025-09-18 12:00:34,484 - db_manager - INFO - get_complainant_by_id completed in 0.01s. Rows: 1
2025-09-18 12:00:34,485 - db_manager - INFO - Transaction committed successfully
2025-09-18 12:00:34,485 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 12:00:34,485 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 12:00:34,490 - db_manager - INFO - Starting database transaction
2025-09-18 12:00:34,490 - db_manager - INFO - Executing get_grievance_by_id: 
                SELECT g.*, c.complainant_full_name, c.complainant_phone, c.complainant_email,
    ...
2025-09-18 12:00:34,492 - db_manager - INFO - get_grievance_by_id completed in 0.01s. Rows: 1
2025-09-18 12:00:34,492 - db_manager - INFO - Transaction committed successfully
2025-09-18 12:00:34,492 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 12:00:34,492 - db_manager - DEBUG - get_grievance_by_id: grievance_id: {'grievance_id': 'GR-20250918-KOJH-0D5E-B', 'complainant_id': 'CM-20250918-KOJH-AB6F-B', 'grievance_categories': ['Environmental - Air Pollution'], 'grievance_categories_alternative': ['Environmental - Noise Pollution'], 'follow_up_question': ['How many people in your household are affected by the dust and coughing, and for how long has this been happening?'], 'grievance_summary': 'Dust from road works is filling my house; my kids are coughing a lot.', 'grievance_description': 'dust everywhere in my house kids are coughing hard', 'grievance_claimed_amount': None, 'grievance_location': None, 'language_code': 'en', 'grievance_classification_status': 'pending', 'grievance_creation_date': datetime.datetime(2025, 9, 18, 12, 0, 20, 368633, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'grievance_modification_date': datetime.datetime(2025, 9, 18, 12, 0, 28, 291371, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'is_temporary': True, 'source': 'bot', 'complainant_full_name': None, 'complainant_phone': None, 'complainant_email': None, 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_municipality': None, 'complainant_ward': None, 'complainant_village': None, 'complainant_address': None}, results: [{'grievance_id': 'GR-20250918-KOJH-0D5E-B', 'complainant_id': 'CM-20250918-KOJH-AB6F-B', 'grievance_categories': '["Environmental - Air Pollution"]', 'grievance_categories_alternative': '["Environmental - Noise Pollution"]', 'follow_up_question': '["How many people in your household are affected by the dust and coughing, and for how long has this been happening?"]', 'grievance_summary': 'Dust from road works is filling my house; my kids are coughing a lot.', 'grievance_description': 'dust everywhere in my house kids are coughing hard', 'grievance_claimed_amount': None, 'grievance_location': None, 'language_code': 'en', 'grievance_classification_status': 'pending', 'grievance_creation_date': datetime.datetime(2025, 9, 18, 12, 0, 20, 368633, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'grievance_modification_date': datetime.datetime(2025, 9, 18, 12, 0, 28, 291371, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'is_temporary': True, 'source': 'bot', 'complainant_full_name': None, 'complainant_phone': None, 'complainant_email': None, 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_municipality': None, 'complainant_ward': None, 'complainant_village': None, 'complainant_address': None}]
2025-09-18 12:00:34,492 - db_manager - INFO - update_complainant: Updating complainant with ID: CM-20250918-KOJH-AB6F-B
2025-09-18 12:00:34,492 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 12:00:34,505 - db_manager - INFO - Starting database transaction
2025-09-18 12:00:34,505 - db_manager - INFO - Executing encrypt_field: SELECT encode(pgp_sym_encrypt(%s, %s), 'hex') AS encrypted...
2025-09-18 12:00:34,507 - db_manager - INFO - encrypt_field completed in 0.01s. Rows: 1
2025-09-18 12:00:34,507 - db_manager - INFO - Transaction committed successfully
2025-09-18 12:00:34,507 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 12:00:34,508 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 12:00:34,515 - db_manager - INFO - Starting database transaction
2025-09-18 12:00:34,515 - db_manager - INFO - Executing encrypt_field: SELECT encode(pgp_sym_encrypt(%s, %s), 'hex') AS encrypted...
2025-09-18 12:00:34,517 - db_manager - INFO - encrypt_field completed in 0.01s. Rows: 1
2025-09-18 12:00:34,517 - db_manager - INFO - Transaction committed successfully
2025-09-18 12:00:34,517 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 12:00:34,517 - db_manager - DEBUG - encrypted phone number Not provided at encrypt_complainant_data: c30d0407030229a1b210ccf0c99c7ad23d014afaa3ee9f4a7c91283c19915719ccb58a4cc2c7acfc9dccaa4e4b34f5624a1163db020d2e9486b913c2f5e867383f0b12a496d2379d80a2b2ba5b01
2025-09-18 12:00:34,517 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 12:00:34,524 - db_manager - INFO - Starting database transaction
2025-09-18 12:00:34,524 - db_manager - INFO - Executing encrypt_field: SELECT encode(pgp_sym_encrypt(%s, %s), 'hex') AS encrypted...
2025-09-18 12:00:34,526 - db_manager - INFO - encrypt_field completed in 0.01s. Rows: 1
2025-09-18 12:00:34,526 - db_manager - INFO - Transaction committed successfully
2025-09-18 12:00:34,526 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 12:00:34,526 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 12:00:34,532 - db_manager - INFO - Starting database transaction
2025-09-18 12:00:34,532 - db_manager - INFO - Executing encrypt_field: SELECT encode(pgp_sym_encrypt(%s, %s), 'hex') AS encrypted...
2025-09-18 12:00:34,534 - db_manager - INFO - encrypt_field completed in 0.01s. Rows: 1
2025-09-18 12:00:34,534 - db_manager - INFO - Transaction committed successfully
2025-09-18 12:00:34,534 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 12:00:34,534 - db_manager - DEBUG - phone number Not provided hashed to d83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f at hash_sensitive_data
2025-09-18 12:00:34,534 - db_manager - DEBUG - encrypted and hashed data at encrypt_and_hash_sensitive_data: {'complainant_full_name': 'c30d040703028c6469c6ec977f3a63d23d01dd194ce3b650890c1834ba4158a74b0b9e18fd91cea29d37d0b69bd8ffda267e25670ff880b8dfc117fa7e03cbcc6581198cc82a0590d9c11c9b83ca', 'complainant_phone': 'c30d0407030229a1b210ccf0c99c7ad23d014afaa3ee9f4a7c91283c19915719ccb58a4cc2c7acfc9dccaa4e4b34f5624a1163db020d2e9486b913c2f5e867383f0b12a496d2379d80a2b2ba5b01', 'complainant_email': 'c30d040703022f69c2845010b9f07ad23d01a716d56b792d623ac0a91f74e391a561d5e0cbd757d4fc545242044a44a5f22ec092dc95a8be1ba2e27f640a5c8a1f468a3341e46b03c7609f74bdac', 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_municipality': 'Birtamod Municipality', 'complainant_village': 'Slot_Skipped', 'complainant_address': 'c30d04070302f1074271e2a31d2675d23d01a28fbac000cc8ab029762e75317e89573f58cd9d3647bcaadc4df5bde3371994a59d8e460f98937df6fc16988d34c6049142ae1fa99e81828b195a26', 'complainant_full_name_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'complainant_phone_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'complainant_email_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f'}
2025-09-18 12:00:34,534 - db_manager - DEBUG - encrypted_data at update_complainant: {'complainant_full_name': 'c30d040703028c6469c6ec977f3a63d23d01dd194ce3b650890c1834ba4158a74b0b9e18fd91cea29d37d0b69bd8ffda267e25670ff880b8dfc117fa7e03cbcc6581198cc82a0590d9c11c9b83ca', 'complainant_phone': 'c30d0407030229a1b210ccf0c99c7ad23d014afaa3ee9f4a7c91283c19915719ccb58a4cc2c7acfc9dccaa4e4b34f5624a1163db020d2e9486b913c2f5e867383f0b12a496d2379d80a2b2ba5b01', 'complainant_email': 'c30d040703022f69c2845010b9f07ad23d01a716d56b792d623ac0a91f74e391a561d5e0cbd757d4fc545242044a44a5f22ec092dc95a8be1ba2e27f640a5c8a1f468a3341e46b03c7609f74bdac', 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_municipality': 'Birtamod Municipality', 'complainant_village': 'Slot_Skipped', 'complainant_address': 'c30d04070302f1074271e2a31d2675d23d01a28fbac000cc8ab029762e75317e89573f58cd9d3647bcaadc4df5bde3371994a59d8e460f98937df6fc16988d34c6049142ae1fa99e81828b195a26', 'complainant_full_name_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'complainant_phone_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'complainant_email_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f'}
2025-09-18 12:00:34,534 - db_manager - DEBUG - execute_update values: ('c30d040703028c6469c6ec977f3a63d23d01dd194ce3b650890c1834ba4158a74b0b9e18fd91cea29d37d0b69bd8ffda267e25670ff880b8dfc117fa7e03cbcc6581198cc82a0590d9c11c9b83ca', 'c30d0407030229a1b210ccf0c99c7ad23d014afaa3ee9f4a7c91283c19915719ccb58a4cc2c7acfc9dccaa4e4b34f5624a1163db020d2e9486b913c2f5e867383f0b12a496d2379d80a2b2ba5b01', 'c30d040703022f69c2845010b9f07ad23d01a716d56b792d623ac0a91f74e391a561d5e0cbd757d4fc545242044a44a5f22ec092dc95a8be1ba2e27f640a5c8a1f468a3341e46b03c7609f74bdac', 'Koshi', 'Jhapa', 'Birtamod Municipality', 'Slot_Skipped', 'c30d04070302f1074271e2a31d2675d23d01a28fbac000cc8ab029762e75317e89573f58cd9d3647bcaadc4df5bde3371994a59d8e460f98937df6fc16988d34c6049142ae1fa99e81828b195a26', 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'CM-20250918-KOJH-AB6F-B')
2025-09-18 12:00:34,534 - db_manager - DEBUG - execute_update query: UPDATE complainants SET complainant_full_name = %s, complainant_phone = %s, complainant_email = %s, complainant_province = %s, complainant_district = %s, complainant_municipality = %s, complainant_village = %s, complainant_address = %s, complainant_full_name_hash = %s, complainant_phone_hash = %s, complainant_email_hash = %s WHERE complainant_id = %s
2025-09-18 12:00:34,534 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 12:00:34,541 - db_manager - INFO - Starting database transaction
2025-09-18 12:00:34,541 - db_manager - INFO - execute_update: Executing update query: UPDATE complainants SET complainant_full_name = %s, complainant_phone = %s, complainant_email = %s, ...
2025-09-18 12:00:34,542 - db_manager - INFO - execute_update: Update completed in 0.01s. Affected rows: 1
2025-09-18 12:00:34,545 - db_manager - INFO - Transaction committed successfully
2025-09-18 12:00:34,545 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 12:00:34,545 - db_manager - INFO - Complainant updated in db: CM-20250918-KOJH-AB6F-B
2025-09-18 12:00:34,545 - db_manager - INFO - update_grievance: Updating grievance with ID: GR-20250918-KOJH-0D5E-B
2025-09-18 12:00:34,545 - db_manager - DEBUG - execute_update values: ('dust everywhere in my house kids are coughing hard', 'GR-20250918-KOJH-0D5E-B')
2025-09-18 12:00:34,545 - db_manager - DEBUG - execute_update query: 
                    UPDATE grievances 
                    SET grievance_description = %s, grievance_modification_date = CURRENT_TIMESTAMP
                    WHERE grievance_id = %s
                    RETURNING grievance_id
                
2025-09-18 12:00:34,545 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 12:00:34,551 - db_manager - INFO - Starting database transaction
2025-09-18 12:00:34,551 - db_manager - INFO - execute_update: Executing update query: 
                    UPDATE grievances 
                    SET grievance_description = %s, grievanc...
2025-09-18 12:00:34,553 - db_manager - INFO - execute_update: Update completed in 0.01s. Affected rows: 1
2025-09-18 12:00:34,555 - db_manager - INFO - Transaction committed successfully
2025-09-18 12:00:34,555 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 12:00:34,555 - db_manager - INFO - update_grievance: Updated grievance with ID: GR-20250918-KOJH-0D5E-B, rows affected: 1
2025-09-18 12:00:34,555 - db_manager - INFO - Grievance updated in db: GR-20250918-KOJH-0D5E-B
2025-09-18 12:00:34,556 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 12:00:34,562 - db_manager - INFO - Starting database transaction
2025-09-18 12:00:34,562 - db_manager - INFO - Executing get_grievance_files: 
            SELECT file_id, file_name, file_type, file_size, upload_timestamp
            FROM file...
2025-09-18 12:00:34,563 - db_manager - INFO - get_grievance_files completed in 0.01s. Rows: 0
2025-09-18 12:00:34,563 - db_manager - INFO - Transaction committed successfully
2025-09-18 12:00:34,564 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 12:00:34,564 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 12:00:34,569 - db_manager - INFO - Starting database transaction
2025-09-18 12:00:34,569 - db_manager - INFO - Executing get_grievance_files: 
            SELECT file_id, file_name, file_type, file_size, upload_timestamp
            FROM file...
2025-09-18 12:00:34,570 - db_manager - INFO - get_grievance_files completed in 0.01s. Rows: 0
2025-09-18 12:00:34,571 - db_manager - INFO - Transaction committed successfully
2025-09-18 12:00:34,571 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 12:00:35,035 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 12:00:35,040 - db_manager - INFO - Starting database transaction
2025-09-18 12:00:35,040 - db_manager - INFO - Executing get_grievance_by_id: 
                SELECT g.*, c.complainant_full_name, c.complainant_phone, c.complainant_email,
    ...
2025-09-18 12:00:35,042 - db_manager - INFO - get_grievance_by_id completed in 0.01s. Rows: 1
2025-09-18 12:00:35,042 - db_manager - INFO - Transaction committed successfully
2025-09-18 12:00:35,043 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 12:00:35,043 - db_manager - DEBUG - get_grievance_by_id: grievance_id: {'grievance_id': 'GR-20250918-KOJH-0D5E-B', 'complainant_id': 'CM-20250918-KOJH-AB6F-B', 'grievance_categories': ['Environmental - Air Pollution'], 'grievance_categories_alternative': ['Environmental - Noise Pollution'], 'follow_up_question': ['How many people in your household are affected by the dust and coughing, and for how long has this been happening?'], 'grievance_summary': 'Dust from road works is filling my house; my kids are coughing a lot.', 'grievance_description': 'dust everywhere in my house kids are coughing hard', 'grievance_claimed_amount': None, 'grievance_location': None, 'language_code': 'en', 'grievance_classification_status': 'pending', 'grievance_creation_date': datetime.datetime(2025, 9, 18, 12, 0, 20, 368633, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'grievance_modification_date': datetime.datetime(2025, 9, 18, 12, 0, 34, 552023, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'is_temporary': True, 'source': 'bot', 'complainant_full_name': 'c30d040703028c6469c6ec977f3a63d23d01dd194ce3b650890c1834ba4158a74b0b9e18fd91cea29d37d0b69bd8ffda267e25670ff880b8dfc117fa7e03cbcc6581198cc82a0590d9c11c9b83ca', 'complainant_phone': 'c30d0407030229a1b210ccf0c99c7ad23d014afaa3ee9f4a7c91283c19915719ccb58a4cc2c7acfc9dccaa4e4b34f5624a1163db020d2e9486b913c2f5e867383f0b12a496d2379d80a2b2ba5b01', 'complainant_email': 'c30d040703022f69c2845010b9f07ad23d01a716d56b792d623ac0a91f74e391a561d5e0cbd757d4fc545242044a44a5f22ec092dc95a8be1ba2e27f640a5c8a1f468a3341e46b03c7609f74bdac', 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_municipality': 'Birtamod Municipality', 'complainant_ward': None, 'complainant_village': 'Slot_Skipped', 'complainant_address': 'c30d04070302f1074271e2a31d2675d23d01a28fbac000cc8ab029762e75317e89573f58cd9d3647bcaadc4df5bde3371994a59d8e460f98937df6fc16988d34c6049142ae1fa99e81828b195a26'}, results: [{'grievance_id': 'GR-20250918-KOJH-0D5E-B', 'complainant_id': 'CM-20250918-KOJH-AB6F-B', 'grievance_categories': '["Environmental - Air Pollution"]', 'grievance_categories_alternative': '["Environmental - Noise Pollution"]', 'follow_up_question': '["How many people in your household are affected by the dust and coughing, and for how long has this been happening?"]', 'grievance_summary': 'Dust from road works is filling my house; my kids are coughing a lot.', 'grievance_description': 'dust everywhere in my house kids are coughing hard', 'grievance_claimed_amount': None, 'grievance_location': None, 'language_code': 'en', 'grievance_classification_status': 'pending', 'grievance_creation_date': datetime.datetime(2025, 9, 18, 12, 0, 20, 368633, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'grievance_modification_date': datetime.datetime(2025, 9, 18, 12, 0, 34, 552023, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'is_temporary': True, 'source': 'bot', 'complainant_full_name': 'c30d040703028c6469c6ec977f3a63d23d01dd194ce3b650890c1834ba4158a74b0b9e18fd91cea29d37d0b69bd8ffda267e25670ff880b8dfc117fa7e03cbcc6581198cc82a0590d9c11c9b83ca', 'complainant_phone': 'c30d0407030229a1b210ccf0c99c7ad23d014afaa3ee9f4a7c91283c19915719ccb58a4cc2c7acfc9dccaa4e4b34f5624a1163db020d2e9486b913c2f5e867383f0b12a496d2379d80a2b2ba5b01', 'complainant_email': 'c30d040703022f69c2845010b9f07ad23d01a716d56b792d623ac0a91f74e391a561d5e0cbd757d4fc545242044a44a5f22ec092dc95a8be1ba2e27f640a5c8a1f468a3341e46b03c7609f74bdac', 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_municipality': 'Birtamod Municipality', 'complainant_ward': None, 'complainant_village': 'Slot_Skipped', 'complainant_address': 'c30d04070302f1074271e2a31d2675d23d01a28fbac000cc8ab029762e75317e89573f58cd9d3647bcaadc4df5bde3371994a59d8e460f98937df6fc16988d34c6049142ae1fa99e81828b195a26'}]
2025-09-18 12:01:56,864 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-18 12:01:56,864 - db_manager - INFO - Database manager initialized successfully
2025-09-18 12:01:56,864 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-18 12:01:56,864 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-18 12:01:56,864 - db_manager - INFO - Database manager initialized successfully
2025-09-18 12:01:56,864 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-18 12:01:56,864 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-18 12:01:56,864 - db_manager - INFO - Database manager initialized successfully
2025-09-18 12:01:56,864 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-18 12:01:56,864 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-18 12:01:56,865 - db_manager - INFO - Database manager initialized successfully
2025-09-18 12:01:56,865 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-18 12:01:56,865 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-18 12:01:56,865 - db_manager - INFO - Database manager initialized successfully
2025-09-18 12:01:56,865 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-18 12:01:56,865 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-18 12:01:56,865 - db_manager - INFO - Database manager initialized successfully
2025-09-18 12:01:56,865 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-18 12:01:56,865 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-18 12:01:56,865 - db_manager - INFO - Database manager initialized successfully
2025-09-18 12:01:56,865 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-18 12:01:56,865 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-18 12:01:56,865 - db_manager - INFO - Database manager initialized successfully
2025-09-18 12:01:56,865 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-18 12:01:56,865 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-18 12:01:56,865 - db_manager - INFO - Database manager initialized successfully
2025-09-18 12:01:56,865 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-18 12:01:56,865 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-18 12:01:56,865 - db_manager - INFO - Database manager initialized successfully
2025-09-18 12:01:56,865 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-18 12:06:57,644 - db_manager - INFO - create_complainant: Creating complainant with ID: CM-20250918-KOJH-62B0-B
2025-09-18 12:06:57,644 - db_manager - DEBUG - encrypted and hashed data at encrypt_and_hash_sensitive_data: {'complainant_id': 'CM-20250918-KOJH-62B0-B', 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_unique_id': 'CM-20250918-KOJH-62B0-B'}
2025-09-18 12:06:57,644 - db_manager - DEBUG - query_keys at generate_query_string: dict_keys(['complainant_id', 'complainant_province', 'complainant_district', 'complainant_unique_id'])
2025-09-18 12:06:57,644 - db_manager - DEBUG - Generated query: INSERT INTO complainants (complainant_id, complainant_province, complainant_district, complainant_unique_id) VALUES (%s, %s, %s, %s)
2025-09-18 12:06:57,644 - db_manager - DEBUG - len of query_keys: 4
2025-09-18 12:06:57,644 - db_manager - DEBUG - Generated query: INSERT INTO complainants (complainant_id, complainant_province, complainant_district, complainant_unique_id) VALUES (%s, %s, %s, %s)
2025-09-18 12:06:57,645 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 12:06:57,651 - db_manager - INFO - Starting database transaction
2025-09-18 12:06:57,654 - db_manager - INFO - Transaction committed successfully
2025-09-18 12:06:57,654 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 12:06:57,654 - db_manager - INFO - create_complainant: Successfully created complainant with ID: CM-20250918-KOJH-62B0-B
2025-09-18 12:06:57,654 - db_manager - INFO - create_grievance: Creating grievance with data: {'grievance_id': 'GR-20250918-KOJH-61D9-B', 'complainant_id': 'CM-20250918-KOJH-62B0-B', 'grievance_description': 'dust everywhere in my house kids are coughing hard', 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_office': None, 'source': 'bot', 'complainant_unique_id': 'CM-20250918-KOJH-62B0-B'}
2025-09-18 12:06:57,654 - db_manager - INFO - create_grievance: Creating grievance with ID: GR-20250918-KOJH-61D9-B
2025-09-18 12:06:57,654 - db_manager - INFO - create_grievance: Creating grievance with allowed fields: ['grievance_id', 'complainant_id', 'grievance_categories', 'grievance_categories_alternative', 'follow_up_question', 'grievance_summary', 'grievance_description', 'grievance_claimed_amount', 'grievance_location', 'is_temporary', 'source', 'language_code', 'grievance_classification_status']
2025-09-18 12:06:57,654 - db_manager - DEBUG - query_keys at generate_query_string: dict_keys(['grievance_id', 'complainant_id', 'grievance_description', 'source'])
2025-09-18 12:06:57,654 - db_manager - DEBUG - Generated query: INSERT INTO grievances (grievance_id, complainant_id, grievance_description, source) VALUES (%s, %s, %s, %s) RETURNING grievance_id
2025-09-18 12:06:57,654 - db_manager - DEBUG - len of query_keys: 4
2025-09-18 12:06:57,654 - db_manager - DEBUG - Generated query: INSERT INTO grievances (grievance_id, complainant_id, grievance_description, source) VALUES (%s, %s, %s, %s) RETURNING grievance_id
2025-09-18 12:06:57,654 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 12:06:57,660 - db_manager - INFO - Starting database transaction
2025-09-18 12:06:57,664 - db_manager - INFO - Transaction committed successfully
2025-09-18 12:06:57,665 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 12:06:57,665 - db_manager - INFO - create_grievance: Successfully created grievance with ID: GR-20250918-KOJH-61D9-B
2025-09-18 12:07:14,768 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 12:07:14,773 - db_manager - INFO - Starting database transaction
2025-09-18 12:07:14,774 - db_manager - INFO - Executing get_complainant_by_id: 
            SELECT complainant_id, complainant_unique_id, complainant_full_name,    complainant_pho...
2025-09-18 12:07:14,775 - db_manager - INFO - get_complainant_by_id completed in 0.01s. Rows: 1
2025-09-18 12:07:14,775 - db_manager - INFO - Transaction committed successfully
2025-09-18 12:07:14,775 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 12:07:14,775 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 12:07:14,781 - db_manager - INFO - Starting database transaction
2025-09-18 12:07:14,781 - db_manager - INFO - Executing get_grievance_by_id: 
                SELECT g.*, c.complainant_full_name, c.complainant_phone, c.complainant_email,
    ...
2025-09-18 12:07:14,782 - db_manager - INFO - get_grievance_by_id completed in 0.01s. Rows: 1
2025-09-18 12:07:14,783 - db_manager - INFO - Transaction committed successfully
2025-09-18 12:07:14,783 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 12:07:14,783 - db_manager - DEBUG - get_grievance_by_id: grievance_id: {'grievance_id': 'GR-20250918-KOJH-61D9-B', 'complainant_id': 'CM-20250918-KOJH-62B0-B', 'grievance_categories': ['Environmental - Air Pollution'], 'grievance_categories_alternative': [], 'follow_up_question': ['How many people in your household are affected by the dust, and how long have your children been coughing?'], 'grievance_summary': 'Dust from road works is entering the house, causing kids to cough.', 'grievance_description': 'dust everywhere in my house kids are coughing hard', 'grievance_claimed_amount': None, 'grievance_location': None, 'language_code': 'en', 'grievance_classification_status': 'pending', 'grievance_creation_date': datetime.datetime(2025, 9, 18, 12, 6, 57, 661175, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'grievance_modification_date': datetime.datetime(2025, 9, 18, 12, 7, 11, 394241, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'is_temporary': True, 'source': 'bot', 'complainant_full_name': None, 'complainant_phone': None, 'complainant_email': None, 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_municipality': None, 'complainant_ward': None, 'complainant_village': None, 'complainant_address': None}, results: [{'grievance_id': 'GR-20250918-KOJH-61D9-B', 'complainant_id': 'CM-20250918-KOJH-62B0-B', 'grievance_categories': '["Environmental - Air Pollution"]', 'grievance_categories_alternative': '[]', 'follow_up_question': '["How many people in your household are affected by the dust, and how long have your children been coughing?"]', 'grievance_summary': 'Dust from road works is entering the house, causing kids to cough.', 'grievance_description': 'dust everywhere in my house kids are coughing hard', 'grievance_claimed_amount': None, 'grievance_location': None, 'language_code': 'en', 'grievance_classification_status': 'pending', 'grievance_creation_date': datetime.datetime(2025, 9, 18, 12, 6, 57, 661175, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'grievance_modification_date': datetime.datetime(2025, 9, 18, 12, 7, 11, 394241, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'is_temporary': True, 'source': 'bot', 'complainant_full_name': None, 'complainant_phone': None, 'complainant_email': None, 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_municipality': None, 'complainant_ward': None, 'complainant_village': None, 'complainant_address': None}]
2025-09-18 12:07:14,783 - db_manager - INFO - update_complainant: Updating complainant with ID: CM-20250918-KOJH-62B0-B
2025-09-18 12:07:14,783 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 12:07:14,788 - db_manager - INFO - Starting database transaction
2025-09-18 12:07:14,788 - db_manager - INFO - Executing encrypt_field: SELECT encode(pgp_sym_encrypt(%s, %s), 'hex') AS encrypted...
2025-09-18 12:07:14,790 - db_manager - INFO - encrypt_field completed in 0.01s. Rows: 1
2025-09-18 12:07:14,790 - db_manager - INFO - Transaction committed successfully
2025-09-18 12:07:14,790 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 12:07:14,790 - db_manager - DEBUG - encrypted phone number Not provided at encrypt_complainant_data: c30d04070302d0d200c19c3801777dd23d01daa3c0510f4b2cd22cdc9a360fd64fd29b9cabce225dbde449874c56310b11dda4cbb2a800cad0856e1ffeb4faad98c048cd4ffbc8f4733763a386df
2025-09-18 12:07:14,790 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 12:07:14,795 - db_manager - INFO - Starting database transaction
2025-09-18 12:07:14,795 - db_manager - INFO - Executing encrypt_field: SELECT encode(pgp_sym_encrypt(%s, %s), 'hex') AS encrypted...
2025-09-18 12:07:14,796 - db_manager - INFO - encrypt_field completed in 0.01s. Rows: 1
2025-09-18 12:07:14,796 - db_manager - INFO - Transaction committed successfully
2025-09-18 12:07:14,796 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 12:07:14,796 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 12:07:14,802 - db_manager - INFO - Starting database transaction
2025-09-18 12:07:14,802 - db_manager - INFO - Executing encrypt_field: SELECT encode(pgp_sym_encrypt(%s, %s), 'hex') AS encrypted...
2025-09-18 12:07:14,803 - db_manager - INFO - encrypt_field completed in 0.01s. Rows: 1
2025-09-18 12:07:14,804 - db_manager - INFO - Transaction committed successfully
2025-09-18 12:07:14,804 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 12:07:14,804 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 12:07:14,808 - db_manager - INFO - Starting database transaction
2025-09-18 12:07:14,808 - db_manager - INFO - Executing encrypt_field: SELECT encode(pgp_sym_encrypt(%s, %s), 'hex') AS encrypted...
2025-09-18 12:07:14,809 - db_manager - INFO - encrypt_field completed in 0.01s. Rows: 1
2025-09-18 12:07:14,809 - db_manager - INFO - Transaction committed successfully
2025-09-18 12:07:14,809 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 12:07:14,810 - db_manager - DEBUG - phone number Not provided hashed to d83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f at hash_sensitive_data
2025-09-18 12:07:14,810 - db_manager - DEBUG - encrypted and hashed data at encrypt_and_hash_sensitive_data: {'complainant_full_name': 'c30d04070302a93df51b93fda22a66d23d0160eb09ae4a7df4e7662ca58771d78691c0d10119c9afcd7be06fc78bc468952b08a9685436a8b4bae730cbcdc6d5b6db075183dc1965bd2a01046da3', 'complainant_phone': 'c30d04070302d0d200c19c3801777dd23d01daa3c0510f4b2cd22cdc9a360fd64fd29b9cabce225dbde449874c56310b11dda4cbb2a800cad0856e1ffeb4faad98c048cd4ffbc8f4733763a386df', 'complainant_email': 'c30d04070302c65f3a71187df67c70d23d0171d7af08e57756ce118681cbd071a928e232469d68da7f7fde7a5c92e7d3b81acfae11813066cc6346322e94654daabd59d19ea24db3d2244006b439', 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_municipality': 'Birtamod Municipality', 'complainant_village': 'Slot_Skipped', 'complainant_address': 'c30d040703024177eb3ea399534f74d23d01be7c2a9daf6e0111cda8b2625b744ee6454942abf064d1269f0fe118d382917d1d957cbb3ce50a4d4967966e3a45862e03657f4daf1085e95539018f', 'complainant_phone_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'complainant_full_name_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'complainant_email_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f'}
2025-09-18 12:07:14,810 - db_manager - DEBUG - encrypted_data at update_complainant: {'complainant_full_name': 'c30d04070302a93df51b93fda22a66d23d0160eb09ae4a7df4e7662ca58771d78691c0d10119c9afcd7be06fc78bc468952b08a9685436a8b4bae730cbcdc6d5b6db075183dc1965bd2a01046da3', 'complainant_phone': 'c30d04070302d0d200c19c3801777dd23d01daa3c0510f4b2cd22cdc9a360fd64fd29b9cabce225dbde449874c56310b11dda4cbb2a800cad0856e1ffeb4faad98c048cd4ffbc8f4733763a386df', 'complainant_email': 'c30d04070302c65f3a71187df67c70d23d0171d7af08e57756ce118681cbd071a928e232469d68da7f7fde7a5c92e7d3b81acfae11813066cc6346322e94654daabd59d19ea24db3d2244006b439', 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_municipality': 'Birtamod Municipality', 'complainant_village': 'Slot_Skipped', 'complainant_address': 'c30d040703024177eb3ea399534f74d23d01be7c2a9daf6e0111cda8b2625b744ee6454942abf064d1269f0fe118d382917d1d957cbb3ce50a4d4967966e3a45862e03657f4daf1085e95539018f', 'complainant_phone_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'complainant_full_name_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'complainant_email_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f'}
2025-09-18 12:07:14,810 - db_manager - DEBUG - execute_update values: ('c30d04070302a93df51b93fda22a66d23d0160eb09ae4a7df4e7662ca58771d78691c0d10119c9afcd7be06fc78bc468952b08a9685436a8b4bae730cbcdc6d5b6db075183dc1965bd2a01046da3', 'c30d04070302d0d200c19c3801777dd23d01daa3c0510f4b2cd22cdc9a360fd64fd29b9cabce225dbde449874c56310b11dda4cbb2a800cad0856e1ffeb4faad98c048cd4ffbc8f4733763a386df', 'c30d04070302c65f3a71187df67c70d23d0171d7af08e57756ce118681cbd071a928e232469d68da7f7fde7a5c92e7d3b81acfae11813066cc6346322e94654daabd59d19ea24db3d2244006b439', 'Koshi', 'Jhapa', 'Birtamod Municipality', 'Slot_Skipped', 'c30d040703024177eb3ea399534f74d23d01be7c2a9daf6e0111cda8b2625b744ee6454942abf064d1269f0fe118d382917d1d957cbb3ce50a4d4967966e3a45862e03657f4daf1085e95539018f', 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'CM-20250918-KOJH-62B0-B')
2025-09-18 12:07:14,810 - db_manager - DEBUG - execute_update query: UPDATE complainants SET complainant_full_name = %s, complainant_phone = %s, complainant_email = %s, complainant_province = %s, complainant_district = %s, complainant_municipality = %s, complainant_village = %s, complainant_address = %s, complainant_phone_hash = %s, complainant_full_name_hash = %s, complainant_email_hash = %s WHERE complainant_id = %s
2025-09-18 12:07:14,810 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 12:07:14,815 - db_manager - INFO - Starting database transaction
2025-09-18 12:07:14,815 - db_manager - INFO - execute_update: Executing update query: UPDATE complainants SET complainant_full_name = %s, complainant_phone = %s, complainant_email = %s, ...
2025-09-18 12:07:14,816 - db_manager - INFO - execute_update: Update completed in 0.01s. Affected rows: 1
2025-09-18 12:07:14,818 - db_manager - INFO - Transaction committed successfully
2025-09-18 12:07:14,818 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 12:07:14,818 - db_manager - INFO - Complainant updated in db: CM-20250918-KOJH-62B0-B
2025-09-18 12:07:14,818 - db_manager - INFO - update_grievance: Updating grievance with ID: GR-20250918-KOJH-61D9-B
2025-09-18 12:07:14,818 - db_manager - DEBUG - execute_update values: ('dust everywhere in my house kids are coughing hard', 'GR-20250918-KOJH-61D9-B')
2025-09-18 12:07:14,818 - db_manager - DEBUG - execute_update query: 
                    UPDATE grievances 
                    SET grievance_description = %s, grievance_modification_date = CURRENT_TIMESTAMP
                    WHERE grievance_id = %s
                    RETURNING grievance_id
                
2025-09-18 12:07:14,819 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 12:07:14,823 - db_manager - INFO - Starting database transaction
2025-09-18 12:07:14,823 - db_manager - INFO - execute_update: Executing update query: 
                    UPDATE grievances 
                    SET grievance_description = %s, grievanc...
2025-09-18 12:07:14,824 - db_manager - INFO - execute_update: Update completed in 0.01s. Affected rows: 1
2025-09-18 12:07:14,826 - db_manager - INFO - Transaction committed successfully
2025-09-18 12:07:14,826 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 12:07:14,827 - db_manager - INFO - update_grievance: Updated grievance with ID: GR-20250918-KOJH-61D9-B, rows affected: 1
2025-09-18 12:07:14,827 - db_manager - INFO - Grievance updated in db: GR-20250918-KOJH-61D9-B
2025-09-18 12:07:14,827 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 12:07:14,832 - db_manager - INFO - Starting database transaction
2025-09-18 12:07:14,832 - db_manager - INFO - Executing get_grievance_files: 
            SELECT file_id, file_name, file_type, file_size, upload_timestamp
            FROM file...
2025-09-18 12:07:14,833 - db_manager - INFO - get_grievance_files completed in 0.01s. Rows: 0
2025-09-18 12:07:14,833 - db_manager - INFO - Transaction committed successfully
2025-09-18 12:07:14,833 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 12:07:14,833 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 12:07:14,839 - db_manager - INFO - Starting database transaction
2025-09-18 12:07:14,839 - db_manager - INFO - Executing get_grievance_files: 
            SELECT file_id, file_name, file_type, file_size, upload_timestamp
            FROM file...
2025-09-18 12:07:14,840 - db_manager - INFO - get_grievance_files completed in 0.01s. Rows: 0
2025-09-18 12:07:14,840 - db_manager - INFO - Transaction committed successfully
2025-09-18 12:07:14,840 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 12:07:15,276 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 12:07:15,282 - db_manager - INFO - Starting database transaction
2025-09-18 12:07:15,282 - db_manager - INFO - Executing get_grievance_by_id: 
                SELECT g.*, c.complainant_full_name, c.complainant_phone, c.complainant_email,
    ...
2025-09-18 12:07:15,284 - db_manager - INFO - get_grievance_by_id completed in 0.01s. Rows: 1
2025-09-18 12:07:15,284 - db_manager - INFO - Transaction committed successfully
2025-09-18 12:07:15,284 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 12:07:15,285 - db_manager - DEBUG - get_grievance_by_id: grievance_id: {'grievance_id': 'GR-20250918-KOJH-61D9-B', 'complainant_id': 'CM-20250918-KOJH-62B0-B', 'grievance_categories': ['Environmental - Air Pollution'], 'grievance_categories_alternative': [], 'follow_up_question': ['How many people in your household are affected by the dust, and how long have your children been coughing?'], 'grievance_summary': 'Dust from road works is entering the house, causing kids to cough.', 'grievance_description': 'dust everywhere in my house kids are coughing hard', 'grievance_claimed_amount': None, 'grievance_location': None, 'language_code': 'en', 'grievance_classification_status': 'pending', 'grievance_creation_date': datetime.datetime(2025, 9, 18, 12, 6, 57, 661175, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'grievance_modification_date': datetime.datetime(2025, 9, 18, 12, 7, 14, 823701, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'is_temporary': True, 'source': 'bot', 'complainant_full_name': 'c30d04070302a93df51b93fda22a66d23d0160eb09ae4a7df4e7662ca58771d78691c0d10119c9afcd7be06fc78bc468952b08a9685436a8b4bae730cbcdc6d5b6db075183dc1965bd2a01046da3', 'complainant_phone': 'c30d04070302d0d200c19c3801777dd23d01daa3c0510f4b2cd22cdc9a360fd64fd29b9cabce225dbde449874c56310b11dda4cbb2a800cad0856e1ffeb4faad98c048cd4ffbc8f4733763a386df', 'complainant_email': 'c30d04070302c65f3a71187df67c70d23d0171d7af08e57756ce118681cbd071a928e232469d68da7f7fde7a5c92e7d3b81acfae11813066cc6346322e94654daabd59d19ea24db3d2244006b439', 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_municipality': 'Birtamod Municipality', 'complainant_ward': None, 'complainant_village': 'Slot_Skipped', 'complainant_address': 'c30d040703024177eb3ea399534f74d23d01be7c2a9daf6e0111cda8b2625b744ee6454942abf064d1269f0fe118d382917d1d957cbb3ce50a4d4967966e3a45862e03657f4daf1085e95539018f'}, results: [{'grievance_id': 'GR-20250918-KOJH-61D9-B', 'complainant_id': 'CM-20250918-KOJH-62B0-B', 'grievance_categories': '["Environmental - Air Pollution"]', 'grievance_categories_alternative': '[]', 'follow_up_question': '["How many people in your household are affected by the dust, and how long have your children been coughing?"]', 'grievance_summary': 'Dust from road works is entering the house, causing kids to cough.', 'grievance_description': 'dust everywhere in my house kids are coughing hard', 'grievance_claimed_amount': None, 'grievance_location': None, 'language_code': 'en', 'grievance_classification_status': 'pending', 'grievance_creation_date': datetime.datetime(2025, 9, 18, 12, 6, 57, 661175, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'grievance_modification_date': datetime.datetime(2025, 9, 18, 12, 7, 14, 823701, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'is_temporary': True, 'source': 'bot', 'complainant_full_name': 'c30d04070302a93df51b93fda22a66d23d0160eb09ae4a7df4e7662ca58771d78691c0d10119c9afcd7be06fc78bc468952b08a9685436a8b4bae730cbcdc6d5b6db075183dc1965bd2a01046da3', 'complainant_phone': 'c30d04070302d0d200c19c3801777dd23d01daa3c0510f4b2cd22cdc9a360fd64fd29b9cabce225dbde449874c56310b11dda4cbb2a800cad0856e1ffeb4faad98c048cd4ffbc8f4733763a386df', 'complainant_email': 'c30d04070302c65f3a71187df67c70d23d0171d7af08e57756ce118681cbd071a928e232469d68da7f7fde7a5c92e7d3b81acfae11813066cc6346322e94654daabd59d19ea24db3d2244006b439', 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_municipality': 'Birtamod Municipality', 'complainant_ward': None, 'complainant_village': 'Slot_Skipped', 'complainant_address': 'c30d040703024177eb3ea399534f74d23d01be7c2a9daf6e0111cda8b2625b744ee6454942abf064d1269f0fe118d382917d1d957cbb3ce50a4d4967966e3a45862e03657f4daf1085e95539018f'}]
2025-09-18 13:22:42,740 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-18 13:22:42,740 - db_manager - INFO - Database manager initialized successfully
2025-09-18 13:22:42,740 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-18 13:22:42,740 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-18 13:22:42,740 - db_manager - INFO - Database manager initialized successfully
2025-09-18 13:22:42,741 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-18 13:22:42,741 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-18 13:22:42,741 - db_manager - INFO - Database manager initialized successfully
2025-09-18 13:22:42,741 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-18 13:22:42,741 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-18 13:22:42,741 - db_manager - INFO - Database manager initialized successfully
2025-09-18 13:22:42,741 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-18 13:22:42,741 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-18 13:22:42,741 - db_manager - INFO - Database manager initialized successfully
2025-09-18 13:22:42,741 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-18 13:22:42,741 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-18 13:22:42,741 - db_manager - INFO - Database manager initialized successfully
2025-09-18 13:22:42,741 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-18 13:22:42,741 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-18 13:22:42,741 - db_manager - INFO - Database manager initialized successfully
2025-09-18 13:22:42,741 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-18 13:22:42,741 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-18 13:22:42,741 - db_manager - INFO - Database manager initialized successfully
2025-09-18 13:22:42,742 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-18 13:22:42,742 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-18 13:22:42,742 - db_manager - INFO - Database manager initialized successfully
2025-09-18 13:22:42,742 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-18 13:22:42,742 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-18 13:22:42,742 - db_manager - INFO - Database manager initialized successfully
2025-09-18 13:22:42,742 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-18 13:27:22,087 - db_manager - INFO - create_complainant: Creating complainant with ID: CM-20250918-KOJH-5971-B
2025-09-18 13:27:22,088 - db_manager - DEBUG - encrypted and hashed data at encrypt_and_hash_sensitive_data: {'complainant_id': 'CM-20250918-KOJH-5971-B', 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_unique_id': 'CM-20250918-KOJH-5971-B'}
2025-09-18 13:27:22,088 - db_manager - DEBUG - query_keys at generate_query_string: dict_keys(['complainant_id', 'complainant_province', 'complainant_district', 'complainant_unique_id'])
2025-09-18 13:27:22,088 - db_manager - DEBUG - Generated query: INSERT INTO complainants (complainant_id, complainant_province, complainant_district, complainant_unique_id) VALUES (%s, %s, %s, %s)
2025-09-18 13:27:22,088 - db_manager - DEBUG - len of query_keys: 4
2025-09-18 13:27:22,088 - db_manager - DEBUG - Generated query: INSERT INTO complainants (complainant_id, complainant_province, complainant_district, complainant_unique_id) VALUES (%s, %s, %s, %s)
2025-09-18 13:27:22,088 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 13:27:22,104 - db_manager - INFO - Starting database transaction
2025-09-18 13:27:22,112 - db_manager - INFO - Transaction committed successfully
2025-09-18 13:27:22,112 - db_manager - INFO - Database connection closed. Duration: 0.02s
2025-09-18 13:27:22,112 - db_manager - INFO - create_complainant: Successfully created complainant with ID: CM-20250918-KOJH-5971-B
2025-09-18 13:27:22,113 - db_manager - INFO - create_grievance: Creating grievance with data: {'grievance_id': 'GR-20250918-KOJH-6579-B', 'complainant_id': 'CM-20250918-KOJH-5971-B', 'grievance_description': 'dust everywhere in my house kids are coughing hard', 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_office': None, 'source': 'bot', 'complainant_unique_id': 'CM-20250918-KOJH-5971-B'}
2025-09-18 13:27:22,113 - db_manager - INFO - create_grievance: Creating grievance with ID: GR-20250918-KOJH-6579-B
2025-09-18 13:27:22,113 - db_manager - INFO - create_grievance: Creating grievance with allowed fields: ['grievance_id', 'complainant_id', 'grievance_categories', 'grievance_categories_alternative', 'follow_up_question', 'grievance_summary', 'grievance_description', 'grievance_claimed_amount', 'grievance_location', 'is_temporary', 'source', 'language_code', 'grievance_classification_status']
2025-09-18 13:27:22,113 - db_manager - DEBUG - query_keys at generate_query_string: dict_keys(['grievance_id', 'complainant_id', 'grievance_description', 'source'])
2025-09-18 13:27:22,113 - db_manager - DEBUG - Generated query: INSERT INTO grievances (grievance_id, complainant_id, grievance_description, source) VALUES (%s, %s, %s, %s) RETURNING grievance_id
2025-09-18 13:27:22,113 - db_manager - DEBUG - len of query_keys: 4
2025-09-18 13:27:22,113 - db_manager - DEBUG - Generated query: INSERT INTO grievances (grievance_id, complainant_id, grievance_description, source) VALUES (%s, %s, %s, %s) RETURNING grievance_id
2025-09-18 13:27:22,113 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 13:27:22,119 - db_manager - INFO - Starting database transaction
2025-09-18 13:27:22,207 - db_manager - INFO - Transaction committed successfully
2025-09-18 13:27:22,207 - db_manager - INFO - Database connection closed. Duration: 0.09s
2025-09-18 13:27:22,208 - db_manager - INFO - create_grievance: Successfully created grievance with ID: GR-20250918-KOJH-6579-B
2025-09-18 13:27:36,635 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 13:27:36,641 - db_manager - INFO - Starting database transaction
2025-09-18 13:27:36,641 - db_manager - INFO - Executing get_complainant_by_id: 
            SELECT complainant_id, complainant_unique_id, complainant_full_name,    complainant_pho...
2025-09-18 13:27:36,642 - db_manager - INFO - get_complainant_by_id completed in 0.01s. Rows: 1
2025-09-18 13:27:36,643 - db_manager - INFO - Transaction committed successfully
2025-09-18 13:27:36,643 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 13:27:36,643 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 13:27:36,648 - db_manager - INFO - Starting database transaction
2025-09-18 13:27:36,649 - db_manager - INFO - Executing get_grievance_by_id: 
                SELECT g.*, c.complainant_full_name, c.complainant_phone, c.complainant_email,
    ...
2025-09-18 13:27:36,650 - db_manager - INFO - get_grievance_by_id completed in 0.01s. Rows: 1
2025-09-18 13:27:36,650 - db_manager - INFO - Transaction committed successfully
2025-09-18 13:27:36,650 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 13:27:36,651 - db_manager - DEBUG - get_grievance_by_id: grievance_id: {'grievance_id': 'GR-20250918-KOJH-6579-B', 'complainant_id': 'CM-20250918-KOJH-5971-B', 'grievance_categories': ['Environmental - Air Pollution'], 'grievance_categories_alternative': ['Environmental - Noise Pollution', 'Environmental - Drainage and Sewage Management'], 'follow_up_question': ['How many people are affected, can you list them?'], 'grievance_summary': 'Dust from the road works is spreading around the house and causing children to cough.', 'grievance_description': 'dust everywhere in my house kids are coughing hard', 'grievance_claimed_amount': None, 'grievance_location': None, 'language_code': 'en', 'grievance_classification_status': 'pending', 'grievance_creation_date': datetime.datetime(2025, 9, 18, 13, 27, 22, 119379, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'grievance_modification_date': datetime.datetime(2025, 9, 18, 13, 27, 32, 710771, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'is_temporary': True, 'source': 'bot', 'complainant_full_name': None, 'complainant_phone': None, 'complainant_email': None, 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_municipality': None, 'complainant_ward': None, 'complainant_village': None, 'complainant_address': None}, results: [{'grievance_id': 'GR-20250918-KOJH-6579-B', 'complainant_id': 'CM-20250918-KOJH-5971-B', 'grievance_categories': '["Environmental - Air Pollution"]', 'grievance_categories_alternative': '["Environmental - Noise Pollution", "Environmental - Drainage and Sewage Management"]', 'follow_up_question': '["How many people are affected, can you list them?"]', 'grievance_summary': 'Dust from the road works is spreading around the house and causing children to cough.', 'grievance_description': 'dust everywhere in my house kids are coughing hard', 'grievance_claimed_amount': None, 'grievance_location': None, 'language_code': 'en', 'grievance_classification_status': 'pending', 'grievance_creation_date': datetime.datetime(2025, 9, 18, 13, 27, 22, 119379, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'grievance_modification_date': datetime.datetime(2025, 9, 18, 13, 27, 32, 710771, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'is_temporary': True, 'source': 'bot', 'complainant_full_name': None, 'complainant_phone': None, 'complainant_email': None, 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_municipality': None, 'complainant_ward': None, 'complainant_village': None, 'complainant_address': None}]
2025-09-18 13:27:36,651 - db_manager - INFO - update_complainant: Updating complainant with ID: CM-20250918-KOJH-5971-B
2025-09-18 13:27:36,651 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 13:27:36,656 - db_manager - INFO - Starting database transaction
2025-09-18 13:27:36,656 - db_manager - INFO - Executing encrypt_field: SELECT encode(pgp_sym_encrypt(%s, %s), 'hex') AS encrypted...
2025-09-18 13:27:36,659 - db_manager - INFO - encrypt_field completed in 0.01s. Rows: 1
2025-09-18 13:27:36,659 - db_manager - INFO - Transaction committed successfully
2025-09-18 13:27:36,660 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 13:27:36,660 - db_manager - DEBUG - encrypted phone number Not provided at encrypt_complainant_data: c30d04070302f89837dae355e96170d23d01f847c2cade48b797e1ab6d58d59b9925123fae00ac609188f7212b6362c0a536429c018f0991925bd148bbb73878c28756a916479b1448f2bef8b88e
2025-09-18 13:27:36,660 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 13:27:36,665 - db_manager - INFO - Starting database transaction
2025-09-18 13:27:36,665 - db_manager - INFO - Executing encrypt_field: SELECT encode(pgp_sym_encrypt(%s, %s), 'hex') AS encrypted...
2025-09-18 13:27:36,666 - db_manager - INFO - encrypt_field completed in 0.01s. Rows: 1
2025-09-18 13:27:36,666 - db_manager - INFO - Transaction committed successfully
2025-09-18 13:27:36,666 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 13:27:36,666 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 13:27:36,671 - db_manager - INFO - Starting database transaction
2025-09-18 13:27:36,671 - db_manager - INFO - Executing encrypt_field: SELECT encode(pgp_sym_encrypt(%s, %s), 'hex') AS encrypted...
2025-09-18 13:27:36,672 - db_manager - INFO - encrypt_field completed in 0.01s. Rows: 1
2025-09-18 13:27:36,673 - db_manager - INFO - Transaction committed successfully
2025-09-18 13:27:36,673 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 13:27:36,673 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 13:27:36,678 - db_manager - INFO - Starting database transaction
2025-09-18 13:27:36,678 - db_manager - INFO - Executing encrypt_field: SELECT encode(pgp_sym_encrypt(%s, %s), 'hex') AS encrypted...
2025-09-18 13:27:36,678 - db_manager - INFO - encrypt_field completed in 0.01s. Rows: 1
2025-09-18 13:27:36,679 - db_manager - INFO - Transaction committed successfully
2025-09-18 13:27:36,679 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 13:27:36,679 - db_manager - DEBUG - phone number Not provided hashed to d83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f at hash_sensitive_data
2025-09-18 13:27:36,679 - db_manager - DEBUG - encrypted and hashed data at encrypt_and_hash_sensitive_data: {'complainant_full_name': 'c30d040703023590ac85030f43e36fd23d010f92d1e7e81e323ca587bb7a8e87a12bede6764dd15aed20117319823d8e42a61e6484ffa9f3fa90484f8c466f70b7ab93cf31517f3b0d1276e838c5', 'complainant_phone': 'c30d04070302f89837dae355e96170d23d01f847c2cade48b797e1ab6d58d59b9925123fae00ac609188f7212b6362c0a536429c018f0991925bd148bbb73878c28756a916479b1448f2bef8b88e', 'complainant_email': 'c30d04070302ebf0097edf751c8b69d23d0114a214fd71c208b5ee4610ef6e72fc46558780e575f97c3cfc6bd57f12c7b53d6c79edc67bee01cbb91a1c5c1f585991875e81b2cfe030fb49fe2503', 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_municipality': 'Birtamod Municipality', 'complainant_village': 'Slot_Skipped', 'complainant_address': 'c30d04070302ab8c739d52f8218b66d23d0139d9d62527126808ddf32600fa9610eef89e173a0f12044a42877c99a3316d3f54db76dec602d0544de4db0882f52340c1a2d5a3d91cb75d0b885e2a', 'complainant_phone_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'complainant_email_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'complainant_full_name_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f'}
2025-09-18 13:27:36,679 - db_manager - DEBUG - encrypted_data at update_complainant: {'complainant_full_name': 'c30d040703023590ac85030f43e36fd23d010f92d1e7e81e323ca587bb7a8e87a12bede6764dd15aed20117319823d8e42a61e6484ffa9f3fa90484f8c466f70b7ab93cf31517f3b0d1276e838c5', 'complainant_phone': 'c30d04070302f89837dae355e96170d23d01f847c2cade48b797e1ab6d58d59b9925123fae00ac609188f7212b6362c0a536429c018f0991925bd148bbb73878c28756a916479b1448f2bef8b88e', 'complainant_email': 'c30d04070302ebf0097edf751c8b69d23d0114a214fd71c208b5ee4610ef6e72fc46558780e575f97c3cfc6bd57f12c7b53d6c79edc67bee01cbb91a1c5c1f585991875e81b2cfe030fb49fe2503', 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_municipality': 'Birtamod Municipality', 'complainant_village': 'Slot_Skipped', 'complainant_address': 'c30d04070302ab8c739d52f8218b66d23d0139d9d62527126808ddf32600fa9610eef89e173a0f12044a42877c99a3316d3f54db76dec602d0544de4db0882f52340c1a2d5a3d91cb75d0b885e2a', 'complainant_phone_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'complainant_email_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'complainant_full_name_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f'}
2025-09-18 13:27:36,679 - db_manager - DEBUG - execute_update values: ('c30d040703023590ac85030f43e36fd23d010f92d1e7e81e323ca587bb7a8e87a12bede6764dd15aed20117319823d8e42a61e6484ffa9f3fa90484f8c466f70b7ab93cf31517f3b0d1276e838c5', 'c30d04070302f89837dae355e96170d23d01f847c2cade48b797e1ab6d58d59b9925123fae00ac609188f7212b6362c0a536429c018f0991925bd148bbb73878c28756a916479b1448f2bef8b88e', 'c30d04070302ebf0097edf751c8b69d23d0114a214fd71c208b5ee4610ef6e72fc46558780e575f97c3cfc6bd57f12c7b53d6c79edc67bee01cbb91a1c5c1f585991875e81b2cfe030fb49fe2503', 'Koshi', 'Jhapa', 'Birtamod Municipality', 'Slot_Skipped', 'c30d04070302ab8c739d52f8218b66d23d0139d9d62527126808ddf32600fa9610eef89e173a0f12044a42877c99a3316d3f54db76dec602d0544de4db0882f52340c1a2d5a3d91cb75d0b885e2a', 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'CM-20250918-KOJH-5971-B')
2025-09-18 13:27:36,679 - db_manager - DEBUG - execute_update query: UPDATE complainants SET complainant_full_name = %s, complainant_phone = %s, complainant_email = %s, complainant_province = %s, complainant_district = %s, complainant_municipality = %s, complainant_village = %s, complainant_address = %s, complainant_phone_hash = %s, complainant_email_hash = %s, complainant_full_name_hash = %s WHERE complainant_id = %s
2025-09-18 13:27:36,679 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 13:27:36,684 - db_manager - INFO - Starting database transaction
2025-09-18 13:27:36,684 - db_manager - INFO - execute_update: Executing update query: UPDATE complainants SET complainant_full_name = %s, complainant_phone = %s, complainant_email = %s, ...
2025-09-18 13:27:36,685 - db_manager - INFO - execute_update: Update completed in 0.01s. Affected rows: 1
2025-09-18 13:27:36,687 - db_manager - INFO - Transaction committed successfully
2025-09-18 13:27:36,687 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 13:27:36,687 - db_manager - INFO - Complainant updated in db: CM-20250918-KOJH-5971-B
2025-09-18 13:27:36,687 - db_manager - INFO - update_grievance: Updating grievance with ID: GR-20250918-KOJH-6579-B
2025-09-18 13:27:36,688 - db_manager - DEBUG - execute_update values: ('dust everywhere in my house kids are coughing hard', 'GR-20250918-KOJH-6579-B')
2025-09-18 13:27:36,688 - db_manager - DEBUG - execute_update query: 
                    UPDATE grievances 
                    SET grievance_description = %s, grievance_modification_date = CURRENT_TIMESTAMP
                    WHERE grievance_id = %s
                    RETURNING grievance_id
                
2025-09-18 13:27:36,688 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 13:27:36,692 - db_manager - INFO - Starting database transaction
2025-09-18 13:27:36,693 - db_manager - INFO - execute_update: Executing update query: 
                    UPDATE grievances 
                    SET grievance_description = %s, grievanc...
2025-09-18 13:27:36,694 - db_manager - INFO - execute_update: Update completed in 0.01s. Affected rows: 1
2025-09-18 13:27:36,695 - db_manager - INFO - Transaction committed successfully
2025-09-18 13:27:36,696 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 13:27:36,696 - db_manager - INFO - update_grievance: Updated grievance with ID: GR-20250918-KOJH-6579-B, rows affected: 1
2025-09-18 13:27:36,696 - db_manager - INFO - Grievance updated in db: GR-20250918-KOJH-6579-B
2025-09-18 13:27:36,696 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 13:27:36,701 - db_manager - INFO - Starting database transaction
2025-09-18 13:27:36,701 - db_manager - INFO - Executing get_grievance_files: 
            SELECT file_id, file_name, file_type, file_size, upload_timestamp
            FROM file...
2025-09-18 13:27:36,702 - db_manager - INFO - get_grievance_files completed in 0.01s. Rows: 0
2025-09-18 13:27:36,702 - db_manager - INFO - Transaction committed successfully
2025-09-18 13:27:36,702 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 13:27:36,703 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 13:27:36,708 - db_manager - INFO - Starting database transaction
2025-09-18 13:27:36,708 - db_manager - INFO - Executing get_grievance_files: 
            SELECT file_id, file_name, file_type, file_size, upload_timestamp
            FROM file...
2025-09-18 13:27:36,709 - db_manager - INFO - get_grievance_files completed in 0.01s. Rows: 0
2025-09-18 13:27:36,710 - db_manager - INFO - Transaction committed successfully
2025-09-18 13:27:36,710 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 13:27:37,400 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 13:27:37,407 - db_manager - INFO - Starting database transaction
2025-09-18 13:27:37,407 - db_manager - INFO - Executing get_grievance_by_id: 
                SELECT g.*, c.complainant_full_name, c.complainant_phone, c.complainant_email,
    ...
2025-09-18 13:27:37,409 - db_manager - INFO - get_grievance_by_id completed in 0.01s. Rows: 1
2025-09-18 13:27:37,409 - db_manager - INFO - Transaction committed successfully
2025-09-18 13:27:37,409 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 13:27:37,409 - db_manager - DEBUG - get_grievance_by_id: grievance_id: {'grievance_id': 'GR-20250918-KOJH-6579-B', 'complainant_id': 'CM-20250918-KOJH-5971-B', 'grievance_categories': ['Environmental - Air Pollution'], 'grievance_categories_alternative': ['Environmental - Noise Pollution', 'Environmental - Drainage and Sewage Management'], 'follow_up_question': ['How many people are affected, can you list them?'], 'grievance_summary': 'Dust from the road works is spreading around the house and causing children to cough.', 'grievance_description': 'dust everywhere in my house kids are coughing hard', 'grievance_claimed_amount': None, 'grievance_location': None, 'language_code': 'en', 'grievance_classification_status': 'pending', 'grievance_creation_date': datetime.datetime(2025, 9, 18, 13, 27, 22, 119379, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'grievance_modification_date': datetime.datetime(2025, 9, 18, 13, 27, 36, 693143, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'is_temporary': True, 'source': 'bot', 'complainant_full_name': 'c30d040703023590ac85030f43e36fd23d010f92d1e7e81e323ca587bb7a8e87a12bede6764dd15aed20117319823d8e42a61e6484ffa9f3fa90484f8c466f70b7ab93cf31517f3b0d1276e838c5', 'complainant_phone': 'c30d04070302f89837dae355e96170d23d01f847c2cade48b797e1ab6d58d59b9925123fae00ac609188f7212b6362c0a536429c018f0991925bd148bbb73878c28756a916479b1448f2bef8b88e', 'complainant_email': 'c30d04070302ebf0097edf751c8b69d23d0114a214fd71c208b5ee4610ef6e72fc46558780e575f97c3cfc6bd57f12c7b53d6c79edc67bee01cbb91a1c5c1f585991875e81b2cfe030fb49fe2503', 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_municipality': 'Birtamod Municipality', 'complainant_ward': None, 'complainant_village': 'Slot_Skipped', 'complainant_address': 'c30d04070302ab8c739d52f8218b66d23d0139d9d62527126808ddf32600fa9610eef89e173a0f12044a42877c99a3316d3f54db76dec602d0544de4db0882f52340c1a2d5a3d91cb75d0b885e2a'}, results: [{'grievance_id': 'GR-20250918-KOJH-6579-B', 'complainant_id': 'CM-20250918-KOJH-5971-B', 'grievance_categories': '["Environmental - Air Pollution"]', 'grievance_categories_alternative': '["Environmental - Noise Pollution", "Environmental - Drainage and Sewage Management"]', 'follow_up_question': '["How many people are affected, can you list them?"]', 'grievance_summary': 'Dust from the road works is spreading around the house and causing children to cough.', 'grievance_description': 'dust everywhere in my house kids are coughing hard', 'grievance_claimed_amount': None, 'grievance_location': None, 'language_code': 'en', 'grievance_classification_status': 'pending', 'grievance_creation_date': datetime.datetime(2025, 9, 18, 13, 27, 22, 119379, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'grievance_modification_date': datetime.datetime(2025, 9, 18, 13, 27, 36, 693143, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'is_temporary': True, 'source': 'bot', 'complainant_full_name': 'c30d040703023590ac85030f43e36fd23d010f92d1e7e81e323ca587bb7a8e87a12bede6764dd15aed20117319823d8e42a61e6484ffa9f3fa90484f8c466f70b7ab93cf31517f3b0d1276e838c5', 'complainant_phone': 'c30d04070302f89837dae355e96170d23d01f847c2cade48b797e1ab6d58d59b9925123fae00ac609188f7212b6362c0a536429c018f0991925bd148bbb73878c28756a916479b1448f2bef8b88e', 'complainant_email': 'c30d04070302ebf0097edf751c8b69d23d0114a214fd71c208b5ee4610ef6e72fc46558780e575f97c3cfc6bd57f12c7b53d6c79edc67bee01cbb91a1c5c1f585991875e81b2cfe030fb49fe2503', 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_municipality': 'Birtamod Municipality', 'complainant_ward': None, 'complainant_village': 'Slot_Skipped', 'complainant_address': 'c30d04070302ab8c739d52f8218b66d23d0139d9d62527126808ddf32600fa9610eef89e173a0f12044a42877c99a3316d3f54db76dec602d0544de4db0882f52340c1a2d5a3d91cb75d0b885e2a'}]
2025-09-18 13:28:49,697 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 13:28:49,702 - db_manager - INFO - Starting database transaction
2025-09-18 13:28:49,703 - db_manager - INFO - Executing get_complainant_id_from_grievance_id: 
            SELECT complainant_id
            FROM grievances
            WHERE grievance_id = %s
 ...
2025-09-18 13:28:49,704 - db_manager - INFO - get_complainant_id_from_grievance_id completed in 0.01s. Rows: 1
2025-09-18 13:28:49,704 - db_manager - INFO - Transaction committed successfully
2025-09-18 13:28:49,704 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 13:28:49,704 - db_manager - INFO - update_complainant: Updating complainant with ID: CM-20250918-KOJH-5971-B
2025-09-18 13:28:49,704 - db_manager - DEBUG - encrypted and hashed data at encrypt_and_hash_sensitive_data: {}
2025-09-18 13:28:49,704 - db_manager - DEBUG - encrypted_data at update_complainant: {}
2025-09-18 13:28:49,704 - db_manager - DEBUG - No complainant field to update
2025-09-18 13:28:49,704 - db_manager - INFO - Complainant updated in db: GR-20250918-KOJH-6579-B
2025-09-18 13:28:49,704 - db_manager - INFO - update_grievance: Updating grievance with ID: GR-20250918-KOJH-6579-B
2025-09-18 13:28:49,704 - db_manager - DEBUG - execute_update values: ('["Environmental - Air Pollution"]', 'GR-20250918-KOJH-6579-B')
2025-09-18 13:28:49,704 - db_manager - DEBUG - execute_update query: 
                    UPDATE grievances 
                    SET grievance_categories = %s, grievance_modification_date = CURRENT_TIMESTAMP
                    WHERE grievance_id = %s
                    RETURNING grievance_id
                
2025-09-18 13:28:49,704 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 13:28:49,709 - db_manager - INFO - Starting database transaction
2025-09-18 13:28:49,709 - db_manager - INFO - execute_update: Executing update query: 
                    UPDATE grievances 
                    SET grievance_categories = %s, grievance...
2025-09-18 13:28:49,711 - db_manager - INFO - execute_update: Update completed in 0.01s. Affected rows: 1
2025-09-18 13:28:49,713 - db_manager - INFO - Transaction committed successfully
2025-09-18 13:28:49,713 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 13:28:49,713 - db_manager - INFO - update_grievance: Updated grievance with ID: GR-20250918-KOJH-6579-B, rows affected: 1
2025-09-18 13:28:49,713 - db_manager - INFO - Grievance updated in db: GR-20250918-KOJH-6579-B
2025-09-18 13:28:49,762 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 13:28:49,768 - db_manager - INFO - Starting database transaction
2025-09-18 13:28:49,768 - db_manager - INFO - Executing get_grievance_files: 
            SELECT file_id, file_name, file_type, file_size, upload_timestamp
            FROM file...
2025-09-18 13:28:49,770 - db_manager - INFO - get_grievance_files completed in 0.01s. Rows: 0
2025-09-18 13:28:49,770 - db_manager - INFO - Transaction committed successfully
2025-09-18 13:28:49,770 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 13:28:49,770 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 13:28:49,776 - db_manager - INFO - Starting database transaction
2025-09-18 13:28:49,776 - db_manager - INFO - Executing get_complainant_by_id: 
            SELECT complainant_id, complainant_unique_id, complainant_full_name,    complainant_pho...
2025-09-18 13:28:49,777 - db_manager - INFO - get_complainant_by_id completed in 0.01s. Rows: 1
2025-09-18 13:28:49,777 - db_manager - INFO - Transaction committed successfully
2025-09-18 13:28:49,777 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 13:28:49,777 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 13:28:49,782 - db_manager - INFO - Starting database transaction
2025-09-18 13:28:49,782 - db_manager - INFO - Executing decrypt_field: SELECT pgp_sym_decrypt(decode(%s, 'hex'), %s) AS decrypted...
2025-09-18 13:28:49,783 - db_manager - INFO - decrypt_field completed in 0.01s. Rows: 1
2025-09-18 13:28:49,784 - db_manager - INFO - Transaction committed successfully
2025-09-18 13:28:49,784 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 13:28:49,784 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 13:28:49,788 - db_manager - INFO - Starting database transaction
2025-09-18 13:28:49,789 - db_manager - INFO - Executing decrypt_field: SELECT pgp_sym_decrypt(decode(%s, 'hex'), %s) AS decrypted...
2025-09-18 13:28:49,789 - db_manager - INFO - decrypt_field completed in 0.01s. Rows: 1
2025-09-18 13:28:49,790 - db_manager - INFO - Transaction committed successfully
2025-09-18 13:28:49,790 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 13:28:49,790 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 13:28:49,795 - db_manager - INFO - Starting database transaction
2025-09-18 13:28:49,795 - db_manager - INFO - Executing decrypt_field: SELECT pgp_sym_decrypt(decode(%s, 'hex'), %s) AS decrypted...
2025-09-18 13:28:49,796 - db_manager - INFO - decrypt_field completed in 0.01s. Rows: 1
2025-09-18 13:28:49,796 - db_manager - INFO - Transaction committed successfully
2025-09-18 13:28:49,796 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 13:28:49,796 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 13:28:49,801 - db_manager - INFO - Starting database transaction
2025-09-18 13:28:49,801 - db_manager - INFO - Executing decrypt_field: SELECT pgp_sym_decrypt(decode(%s, 'hex'), %s) AS decrypted...
2025-09-18 13:28:49,802 - db_manager - INFO - decrypt_field completed in 0.01s. Rows: 1
2025-09-18 13:28:49,802 - db_manager - INFO - Transaction committed successfully
2025-09-18 13:28:49,802 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 13:28:49,803 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 13:28:49,808 - db_manager - INFO - Starting database transaction
2025-09-18 13:28:49,809 - db_manager - INFO - Executing get_grievance_by_id: 
                SELECT g.*, c.complainant_full_name, c.complainant_phone, c.complainant_email,
    ...
2025-09-18 13:28:49,810 - db_manager - INFO - get_grievance_by_id completed in 0.01s. Rows: 1
2025-09-18 13:28:49,810 - db_manager - INFO - Transaction committed successfully
2025-09-18 13:28:49,810 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 13:28:49,811 - db_manager - DEBUG - get_grievance_by_id: grievance_id: {'grievance_id': 'GR-20250918-KOJH-6579-B', 'complainant_id': 'CM-20250918-KOJH-5971-B', 'grievance_categories': ['Environmental - Air Pollution'], 'grievance_categories_alternative': ['Environmental - Noise Pollution', 'Environmental - Drainage and Sewage Management'], 'follow_up_question': ['How many people are affected, can you list them?'], 'grievance_summary': 'Dust from the road works is spreading around the house and causing children to cough.', 'grievance_description': 'dust everywhere in my house kids are coughing hard', 'grievance_claimed_amount': None, 'grievance_location': None, 'language_code': 'en', 'grievance_classification_status': 'pending', 'grievance_creation_date': datetime.datetime(2025, 9, 18, 13, 27, 22, 119379, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'grievance_modification_date': datetime.datetime(2025, 9, 18, 13, 28, 49, 710035, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'is_temporary': True, 'source': 'bot', 'complainant_full_name': 'c30d040703023590ac85030f43e36fd23d010f92d1e7e81e323ca587bb7a8e87a12bede6764dd15aed20117319823d8e42a61e6484ffa9f3fa90484f8c466f70b7ab93cf31517f3b0d1276e838c5', 'complainant_phone': 'c30d04070302f89837dae355e96170d23d01f847c2cade48b797e1ab6d58d59b9925123fae00ac609188f7212b6362c0a536429c018f0991925bd148bbb73878c28756a916479b1448f2bef8b88e', 'complainant_email': 'c30d04070302ebf0097edf751c8b69d23d0114a214fd71c208b5ee4610ef6e72fc46558780e575f97c3cfc6bd57f12c7b53d6c79edc67bee01cbb91a1c5c1f585991875e81b2cfe030fb49fe2503', 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_municipality': 'Birtamod Municipality', 'complainant_ward': None, 'complainant_village': 'Slot_Skipped', 'complainant_address': 'c30d04070302ab8c739d52f8218b66d23d0139d9d62527126808ddf32600fa9610eef89e173a0f12044a42877c99a3316d3f54db76dec602d0544de4db0882f52340c1a2d5a3d91cb75d0b885e2a'}, results: [{'grievance_id': 'GR-20250918-KOJH-6579-B', 'complainant_id': 'CM-20250918-KOJH-5971-B', 'grievance_categories': '["Environmental - Air Pollution"]', 'grievance_categories_alternative': '["Environmental - Noise Pollution", "Environmental - Drainage and Sewage Management"]', 'follow_up_question': '["How many people are affected, can you list them?"]', 'grievance_summary': 'Dust from the road works is spreading around the house and causing children to cough.', 'grievance_description': 'dust everywhere in my house kids are coughing hard', 'grievance_claimed_amount': None, 'grievance_location': None, 'language_code': 'en', 'grievance_classification_status': 'pending', 'grievance_creation_date': datetime.datetime(2025, 9, 18, 13, 27, 22, 119379, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'grievance_modification_date': datetime.datetime(2025, 9, 18, 13, 28, 49, 710035, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'is_temporary': True, 'source': 'bot', 'complainant_full_name': 'c30d040703023590ac85030f43e36fd23d010f92d1e7e81e323ca587bb7a8e87a12bede6764dd15aed20117319823d8e42a61e6484ffa9f3fa90484f8c466f70b7ab93cf31517f3b0d1276e838c5', 'complainant_phone': 'c30d04070302f89837dae355e96170d23d01f847c2cade48b797e1ab6d58d59b9925123fae00ac609188f7212b6362c0a536429c018f0991925bd148bbb73878c28756a916479b1448f2bef8b88e', 'complainant_email': 'c30d04070302ebf0097edf751c8b69d23d0114a214fd71c208b5ee4610ef6e72fc46558780e575f97c3cfc6bd57f12c7b53d6c79edc67bee01cbb91a1c5c1f585991875e81b2cfe030fb49fe2503', 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_municipality': 'Birtamod Municipality', 'complainant_ward': None, 'complainant_village': 'Slot_Skipped', 'complainant_address': 'c30d04070302ab8c739d52f8218b66d23d0139d9d62527126808ddf32600fa9610eef89e173a0f12044a42877c99a3316d3f54db76dec602d0544de4db0882f52340c1a2d5a3d91cb75d0b885e2a'}]
2025-09-18 13:28:49,811 - db_manager - INFO - update_complainant: Updating complainant with ID: CM-20250918-KOJH-5971-B
2025-09-18 13:28:49,811 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 13:28:49,816 - db_manager - INFO - Starting database transaction
2025-09-18 13:28:49,816 - db_manager - INFO - Executing encrypt_field: SELECT encode(pgp_sym_encrypt(%s, %s), 'hex') AS encrypted...
2025-09-18 13:28:49,817 - db_manager - INFO - encrypt_field completed in 0.01s. Rows: 1
2025-09-18 13:28:49,817 - db_manager - INFO - Transaction committed successfully
2025-09-18 13:28:49,817 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 13:28:49,818 - db_manager - DEBUG - encrypted phone number Not provided at encrypt_complainant_data: c30d040703027f99973b1be5be976ed23d01c2cba90b8fcd035f7088b0d0d5f0b83adb99e12f764acf5cd9ef83a30b761b7f508029a88ee4be16bce860eb275889c74ad0190ff3122d892e9d2c71
2025-09-18 13:28:49,818 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 13:28:49,822 - db_manager - INFO - Starting database transaction
2025-09-18 13:28:49,822 - db_manager - INFO - Executing encrypt_field: SELECT encode(pgp_sym_encrypt(%s, %s), 'hex') AS encrypted...
2025-09-18 13:28:49,823 - db_manager - INFO - encrypt_field completed in 0.01s. Rows: 1
2025-09-18 13:28:49,823 - db_manager - INFO - Transaction committed successfully
2025-09-18 13:28:49,823 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 13:28:49,824 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 13:28:49,828 - db_manager - INFO - Starting database transaction
2025-09-18 13:28:49,828 - db_manager - INFO - Executing encrypt_field: SELECT encode(pgp_sym_encrypt(%s, %s), 'hex') AS encrypted...
2025-09-18 13:28:49,829 - db_manager - INFO - encrypt_field completed in 0.01s. Rows: 1
2025-09-18 13:28:49,829 - db_manager - INFO - Transaction committed successfully
2025-09-18 13:28:49,829 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 13:28:49,829 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 13:28:49,834 - db_manager - INFO - Starting database transaction
2025-09-18 13:28:49,834 - db_manager - INFO - Executing encrypt_field: SELECT encode(pgp_sym_encrypt(%s, %s), 'hex') AS encrypted...
2025-09-18 13:28:49,835 - db_manager - INFO - encrypt_field completed in 0.01s. Rows: 1
2025-09-18 13:28:49,835 - db_manager - INFO - Transaction committed successfully
2025-09-18 13:28:49,835 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 13:28:49,835 - db_manager - DEBUG - phone number Not provided hashed to d83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f at hash_sensitive_data
2025-09-18 13:28:49,836 - db_manager - DEBUG - encrypted and hashed data at encrypt_and_hash_sensitive_data: {'complainant_full_name': 'c30d04070302287b129c123b9a2472d23d019d751bb07f0d41ebb84dbc8c8a48c7c4cdfc19c6d5dc795732bc9638b37301a6903f63d7ceb5fd6844f5da7ba423e4f2ba0704b14e6942e6ce4747fe', 'complainant_phone': 'c30d040703027f99973b1be5be976ed23d01c2cba90b8fcd035f7088b0d0d5f0b83adb99e12f764acf5cd9ef83a30b761b7f508029a88ee4be16bce860eb275889c74ad0190ff3122d892e9d2c71', 'complainant_email': 'c30d040703024467e8d08353306b7bd23d014555d51c2997120408917138bef5f5097a0313aadcf9427b2bbfd984c3cd2fadbc4d51f80eb1be69492c4ca48f44e8084fed34562a9311ff2ddc71f4', 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_municipality': 'Birtamod Municipality', 'complainant_village': 'Slot_Skipped', 'complainant_address': 'c30d04070302fc90ed945b63215b6ed23d01b527d21dfe50d29262ba06c4a9471a6ffc7d6868efd0a659b7281ce3fc14d18c4ea5c78b0e4aa23c92b6cb4253d6b9bc72d66e1a9f0b09da81c556fc', 'complainant_phone_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'complainant_email_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'complainant_full_name_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f'}
2025-09-18 13:28:49,836 - db_manager - DEBUG - encrypted_data at update_complainant: {'complainant_full_name': 'c30d04070302287b129c123b9a2472d23d019d751bb07f0d41ebb84dbc8c8a48c7c4cdfc19c6d5dc795732bc9638b37301a6903f63d7ceb5fd6844f5da7ba423e4f2ba0704b14e6942e6ce4747fe', 'complainant_phone': 'c30d040703027f99973b1be5be976ed23d01c2cba90b8fcd035f7088b0d0d5f0b83adb99e12f764acf5cd9ef83a30b761b7f508029a88ee4be16bce860eb275889c74ad0190ff3122d892e9d2c71', 'complainant_email': 'c30d040703024467e8d08353306b7bd23d014555d51c2997120408917138bef5f5097a0313aadcf9427b2bbfd984c3cd2fadbc4d51f80eb1be69492c4ca48f44e8084fed34562a9311ff2ddc71f4', 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_municipality': 'Birtamod Municipality', 'complainant_village': 'Slot_Skipped', 'complainant_address': 'c30d04070302fc90ed945b63215b6ed23d01b527d21dfe50d29262ba06c4a9471a6ffc7d6868efd0a659b7281ce3fc14d18c4ea5c78b0e4aa23c92b6cb4253d6b9bc72d66e1a9f0b09da81c556fc', 'complainant_phone_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'complainant_email_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'complainant_full_name_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f'}
2025-09-18 13:28:49,836 - db_manager - DEBUG - execute_update values: ('c30d04070302287b129c123b9a2472d23d019d751bb07f0d41ebb84dbc8c8a48c7c4cdfc19c6d5dc795732bc9638b37301a6903f63d7ceb5fd6844f5da7ba423e4f2ba0704b14e6942e6ce4747fe', 'c30d040703027f99973b1be5be976ed23d01c2cba90b8fcd035f7088b0d0d5f0b83adb99e12f764acf5cd9ef83a30b761b7f508029a88ee4be16bce860eb275889c74ad0190ff3122d892e9d2c71', 'c30d040703024467e8d08353306b7bd23d014555d51c2997120408917138bef5f5097a0313aadcf9427b2bbfd984c3cd2fadbc4d51f80eb1be69492c4ca48f44e8084fed34562a9311ff2ddc71f4', 'Koshi', 'Jhapa', 'Birtamod Municipality', 'Slot_Skipped', 'c30d04070302fc90ed945b63215b6ed23d01b527d21dfe50d29262ba06c4a9471a6ffc7d6868efd0a659b7281ce3fc14d18c4ea5c78b0e4aa23c92b6cb4253d6b9bc72d66e1a9f0b09da81c556fc', 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'CM-20250918-KOJH-5971-B')
2025-09-18 13:28:49,836 - db_manager - DEBUG - execute_update query: UPDATE complainants SET complainant_full_name = %s, complainant_phone = %s, complainant_email = %s, complainant_province = %s, complainant_district = %s, complainant_municipality = %s, complainant_village = %s, complainant_address = %s, complainant_phone_hash = %s, complainant_email_hash = %s, complainant_full_name_hash = %s WHERE complainant_id = %s
2025-09-18 13:28:49,836 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 13:28:49,840 - db_manager - INFO - Starting database transaction
2025-09-18 13:28:49,840 - db_manager - INFO - execute_update: Executing update query: UPDATE complainants SET complainant_full_name = %s, complainant_phone = %s, complainant_email = %s, ...
2025-09-18 13:28:49,841 - db_manager - INFO - execute_update: Update completed in 0.01s. Affected rows: 1
2025-09-18 13:28:49,843 - db_manager - INFO - Transaction committed successfully
2025-09-18 13:28:49,844 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 13:28:49,844 - db_manager - INFO - Complainant updated in db: CM-20250918-KOJH-5971-B
2025-09-18 13:28:49,844 - db_manager - INFO - update_grievance: Updating grievance with ID: GR-20250918-KOJH-6579-B
2025-09-18 13:28:49,844 - db_manager - DEBUG - execute_update values: ('["Environmental - Air Pollution"]', 'Not provided', 'dust everywhere in my house kids are coughing hard', 'GR-20250918-KOJH-6579-B')
2025-09-18 13:28:49,844 - db_manager - DEBUG - execute_update query: 
                    UPDATE grievances 
                    SET grievance_categories = %s, grievance_summary = %s, grievance_description = %s, grievance_modification_date = CURRENT_TIMESTAMP
                    WHERE grievance_id = %s
                    RETURNING grievance_id
                
2025-09-18 13:28:49,844 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 13:28:49,849 - db_manager - INFO - Starting database transaction
2025-09-18 13:28:49,849 - db_manager - INFO - execute_update: Executing update query: 
                    UPDATE grievances 
                    SET grievance_categories = %s, grievance...
2025-09-18 13:28:49,850 - db_manager - INFO - execute_update: Update completed in 0.01s. Affected rows: 1
2025-09-18 13:28:49,852 - db_manager - INFO - Transaction committed successfully
2025-09-18 13:28:49,852 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 13:28:49,852 - db_manager - INFO - update_grievance: Updated grievance with ID: GR-20250918-KOJH-6579-B, rows affected: 1
2025-09-18 13:28:49,852 - db_manager - INFO - Grievance updated in db: GR-20250918-KOJH-6579-B
2025-09-18 13:29:23,457 - db_manager - INFO - create_complainant: Creating complainant with ID: CM-20250918-KOJH-64D5-B
2025-09-18 13:29:23,457 - db_manager - DEBUG - encrypted and hashed data at encrypt_and_hash_sensitive_data: {'complainant_id': 'CM-20250918-KOJH-64D5-B', 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_unique_id': 'CM-20250918-KOJH-64D5-B'}
2025-09-18 13:29:23,457 - db_manager - DEBUG - query_keys at generate_query_string: dict_keys(['complainant_id', 'complainant_province', 'complainant_district', 'complainant_unique_id'])
2025-09-18 13:29:23,457 - db_manager - DEBUG - Generated query: INSERT INTO complainants (complainant_id, complainant_province, complainant_district, complainant_unique_id) VALUES (%s, %s, %s, %s)
2025-09-18 13:29:23,457 - db_manager - DEBUG - len of query_keys: 4
2025-09-18 13:29:23,457 - db_manager - DEBUG - Generated query: INSERT INTO complainants (complainant_id, complainant_province, complainant_district, complainant_unique_id) VALUES (%s, %s, %s, %s)
2025-09-18 13:29:23,457 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 13:29:23,465 - db_manager - INFO - Starting database transaction
2025-09-18 13:29:23,468 - db_manager - INFO - Transaction committed successfully
2025-09-18 13:29:23,468 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 13:29:23,468 - db_manager - INFO - create_complainant: Successfully created complainant with ID: CM-20250918-KOJH-64D5-B
2025-09-18 13:29:23,468 - db_manager - INFO - create_grievance: Creating grievance with data: {'grievance_id': 'GR-20250918-KOJH-F59E-B', 'complainant_id': 'CM-20250918-KOJH-64D5-B', 'grievance_description': 'dust everywhere in my house kids are coughing hard', 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_office': None, 'source': 'bot', 'complainant_unique_id': 'CM-20250918-KOJH-64D5-B'}
2025-09-18 13:29:23,468 - db_manager - INFO - create_grievance: Creating grievance with ID: GR-20250918-KOJH-F59E-B
2025-09-18 13:29:23,468 - db_manager - INFO - create_grievance: Creating grievance with allowed fields: ['grievance_id', 'complainant_id', 'grievance_categories', 'grievance_categories_alternative', 'follow_up_question', 'grievance_summary', 'grievance_description', 'grievance_claimed_amount', 'grievance_location', 'is_temporary', 'source', 'language_code', 'grievance_classification_status']
2025-09-18 13:29:23,468 - db_manager - DEBUG - query_keys at generate_query_string: dict_keys(['grievance_id', 'complainant_id', 'grievance_description', 'source'])
2025-09-18 13:29:23,468 - db_manager - DEBUG - Generated query: INSERT INTO grievances (grievance_id, complainant_id, grievance_description, source) VALUES (%s, %s, %s, %s) RETURNING grievance_id
2025-09-18 13:29:23,468 - db_manager - DEBUG - len of query_keys: 4
2025-09-18 13:29:23,468 - db_manager - DEBUG - Generated query: INSERT INTO grievances (grievance_id, complainant_id, grievance_description, source) VALUES (%s, %s, %s, %s) RETURNING grievance_id
2025-09-18 13:29:23,468 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 13:29:23,474 - db_manager - INFO - Starting database transaction
2025-09-18 13:29:23,479 - db_manager - INFO - Transaction committed successfully
2025-09-18 13:29:23,479 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 13:29:23,479 - db_manager - INFO - create_grievance: Successfully created grievance with ID: GR-20250918-KOJH-F59E-B
2025-09-18 13:29:42,189 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 13:29:42,194 - db_manager - INFO - Starting database transaction
2025-09-18 13:29:42,195 - db_manager - INFO - Executing get_complainant_by_id: 
            SELECT complainant_id, complainant_unique_id, complainant_full_name,    complainant_pho...
2025-09-18 13:29:42,196 - db_manager - INFO - get_complainant_by_id completed in 0.01s. Rows: 1
2025-09-18 13:29:42,196 - db_manager - INFO - Transaction committed successfully
2025-09-18 13:29:42,197 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 13:29:42,197 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 13:29:42,202 - db_manager - INFO - Starting database transaction
2025-09-18 13:29:42,202 - db_manager - INFO - Executing get_grievance_by_id: 
                SELECT g.*, c.complainant_full_name, c.complainant_phone, c.complainant_email,
    ...
2025-09-18 13:29:42,204 - db_manager - INFO - get_grievance_by_id completed in 0.01s. Rows: 1
2025-09-18 13:29:42,204 - db_manager - INFO - Transaction committed successfully
2025-09-18 13:29:42,204 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 13:29:42,204 - db_manager - DEBUG - get_grievance_by_id: grievance_id: {'grievance_id': 'GR-20250918-KOJH-F59E-B', 'complainant_id': 'CM-20250918-KOJH-64D5-B', 'grievance_categories': ['Environmental - Air Pollution'], 'grievance_categories_alternative': ['Environmental - Noise Pollution', 'Environmental - Drainage and Sewage Management'], 'follow_up_question': ['How many people in your household are affected by the dust, and for how long has this been happening? Have you or your children experienced any health issues such as coughing or breathing problems because of the dust?'], 'grievance_summary': 'Dust from road works is spreading into the house, causing children to cough a lot.', 'grievance_description': 'dust everywhere in my house kids are coughing hard', 'grievance_claimed_amount': None, 'grievance_location': None, 'language_code': 'en', 'grievance_classification_status': 'pending', 'grievance_creation_date': datetime.datetime(2025, 9, 18, 13, 29, 23, 475232, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'grievance_modification_date': datetime.datetime(2025, 9, 18, 13, 29, 35, 991299, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'is_temporary': True, 'source': 'bot', 'complainant_full_name': None, 'complainant_phone': None, 'complainant_email': None, 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_municipality': None, 'complainant_ward': None, 'complainant_village': None, 'complainant_address': None}, results: [{'grievance_id': 'GR-20250918-KOJH-F59E-B', 'complainant_id': 'CM-20250918-KOJH-64D5-B', 'grievance_categories': '["Environmental - Air Pollution"]', 'grievance_categories_alternative': '["Environmental - Noise Pollution", "Environmental - Drainage and Sewage Management"]', 'follow_up_question': '["How many people in your household are affected by the dust, and for how long has this been happening? Have you or your children experienced any health issues such as coughing or breathing problems because of the dust?"]', 'grievance_summary': 'Dust from road works is spreading into the house, causing children to cough a lot.', 'grievance_description': 'dust everywhere in my house kids are coughing hard', 'grievance_claimed_amount': None, 'grievance_location': None, 'language_code': 'en', 'grievance_classification_status': 'pending', 'grievance_creation_date': datetime.datetime(2025, 9, 18, 13, 29, 23, 475232, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'grievance_modification_date': datetime.datetime(2025, 9, 18, 13, 29, 35, 991299, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'is_temporary': True, 'source': 'bot', 'complainant_full_name': None, 'complainant_phone': None, 'complainant_email': None, 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_municipality': None, 'complainant_ward': None, 'complainant_village': None, 'complainant_address': None}]
2025-09-18 13:29:42,204 - db_manager - INFO - update_complainant: Updating complainant with ID: CM-20250918-KOJH-64D5-B
2025-09-18 13:29:42,204 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 13:29:42,209 - db_manager - INFO - Starting database transaction
2025-09-18 13:29:42,210 - db_manager - INFO - Executing encrypt_field: SELECT encode(pgp_sym_encrypt(%s, %s), 'hex') AS encrypted...
2025-09-18 13:29:42,212 - db_manager - INFO - encrypt_field completed in 0.01s. Rows: 1
2025-09-18 13:29:42,213 - db_manager - INFO - Transaction committed successfully
2025-09-18 13:29:42,213 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 13:29:42,213 - db_manager - DEBUG - encrypted phone number Not provided at encrypt_complainant_data: c30d0407030273591037a4167fe875d23d01dec896a5ead22dd7b529905fe8e9e33742c99ac378d72499c273ed47d3895e1a5f86fc05dd5a89830bf10c146621ba3ae2e7093d159a8eaa945fe42e
2025-09-18 13:29:42,213 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 13:29:42,218 - db_manager - INFO - Starting database transaction
2025-09-18 13:29:42,219 - db_manager - INFO - Executing encrypt_field: SELECT encode(pgp_sym_encrypt(%s, %s), 'hex') AS encrypted...
2025-09-18 13:29:42,220 - db_manager - INFO - encrypt_field completed in 0.01s. Rows: 1
2025-09-18 13:29:42,220 - db_manager - INFO - Transaction committed successfully
2025-09-18 13:29:42,220 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 13:29:42,220 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 13:29:42,227 - db_manager - INFO - Starting database transaction
2025-09-18 13:29:42,227 - db_manager - INFO - Executing encrypt_field: SELECT encode(pgp_sym_encrypt(%s, %s), 'hex') AS encrypted...
2025-09-18 13:29:42,228 - db_manager - INFO - encrypt_field completed in 0.01s. Rows: 1
2025-09-18 13:29:42,228 - db_manager - INFO - Transaction committed successfully
2025-09-18 13:29:42,229 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 13:29:42,229 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 13:29:42,235 - db_manager - INFO - Starting database transaction
2025-09-18 13:29:42,236 - db_manager - INFO - Executing encrypt_field: SELECT encode(pgp_sym_encrypt(%s, %s), 'hex') AS encrypted...
2025-09-18 13:29:42,237 - db_manager - INFO - encrypt_field completed in 0.01s. Rows: 1
2025-09-18 13:29:42,237 - db_manager - INFO - Transaction committed successfully
2025-09-18 13:29:42,237 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 13:29:42,238 - db_manager - DEBUG - phone number Not provided hashed to d83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f at hash_sensitive_data
2025-09-18 13:29:42,238 - db_manager - DEBUG - encrypted and hashed data at encrypt_and_hash_sensitive_data: {'complainant_full_name': 'c30d04070302b90599a209637fca62d23d019b17f2a6dc147b7843470328fcc0b7f0dd0f8c0634bc03872e2790c65b75aeebeb249ee97667142e2e7331e18f8c55fc9295237a94db8c31cbae5415', 'complainant_phone': 'c30d0407030273591037a4167fe875d23d01dec896a5ead22dd7b529905fe8e9e33742c99ac378d72499c273ed47d3895e1a5f86fc05dd5a89830bf10c146621ba3ae2e7093d159a8eaa945fe42e', 'complainant_email': 'c30d040703021b161f846762fd2a72d23d0141f7cce2d233077c9e2b56275f9709f120ebb348c08de57d4425fd7ae3aabdb72ad6a36acb10fe8a26a06332131555823f343bf043dd946e5455ab61', 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_municipality': 'Birtamod Municipality', 'complainant_village': 'Slot_Skipped', 'complainant_address': 'c30d0407030252f2fc3359f501e779d23d01286b75a5a64afbcf00af9c34253c27fea0663e5965a9ff48d0cfd55026e669e8184aa2ed1d494823a1423e5ab26fe8118ec961e441891936ab7f0f18', 'complainant_phone_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'complainant_email_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'complainant_full_name_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f'}
2025-09-18 13:29:42,238 - db_manager - DEBUG - encrypted_data at update_complainant: {'complainant_full_name': 'c30d04070302b90599a209637fca62d23d019b17f2a6dc147b7843470328fcc0b7f0dd0f8c0634bc03872e2790c65b75aeebeb249ee97667142e2e7331e18f8c55fc9295237a94db8c31cbae5415', 'complainant_phone': 'c30d0407030273591037a4167fe875d23d01dec896a5ead22dd7b529905fe8e9e33742c99ac378d72499c273ed47d3895e1a5f86fc05dd5a89830bf10c146621ba3ae2e7093d159a8eaa945fe42e', 'complainant_email': 'c30d040703021b161f846762fd2a72d23d0141f7cce2d233077c9e2b56275f9709f120ebb348c08de57d4425fd7ae3aabdb72ad6a36acb10fe8a26a06332131555823f343bf043dd946e5455ab61', 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_municipality': 'Birtamod Municipality', 'complainant_village': 'Slot_Skipped', 'complainant_address': 'c30d0407030252f2fc3359f501e779d23d01286b75a5a64afbcf00af9c34253c27fea0663e5965a9ff48d0cfd55026e669e8184aa2ed1d494823a1423e5ab26fe8118ec961e441891936ab7f0f18', 'complainant_phone_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'complainant_email_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'complainant_full_name_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f'}
2025-09-18 13:29:42,238 - db_manager - DEBUG - execute_update values: ('c30d04070302b90599a209637fca62d23d019b17f2a6dc147b7843470328fcc0b7f0dd0f8c0634bc03872e2790c65b75aeebeb249ee97667142e2e7331e18f8c55fc9295237a94db8c31cbae5415', 'c30d0407030273591037a4167fe875d23d01dec896a5ead22dd7b529905fe8e9e33742c99ac378d72499c273ed47d3895e1a5f86fc05dd5a89830bf10c146621ba3ae2e7093d159a8eaa945fe42e', 'c30d040703021b161f846762fd2a72d23d0141f7cce2d233077c9e2b56275f9709f120ebb348c08de57d4425fd7ae3aabdb72ad6a36acb10fe8a26a06332131555823f343bf043dd946e5455ab61', 'Koshi', 'Jhapa', 'Birtamod Municipality', 'Slot_Skipped', 'c30d0407030252f2fc3359f501e779d23d01286b75a5a64afbcf00af9c34253c27fea0663e5965a9ff48d0cfd55026e669e8184aa2ed1d494823a1423e5ab26fe8118ec961e441891936ab7f0f18', 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'CM-20250918-KOJH-64D5-B')
2025-09-18 13:29:42,238 - db_manager - DEBUG - execute_update query: UPDATE complainants SET complainant_full_name = %s, complainant_phone = %s, complainant_email = %s, complainant_province = %s, complainant_district = %s, complainant_municipality = %s, complainant_village = %s, complainant_address = %s, complainant_phone_hash = %s, complainant_email_hash = %s, complainant_full_name_hash = %s WHERE complainant_id = %s
2025-09-18 13:29:42,238 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 13:29:42,245 - db_manager - INFO - Starting database transaction
2025-09-18 13:29:42,245 - db_manager - INFO - execute_update: Executing update query: UPDATE complainants SET complainant_full_name = %s, complainant_phone = %s, complainant_email = %s, ...
2025-09-18 13:29:42,246 - db_manager - INFO - execute_update: Update completed in 0.01s. Affected rows: 1
2025-09-18 13:29:42,248 - db_manager - INFO - Transaction committed successfully
2025-09-18 13:29:42,248 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 13:29:42,248 - db_manager - INFO - Complainant updated in db: CM-20250918-KOJH-64D5-B
2025-09-18 13:29:42,248 - db_manager - INFO - update_grievance: Updating grievance with ID: GR-20250918-KOJH-F59E-B
2025-09-18 13:29:42,248 - db_manager - DEBUG - execute_update values: ('dust everywhere in my house kids are coughing hard', 'GR-20250918-KOJH-F59E-B')
2025-09-18 13:29:42,248 - db_manager - DEBUG - execute_update query: 
                    UPDATE grievances 
                    SET grievance_description = %s, grievance_modification_date = CURRENT_TIMESTAMP
                    WHERE grievance_id = %s
                    RETURNING grievance_id
                
2025-09-18 13:29:42,249 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 13:29:42,254 - db_manager - INFO - Starting database transaction
2025-09-18 13:29:42,254 - db_manager - INFO - execute_update: Executing update query: 
                    UPDATE grievances 
                    SET grievance_description = %s, grievanc...
2025-09-18 13:29:42,255 - db_manager - INFO - execute_update: Update completed in 0.01s. Affected rows: 1
2025-09-18 13:29:42,258 - db_manager - INFO - Transaction committed successfully
2025-09-18 13:29:42,258 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 13:29:42,258 - db_manager - INFO - update_grievance: Updated grievance with ID: GR-20250918-KOJH-F59E-B, rows affected: 1
2025-09-18 13:29:42,258 - db_manager - INFO - Grievance updated in db: GR-20250918-KOJH-F59E-B
2025-09-18 13:29:42,258 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 13:29:42,263 - db_manager - INFO - Starting database transaction
2025-09-18 13:29:42,264 - db_manager - INFO - Executing get_grievance_files: 
            SELECT file_id, file_name, file_type, file_size, upload_timestamp
            FROM file...
2025-09-18 13:29:42,265 - db_manager - INFO - get_grievance_files completed in 0.01s. Rows: 0
2025-09-18 13:29:42,265 - db_manager - INFO - Transaction committed successfully
2025-09-18 13:29:42,265 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 13:29:42,265 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 13:29:42,270 - db_manager - INFO - Starting database transaction
2025-09-18 13:29:42,271 - db_manager - INFO - Executing get_grievance_files: 
            SELECT file_id, file_name, file_type, file_size, upload_timestamp
            FROM file...
2025-09-18 13:29:42,272 - db_manager - INFO - get_grievance_files completed in 0.01s. Rows: 0
2025-09-18 13:29:42,272 - db_manager - INFO - Transaction committed successfully
2025-09-18 13:29:42,272 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 13:29:42,724 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 13:29:42,730 - db_manager - INFO - Starting database transaction
2025-09-18 13:29:42,731 - db_manager - INFO - Executing get_grievance_by_id: 
                SELECT g.*, c.complainant_full_name, c.complainant_phone, c.complainant_email,
    ...
2025-09-18 13:29:42,732 - db_manager - INFO - get_grievance_by_id completed in 0.01s. Rows: 1
2025-09-18 13:29:42,732 - db_manager - INFO - Transaction committed successfully
2025-09-18 13:29:42,732 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 13:29:42,733 - db_manager - DEBUG - get_grievance_by_id: grievance_id: {'grievance_id': 'GR-20250918-KOJH-F59E-B', 'complainant_id': 'CM-20250918-KOJH-64D5-B', 'grievance_categories': ['Environmental - Air Pollution'], 'grievance_categories_alternative': ['Environmental - Noise Pollution', 'Environmental - Drainage and Sewage Management'], 'follow_up_question': ['How many people in your household are affected by the dust, and for how long has this been happening? Have you or your children experienced any health issues such as coughing or breathing problems because of the dust?'], 'grievance_summary': 'Dust from road works is spreading into the house, causing children to cough a lot.', 'grievance_description': 'dust everywhere in my house kids are coughing hard', 'grievance_claimed_amount': None, 'grievance_location': None, 'language_code': 'en', 'grievance_classification_status': 'pending', 'grievance_creation_date': datetime.datetime(2025, 9, 18, 13, 29, 23, 475232, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'grievance_modification_date': datetime.datetime(2025, 9, 18, 13, 29, 42, 254596, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'is_temporary': True, 'source': 'bot', 'complainant_full_name': 'c30d04070302b90599a209637fca62d23d019b17f2a6dc147b7843470328fcc0b7f0dd0f8c0634bc03872e2790c65b75aeebeb249ee97667142e2e7331e18f8c55fc9295237a94db8c31cbae5415', 'complainant_phone': 'c30d0407030273591037a4167fe875d23d01dec896a5ead22dd7b529905fe8e9e33742c99ac378d72499c273ed47d3895e1a5f86fc05dd5a89830bf10c146621ba3ae2e7093d159a8eaa945fe42e', 'complainant_email': 'c30d040703021b161f846762fd2a72d23d0141f7cce2d233077c9e2b56275f9709f120ebb348c08de57d4425fd7ae3aabdb72ad6a36acb10fe8a26a06332131555823f343bf043dd946e5455ab61', 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_municipality': 'Birtamod Municipality', 'complainant_ward': None, 'complainant_village': 'Slot_Skipped', 'complainant_address': 'c30d0407030252f2fc3359f501e779d23d01286b75a5a64afbcf00af9c34253c27fea0663e5965a9ff48d0cfd55026e669e8184aa2ed1d494823a1423e5ab26fe8118ec961e441891936ab7f0f18'}, results: [{'grievance_id': 'GR-20250918-KOJH-F59E-B', 'complainant_id': 'CM-20250918-KOJH-64D5-B', 'grievance_categories': '["Environmental - Air Pollution"]', 'grievance_categories_alternative': '["Environmental - Noise Pollution", "Environmental - Drainage and Sewage Management"]', 'follow_up_question': '["How many people in your household are affected by the dust, and for how long has this been happening? Have you or your children experienced any health issues such as coughing or breathing problems because of the dust?"]', 'grievance_summary': 'Dust from road works is spreading into the house, causing children to cough a lot.', 'grievance_description': 'dust everywhere in my house kids are coughing hard', 'grievance_claimed_amount': None, 'grievance_location': None, 'language_code': 'en', 'grievance_classification_status': 'pending', 'grievance_creation_date': datetime.datetime(2025, 9, 18, 13, 29, 23, 475232, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'grievance_modification_date': datetime.datetime(2025, 9, 18, 13, 29, 42, 254596, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'is_temporary': True, 'source': 'bot', 'complainant_full_name': 'c30d04070302b90599a209637fca62d23d019b17f2a6dc147b7843470328fcc0b7f0dd0f8c0634bc03872e2790c65b75aeebeb249ee97667142e2e7331e18f8c55fc9295237a94db8c31cbae5415', 'complainant_phone': 'c30d0407030273591037a4167fe875d23d01dec896a5ead22dd7b529905fe8e9e33742c99ac378d72499c273ed47d3895e1a5f86fc05dd5a89830bf10c146621ba3ae2e7093d159a8eaa945fe42e', 'complainant_email': 'c30d040703021b161f846762fd2a72d23d0141f7cce2d233077c9e2b56275f9709f120ebb348c08de57d4425fd7ae3aabdb72ad6a36acb10fe8a26a06332131555823f343bf043dd946e5455ab61', 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_municipality': 'Birtamod Municipality', 'complainant_ward': None, 'complainant_village': 'Slot_Skipped', 'complainant_address': 'c30d0407030252f2fc3359f501e779d23d01286b75a5a64afbcf00af9c34253c27fea0663e5965a9ff48d0cfd55026e669e8184aa2ed1d494823a1423e5ab26fe8118ec961e441891936ab7f0f18'}]
2025-09-18 13:43:41,876 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-18 13:43:41,876 - db_manager - INFO - Database manager initialized successfully
2025-09-18 13:43:41,876 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-18 13:43:41,877 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-18 13:43:41,877 - db_manager - INFO - Database manager initialized successfully
2025-09-18 13:43:41,877 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-18 13:43:41,877 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-18 13:43:41,877 - db_manager - INFO - Database manager initialized successfully
2025-09-18 13:43:41,877 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-18 13:43:41,877 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-18 13:43:41,877 - db_manager - INFO - Database manager initialized successfully
2025-09-18 13:43:41,877 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-18 13:43:41,877 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-18 13:43:41,877 - db_manager - INFO - Database manager initialized successfully
2025-09-18 13:43:41,877 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-18 13:43:41,877 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-18 13:43:41,877 - db_manager - INFO - Database manager initialized successfully
2025-09-18 13:43:41,877 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-18 13:43:41,877 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-18 13:43:41,877 - db_manager - INFO - Database manager initialized successfully
2025-09-18 13:43:41,877 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-18 13:43:41,877 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-18 13:43:41,877 - db_manager - INFO - Database manager initialized successfully
2025-09-18 13:43:41,878 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-18 13:43:41,878 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-18 13:43:41,878 - db_manager - INFO - Database manager initialized successfully
2025-09-18 13:43:41,878 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-18 13:43:41,878 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-18 13:43:41,878 - db_manager - INFO - Database manager initialized successfully
2025-09-18 13:43:41,878 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-18 13:44:26,527 - db_manager - INFO - create_complainant: Creating complainant with ID: CM-20250918-KOJH-FA47-B
2025-09-18 13:44:26,527 - db_manager - DEBUG - encrypted and hashed data at encrypt_and_hash_sensitive_data: {'complainant_id': 'CM-20250918-KOJH-FA47-B', 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_unique_id': 'CM-20250918-KOJH-FA47-B'}
2025-09-18 13:44:26,527 - db_manager - DEBUG - query_keys at generate_query_string: dict_keys(['complainant_id', 'complainant_province', 'complainant_district', 'complainant_unique_id'])
2025-09-18 13:44:26,527 - db_manager - DEBUG - Generated query: INSERT INTO complainants (complainant_id, complainant_province, complainant_district, complainant_unique_id) VALUES (%s, %s, %s, %s)
2025-09-18 13:44:26,528 - db_manager - DEBUG - len of query_keys: 4
2025-09-18 13:44:26,528 - db_manager - DEBUG - Generated query: INSERT INTO complainants (complainant_id, complainant_province, complainant_district, complainant_unique_id) VALUES (%s, %s, %s, %s)
2025-09-18 13:44:26,528 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 13:44:26,536 - db_manager - INFO - Starting database transaction
2025-09-18 13:44:26,538 - db_manager - INFO - Transaction committed successfully
2025-09-18 13:44:26,539 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 13:44:26,539 - db_manager - INFO - create_complainant: Successfully created complainant with ID: CM-20250918-KOJH-FA47-B
2025-09-18 13:44:26,539 - db_manager - INFO - create_grievance: Creating grievance with data: {'grievance_id': 'GR-20250918-KOJH-F5F9-B', 'complainant_id': 'CM-20250918-KOJH-FA47-B', 'grievance_description': 'dust everywhere in my house kids are coughing hard', 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_office': None, 'source': 'bot', 'complainant_unique_id': 'CM-20250918-KOJH-FA47-B'}
2025-09-18 13:44:26,539 - db_manager - INFO - create_grievance: Creating grievance with ID: GR-20250918-KOJH-F5F9-B
2025-09-18 13:44:26,539 - db_manager - INFO - create_grievance: Creating grievance with allowed fields: ['grievance_id', 'complainant_id', 'grievance_categories', 'grievance_categories_alternative', 'follow_up_question', 'grievance_summary', 'grievance_description', 'grievance_claimed_amount', 'grievance_location', 'is_temporary', 'source', 'language_code', 'grievance_classification_status']
2025-09-18 13:44:26,539 - db_manager - DEBUG - query_keys at generate_query_string: dict_keys(['grievance_id', 'complainant_id', 'grievance_description', 'source'])
2025-09-18 13:44:26,539 - db_manager - DEBUG - Generated query: INSERT INTO grievances (grievance_id, complainant_id, grievance_description, source) VALUES (%s, %s, %s, %s) RETURNING grievance_id
2025-09-18 13:44:26,539 - db_manager - DEBUG - len of query_keys: 4
2025-09-18 13:44:26,539 - db_manager - DEBUG - Generated query: INSERT INTO grievances (grievance_id, complainant_id, grievance_description, source) VALUES (%s, %s, %s, %s) RETURNING grievance_id
2025-09-18 13:44:26,539 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 13:44:26,545 - db_manager - INFO - Starting database transaction
2025-09-18 13:44:26,551 - db_manager - INFO - Transaction committed successfully
2025-09-18 13:44:26,551 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 13:44:26,552 - db_manager - INFO - create_grievance: Successfully created grievance with ID: GR-20250918-KOJH-F5F9-B
2025-09-18 13:44:48,167 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 13:44:48,173 - db_manager - INFO - Starting database transaction
2025-09-18 13:44:48,174 - db_manager - INFO - Executing get_complainant_by_id: 
            SELECT complainant_id, complainant_unique_id, complainant_full_name,    complainant_pho...
2025-09-18 13:44:48,175 - db_manager - INFO - get_complainant_by_id completed in 0.01s. Rows: 1
2025-09-18 13:44:48,175 - db_manager - INFO - Transaction committed successfully
2025-09-18 13:44:48,175 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 13:44:48,175 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 13:44:48,183 - db_manager - INFO - Starting database transaction
2025-09-18 13:44:48,183 - db_manager - INFO - Executing get_grievance_by_id: 
                SELECT g.*, c.complainant_full_name, c.complainant_phone, c.complainant_email,
    ...
2025-09-18 13:44:48,185 - db_manager - INFO - get_grievance_by_id completed in 0.01s. Rows: 1
2025-09-18 13:44:48,185 - db_manager - INFO - Transaction committed successfully
2025-09-18 13:44:48,185 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 13:44:48,186 - db_manager - DEBUG - get_grievance_by_id: grievance_id: {'grievance_id': 'GR-20250918-KOJH-F5F9-B', 'complainant_id': 'CM-20250918-KOJH-FA47-B', 'grievance_categories': ['Environmental - Air Pollution'], 'grievance_categories_alternative': [], 'follow_up_question': ['How many people in your household are affected by dust and coughing, and for how long has this been happening?'], 'grievance_summary': 'Dust from construction is covering my house and my kids are coughing a lot.', 'grievance_description': 'dust everywhere in my house kids are coughing hard', 'grievance_claimed_amount': None, 'grievance_location': None, 'language_code': 'en', 'grievance_classification_status': 'pending', 'grievance_creation_date': datetime.datetime(2025, 9, 18, 13, 44, 26, 546108, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'grievance_modification_date': datetime.datetime(2025, 9, 18, 13, 44, 36, 809125, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'is_temporary': True, 'source': 'bot', 'complainant_full_name': None, 'complainant_phone': None, 'complainant_email': None, 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_municipality': None, 'complainant_ward': None, 'complainant_village': None, 'complainant_address': None}, results: [{'grievance_id': 'GR-20250918-KOJH-F5F9-B', 'complainant_id': 'CM-20250918-KOJH-FA47-B', 'grievance_categories': '["Environmental - Air Pollution"]', 'grievance_categories_alternative': '[]', 'follow_up_question': '["How many people in your household are affected by dust and coughing, and for how long has this been happening?"]', 'grievance_summary': 'Dust from construction is covering my house and my kids are coughing a lot.', 'grievance_description': 'dust everywhere in my house kids are coughing hard', 'grievance_claimed_amount': None, 'grievance_location': None, 'language_code': 'en', 'grievance_classification_status': 'pending', 'grievance_creation_date': datetime.datetime(2025, 9, 18, 13, 44, 26, 546108, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'grievance_modification_date': datetime.datetime(2025, 9, 18, 13, 44, 36, 809125, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'is_temporary': True, 'source': 'bot', 'complainant_full_name': None, 'complainant_phone': None, 'complainant_email': None, 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_municipality': None, 'complainant_ward': None, 'complainant_village': None, 'complainant_address': None}]
2025-09-18 13:44:48,186 - db_manager - INFO - update_complainant: Updating complainant with ID: CM-20250918-KOJH-FA47-B
2025-09-18 13:44:48,186 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 13:44:48,192 - db_manager - INFO - Starting database transaction
2025-09-18 13:44:48,192 - db_manager - INFO - Executing encrypt_field: SELECT encode(pgp_sym_encrypt(%s, %s), 'hex') AS encrypted...
2025-09-18 13:44:48,195 - db_manager - INFO - encrypt_field completed in 0.01s. Rows: 1
2025-09-18 13:44:48,195 - db_manager - INFO - Transaction committed successfully
2025-09-18 13:44:48,195 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 13:44:48,195 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 13:44:48,201 - db_manager - INFO - Starting database transaction
2025-09-18 13:44:48,201 - db_manager - INFO - Executing encrypt_field: SELECT encode(pgp_sym_encrypt(%s, %s), 'hex') AS encrypted...
2025-09-18 13:44:48,202 - db_manager - INFO - encrypt_field completed in 0.01s. Rows: 1
2025-09-18 13:44:48,203 - db_manager - INFO - Transaction committed successfully
2025-09-18 13:44:48,203 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 13:44:48,203 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 13:44:48,208 - db_manager - INFO - Starting database transaction
2025-09-18 13:44:48,209 - db_manager - INFO - Executing encrypt_field: SELECT encode(pgp_sym_encrypt(%s, %s), 'hex') AS encrypted...
2025-09-18 13:44:48,210 - db_manager - INFO - encrypt_field completed in 0.01s. Rows: 1
2025-09-18 13:44:48,210 - db_manager - INFO - Transaction committed successfully
2025-09-18 13:44:48,210 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 13:44:48,210 - db_manager - DEBUG - encrypted phone number Not provided at encrypt_complainant_data: c30d04070302a054114bd8ba8f1d6ed23d01f25064218b29af38ef41543ebbf5fa06f69a9228be039e37ec0723afa4a32672eceb40e93a77efd4bb87d0205df1517030f3d6b3e0d65e2f493afba7
2025-09-18 13:44:48,210 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 13:44:48,216 - db_manager - INFO - Starting database transaction
2025-09-18 13:44:48,216 - db_manager - INFO - Executing encrypt_field: SELECT encode(pgp_sym_encrypt(%s, %s), 'hex') AS encrypted...
2025-09-18 13:44:48,217 - db_manager - INFO - encrypt_field completed in 0.01s. Rows: 1
2025-09-18 13:44:48,217 - db_manager - INFO - Transaction committed successfully
2025-09-18 13:44:48,217 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 13:44:48,217 - db_manager - DEBUG - phone number Not provided hashed to d83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f at hash_sensitive_data
2025-09-18 13:44:48,218 - db_manager - DEBUG - encrypted and hashed data at encrypt_and_hash_sensitive_data: {'complainant_full_name': 'c30d04070302e98489899f1d128e63d23d01812f23cf145b5f0a7be052e2c76009d139d8be3f70b97b2a9e3f0c6adf1df879aa2802345e58f97025486cebc1f51c69f167cd294cdacbdfbef82a6b', 'complainant_phone': 'c30d04070302a054114bd8ba8f1d6ed23d01f25064218b29af38ef41543ebbf5fa06f69a9228be039e37ec0723afa4a32672eceb40e93a77efd4bb87d0205df1517030f3d6b3e0d65e2f493afba7', 'complainant_email': 'c30d0407030223235ccb35a80a957fd23d01dd8ef18d9fd48579a3c549dc2caba29d3edca13d5820ef7d787f5184e8d4b69cc1832c3a1069529e5bc12d97feb0e34c1f7e35c3097f45b9f1d415f6', 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_municipality': 'Birtamod Municipality', 'complainant_village': 'Slot_Skipped', 'complainant_address': 'c30d0407030206a28058b928ebe46ad23d01848809adf4d39d76cd226a2cdc73a6436987400d39a8163780f1983796c984385bf6737f68e7a11a18a9f56135727141655ada1f7fe944d0ab4df1dc', 'complainant_email_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'complainant_full_name_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'complainant_phone_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f'}
2025-09-18 13:44:48,218 - db_manager - DEBUG - encrypted_data at update_complainant: {'complainant_full_name': 'c30d04070302e98489899f1d128e63d23d01812f23cf145b5f0a7be052e2c76009d139d8be3f70b97b2a9e3f0c6adf1df879aa2802345e58f97025486cebc1f51c69f167cd294cdacbdfbef82a6b', 'complainant_phone': 'c30d04070302a054114bd8ba8f1d6ed23d01f25064218b29af38ef41543ebbf5fa06f69a9228be039e37ec0723afa4a32672eceb40e93a77efd4bb87d0205df1517030f3d6b3e0d65e2f493afba7', 'complainant_email': 'c30d0407030223235ccb35a80a957fd23d01dd8ef18d9fd48579a3c549dc2caba29d3edca13d5820ef7d787f5184e8d4b69cc1832c3a1069529e5bc12d97feb0e34c1f7e35c3097f45b9f1d415f6', 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_municipality': 'Birtamod Municipality', 'complainant_village': 'Slot_Skipped', 'complainant_address': 'c30d0407030206a28058b928ebe46ad23d01848809adf4d39d76cd226a2cdc73a6436987400d39a8163780f1983796c984385bf6737f68e7a11a18a9f56135727141655ada1f7fe944d0ab4df1dc', 'complainant_email_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'complainant_full_name_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'complainant_phone_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f'}
2025-09-18 13:44:48,218 - db_manager - DEBUG - execute_update values: ('c30d04070302e98489899f1d128e63d23d01812f23cf145b5f0a7be052e2c76009d139d8be3f70b97b2a9e3f0c6adf1df879aa2802345e58f97025486cebc1f51c69f167cd294cdacbdfbef82a6b', 'c30d04070302a054114bd8ba8f1d6ed23d01f25064218b29af38ef41543ebbf5fa06f69a9228be039e37ec0723afa4a32672eceb40e93a77efd4bb87d0205df1517030f3d6b3e0d65e2f493afba7', 'c30d0407030223235ccb35a80a957fd23d01dd8ef18d9fd48579a3c549dc2caba29d3edca13d5820ef7d787f5184e8d4b69cc1832c3a1069529e5bc12d97feb0e34c1f7e35c3097f45b9f1d415f6', 'Koshi', 'Jhapa', 'Birtamod Municipality', 'Slot_Skipped', 'c30d0407030206a28058b928ebe46ad23d01848809adf4d39d76cd226a2cdc73a6436987400d39a8163780f1983796c984385bf6737f68e7a11a18a9f56135727141655ada1f7fe944d0ab4df1dc', 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'CM-20250918-KOJH-FA47-B')
2025-09-18 13:44:48,218 - db_manager - DEBUG - execute_update query: UPDATE complainants SET complainant_full_name = %s, complainant_phone = %s, complainant_email = %s, complainant_province = %s, complainant_district = %s, complainant_municipality = %s, complainant_village = %s, complainant_address = %s, complainant_email_hash = %s, complainant_full_name_hash = %s, complainant_phone_hash = %s WHERE complainant_id = %s
2025-09-18 13:44:48,218 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 13:44:48,223 - db_manager - INFO - Starting database transaction
2025-09-18 13:44:48,223 - db_manager - INFO - execute_update: Executing update query: UPDATE complainants SET complainant_full_name = %s, complainant_phone = %s, complainant_email = %s, ...
2025-09-18 13:44:48,224 - db_manager - INFO - execute_update: Update completed in 0.01s. Affected rows: 1
2025-09-18 13:44:48,227 - db_manager - INFO - Transaction committed successfully
2025-09-18 13:44:48,227 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 13:44:48,227 - db_manager - INFO - Complainant updated in db: CM-20250918-KOJH-FA47-B
2025-09-18 13:44:48,227 - db_manager - INFO - update_grievance: Updating grievance with ID: GR-20250918-KOJH-F5F9-B
2025-09-18 13:44:48,228 - db_manager - DEBUG - execute_update values: ('dust everywhere in my house kids are coughing hard', 'GR-20250918-KOJH-F5F9-B')
2025-09-18 13:44:48,228 - db_manager - DEBUG - execute_update query: 
                    UPDATE grievances 
                    SET grievance_description = %s, grievance_modification_date = CURRENT_TIMESTAMP
                    WHERE grievance_id = %s
                    RETURNING grievance_id
                
2025-09-18 13:44:48,228 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 13:44:48,234 - db_manager - INFO - Starting database transaction
2025-09-18 13:44:48,234 - db_manager - INFO - execute_update: Executing update query: 
                    UPDATE grievances 
                    SET grievance_description = %s, grievanc...
2025-09-18 13:44:48,235 - db_manager - INFO - execute_update: Update completed in 0.01s. Affected rows: 1
2025-09-18 13:44:48,237 - db_manager - INFO - Transaction committed successfully
2025-09-18 13:44:48,237 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 13:44:48,237 - db_manager - INFO - update_grievance: Updated grievance with ID: GR-20250918-KOJH-F5F9-B, rows affected: 1
2025-09-18 13:44:48,237 - db_manager - INFO - Grievance updated in db: GR-20250918-KOJH-F5F9-B
2025-09-18 13:44:48,237 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 13:44:48,243 - db_manager - INFO - Starting database transaction
2025-09-18 13:44:48,244 - db_manager - INFO - Executing get_grievance_files: 
            SELECT file_id, file_name, file_type, file_size, upload_timestamp
            FROM file...
2025-09-18 13:44:48,245 - db_manager - INFO - get_grievance_files completed in 0.01s. Rows: 0
2025-09-18 13:44:48,245 - db_manager - INFO - Transaction committed successfully
2025-09-18 13:44:48,245 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 13:44:48,245 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 13:44:48,251 - db_manager - INFO - Starting database transaction
2025-09-18 13:44:48,251 - db_manager - INFO - Executing get_grievance_files: 
            SELECT file_id, file_name, file_type, file_size, upload_timestamp
            FROM file...
2025-09-18 13:44:48,252 - db_manager - INFO - get_grievance_files completed in 0.01s. Rows: 0
2025-09-18 13:44:48,253 - db_manager - INFO - Transaction committed successfully
2025-09-18 13:44:48,253 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 13:44:48,867 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 13:44:48,873 - db_manager - INFO - Starting database transaction
2025-09-18 13:44:48,873 - db_manager - INFO - Executing get_grievance_by_id: 
                SELECT g.*, c.complainant_full_name, c.complainant_phone, c.complainant_email,
    ...
2025-09-18 13:44:48,874 - db_manager - INFO - get_grievance_by_id completed in 0.01s. Rows: 1
2025-09-18 13:44:48,875 - db_manager - INFO - Transaction committed successfully
2025-09-18 13:44:48,875 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 13:44:48,875 - db_manager - DEBUG - get_grievance_by_id: grievance_id: {'grievance_id': 'GR-20250918-KOJH-F5F9-B', 'complainant_id': 'CM-20250918-KOJH-FA47-B', 'grievance_categories': ['Environmental - Air Pollution'], 'grievance_categories_alternative': [], 'follow_up_question': ['How many people in your household are affected by dust and coughing, and for how long has this been happening?'], 'grievance_summary': 'Dust from construction is covering my house and my kids are coughing a lot.', 'grievance_description': 'dust everywhere in my house kids are coughing hard', 'grievance_claimed_amount': None, 'grievance_location': None, 'language_code': 'en', 'grievance_classification_status': 'pending', 'grievance_creation_date': datetime.datetime(2025, 9, 18, 13, 44, 26, 546108, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'grievance_modification_date': datetime.datetime(2025, 9, 18, 13, 44, 48, 234383, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'is_temporary': True, 'source': 'bot', 'complainant_full_name': 'c30d04070302e98489899f1d128e63d23d01812f23cf145b5f0a7be052e2c76009d139d8be3f70b97b2a9e3f0c6adf1df879aa2802345e58f97025486cebc1f51c69f167cd294cdacbdfbef82a6b', 'complainant_phone': 'c30d04070302a054114bd8ba8f1d6ed23d01f25064218b29af38ef41543ebbf5fa06f69a9228be039e37ec0723afa4a32672eceb40e93a77efd4bb87d0205df1517030f3d6b3e0d65e2f493afba7', 'complainant_email': 'c30d0407030223235ccb35a80a957fd23d01dd8ef18d9fd48579a3c549dc2caba29d3edca13d5820ef7d787f5184e8d4b69cc1832c3a1069529e5bc12d97feb0e34c1f7e35c3097f45b9f1d415f6', 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_municipality': 'Birtamod Municipality', 'complainant_ward': None, 'complainant_village': 'Slot_Skipped', 'complainant_address': 'c30d0407030206a28058b928ebe46ad23d01848809adf4d39d76cd226a2cdc73a6436987400d39a8163780f1983796c984385bf6737f68e7a11a18a9f56135727141655ada1f7fe944d0ab4df1dc'}, results: [{'grievance_id': 'GR-20250918-KOJH-F5F9-B', 'complainant_id': 'CM-20250918-KOJH-FA47-B', 'grievance_categories': '["Environmental - Air Pollution"]', 'grievance_categories_alternative': '[]', 'follow_up_question': '["How many people in your household are affected by dust and coughing, and for how long has this been happening?"]', 'grievance_summary': 'Dust from construction is covering my house and my kids are coughing a lot.', 'grievance_description': 'dust everywhere in my house kids are coughing hard', 'grievance_claimed_amount': None, 'grievance_location': None, 'language_code': 'en', 'grievance_classification_status': 'pending', 'grievance_creation_date': datetime.datetime(2025, 9, 18, 13, 44, 26, 546108, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'grievance_modification_date': datetime.datetime(2025, 9, 18, 13, 44, 48, 234383, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'is_temporary': True, 'source': 'bot', 'complainant_full_name': 'c30d04070302e98489899f1d128e63d23d01812f23cf145b5f0a7be052e2c76009d139d8be3f70b97b2a9e3f0c6adf1df879aa2802345e58f97025486cebc1f51c69f167cd294cdacbdfbef82a6b', 'complainant_phone': 'c30d04070302a054114bd8ba8f1d6ed23d01f25064218b29af38ef41543ebbf5fa06f69a9228be039e37ec0723afa4a32672eceb40e93a77efd4bb87d0205df1517030f3d6b3e0d65e2f493afba7', 'complainant_email': 'c30d0407030223235ccb35a80a957fd23d01dd8ef18d9fd48579a3c549dc2caba29d3edca13d5820ef7d787f5184e8d4b69cc1832c3a1069529e5bc12d97feb0e34c1f7e35c3097f45b9f1d415f6', 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_municipality': 'Birtamod Municipality', 'complainant_ward': None, 'complainant_village': 'Slot_Skipped', 'complainant_address': 'c30d0407030206a28058b928ebe46ad23d01848809adf4d39d76cd226a2cdc73a6436987400d39a8163780f1983796c984385bf6737f68e7a11a18a9f56135727141655ada1f7fe944d0ab4df1dc'}]
2025-09-18 13:44:53,497 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 13:44:53,504 - db_manager - INFO - Starting database transaction
2025-09-18 13:44:53,504 - db_manager - INFO - Executing get_complainant_id_from_grievance_id: 
            SELECT complainant_id
            FROM grievances
            WHERE grievance_id = %s
 ...
2025-09-18 13:44:53,505 - db_manager - INFO - get_complainant_id_from_grievance_id completed in 0.01s. Rows: 1
2025-09-18 13:44:53,505 - db_manager - INFO - Transaction committed successfully
2025-09-18 13:44:53,505 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 13:44:53,505 - db_manager - INFO - update_complainant: Updating complainant with ID: CM-20250918-KOJH-FA47-B
2025-09-18 13:44:53,505 - db_manager - DEBUG - encrypted and hashed data at encrypt_and_hash_sensitive_data: {}
2025-09-18 13:44:53,505 - db_manager - DEBUG - encrypted_data at update_complainant: {}
2025-09-18 13:44:53,505 - db_manager - DEBUG - No complainant field to update
2025-09-18 13:44:53,505 - db_manager - INFO - Complainant updated in db: GR-20250918-KOJH-F5F9-B
2025-09-18 13:44:53,505 - db_manager - INFO - update_grievance: Updating grievance with ID: GR-20250918-KOJH-F5F9-B
2025-09-18 13:44:53,505 - db_manager - DEBUG - execute_update values: ('["Environmental - Air Pollution"]', 'Dust from construction is covering my house and my kids are coughing a lot.', 'GR-20250918-KOJH-F5F9-B')
2025-09-18 13:44:53,505 - db_manager - DEBUG - execute_update query: 
                    UPDATE grievances 
                    SET grievance_categories = %s, grievance_summary = %s, grievance_modification_date = CURRENT_TIMESTAMP
                    WHERE grievance_id = %s
                    RETURNING grievance_id
                
2025-09-18 13:44:53,505 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 13:44:53,510 - db_manager - INFO - Starting database transaction
2025-09-18 13:44:53,511 - db_manager - INFO - execute_update: Executing update query: 
                    UPDATE grievances 
                    SET grievance_categories = %s, grievance...
2025-09-18 13:44:53,512 - db_manager - INFO - execute_update: Update completed in 0.01s. Affected rows: 1
2025-09-18 13:44:53,514 - db_manager - INFO - Transaction committed successfully
2025-09-18 13:44:53,514 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 13:44:53,515 - db_manager - INFO - update_grievance: Updated grievance with ID: GR-20250918-KOJH-F5F9-B, rows affected: 1
2025-09-18 13:44:53,515 - db_manager - INFO - Grievance updated in db: GR-20250918-KOJH-F5F9-B
2025-09-18 13:44:53,561 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 13:44:53,566 - db_manager - INFO - Starting database transaction
2025-09-18 13:44:53,566 - db_manager - INFO - Executing get_grievance_files: 
            SELECT file_id, file_name, file_type, file_size, upload_timestamp
            FROM file...
2025-09-18 13:44:53,567 - db_manager - INFO - get_grievance_files completed in 0.01s. Rows: 0
2025-09-18 13:44:53,567 - db_manager - INFO - Transaction committed successfully
2025-09-18 13:44:53,567 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 13:44:53,567 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 13:44:53,572 - db_manager - INFO - Starting database transaction
2025-09-18 13:44:53,572 - db_manager - INFO - Executing get_complainant_by_id: 
            SELECT complainant_id, complainant_unique_id, complainant_full_name,    complainant_pho...
2025-09-18 13:44:53,573 - db_manager - INFO - get_complainant_by_id completed in 0.01s. Rows: 1
2025-09-18 13:44:53,573 - db_manager - INFO - Transaction committed successfully
2025-09-18 13:44:53,573 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 13:44:53,573 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 13:44:53,577 - db_manager - INFO - Starting database transaction
2025-09-18 13:44:53,577 - db_manager - INFO - Executing decrypt_field: SELECT pgp_sym_decrypt(decode(%s, 'hex'), %s) AS decrypted...
2025-09-18 13:44:53,580 - db_manager - INFO - decrypt_field completed in 0.01s. Rows: 1
2025-09-18 13:44:53,580 - db_manager - INFO - Transaction committed successfully
2025-09-18 13:44:53,580 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 13:44:53,580 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 13:44:53,584 - db_manager - INFO - Starting database transaction
2025-09-18 13:44:53,585 - db_manager - INFO - Executing decrypt_field: SELECT pgp_sym_decrypt(decode(%s, 'hex'), %s) AS decrypted...
2025-09-18 13:44:53,585 - db_manager - INFO - decrypt_field completed in 0.00s. Rows: 1
2025-09-18 13:44:53,585 - db_manager - INFO - Transaction committed successfully
2025-09-18 13:44:53,585 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 13:44:53,586 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 13:44:53,590 - db_manager - INFO - Starting database transaction
2025-09-18 13:44:53,590 - db_manager - INFO - Executing decrypt_field: SELECT pgp_sym_decrypt(decode(%s, 'hex'), %s) AS decrypted...
2025-09-18 13:44:53,591 - db_manager - INFO - decrypt_field completed in 0.01s. Rows: 1
2025-09-18 13:44:53,591 - db_manager - INFO - Transaction committed successfully
2025-09-18 13:44:53,591 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 13:44:53,591 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 13:44:53,595 - db_manager - INFO - Starting database transaction
2025-09-18 13:44:53,595 - db_manager - INFO - Executing decrypt_field: SELECT pgp_sym_decrypt(decode(%s, 'hex'), %s) AS decrypted...
2025-09-18 13:44:53,596 - db_manager - INFO - decrypt_field completed in 0.00s. Rows: 1
2025-09-18 13:44:53,596 - db_manager - INFO - Transaction committed successfully
2025-09-18 13:44:53,596 - db_manager - INFO - Database connection closed. Duration: 0.00s
2025-09-18 13:44:53,596 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 13:44:53,600 - db_manager - INFO - Starting database transaction
2025-09-18 13:44:53,600 - db_manager - INFO - Executing get_grievance_by_id: 
                SELECT g.*, c.complainant_full_name, c.complainant_phone, c.complainant_email,
    ...
2025-09-18 13:44:53,601 - db_manager - INFO - get_grievance_by_id completed in 0.01s. Rows: 1
2025-09-18 13:44:53,602 - db_manager - INFO - Transaction committed successfully
2025-09-18 13:44:53,602 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 13:44:53,602 - db_manager - DEBUG - get_grievance_by_id: grievance_id: {'grievance_id': 'GR-20250918-KOJH-F5F9-B', 'complainant_id': 'CM-20250918-KOJH-FA47-B', 'grievance_categories': ['Environmental - Air Pollution'], 'grievance_categories_alternative': [], 'follow_up_question': ['How many people in your household are affected by dust and coughing, and for how long has this been happening?'], 'grievance_summary': 'Dust from construction is covering my house and my kids are coughing a lot.', 'grievance_description': 'dust everywhere in my house kids are coughing hard', 'grievance_claimed_amount': None, 'grievance_location': None, 'language_code': 'en', 'grievance_classification_status': 'pending', 'grievance_creation_date': datetime.datetime(2025, 9, 18, 13, 44, 26, 546108, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'grievance_modification_date': datetime.datetime(2025, 9, 18, 13, 44, 53, 511134, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'is_temporary': True, 'source': 'bot', 'complainant_full_name': 'c30d04070302e98489899f1d128e63d23d01812f23cf145b5f0a7be052e2c76009d139d8be3f70b97b2a9e3f0c6adf1df879aa2802345e58f97025486cebc1f51c69f167cd294cdacbdfbef82a6b', 'complainant_phone': 'c30d04070302a054114bd8ba8f1d6ed23d01f25064218b29af38ef41543ebbf5fa06f69a9228be039e37ec0723afa4a32672eceb40e93a77efd4bb87d0205df1517030f3d6b3e0d65e2f493afba7', 'complainant_email': 'c30d0407030223235ccb35a80a957fd23d01dd8ef18d9fd48579a3c549dc2caba29d3edca13d5820ef7d787f5184e8d4b69cc1832c3a1069529e5bc12d97feb0e34c1f7e35c3097f45b9f1d415f6', 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_municipality': 'Birtamod Municipality', 'complainant_ward': None, 'complainant_village': 'Slot_Skipped', 'complainant_address': 'c30d0407030206a28058b928ebe46ad23d01848809adf4d39d76cd226a2cdc73a6436987400d39a8163780f1983796c984385bf6737f68e7a11a18a9f56135727141655ada1f7fe944d0ab4df1dc'}, results: [{'grievance_id': 'GR-20250918-KOJH-F5F9-B', 'complainant_id': 'CM-20250918-KOJH-FA47-B', 'grievance_categories': '["Environmental - Air Pollution"]', 'grievance_categories_alternative': '[]', 'follow_up_question': '["How many people in your household are affected by dust and coughing, and for how long has this been happening?"]', 'grievance_summary': 'Dust from construction is covering my house and my kids are coughing a lot.', 'grievance_description': 'dust everywhere in my house kids are coughing hard', 'grievance_claimed_amount': None, 'grievance_location': None, 'language_code': 'en', 'grievance_classification_status': 'pending', 'grievance_creation_date': datetime.datetime(2025, 9, 18, 13, 44, 26, 546108, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'grievance_modification_date': datetime.datetime(2025, 9, 18, 13, 44, 53, 511134, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'is_temporary': True, 'source': 'bot', 'complainant_full_name': 'c30d04070302e98489899f1d128e63d23d01812f23cf145b5f0a7be052e2c76009d139d8be3f70b97b2a9e3f0c6adf1df879aa2802345e58f97025486cebc1f51c69f167cd294cdacbdfbef82a6b', 'complainant_phone': 'c30d04070302a054114bd8ba8f1d6ed23d01f25064218b29af38ef41543ebbf5fa06f69a9228be039e37ec0723afa4a32672eceb40e93a77efd4bb87d0205df1517030f3d6b3e0d65e2f493afba7', 'complainant_email': 'c30d0407030223235ccb35a80a957fd23d01dd8ef18d9fd48579a3c549dc2caba29d3edca13d5820ef7d787f5184e8d4b69cc1832c3a1069529e5bc12d97feb0e34c1f7e35c3097f45b9f1d415f6', 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_municipality': 'Birtamod Municipality', 'complainant_ward': None, 'complainant_village': 'Slot_Skipped', 'complainant_address': 'c30d0407030206a28058b928ebe46ad23d01848809adf4d39d76cd226a2cdc73a6436987400d39a8163780f1983796c984385bf6737f68e7a11a18a9f56135727141655ada1f7fe944d0ab4df1dc'}]
2025-09-18 13:44:53,602 - db_manager - INFO - update_complainant: Updating complainant with ID: CM-20250918-KOJH-FA47-B
2025-09-18 13:44:53,602 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 13:44:53,606 - db_manager - INFO - Starting database transaction
2025-09-18 13:44:53,606 - db_manager - INFO - Executing encrypt_field: SELECT encode(pgp_sym_encrypt(%s, %s), 'hex') AS encrypted...
2025-09-18 13:44:53,607 - db_manager - INFO - encrypt_field completed in 0.01s. Rows: 1
2025-09-18 13:44:53,607 - db_manager - INFO - Transaction committed successfully
2025-09-18 13:44:53,607 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 13:44:53,607 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 13:44:53,612 - db_manager - INFO - Starting database transaction
2025-09-18 13:44:53,612 - db_manager - INFO - Executing encrypt_field: SELECT encode(pgp_sym_encrypt(%s, %s), 'hex') AS encrypted...
2025-09-18 13:44:53,613 - db_manager - INFO - encrypt_field completed in 0.01s. Rows: 1
2025-09-18 13:44:53,613 - db_manager - INFO - Transaction committed successfully
2025-09-18 13:44:53,613 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 13:44:53,613 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 13:44:53,617 - db_manager - INFO - Starting database transaction
2025-09-18 13:44:53,617 - db_manager - INFO - Executing encrypt_field: SELECT encode(pgp_sym_encrypt(%s, %s), 'hex') AS encrypted...
2025-09-18 13:44:53,618 - db_manager - INFO - encrypt_field completed in 0.01s. Rows: 1
2025-09-18 13:44:53,619 - db_manager - INFO - Transaction committed successfully
2025-09-18 13:44:53,619 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 13:44:53,619 - db_manager - DEBUG - encrypted phone number Not provided at encrypt_complainant_data: c30d04070302274a8fc90d6c8c4371d23d01e9c3965b6d588052ca59c9454fcc1eebfff0881e13ae93e9e1fd062012f3d68a82e7a986ca3807070c997d979f0c43b2a3fb8716b6d441fa22b67c26
2025-09-18 13:44:53,619 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 13:44:53,624 - db_manager - INFO - Starting database transaction
2025-09-18 13:44:53,624 - db_manager - INFO - Executing encrypt_field: SELECT encode(pgp_sym_encrypt(%s, %s), 'hex') AS encrypted...
2025-09-18 13:44:53,625 - db_manager - INFO - encrypt_field completed in 0.01s. Rows: 1
2025-09-18 13:44:53,625 - db_manager - INFO - Transaction committed successfully
2025-09-18 13:44:53,625 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 13:44:53,625 - db_manager - DEBUG - phone number Not provided hashed to d83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f at hash_sensitive_data
2025-09-18 13:44:53,626 - db_manager - DEBUG - encrypted and hashed data at encrypt_and_hash_sensitive_data: {'complainant_full_name': 'c30d0407030294b1f7e60fca816775d23d01ede6b50ba99974b5efbe3ea59074311fc96d2ce215027214d56da605db5f9399fea0aec000c8f2e74f414f99e37153f3884c3b10caf4f4d0334888fa', 'complainant_phone': 'c30d04070302274a8fc90d6c8c4371d23d01e9c3965b6d588052ca59c9454fcc1eebfff0881e13ae93e9e1fd062012f3d68a82e7a986ca3807070c997d979f0c43b2a3fb8716b6d441fa22b67c26', 'complainant_email': 'c30d04070302a993e22528510e1c6ed23d018cf7093e164c0f88adab3eb8269275b49ad5d8a034e0eb7810cbaa5fcbdc9e1879e5aadcd8700936b87bff3d8eca802edc2a1de12008bf9e3159424d', 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_municipality': 'Birtamod Municipality', 'complainant_village': 'Slot_Skipped', 'complainant_address': 'c30d04070302fa5a307c2cec064566d23d01cd8a2e19995112d0ae42b26d2862c2cd7822c038578cb5900ab1c3a35842decd76b8354cf22b07ead52f5ab7e6ae52004a5f22f37c2d5563403479b0', 'complainant_email_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'complainant_full_name_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'complainant_phone_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f'}
2025-09-18 13:44:53,626 - db_manager - DEBUG - encrypted_data at update_complainant: {'complainant_full_name': 'c30d0407030294b1f7e60fca816775d23d01ede6b50ba99974b5efbe3ea59074311fc96d2ce215027214d56da605db5f9399fea0aec000c8f2e74f414f99e37153f3884c3b10caf4f4d0334888fa', 'complainant_phone': 'c30d04070302274a8fc90d6c8c4371d23d01e9c3965b6d588052ca59c9454fcc1eebfff0881e13ae93e9e1fd062012f3d68a82e7a986ca3807070c997d979f0c43b2a3fb8716b6d441fa22b67c26', 'complainant_email': 'c30d04070302a993e22528510e1c6ed23d018cf7093e164c0f88adab3eb8269275b49ad5d8a034e0eb7810cbaa5fcbdc9e1879e5aadcd8700936b87bff3d8eca802edc2a1de12008bf9e3159424d', 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_municipality': 'Birtamod Municipality', 'complainant_village': 'Slot_Skipped', 'complainant_address': 'c30d04070302fa5a307c2cec064566d23d01cd8a2e19995112d0ae42b26d2862c2cd7822c038578cb5900ab1c3a35842decd76b8354cf22b07ead52f5ab7e6ae52004a5f22f37c2d5563403479b0', 'complainant_email_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'complainant_full_name_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'complainant_phone_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f'}
2025-09-18 13:44:53,626 - db_manager - DEBUG - execute_update values: ('c30d0407030294b1f7e60fca816775d23d01ede6b50ba99974b5efbe3ea59074311fc96d2ce215027214d56da605db5f9399fea0aec000c8f2e74f414f99e37153f3884c3b10caf4f4d0334888fa', 'c30d04070302274a8fc90d6c8c4371d23d01e9c3965b6d588052ca59c9454fcc1eebfff0881e13ae93e9e1fd062012f3d68a82e7a986ca3807070c997d979f0c43b2a3fb8716b6d441fa22b67c26', 'c30d04070302a993e22528510e1c6ed23d018cf7093e164c0f88adab3eb8269275b49ad5d8a034e0eb7810cbaa5fcbdc9e1879e5aadcd8700936b87bff3d8eca802edc2a1de12008bf9e3159424d', 'Koshi', 'Jhapa', 'Birtamod Municipality', 'Slot_Skipped', 'c30d04070302fa5a307c2cec064566d23d01cd8a2e19995112d0ae42b26d2862c2cd7822c038578cb5900ab1c3a35842decd76b8354cf22b07ead52f5ab7e6ae52004a5f22f37c2d5563403479b0', 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'CM-20250918-KOJH-FA47-B')
2025-09-18 13:44:53,626 - db_manager - DEBUG - execute_update query: UPDATE complainants SET complainant_full_name = %s, complainant_phone = %s, complainant_email = %s, complainant_province = %s, complainant_district = %s, complainant_municipality = %s, complainant_village = %s, complainant_address = %s, complainant_email_hash = %s, complainant_full_name_hash = %s, complainant_phone_hash = %s WHERE complainant_id = %s
2025-09-18 13:44:53,626 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 13:44:53,630 - db_manager - INFO - Starting database transaction
2025-09-18 13:44:53,630 - db_manager - INFO - execute_update: Executing update query: UPDATE complainants SET complainant_full_name = %s, complainant_phone = %s, complainant_email = %s, ...
2025-09-18 13:44:53,632 - db_manager - INFO - execute_update: Update completed in 0.01s. Affected rows: 1
2025-09-18 13:44:53,633 - db_manager - INFO - Transaction committed successfully
2025-09-18 13:44:53,633 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 13:44:53,634 - db_manager - INFO - Complainant updated in db: CM-20250918-KOJH-FA47-B
2025-09-18 13:44:53,634 - db_manager - INFO - update_grievance: Updating grievance with ID: GR-20250918-KOJH-F5F9-B
2025-09-18 13:44:53,634 - db_manager - DEBUG - execute_update values: ('["Environmental - Air Pollution"]', 'Dust from construction is covering my house and my kids are coughing a lot.', 'dust everywhere in my house kids are coughing hard', 'GR-20250918-KOJH-F5F9-B')
2025-09-18 13:44:53,634 - db_manager - DEBUG - execute_update query: 
                    UPDATE grievances 
                    SET grievance_categories = %s, grievance_summary = %s, grievance_description = %s, grievance_modification_date = CURRENT_TIMESTAMP
                    WHERE grievance_id = %s
                    RETURNING grievance_id
                
2025-09-18 13:44:53,634 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 13:44:53,638 - db_manager - INFO - Starting database transaction
2025-09-18 13:44:53,638 - db_manager - INFO - execute_update: Executing update query: 
                    UPDATE grievances 
                    SET grievance_categories = %s, grievance...
2025-09-18 13:44:53,639 - db_manager - INFO - execute_update: Update completed in 0.01s. Affected rows: 1
2025-09-18 13:44:53,641 - db_manager - INFO - Transaction committed successfully
2025-09-18 13:44:53,641 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 13:44:53,641 - db_manager - INFO - update_grievance: Updated grievance with ID: GR-20250918-KOJH-F5F9-B, rows affected: 1
2025-09-18 13:44:53,641 - db_manager - INFO - Grievance updated in db: GR-20250918-KOJH-F5F9-B
2025-09-18 13:47:37,088 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-18 13:47:37,088 - db_manager - INFO - Database manager initialized successfully
2025-09-18 13:47:37,088 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-18 13:47:37,088 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-18 13:47:37,088 - db_manager - INFO - Database manager initialized successfully
2025-09-18 13:47:37,088 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-18 13:47:37,088 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-18 13:47:37,088 - db_manager - INFO - Database manager initialized successfully
2025-09-18 13:47:37,088 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-18 13:47:37,089 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-18 13:47:37,089 - db_manager - INFO - Database manager initialized successfully
2025-09-18 13:47:37,089 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-18 13:47:37,089 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-18 13:47:37,089 - db_manager - INFO - Database manager initialized successfully
2025-09-18 13:47:37,089 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-18 13:47:37,089 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-18 13:47:37,089 - db_manager - INFO - Database manager initialized successfully
2025-09-18 13:47:37,089 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-18 13:47:37,089 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-18 13:47:37,089 - db_manager - INFO - Database manager initialized successfully
2025-09-18 13:47:37,089 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-18 13:47:37,089 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-18 13:47:37,089 - db_manager - INFO - Database manager initialized successfully
2025-09-18 13:47:37,089 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-18 13:47:37,089 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-18 13:47:37,089 - db_manager - INFO - Database manager initialized successfully
2025-09-18 13:47:37,089 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-18 13:47:37,089 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-18 13:47:37,089 - db_manager - INFO - Database manager initialized successfully
2025-09-18 13:47:37,089 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-18 13:48:14,075 - db_manager - INFO - create_complainant: Creating complainant with ID: CM-20250918-KOJH-147D-B
2025-09-18 13:48:14,075 - db_manager - DEBUG - encrypted and hashed data at encrypt_and_hash_sensitive_data: {'complainant_id': 'CM-20250918-KOJH-147D-B', 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_unique_id': 'CM-20250918-KOJH-147D-B'}
2025-09-18 13:48:14,075 - db_manager - DEBUG - query_keys at generate_query_string: dict_keys(['complainant_id', 'complainant_province', 'complainant_district', 'complainant_unique_id'])
2025-09-18 13:48:14,075 - db_manager - DEBUG - Generated query: INSERT INTO complainants (complainant_id, complainant_province, complainant_district, complainant_unique_id) VALUES (%s, %s, %s, %s)
2025-09-18 13:48:14,075 - db_manager - DEBUG - len of query_keys: 4
2025-09-18 13:48:14,075 - db_manager - DEBUG - Generated query: INSERT INTO complainants (complainant_id, complainant_province, complainant_district, complainant_unique_id) VALUES (%s, %s, %s, %s)
2025-09-18 13:48:14,075 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 13:48:14,082 - db_manager - INFO - Starting database transaction
2025-09-18 13:48:14,084 - db_manager - INFO - Transaction committed successfully
2025-09-18 13:48:14,084 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 13:48:14,084 - db_manager - INFO - create_complainant: Successfully created complainant with ID: CM-20250918-KOJH-147D-B
2025-09-18 13:48:14,084 - db_manager - INFO - create_grievance: Creating grievance with data: {'grievance_id': 'GR-20250918-KOJH-EA93-B', 'complainant_id': 'CM-20250918-KOJH-147D-B', 'grievance_description': 'dust everywhere in my house kids are coughing hard*', 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_office': None, 'source': 'bot', 'complainant_unique_id': 'CM-20250918-KOJH-147D-B'}
2025-09-18 13:48:14,084 - db_manager - INFO - create_grievance: Creating grievance with ID: GR-20250918-KOJH-EA93-B
2025-09-18 13:48:14,085 - db_manager - INFO - create_grievance: Creating grievance with allowed fields: ['grievance_id', 'complainant_id', 'grievance_categories', 'grievance_categories_alternative', 'follow_up_question', 'grievance_summary', 'grievance_description', 'grievance_claimed_amount', 'grievance_location', 'is_temporary', 'source', 'language_code', 'grievance_classification_status']
2025-09-18 13:48:14,085 - db_manager - DEBUG - query_keys at generate_query_string: dict_keys(['grievance_id', 'complainant_id', 'grievance_description', 'source'])
2025-09-18 13:48:14,085 - db_manager - DEBUG - Generated query: INSERT INTO grievances (grievance_id, complainant_id, grievance_description, source) VALUES (%s, %s, %s, %s) RETURNING grievance_id
2025-09-18 13:48:14,085 - db_manager - DEBUG - len of query_keys: 4
2025-09-18 13:48:14,085 - db_manager - DEBUG - Generated query: INSERT INTO grievances (grievance_id, complainant_id, grievance_description, source) VALUES (%s, %s, %s, %s) RETURNING grievance_id
2025-09-18 13:48:14,085 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 13:48:14,089 - db_manager - INFO - Starting database transaction
2025-09-18 13:48:14,094 - db_manager - INFO - Transaction committed successfully
2025-09-18 13:48:14,094 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 13:48:14,095 - db_manager - INFO - create_grievance: Successfully created grievance with ID: GR-20250918-KOJH-EA93-B
2025-09-18 13:48:31,247 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 13:48:31,252 - db_manager - INFO - Starting database transaction
2025-09-18 13:48:31,252 - db_manager - INFO - Executing get_complainant_by_id: 
            SELECT complainant_id, complainant_unique_id, complainant_full_name,    complainant_pho...
2025-09-18 13:48:31,254 - db_manager - INFO - get_complainant_by_id completed in 0.01s. Rows: 1
2025-09-18 13:48:31,254 - db_manager - INFO - Transaction committed successfully
2025-09-18 13:48:31,254 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 13:48:31,254 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 13:48:31,259 - db_manager - INFO - Starting database transaction
2025-09-18 13:48:31,260 - db_manager - INFO - Executing get_grievance_by_id: 
                SELECT g.*, c.complainant_full_name, c.complainant_phone, c.complainant_email,
    ...
2025-09-18 13:48:31,261 - db_manager - INFO - get_grievance_by_id completed in 0.01s. Rows: 1
2025-09-18 13:48:31,261 - db_manager - INFO - Transaction committed successfully
2025-09-18 13:48:31,261 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 13:48:31,261 - db_manager - DEBUG - get_grievance_by_id: grievance_id: {'grievance_id': 'GR-20250918-KOJH-EA93-B', 'complainant_id': 'CM-20250918-KOJH-147D-B', 'grievance_categories': ['Environmental - Air Pollution'], 'grievance_categories_alternative': [], 'follow_up_question': ['How many people in your household are affected by the dust, and what health symptoms have you noticed (e.g., coughing, eye irritation)?'], 'grievance_summary': 'Dust from road works is everywhere in my house and my kids are coughing a lot.', 'grievance_description': 'dust everywhere in my house kids are coughing hard*', 'grievance_claimed_amount': None, 'grievance_location': None, 'language_code': 'en', 'grievance_classification_status': 'pending', 'grievance_creation_date': datetime.datetime(2025, 9, 18, 13, 48, 14, 90142, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'grievance_modification_date': datetime.datetime(2025, 9, 18, 13, 48, 25, 630934, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'is_temporary': True, 'source': 'bot', 'complainant_full_name': None, 'complainant_phone': None, 'complainant_email': None, 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_municipality': None, 'complainant_ward': None, 'complainant_village': None, 'complainant_address': None}, results: [{'grievance_id': 'GR-20250918-KOJH-EA93-B', 'complainant_id': 'CM-20250918-KOJH-147D-B', 'grievance_categories': '["Environmental - Air Pollution"]', 'grievance_categories_alternative': '[]', 'follow_up_question': '["How many people in your household are affected by the dust, and what health symptoms have you noticed (e.g., coughing, eye irritation)?"]', 'grievance_summary': 'Dust from road works is everywhere in my house and my kids are coughing a lot.', 'grievance_description': 'dust everywhere in my house kids are coughing hard*', 'grievance_claimed_amount': None, 'grievance_location': None, 'language_code': 'en', 'grievance_classification_status': 'pending', 'grievance_creation_date': datetime.datetime(2025, 9, 18, 13, 48, 14, 90142, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'grievance_modification_date': datetime.datetime(2025, 9, 18, 13, 48, 25, 630934, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'is_temporary': True, 'source': 'bot', 'complainant_full_name': None, 'complainant_phone': None, 'complainant_email': None, 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_municipality': None, 'complainant_ward': None, 'complainant_village': None, 'complainant_address': None}]
2025-09-18 13:48:31,261 - db_manager - INFO - update_complainant: Updating complainant with ID: CM-20250918-KOJH-147D-B
2025-09-18 13:48:31,261 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 13:48:31,266 - db_manager - INFO - Starting database transaction
2025-09-18 13:48:31,266 - db_manager - INFO - Executing encrypt_field: SELECT encode(pgp_sym_encrypt(%s, %s), 'hex') AS encrypted...
2025-09-18 13:48:31,267 - db_manager - INFO - encrypt_field completed in 0.01s. Rows: 1
2025-09-18 13:48:31,267 - db_manager - INFO - Transaction committed successfully
2025-09-18 13:48:31,267 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 13:48:31,267 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 13:48:31,272 - db_manager - INFO - Starting database transaction
2025-09-18 13:48:31,272 - db_manager - INFO - Executing encrypt_field: SELECT encode(pgp_sym_encrypt(%s, %s), 'hex') AS encrypted...
2025-09-18 13:48:31,273 - db_manager - INFO - encrypt_field completed in 0.01s. Rows: 1
2025-09-18 13:48:31,273 - db_manager - INFO - Transaction committed successfully
2025-09-18 13:48:31,273 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 13:48:31,273 - db_manager - DEBUG - encrypted phone number Not provided at encrypt_complainant_data: c30d04070302e577f387e34861d868d23d0184867d19a59f225da37960e186522a751c4b1bf73ef2adf5d86debaa20469ac1841d733560eafb4484ca26aa74c0c045d17ee71d83ccbadf2fdfdce1
2025-09-18 13:48:31,274 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 13:48:31,278 - db_manager - INFO - Starting database transaction
2025-09-18 13:48:31,278 - db_manager - INFO - Executing encrypt_field: SELECT encode(pgp_sym_encrypt(%s, %s), 'hex') AS encrypted...
2025-09-18 13:48:31,279 - db_manager - INFO - encrypt_field completed in 0.01s. Rows: 1
2025-09-18 13:48:31,279 - db_manager - INFO - Transaction committed successfully
2025-09-18 13:48:31,279 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 13:48:31,279 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 13:48:31,284 - db_manager - INFO - Starting database transaction
2025-09-18 13:48:31,285 - db_manager - INFO - Executing encrypt_field: SELECT encode(pgp_sym_encrypt(%s, %s), 'hex') AS encrypted...
2025-09-18 13:48:31,286 - db_manager - INFO - encrypt_field completed in 0.01s. Rows: 1
2025-09-18 13:48:31,286 - db_manager - INFO - Transaction committed successfully
2025-09-18 13:48:31,286 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 13:48:31,286 - db_manager - DEBUG - phone number Not provided hashed to d83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f at hash_sensitive_data
2025-09-18 13:48:31,286 - db_manager - DEBUG - encrypted and hashed data at encrypt_and_hash_sensitive_data: {'complainant_full_name': 'c30d0407030233b8be11afe988b371d23d01c53afe07fb4d00c6741563913c6e58303fdf7bfbe5a94dda4de63b0869eb2b0e4c0da24f850b6b8bc902bf426b0c28e0b8fd85ba77dd4c50755fa359', 'complainant_phone': 'c30d04070302e577f387e34861d868d23d0184867d19a59f225da37960e186522a751c4b1bf73ef2adf5d86debaa20469ac1841d733560eafb4484ca26aa74c0c045d17ee71d83ccbadf2fdfdce1', 'complainant_email': 'c30d0407030269e4569c921ec04868d23d01938b360f04db435a8bb7a4d6b3230b2189a67f9e118087d2826ad1642e1cc68450f728433e24b5dbdcefc50c359693bdb108a0c462c8521db5908651', 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_municipality': 'Birtamod Municipality', 'complainant_village': 'Slot_Skipped', 'complainant_address': 'c30d04070302db91b585950beed364d23d01b06f9b3b863c910172b1ca863eb3092bca7f90b975792c3b9d89b1b2134108e7532e5bf0e76fba24edc57ffbfd69f314b36eb1f4607865cc1c1c2b59', 'complainant_full_name_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'complainant_phone_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'complainant_email_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f'}
2025-09-18 13:48:31,286 - db_manager - DEBUG - encrypted_data at update_complainant: {'complainant_full_name': 'c30d0407030233b8be11afe988b371d23d01c53afe07fb4d00c6741563913c6e58303fdf7bfbe5a94dda4de63b0869eb2b0e4c0da24f850b6b8bc902bf426b0c28e0b8fd85ba77dd4c50755fa359', 'complainant_phone': 'c30d04070302e577f387e34861d868d23d0184867d19a59f225da37960e186522a751c4b1bf73ef2adf5d86debaa20469ac1841d733560eafb4484ca26aa74c0c045d17ee71d83ccbadf2fdfdce1', 'complainant_email': 'c30d0407030269e4569c921ec04868d23d01938b360f04db435a8bb7a4d6b3230b2189a67f9e118087d2826ad1642e1cc68450f728433e24b5dbdcefc50c359693bdb108a0c462c8521db5908651', 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_municipality': 'Birtamod Municipality', 'complainant_village': 'Slot_Skipped', 'complainant_address': 'c30d04070302db91b585950beed364d23d01b06f9b3b863c910172b1ca863eb3092bca7f90b975792c3b9d89b1b2134108e7532e5bf0e76fba24edc57ffbfd69f314b36eb1f4607865cc1c1c2b59', 'complainant_full_name_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'complainant_phone_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'complainant_email_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f'}
2025-09-18 13:48:31,286 - db_manager - DEBUG - execute_update values: ('c30d0407030233b8be11afe988b371d23d01c53afe07fb4d00c6741563913c6e58303fdf7bfbe5a94dda4de63b0869eb2b0e4c0da24f850b6b8bc902bf426b0c28e0b8fd85ba77dd4c50755fa359', 'c30d04070302e577f387e34861d868d23d0184867d19a59f225da37960e186522a751c4b1bf73ef2adf5d86debaa20469ac1841d733560eafb4484ca26aa74c0c045d17ee71d83ccbadf2fdfdce1', 'c30d0407030269e4569c921ec04868d23d01938b360f04db435a8bb7a4d6b3230b2189a67f9e118087d2826ad1642e1cc68450f728433e24b5dbdcefc50c359693bdb108a0c462c8521db5908651', 'Koshi', 'Jhapa', 'Birtamod Municipality', 'Slot_Skipped', 'c30d04070302db91b585950beed364d23d01b06f9b3b863c910172b1ca863eb3092bca7f90b975792c3b9d89b1b2134108e7532e5bf0e76fba24edc57ffbfd69f314b36eb1f4607865cc1c1c2b59', 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'CM-20250918-KOJH-147D-B')
2025-09-18 13:48:31,286 - db_manager - DEBUG - execute_update query: UPDATE complainants SET complainant_full_name = %s, complainant_phone = %s, complainant_email = %s, complainant_province = %s, complainant_district = %s, complainant_municipality = %s, complainant_village = %s, complainant_address = %s, complainant_full_name_hash = %s, complainant_phone_hash = %s, complainant_email_hash = %s WHERE complainant_id = %s
2025-09-18 13:48:31,286 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 13:48:31,291 - db_manager - INFO - Starting database transaction
2025-09-18 13:48:31,291 - db_manager - INFO - execute_update: Executing update query: UPDATE complainants SET complainant_full_name = %s, complainant_phone = %s, complainant_email = %s, ...
2025-09-18 13:48:31,292 - db_manager - INFO - execute_update: Update completed in 0.01s. Affected rows: 1
2025-09-18 13:48:31,295 - db_manager - INFO - Transaction committed successfully
2025-09-18 13:48:31,295 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 13:48:31,295 - db_manager - INFO - Complainant updated in db: CM-20250918-KOJH-147D-B
2025-09-18 13:48:31,295 - db_manager - INFO - update_grievance: Updating grievance with ID: GR-20250918-KOJH-EA93-B
2025-09-18 13:48:31,295 - db_manager - DEBUG - execute_update values: ('dust everywhere in my house kids are coughing hard*', 'GR-20250918-KOJH-EA93-B')
2025-09-18 13:48:31,295 - db_manager - DEBUG - execute_update query: 
                    UPDATE grievances 
                    SET grievance_description = %s, grievance_modification_date = CURRENT_TIMESTAMP
                    WHERE grievance_id = %s
                    RETURNING grievance_id
                
2025-09-18 13:48:31,295 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 13:48:31,299 - db_manager - INFO - Starting database transaction
2025-09-18 13:48:31,299 - db_manager - INFO - execute_update: Executing update query: 
                    UPDATE grievances 
                    SET grievance_description = %s, grievanc...
2025-09-18 13:48:31,301 - db_manager - INFO - execute_update: Update completed in 0.01s. Affected rows: 1
2025-09-18 13:48:31,303 - db_manager - INFO - Transaction committed successfully
2025-09-18 13:48:31,303 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 13:48:31,303 - db_manager - INFO - update_grievance: Updated grievance with ID: GR-20250918-KOJH-EA93-B, rows affected: 1
2025-09-18 13:48:31,303 - db_manager - INFO - Grievance updated in db: GR-20250918-KOJH-EA93-B
2025-09-18 13:48:31,303 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 13:48:31,307 - db_manager - INFO - Starting database transaction
2025-09-18 13:48:31,307 - db_manager - INFO - Executing get_grievance_files: 
            SELECT file_id, file_name, file_type, file_size, upload_timestamp
            FROM file...
2025-09-18 13:48:31,308 - db_manager - INFO - get_grievance_files completed in 0.01s. Rows: 0
2025-09-18 13:48:31,309 - db_manager - INFO - Transaction committed successfully
2025-09-18 13:48:31,309 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 13:48:31,309 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 13:48:31,313 - db_manager - INFO - Starting database transaction
2025-09-18 13:48:31,313 - db_manager - INFO - Executing get_grievance_files: 
            SELECT file_id, file_name, file_type, file_size, upload_timestamp
            FROM file...
2025-09-18 13:48:31,314 - db_manager - INFO - get_grievance_files completed in 0.01s. Rows: 0
2025-09-18 13:48:31,314 - db_manager - INFO - Transaction committed successfully
2025-09-18 13:48:31,314 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 13:48:31,934 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 13:48:31,941 - db_manager - INFO - Starting database transaction
2025-09-18 13:48:31,941 - db_manager - INFO - Executing get_grievance_by_id: 
                SELECT g.*, c.complainant_full_name, c.complainant_phone, c.complainant_email,
    ...
2025-09-18 13:48:31,942 - db_manager - INFO - get_grievance_by_id completed in 0.01s. Rows: 1
2025-09-18 13:48:31,942 - db_manager - INFO - Transaction committed successfully
2025-09-18 13:48:31,942 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 13:48:31,943 - db_manager - DEBUG - get_grievance_by_id: grievance_id: {'grievance_id': 'GR-20250918-KOJH-EA93-B', 'complainant_id': 'CM-20250918-KOJH-147D-B', 'grievance_categories': ['Environmental - Air Pollution'], 'grievance_categories_alternative': [], 'follow_up_question': ['How many people in your household are affected by the dust, and what health symptoms have you noticed (e.g., coughing, eye irritation)?'], 'grievance_summary': 'Dust from road works is everywhere in my house and my kids are coughing a lot.', 'grievance_description': 'dust everywhere in my house kids are coughing hard*', 'grievance_claimed_amount': None, 'grievance_location': None, 'language_code': 'en', 'grievance_classification_status': 'pending', 'grievance_creation_date': datetime.datetime(2025, 9, 18, 13, 48, 14, 90142, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'grievance_modification_date': datetime.datetime(2025, 9, 18, 13, 48, 31, 300082, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'is_temporary': True, 'source': 'bot', 'complainant_full_name': 'c30d0407030233b8be11afe988b371d23d01c53afe07fb4d00c6741563913c6e58303fdf7bfbe5a94dda4de63b0869eb2b0e4c0da24f850b6b8bc902bf426b0c28e0b8fd85ba77dd4c50755fa359', 'complainant_phone': 'c30d04070302e577f387e34861d868d23d0184867d19a59f225da37960e186522a751c4b1bf73ef2adf5d86debaa20469ac1841d733560eafb4484ca26aa74c0c045d17ee71d83ccbadf2fdfdce1', 'complainant_email': 'c30d0407030269e4569c921ec04868d23d01938b360f04db435a8bb7a4d6b3230b2189a67f9e118087d2826ad1642e1cc68450f728433e24b5dbdcefc50c359693bdb108a0c462c8521db5908651', 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_municipality': 'Birtamod Municipality', 'complainant_ward': None, 'complainant_village': 'Slot_Skipped', 'complainant_address': 'c30d04070302db91b585950beed364d23d01b06f9b3b863c910172b1ca863eb3092bca7f90b975792c3b9d89b1b2134108e7532e5bf0e76fba24edc57ffbfd69f314b36eb1f4607865cc1c1c2b59'}, results: [{'grievance_id': 'GR-20250918-KOJH-EA93-B', 'complainant_id': 'CM-20250918-KOJH-147D-B', 'grievance_categories': '["Environmental - Air Pollution"]', 'grievance_categories_alternative': '[]', 'follow_up_question': '["How many people in your household are affected by the dust, and what health symptoms have you noticed (e.g., coughing, eye irritation)?"]', 'grievance_summary': 'Dust from road works is everywhere in my house and my kids are coughing a lot.', 'grievance_description': 'dust everywhere in my house kids are coughing hard*', 'grievance_claimed_amount': None, 'grievance_location': None, 'language_code': 'en', 'grievance_classification_status': 'pending', 'grievance_creation_date': datetime.datetime(2025, 9, 18, 13, 48, 14, 90142, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'grievance_modification_date': datetime.datetime(2025, 9, 18, 13, 48, 31, 300082, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'is_temporary': True, 'source': 'bot', 'complainant_full_name': 'c30d0407030233b8be11afe988b371d23d01c53afe07fb4d00c6741563913c6e58303fdf7bfbe5a94dda4de63b0869eb2b0e4c0da24f850b6b8bc902bf426b0c28e0b8fd85ba77dd4c50755fa359', 'complainant_phone': 'c30d04070302e577f387e34861d868d23d0184867d19a59f225da37960e186522a751c4b1bf73ef2adf5d86debaa20469ac1841d733560eafb4484ca26aa74c0c045d17ee71d83ccbadf2fdfdce1', 'complainant_email': 'c30d0407030269e4569c921ec04868d23d01938b360f04db435a8bb7a4d6b3230b2189a67f9e118087d2826ad1642e1cc68450f728433e24b5dbdcefc50c359693bdb108a0c462c8521db5908651', 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_municipality': 'Birtamod Municipality', 'complainant_ward': None, 'complainant_village': 'Slot_Skipped', 'complainant_address': 'c30d04070302db91b585950beed364d23d01b06f9b3b863c910172b1ca863eb3092bca7f90b975792c3b9d89b1b2134108e7532e5bf0e76fba24edc57ffbfd69f314b36eb1f4607865cc1c1c2b59'}]
2025-09-18 13:48:37,671 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 13:48:37,676 - db_manager - INFO - Starting database transaction
2025-09-18 13:48:37,677 - db_manager - INFO - Executing get_complainant_id_from_grievance_id: 
            SELECT complainant_id
            FROM grievances
            WHERE grievance_id = %s
 ...
2025-09-18 13:48:37,678 - db_manager - INFO - get_complainant_id_from_grievance_id completed in 0.01s. Rows: 1
2025-09-18 13:48:37,678 - db_manager - INFO - Transaction committed successfully
2025-09-18 13:48:37,678 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 13:48:37,678 - db_manager - INFO - update_complainant: Updating complainant with ID: CM-20250918-KOJH-147D-B
2025-09-18 13:48:37,678 - db_manager - DEBUG - encrypted and hashed data at encrypt_and_hash_sensitive_data: {}
2025-09-18 13:48:37,678 - db_manager - DEBUG - encrypted_data at update_complainant: {}
2025-09-18 13:48:37,678 - db_manager - DEBUG - No complainant field to update
2025-09-18 13:48:37,678 - db_manager - INFO - Complainant updated in db: GR-20250918-KOJH-EA93-B
2025-09-18 13:48:37,678 - db_manager - INFO - update_grievance: Updating grievance with ID: GR-20250918-KOJH-EA93-B
2025-09-18 13:48:37,678 - db_manager - DEBUG - execute_update values: ('["Environmental - Air Pollution"]', 'GR-20250918-KOJH-EA93-B')
2025-09-18 13:48:37,678 - db_manager - DEBUG - execute_update query: 
                    UPDATE grievances 
                    SET grievance_categories = %s, grievance_modification_date = CURRENT_TIMESTAMP
                    WHERE grievance_id = %s
                    RETURNING grievance_id
                
2025-09-18 13:48:37,678 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 13:48:37,683 - db_manager - INFO - Starting database transaction
2025-09-18 13:48:37,683 - db_manager - INFO - execute_update: Executing update query: 
                    UPDATE grievances 
                    SET grievance_categories = %s, grievance...
2025-09-18 13:48:37,684 - db_manager - INFO - execute_update: Update completed in 0.01s. Affected rows: 1
2025-09-18 13:48:37,686 - db_manager - INFO - Transaction committed successfully
2025-09-18 13:48:37,686 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 13:48:37,687 - db_manager - INFO - update_grievance: Updated grievance with ID: GR-20250918-KOJH-EA93-B, rows affected: 1
2025-09-18 13:48:37,687 - db_manager - INFO - Grievance updated in db: GR-20250918-KOJH-EA93-B
2025-09-18 13:48:37,731 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 13:48:37,736 - db_manager - INFO - Starting database transaction
2025-09-18 13:48:37,736 - db_manager - INFO - Executing get_grievance_files: 
            SELECT file_id, file_name, file_type, file_size, upload_timestamp
            FROM file...
2025-09-18 13:48:37,737 - db_manager - INFO - get_grievance_files completed in 0.01s. Rows: 0
2025-09-18 13:48:37,737 - db_manager - INFO - Transaction committed successfully
2025-09-18 13:48:37,737 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 13:48:37,738 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 13:48:37,743 - db_manager - INFO - Starting database transaction
2025-09-18 13:48:37,743 - db_manager - INFO - Executing get_complainant_by_id: 
            SELECT complainant_id, complainant_unique_id, complainant_full_name,    complainant_pho...
2025-09-18 13:48:37,744 - db_manager - INFO - get_complainant_by_id completed in 0.01s. Rows: 1
2025-09-18 13:48:37,744 - db_manager - INFO - Transaction committed successfully
2025-09-18 13:48:37,744 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 13:48:37,744 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 13:48:37,749 - db_manager - INFO - Starting database transaction
2025-09-18 13:48:37,749 - db_manager - INFO - Executing decrypt_field: SELECT pgp_sym_decrypt(decode(%s, 'hex'), %s) AS decrypted...
2025-09-18 13:48:37,750 - db_manager - INFO - decrypt_field completed in 0.01s. Rows: 1
2025-09-18 13:48:37,750 - db_manager - INFO - Transaction committed successfully
2025-09-18 13:48:37,750 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 13:48:37,750 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 13:48:37,755 - db_manager - INFO - Starting database transaction
2025-09-18 13:48:37,755 - db_manager - INFO - Executing decrypt_field: SELECT pgp_sym_decrypt(decode(%s, 'hex'), %s) AS decrypted...
2025-09-18 13:48:37,757 - db_manager - INFO - decrypt_field completed in 0.01s. Rows: 1
2025-09-18 13:48:37,757 - db_manager - INFO - Transaction committed successfully
2025-09-18 13:48:37,757 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 13:48:37,757 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 13:48:37,763 - db_manager - INFO - Starting database transaction
2025-09-18 13:48:37,763 - db_manager - INFO - Executing decrypt_field: SELECT pgp_sym_decrypt(decode(%s, 'hex'), %s) AS decrypted...
2025-09-18 13:48:37,764 - db_manager - INFO - decrypt_field completed in 0.01s. Rows: 1
2025-09-18 13:48:37,764 - db_manager - INFO - Transaction committed successfully
2025-09-18 13:48:37,764 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 13:48:37,764 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 13:48:37,769 - db_manager - INFO - Starting database transaction
2025-09-18 13:48:37,769 - db_manager - INFO - Executing decrypt_field: SELECT pgp_sym_decrypt(decode(%s, 'hex'), %s) AS decrypted...
2025-09-18 13:48:37,771 - db_manager - INFO - decrypt_field completed in 0.01s. Rows: 1
2025-09-18 13:48:37,771 - db_manager - INFO - Transaction committed successfully
2025-09-18 13:48:37,772 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 13:48:37,772 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 13:48:37,777 - db_manager - INFO - Starting database transaction
2025-09-18 13:48:37,777 - db_manager - INFO - Executing get_grievance_by_id: 
                SELECT g.*, c.complainant_full_name, c.complainant_phone, c.complainant_email,
    ...
2025-09-18 13:48:37,779 - db_manager - INFO - get_grievance_by_id completed in 0.01s. Rows: 1
2025-09-18 13:48:37,779 - db_manager - INFO - Transaction committed successfully
2025-09-18 13:48:37,779 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 13:48:37,779 - db_manager - DEBUG - get_grievance_by_id: grievance_id: {'grievance_id': 'GR-20250918-KOJH-EA93-B', 'complainant_id': 'CM-20250918-KOJH-147D-B', 'grievance_categories': ['Environmental - Air Pollution'], 'grievance_categories_alternative': [], 'follow_up_question': ['How many people in your household are affected by the dust, and what health symptoms have you noticed (e.g., coughing, eye irritation)?'], 'grievance_summary': 'Dust from road works is everywhere in my house and my kids are coughing a lot.', 'grievance_description': 'dust everywhere in my house kids are coughing hard*', 'grievance_claimed_amount': None, 'grievance_location': None, 'language_code': 'en', 'grievance_classification_status': 'pending', 'grievance_creation_date': datetime.datetime(2025, 9, 18, 13, 48, 14, 90142, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'grievance_modification_date': datetime.datetime(2025, 9, 18, 13, 48, 37, 683803, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'is_temporary': True, 'source': 'bot', 'complainant_full_name': 'c30d0407030233b8be11afe988b371d23d01c53afe07fb4d00c6741563913c6e58303fdf7bfbe5a94dda4de63b0869eb2b0e4c0da24f850b6b8bc902bf426b0c28e0b8fd85ba77dd4c50755fa359', 'complainant_phone': 'c30d04070302e577f387e34861d868d23d0184867d19a59f225da37960e186522a751c4b1bf73ef2adf5d86debaa20469ac1841d733560eafb4484ca26aa74c0c045d17ee71d83ccbadf2fdfdce1', 'complainant_email': 'c30d0407030269e4569c921ec04868d23d01938b360f04db435a8bb7a4d6b3230b2189a67f9e118087d2826ad1642e1cc68450f728433e24b5dbdcefc50c359693bdb108a0c462c8521db5908651', 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_municipality': 'Birtamod Municipality', 'complainant_ward': None, 'complainant_village': 'Slot_Skipped', 'complainant_address': 'c30d04070302db91b585950beed364d23d01b06f9b3b863c910172b1ca863eb3092bca7f90b975792c3b9d89b1b2134108e7532e5bf0e76fba24edc57ffbfd69f314b36eb1f4607865cc1c1c2b59'}, results: [{'grievance_id': 'GR-20250918-KOJH-EA93-B', 'complainant_id': 'CM-20250918-KOJH-147D-B', 'grievance_categories': '["Environmental - Air Pollution"]', 'grievance_categories_alternative': '[]', 'follow_up_question': '["How many people in your household are affected by the dust, and what health symptoms have you noticed (e.g., coughing, eye irritation)?"]', 'grievance_summary': 'Dust from road works is everywhere in my house and my kids are coughing a lot.', 'grievance_description': 'dust everywhere in my house kids are coughing hard*', 'grievance_claimed_amount': None, 'grievance_location': None, 'language_code': 'en', 'grievance_classification_status': 'pending', 'grievance_creation_date': datetime.datetime(2025, 9, 18, 13, 48, 14, 90142, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'grievance_modification_date': datetime.datetime(2025, 9, 18, 13, 48, 37, 683803, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'is_temporary': True, 'source': 'bot', 'complainant_full_name': 'c30d0407030233b8be11afe988b371d23d01c53afe07fb4d00c6741563913c6e58303fdf7bfbe5a94dda4de63b0869eb2b0e4c0da24f850b6b8bc902bf426b0c28e0b8fd85ba77dd4c50755fa359', 'complainant_phone': 'c30d04070302e577f387e34861d868d23d0184867d19a59f225da37960e186522a751c4b1bf73ef2adf5d86debaa20469ac1841d733560eafb4484ca26aa74c0c045d17ee71d83ccbadf2fdfdce1', 'complainant_email': 'c30d0407030269e4569c921ec04868d23d01938b360f04db435a8bb7a4d6b3230b2189a67f9e118087d2826ad1642e1cc68450f728433e24b5dbdcefc50c359693bdb108a0c462c8521db5908651', 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_municipality': 'Birtamod Municipality', 'complainant_ward': None, 'complainant_village': 'Slot_Skipped', 'complainant_address': 'c30d04070302db91b585950beed364d23d01b06f9b3b863c910172b1ca863eb3092bca7f90b975792c3b9d89b1b2134108e7532e5bf0e76fba24edc57ffbfd69f314b36eb1f4607865cc1c1c2b59'}]
2025-09-18 13:48:37,779 - db_manager - INFO - update_complainant: Updating complainant with ID: CM-20250918-KOJH-147D-B
2025-09-18 13:48:37,780 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 13:48:37,784 - db_manager - INFO - Starting database transaction
2025-09-18 13:48:37,784 - db_manager - INFO - Executing encrypt_field: SELECT encode(pgp_sym_encrypt(%s, %s), 'hex') AS encrypted...
2025-09-18 13:48:37,785 - db_manager - INFO - encrypt_field completed in 0.01s. Rows: 1
2025-09-18 13:48:37,785 - db_manager - INFO - Transaction committed successfully
2025-09-18 13:48:37,786 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 13:48:37,786 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 13:48:37,791 - db_manager - INFO - Starting database transaction
2025-09-18 13:48:37,791 - db_manager - INFO - Executing encrypt_field: SELECT encode(pgp_sym_encrypt(%s, %s), 'hex') AS encrypted...
2025-09-18 13:48:37,792 - db_manager - INFO - encrypt_field completed in 0.01s. Rows: 1
2025-09-18 13:48:37,792 - db_manager - INFO - Transaction committed successfully
2025-09-18 13:48:37,792 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 13:48:37,792 - db_manager - DEBUG - encrypted phone number Not provided at encrypt_complainant_data: c30d04070302aba4208185a7c2dd7cd23d015a4b50f6bf2050dd145a1397ac6801423c6fc6f8725fa03c356a8e280c9698201d40ca41f7f5a8cbd36e1735c8402cb00438062e243377e94b4b523c
2025-09-18 13:48:37,792 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 13:48:37,797 - db_manager - INFO - Starting database transaction
2025-09-18 13:48:37,797 - db_manager - INFO - Executing encrypt_field: SELECT encode(pgp_sym_encrypt(%s, %s), 'hex') AS encrypted...
2025-09-18 13:48:37,798 - db_manager - INFO - encrypt_field completed in 0.01s. Rows: 1
2025-09-18 13:48:37,798 - db_manager - INFO - Transaction committed successfully
2025-09-18 13:48:37,798 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 13:48:37,798 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 13:48:37,802 - db_manager - INFO - Starting database transaction
2025-09-18 13:48:37,802 - db_manager - INFO - Executing encrypt_field: SELECT encode(pgp_sym_encrypt(%s, %s), 'hex') AS encrypted...
2025-09-18 13:48:37,803 - db_manager - INFO - encrypt_field completed in 0.01s. Rows: 1
2025-09-18 13:48:37,804 - db_manager - INFO - Transaction committed successfully
2025-09-18 13:48:37,804 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 13:48:37,804 - db_manager - DEBUG - phone number Not provided hashed to d83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f at hash_sensitive_data
2025-09-18 13:48:37,804 - db_manager - DEBUG - encrypted and hashed data at encrypt_and_hash_sensitive_data: {'complainant_full_name': 'c30d04070302ca8ee6b6313259a77fd23d016b8382842e50d2eec1faf6e0673635cd51a9a575720969c3ca0349d762f5bcdca786af762e2711cbdce6ab8ecaeb4d820b07b07270c8aa891b350159', 'complainant_phone': 'c30d04070302aba4208185a7c2dd7cd23d015a4b50f6bf2050dd145a1397ac6801423c6fc6f8725fa03c356a8e280c9698201d40ca41f7f5a8cbd36e1735c8402cb00438062e243377e94b4b523c', 'complainant_email': 'c30d04070302046347e73dd0963774d23d0166a82b160f774d643a5b1e35f4e8401eba69f3d440c811c5f6fadc771425e8d641d7b360dcb62af3555bc2c4d927de2215f2df92bc8430c4b965eba2', 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_municipality': 'Birtamod Municipality', 'complainant_village': 'Slot_Skipped', 'complainant_address': 'c30d0407030235829bbe63c876426cd23d01c5cce19f28bd64c9232d8b483825a46215d47c751deb8cacb5349b77dddf7256e0f37e22eb44312e8e648ecad083d2ca7a13661843b7ee8fe7224f8d', 'complainant_full_name_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'complainant_phone_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'complainant_email_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f'}
2025-09-18 13:48:37,804 - db_manager - DEBUG - encrypted_data at update_complainant: {'complainant_full_name': 'c30d04070302ca8ee6b6313259a77fd23d016b8382842e50d2eec1faf6e0673635cd51a9a575720969c3ca0349d762f5bcdca786af762e2711cbdce6ab8ecaeb4d820b07b07270c8aa891b350159', 'complainant_phone': 'c30d04070302aba4208185a7c2dd7cd23d015a4b50f6bf2050dd145a1397ac6801423c6fc6f8725fa03c356a8e280c9698201d40ca41f7f5a8cbd36e1735c8402cb00438062e243377e94b4b523c', 'complainant_email': 'c30d04070302046347e73dd0963774d23d0166a82b160f774d643a5b1e35f4e8401eba69f3d440c811c5f6fadc771425e8d641d7b360dcb62af3555bc2c4d927de2215f2df92bc8430c4b965eba2', 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_municipality': 'Birtamod Municipality', 'complainant_village': 'Slot_Skipped', 'complainant_address': 'c30d0407030235829bbe63c876426cd23d01c5cce19f28bd64c9232d8b483825a46215d47c751deb8cacb5349b77dddf7256e0f37e22eb44312e8e648ecad083d2ca7a13661843b7ee8fe7224f8d', 'complainant_full_name_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'complainant_phone_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'complainant_email_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f'}
2025-09-18 13:48:37,804 - db_manager - DEBUG - execute_update values: ('c30d04070302ca8ee6b6313259a77fd23d016b8382842e50d2eec1faf6e0673635cd51a9a575720969c3ca0349d762f5bcdca786af762e2711cbdce6ab8ecaeb4d820b07b07270c8aa891b350159', 'c30d04070302aba4208185a7c2dd7cd23d015a4b50f6bf2050dd145a1397ac6801423c6fc6f8725fa03c356a8e280c9698201d40ca41f7f5a8cbd36e1735c8402cb00438062e243377e94b4b523c', 'c30d04070302046347e73dd0963774d23d0166a82b160f774d643a5b1e35f4e8401eba69f3d440c811c5f6fadc771425e8d641d7b360dcb62af3555bc2c4d927de2215f2df92bc8430c4b965eba2', 'Koshi', 'Jhapa', 'Birtamod Municipality', 'Slot_Skipped', 'c30d0407030235829bbe63c876426cd23d01c5cce19f28bd64c9232d8b483825a46215d47c751deb8cacb5349b77dddf7256e0f37e22eb44312e8e648ecad083d2ca7a13661843b7ee8fe7224f8d', 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'CM-20250918-KOJH-147D-B')
2025-09-18 13:48:37,804 - db_manager - DEBUG - execute_update query: UPDATE complainants SET complainant_full_name = %s, complainant_phone = %s, complainant_email = %s, complainant_province = %s, complainant_district = %s, complainant_municipality = %s, complainant_village = %s, complainant_address = %s, complainant_full_name_hash = %s, complainant_phone_hash = %s, complainant_email_hash = %s WHERE complainant_id = %s
2025-09-18 13:48:37,804 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 13:48:37,808 - db_manager - INFO - Starting database transaction
2025-09-18 13:48:37,808 - db_manager - INFO - execute_update: Executing update query: UPDATE complainants SET complainant_full_name = %s, complainant_phone = %s, complainant_email = %s, ...
2025-09-18 13:48:37,809 - db_manager - INFO - execute_update: Update completed in 0.01s. Affected rows: 1
2025-09-18 13:48:37,811 - db_manager - INFO - Transaction committed successfully
2025-09-18 13:48:37,811 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 13:48:37,811 - db_manager - INFO - Complainant updated in db: CM-20250918-KOJH-147D-B
2025-09-18 13:48:37,811 - db_manager - INFO - update_grievance: Updating grievance with ID: GR-20250918-KOJH-EA93-B
2025-09-18 13:48:37,811 - db_manager - DEBUG - execute_update values: ('["Environmental - Air Pollution"]', 'Not provided', 'dust everywhere in my house kids are coughing hard*', 'GR-20250918-KOJH-EA93-B')
2025-09-18 13:48:37,811 - db_manager - DEBUG - execute_update query: 
                    UPDATE grievances 
                    SET grievance_categories = %s, grievance_summary = %s, grievance_description = %s, grievance_modification_date = CURRENT_TIMESTAMP
                    WHERE grievance_id = %s
                    RETURNING grievance_id
                
2025-09-18 13:48:37,812 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 13:48:37,816 - db_manager - INFO - Starting database transaction
2025-09-18 13:48:37,816 - db_manager - INFO - execute_update: Executing update query: 
                    UPDATE grievances 
                    SET grievance_categories = %s, grievance...
2025-09-18 13:48:37,817 - db_manager - INFO - execute_update: Update completed in 0.01s. Affected rows: 1
2025-09-18 13:48:37,819 - db_manager - INFO - Transaction committed successfully
2025-09-18 13:48:37,819 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 13:48:37,819 - db_manager - INFO - update_grievance: Updated grievance with ID: GR-20250918-KOJH-EA93-B, rows affected: 1
2025-09-18 13:48:37,819 - db_manager - INFO - Grievance updated in db: GR-20250918-KOJH-EA93-B
2025-09-18 13:52:25,918 - db_manager - INFO - create_complainant: Creating complainant with ID: CM-20250918-KOJH-1578-B
2025-09-18 13:52:25,918 - db_manager - DEBUG - encrypted and hashed data at encrypt_and_hash_sensitive_data: {'complainant_id': 'CM-20250918-KOJH-1578-B', 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_unique_id': 'CM-20250918-KOJH-1578-B'}
2025-09-18 13:52:25,918 - db_manager - DEBUG - query_keys at generate_query_string: dict_keys(['complainant_id', 'complainant_province', 'complainant_district', 'complainant_unique_id'])
2025-09-18 13:52:25,918 - db_manager - DEBUG - Generated query: INSERT INTO complainants (complainant_id, complainant_province, complainant_district, complainant_unique_id) VALUES (%s, %s, %s, %s)
2025-09-18 13:52:25,918 - db_manager - DEBUG - len of query_keys: 4
2025-09-18 13:52:25,918 - db_manager - DEBUG - Generated query: INSERT INTO complainants (complainant_id, complainant_province, complainant_district, complainant_unique_id) VALUES (%s, %s, %s, %s)
2025-09-18 13:52:25,918 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 13:52:25,924 - db_manager - INFO - Starting database transaction
2025-09-18 13:52:25,926 - db_manager - INFO - Transaction committed successfully
2025-09-18 13:52:25,926 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 13:52:25,926 - db_manager - INFO - create_complainant: Successfully created complainant with ID: CM-20250918-KOJH-1578-B
2025-09-18 13:52:25,926 - db_manager - INFO - create_grievance: Creating grievance with data: {'grievance_id': 'GR-20250918-KOJH-7FB7-B', 'complainant_id': 'CM-20250918-KOJH-1578-B', 'grievance_description': 'dust everywhere in my house kids are coughing hard*', 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_office': None, 'source': 'bot', 'complainant_unique_id': 'CM-20250918-KOJH-1578-B'}
2025-09-18 13:52:25,926 - db_manager - INFO - create_grievance: Creating grievance with ID: GR-20250918-KOJH-7FB7-B
2025-09-18 13:52:25,926 - db_manager - INFO - create_grievance: Creating grievance with allowed fields: ['grievance_id', 'complainant_id', 'grievance_categories', 'grievance_categories_alternative', 'follow_up_question', 'grievance_summary', 'grievance_description', 'grievance_claimed_amount', 'grievance_location', 'is_temporary', 'source', 'language_code', 'grievance_classification_status']
2025-09-18 13:52:25,926 - db_manager - DEBUG - query_keys at generate_query_string: dict_keys(['grievance_id', 'complainant_id', 'grievance_description', 'source'])
2025-09-18 13:52:25,926 - db_manager - DEBUG - Generated query: INSERT INTO grievances (grievance_id, complainant_id, grievance_description, source) VALUES (%s, %s, %s, %s) RETURNING grievance_id
2025-09-18 13:52:25,926 - db_manager - DEBUG - len of query_keys: 4
2025-09-18 13:52:25,926 - db_manager - DEBUG - Generated query: INSERT INTO grievances (grievance_id, complainant_id, grievance_description, source) VALUES (%s, %s, %s, %s) RETURNING grievance_id
2025-09-18 13:52:25,927 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 13:52:25,931 - db_manager - INFO - Starting database transaction
2025-09-18 13:52:25,935 - db_manager - INFO - Transaction committed successfully
2025-09-18 13:52:25,935 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 13:52:25,935 - db_manager - INFO - create_grievance: Successfully created grievance with ID: GR-20250918-KOJH-7FB7-B
2025-09-18 13:52:42,057 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 13:52:42,063 - db_manager - INFO - Starting database transaction
2025-09-18 13:52:42,063 - db_manager - INFO - Executing get_complainant_by_id: 
            SELECT complainant_id, complainant_unique_id, complainant_full_name,    complainant_pho...
2025-09-18 13:52:42,064 - db_manager - INFO - get_complainant_by_id completed in 0.01s. Rows: 1
2025-09-18 13:52:42,065 - db_manager - INFO - Transaction committed successfully
2025-09-18 13:52:42,065 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 13:52:42,065 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 13:52:42,069 - db_manager - INFO - Starting database transaction
2025-09-18 13:52:42,070 - db_manager - INFO - Executing get_grievance_by_id: 
                SELECT g.*, c.complainant_full_name, c.complainant_phone, c.complainant_email,
    ...
2025-09-18 13:52:42,071 - db_manager - INFO - get_grievance_by_id completed in 0.01s. Rows: 1
2025-09-18 13:52:42,071 - db_manager - INFO - Transaction committed successfully
2025-09-18 13:52:42,071 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 13:52:42,071 - db_manager - DEBUG - get_grievance_by_id: grievance_id: {'grievance_id': 'GR-20250918-KOJH-7FB7-B', 'complainant_id': 'CM-20250918-KOJH-1578-B', 'grievance_categories': ['Environmental - Air Pollution'], 'grievance_categories_alternative': [], 'follow_up_question': ['How many people in your household are affected by the dust and coughing, and for how long has this been happening?'], 'grievance_summary': 'Dust from road works fills the house and makes the children cough.', 'grievance_description': 'dust everywhere in my house kids are coughing hard*', 'grievance_claimed_amount': None, 'grievance_location': None, 'language_code': 'en', 'grievance_classification_status': 'pending', 'grievance_creation_date': datetime.datetime(2025, 9, 18, 13, 52, 25, 931769, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'grievance_modification_date': datetime.datetime(2025, 9, 18, 13, 52, 35, 594837, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'is_temporary': True, 'source': 'bot', 'complainant_full_name': None, 'complainant_phone': None, 'complainant_email': None, 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_municipality': None, 'complainant_ward': None, 'complainant_village': None, 'complainant_address': None}, results: [{'grievance_id': 'GR-20250918-KOJH-7FB7-B', 'complainant_id': 'CM-20250918-KOJH-1578-B', 'grievance_categories': '["Environmental - Air Pollution"]', 'grievance_categories_alternative': '[]', 'follow_up_question': '["How many people in your household are affected by the dust and coughing, and for how long has this been happening?"]', 'grievance_summary': 'Dust from road works fills the house and makes the children cough.', 'grievance_description': 'dust everywhere in my house kids are coughing hard*', 'grievance_claimed_amount': None, 'grievance_location': None, 'language_code': 'en', 'grievance_classification_status': 'pending', 'grievance_creation_date': datetime.datetime(2025, 9, 18, 13, 52, 25, 931769, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'grievance_modification_date': datetime.datetime(2025, 9, 18, 13, 52, 35, 594837, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'is_temporary': True, 'source': 'bot', 'complainant_full_name': None, 'complainant_phone': None, 'complainant_email': None, 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_municipality': None, 'complainant_ward': None, 'complainant_village': None, 'complainant_address': None}]
2025-09-18 13:52:42,071 - db_manager - INFO - update_complainant: Updating complainant with ID: CM-20250918-KOJH-1578-B
2025-09-18 13:52:42,072 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 13:52:42,076 - db_manager - INFO - Starting database transaction
2025-09-18 13:52:42,076 - db_manager - INFO - Executing encrypt_field: SELECT encode(pgp_sym_encrypt(%s, %s), 'hex') AS encrypted...
2025-09-18 13:52:42,077 - db_manager - INFO - encrypt_field completed in 0.01s. Rows: 1
2025-09-18 13:52:42,078 - db_manager - INFO - Transaction committed successfully
2025-09-18 13:52:42,078 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 13:52:42,078 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 13:52:42,082 - db_manager - INFO - Starting database transaction
2025-09-18 13:52:42,082 - db_manager - INFO - Executing encrypt_field: SELECT encode(pgp_sym_encrypt(%s, %s), 'hex') AS encrypted...
2025-09-18 13:52:42,083 - db_manager - INFO - encrypt_field completed in 0.01s. Rows: 1
2025-09-18 13:52:42,083 - db_manager - INFO - Transaction committed successfully
2025-09-18 13:52:42,083 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 13:52:42,083 - db_manager - DEBUG - encrypted phone number Not provided at encrypt_complainant_data: c30d04070302cf74a931df952d3672d23d012bdc776f81234d3a1e78e25669b1516e5a61a610fbed6dc77fd233caac66504a363ac0f971bdf3c4297380909f2400b7444e2f0e64daaaeff3225e5f
2025-09-18 13:52:42,084 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 13:52:42,088 - db_manager - INFO - Starting database transaction
2025-09-18 13:52:42,088 - db_manager - INFO - Executing encrypt_field: SELECT encode(pgp_sym_encrypt(%s, %s), 'hex') AS encrypted...
2025-09-18 13:52:42,089 - db_manager - INFO - encrypt_field completed in 0.01s. Rows: 1
2025-09-18 13:52:42,089 - db_manager - INFO - Transaction committed successfully
2025-09-18 13:52:42,089 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 13:52:42,089 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 13:52:42,094 - db_manager - INFO - Starting database transaction
2025-09-18 13:52:42,094 - db_manager - INFO - Executing encrypt_field: SELECT encode(pgp_sym_encrypt(%s, %s), 'hex') AS encrypted...
2025-09-18 13:52:42,095 - db_manager - INFO - encrypt_field completed in 0.01s. Rows: 1
2025-09-18 13:52:42,095 - db_manager - INFO - Transaction committed successfully
2025-09-18 13:52:42,095 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 13:52:42,095 - db_manager - DEBUG - phone number Not provided hashed to d83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f at hash_sensitive_data
2025-09-18 13:52:42,095 - db_manager - DEBUG - encrypted and hashed data at encrypt_and_hash_sensitive_data: {'complainant_full_name': 'c30d04070302907b2af119ffe9e070d23d016ca5c263447bd5b95b6ee7f4c4f11392486a18906719e3410494e795d7af55f597ee81c798028dd249278b191768d25c16cbb14a18d7dcaae02a8fa9', 'complainant_phone': 'c30d04070302cf74a931df952d3672d23d012bdc776f81234d3a1e78e25669b1516e5a61a610fbed6dc77fd233caac66504a363ac0f971bdf3c4297380909f2400b7444e2f0e64daaaeff3225e5f', 'complainant_email': 'c30d040703028cd4a59f99113a4d71d23d01466816931ed48485af3b1752135ce5972153bf69ffcf28e0fcff6c83c45e30ce9bb015e46a307eb1a599eb6622c94d6441ba4f2fef11967a74371cb5', 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_municipality': 'Birtamod Municipality', 'complainant_village': 'Not provided', 'complainant_address': 'c30d040703024c4af2fb29ee439860d23d01cf01a77f1fa648b16195cd1b7ff1355ea373fa16e4783d5f492b7b14dc37e9d58085c36b1fe4af3f29da92e15d937eb439abfe6c24f7a323554d9db4', 'complainant_full_name_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'complainant_phone_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'complainant_email_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f'}
2025-09-18 13:52:42,095 - db_manager - DEBUG - encrypted_data at update_complainant: {'complainant_full_name': 'c30d04070302907b2af119ffe9e070d23d016ca5c263447bd5b95b6ee7f4c4f11392486a18906719e3410494e795d7af55f597ee81c798028dd249278b191768d25c16cbb14a18d7dcaae02a8fa9', 'complainant_phone': 'c30d04070302cf74a931df952d3672d23d012bdc776f81234d3a1e78e25669b1516e5a61a610fbed6dc77fd233caac66504a363ac0f971bdf3c4297380909f2400b7444e2f0e64daaaeff3225e5f', 'complainant_email': 'c30d040703028cd4a59f99113a4d71d23d01466816931ed48485af3b1752135ce5972153bf69ffcf28e0fcff6c83c45e30ce9bb015e46a307eb1a599eb6622c94d6441ba4f2fef11967a74371cb5', 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_municipality': 'Birtamod Municipality', 'complainant_village': 'Not provided', 'complainant_address': 'c30d040703024c4af2fb29ee439860d23d01cf01a77f1fa648b16195cd1b7ff1355ea373fa16e4783d5f492b7b14dc37e9d58085c36b1fe4af3f29da92e15d937eb439abfe6c24f7a323554d9db4', 'complainant_full_name_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'complainant_phone_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'complainant_email_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f'}
2025-09-18 13:52:42,095 - db_manager - DEBUG - execute_update values: ('c30d04070302907b2af119ffe9e070d23d016ca5c263447bd5b95b6ee7f4c4f11392486a18906719e3410494e795d7af55f597ee81c798028dd249278b191768d25c16cbb14a18d7dcaae02a8fa9', 'c30d04070302cf74a931df952d3672d23d012bdc776f81234d3a1e78e25669b1516e5a61a610fbed6dc77fd233caac66504a363ac0f971bdf3c4297380909f2400b7444e2f0e64daaaeff3225e5f', 'c30d040703028cd4a59f99113a4d71d23d01466816931ed48485af3b1752135ce5972153bf69ffcf28e0fcff6c83c45e30ce9bb015e46a307eb1a599eb6622c94d6441ba4f2fef11967a74371cb5', 'Koshi', 'Jhapa', 'Birtamod Municipality', 'Not provided', 'c30d040703024c4af2fb29ee439860d23d01cf01a77f1fa648b16195cd1b7ff1355ea373fa16e4783d5f492b7b14dc37e9d58085c36b1fe4af3f29da92e15d937eb439abfe6c24f7a323554d9db4', 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'CM-20250918-KOJH-1578-B')
2025-09-18 13:52:42,095 - db_manager - DEBUG - execute_update query: UPDATE complainants SET complainant_full_name = %s, complainant_phone = %s, complainant_email = %s, complainant_province = %s, complainant_district = %s, complainant_municipality = %s, complainant_village = %s, complainant_address = %s, complainant_full_name_hash = %s, complainant_phone_hash = %s, complainant_email_hash = %s WHERE complainant_id = %s
2025-09-18 13:52:42,095 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 13:52:42,100 - db_manager - INFO - Starting database transaction
2025-09-18 13:52:42,100 - db_manager - INFO - execute_update: Executing update query: UPDATE complainants SET complainant_full_name = %s, complainant_phone = %s, complainant_email = %s, ...
2025-09-18 13:52:42,101 - db_manager - INFO - execute_update: Update completed in 0.01s. Affected rows: 1
2025-09-18 13:52:42,103 - db_manager - INFO - Transaction committed successfully
2025-09-18 13:52:42,103 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 13:52:42,103 - db_manager - INFO - Complainant updated in db: CM-20250918-KOJH-1578-B
2025-09-18 13:52:42,103 - db_manager - INFO - update_grievance: Updating grievance with ID: GR-20250918-KOJH-7FB7-B
2025-09-18 13:52:42,103 - db_manager - DEBUG - execute_update values: ('dust everywhere in my house kids are coughing hard*', 'GR-20250918-KOJH-7FB7-B')
2025-09-18 13:52:42,103 - db_manager - DEBUG - execute_update query: 
                    UPDATE grievances 
                    SET grievance_description = %s, grievance_modification_date = CURRENT_TIMESTAMP
                    WHERE grievance_id = %s
                    RETURNING grievance_id
                
2025-09-18 13:52:42,103 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 13:52:42,108 - db_manager - INFO - Starting database transaction
2025-09-18 13:52:42,108 - db_manager - INFO - execute_update: Executing update query: 
                    UPDATE grievances 
                    SET grievance_description = %s, grievanc...
2025-09-18 13:52:42,109 - db_manager - INFO - execute_update: Update completed in 0.01s. Affected rows: 1
2025-09-18 13:52:42,111 - db_manager - INFO - Transaction committed successfully
2025-09-18 13:52:42,111 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 13:52:42,111 - db_manager - INFO - update_grievance: Updated grievance with ID: GR-20250918-KOJH-7FB7-B, rows affected: 1
2025-09-18 13:52:42,111 - db_manager - INFO - Grievance updated in db: GR-20250918-KOJH-7FB7-B
2025-09-18 13:52:42,111 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 13:52:42,116 - db_manager - INFO - Starting database transaction
2025-09-18 13:52:42,116 - db_manager - INFO - Executing get_grievance_files: 
            SELECT file_id, file_name, file_type, file_size, upload_timestamp
            FROM file...
2025-09-18 13:52:42,117 - db_manager - INFO - get_grievance_files completed in 0.01s. Rows: 0
2025-09-18 13:52:42,117 - db_manager - INFO - Transaction committed successfully
2025-09-18 13:52:42,117 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 13:52:42,117 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 13:52:42,122 - db_manager - INFO - Starting database transaction
2025-09-18 13:52:42,122 - db_manager - INFO - Executing get_grievance_files: 
            SELECT file_id, file_name, file_type, file_size, upload_timestamp
            FROM file...
2025-09-18 13:52:42,123 - db_manager - INFO - get_grievance_files completed in 0.01s. Rows: 0
2025-09-18 13:52:42,123 - db_manager - INFO - Transaction committed successfully
2025-09-18 13:52:42,123 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 13:52:42,517 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 13:52:42,523 - db_manager - INFO - Starting database transaction
2025-09-18 13:52:42,523 - db_manager - INFO - Executing get_grievance_by_id: 
                SELECT g.*, c.complainant_full_name, c.complainant_phone, c.complainant_email,
    ...
2025-09-18 13:52:42,525 - db_manager - INFO - get_grievance_by_id completed in 0.01s. Rows: 1
2025-09-18 13:52:42,525 - db_manager - INFO - Transaction committed successfully
2025-09-18 13:52:42,525 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 13:52:42,525 - db_manager - DEBUG - get_grievance_by_id: grievance_id: {'grievance_id': 'GR-20250918-KOJH-7FB7-B', 'complainant_id': 'CM-20250918-KOJH-1578-B', 'grievance_categories': ['Environmental - Air Pollution'], 'grievance_categories_alternative': [], 'follow_up_question': ['How many people in your household are affected by the dust and coughing, and for how long has this been happening?'], 'grievance_summary': 'Dust from road works fills the house and makes the children cough.', 'grievance_description': 'dust everywhere in my house kids are coughing hard*', 'grievance_claimed_amount': None, 'grievance_location': None, 'language_code': 'en', 'grievance_classification_status': 'pending', 'grievance_creation_date': datetime.datetime(2025, 9, 18, 13, 52, 25, 931769, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'grievance_modification_date': datetime.datetime(2025, 9, 18, 13, 52, 42, 108480, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'is_temporary': True, 'source': 'bot', 'complainant_full_name': 'c30d04070302907b2af119ffe9e070d23d016ca5c263447bd5b95b6ee7f4c4f11392486a18906719e3410494e795d7af55f597ee81c798028dd249278b191768d25c16cbb14a18d7dcaae02a8fa9', 'complainant_phone': 'c30d04070302cf74a931df952d3672d23d012bdc776f81234d3a1e78e25669b1516e5a61a610fbed6dc77fd233caac66504a363ac0f971bdf3c4297380909f2400b7444e2f0e64daaaeff3225e5f', 'complainant_email': 'c30d040703028cd4a59f99113a4d71d23d01466816931ed48485af3b1752135ce5972153bf69ffcf28e0fcff6c83c45e30ce9bb015e46a307eb1a599eb6622c94d6441ba4f2fef11967a74371cb5', 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_municipality': 'Birtamod Municipality', 'complainant_ward': None, 'complainant_village': 'Not provided', 'complainant_address': 'c30d040703024c4af2fb29ee439860d23d01cf01a77f1fa648b16195cd1b7ff1355ea373fa16e4783d5f492b7b14dc37e9d58085c36b1fe4af3f29da92e15d937eb439abfe6c24f7a323554d9db4'}, results: [{'grievance_id': 'GR-20250918-KOJH-7FB7-B', 'complainant_id': 'CM-20250918-KOJH-1578-B', 'grievance_categories': '["Environmental - Air Pollution"]', 'grievance_categories_alternative': '[]', 'follow_up_question': '["How many people in your household are affected by the dust and coughing, and for how long has this been happening?"]', 'grievance_summary': 'Dust from road works fills the house and makes the children cough.', 'grievance_description': 'dust everywhere in my house kids are coughing hard*', 'grievance_claimed_amount': None, 'grievance_location': None, 'language_code': 'en', 'grievance_classification_status': 'pending', 'grievance_creation_date': datetime.datetime(2025, 9, 18, 13, 52, 25, 931769, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'grievance_modification_date': datetime.datetime(2025, 9, 18, 13, 52, 42, 108480, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'is_temporary': True, 'source': 'bot', 'complainant_full_name': 'c30d04070302907b2af119ffe9e070d23d016ca5c263447bd5b95b6ee7f4c4f11392486a18906719e3410494e795d7af55f597ee81c798028dd249278b191768d25c16cbb14a18d7dcaae02a8fa9', 'complainant_phone': 'c30d04070302cf74a931df952d3672d23d012bdc776f81234d3a1e78e25669b1516e5a61a610fbed6dc77fd233caac66504a363ac0f971bdf3c4297380909f2400b7444e2f0e64daaaeff3225e5f', 'complainant_email': 'c30d040703028cd4a59f99113a4d71d23d01466816931ed48485af3b1752135ce5972153bf69ffcf28e0fcff6c83c45e30ce9bb015e46a307eb1a599eb6622c94d6441ba4f2fef11967a74371cb5', 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_municipality': 'Birtamod Municipality', 'complainant_ward': None, 'complainant_village': 'Not provided', 'complainant_address': 'c30d040703024c4af2fb29ee439860d23d01cf01a77f1fa648b16195cd1b7ff1355ea373fa16e4783d5f492b7b14dc37e9d58085c36b1fe4af3f29da92e15d937eb439abfe6c24f7a323554d9db4'}]
2025-09-18 13:52:44,915 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 13:52:44,925 - db_manager - INFO - Starting database transaction
2025-09-18 13:52:44,926 - db_manager - INFO - Executing get_grievance_files: 
            SELECT file_id, file_name, file_type, file_size, upload_timestamp
            FROM file...
2025-09-18 13:52:44,929 - db_manager - INFO - get_grievance_files completed in 0.01s. Rows: 0
2025-09-18 13:52:44,929 - db_manager - INFO - Transaction committed successfully
2025-09-18 13:52:44,929 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 13:52:44,930 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 13:52:44,936 - db_manager - INFO - Starting database transaction
2025-09-18 13:52:44,936 - db_manager - INFO - Executing get_complainant_by_id: 
            SELECT complainant_id, complainant_unique_id, complainant_full_name,    complainant_pho...
2025-09-18 13:52:44,937 - db_manager - INFO - get_complainant_by_id completed in 0.01s. Rows: 1
2025-09-18 13:52:44,937 - db_manager - INFO - Transaction committed successfully
2025-09-18 13:52:44,937 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 13:52:44,938 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 13:52:44,944 - db_manager - INFO - Starting database transaction
2025-09-18 13:52:44,944 - db_manager - INFO - Executing decrypt_field: SELECT pgp_sym_decrypt(decode(%s, 'hex'), %s) AS decrypted...
2025-09-18 13:52:44,945 - db_manager - INFO - decrypt_field completed in 0.01s. Rows: 1
2025-09-18 13:52:44,946 - db_manager - INFO - Transaction committed successfully
2025-09-18 13:52:44,946 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 13:52:44,946 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 13:52:44,952 - db_manager - INFO - Starting database transaction
2025-09-18 13:52:44,952 - db_manager - INFO - Executing decrypt_field: SELECT pgp_sym_decrypt(decode(%s, 'hex'), %s) AS decrypted...
2025-09-18 13:52:44,954 - db_manager - INFO - decrypt_field completed in 0.01s. Rows: 1
2025-09-18 13:52:44,955 - db_manager - INFO - Transaction committed successfully
2025-09-18 13:52:44,955 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 13:52:44,955 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 13:52:44,960 - db_manager - INFO - Starting database transaction
2025-09-18 13:52:44,960 - db_manager - INFO - Executing decrypt_field: SELECT pgp_sym_decrypt(decode(%s, 'hex'), %s) AS decrypted...
2025-09-18 13:52:44,961 - db_manager - INFO - decrypt_field completed in 0.01s. Rows: 1
2025-09-18 13:52:44,962 - db_manager - INFO - Transaction committed successfully
2025-09-18 13:52:44,962 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 13:52:44,962 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 13:52:44,968 - db_manager - INFO - Starting database transaction
2025-09-18 13:52:44,968 - db_manager - INFO - Executing decrypt_field: SELECT pgp_sym_decrypt(decode(%s, 'hex'), %s) AS decrypted...
2025-09-18 13:52:44,970 - db_manager - INFO - decrypt_field completed in 0.01s. Rows: 1
2025-09-18 13:52:44,970 - db_manager - INFO - Transaction committed successfully
2025-09-18 13:52:44,970 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 13:52:44,971 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 13:52:44,977 - db_manager - INFO - Starting database transaction
2025-09-18 13:52:44,977 - db_manager - INFO - Executing get_grievance_by_id: 
                SELECT g.*, c.complainant_full_name, c.complainant_phone, c.complainant_email,
    ...
2025-09-18 13:52:44,979 - db_manager - INFO - get_grievance_by_id completed in 0.01s. Rows: 1
2025-09-18 13:52:44,979 - db_manager - INFO - Transaction committed successfully
2025-09-18 13:52:44,979 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 13:52:44,979 - db_manager - DEBUG - get_grievance_by_id: grievance_id: {'grievance_id': 'GR-20250918-KOJH-7FB7-B', 'complainant_id': 'CM-20250918-KOJH-1578-B', 'grievance_categories': ['Environmental - Air Pollution'], 'grievance_categories_alternative': [], 'follow_up_question': ['How many people in your household are affected by the dust and coughing, and for how long has this been happening?'], 'grievance_summary': 'Dust from road works fills the house and makes the children cough.', 'grievance_description': 'dust everywhere in my house kids are coughing hard*', 'grievance_claimed_amount': None, 'grievance_location': None, 'language_code': 'en', 'grievance_classification_status': 'pending', 'grievance_creation_date': datetime.datetime(2025, 9, 18, 13, 52, 25, 931769, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'grievance_modification_date': datetime.datetime(2025, 9, 18, 13, 52, 42, 108480, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'is_temporary': True, 'source': 'bot', 'complainant_full_name': 'c30d04070302907b2af119ffe9e070d23d016ca5c263447bd5b95b6ee7f4c4f11392486a18906719e3410494e795d7af55f597ee81c798028dd249278b191768d25c16cbb14a18d7dcaae02a8fa9', 'complainant_phone': 'c30d04070302cf74a931df952d3672d23d012bdc776f81234d3a1e78e25669b1516e5a61a610fbed6dc77fd233caac66504a363ac0f971bdf3c4297380909f2400b7444e2f0e64daaaeff3225e5f', 'complainant_email': 'c30d040703028cd4a59f99113a4d71d23d01466816931ed48485af3b1752135ce5972153bf69ffcf28e0fcff6c83c45e30ce9bb015e46a307eb1a599eb6622c94d6441ba4f2fef11967a74371cb5', 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_municipality': 'Birtamod Municipality', 'complainant_ward': None, 'complainant_village': 'Not provided', 'complainant_address': 'c30d040703024c4af2fb29ee439860d23d01cf01a77f1fa648b16195cd1b7ff1355ea373fa16e4783d5f492b7b14dc37e9d58085c36b1fe4af3f29da92e15d937eb439abfe6c24f7a323554d9db4'}, results: [{'grievance_id': 'GR-20250918-KOJH-7FB7-B', 'complainant_id': 'CM-20250918-KOJH-1578-B', 'grievance_categories': '["Environmental - Air Pollution"]', 'grievance_categories_alternative': '[]', 'follow_up_question': '["How many people in your household are affected by the dust and coughing, and for how long has this been happening?"]', 'grievance_summary': 'Dust from road works fills the house and makes the children cough.', 'grievance_description': 'dust everywhere in my house kids are coughing hard*', 'grievance_claimed_amount': None, 'grievance_location': None, 'language_code': 'en', 'grievance_classification_status': 'pending', 'grievance_creation_date': datetime.datetime(2025, 9, 18, 13, 52, 25, 931769, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'grievance_modification_date': datetime.datetime(2025, 9, 18, 13, 52, 42, 108480, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'is_temporary': True, 'source': 'bot', 'complainant_full_name': 'c30d04070302907b2af119ffe9e070d23d016ca5c263447bd5b95b6ee7f4c4f11392486a18906719e3410494e795d7af55f597ee81c798028dd249278b191768d25c16cbb14a18d7dcaae02a8fa9', 'complainant_phone': 'c30d04070302cf74a931df952d3672d23d012bdc776f81234d3a1e78e25669b1516e5a61a610fbed6dc77fd233caac66504a363ac0f971bdf3c4297380909f2400b7444e2f0e64daaaeff3225e5f', 'complainant_email': 'c30d040703028cd4a59f99113a4d71d23d01466816931ed48485af3b1752135ce5972153bf69ffcf28e0fcff6c83c45e30ce9bb015e46a307eb1a599eb6622c94d6441ba4f2fef11967a74371cb5', 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_municipality': 'Birtamod Municipality', 'complainant_ward': None, 'complainant_village': 'Not provided', 'complainant_address': 'c30d040703024c4af2fb29ee439860d23d01cf01a77f1fa648b16195cd1b7ff1355ea373fa16e4783d5f492b7b14dc37e9d58085c36b1fe4af3f29da92e15d937eb439abfe6c24f7a323554d9db4'}]
2025-09-18 13:52:44,980 - db_manager - INFO - update_complainant: Updating complainant with ID: CM-20250918-KOJH-1578-B
2025-09-18 13:52:44,980 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 13:52:44,985 - db_manager - INFO - Starting database transaction
2025-09-18 13:52:44,985 - db_manager - INFO - Executing encrypt_field: SELECT encode(pgp_sym_encrypt(%s, %s), 'hex') AS encrypted...
2025-09-18 13:52:44,987 - db_manager - INFO - encrypt_field completed in 0.01s. Rows: 1
2025-09-18 13:52:44,987 - db_manager - INFO - Transaction committed successfully
2025-09-18 13:52:44,987 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 13:52:44,987 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 13:52:44,992 - db_manager - INFO - Starting database transaction
2025-09-18 13:52:44,993 - db_manager - INFO - Executing encrypt_field: SELECT encode(pgp_sym_encrypt(%s, %s), 'hex') AS encrypted...
2025-09-18 13:52:44,994 - db_manager - INFO - encrypt_field completed in 0.01s. Rows: 1
2025-09-18 13:52:44,994 - db_manager - INFO - Transaction committed successfully
2025-09-18 13:52:44,994 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 13:52:44,994 - db_manager - DEBUG - encrypted phone number Not provided at encrypt_complainant_data: c30d0407030209b59d2af81b9e1e61d23d01628f4f90fd0430abaf7cc0792b0628cfc7cdb283ce318d84d130aa3644d64230237c35916f19e8c0e784301ed0538de9d0cd1d4413b10964f20fe045
2025-09-18 13:52:44,994 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 13:52:45,001 - db_manager - INFO - Starting database transaction
2025-09-18 13:52:45,001 - db_manager - INFO - Executing encrypt_field: SELECT encode(pgp_sym_encrypt(%s, %s), 'hex') AS encrypted...
2025-09-18 13:52:45,002 - db_manager - INFO - encrypt_field completed in 0.01s. Rows: 1
2025-09-18 13:52:45,003 - db_manager - INFO - Transaction committed successfully
2025-09-18 13:52:45,003 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 13:52:45,003 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 13:52:45,008 - db_manager - INFO - Starting database transaction
2025-09-18 13:52:45,008 - db_manager - INFO - Executing encrypt_field: SELECT encode(pgp_sym_encrypt(%s, %s), 'hex') AS encrypted...
2025-09-18 13:52:45,009 - db_manager - INFO - encrypt_field completed in 0.01s. Rows: 1
2025-09-18 13:52:45,010 - db_manager - INFO - Transaction committed successfully
2025-09-18 13:52:45,010 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 13:52:45,010 - db_manager - DEBUG - phone number Not provided hashed to d83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f at hash_sensitive_data
2025-09-18 13:52:45,010 - db_manager - DEBUG - encrypted and hashed data at encrypt_and_hash_sensitive_data: {'complainant_full_name': 'c30d04070302dfc8da1bd9e04b766ed23d019cf53a2a74f9227a673432f3ef5a07cdfeacf07b87464bb7158bf4a926d5d546c9c6fd32f47c808963cb3e462996e40f1ed75c7e66c9489fe3b57254', 'complainant_phone': 'c30d0407030209b59d2af81b9e1e61d23d01628f4f90fd0430abaf7cc0792b0628cfc7cdb283ce318d84d130aa3644d64230237c35916f19e8c0e784301ed0538de9d0cd1d4413b10964f20fe045', 'complainant_email': 'c30d04070302e7d84f44ac55d64a62d23d01c5a7c6a01e0ec3a86def636d9793917d71e78dfe710ebd2fbc04044ffe28c28e86cc194992b3eb874b046c617e74ccaf4b52adb44f40810feeb1e74c', 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_municipality': 'Birtamod Municipality', 'complainant_village': 'Not provided', 'complainant_address': 'c30d0407030271e2147b8372a7c06ed23d01701dd35ccf050e23764938f79793c67f65fec67f27de070f3f09bae5e9ce957d787418c2215af6113f181e1d74ebfa07c6fe1bde1671120c7f22f54a', 'complainant_full_name_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'complainant_phone_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'complainant_email_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f'}
2025-09-18 13:52:45,010 - db_manager - DEBUG - encrypted_data at update_complainant: {'complainant_full_name': 'c30d04070302dfc8da1bd9e04b766ed23d019cf53a2a74f9227a673432f3ef5a07cdfeacf07b87464bb7158bf4a926d5d546c9c6fd32f47c808963cb3e462996e40f1ed75c7e66c9489fe3b57254', 'complainant_phone': 'c30d0407030209b59d2af81b9e1e61d23d01628f4f90fd0430abaf7cc0792b0628cfc7cdb283ce318d84d130aa3644d64230237c35916f19e8c0e784301ed0538de9d0cd1d4413b10964f20fe045', 'complainant_email': 'c30d04070302e7d84f44ac55d64a62d23d01c5a7c6a01e0ec3a86def636d9793917d71e78dfe710ebd2fbc04044ffe28c28e86cc194992b3eb874b046c617e74ccaf4b52adb44f40810feeb1e74c', 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_municipality': 'Birtamod Municipality', 'complainant_village': 'Not provided', 'complainant_address': 'c30d0407030271e2147b8372a7c06ed23d01701dd35ccf050e23764938f79793c67f65fec67f27de070f3f09bae5e9ce957d787418c2215af6113f181e1d74ebfa07c6fe1bde1671120c7f22f54a', 'complainant_full_name_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'complainant_phone_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'complainant_email_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f'}
2025-09-18 13:52:45,010 - db_manager - DEBUG - execute_update values: ('c30d04070302dfc8da1bd9e04b766ed23d019cf53a2a74f9227a673432f3ef5a07cdfeacf07b87464bb7158bf4a926d5d546c9c6fd32f47c808963cb3e462996e40f1ed75c7e66c9489fe3b57254', 'c30d0407030209b59d2af81b9e1e61d23d01628f4f90fd0430abaf7cc0792b0628cfc7cdb283ce318d84d130aa3644d64230237c35916f19e8c0e784301ed0538de9d0cd1d4413b10964f20fe045', 'c30d04070302e7d84f44ac55d64a62d23d01c5a7c6a01e0ec3a86def636d9793917d71e78dfe710ebd2fbc04044ffe28c28e86cc194992b3eb874b046c617e74ccaf4b52adb44f40810feeb1e74c', 'Koshi', 'Jhapa', 'Birtamod Municipality', 'Not provided', 'c30d0407030271e2147b8372a7c06ed23d01701dd35ccf050e23764938f79793c67f65fec67f27de070f3f09bae5e9ce957d787418c2215af6113f181e1d74ebfa07c6fe1bde1671120c7f22f54a', 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'CM-20250918-KOJH-1578-B')
2025-09-18 13:52:45,010 - db_manager - DEBUG - execute_update query: UPDATE complainants SET complainant_full_name = %s, complainant_phone = %s, complainant_email = %s, complainant_province = %s, complainant_district = %s, complainant_municipality = %s, complainant_village = %s, complainant_address = %s, complainant_full_name_hash = %s, complainant_phone_hash = %s, complainant_email_hash = %s WHERE complainant_id = %s
2025-09-18 13:52:45,010 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 13:52:45,015 - db_manager - INFO - Starting database transaction
2025-09-18 13:52:45,015 - db_manager - INFO - execute_update: Executing update query: UPDATE complainants SET complainant_full_name = %s, complainant_phone = %s, complainant_email = %s, ...
2025-09-18 13:52:45,016 - db_manager - INFO - execute_update: Update completed in 0.01s. Affected rows: 1
2025-09-18 13:52:45,019 - db_manager - INFO - Transaction committed successfully
2025-09-18 13:52:45,019 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 13:52:45,019 - db_manager - INFO - Complainant updated in db: CM-20250918-KOJH-1578-B
2025-09-18 13:52:45,019 - db_manager - INFO - update_grievance: Updating grievance with ID: GR-20250918-KOJH-7FB7-B
2025-09-18 13:52:45,019 - db_manager - DEBUG - execute_update values: ('["Environmental - Air Pollution"]', 'Not provided', 'dust everywhere in my house kids are coughing hard*', 'GR-20250918-KOJH-7FB7-B')
2025-09-18 13:52:45,019 - db_manager - DEBUG - execute_update query: 
                    UPDATE grievances 
                    SET grievance_categories = %s, grievance_summary = %s, grievance_description = %s, grievance_modification_date = CURRENT_TIMESTAMP
                    WHERE grievance_id = %s
                    RETURNING grievance_id
                
2025-09-18 13:52:45,019 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 13:52:45,025 - db_manager - INFO - Starting database transaction
2025-09-18 13:52:45,025 - db_manager - INFO - execute_update: Executing update query: 
                    UPDATE grievances 
                    SET grievance_categories = %s, grievance...
2025-09-18 13:52:45,026 - db_manager - INFO - execute_update: Update completed in 0.01s. Affected rows: 1
2025-09-18 13:52:45,028 - db_manager - INFO - Transaction committed successfully
2025-09-18 13:52:45,028 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 13:52:45,028 - db_manager - INFO - update_grievance: Updated grievance with ID: GR-20250918-KOJH-7FB7-B, rows affected: 1
2025-09-18 13:52:45,028 - db_manager - INFO - Grievance updated in db: GR-20250918-KOJH-7FB7-B
2025-09-18 13:53:08,695 - db_manager - INFO - create_complainant: Creating complainant with ID: CM-20250918-KOJH-ADD7-B
2025-09-18 13:53:08,695 - db_manager - DEBUG - encrypted and hashed data at encrypt_and_hash_sensitive_data: {'complainant_id': 'CM-20250918-KOJH-ADD7-B', 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_unique_id': 'CM-20250918-KOJH-ADD7-B'}
2025-09-18 13:53:08,695 - db_manager - DEBUG - query_keys at generate_query_string: dict_keys(['complainant_id', 'complainant_province', 'complainant_district', 'complainant_unique_id'])
2025-09-18 13:53:08,695 - db_manager - DEBUG - Generated query: INSERT INTO complainants (complainant_id, complainant_province, complainant_district, complainant_unique_id) VALUES (%s, %s, %s, %s)
2025-09-18 13:53:08,695 - db_manager - DEBUG - len of query_keys: 4
2025-09-18 13:53:08,695 - db_manager - DEBUG - Generated query: INSERT INTO complainants (complainant_id, complainant_province, complainant_district, complainant_unique_id) VALUES (%s, %s, %s, %s)
2025-09-18 13:53:08,695 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 13:53:08,701 - db_manager - INFO - Starting database transaction
2025-09-18 13:53:08,705 - db_manager - INFO - Transaction committed successfully
2025-09-18 13:53:08,705 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 13:53:08,705 - db_manager - INFO - create_complainant: Successfully created complainant with ID: CM-20250918-KOJH-ADD7-B
2025-09-18 13:53:08,705 - db_manager - INFO - create_grievance: Creating grievance with data: {'grievance_id': 'GR-20250918-KOJH-52B1-B', 'complainant_id': 'CM-20250918-KOJH-ADD7-B', 'grievance_description': 'dust everywhere in my house kids are coughing hard*', 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_office': None, 'source': 'bot', 'complainant_unique_id': 'CM-20250918-KOJH-ADD7-B'}
2025-09-18 13:53:08,705 - db_manager - INFO - create_grievance: Creating grievance with ID: GR-20250918-KOJH-52B1-B
2025-09-18 13:53:08,705 - db_manager - INFO - create_grievance: Creating grievance with allowed fields: ['grievance_id', 'complainant_id', 'grievance_categories', 'grievance_categories_alternative', 'follow_up_question', 'grievance_summary', 'grievance_description', 'grievance_claimed_amount', 'grievance_location', 'is_temporary', 'source', 'language_code', 'grievance_classification_status']
2025-09-18 13:53:08,705 - db_manager - DEBUG - query_keys at generate_query_string: dict_keys(['grievance_id', 'complainant_id', 'grievance_description', 'source'])
2025-09-18 13:53:08,705 - db_manager - DEBUG - Generated query: INSERT INTO grievances (grievance_id, complainant_id, grievance_description, source) VALUES (%s, %s, %s, %s) RETURNING grievance_id
2025-09-18 13:53:08,705 - db_manager - DEBUG - len of query_keys: 4
2025-09-18 13:53:08,705 - db_manager - DEBUG - Generated query: INSERT INTO grievances (grievance_id, complainant_id, grievance_description, source) VALUES (%s, %s, %s, %s) RETURNING grievance_id
2025-09-18 13:53:08,705 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 13:53:08,710 - db_manager - INFO - Starting database transaction
2025-09-18 13:53:08,714 - db_manager - INFO - Transaction committed successfully
2025-09-18 13:53:08,714 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 13:53:08,714 - db_manager - INFO - create_grievance: Successfully created grievance with ID: GR-20250918-KOJH-52B1-B
2025-09-18 13:53:10,338 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 13:53:10,343 - db_manager - INFO - Starting database transaction
2025-09-18 13:53:10,344 - db_manager - INFO - Executing get_complainant_by_id: 
            SELECT complainant_id, complainant_unique_id, complainant_full_name,    complainant_pho...
2025-09-18 13:53:10,345 - db_manager - INFO - get_complainant_by_id completed in 0.01s. Rows: 1
2025-09-18 13:53:10,345 - db_manager - INFO - Transaction committed successfully
2025-09-18 13:53:10,345 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 13:53:10,345 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 13:53:10,350 - db_manager - INFO - Starting database transaction
2025-09-18 13:53:10,350 - db_manager - INFO - Executing get_grievance_by_id: 
                SELECT g.*, c.complainant_full_name, c.complainant_phone, c.complainant_email,
    ...
2025-09-18 13:53:10,352 - db_manager - INFO - get_grievance_by_id completed in 0.01s. Rows: 1
2025-09-18 13:53:10,352 - db_manager - INFO - Transaction committed successfully
2025-09-18 13:53:10,352 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 13:53:10,352 - db_manager - DEBUG - get_grievance_by_id: grievance_id: {'grievance_id': 'GR-20250918-KOJH-52B1-B', 'complainant_id': 'CM-20250918-KOJH-ADD7-B', 'grievance_categories': None, 'grievance_categories_alternative': None, 'follow_up_question': None, 'grievance_summary': None, 'grievance_description': 'dust everywhere in my house kids are coughing hard*', 'grievance_claimed_amount': None, 'grievance_location': None, 'language_code': 'ne', 'grievance_classification_status': 'pending', 'grievance_creation_date': datetime.datetime(2025, 9, 18, 13, 53, 8, 711234, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'grievance_modification_date': datetime.datetime(2025, 9, 18, 13, 53, 8, 711234, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'is_temporary': True, 'source': 'bot', 'complainant_full_name': None, 'complainant_phone': None, 'complainant_email': None, 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_municipality': None, 'complainant_ward': None, 'complainant_village': None, 'complainant_address': None}, results: [{'grievance_id': 'GR-20250918-KOJH-52B1-B', 'complainant_id': 'CM-20250918-KOJH-ADD7-B', 'grievance_categories': None, 'grievance_categories_alternative': None, 'follow_up_question': None, 'grievance_summary': None, 'grievance_description': 'dust everywhere in my house kids are coughing hard*', 'grievance_claimed_amount': None, 'grievance_location': None, 'language_code': 'ne', 'grievance_classification_status': 'pending', 'grievance_creation_date': datetime.datetime(2025, 9, 18, 13, 53, 8, 711234, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'grievance_modification_date': datetime.datetime(2025, 9, 18, 13, 53, 8, 711234, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'is_temporary': True, 'source': 'bot', 'complainant_full_name': None, 'complainant_phone': None, 'complainant_email': None, 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_municipality': None, 'complainant_ward': None, 'complainant_village': None, 'complainant_address': None}]
2025-09-18 13:53:10,352 - db_manager - INFO - update_complainant: Updating complainant with ID: CM-20250918-KOJH-ADD7-B
2025-09-18 13:53:10,352 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 13:53:10,357 - db_manager - INFO - Starting database transaction
2025-09-18 13:53:10,357 - db_manager - INFO - Executing encrypt_field: SELECT encode(pgp_sym_encrypt(%s, %s), 'hex') AS encrypted...
2025-09-18 13:53:10,358 - db_manager - INFO - encrypt_field completed in 0.01s. Rows: 1
2025-09-18 13:53:10,358 - db_manager - INFO - Transaction committed successfully
2025-09-18 13:53:10,358 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 13:53:10,358 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 13:53:10,363 - db_manager - INFO - Starting database transaction
2025-09-18 13:53:10,363 - db_manager - INFO - Executing encrypt_field: SELECT encode(pgp_sym_encrypt(%s, %s), 'hex') AS encrypted...
2025-09-18 13:53:10,364 - db_manager - INFO - encrypt_field completed in 0.01s. Rows: 1
2025-09-18 13:53:10,364 - db_manager - INFO - Transaction committed successfully
2025-09-18 13:53:10,364 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 13:53:10,364 - db_manager - DEBUG - encrypted phone number Not provided at encrypt_complainant_data: c30d040703028609ce8b6fd234da66d23d0129f2f14df6ba1dc8b852377de4c59edee2114492009f7bf8c8976ec040e3e37749f43aaaeaa8eb2aaf16ad6cf5e300f1c7b17abc217223ba41164b16
2025-09-18 13:53:10,364 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 13:53:10,369 - db_manager - INFO - Starting database transaction
2025-09-18 13:53:10,369 - db_manager - INFO - Executing encrypt_field: SELECT encode(pgp_sym_encrypt(%s, %s), 'hex') AS encrypted...
2025-09-18 13:53:10,370 - db_manager - INFO - encrypt_field completed in 0.01s. Rows: 1
2025-09-18 13:53:10,371 - db_manager - INFO - Transaction committed successfully
2025-09-18 13:53:10,371 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 13:53:10,371 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 13:53:10,375 - db_manager - INFO - Starting database transaction
2025-09-18 13:53:10,376 - db_manager - INFO - Executing encrypt_field: SELECT encode(pgp_sym_encrypt(%s, %s), 'hex') AS encrypted...
2025-09-18 13:53:10,377 - db_manager - INFO - encrypt_field completed in 0.01s. Rows: 1
2025-09-18 13:53:10,377 - db_manager - INFO - Transaction committed successfully
2025-09-18 13:53:10,377 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 13:53:10,377 - db_manager - DEBUG - phone number Not provided hashed to d83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f at hash_sensitive_data
2025-09-18 13:53:10,377 - db_manager - DEBUG - encrypted and hashed data at encrypt_and_hash_sensitive_data: {'complainant_full_name': 'c30d04070302ef0e2ac63b1042a064d23d0168d72d2049c51a51638d373ad88317cb8439b512ff439c358ec739070566d1aabc11ca5c83a1558c0e6f395c642dd3a3e5c99101a897bd8ae38a2153', 'complainant_phone': 'c30d040703028609ce8b6fd234da66d23d0129f2f14df6ba1dc8b852377de4c59edee2114492009f7bf8c8976ec040e3e37749f43aaaeaa8eb2aaf16ad6cf5e300f1c7b17abc217223ba41164b16', 'complainant_email': 'c30d040703028866f810ffd1a16564d23d0166301c4f22dea6268b6e8aee7ec6326a25f40f251ab81865d6e818dad860d44658accb15bc5b31d86c3ed2c610ca2405fad611926e1373288c3adcb2', 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_municipality': 'Not provided', 'complainant_village': 'Not provided', 'complainant_address': 'c30d04070302d553dd8ca33f89e372d23d01ef97d49f5114e982289d0f33dff568a054723162caadc4fd7edc76fd6e2ab8f9447f9d11fb25211aa5214ed14f6bea7310e7ce738eac773643c5deba', 'complainant_full_name_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'complainant_phone_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'complainant_email_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f'}
2025-09-18 13:53:10,377 - db_manager - DEBUG - encrypted_data at update_complainant: {'complainant_full_name': 'c30d04070302ef0e2ac63b1042a064d23d0168d72d2049c51a51638d373ad88317cb8439b512ff439c358ec739070566d1aabc11ca5c83a1558c0e6f395c642dd3a3e5c99101a897bd8ae38a2153', 'complainant_phone': 'c30d040703028609ce8b6fd234da66d23d0129f2f14df6ba1dc8b852377de4c59edee2114492009f7bf8c8976ec040e3e37749f43aaaeaa8eb2aaf16ad6cf5e300f1c7b17abc217223ba41164b16', 'complainant_email': 'c30d040703028866f810ffd1a16564d23d0166301c4f22dea6268b6e8aee7ec6326a25f40f251ab81865d6e818dad860d44658accb15bc5b31d86c3ed2c610ca2405fad611926e1373288c3adcb2', 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_municipality': 'Not provided', 'complainant_village': 'Not provided', 'complainant_address': 'c30d04070302d553dd8ca33f89e372d23d01ef97d49f5114e982289d0f33dff568a054723162caadc4fd7edc76fd6e2ab8f9447f9d11fb25211aa5214ed14f6bea7310e7ce738eac773643c5deba', 'complainant_full_name_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'complainant_phone_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'complainant_email_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f'}
2025-09-18 13:53:10,377 - db_manager - DEBUG - execute_update values: ('c30d04070302ef0e2ac63b1042a064d23d0168d72d2049c51a51638d373ad88317cb8439b512ff439c358ec739070566d1aabc11ca5c83a1558c0e6f395c642dd3a3e5c99101a897bd8ae38a2153', 'c30d040703028609ce8b6fd234da66d23d0129f2f14df6ba1dc8b852377de4c59edee2114492009f7bf8c8976ec040e3e37749f43aaaeaa8eb2aaf16ad6cf5e300f1c7b17abc217223ba41164b16', 'c30d040703028866f810ffd1a16564d23d0166301c4f22dea6268b6e8aee7ec6326a25f40f251ab81865d6e818dad860d44658accb15bc5b31d86c3ed2c610ca2405fad611926e1373288c3adcb2', 'Koshi', 'Jhapa', 'Not provided', 'Not provided', 'c30d04070302d553dd8ca33f89e372d23d01ef97d49f5114e982289d0f33dff568a054723162caadc4fd7edc76fd6e2ab8f9447f9d11fb25211aa5214ed14f6bea7310e7ce738eac773643c5deba', 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'CM-20250918-KOJH-ADD7-B')
2025-09-18 13:53:10,377 - db_manager - DEBUG - execute_update query: UPDATE complainants SET complainant_full_name = %s, complainant_phone = %s, complainant_email = %s, complainant_province = %s, complainant_district = %s, complainant_municipality = %s, complainant_village = %s, complainant_address = %s, complainant_full_name_hash = %s, complainant_phone_hash = %s, complainant_email_hash = %s WHERE complainant_id = %s
2025-09-18 13:53:10,377 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 13:53:10,382 - db_manager - INFO - Starting database transaction
2025-09-18 13:53:10,382 - db_manager - INFO - execute_update: Executing update query: UPDATE complainants SET complainant_full_name = %s, complainant_phone = %s, complainant_email = %s, ...
2025-09-18 13:53:10,383 - db_manager - INFO - execute_update: Update completed in 0.01s. Affected rows: 1
2025-09-18 13:53:10,385 - db_manager - INFO - Transaction committed successfully
2025-09-18 13:53:10,386 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 13:53:10,386 - db_manager - INFO - Complainant updated in db: CM-20250918-KOJH-ADD7-B
2025-09-18 13:53:10,386 - db_manager - INFO - update_grievance: Updating grievance with ID: GR-20250918-KOJH-52B1-B
2025-09-18 13:53:10,386 - db_manager - DEBUG - execute_update values: ('dust everywhere in my house kids are coughing hard*', 'GR-20250918-KOJH-52B1-B')
2025-09-18 13:53:10,386 - db_manager - DEBUG - execute_update query: 
                    UPDATE grievances 
                    SET grievance_description = %s, grievance_modification_date = CURRENT_TIMESTAMP
                    WHERE grievance_id = %s
                    RETURNING grievance_id
                
2025-09-18 13:53:10,386 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 13:53:10,391 - db_manager - INFO - Starting database transaction
2025-09-18 13:53:10,391 - db_manager - INFO - execute_update: Executing update query: 
                    UPDATE grievances 
                    SET grievance_description = %s, grievanc...
2025-09-18 13:53:10,392 - db_manager - INFO - execute_update: Update completed in 0.01s. Affected rows: 1
2025-09-18 13:53:10,394 - db_manager - INFO - Transaction committed successfully
2025-09-18 13:53:10,394 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 13:53:10,395 - db_manager - INFO - update_grievance: Updated grievance with ID: GR-20250918-KOJH-52B1-B, rows affected: 1
2025-09-18 13:53:10,395 - db_manager - INFO - Grievance updated in db: GR-20250918-KOJH-52B1-B
2025-09-18 13:53:10,395 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 13:53:10,400 - db_manager - INFO - Starting database transaction
2025-09-18 13:53:10,400 - db_manager - INFO - Executing get_grievance_files: 
            SELECT file_id, file_name, file_type, file_size, upload_timestamp
            FROM file...
2025-09-18 13:53:10,401 - db_manager - INFO - get_grievance_files completed in 0.01s. Rows: 0
2025-09-18 13:53:10,401 - db_manager - INFO - Transaction committed successfully
2025-09-18 13:53:10,402 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 13:53:10,402 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 13:53:10,406 - db_manager - INFO - Starting database transaction
2025-09-18 13:53:10,407 - db_manager - INFO - Executing get_grievance_files: 
            SELECT file_id, file_name, file_type, file_size, upload_timestamp
            FROM file...
2025-09-18 13:53:10,407 - db_manager - INFO - get_grievance_files completed in 0.01s. Rows: 0
2025-09-18 13:53:10,408 - db_manager - INFO - Transaction committed successfully
2025-09-18 13:53:10,408 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 13:53:10,591 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 13:53:10,597 - db_manager - INFO - Starting database transaction
2025-09-18 13:53:10,597 - db_manager - INFO - Executing get_grievance_by_id: 
                SELECT g.*, c.complainant_full_name, c.complainant_phone, c.complainant_email,
    ...
2025-09-18 13:53:10,598 - db_manager - INFO - get_grievance_by_id completed in 0.01s. Rows: 1
2025-09-18 13:53:10,599 - db_manager - INFO - Transaction committed successfully
2025-09-18 13:53:10,599 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 13:53:10,599 - db_manager - DEBUG - get_grievance_by_id: grievance_id: {'grievance_id': 'GR-20250918-KOJH-52B1-B', 'complainant_id': 'CM-20250918-KOJH-ADD7-B', 'grievance_categories': None, 'grievance_categories_alternative': None, 'follow_up_question': None, 'grievance_summary': None, 'grievance_description': 'dust everywhere in my house kids are coughing hard*', 'grievance_claimed_amount': None, 'grievance_location': None, 'language_code': 'ne', 'grievance_classification_status': 'pending', 'grievance_creation_date': datetime.datetime(2025, 9, 18, 13, 53, 8, 711234, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'grievance_modification_date': datetime.datetime(2025, 9, 18, 13, 53, 10, 391463, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'is_temporary': True, 'source': 'bot', 'complainant_full_name': 'c30d04070302ef0e2ac63b1042a064d23d0168d72d2049c51a51638d373ad88317cb8439b512ff439c358ec739070566d1aabc11ca5c83a1558c0e6f395c642dd3a3e5c99101a897bd8ae38a2153', 'complainant_phone': 'c30d040703028609ce8b6fd234da66d23d0129f2f14df6ba1dc8b852377de4c59edee2114492009f7bf8c8976ec040e3e37749f43aaaeaa8eb2aaf16ad6cf5e300f1c7b17abc217223ba41164b16', 'complainant_email': 'c30d040703028866f810ffd1a16564d23d0166301c4f22dea6268b6e8aee7ec6326a25f40f251ab81865d6e818dad860d44658accb15bc5b31d86c3ed2c610ca2405fad611926e1373288c3adcb2', 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_municipality': 'Not provided', 'complainant_ward': None, 'complainant_village': 'Not provided', 'complainant_address': 'c30d04070302d553dd8ca33f89e372d23d01ef97d49f5114e982289d0f33dff568a054723162caadc4fd7edc76fd6e2ab8f9447f9d11fb25211aa5214ed14f6bea7310e7ce738eac773643c5deba'}, results: [{'grievance_id': 'GR-20250918-KOJH-52B1-B', 'complainant_id': 'CM-20250918-KOJH-ADD7-B', 'grievance_categories': None, 'grievance_categories_alternative': None, 'follow_up_question': None, 'grievance_summary': None, 'grievance_description': 'dust everywhere in my house kids are coughing hard*', 'grievance_claimed_amount': None, 'grievance_location': None, 'language_code': 'ne', 'grievance_classification_status': 'pending', 'grievance_creation_date': datetime.datetime(2025, 9, 18, 13, 53, 8, 711234, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'grievance_modification_date': datetime.datetime(2025, 9, 18, 13, 53, 10, 391463, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'is_temporary': True, 'source': 'bot', 'complainant_full_name': 'c30d04070302ef0e2ac63b1042a064d23d0168d72d2049c51a51638d373ad88317cb8439b512ff439c358ec739070566d1aabc11ca5c83a1558c0e6f395c642dd3a3e5c99101a897bd8ae38a2153', 'complainant_phone': 'c30d040703028609ce8b6fd234da66d23d0129f2f14df6ba1dc8b852377de4c59edee2114492009f7bf8c8976ec040e3e37749f43aaaeaa8eb2aaf16ad6cf5e300f1c7b17abc217223ba41164b16', 'complainant_email': 'c30d040703028866f810ffd1a16564d23d0166301c4f22dea6268b6e8aee7ec6326a25f40f251ab81865d6e818dad860d44658accb15bc5b31d86c3ed2c610ca2405fad611926e1373288c3adcb2', 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_municipality': 'Not provided', 'complainant_ward': None, 'complainant_village': 'Not provided', 'complainant_address': 'c30d04070302d553dd8ca33f89e372d23d01ef97d49f5114e982289d0f33dff568a054723162caadc4fd7edc76fd6e2ab8f9447f9d11fb25211aa5214ed14f6bea7310e7ce738eac773643c5deba'}]
2025-09-18 13:53:10,689 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 13:53:10,694 - db_manager - INFO - Starting database transaction
2025-09-18 13:53:10,694 - db_manager - INFO - Executing get_complainant_id_from_grievance_id: 
            SELECT complainant_id
            FROM grievances
            WHERE grievance_id = %s
 ...
2025-09-18 13:53:10,695 - db_manager - INFO - get_complainant_id_from_grievance_id completed in 0.01s. Rows: 1
2025-09-18 13:53:10,696 - db_manager - INFO - Transaction committed successfully
2025-09-18 13:53:10,696 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 13:53:10,696 - db_manager - INFO - update_complainant: Updating complainant with ID: CM-20250918-KOJH-ADD7-B
2025-09-18 13:53:10,696 - db_manager - DEBUG - encrypted and hashed data at encrypt_and_hash_sensitive_data: {}
2025-09-18 13:53:10,696 - db_manager - DEBUG - encrypted_data at update_complainant: {}
2025-09-18 13:53:10,696 - db_manager - DEBUG - No complainant field to update
2025-09-18 13:53:10,696 - db_manager - INFO - Complainant updated in db: GR-20250918-KOJH-52B1-B
2025-09-18 13:53:10,696 - db_manager - INFO - update_grievance: Updating grievance with ID: GR-20250918-KOJH-52B1-B
2025-09-18 13:53:10,696 - db_manager - DEBUG - execute_update values: ('["N/A"]', 'N/A', 'GR-20250918-KOJH-52B1-B')
2025-09-18 13:53:10,696 - db_manager - DEBUG - execute_update query: 
                    UPDATE grievances 
                    SET grievance_categories = %s, grievance_summary = %s, grievance_modification_date = CURRENT_TIMESTAMP
                    WHERE grievance_id = %s
                    RETURNING grievance_id
                
2025-09-18 13:53:10,696 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 13:53:10,701 - db_manager - INFO - Starting database transaction
2025-09-18 13:53:10,701 - db_manager - INFO - execute_update: Executing update query: 
                    UPDATE grievances 
                    SET grievance_categories = %s, grievance...
2025-09-18 13:53:10,702 - db_manager - INFO - execute_update: Update completed in 0.01s. Affected rows: 1
2025-09-18 13:53:10,704 - db_manager - INFO - Transaction committed successfully
2025-09-18 13:53:10,704 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 13:53:10,704 - db_manager - INFO - update_grievance: Updated grievance with ID: GR-20250918-KOJH-52B1-B, rows affected: 1
2025-09-18 13:53:10,704 - db_manager - INFO - Grievance updated in db: GR-20250918-KOJH-52B1-B
2025-09-18 13:53:10,746 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 13:53:10,751 - db_manager - INFO - Starting database transaction
2025-09-18 13:53:10,751 - db_manager - INFO - Executing get_grievance_files: 
            SELECT file_id, file_name, file_type, file_size, upload_timestamp
            FROM file...
2025-09-18 13:53:10,752 - db_manager - INFO - get_grievance_files completed in 0.01s. Rows: 0
2025-09-18 13:53:10,752 - db_manager - INFO - Transaction committed successfully
2025-09-18 13:53:10,753 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 13:53:10,753 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 13:53:10,757 - db_manager - INFO - Starting database transaction
2025-09-18 13:53:10,758 - db_manager - INFO - Executing get_complainant_by_id: 
            SELECT complainant_id, complainant_unique_id, complainant_full_name,    complainant_pho...
2025-09-18 13:53:10,759 - db_manager - INFO - get_complainant_by_id completed in 0.01s. Rows: 1
2025-09-18 13:53:10,759 - db_manager - INFO - Transaction committed successfully
2025-09-18 13:53:10,759 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 13:53:10,759 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 13:53:10,763 - db_manager - INFO - Starting database transaction
2025-09-18 13:53:10,763 - db_manager - INFO - Executing decrypt_field: SELECT pgp_sym_decrypt(decode(%s, 'hex'), %s) AS decrypted...
2025-09-18 13:53:10,764 - db_manager - INFO - decrypt_field completed in 0.01s. Rows: 1
2025-09-18 13:53:10,765 - db_manager - INFO - Transaction committed successfully
2025-09-18 13:53:10,765 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 13:53:10,765 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 13:53:10,770 - db_manager - INFO - Starting database transaction
2025-09-18 13:53:10,770 - db_manager - INFO - Executing decrypt_field: SELECT pgp_sym_decrypt(decode(%s, 'hex'), %s) AS decrypted...
2025-09-18 13:53:10,771 - db_manager - INFO - decrypt_field completed in 0.01s. Rows: 1
2025-09-18 13:53:10,771 - db_manager - INFO - Transaction committed successfully
2025-09-18 13:53:10,771 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 13:53:10,771 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 13:53:10,776 - db_manager - INFO - Starting database transaction
2025-09-18 13:53:10,776 - db_manager - INFO - Executing decrypt_field: SELECT pgp_sym_decrypt(decode(%s, 'hex'), %s) AS decrypted...
2025-09-18 13:53:10,777 - db_manager - INFO - decrypt_field completed in 0.01s. Rows: 1
2025-09-18 13:53:10,777 - db_manager - INFO - Transaction committed successfully
2025-09-18 13:53:10,777 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 13:53:10,778 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 13:53:10,783 - db_manager - INFO - Starting database transaction
2025-09-18 13:53:10,783 - db_manager - INFO - Executing decrypt_field: SELECT pgp_sym_decrypt(decode(%s, 'hex'), %s) AS decrypted...
2025-09-18 13:53:10,784 - db_manager - INFO - decrypt_field completed in 0.01s. Rows: 1
2025-09-18 13:53:10,784 - db_manager - INFO - Transaction committed successfully
2025-09-18 13:53:10,784 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 13:53:10,784 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 13:53:10,789 - db_manager - INFO - Starting database transaction
2025-09-18 13:53:10,789 - db_manager - INFO - Executing get_grievance_by_id: 
                SELECT g.*, c.complainant_full_name, c.complainant_phone, c.complainant_email,
    ...
2025-09-18 13:53:10,791 - db_manager - INFO - get_grievance_by_id completed in 0.01s. Rows: 1
2025-09-18 13:53:10,791 - db_manager - INFO - Transaction committed successfully
2025-09-18 13:53:10,791 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 13:53:10,792 - db_manager - DEBUG - get_grievance_by_id: grievance_id: {'grievance_id': 'GR-20250918-KOJH-52B1-B', 'complainant_id': 'CM-20250918-KOJH-ADD7-B', 'grievance_categories': ['N/A'], 'grievance_categories_alternative': None, 'follow_up_question': None, 'grievance_summary': 'N/A', 'grievance_description': 'dust everywhere in my house kids are coughing hard*', 'grievance_claimed_amount': None, 'grievance_location': None, 'language_code': 'ne', 'grievance_classification_status': 'pending', 'grievance_creation_date': datetime.datetime(2025, 9, 18, 13, 53, 8, 711234, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'grievance_modification_date': datetime.datetime(2025, 9, 18, 13, 53, 10, 701243, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'is_temporary': True, 'source': 'bot', 'complainant_full_name': 'c30d04070302ef0e2ac63b1042a064d23d0168d72d2049c51a51638d373ad88317cb8439b512ff439c358ec739070566d1aabc11ca5c83a1558c0e6f395c642dd3a3e5c99101a897bd8ae38a2153', 'complainant_phone': 'c30d040703028609ce8b6fd234da66d23d0129f2f14df6ba1dc8b852377de4c59edee2114492009f7bf8c8976ec040e3e37749f43aaaeaa8eb2aaf16ad6cf5e300f1c7b17abc217223ba41164b16', 'complainant_email': 'c30d040703028866f810ffd1a16564d23d0166301c4f22dea6268b6e8aee7ec6326a25f40f251ab81865d6e818dad860d44658accb15bc5b31d86c3ed2c610ca2405fad611926e1373288c3adcb2', 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_municipality': 'Not provided', 'complainant_ward': None, 'complainant_village': 'Not provided', 'complainant_address': 'c30d04070302d553dd8ca33f89e372d23d01ef97d49f5114e982289d0f33dff568a054723162caadc4fd7edc76fd6e2ab8f9447f9d11fb25211aa5214ed14f6bea7310e7ce738eac773643c5deba'}, results: [{'grievance_id': 'GR-20250918-KOJH-52B1-B', 'complainant_id': 'CM-20250918-KOJH-ADD7-B', 'grievance_categories': '["N/A"]', 'grievance_categories_alternative': None, 'follow_up_question': None, 'grievance_summary': 'N/A', 'grievance_description': 'dust everywhere in my house kids are coughing hard*', 'grievance_claimed_amount': None, 'grievance_location': None, 'language_code': 'ne', 'grievance_classification_status': 'pending', 'grievance_creation_date': datetime.datetime(2025, 9, 18, 13, 53, 8, 711234, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'grievance_modification_date': datetime.datetime(2025, 9, 18, 13, 53, 10, 701243, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'is_temporary': True, 'source': 'bot', 'complainant_full_name': 'c30d04070302ef0e2ac63b1042a064d23d0168d72d2049c51a51638d373ad88317cb8439b512ff439c358ec739070566d1aabc11ca5c83a1558c0e6f395c642dd3a3e5c99101a897bd8ae38a2153', 'complainant_phone': 'c30d040703028609ce8b6fd234da66d23d0129f2f14df6ba1dc8b852377de4c59edee2114492009f7bf8c8976ec040e3e37749f43aaaeaa8eb2aaf16ad6cf5e300f1c7b17abc217223ba41164b16', 'complainant_email': 'c30d040703028866f810ffd1a16564d23d0166301c4f22dea6268b6e8aee7ec6326a25f40f251ab81865d6e818dad860d44658accb15bc5b31d86c3ed2c610ca2405fad611926e1373288c3adcb2', 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_municipality': 'Not provided', 'complainant_ward': None, 'complainant_village': 'Not provided', 'complainant_address': 'c30d04070302d553dd8ca33f89e372d23d01ef97d49f5114e982289d0f33dff568a054723162caadc4fd7edc76fd6e2ab8f9447f9d11fb25211aa5214ed14f6bea7310e7ce738eac773643c5deba'}]
2025-09-18 13:53:10,792 - db_manager - INFO - update_complainant: Updating complainant with ID: CM-20250918-KOJH-ADD7-B
2025-09-18 13:53:10,792 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 13:53:10,796 - db_manager - INFO - Starting database transaction
2025-09-18 13:53:10,796 - db_manager - INFO - Executing encrypt_field: SELECT encode(pgp_sym_encrypt(%s, %s), 'hex') AS encrypted...
2025-09-18 13:53:10,797 - db_manager - INFO - encrypt_field completed in 0.01s. Rows: 1
2025-09-18 13:53:10,798 - db_manager - INFO - Transaction committed successfully
2025-09-18 13:53:10,798 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 13:53:10,798 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 13:53:10,803 - db_manager - INFO - Starting database transaction
2025-09-18 13:53:10,803 - db_manager - INFO - Executing encrypt_field: SELECT encode(pgp_sym_encrypt(%s, %s), 'hex') AS encrypted...
2025-09-18 13:53:10,804 - db_manager - INFO - encrypt_field completed in 0.01s. Rows: 1
2025-09-18 13:53:10,804 - db_manager - INFO - Transaction committed successfully
2025-09-18 13:53:10,805 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 13:53:10,805 - db_manager - DEBUG - encrypted phone number Not provided at encrypt_complainant_data: c30d040703024db316860bc0abf273d23d019283a15eef423ccaaee4f96f6407153e36a7c497a1799ee82f43f24cc6bdb70f498c3a47755eb24a4f533b4d9cb1773432256e0d731c0d4d2a3a9c9d
2025-09-18 13:53:10,805 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 13:53:10,810 - db_manager - INFO - Starting database transaction
2025-09-18 13:53:10,810 - db_manager - INFO - Executing encrypt_field: SELECT encode(pgp_sym_encrypt(%s, %s), 'hex') AS encrypted...
2025-09-18 13:53:10,811 - db_manager - INFO - encrypt_field completed in 0.01s. Rows: 1
2025-09-18 13:53:10,811 - db_manager - INFO - Transaction committed successfully
2025-09-18 13:53:10,811 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 13:53:10,811 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 13:53:10,816 - db_manager - INFO - Starting database transaction
2025-09-18 13:53:10,816 - db_manager - INFO - Executing encrypt_field: SELECT encode(pgp_sym_encrypt(%s, %s), 'hex') AS encrypted...
2025-09-18 13:53:10,817 - db_manager - INFO - encrypt_field completed in 0.01s. Rows: 1
2025-09-18 13:53:10,817 - db_manager - INFO - Transaction committed successfully
2025-09-18 13:53:10,817 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 13:53:10,818 - db_manager - DEBUG - phone number Not provided hashed to d83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f at hash_sensitive_data
2025-09-18 13:53:10,818 - db_manager - DEBUG - encrypted and hashed data at encrypt_and_hash_sensitive_data: {'complainant_full_name': 'c30d0407030254f816c3f638abc979d23d0147062d41cd505bf7a076871a130e9b150fd75dca33d5248a75de6c33078b785fab25b63072ccb4a60773148782bb7393659af22d7618eaab58b49bbc', 'complainant_phone': 'c30d040703024db316860bc0abf273d23d019283a15eef423ccaaee4f96f6407153e36a7c497a1799ee82f43f24cc6bdb70f498c3a47755eb24a4f533b4d9cb1773432256e0d731c0d4d2a3a9c9d', 'complainant_email': 'c30d04070302d5ae689b15f31b1c75d23d012ce513ae1f3f2b3d83fb8fb4badab02191b075a664c76da61c39dd32d45bcee878b4b3c8d1b83a5933732907a20402d10f5dfb3dd968a89811fc9d36', 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_municipality': 'Not provided', 'complainant_village': 'Not provided', 'complainant_address': 'c30d040703026d01f8c812390f1362d23d01c968f9896936127d664f834f34fe17594e1a924aaaa942ed095c5d3606e0657d9bb888369bd708715fc6d074115a5643c146b6a26b24b0562260d475', 'complainant_full_name_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'complainant_phone_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'complainant_email_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f'}
2025-09-18 13:53:10,818 - db_manager - DEBUG - encrypted_data at update_complainant: {'complainant_full_name': 'c30d0407030254f816c3f638abc979d23d0147062d41cd505bf7a076871a130e9b150fd75dca33d5248a75de6c33078b785fab25b63072ccb4a60773148782bb7393659af22d7618eaab58b49bbc', 'complainant_phone': 'c30d040703024db316860bc0abf273d23d019283a15eef423ccaaee4f96f6407153e36a7c497a1799ee82f43f24cc6bdb70f498c3a47755eb24a4f533b4d9cb1773432256e0d731c0d4d2a3a9c9d', 'complainant_email': 'c30d04070302d5ae689b15f31b1c75d23d012ce513ae1f3f2b3d83fb8fb4badab02191b075a664c76da61c39dd32d45bcee878b4b3c8d1b83a5933732907a20402d10f5dfb3dd968a89811fc9d36', 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_municipality': 'Not provided', 'complainant_village': 'Not provided', 'complainant_address': 'c30d040703026d01f8c812390f1362d23d01c968f9896936127d664f834f34fe17594e1a924aaaa942ed095c5d3606e0657d9bb888369bd708715fc6d074115a5643c146b6a26b24b0562260d475', 'complainant_full_name_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'complainant_phone_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'complainant_email_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f'}
2025-09-18 13:53:10,818 - db_manager - DEBUG - execute_update values: ('c30d0407030254f816c3f638abc979d23d0147062d41cd505bf7a076871a130e9b150fd75dca33d5248a75de6c33078b785fab25b63072ccb4a60773148782bb7393659af22d7618eaab58b49bbc', 'c30d040703024db316860bc0abf273d23d019283a15eef423ccaaee4f96f6407153e36a7c497a1799ee82f43f24cc6bdb70f498c3a47755eb24a4f533b4d9cb1773432256e0d731c0d4d2a3a9c9d', 'c30d04070302d5ae689b15f31b1c75d23d012ce513ae1f3f2b3d83fb8fb4badab02191b075a664c76da61c39dd32d45bcee878b4b3c8d1b83a5933732907a20402d10f5dfb3dd968a89811fc9d36', 'Koshi', 'Jhapa', 'Not provided', 'Not provided', 'c30d040703026d01f8c812390f1362d23d01c968f9896936127d664f834f34fe17594e1a924aaaa942ed095c5d3606e0657d9bb888369bd708715fc6d074115a5643c146b6a26b24b0562260d475', 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'CM-20250918-KOJH-ADD7-B')
2025-09-18 13:53:10,818 - db_manager - DEBUG - execute_update query: UPDATE complainants SET complainant_full_name = %s, complainant_phone = %s, complainant_email = %s, complainant_province = %s, complainant_district = %s, complainant_municipality = %s, complainant_village = %s, complainant_address = %s, complainant_full_name_hash = %s, complainant_phone_hash = %s, complainant_email_hash = %s WHERE complainant_id = %s
2025-09-18 13:53:10,818 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 13:53:10,823 - db_manager - INFO - Starting database transaction
2025-09-18 13:53:10,823 - db_manager - INFO - execute_update: Executing update query: UPDATE complainants SET complainant_full_name = %s, complainant_phone = %s, complainant_email = %s, ...
2025-09-18 13:53:10,824 - db_manager - INFO - execute_update: Update completed in 0.01s. Affected rows: 1
2025-09-18 13:53:10,826 - db_manager - INFO - Transaction committed successfully
2025-09-18 13:53:10,826 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 13:53:10,826 - db_manager - INFO - Complainant updated in db: CM-20250918-KOJH-ADD7-B
2025-09-18 13:53:10,826 - db_manager - INFO - update_grievance: Updating grievance with ID: GR-20250918-KOJH-52B1-B
2025-09-18 13:53:10,826 - db_manager - DEBUG - execute_update values: ('["N/A"]', 'N/A', 'dust everywhere in my house kids are coughing hard*', 'GR-20250918-KOJH-52B1-B')
2025-09-18 13:53:10,826 - db_manager - DEBUG - execute_update query: 
                    UPDATE grievances 
                    SET grievance_categories = %s, grievance_summary = %s, grievance_description = %s, grievance_modification_date = CURRENT_TIMESTAMP
                    WHERE grievance_id = %s
                    RETURNING grievance_id
                
2025-09-18 13:53:10,826 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 13:53:10,831 - db_manager - INFO - Starting database transaction
2025-09-18 13:53:10,832 - db_manager - INFO - execute_update: Executing update query: 
                    UPDATE grievances 
                    SET grievance_categories = %s, grievance...
2025-09-18 13:53:10,833 - db_manager - INFO - execute_update: Update completed in 0.01s. Affected rows: 1
2025-09-18 13:53:10,835 - db_manager - INFO - Transaction committed successfully
2025-09-18 13:53:10,835 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 13:53:10,835 - db_manager - INFO - update_grievance: Updated grievance with ID: GR-20250918-KOJH-52B1-B, rows affected: 1
2025-09-18 13:53:10,835 - db_manager - INFO - Grievance updated in db: GR-20250918-KOJH-52B1-B
2025-09-18 14:07:52,288 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-18 14:07:52,288 - db_manager - INFO - Database manager initialized successfully
2025-09-18 14:07:52,288 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-18 14:07:52,289 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-18 14:07:52,289 - db_manager - INFO - Database manager initialized successfully
2025-09-18 14:07:52,289 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-18 14:07:52,289 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-18 14:07:52,289 - db_manager - INFO - Database manager initialized successfully
2025-09-18 14:07:52,289 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-18 14:07:52,289 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-18 14:07:52,289 - db_manager - INFO - Database manager initialized successfully
2025-09-18 14:07:52,289 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-18 14:07:52,289 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-18 14:07:52,289 - db_manager - INFO - Database manager initialized successfully
2025-09-18 14:07:52,289 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-18 14:07:52,289 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-18 14:07:52,289 - db_manager - INFO - Database manager initialized successfully
2025-09-18 14:07:52,289 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-18 14:07:52,289 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-18 14:07:52,289 - db_manager - INFO - Database manager initialized successfully
2025-09-18 14:07:52,289 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-18 14:07:52,289 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-18 14:07:52,290 - db_manager - INFO - Database manager initialized successfully
2025-09-18 14:07:52,290 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-18 14:07:52,290 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-18 14:07:52,290 - db_manager - INFO - Database manager initialized successfully
2025-09-18 14:07:52,290 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-18 14:07:52,290 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-18 14:07:52,290 - db_manager - INFO - Database manager initialized successfully
2025-09-18 14:07:52,290 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-18 14:08:46,206 - db_manager - INFO - create_complainant: Creating complainant with ID: CM-20250918-KOJH-8358-B
2025-09-18 14:08:46,206 - db_manager - DEBUG - encrypted and hashed data at encrypt_and_hash_sensitive_data: {'complainant_id': 'CM-20250918-KOJH-8358-B', 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_unique_id': 'CM-20250918-KOJH-8358-B'}
2025-09-18 14:08:46,206 - db_manager - DEBUG - query_keys at generate_query_string: dict_keys(['complainant_id', 'complainant_province', 'complainant_district', 'complainant_unique_id'])
2025-09-18 14:08:46,206 - db_manager - DEBUG - Generated query: INSERT INTO complainants (complainant_id, complainant_province, complainant_district, complainant_unique_id) VALUES (%s, %s, %s, %s)
2025-09-18 14:08:46,206 - db_manager - DEBUG - len of query_keys: 4
2025-09-18 14:08:46,206 - db_manager - DEBUG - Generated query: INSERT INTO complainants (complainant_id, complainant_province, complainant_district, complainant_unique_id) VALUES (%s, %s, %s, %s)
2025-09-18 14:08:46,206 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 14:08:46,213 - db_manager - INFO - Starting database transaction
2025-09-18 14:08:46,215 - db_manager - INFO - Transaction committed successfully
2025-09-18 14:08:46,215 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 14:08:46,215 - db_manager - INFO - create_complainant: Successfully created complainant with ID: CM-20250918-KOJH-8358-B
2025-09-18 14:08:46,215 - db_manager - INFO - create_grievance: Creating grievance with data: {'grievance_id': 'GR-20250918-KOJH-A5C3-B', 'complainant_id': 'CM-20250918-KOJH-8358-B', 'grievance_description': 'dust everywhere in my house \nkids are coughing hard', 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_office': None, 'source': 'bot', 'complainant_unique_id': 'CM-20250918-KOJH-8358-B'}
2025-09-18 14:08:46,216 - db_manager - INFO - create_grievance: Creating grievance with ID: GR-20250918-KOJH-A5C3-B
2025-09-18 14:08:46,216 - db_manager - INFO - create_grievance: Creating grievance with allowed fields: ['grievance_id', 'complainant_id', 'grievance_categories', 'grievance_categories_alternative', 'follow_up_question', 'grievance_summary', 'grievance_description', 'grievance_claimed_amount', 'grievance_location', 'is_temporary', 'source', 'language_code', 'grievance_classification_status']
2025-09-18 14:08:46,216 - db_manager - DEBUG - query_keys at generate_query_string: dict_keys(['grievance_id', 'complainant_id', 'grievance_description', 'source'])
2025-09-18 14:08:46,216 - db_manager - DEBUG - Generated query: INSERT INTO grievances (grievance_id, complainant_id, grievance_description, source) VALUES (%s, %s, %s, %s) RETURNING grievance_id
2025-09-18 14:08:46,216 - db_manager - DEBUG - len of query_keys: 4
2025-09-18 14:08:46,216 - db_manager - DEBUG - Generated query: INSERT INTO grievances (grievance_id, complainant_id, grievance_description, source) VALUES (%s, %s, %s, %s) RETURNING grievance_id
2025-09-18 14:08:46,216 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 14:08:46,221 - db_manager - INFO - Starting database transaction
2025-09-18 14:08:46,225 - db_manager - INFO - Transaction committed successfully
2025-09-18 14:08:46,225 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 14:08:46,225 - db_manager - INFO - create_grievance: Successfully created grievance with ID: GR-20250918-KOJH-A5C3-B
2025-09-18 14:09:07,883 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 14:09:07,889 - db_manager - INFO - Starting database transaction
2025-09-18 14:09:07,889 - db_manager - INFO - Executing get_complainant_by_id: 
            SELECT complainant_id, complainant_unique_id, complainant_full_name,    complainant_pho...
2025-09-18 14:09:07,891 - db_manager - INFO - get_complainant_by_id completed in 0.01s. Rows: 1
2025-09-18 14:09:07,891 - db_manager - INFO - Transaction committed successfully
2025-09-18 14:09:07,891 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 14:09:07,891 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 14:09:07,896 - db_manager - INFO - Starting database transaction
2025-09-18 14:09:07,896 - db_manager - INFO - Executing get_grievance_by_id: 
                SELECT g.*, c.complainant_full_name, c.complainant_phone, c.complainant_email,
    ...
2025-09-18 14:09:07,898 - db_manager - INFO - get_grievance_by_id completed in 0.01s. Rows: 1
2025-09-18 14:09:07,898 - db_manager - INFO - Transaction committed successfully
2025-09-18 14:09:07,898 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 14:09:07,898 - db_manager - DEBUG - get_grievance_by_id: grievance_id: {'grievance_id': 'GR-20250918-KOJH-A5C3-B', 'complainant_id': 'CM-20250918-KOJH-8358-B', 'grievance_categories': ['Environmental - Air Pollution'], 'grievance_categories_alternative': ['Environmental - Noise Pollution', 'Environmental - Drainage and Sewage Management', 'Environmental, Social - Cutting of Trees'], 'follow_up_question': ['How many people in your household are affected by the dust, and how long have your children been coughing?'], 'grievance_summary': 'Dust is spread throughout the house due to construction, causing children to cough.', 'grievance_description': 'dust everywhere in my house \nkids are coughing hard', 'grievance_claimed_amount': None, 'grievance_location': None, 'language_code': 'en', 'grievance_classification_status': 'pending', 'grievance_creation_date': datetime.datetime(2025, 9, 18, 14, 8, 46, 221220, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'grievance_modification_date': datetime.datetime(2025, 9, 18, 14, 8, 55, 258776, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'is_temporary': True, 'source': 'bot', 'complainant_full_name': None, 'complainant_phone': None, 'complainant_email': None, 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_municipality': None, 'complainant_ward': None, 'complainant_village': None, 'complainant_address': None}, results: [{'grievance_id': 'GR-20250918-KOJH-A5C3-B', 'complainant_id': 'CM-20250918-KOJH-8358-B', 'grievance_categories': '["Environmental - Air Pollution"]', 'grievance_categories_alternative': '["Environmental - Noise Pollution", "Environmental - Drainage and Sewage Management", "Environmental, Social - Cutting of Trees"]', 'follow_up_question': '["How many people in your household are affected by the dust, and how long have your children been coughing?"]', 'grievance_summary': 'Dust is spread throughout the house due to construction, causing children to cough.', 'grievance_description': 'dust everywhere in my house \nkids are coughing hard', 'grievance_claimed_amount': None, 'grievance_location': None, 'language_code': 'en', 'grievance_classification_status': 'pending', 'grievance_creation_date': datetime.datetime(2025, 9, 18, 14, 8, 46, 221220, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'grievance_modification_date': datetime.datetime(2025, 9, 18, 14, 8, 55, 258776, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'is_temporary': True, 'source': 'bot', 'complainant_full_name': None, 'complainant_phone': None, 'complainant_email': None, 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_municipality': None, 'complainant_ward': None, 'complainant_village': None, 'complainant_address': None}]
2025-09-18 14:09:07,898 - db_manager - INFO - update_complainant: Updating complainant with ID: CM-20250918-KOJH-8358-B
2025-09-18 14:09:07,898 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 14:09:07,904 - db_manager - INFO - Starting database transaction
2025-09-18 14:09:07,904 - db_manager - INFO - Executing encrypt_field: SELECT encode(pgp_sym_encrypt(%s, %s), 'hex') AS encrypted...
2025-09-18 14:09:07,906 - db_manager - INFO - encrypt_field completed in 0.01s. Rows: 1
2025-09-18 14:09:07,906 - db_manager - INFO - Transaction committed successfully
2025-09-18 14:09:07,907 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 14:09:07,907 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 14:09:07,911 - db_manager - INFO - Starting database transaction
2025-09-18 14:09:07,912 - db_manager - INFO - Executing encrypt_field: SELECT encode(pgp_sym_encrypt(%s, %s), 'hex') AS encrypted...
2025-09-18 14:09:07,913 - db_manager - INFO - encrypt_field completed in 0.01s. Rows: 1
2025-09-18 14:09:07,913 - db_manager - INFO - Transaction committed successfully
2025-09-18 14:09:07,913 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 14:09:07,913 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 14:09:07,918 - db_manager - INFO - Starting database transaction
2025-09-18 14:09:07,918 - db_manager - INFO - Executing encrypt_field: SELECT encode(pgp_sym_encrypt(%s, %s), 'hex') AS encrypted...
2025-09-18 14:09:07,919 - db_manager - INFO - encrypt_field completed in 0.01s. Rows: 1
2025-09-18 14:09:07,920 - db_manager - INFO - Transaction committed successfully
2025-09-18 14:09:07,920 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 14:09:07,920 - db_manager - DEBUG - encrypted phone number Not provided at encrypt_complainant_data: c30d040703023d48004768df5fa467d23d01dbd2f747fe0ae0583d3c543e3336838c995adbef4e99b1936df8a128f7fa34c257b6957225e0dc7c76f8704bc294942730e08fd38806b4034b629998
2025-09-18 14:09:07,920 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 14:09:07,924 - db_manager - INFO - Starting database transaction
2025-09-18 14:09:07,924 - db_manager - INFO - Executing encrypt_field: SELECT encode(pgp_sym_encrypt(%s, %s), 'hex') AS encrypted...
2025-09-18 14:09:07,925 - db_manager - INFO - encrypt_field completed in 0.01s. Rows: 1
2025-09-18 14:09:07,925 - db_manager - INFO - Transaction committed successfully
2025-09-18 14:09:07,925 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 14:09:07,926 - db_manager - DEBUG - phone number Not provided hashed to d83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f at hash_sensitive_data
2025-09-18 14:09:07,926 - db_manager - DEBUG - encrypted and hashed data at encrypt_and_hash_sensitive_data: {'complainant_full_name': 'c30d0407030200900d6313f7635b76d23d018dde9e85e029b7387d83460be7596faa35dab20bb8b921fbd97069049e4c9b29b7295bc84875feb9979c6f334dca9739536793d6f33812b989c7243c', 'complainant_phone': 'c30d040703023d48004768df5fa467d23d01dbd2f747fe0ae0583d3c543e3336838c995adbef4e99b1936df8a128f7fa34c257b6957225e0dc7c76f8704bc294942730e08fd38806b4034b629998', 'complainant_email': 'c30d040703021bc6e27f4db1f0a87fd23d01c39da332b89de8da21469cad3a82d63a155053470aaa6b1d61705eba1c91677fc73103d61988175d77697e317fd30a8d82ae15d89d301c3fbbf12310', 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_municipality': 'Birtamod Municipality', 'complainant_village': 'Slot_Skipped', 'complainant_address': 'c30d040703027bd43e56168c4c5a6fd23d01f079786c7a32680f85194b15587e52034d16d05184e1fea78a708295d6fa7f31fbeef33674802fc62a629d940304e835112288ce118fbea65b72fe64', 'complainant_email_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'complainant_phone_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'complainant_full_name_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f'}
2025-09-18 14:09:07,926 - db_manager - DEBUG - encrypted_data at update_complainant: {'complainant_full_name': 'c30d0407030200900d6313f7635b76d23d018dde9e85e029b7387d83460be7596faa35dab20bb8b921fbd97069049e4c9b29b7295bc84875feb9979c6f334dca9739536793d6f33812b989c7243c', 'complainant_phone': 'c30d040703023d48004768df5fa467d23d01dbd2f747fe0ae0583d3c543e3336838c995adbef4e99b1936df8a128f7fa34c257b6957225e0dc7c76f8704bc294942730e08fd38806b4034b629998', 'complainant_email': 'c30d040703021bc6e27f4db1f0a87fd23d01c39da332b89de8da21469cad3a82d63a155053470aaa6b1d61705eba1c91677fc73103d61988175d77697e317fd30a8d82ae15d89d301c3fbbf12310', 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_municipality': 'Birtamod Municipality', 'complainant_village': 'Slot_Skipped', 'complainant_address': 'c30d040703027bd43e56168c4c5a6fd23d01f079786c7a32680f85194b15587e52034d16d05184e1fea78a708295d6fa7f31fbeef33674802fc62a629d940304e835112288ce118fbea65b72fe64', 'complainant_email_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'complainant_phone_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'complainant_full_name_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f'}
2025-09-18 14:09:07,926 - db_manager - DEBUG - execute_update values: ('c30d0407030200900d6313f7635b76d23d018dde9e85e029b7387d83460be7596faa35dab20bb8b921fbd97069049e4c9b29b7295bc84875feb9979c6f334dca9739536793d6f33812b989c7243c', 'c30d040703023d48004768df5fa467d23d01dbd2f747fe0ae0583d3c543e3336838c995adbef4e99b1936df8a128f7fa34c257b6957225e0dc7c76f8704bc294942730e08fd38806b4034b629998', 'c30d040703021bc6e27f4db1f0a87fd23d01c39da332b89de8da21469cad3a82d63a155053470aaa6b1d61705eba1c91677fc73103d61988175d77697e317fd30a8d82ae15d89d301c3fbbf12310', 'Koshi', 'Jhapa', 'Birtamod Municipality', 'Slot_Skipped', 'c30d040703027bd43e56168c4c5a6fd23d01f079786c7a32680f85194b15587e52034d16d05184e1fea78a708295d6fa7f31fbeef33674802fc62a629d940304e835112288ce118fbea65b72fe64', 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'CM-20250918-KOJH-8358-B')
2025-09-18 14:09:07,926 - db_manager - DEBUG - execute_update query: UPDATE complainants SET complainant_full_name = %s, complainant_phone = %s, complainant_email = %s, complainant_province = %s, complainant_district = %s, complainant_municipality = %s, complainant_village = %s, complainant_address = %s, complainant_email_hash = %s, complainant_phone_hash = %s, complainant_full_name_hash = %s WHERE complainant_id = %s
2025-09-18 14:09:07,926 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 14:09:07,930 - db_manager - INFO - Starting database transaction
2025-09-18 14:09:07,930 - db_manager - INFO - execute_update: Executing update query: UPDATE complainants SET complainant_full_name = %s, complainant_phone = %s, complainant_email = %s, ...
2025-09-18 14:09:07,932 - db_manager - INFO - execute_update: Update completed in 0.01s. Affected rows: 1
2025-09-18 14:09:07,933 - db_manager - INFO - Transaction committed successfully
2025-09-18 14:09:07,933 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 14:09:07,933 - db_manager - INFO - Complainant updated in db: CM-20250918-KOJH-8358-B
2025-09-18 14:09:07,933 - db_manager - INFO - update_grievance: Updating grievance with ID: GR-20250918-KOJH-A5C3-B
2025-09-18 14:09:07,934 - db_manager - DEBUG - execute_update values: ('dust everywhere in my house \nkids are coughing hard', 'GR-20250918-KOJH-A5C3-B')
2025-09-18 14:09:07,934 - db_manager - DEBUG - execute_update query: 
                    UPDATE grievances 
                    SET grievance_description = %s, grievance_modification_date = CURRENT_TIMESTAMP
                    WHERE grievance_id = %s
                    RETURNING grievance_id
                
2025-09-18 14:09:07,934 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 14:09:07,938 - db_manager - INFO - Starting database transaction
2025-09-18 14:09:07,938 - db_manager - INFO - execute_update: Executing update query: 
                    UPDATE grievances 
                    SET grievance_description = %s, grievanc...
2025-09-18 14:09:07,940 - db_manager - INFO - execute_update: Update completed in 0.01s. Affected rows: 1
2025-09-18 14:09:07,942 - db_manager - INFO - Transaction committed successfully
2025-09-18 14:09:07,942 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 14:09:07,942 - db_manager - INFO - update_grievance: Updated grievance with ID: GR-20250918-KOJH-A5C3-B, rows affected: 1
2025-09-18 14:09:07,942 - db_manager - INFO - Grievance updated in db: GR-20250918-KOJH-A5C3-B
2025-09-18 14:09:07,942 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 14:09:07,947 - db_manager - INFO - Starting database transaction
2025-09-18 14:09:07,947 - db_manager - INFO - Executing get_grievance_files: 
            SELECT file_id, file_name, file_type, file_size, upload_timestamp
            FROM file...
2025-09-18 14:09:07,948 - db_manager - INFO - get_grievance_files completed in 0.01s. Rows: 0
2025-09-18 14:09:07,949 - db_manager - INFO - Transaction committed successfully
2025-09-18 14:09:07,949 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 14:09:07,949 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 14:09:07,955 - db_manager - INFO - Starting database transaction
2025-09-18 14:09:07,955 - db_manager - INFO - Executing get_grievance_files: 
            SELECT file_id, file_name, file_type, file_size, upload_timestamp
            FROM file...
2025-09-18 14:09:07,956 - db_manager - INFO - get_grievance_files completed in 0.01s. Rows: 0
2025-09-18 14:09:07,956 - db_manager - INFO - Transaction committed successfully
2025-09-18 14:09:07,956 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 14:09:08,000 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 14:09:08,006 - db_manager - INFO - Starting database transaction
2025-09-18 14:09:08,007 - db_manager - INFO - Executing get_grievance_by_id: 
                SELECT g.*, c.complainant_full_name, c.complainant_phone, c.complainant_email,
    ...
2025-09-18 14:09:08,008 - db_manager - INFO - get_grievance_by_id completed in 0.01s. Rows: 1
2025-09-18 14:09:08,009 - db_manager - INFO - Transaction committed successfully
2025-09-18 14:09:08,009 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 14:09:08,009 - db_manager - DEBUG - get_grievance_by_id: grievance_id: {'grievance_id': 'GR-20250918-KOJH-A5C3-B', 'complainant_id': 'CM-20250918-KOJH-8358-B', 'grievance_categories': ['Environmental - Air Pollution'], 'grievance_categories_alternative': ['Environmental - Noise Pollution', 'Environmental - Drainage and Sewage Management', 'Environmental, Social - Cutting of Trees'], 'follow_up_question': ['How many people in your household are affected by the dust, and how long have your children been coughing?'], 'grievance_summary': 'Dust is spread throughout the house due to construction, causing children to cough.', 'grievance_description': 'dust everywhere in my house \nkids are coughing hard', 'grievance_claimed_amount': None, 'grievance_location': None, 'language_code': 'en', 'grievance_classification_status': 'pending', 'grievance_creation_date': datetime.datetime(2025, 9, 18, 14, 8, 46, 221220, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'grievance_modification_date': datetime.datetime(2025, 9, 18, 14, 9, 7, 939085, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'is_temporary': True, 'source': 'bot', 'complainant_full_name': 'c30d0407030200900d6313f7635b76d23d018dde9e85e029b7387d83460be7596faa35dab20bb8b921fbd97069049e4c9b29b7295bc84875feb9979c6f334dca9739536793d6f33812b989c7243c', 'complainant_phone': 'c30d040703023d48004768df5fa467d23d01dbd2f747fe0ae0583d3c543e3336838c995adbef4e99b1936df8a128f7fa34c257b6957225e0dc7c76f8704bc294942730e08fd38806b4034b629998', 'complainant_email': 'c30d040703021bc6e27f4db1f0a87fd23d01c39da332b89de8da21469cad3a82d63a155053470aaa6b1d61705eba1c91677fc73103d61988175d77697e317fd30a8d82ae15d89d301c3fbbf12310', 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_municipality': 'Birtamod Municipality', 'complainant_ward': None, 'complainant_village': 'Slot_Skipped', 'complainant_address': 'c30d040703027bd43e56168c4c5a6fd23d01f079786c7a32680f85194b15587e52034d16d05184e1fea78a708295d6fa7f31fbeef33674802fc62a629d940304e835112288ce118fbea65b72fe64'}, results: [{'grievance_id': 'GR-20250918-KOJH-A5C3-B', 'complainant_id': 'CM-20250918-KOJH-8358-B', 'grievance_categories': '["Environmental - Air Pollution"]', 'grievance_categories_alternative': '["Environmental - Noise Pollution", "Environmental - Drainage and Sewage Management", "Environmental, Social - Cutting of Trees"]', 'follow_up_question': '["How many people in your household are affected by the dust, and how long have your children been coughing?"]', 'grievance_summary': 'Dust is spread throughout the house due to construction, causing children to cough.', 'grievance_description': 'dust everywhere in my house \nkids are coughing hard', 'grievance_claimed_amount': None, 'grievance_location': None, 'language_code': 'en', 'grievance_classification_status': 'pending', 'grievance_creation_date': datetime.datetime(2025, 9, 18, 14, 8, 46, 221220, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'grievance_modification_date': datetime.datetime(2025, 9, 18, 14, 9, 7, 939085, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'is_temporary': True, 'source': 'bot', 'complainant_full_name': 'c30d0407030200900d6313f7635b76d23d018dde9e85e029b7387d83460be7596faa35dab20bb8b921fbd97069049e4c9b29b7295bc84875feb9979c6f334dca9739536793d6f33812b989c7243c', 'complainant_phone': 'c30d040703023d48004768df5fa467d23d01dbd2f747fe0ae0583d3c543e3336838c995adbef4e99b1936df8a128f7fa34c257b6957225e0dc7c76f8704bc294942730e08fd38806b4034b629998', 'complainant_email': 'c30d040703021bc6e27f4db1f0a87fd23d01c39da332b89de8da21469cad3a82d63a155053470aaa6b1d61705eba1c91677fc73103d61988175d77697e317fd30a8d82ae15d89d301c3fbbf12310', 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_municipality': 'Birtamod Municipality', 'complainant_ward': None, 'complainant_village': 'Slot_Skipped', 'complainant_address': 'c30d040703027bd43e56168c4c5a6fd23d01f079786c7a32680f85194b15587e52034d16d05184e1fea78a708295d6fa7f31fbeef33674802fc62a629d940304e835112288ce118fbea65b72fe64'}]
2025-09-18 14:09:14,482 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 14:09:14,487 - db_manager - INFO - Starting database transaction
2025-09-18 14:09:14,487 - db_manager - INFO - Executing get_complainant_id_from_grievance_id: 
            SELECT complainant_id
            FROM grievances
            WHERE grievance_id = %s
 ...
2025-09-18 14:09:14,488 - db_manager - INFO - get_complainant_id_from_grievance_id completed in 0.01s. Rows: 1
2025-09-18 14:09:14,488 - db_manager - INFO - Transaction committed successfully
2025-09-18 14:09:14,488 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 14:09:14,489 - db_manager - INFO - update_complainant: Updating complainant with ID: CM-20250918-KOJH-8358-B
2025-09-18 14:09:14,489 - db_manager - DEBUG - encrypted and hashed data at encrypt_and_hash_sensitive_data: {}
2025-09-18 14:09:14,489 - db_manager - DEBUG - encrypted_data at update_complainant: {}
2025-09-18 14:09:14,489 - db_manager - DEBUG - No complainant field to update
2025-09-18 14:09:14,489 - db_manager - INFO - Complainant updated in db: GR-20250918-KOJH-A5C3-B
2025-09-18 14:09:14,489 - db_manager - INFO - update_grievance: Updating grievance with ID: GR-20250918-KOJH-A5C3-B
2025-09-18 14:09:14,489 - db_manager - DEBUG - execute_update values: ('["Environmental - Air Pollution"]', 'GR-20250918-KOJH-A5C3-B')
2025-09-18 14:09:14,489 - db_manager - DEBUG - execute_update query: 
                    UPDATE grievances 
                    SET grievance_categories = %s, grievance_modification_date = CURRENT_TIMESTAMP
                    WHERE grievance_id = %s
                    RETURNING grievance_id
                
2025-09-18 14:09:14,489 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 14:09:14,493 - db_manager - INFO - Starting database transaction
2025-09-18 14:09:14,494 - db_manager - INFO - execute_update: Executing update query: 
                    UPDATE grievances 
                    SET grievance_categories = %s, grievance...
2025-09-18 14:09:14,495 - db_manager - INFO - execute_update: Update completed in 0.01s. Affected rows: 1
2025-09-18 14:09:14,497 - db_manager - INFO - Transaction committed successfully
2025-09-18 14:09:14,497 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 14:09:14,497 - db_manager - INFO - update_grievance: Updated grievance with ID: GR-20250918-KOJH-A5C3-B, rows affected: 1
2025-09-18 14:09:14,497 - db_manager - INFO - Grievance updated in db: GR-20250918-KOJH-A5C3-B
2025-09-18 14:09:14,542 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 14:09:14,547 - db_manager - INFO - Starting database transaction
2025-09-18 14:09:14,547 - db_manager - INFO - Executing get_grievance_files: 
            SELECT file_id, file_name, file_type, file_size, upload_timestamp
            FROM file...
2025-09-18 14:09:14,549 - db_manager - INFO - get_grievance_files completed in 0.01s. Rows: 0
2025-09-18 14:09:14,549 - db_manager - INFO - Transaction committed successfully
2025-09-18 14:09:14,549 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 14:09:14,549 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 14:09:14,554 - db_manager - INFO - Starting database transaction
2025-09-18 14:09:14,554 - db_manager - INFO - Executing get_complainant_by_id: 
            SELECT complainant_id, complainant_unique_id, complainant_full_name,    complainant_pho...
2025-09-18 14:09:14,555 - db_manager - INFO - get_complainant_by_id completed in 0.01s. Rows: 1
2025-09-18 14:09:14,556 - db_manager - INFO - Transaction committed successfully
2025-09-18 14:09:14,556 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 14:09:14,556 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 14:09:14,560 - db_manager - INFO - Starting database transaction
2025-09-18 14:09:14,560 - db_manager - INFO - Executing decrypt_field: SELECT pgp_sym_decrypt(decode(%s, 'hex'), %s) AS decrypted...
2025-09-18 14:09:14,561 - db_manager - INFO - decrypt_field completed in 0.01s. Rows: 1
2025-09-18 14:09:14,561 - db_manager - INFO - Transaction committed successfully
2025-09-18 14:09:14,561 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 14:09:14,561 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 14:09:14,566 - db_manager - INFO - Starting database transaction
2025-09-18 14:09:14,567 - db_manager - INFO - Executing decrypt_field: SELECT pgp_sym_decrypt(decode(%s, 'hex'), %s) AS decrypted...
2025-09-18 14:09:14,568 - db_manager - INFO - decrypt_field completed in 0.01s. Rows: 1
2025-09-18 14:09:14,568 - db_manager - INFO - Transaction committed successfully
2025-09-18 14:09:14,568 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 14:09:14,568 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 14:09:14,573 - db_manager - INFO - Starting database transaction
2025-09-18 14:09:14,573 - db_manager - INFO - Executing decrypt_field: SELECT pgp_sym_decrypt(decode(%s, 'hex'), %s) AS decrypted...
2025-09-18 14:09:14,575 - db_manager - INFO - decrypt_field completed in 0.01s. Rows: 1
2025-09-18 14:09:14,575 - db_manager - INFO - Transaction committed successfully
2025-09-18 14:09:14,575 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 14:09:14,575 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 14:09:14,580 - db_manager - INFO - Starting database transaction
2025-09-18 14:09:14,580 - db_manager - INFO - Executing decrypt_field: SELECT pgp_sym_decrypt(decode(%s, 'hex'), %s) AS decrypted...
2025-09-18 14:09:14,581 - db_manager - INFO - decrypt_field completed in 0.01s. Rows: 1
2025-09-18 14:09:14,581 - db_manager - INFO - Transaction committed successfully
2025-09-18 14:09:14,581 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 14:09:14,581 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 14:09:14,586 - db_manager - INFO - Starting database transaction
2025-09-18 14:09:14,586 - db_manager - INFO - Executing get_grievance_by_id: 
                SELECT g.*, c.complainant_full_name, c.complainant_phone, c.complainant_email,
    ...
2025-09-18 14:09:14,587 - db_manager - INFO - get_grievance_by_id completed in 0.01s. Rows: 1
2025-09-18 14:09:14,588 - db_manager - INFO - Transaction committed successfully
2025-09-18 14:09:14,588 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 14:09:14,588 - db_manager - DEBUG - get_grievance_by_id: grievance_id: {'grievance_id': 'GR-20250918-KOJH-A5C3-B', 'complainant_id': 'CM-20250918-KOJH-8358-B', 'grievance_categories': ['Environmental - Air Pollution'], 'grievance_categories_alternative': ['Environmental - Noise Pollution', 'Environmental - Drainage and Sewage Management', 'Environmental, Social - Cutting of Trees'], 'follow_up_question': ['How many people in your household are affected by the dust, and how long have your children been coughing?'], 'grievance_summary': 'Dust is spread throughout the house due to construction, causing children to cough.', 'grievance_description': 'dust everywhere in my house \nkids are coughing hard', 'grievance_claimed_amount': None, 'grievance_location': None, 'language_code': 'en', 'grievance_classification_status': 'pending', 'grievance_creation_date': datetime.datetime(2025, 9, 18, 14, 8, 46, 221220, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'grievance_modification_date': datetime.datetime(2025, 9, 18, 14, 9, 14, 494143, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'is_temporary': True, 'source': 'bot', 'complainant_full_name': 'c30d0407030200900d6313f7635b76d23d018dde9e85e029b7387d83460be7596faa35dab20bb8b921fbd97069049e4c9b29b7295bc84875feb9979c6f334dca9739536793d6f33812b989c7243c', 'complainant_phone': 'c30d040703023d48004768df5fa467d23d01dbd2f747fe0ae0583d3c543e3336838c995adbef4e99b1936df8a128f7fa34c257b6957225e0dc7c76f8704bc294942730e08fd38806b4034b629998', 'complainant_email': 'c30d040703021bc6e27f4db1f0a87fd23d01c39da332b89de8da21469cad3a82d63a155053470aaa6b1d61705eba1c91677fc73103d61988175d77697e317fd30a8d82ae15d89d301c3fbbf12310', 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_municipality': 'Birtamod Municipality', 'complainant_ward': None, 'complainant_village': 'Slot_Skipped', 'complainant_address': 'c30d040703027bd43e56168c4c5a6fd23d01f079786c7a32680f85194b15587e52034d16d05184e1fea78a708295d6fa7f31fbeef33674802fc62a629d940304e835112288ce118fbea65b72fe64'}, results: [{'grievance_id': 'GR-20250918-KOJH-A5C3-B', 'complainant_id': 'CM-20250918-KOJH-8358-B', 'grievance_categories': '["Environmental - Air Pollution"]', 'grievance_categories_alternative': '["Environmental - Noise Pollution", "Environmental - Drainage and Sewage Management", "Environmental, Social - Cutting of Trees"]', 'follow_up_question': '["How many people in your household are affected by the dust, and how long have your children been coughing?"]', 'grievance_summary': 'Dust is spread throughout the house due to construction, causing children to cough.', 'grievance_description': 'dust everywhere in my house \nkids are coughing hard', 'grievance_claimed_amount': None, 'grievance_location': None, 'language_code': 'en', 'grievance_classification_status': 'pending', 'grievance_creation_date': datetime.datetime(2025, 9, 18, 14, 8, 46, 221220, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'grievance_modification_date': datetime.datetime(2025, 9, 18, 14, 9, 14, 494143, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'is_temporary': True, 'source': 'bot', 'complainant_full_name': 'c30d0407030200900d6313f7635b76d23d018dde9e85e029b7387d83460be7596faa35dab20bb8b921fbd97069049e4c9b29b7295bc84875feb9979c6f334dca9739536793d6f33812b989c7243c', 'complainant_phone': 'c30d040703023d48004768df5fa467d23d01dbd2f747fe0ae0583d3c543e3336838c995adbef4e99b1936df8a128f7fa34c257b6957225e0dc7c76f8704bc294942730e08fd38806b4034b629998', 'complainant_email': 'c30d040703021bc6e27f4db1f0a87fd23d01c39da332b89de8da21469cad3a82d63a155053470aaa6b1d61705eba1c91677fc73103d61988175d77697e317fd30a8d82ae15d89d301c3fbbf12310', 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_municipality': 'Birtamod Municipality', 'complainant_ward': None, 'complainant_village': 'Slot_Skipped', 'complainant_address': 'c30d040703027bd43e56168c4c5a6fd23d01f079786c7a32680f85194b15587e52034d16d05184e1fea78a708295d6fa7f31fbeef33674802fc62a629d940304e835112288ce118fbea65b72fe64'}]
2025-09-18 14:09:14,588 - db_manager - INFO - update_complainant: Updating complainant with ID: CM-20250918-KOJH-8358-B
2025-09-18 14:09:14,588 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 14:09:14,593 - db_manager - INFO - Starting database transaction
2025-09-18 14:09:14,593 - db_manager - INFO - Executing encrypt_field: SELECT encode(pgp_sym_encrypt(%s, %s), 'hex') AS encrypted...
2025-09-18 14:09:14,594 - db_manager - INFO - encrypt_field completed in 0.01s. Rows: 1
2025-09-18 14:09:14,594 - db_manager - INFO - Transaction committed successfully
2025-09-18 14:09:14,594 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 14:09:14,594 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 14:09:14,598 - db_manager - INFO - Starting database transaction
2025-09-18 14:09:14,599 - db_manager - INFO - Executing encrypt_field: SELECT encode(pgp_sym_encrypt(%s, %s), 'hex') AS encrypted...
2025-09-18 14:09:14,600 - db_manager - INFO - encrypt_field completed in 0.01s. Rows: 1
2025-09-18 14:09:14,600 - db_manager - INFO - Transaction committed successfully
2025-09-18 14:09:14,600 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 14:09:14,600 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 14:09:14,604 - db_manager - INFO - Starting database transaction
2025-09-18 14:09:14,605 - db_manager - INFO - Executing encrypt_field: SELECT encode(pgp_sym_encrypt(%s, %s), 'hex') AS encrypted...
2025-09-18 14:09:14,605 - db_manager - INFO - encrypt_field completed in 0.01s. Rows: 1
2025-09-18 14:09:14,606 - db_manager - INFO - Transaction committed successfully
2025-09-18 14:09:14,606 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 14:09:14,606 - db_manager - DEBUG - encrypted phone number Not provided at encrypt_complainant_data: c30d04070302435dc50afa9027237ad23d014905ffe77fa056783740523fbcf27b77c01328b38bf5bdaa907c71defa8f5cac07b92d94dbdf797aa9ef5939217cc5f5a33c8499b7d4f2705d538f30
2025-09-18 14:09:14,606 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 14:09:14,610 - db_manager - INFO - Starting database transaction
2025-09-18 14:09:14,610 - db_manager - INFO - Executing encrypt_field: SELECT encode(pgp_sym_encrypt(%s, %s), 'hex') AS encrypted...
2025-09-18 14:09:14,611 - db_manager - INFO - encrypt_field completed in 0.01s. Rows: 1
2025-09-18 14:09:14,611 - db_manager - INFO - Transaction committed successfully
2025-09-18 14:09:14,612 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 14:09:14,612 - db_manager - DEBUG - phone number Not provided hashed to d83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f at hash_sensitive_data
2025-09-18 14:09:14,612 - db_manager - DEBUG - encrypted and hashed data at encrypt_and_hash_sensitive_data: {'complainant_full_name': 'c30d04070302b7ee0e5da1de1ac370d23d015a25229044f0489cf3beb65c76855f01fbb8b964a7f87074d5d1e899656b46a671a2160a230299619c7de79d9e56f0bd09b28b61624e32183be95307', 'complainant_phone': 'c30d04070302435dc50afa9027237ad23d014905ffe77fa056783740523fbcf27b77c01328b38bf5bdaa907c71defa8f5cac07b92d94dbdf797aa9ef5939217cc5f5a33c8499b7d4f2705d538f30', 'complainant_email': 'c30d04070302f48f6aeba6b02ba472d23d0172e925a658c5955bfcfac3c8cd789bdaca414489708b8c185c36cdc54db12f6a7fb0ab62d3018f6feaf941b04af3efc2aa286ef7164f58041b838ae5', 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_municipality': 'Birtamod Municipality', 'complainant_village': 'Slot_Skipped', 'complainant_address': 'c30d04070302bd158634e6bce45e68d23d01d6834106319bc0a88238a8addcc466458e1764d4b5d5fee0e718a727789c8960c1fc450585a7fbb0fac530b21409a0729fe61b903ded16ba605c9673', 'complainant_email_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'complainant_phone_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'complainant_full_name_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f'}
2025-09-18 14:09:14,612 - db_manager - DEBUG - encrypted_data at update_complainant: {'complainant_full_name': 'c30d04070302b7ee0e5da1de1ac370d23d015a25229044f0489cf3beb65c76855f01fbb8b964a7f87074d5d1e899656b46a671a2160a230299619c7de79d9e56f0bd09b28b61624e32183be95307', 'complainant_phone': 'c30d04070302435dc50afa9027237ad23d014905ffe77fa056783740523fbcf27b77c01328b38bf5bdaa907c71defa8f5cac07b92d94dbdf797aa9ef5939217cc5f5a33c8499b7d4f2705d538f30', 'complainant_email': 'c30d04070302f48f6aeba6b02ba472d23d0172e925a658c5955bfcfac3c8cd789bdaca414489708b8c185c36cdc54db12f6a7fb0ab62d3018f6feaf941b04af3efc2aa286ef7164f58041b838ae5', 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_municipality': 'Birtamod Municipality', 'complainant_village': 'Slot_Skipped', 'complainant_address': 'c30d04070302bd158634e6bce45e68d23d01d6834106319bc0a88238a8addcc466458e1764d4b5d5fee0e718a727789c8960c1fc450585a7fbb0fac530b21409a0729fe61b903ded16ba605c9673', 'complainant_email_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'complainant_phone_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'complainant_full_name_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f'}
2025-09-18 14:09:14,612 - db_manager - DEBUG - execute_update values: ('c30d04070302b7ee0e5da1de1ac370d23d015a25229044f0489cf3beb65c76855f01fbb8b964a7f87074d5d1e899656b46a671a2160a230299619c7de79d9e56f0bd09b28b61624e32183be95307', 'c30d04070302435dc50afa9027237ad23d014905ffe77fa056783740523fbcf27b77c01328b38bf5bdaa907c71defa8f5cac07b92d94dbdf797aa9ef5939217cc5f5a33c8499b7d4f2705d538f30', 'c30d04070302f48f6aeba6b02ba472d23d0172e925a658c5955bfcfac3c8cd789bdaca414489708b8c185c36cdc54db12f6a7fb0ab62d3018f6feaf941b04af3efc2aa286ef7164f58041b838ae5', 'Koshi', 'Jhapa', 'Birtamod Municipality', 'Slot_Skipped', 'c30d04070302bd158634e6bce45e68d23d01d6834106319bc0a88238a8addcc466458e1764d4b5d5fee0e718a727789c8960c1fc450585a7fbb0fac530b21409a0729fe61b903ded16ba605c9673', 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'CM-20250918-KOJH-8358-B')
2025-09-18 14:09:14,612 - db_manager - DEBUG - execute_update query: UPDATE complainants SET complainant_full_name = %s, complainant_phone = %s, complainant_email = %s, complainant_province = %s, complainant_district = %s, complainant_municipality = %s, complainant_village = %s, complainant_address = %s, complainant_email_hash = %s, complainant_phone_hash = %s, complainant_full_name_hash = %s WHERE complainant_id = %s
2025-09-18 14:09:14,612 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 14:09:14,617 - db_manager - INFO - Starting database transaction
2025-09-18 14:09:14,617 - db_manager - INFO - execute_update: Executing update query: UPDATE complainants SET complainant_full_name = %s, complainant_phone = %s, complainant_email = %s, ...
2025-09-18 14:09:14,618 - db_manager - INFO - execute_update: Update completed in 0.01s. Affected rows: 1
2025-09-18 14:09:14,620 - db_manager - INFO - Transaction committed successfully
2025-09-18 14:09:14,620 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 14:09:14,621 - db_manager - INFO - Complainant updated in db: CM-20250918-KOJH-8358-B
2025-09-18 14:09:14,621 - db_manager - INFO - update_grievance: Updating grievance with ID: GR-20250918-KOJH-A5C3-B
2025-09-18 14:09:14,621 - db_manager - DEBUG - execute_update values: ('["Environmental - Air Pollution"]', 'Not provided', 'dust everywhere in my house \nkids are coughing hard', 'GR-20250918-KOJH-A5C3-B')
2025-09-18 14:09:14,621 - db_manager - DEBUG - execute_update query: 
                    UPDATE grievances 
                    SET grievance_categories = %s, grievance_summary = %s, grievance_description = %s, grievance_modification_date = CURRENT_TIMESTAMP
                    WHERE grievance_id = %s
                    RETURNING grievance_id
                
2025-09-18 14:09:14,621 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 14:09:14,626 - db_manager - INFO - Starting database transaction
2025-09-18 14:09:14,626 - db_manager - INFO - execute_update: Executing update query: 
                    UPDATE grievances 
                    SET grievance_categories = %s, grievance...
2025-09-18 14:09:14,627 - db_manager - INFO - execute_update: Update completed in 0.01s. Affected rows: 1
2025-09-18 14:09:14,630 - db_manager - INFO - Transaction committed successfully
2025-09-18 14:09:14,630 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 14:09:14,630 - db_manager - INFO - update_grievance: Updated grievance with ID: GR-20250918-KOJH-A5C3-B, rows affected: 1
2025-09-18 14:09:14,630 - db_manager - INFO - Grievance updated in db: GR-20250918-KOJH-A5C3-B
2025-09-18 14:09:55,075 - db_manager - INFO - create_complainant: Creating complainant with ID: CM-20250918-KOJH-36FD-B
2025-09-18 14:09:55,075 - db_manager - DEBUG - encrypted and hashed data at encrypt_and_hash_sensitive_data: {'complainant_id': 'CM-20250918-KOJH-36FD-B', 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_unique_id': 'CM-20250918-KOJH-36FD-B'}
2025-09-18 14:09:55,075 - db_manager - DEBUG - query_keys at generate_query_string: dict_keys(['complainant_id', 'complainant_province', 'complainant_district', 'complainant_unique_id'])
2025-09-18 14:09:55,075 - db_manager - DEBUG - Generated query: INSERT INTO complainants (complainant_id, complainant_province, complainant_district, complainant_unique_id) VALUES (%s, %s, %s, %s)
2025-09-18 14:09:55,075 - db_manager - DEBUG - len of query_keys: 4
2025-09-18 14:09:55,075 - db_manager - DEBUG - Generated query: INSERT INTO complainants (complainant_id, complainant_province, complainant_district, complainant_unique_id) VALUES (%s, %s, %s, %s)
2025-09-18 14:09:55,075 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 14:09:55,082 - db_manager - INFO - Starting database transaction
2025-09-18 14:09:55,085 - db_manager - INFO - Transaction committed successfully
2025-09-18 14:09:55,085 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 14:09:55,085 - db_manager - INFO - create_complainant: Successfully created complainant with ID: CM-20250918-KOJH-36FD-B
2025-09-18 14:09:55,085 - db_manager - INFO - create_grievance: Creating grievance with data: {'grievance_id': 'GR-20250918-KOJH-D7FC-B', 'complainant_id': 'CM-20250918-KOJH-36FD-B', 'grievance_description': 'dust everywhere', 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_office': None, 'source': 'bot', 'complainant_unique_id': 'CM-20250918-KOJH-36FD-B'}
2025-09-18 14:09:55,085 - db_manager - INFO - create_grievance: Creating grievance with ID: GR-20250918-KOJH-D7FC-B
2025-09-18 14:09:55,085 - db_manager - INFO - create_grievance: Creating grievance with allowed fields: ['grievance_id', 'complainant_id', 'grievance_categories', 'grievance_categories_alternative', 'follow_up_question', 'grievance_summary', 'grievance_description', 'grievance_claimed_amount', 'grievance_location', 'is_temporary', 'source', 'language_code', 'grievance_classification_status']
2025-09-18 14:09:55,085 - db_manager - DEBUG - query_keys at generate_query_string: dict_keys(['grievance_id', 'complainant_id', 'grievance_description', 'source'])
2025-09-18 14:09:55,085 - db_manager - DEBUG - Generated query: INSERT INTO grievances (grievance_id, complainant_id, grievance_description, source) VALUES (%s, %s, %s, %s) RETURNING grievance_id
2025-09-18 14:09:55,085 - db_manager - DEBUG - len of query_keys: 4
2025-09-18 14:09:55,085 - db_manager - DEBUG - Generated query: INSERT INTO grievances (grievance_id, complainant_id, grievance_description, source) VALUES (%s, %s, %s, %s) RETURNING grievance_id
2025-09-18 14:09:55,085 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 14:09:55,091 - db_manager - INFO - Starting database transaction
2025-09-18 14:09:55,095 - db_manager - INFO - Transaction committed successfully
2025-09-18 14:09:55,095 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 14:09:55,095 - db_manager - INFO - create_grievance: Successfully created grievance with ID: GR-20250918-KOJH-D7FC-B
2025-09-18 14:09:57,388 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 14:09:57,393 - db_manager - INFO - Starting database transaction
2025-09-18 14:09:57,394 - db_manager - INFO - Executing get_complainant_by_id: 
            SELECT complainant_id, complainant_unique_id, complainant_full_name,    complainant_pho...
2025-09-18 14:09:57,395 - db_manager - INFO - get_complainant_by_id completed in 0.01s. Rows: 1
2025-09-18 14:09:57,395 - db_manager - INFO - Transaction committed successfully
2025-09-18 14:09:57,395 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 14:09:57,395 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 14:09:57,400 - db_manager - INFO - Starting database transaction
2025-09-18 14:09:57,400 - db_manager - INFO - Executing get_grievance_by_id: 
                SELECT g.*, c.complainant_full_name, c.complainant_phone, c.complainant_email,
    ...
2025-09-18 14:09:57,402 - db_manager - INFO - get_grievance_by_id completed in 0.01s. Rows: 1
2025-09-18 14:09:57,402 - db_manager - INFO - Transaction committed successfully
2025-09-18 14:09:57,402 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 14:09:57,403 - db_manager - DEBUG - get_grievance_by_id: grievance_id: {'grievance_id': 'GR-20250918-KOJH-D7FC-B', 'complainant_id': 'CM-20250918-KOJH-36FD-B', 'grievance_categories': None, 'grievance_categories_alternative': None, 'follow_up_question': None, 'grievance_summary': None, 'grievance_description': 'dust everywhere', 'grievance_claimed_amount': None, 'grievance_location': None, 'language_code': 'ne', 'grievance_classification_status': 'pending', 'grievance_creation_date': datetime.datetime(2025, 9, 18, 14, 9, 55, 91461, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'grievance_modification_date': datetime.datetime(2025, 9, 18, 14, 9, 55, 91461, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'is_temporary': True, 'source': 'bot', 'complainant_full_name': None, 'complainant_phone': None, 'complainant_email': None, 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_municipality': None, 'complainant_ward': None, 'complainant_village': None, 'complainant_address': None}, results: [{'grievance_id': 'GR-20250918-KOJH-D7FC-B', 'complainant_id': 'CM-20250918-KOJH-36FD-B', 'grievance_categories': None, 'grievance_categories_alternative': None, 'follow_up_question': None, 'grievance_summary': None, 'grievance_description': 'dust everywhere', 'grievance_claimed_amount': None, 'grievance_location': None, 'language_code': 'ne', 'grievance_classification_status': 'pending', 'grievance_creation_date': datetime.datetime(2025, 9, 18, 14, 9, 55, 91461, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'grievance_modification_date': datetime.datetime(2025, 9, 18, 14, 9, 55, 91461, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'is_temporary': True, 'source': 'bot', 'complainant_full_name': None, 'complainant_phone': None, 'complainant_email': None, 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_municipality': None, 'complainant_ward': None, 'complainant_village': None, 'complainant_address': None}]
2025-09-18 14:09:57,403 - db_manager - INFO - update_complainant: Updating complainant with ID: CM-20250918-KOJH-36FD-B
2025-09-18 14:09:57,403 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 14:09:57,407 - db_manager - INFO - Starting database transaction
2025-09-18 14:09:57,408 - db_manager - INFO - Executing encrypt_field: SELECT encode(pgp_sym_encrypt(%s, %s), 'hex') AS encrypted...
2025-09-18 14:09:57,409 - db_manager - INFO - encrypt_field completed in 0.01s. Rows: 1
2025-09-18 14:09:57,409 - db_manager - INFO - Transaction committed successfully
2025-09-18 14:09:57,409 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 14:09:57,409 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 14:09:57,414 - db_manager - INFO - Starting database transaction
2025-09-18 14:09:57,414 - db_manager - INFO - Executing encrypt_field: SELECT encode(pgp_sym_encrypt(%s, %s), 'hex') AS encrypted...
2025-09-18 14:09:57,415 - db_manager - INFO - encrypt_field completed in 0.01s. Rows: 1
2025-09-18 14:09:57,415 - db_manager - INFO - Transaction committed successfully
2025-09-18 14:09:57,416 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 14:09:57,416 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 14:09:57,420 - db_manager - INFO - Starting database transaction
2025-09-18 14:09:57,420 - db_manager - INFO - Executing encrypt_field: SELECT encode(pgp_sym_encrypt(%s, %s), 'hex') AS encrypted...
2025-09-18 14:09:57,422 - db_manager - INFO - encrypt_field completed in 0.01s. Rows: 1
2025-09-18 14:09:57,422 - db_manager - INFO - Transaction committed successfully
2025-09-18 14:09:57,422 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 14:09:57,422 - db_manager - DEBUG - encrypted phone number Not provided at encrypt_complainant_data: c30d040703023740b0318f62576674d23d017f2f486bbcc6da2c5a88545a7c37f85396efc5ee1f14e5a0c1927c199d9ed010bbf8ba5180ca90b5a281ffcbf50422d5e1a68aedc22394c64a558855
2025-09-18 14:09:57,422 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 14:09:57,427 - db_manager - INFO - Starting database transaction
2025-09-18 14:09:57,427 - db_manager - INFO - Executing encrypt_field: SELECT encode(pgp_sym_encrypt(%s, %s), 'hex') AS encrypted...
2025-09-18 14:09:57,428 - db_manager - INFO - encrypt_field completed in 0.01s. Rows: 1
2025-09-18 14:09:57,428 - db_manager - INFO - Transaction committed successfully
2025-09-18 14:09:57,428 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 14:09:57,428 - db_manager - DEBUG - phone number Not provided hashed to d83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f at hash_sensitive_data
2025-09-18 14:09:57,428 - db_manager - DEBUG - encrypted and hashed data at encrypt_and_hash_sensitive_data: {'complainant_full_name': 'c30d0407030231ee04228fa9c0137dd23d010fe5a206714fcc622a725582bd07bfd6a329f44e6c56b72c6953b702545721d20d6fbc97f21cd3ceceb7fbcfab39e0400cfed4120f94fb4cea04d9ab', 'complainant_phone': 'c30d040703023740b0318f62576674d23d017f2f486bbcc6da2c5a88545a7c37f85396efc5ee1f14e5a0c1927c199d9ed010bbf8ba5180ca90b5a281ffcbf50422d5e1a68aedc22394c64a558855', 'complainant_email': 'c30d0407030228d7b0ce30cc61e174d23d01206952f8acbc08fd0f64193547e92ca914eacd635a6f52c3a6f24d0487b14d92a550e65d80def769f79beac80e0997d895215698bc945af4e03e0603', 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_municipality': 'Not provided', 'complainant_village': 'Not provided', 'complainant_address': 'c30d04070302418994854d20603d6bd23d01f092a7a07c3f5e1c83a864cad67e65478d7d5b7ee40908aa3031024d97c790b46781e0d2a8b0b00a4bfc038f88ef21b1ba9cebee08461228416086e7', 'complainant_email_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'complainant_phone_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'complainant_full_name_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f'}
2025-09-18 14:09:57,428 - db_manager - DEBUG - encrypted_data at update_complainant: {'complainant_full_name': 'c30d0407030231ee04228fa9c0137dd23d010fe5a206714fcc622a725582bd07bfd6a329f44e6c56b72c6953b702545721d20d6fbc97f21cd3ceceb7fbcfab39e0400cfed4120f94fb4cea04d9ab', 'complainant_phone': 'c30d040703023740b0318f62576674d23d017f2f486bbcc6da2c5a88545a7c37f85396efc5ee1f14e5a0c1927c199d9ed010bbf8ba5180ca90b5a281ffcbf50422d5e1a68aedc22394c64a558855', 'complainant_email': 'c30d0407030228d7b0ce30cc61e174d23d01206952f8acbc08fd0f64193547e92ca914eacd635a6f52c3a6f24d0487b14d92a550e65d80def769f79beac80e0997d895215698bc945af4e03e0603', 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_municipality': 'Not provided', 'complainant_village': 'Not provided', 'complainant_address': 'c30d04070302418994854d20603d6bd23d01f092a7a07c3f5e1c83a864cad67e65478d7d5b7ee40908aa3031024d97c790b46781e0d2a8b0b00a4bfc038f88ef21b1ba9cebee08461228416086e7', 'complainant_email_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'complainant_phone_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'complainant_full_name_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f'}
2025-09-18 14:09:57,428 - db_manager - DEBUG - execute_update values: ('c30d0407030231ee04228fa9c0137dd23d010fe5a206714fcc622a725582bd07bfd6a329f44e6c56b72c6953b702545721d20d6fbc97f21cd3ceceb7fbcfab39e0400cfed4120f94fb4cea04d9ab', 'c30d040703023740b0318f62576674d23d017f2f486bbcc6da2c5a88545a7c37f85396efc5ee1f14e5a0c1927c199d9ed010bbf8ba5180ca90b5a281ffcbf50422d5e1a68aedc22394c64a558855', 'c30d0407030228d7b0ce30cc61e174d23d01206952f8acbc08fd0f64193547e92ca914eacd635a6f52c3a6f24d0487b14d92a550e65d80def769f79beac80e0997d895215698bc945af4e03e0603', 'Koshi', 'Jhapa', 'Not provided', 'Not provided', 'c30d04070302418994854d20603d6bd23d01f092a7a07c3f5e1c83a864cad67e65478d7d5b7ee40908aa3031024d97c790b46781e0d2a8b0b00a4bfc038f88ef21b1ba9cebee08461228416086e7', 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'CM-20250918-KOJH-36FD-B')
2025-09-18 14:09:57,428 - db_manager - DEBUG - execute_update query: UPDATE complainants SET complainant_full_name = %s, complainant_phone = %s, complainant_email = %s, complainant_province = %s, complainant_district = %s, complainant_municipality = %s, complainant_village = %s, complainant_address = %s, complainant_email_hash = %s, complainant_phone_hash = %s, complainant_full_name_hash = %s WHERE complainant_id = %s
2025-09-18 14:09:57,428 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 14:09:57,433 - db_manager - INFO - Starting database transaction
2025-09-18 14:09:57,433 - db_manager - INFO - execute_update: Executing update query: UPDATE complainants SET complainant_full_name = %s, complainant_phone = %s, complainant_email = %s, ...
2025-09-18 14:09:57,434 - db_manager - INFO - execute_update: Update completed in 0.01s. Affected rows: 1
2025-09-18 14:09:57,436 - db_manager - INFO - Transaction committed successfully
2025-09-18 14:09:57,436 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 14:09:57,436 - db_manager - INFO - Complainant updated in db: CM-20250918-KOJH-36FD-B
2025-09-18 14:09:57,436 - db_manager - INFO - update_grievance: Updating grievance with ID: GR-20250918-KOJH-D7FC-B
2025-09-18 14:09:57,436 - db_manager - DEBUG - execute_update values: ('dust everywhere', 'GR-20250918-KOJH-D7FC-B')
2025-09-18 14:09:57,436 - db_manager - DEBUG - execute_update query: 
                    UPDATE grievances 
                    SET grievance_description = %s, grievance_modification_date = CURRENT_TIMESTAMP
                    WHERE grievance_id = %s
                    RETURNING grievance_id
                
2025-09-18 14:09:57,436 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 14:09:57,440 - db_manager - INFO - Starting database transaction
2025-09-18 14:09:57,441 - db_manager - INFO - execute_update: Executing update query: 
                    UPDATE grievances 
                    SET grievance_description = %s, grievanc...
2025-09-18 14:09:57,442 - db_manager - INFO - execute_update: Update completed in 0.01s. Affected rows: 1
2025-09-18 14:09:57,444 - db_manager - INFO - Transaction committed successfully
2025-09-18 14:09:57,444 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 14:09:57,444 - db_manager - INFO - update_grievance: Updated grievance with ID: GR-20250918-KOJH-D7FC-B, rows affected: 1
2025-09-18 14:09:57,444 - db_manager - INFO - Grievance updated in db: GR-20250918-KOJH-D7FC-B
2025-09-18 14:09:57,444 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 14:09:57,449 - db_manager - INFO - Starting database transaction
2025-09-18 14:09:57,449 - db_manager - INFO - Executing get_grievance_files: 
            SELECT file_id, file_name, file_type, file_size, upload_timestamp
            FROM file...
2025-09-18 14:09:57,450 - db_manager - INFO - get_grievance_files completed in 0.01s. Rows: 0
2025-09-18 14:09:57,450 - db_manager - INFO - Transaction committed successfully
2025-09-18 14:09:57,450 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 14:09:57,451 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 14:09:57,455 - db_manager - INFO - Starting database transaction
2025-09-18 14:09:57,455 - db_manager - INFO - Executing get_grievance_files: 
            SELECT file_id, file_name, file_type, file_size, upload_timestamp
            FROM file...
2025-09-18 14:09:57,456 - db_manager - INFO - get_grievance_files completed in 0.01s. Rows: 0
2025-09-18 14:09:57,456 - db_manager - INFO - Transaction committed successfully
2025-09-18 14:09:57,456 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 14:09:57,496 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 14:09:57,502 - db_manager - INFO - Starting database transaction
2025-09-18 14:09:57,502 - db_manager - INFO - Executing get_grievance_by_id: 
                SELECT g.*, c.complainant_full_name, c.complainant_phone, c.complainant_email,
    ...
2025-09-18 14:09:57,504 - db_manager - INFO - get_grievance_by_id completed in 0.01s. Rows: 1
2025-09-18 14:09:57,504 - db_manager - INFO - Transaction committed successfully
2025-09-18 14:09:57,504 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 14:09:57,504 - db_manager - DEBUG - get_grievance_by_id: grievance_id: {'grievance_id': 'GR-20250918-KOJH-D7FC-B', 'complainant_id': 'CM-20250918-KOJH-36FD-B', 'grievance_categories': None, 'grievance_categories_alternative': None, 'follow_up_question': None, 'grievance_summary': None, 'grievance_description': 'dust everywhere', 'grievance_claimed_amount': None, 'grievance_location': None, 'language_code': 'ne', 'grievance_classification_status': 'pending', 'grievance_creation_date': datetime.datetime(2025, 9, 18, 14, 9, 55, 91461, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'grievance_modification_date': datetime.datetime(2025, 9, 18, 14, 9, 57, 441168, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'is_temporary': True, 'source': 'bot', 'complainant_full_name': 'c30d0407030231ee04228fa9c0137dd23d010fe5a206714fcc622a725582bd07bfd6a329f44e6c56b72c6953b702545721d20d6fbc97f21cd3ceceb7fbcfab39e0400cfed4120f94fb4cea04d9ab', 'complainant_phone': 'c30d040703023740b0318f62576674d23d017f2f486bbcc6da2c5a88545a7c37f85396efc5ee1f14e5a0c1927c199d9ed010bbf8ba5180ca90b5a281ffcbf50422d5e1a68aedc22394c64a558855', 'complainant_email': 'c30d0407030228d7b0ce30cc61e174d23d01206952f8acbc08fd0f64193547e92ca914eacd635a6f52c3a6f24d0487b14d92a550e65d80def769f79beac80e0997d895215698bc945af4e03e0603', 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_municipality': 'Not provided', 'complainant_ward': None, 'complainant_village': 'Not provided', 'complainant_address': 'c30d04070302418994854d20603d6bd23d01f092a7a07c3f5e1c83a864cad67e65478d7d5b7ee40908aa3031024d97c790b46781e0d2a8b0b00a4bfc038f88ef21b1ba9cebee08461228416086e7'}, results: [{'grievance_id': 'GR-20250918-KOJH-D7FC-B', 'complainant_id': 'CM-20250918-KOJH-36FD-B', 'grievance_categories': None, 'grievance_categories_alternative': None, 'follow_up_question': None, 'grievance_summary': None, 'grievance_description': 'dust everywhere', 'grievance_claimed_amount': None, 'grievance_location': None, 'language_code': 'ne', 'grievance_classification_status': 'pending', 'grievance_creation_date': datetime.datetime(2025, 9, 18, 14, 9, 55, 91461, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'grievance_modification_date': datetime.datetime(2025, 9, 18, 14, 9, 57, 441168, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'is_temporary': True, 'source': 'bot', 'complainant_full_name': 'c30d0407030231ee04228fa9c0137dd23d010fe5a206714fcc622a725582bd07bfd6a329f44e6c56b72c6953b702545721d20d6fbc97f21cd3ceceb7fbcfab39e0400cfed4120f94fb4cea04d9ab', 'complainant_phone': 'c30d040703023740b0318f62576674d23d017f2f486bbcc6da2c5a88545a7c37f85396efc5ee1f14e5a0c1927c199d9ed010bbf8ba5180ca90b5a281ffcbf50422d5e1a68aedc22394c64a558855', 'complainant_email': 'c30d0407030228d7b0ce30cc61e174d23d01206952f8acbc08fd0f64193547e92ca914eacd635a6f52c3a6f24d0487b14d92a550e65d80def769f79beac80e0997d895215698bc945af4e03e0603', 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_municipality': 'Not provided', 'complainant_ward': None, 'complainant_village': 'Not provided', 'complainant_address': 'c30d04070302418994854d20603d6bd23d01f092a7a07c3f5e1c83a864cad67e65478d7d5b7ee40908aa3031024d97c790b46781e0d2a8b0b00a4bfc038f88ef21b1ba9cebee08461228416086e7'}]
2025-09-18 14:09:57,592 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 14:09:57,597 - db_manager - INFO - Starting database transaction
2025-09-18 14:09:57,598 - db_manager - INFO - Executing get_complainant_id_from_grievance_id: 
            SELECT complainant_id
            FROM grievances
            WHERE grievance_id = %s
 ...
2025-09-18 14:09:57,599 - db_manager - INFO - get_complainant_id_from_grievance_id completed in 0.01s. Rows: 1
2025-09-18 14:09:57,599 - db_manager - INFO - Transaction committed successfully
2025-09-18 14:09:57,599 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 14:09:57,599 - db_manager - INFO - update_complainant: Updating complainant with ID: CM-20250918-KOJH-36FD-B
2025-09-18 14:09:57,599 - db_manager - DEBUG - encrypted and hashed data at encrypt_and_hash_sensitive_data: {}
2025-09-18 14:09:57,599 - db_manager - DEBUG - encrypted_data at update_complainant: {}
2025-09-18 14:09:57,599 - db_manager - DEBUG - No complainant field to update
2025-09-18 14:09:57,599 - db_manager - INFO - Complainant updated in db: GR-20250918-KOJH-D7FC-B
2025-09-18 14:09:57,599 - db_manager - INFO - update_grievance: Updating grievance with ID: GR-20250918-KOJH-D7FC-B
2025-09-18 14:09:57,600 - db_manager - DEBUG - execute_update values: ('["N/A"]', 'N/A', 'GR-20250918-KOJH-D7FC-B')
2025-09-18 14:09:57,600 - db_manager - DEBUG - execute_update query: 
                    UPDATE grievances 
                    SET grievance_categories = %s, grievance_summary = %s, grievance_modification_date = CURRENT_TIMESTAMP
                    WHERE grievance_id = %s
                    RETURNING grievance_id
                
2025-09-18 14:09:57,600 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 14:09:57,604 - db_manager - INFO - Starting database transaction
2025-09-18 14:09:57,604 - db_manager - INFO - execute_update: Executing update query: 
                    UPDATE grievances 
                    SET grievance_categories = %s, grievance...
2025-09-18 14:09:57,605 - db_manager - INFO - execute_update: Update completed in 0.01s. Affected rows: 1
2025-09-18 14:09:57,607 - db_manager - INFO - Transaction committed successfully
2025-09-18 14:09:57,607 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 14:09:57,607 - db_manager - INFO - update_grievance: Updated grievance with ID: GR-20250918-KOJH-D7FC-B, rows affected: 1
2025-09-18 14:09:57,607 - db_manager - INFO - Grievance updated in db: GR-20250918-KOJH-D7FC-B
2025-09-18 14:09:57,655 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 14:09:57,660 - db_manager - INFO - Starting database transaction
2025-09-18 14:09:57,660 - db_manager - INFO - Executing get_grievance_files: 
            SELECT file_id, file_name, file_type, file_size, upload_timestamp
            FROM file...
2025-09-18 14:09:57,661 - db_manager - INFO - get_grievance_files completed in 0.01s. Rows: 0
2025-09-18 14:09:57,661 - db_manager - INFO - Transaction committed successfully
2025-09-18 14:09:57,661 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 14:09:57,661 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 14:09:57,667 - db_manager - INFO - Starting database transaction
2025-09-18 14:09:57,667 - db_manager - INFO - Executing get_complainant_by_id: 
            SELECT complainant_id, complainant_unique_id, complainant_full_name,    complainant_pho...
2025-09-18 14:09:57,668 - db_manager - INFO - get_complainant_by_id completed in 0.01s. Rows: 1
2025-09-18 14:09:57,668 - db_manager - INFO - Transaction committed successfully
2025-09-18 14:09:57,668 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 14:09:57,669 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 14:09:57,673 - db_manager - INFO - Starting database transaction
2025-09-18 14:09:57,673 - db_manager - INFO - Executing decrypt_field: SELECT pgp_sym_decrypt(decode(%s, 'hex'), %s) AS decrypted...
2025-09-18 14:09:57,674 - db_manager - INFO - decrypt_field completed in 0.01s. Rows: 1
2025-09-18 14:09:57,674 - db_manager - INFO - Transaction committed successfully
2025-09-18 14:09:57,674 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 14:09:57,675 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 14:09:57,679 - db_manager - INFO - Starting database transaction
2025-09-18 14:09:57,679 - db_manager - INFO - Executing decrypt_field: SELECT pgp_sym_decrypt(decode(%s, 'hex'), %s) AS decrypted...
2025-09-18 14:09:57,680 - db_manager - INFO - decrypt_field completed in 0.01s. Rows: 1
2025-09-18 14:09:57,680 - db_manager - INFO - Transaction committed successfully
2025-09-18 14:09:57,680 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 14:09:57,680 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 14:09:57,685 - db_manager - INFO - Starting database transaction
2025-09-18 14:09:57,686 - db_manager - INFO - Executing decrypt_field: SELECT pgp_sym_decrypt(decode(%s, 'hex'), %s) AS decrypted...
2025-09-18 14:09:57,687 - db_manager - INFO - decrypt_field completed in 0.01s. Rows: 1
2025-09-18 14:09:57,687 - db_manager - INFO - Transaction committed successfully
2025-09-18 14:09:57,687 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 14:09:57,687 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 14:09:57,691 - db_manager - INFO - Starting database transaction
2025-09-18 14:09:57,692 - db_manager - INFO - Executing decrypt_field: SELECT pgp_sym_decrypt(decode(%s, 'hex'), %s) AS decrypted...
2025-09-18 14:09:57,692 - db_manager - INFO - decrypt_field completed in 0.01s. Rows: 1
2025-09-18 14:09:57,693 - db_manager - INFO - Transaction committed successfully
2025-09-18 14:09:57,693 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 14:09:57,693 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 14:09:57,699 - db_manager - INFO - Starting database transaction
2025-09-18 14:09:57,699 - db_manager - INFO - Executing get_grievance_by_id: 
                SELECT g.*, c.complainant_full_name, c.complainant_phone, c.complainant_email,
    ...
2025-09-18 14:09:57,701 - db_manager - INFO - get_grievance_by_id completed in 0.01s. Rows: 1
2025-09-18 14:09:57,701 - db_manager - INFO - Transaction committed successfully
2025-09-18 14:09:57,701 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 14:09:57,701 - db_manager - DEBUG - get_grievance_by_id: grievance_id: {'grievance_id': 'GR-20250918-KOJH-D7FC-B', 'complainant_id': 'CM-20250918-KOJH-36FD-B', 'grievance_categories': ['N/A'], 'grievance_categories_alternative': None, 'follow_up_question': None, 'grievance_summary': 'N/A', 'grievance_description': 'dust everywhere', 'grievance_claimed_amount': None, 'grievance_location': None, 'language_code': 'ne', 'grievance_classification_status': 'pending', 'grievance_creation_date': datetime.datetime(2025, 9, 18, 14, 9, 55, 91461, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'grievance_modification_date': datetime.datetime(2025, 9, 18, 14, 9, 57, 604868, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'is_temporary': True, 'source': 'bot', 'complainant_full_name': 'c30d0407030231ee04228fa9c0137dd23d010fe5a206714fcc622a725582bd07bfd6a329f44e6c56b72c6953b702545721d20d6fbc97f21cd3ceceb7fbcfab39e0400cfed4120f94fb4cea04d9ab', 'complainant_phone': 'c30d040703023740b0318f62576674d23d017f2f486bbcc6da2c5a88545a7c37f85396efc5ee1f14e5a0c1927c199d9ed010bbf8ba5180ca90b5a281ffcbf50422d5e1a68aedc22394c64a558855', 'complainant_email': 'c30d0407030228d7b0ce30cc61e174d23d01206952f8acbc08fd0f64193547e92ca914eacd635a6f52c3a6f24d0487b14d92a550e65d80def769f79beac80e0997d895215698bc945af4e03e0603', 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_municipality': 'Not provided', 'complainant_ward': None, 'complainant_village': 'Not provided', 'complainant_address': 'c30d04070302418994854d20603d6bd23d01f092a7a07c3f5e1c83a864cad67e65478d7d5b7ee40908aa3031024d97c790b46781e0d2a8b0b00a4bfc038f88ef21b1ba9cebee08461228416086e7'}, results: [{'grievance_id': 'GR-20250918-KOJH-D7FC-B', 'complainant_id': 'CM-20250918-KOJH-36FD-B', 'grievance_categories': '["N/A"]', 'grievance_categories_alternative': None, 'follow_up_question': None, 'grievance_summary': 'N/A', 'grievance_description': 'dust everywhere', 'grievance_claimed_amount': None, 'grievance_location': None, 'language_code': 'ne', 'grievance_classification_status': 'pending', 'grievance_creation_date': datetime.datetime(2025, 9, 18, 14, 9, 55, 91461, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'grievance_modification_date': datetime.datetime(2025, 9, 18, 14, 9, 57, 604868, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'is_temporary': True, 'source': 'bot', 'complainant_full_name': 'c30d0407030231ee04228fa9c0137dd23d010fe5a206714fcc622a725582bd07bfd6a329f44e6c56b72c6953b702545721d20d6fbc97f21cd3ceceb7fbcfab39e0400cfed4120f94fb4cea04d9ab', 'complainant_phone': 'c30d040703023740b0318f62576674d23d017f2f486bbcc6da2c5a88545a7c37f85396efc5ee1f14e5a0c1927c199d9ed010bbf8ba5180ca90b5a281ffcbf50422d5e1a68aedc22394c64a558855', 'complainant_email': 'c30d0407030228d7b0ce30cc61e174d23d01206952f8acbc08fd0f64193547e92ca914eacd635a6f52c3a6f24d0487b14d92a550e65d80def769f79beac80e0997d895215698bc945af4e03e0603', 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_municipality': 'Not provided', 'complainant_ward': None, 'complainant_village': 'Not provided', 'complainant_address': 'c30d04070302418994854d20603d6bd23d01f092a7a07c3f5e1c83a864cad67e65478d7d5b7ee40908aa3031024d97c790b46781e0d2a8b0b00a4bfc038f88ef21b1ba9cebee08461228416086e7'}]
2025-09-18 14:09:57,702 - db_manager - INFO - update_complainant: Updating complainant with ID: CM-20250918-KOJH-36FD-B
2025-09-18 14:09:57,702 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 14:09:57,706 - db_manager - INFO - Starting database transaction
2025-09-18 14:09:57,707 - db_manager - INFO - Executing encrypt_field: SELECT encode(pgp_sym_encrypt(%s, %s), 'hex') AS encrypted...
2025-09-18 14:09:57,708 - db_manager - INFO - encrypt_field completed in 0.01s. Rows: 1
2025-09-18 14:09:57,708 - db_manager - INFO - Transaction committed successfully
2025-09-18 14:09:57,708 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 14:09:57,708 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 14:09:57,713 - db_manager - INFO - Starting database transaction
2025-09-18 14:09:57,713 - db_manager - INFO - Executing encrypt_field: SELECT encode(pgp_sym_encrypt(%s, %s), 'hex') AS encrypted...
2025-09-18 14:09:57,714 - db_manager - INFO - encrypt_field completed in 0.01s. Rows: 1
2025-09-18 14:09:57,714 - db_manager - INFO - Transaction committed successfully
2025-09-18 14:09:57,714 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 14:09:57,714 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 14:09:57,719 - db_manager - INFO - Starting database transaction
2025-09-18 14:09:57,719 - db_manager - INFO - Executing encrypt_field: SELECT encode(pgp_sym_encrypt(%s, %s), 'hex') AS encrypted...
2025-09-18 14:09:57,720 - db_manager - INFO - encrypt_field completed in 0.01s. Rows: 1
2025-09-18 14:09:57,720 - db_manager - INFO - Transaction committed successfully
2025-09-18 14:09:57,720 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 14:09:57,720 - db_manager - DEBUG - encrypted phone number Not provided at encrypt_complainant_data: c30d040703027510cf8ebb6d9bbf79d23d011e8767e2613cf81b9bb5e59b7d92f3a82070f55aaadbd4ac8d42a350d4d28dac14b2d66b18bbb03a241e046fe42063edfd15d2ca72ef8bd11750f863
2025-09-18 14:09:57,720 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 14:09:57,725 - db_manager - INFO - Starting database transaction
2025-09-18 14:09:57,725 - db_manager - INFO - Executing encrypt_field: SELECT encode(pgp_sym_encrypt(%s, %s), 'hex') AS encrypted...
2025-09-18 14:09:57,726 - db_manager - INFO - encrypt_field completed in 0.01s. Rows: 1
2025-09-18 14:09:57,726 - db_manager - INFO - Transaction committed successfully
2025-09-18 14:09:57,726 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 14:09:57,726 - db_manager - DEBUG - phone number Not provided hashed to d83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f at hash_sensitive_data
2025-09-18 14:09:57,726 - db_manager - DEBUG - encrypted and hashed data at encrypt_and_hash_sensitive_data: {'complainant_full_name': 'c30d04070302f66daa8e27032ee265d23d011178fdb7335fae8d925ef8a6845b76ccaaa7fd957ea3210a3d2dfc77cb3ba8a5416499374c55644fd1377c766f770122df37cdd1950fb76b700353d6', 'complainant_phone': 'c30d040703027510cf8ebb6d9bbf79d23d011e8767e2613cf81b9bb5e59b7d92f3a82070f55aaadbd4ac8d42a350d4d28dac14b2d66b18bbb03a241e046fe42063edfd15d2ca72ef8bd11750f863', 'complainant_email': 'c30d04070302bbc8de0dd039195066d23d01f760cfe4256697ec553caaf598ef0d50de30cef4100e09c90c234ac75c6d49df3bea4d774671ac30779362c7a7bb80a2df1012e82f44256db00d4192', 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_municipality': 'Not provided', 'complainant_village': 'Not provided', 'complainant_address': 'c30d04070302d399b5345b141cde62d23d01a028676bbb765e1dcf78fdb12f55c55a23a93bf8fdf9ae9942019983424901ba994922465ae21870b3c62ce5ee7f1ddc12f6f73d66089b4e1f32a895', 'complainant_email_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'complainant_phone_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'complainant_full_name_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f'}
2025-09-18 14:09:57,726 - db_manager - DEBUG - encrypted_data at update_complainant: {'complainant_full_name': 'c30d04070302f66daa8e27032ee265d23d011178fdb7335fae8d925ef8a6845b76ccaaa7fd957ea3210a3d2dfc77cb3ba8a5416499374c55644fd1377c766f770122df37cdd1950fb76b700353d6', 'complainant_phone': 'c30d040703027510cf8ebb6d9bbf79d23d011e8767e2613cf81b9bb5e59b7d92f3a82070f55aaadbd4ac8d42a350d4d28dac14b2d66b18bbb03a241e046fe42063edfd15d2ca72ef8bd11750f863', 'complainant_email': 'c30d04070302bbc8de0dd039195066d23d01f760cfe4256697ec553caaf598ef0d50de30cef4100e09c90c234ac75c6d49df3bea4d774671ac30779362c7a7bb80a2df1012e82f44256db00d4192', 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_municipality': 'Not provided', 'complainant_village': 'Not provided', 'complainant_address': 'c30d04070302d399b5345b141cde62d23d01a028676bbb765e1dcf78fdb12f55c55a23a93bf8fdf9ae9942019983424901ba994922465ae21870b3c62ce5ee7f1ddc12f6f73d66089b4e1f32a895', 'complainant_email_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'complainant_phone_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'complainant_full_name_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f'}
2025-09-18 14:09:57,726 - db_manager - DEBUG - execute_update values: ('c30d04070302f66daa8e27032ee265d23d011178fdb7335fae8d925ef8a6845b76ccaaa7fd957ea3210a3d2dfc77cb3ba8a5416499374c55644fd1377c766f770122df37cdd1950fb76b700353d6', 'c30d040703027510cf8ebb6d9bbf79d23d011e8767e2613cf81b9bb5e59b7d92f3a82070f55aaadbd4ac8d42a350d4d28dac14b2d66b18bbb03a241e046fe42063edfd15d2ca72ef8bd11750f863', 'c30d04070302bbc8de0dd039195066d23d01f760cfe4256697ec553caaf598ef0d50de30cef4100e09c90c234ac75c6d49df3bea4d774671ac30779362c7a7bb80a2df1012e82f44256db00d4192', 'Koshi', 'Jhapa', 'Not provided', 'Not provided', 'c30d04070302d399b5345b141cde62d23d01a028676bbb765e1dcf78fdb12f55c55a23a93bf8fdf9ae9942019983424901ba994922465ae21870b3c62ce5ee7f1ddc12f6f73d66089b4e1f32a895', 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'CM-20250918-KOJH-36FD-B')
2025-09-18 14:09:57,726 - db_manager - DEBUG - execute_update query: UPDATE complainants SET complainant_full_name = %s, complainant_phone = %s, complainant_email = %s, complainant_province = %s, complainant_district = %s, complainant_municipality = %s, complainant_village = %s, complainant_address = %s, complainant_email_hash = %s, complainant_phone_hash = %s, complainant_full_name_hash = %s WHERE complainant_id = %s
2025-09-18 14:09:57,726 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 14:09:57,731 - db_manager - INFO - Starting database transaction
2025-09-18 14:09:57,731 - db_manager - INFO - execute_update: Executing update query: UPDATE complainants SET complainant_full_name = %s, complainant_phone = %s, complainant_email = %s, ...
2025-09-18 14:09:57,732 - db_manager - INFO - execute_update: Update completed in 0.01s. Affected rows: 1
2025-09-18 14:09:57,735 - db_manager - INFO - Transaction committed successfully
2025-09-18 14:09:57,735 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 14:09:57,735 - db_manager - INFO - Complainant updated in db: CM-20250918-KOJH-36FD-B
2025-09-18 14:09:57,735 - db_manager - INFO - update_grievance: Updating grievance with ID: GR-20250918-KOJH-D7FC-B
2025-09-18 14:09:57,735 - db_manager - DEBUG - execute_update values: ('["N/A"]', 'N/A', 'dust everywhere', 'GR-20250918-KOJH-D7FC-B')
2025-09-18 14:09:57,735 - db_manager - DEBUG - execute_update query: 
                    UPDATE grievances 
                    SET grievance_categories = %s, grievance_summary = %s, grievance_description = %s, grievance_modification_date = CURRENT_TIMESTAMP
                    WHERE grievance_id = %s
                    RETURNING grievance_id
                
2025-09-18 14:09:57,735 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 14:09:57,740 - db_manager - INFO - Starting database transaction
2025-09-18 14:09:57,740 - db_manager - INFO - execute_update: Executing update query: 
                    UPDATE grievances 
                    SET grievance_categories = %s, grievance...
2025-09-18 14:09:57,741 - db_manager - INFO - execute_update: Update completed in 0.01s. Affected rows: 1
2025-09-18 14:09:57,742 - db_manager - INFO - Transaction committed successfully
2025-09-18 14:09:57,742 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 14:09:57,742 - db_manager - INFO - update_grievance: Updated grievance with ID: GR-20250918-KOJH-D7FC-B, rows affected: 1
2025-09-18 14:09:57,742 - db_manager - INFO - Grievance updated in db: GR-20250918-KOJH-D7FC-B
2025-09-18 14:10:44,609 - db_manager - INFO - create_complainant: Creating complainant with ID: CM-20250918-KOJH-66FB-B
2025-09-18 14:10:44,609 - db_manager - DEBUG - encrypted and hashed data at encrypt_and_hash_sensitive_data: {'complainant_id': 'CM-20250918-KOJH-66FB-B', 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_unique_id': 'CM-20250918-KOJH-66FB-B'}
2025-09-18 14:10:44,609 - db_manager - DEBUG - query_keys at generate_query_string: dict_keys(['complainant_id', 'complainant_province', 'complainant_district', 'complainant_unique_id'])
2025-09-18 14:10:44,609 - db_manager - DEBUG - Generated query: INSERT INTO complainants (complainant_id, complainant_province, complainant_district, complainant_unique_id) VALUES (%s, %s, %s, %s)
2025-09-18 14:10:44,609 - db_manager - DEBUG - len of query_keys: 4
2025-09-18 14:10:44,609 - db_manager - DEBUG - Generated query: INSERT INTO complainants (complainant_id, complainant_province, complainant_district, complainant_unique_id) VALUES (%s, %s, %s, %s)
2025-09-18 14:10:44,609 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 14:10:44,614 - db_manager - INFO - Starting database transaction
2025-09-18 14:10:44,617 - db_manager - INFO - Transaction committed successfully
2025-09-18 14:10:44,617 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 14:10:44,617 - db_manager - INFO - create_complainant: Successfully created complainant with ID: CM-20250918-KOJH-66FB-B
2025-09-18 14:10:44,617 - db_manager - INFO - create_grievance: Creating grievance with data: {'grievance_id': 'GR-20250918-KOJH-D10C-B', 'complainant_id': 'CM-20250918-KOJH-66FB-B', 'grievance_description': 'dust everywhere in my house\nmy kids are coughing hard', 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_office': None, 'source': 'bot', 'complainant_unique_id': 'CM-20250918-KOJH-66FB-B'}
2025-09-18 14:10:44,617 - db_manager - INFO - create_grievance: Creating grievance with ID: GR-20250918-KOJH-D10C-B
2025-09-18 14:10:44,617 - db_manager - INFO - create_grievance: Creating grievance with allowed fields: ['grievance_id', 'complainant_id', 'grievance_categories', 'grievance_categories_alternative', 'follow_up_question', 'grievance_summary', 'grievance_description', 'grievance_claimed_amount', 'grievance_location', 'is_temporary', 'source', 'language_code', 'grievance_classification_status']
2025-09-18 14:10:44,617 - db_manager - DEBUG - query_keys at generate_query_string: dict_keys(['grievance_id', 'complainant_id', 'grievance_description', 'source'])
2025-09-18 14:10:44,617 - db_manager - DEBUG - Generated query: INSERT INTO grievances (grievance_id, complainant_id, grievance_description, source) VALUES (%s, %s, %s, %s) RETURNING grievance_id
2025-09-18 14:10:44,617 - db_manager - DEBUG - len of query_keys: 4
2025-09-18 14:10:44,617 - db_manager - DEBUG - Generated query: INSERT INTO grievances (grievance_id, complainant_id, grievance_description, source) VALUES (%s, %s, %s, %s) RETURNING grievance_id
2025-09-18 14:10:44,617 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 14:10:44,623 - db_manager - INFO - Starting database transaction
2025-09-18 14:10:44,626 - db_manager - INFO - Transaction committed successfully
2025-09-18 14:10:44,626 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 14:10:44,626 - db_manager - INFO - create_grievance: Successfully created grievance with ID: GR-20250918-KOJH-D10C-B
2025-09-18 14:10:48,474 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 14:10:48,479 - db_manager - INFO - Starting database transaction
2025-09-18 14:10:48,479 - db_manager - INFO - Executing get_complainant_by_id: 
            SELECT complainant_id, complainant_unique_id, complainant_full_name,    complainant_pho...
2025-09-18 14:10:48,480 - db_manager - INFO - get_complainant_by_id completed in 0.01s. Rows: 1
2025-09-18 14:10:48,481 - db_manager - INFO - Transaction committed successfully
2025-09-18 14:10:48,481 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 14:10:48,481 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 14:10:48,485 - db_manager - INFO - Starting database transaction
2025-09-18 14:10:48,485 - db_manager - INFO - Executing get_grievance_by_id: 
                SELECT g.*, c.complainant_full_name, c.complainant_phone, c.complainant_email,
    ...
2025-09-18 14:10:48,487 - db_manager - INFO - get_grievance_by_id completed in 0.01s. Rows: 1
2025-09-18 14:10:48,487 - db_manager - INFO - Transaction committed successfully
2025-09-18 14:10:48,487 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 14:10:48,487 - db_manager - DEBUG - get_grievance_by_id: grievance_id: {'grievance_id': 'GR-20250918-KOJH-D10C-B', 'complainant_id': 'CM-20250918-KOJH-66FB-B', 'grievance_categories': None, 'grievance_categories_alternative': None, 'follow_up_question': None, 'grievance_summary': None, 'grievance_description': 'dust everywhere in my house\nmy kids are coughing hard', 'grievance_claimed_amount': None, 'grievance_location': None, 'language_code': 'ne', 'grievance_classification_status': 'pending', 'grievance_creation_date': datetime.datetime(2025, 9, 18, 14, 10, 44, 623261, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'grievance_modification_date': datetime.datetime(2025, 9, 18, 14, 10, 44, 623261, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'is_temporary': True, 'source': 'bot', 'complainant_full_name': None, 'complainant_phone': None, 'complainant_email': None, 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_municipality': None, 'complainant_ward': None, 'complainant_village': None, 'complainant_address': None}, results: [{'grievance_id': 'GR-20250918-KOJH-D10C-B', 'complainant_id': 'CM-20250918-KOJH-66FB-B', 'grievance_categories': None, 'grievance_categories_alternative': None, 'follow_up_question': None, 'grievance_summary': None, 'grievance_description': 'dust everywhere in my house\nmy kids are coughing hard', 'grievance_claimed_amount': None, 'grievance_location': None, 'language_code': 'ne', 'grievance_classification_status': 'pending', 'grievance_creation_date': datetime.datetime(2025, 9, 18, 14, 10, 44, 623261, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'grievance_modification_date': datetime.datetime(2025, 9, 18, 14, 10, 44, 623261, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'is_temporary': True, 'source': 'bot', 'complainant_full_name': None, 'complainant_phone': None, 'complainant_email': None, 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_municipality': None, 'complainant_ward': None, 'complainant_village': None, 'complainant_address': None}]
2025-09-18 14:10:48,487 - db_manager - INFO - update_complainant: Updating complainant with ID: CM-20250918-KOJH-66FB-B
2025-09-18 14:10:48,487 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 14:10:48,491 - db_manager - INFO - Starting database transaction
2025-09-18 14:10:48,491 - db_manager - INFO - Executing encrypt_field: SELECT encode(pgp_sym_encrypt(%s, %s), 'hex') AS encrypted...
2025-09-18 14:10:48,492 - db_manager - INFO - encrypt_field completed in 0.00s. Rows: 1
2025-09-18 14:10:48,492 - db_manager - INFO - Transaction committed successfully
2025-09-18 14:10:48,493 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 14:10:48,493 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 14:10:48,497 - db_manager - INFO - Starting database transaction
2025-09-18 14:10:48,497 - db_manager - INFO - Executing encrypt_field: SELECT encode(pgp_sym_encrypt(%s, %s), 'hex') AS encrypted...
2025-09-18 14:10:48,498 - db_manager - INFO - encrypt_field completed in 0.01s. Rows: 1
2025-09-18 14:10:48,498 - db_manager - INFO - Transaction committed successfully
2025-09-18 14:10:48,498 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 14:10:48,499 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 14:10:48,503 - db_manager - INFO - Starting database transaction
2025-09-18 14:10:48,503 - db_manager - INFO - Executing encrypt_field: SELECT encode(pgp_sym_encrypt(%s, %s), 'hex') AS encrypted...
2025-09-18 14:10:48,504 - db_manager - INFO - encrypt_field completed in 0.01s. Rows: 1
2025-09-18 14:10:48,504 - db_manager - INFO - Transaction committed successfully
2025-09-18 14:10:48,504 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 14:10:48,504 - db_manager - DEBUG - encrypted phone number Not provided at encrypt_complainant_data: c30d0407030256c6cb4e11a594997ed23d01dc65ba23ea153182e08fc20a30b47f44908670461d669b03fbb2fd483af9e67a78aa6f9d8c2b2d447aab4c374b491a4dd2ea2b8025026792e37f58c2
2025-09-18 14:10:48,504 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 14:10:48,509 - db_manager - INFO - Starting database transaction
2025-09-18 14:10:48,509 - db_manager - INFO - Executing encrypt_field: SELECT encode(pgp_sym_encrypt(%s, %s), 'hex') AS encrypted...
2025-09-18 14:10:48,510 - db_manager - INFO - encrypt_field completed in 0.01s. Rows: 1
2025-09-18 14:10:48,510 - db_manager - INFO - Transaction committed successfully
2025-09-18 14:10:48,510 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 14:10:48,510 - db_manager - DEBUG - phone number Not provided hashed to d83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f at hash_sensitive_data
2025-09-18 14:10:48,511 - db_manager - DEBUG - encrypted and hashed data at encrypt_and_hash_sensitive_data: {'complainant_full_name': 'c30d04070302ce10f58f602132487cd23d0109408501e02bb91e45450d5ad1a6689e453919a53c027b00a529ae98ba590a97ef989838cf1695e9c5062bfef3125e255f977347d96cbc3a8987a7b1', 'complainant_phone': 'c30d0407030256c6cb4e11a594997ed23d01dc65ba23ea153182e08fc20a30b47f44908670461d669b03fbb2fd483af9e67a78aa6f9d8c2b2d447aab4c374b491a4dd2ea2b8025026792e37f58c2', 'complainant_email': 'c30d0407030283ba60b010cb4a3d7ed23d01b998156a480377afa1ee4758b6006364c5801285f204a5f01502c95dc1ca9abb32d3c981a9f8b8ac2d41fa2a82d4e9e686d15d0841da0f0360743060', 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_municipality': 'Not provided', 'complainant_village': 'Not provided', 'complainant_address': 'c30d040703020d04fca71dedd3c066d23d01ca130387029bf26ef2841d0efb81dd2ffc5eb689e5dbaea0194d2d06e2dcc4dcd42672eb96b5ebb47ea8c44bee844037289ce7ac86d16bc8504f2e80', 'complainant_email_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'complainant_phone_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'complainant_full_name_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f'}
2025-09-18 14:10:48,511 - db_manager - DEBUG - encrypted_data at update_complainant: {'complainant_full_name': 'c30d04070302ce10f58f602132487cd23d0109408501e02bb91e45450d5ad1a6689e453919a53c027b00a529ae98ba590a97ef989838cf1695e9c5062bfef3125e255f977347d96cbc3a8987a7b1', 'complainant_phone': 'c30d0407030256c6cb4e11a594997ed23d01dc65ba23ea153182e08fc20a30b47f44908670461d669b03fbb2fd483af9e67a78aa6f9d8c2b2d447aab4c374b491a4dd2ea2b8025026792e37f58c2', 'complainant_email': 'c30d0407030283ba60b010cb4a3d7ed23d01b998156a480377afa1ee4758b6006364c5801285f204a5f01502c95dc1ca9abb32d3c981a9f8b8ac2d41fa2a82d4e9e686d15d0841da0f0360743060', 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_municipality': 'Not provided', 'complainant_village': 'Not provided', 'complainant_address': 'c30d040703020d04fca71dedd3c066d23d01ca130387029bf26ef2841d0efb81dd2ffc5eb689e5dbaea0194d2d06e2dcc4dcd42672eb96b5ebb47ea8c44bee844037289ce7ac86d16bc8504f2e80', 'complainant_email_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'complainant_phone_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'complainant_full_name_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f'}
2025-09-18 14:10:48,511 - db_manager - DEBUG - execute_update values: ('c30d04070302ce10f58f602132487cd23d0109408501e02bb91e45450d5ad1a6689e453919a53c027b00a529ae98ba590a97ef989838cf1695e9c5062bfef3125e255f977347d96cbc3a8987a7b1', 'c30d0407030256c6cb4e11a594997ed23d01dc65ba23ea153182e08fc20a30b47f44908670461d669b03fbb2fd483af9e67a78aa6f9d8c2b2d447aab4c374b491a4dd2ea2b8025026792e37f58c2', 'c30d0407030283ba60b010cb4a3d7ed23d01b998156a480377afa1ee4758b6006364c5801285f204a5f01502c95dc1ca9abb32d3c981a9f8b8ac2d41fa2a82d4e9e686d15d0841da0f0360743060', 'Koshi', 'Jhapa', 'Not provided', 'Not provided', 'c30d040703020d04fca71dedd3c066d23d01ca130387029bf26ef2841d0efb81dd2ffc5eb689e5dbaea0194d2d06e2dcc4dcd42672eb96b5ebb47ea8c44bee844037289ce7ac86d16bc8504f2e80', 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'CM-20250918-KOJH-66FB-B')
2025-09-18 14:10:48,511 - db_manager - DEBUG - execute_update query: UPDATE complainants SET complainant_full_name = %s, complainant_phone = %s, complainant_email = %s, complainant_province = %s, complainant_district = %s, complainant_municipality = %s, complainant_village = %s, complainant_address = %s, complainant_email_hash = %s, complainant_phone_hash = %s, complainant_full_name_hash = %s WHERE complainant_id = %s
2025-09-18 14:10:48,511 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 14:10:48,515 - db_manager - INFO - Starting database transaction
2025-09-18 14:10:48,515 - db_manager - INFO - execute_update: Executing update query: UPDATE complainants SET complainant_full_name = %s, complainant_phone = %s, complainant_email = %s, ...
2025-09-18 14:10:48,516 - db_manager - INFO - execute_update: Update completed in 0.01s. Affected rows: 1
2025-09-18 14:10:48,519 - db_manager - INFO - Transaction committed successfully
2025-09-18 14:10:48,519 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 14:10:48,519 - db_manager - INFO - Complainant updated in db: CM-20250918-KOJH-66FB-B
2025-09-18 14:10:48,519 - db_manager - INFO - update_grievance: Updating grievance with ID: GR-20250918-KOJH-D10C-B
2025-09-18 14:10:48,519 - db_manager - DEBUG - execute_update values: ('dust everywhere in my house\nmy kids are coughing hard', 'GR-20250918-KOJH-D10C-B')
2025-09-18 14:10:48,519 - db_manager - DEBUG - execute_update query: 
                    UPDATE grievances 
                    SET grievance_description = %s, grievance_modification_date = CURRENT_TIMESTAMP
                    WHERE grievance_id = %s
                    RETURNING grievance_id
                
2025-09-18 14:10:48,519 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 14:10:48,524 - db_manager - INFO - Starting database transaction
2025-09-18 14:10:48,524 - db_manager - INFO - execute_update: Executing update query: 
                    UPDATE grievances 
                    SET grievance_description = %s, grievanc...
2025-09-18 14:10:48,525 - db_manager - INFO - execute_update: Update completed in 0.01s. Affected rows: 1
2025-09-18 14:10:48,527 - db_manager - INFO - Transaction committed successfully
2025-09-18 14:10:48,527 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 14:10:48,528 - db_manager - INFO - update_grievance: Updated grievance with ID: GR-20250918-KOJH-D10C-B, rows affected: 1
2025-09-18 14:10:48,528 - db_manager - INFO - Grievance updated in db: GR-20250918-KOJH-D10C-B
2025-09-18 14:10:48,528 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 14:10:48,533 - db_manager - INFO - Starting database transaction
2025-09-18 14:10:48,533 - db_manager - INFO - Executing get_grievance_files: 
            SELECT file_id, file_name, file_type, file_size, upload_timestamp
            FROM file...
2025-09-18 14:10:48,534 - db_manager - INFO - get_grievance_files completed in 0.01s. Rows: 0
2025-09-18 14:10:48,534 - db_manager - INFO - Transaction committed successfully
2025-09-18 14:10:48,534 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 14:10:48,535 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 14:10:48,539 - db_manager - INFO - Starting database transaction
2025-09-18 14:10:48,539 - db_manager - INFO - Executing get_grievance_files: 
            SELECT file_id, file_name, file_type, file_size, upload_timestamp
            FROM file...
2025-09-18 14:10:48,540 - db_manager - INFO - get_grievance_files completed in 0.01s. Rows: 0
2025-09-18 14:10:48,540 - db_manager - INFO - Transaction committed successfully
2025-09-18 14:10:48,541 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 14:10:48,585 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 14:10:48,591 - db_manager - INFO - Starting database transaction
2025-09-18 14:10:48,591 - db_manager - INFO - Executing get_grievance_by_id: 
                SELECT g.*, c.complainant_full_name, c.complainant_phone, c.complainant_email,
    ...
2025-09-18 14:10:48,593 - db_manager - INFO - get_grievance_by_id completed in 0.01s. Rows: 1
2025-09-18 14:10:48,593 - db_manager - INFO - Transaction committed successfully
2025-09-18 14:10:48,593 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 14:10:48,594 - db_manager - DEBUG - get_grievance_by_id: grievance_id: {'grievance_id': 'GR-20250918-KOJH-D10C-B', 'complainant_id': 'CM-20250918-KOJH-66FB-B', 'grievance_categories': None, 'grievance_categories_alternative': None, 'follow_up_question': None, 'grievance_summary': None, 'grievance_description': 'dust everywhere in my house\nmy kids are coughing hard', 'grievance_claimed_amount': None, 'grievance_location': None, 'language_code': 'ne', 'grievance_classification_status': 'pending', 'grievance_creation_date': datetime.datetime(2025, 9, 18, 14, 10, 44, 623261, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'grievance_modification_date': datetime.datetime(2025, 9, 18, 14, 10, 48, 524608, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'is_temporary': True, 'source': 'bot', 'complainant_full_name': 'c30d04070302ce10f58f602132487cd23d0109408501e02bb91e45450d5ad1a6689e453919a53c027b00a529ae98ba590a97ef989838cf1695e9c5062bfef3125e255f977347d96cbc3a8987a7b1', 'complainant_phone': 'c30d0407030256c6cb4e11a594997ed23d01dc65ba23ea153182e08fc20a30b47f44908670461d669b03fbb2fd483af9e67a78aa6f9d8c2b2d447aab4c374b491a4dd2ea2b8025026792e37f58c2', 'complainant_email': 'c30d0407030283ba60b010cb4a3d7ed23d01b998156a480377afa1ee4758b6006364c5801285f204a5f01502c95dc1ca9abb32d3c981a9f8b8ac2d41fa2a82d4e9e686d15d0841da0f0360743060', 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_municipality': 'Not provided', 'complainant_ward': None, 'complainant_village': 'Not provided', 'complainant_address': 'c30d040703020d04fca71dedd3c066d23d01ca130387029bf26ef2841d0efb81dd2ffc5eb689e5dbaea0194d2d06e2dcc4dcd42672eb96b5ebb47ea8c44bee844037289ce7ac86d16bc8504f2e80'}, results: [{'grievance_id': 'GR-20250918-KOJH-D10C-B', 'complainant_id': 'CM-20250918-KOJH-66FB-B', 'grievance_categories': None, 'grievance_categories_alternative': None, 'follow_up_question': None, 'grievance_summary': None, 'grievance_description': 'dust everywhere in my house\nmy kids are coughing hard', 'grievance_claimed_amount': None, 'grievance_location': None, 'language_code': 'ne', 'grievance_classification_status': 'pending', 'grievance_creation_date': datetime.datetime(2025, 9, 18, 14, 10, 44, 623261, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'grievance_modification_date': datetime.datetime(2025, 9, 18, 14, 10, 48, 524608, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'is_temporary': True, 'source': 'bot', 'complainant_full_name': 'c30d04070302ce10f58f602132487cd23d0109408501e02bb91e45450d5ad1a6689e453919a53c027b00a529ae98ba590a97ef989838cf1695e9c5062bfef3125e255f977347d96cbc3a8987a7b1', 'complainant_phone': 'c30d0407030256c6cb4e11a594997ed23d01dc65ba23ea153182e08fc20a30b47f44908670461d669b03fbb2fd483af9e67a78aa6f9d8c2b2d447aab4c374b491a4dd2ea2b8025026792e37f58c2', 'complainant_email': 'c30d0407030283ba60b010cb4a3d7ed23d01b998156a480377afa1ee4758b6006364c5801285f204a5f01502c95dc1ca9abb32d3c981a9f8b8ac2d41fa2a82d4e9e686d15d0841da0f0360743060', 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_municipality': 'Not provided', 'complainant_ward': None, 'complainant_village': 'Not provided', 'complainant_address': 'c30d040703020d04fca71dedd3c066d23d01ca130387029bf26ef2841d0efb81dd2ffc5eb689e5dbaea0194d2d06e2dcc4dcd42672eb96b5ebb47ea8c44bee844037289ce7ac86d16bc8504f2e80'}]
2025-09-18 14:10:48,682 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 14:10:48,687 - db_manager - INFO - Starting database transaction
2025-09-18 14:10:48,687 - db_manager - INFO - Executing get_complainant_id_from_grievance_id: 
            SELECT complainant_id
            FROM grievances
            WHERE grievance_id = %s
 ...
2025-09-18 14:10:48,688 - db_manager - INFO - get_complainant_id_from_grievance_id completed in 0.01s. Rows: 1
2025-09-18 14:10:48,688 - db_manager - INFO - Transaction committed successfully
2025-09-18 14:10:48,688 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 14:10:48,688 - db_manager - INFO - update_complainant: Updating complainant with ID: CM-20250918-KOJH-66FB-B
2025-09-18 14:10:48,688 - db_manager - DEBUG - encrypted and hashed data at encrypt_and_hash_sensitive_data: {}
2025-09-18 14:10:48,688 - db_manager - DEBUG - encrypted_data at update_complainant: {}
2025-09-18 14:10:48,688 - db_manager - DEBUG - No complainant field to update
2025-09-18 14:10:48,688 - db_manager - INFO - Complainant updated in db: GR-20250918-KOJH-D10C-B
2025-09-18 14:10:48,688 - db_manager - INFO - update_grievance: Updating grievance with ID: GR-20250918-KOJH-D10C-B
2025-09-18 14:10:48,688 - db_manager - DEBUG - execute_update values: ('["N/A"]', 'N/A', 'GR-20250918-KOJH-D10C-B')
2025-09-18 14:10:48,688 - db_manager - DEBUG - execute_update query: 
                    UPDATE grievances 
                    SET grievance_categories = %s, grievance_summary = %s, grievance_modification_date = CURRENT_TIMESTAMP
                    WHERE grievance_id = %s
                    RETURNING grievance_id
                
2025-09-18 14:10:48,688 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 14:10:48,693 - db_manager - INFO - Starting database transaction
2025-09-18 14:10:48,693 - db_manager - INFO - execute_update: Executing update query: 
                    UPDATE grievances 
                    SET grievance_categories = %s, grievance...
2025-09-18 14:10:48,694 - db_manager - INFO - execute_update: Update completed in 0.01s. Affected rows: 1
2025-09-18 14:10:48,697 - db_manager - INFO - Transaction committed successfully
2025-09-18 14:10:48,697 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 14:10:48,697 - db_manager - INFO - update_grievance: Updated grievance with ID: GR-20250918-KOJH-D10C-B, rows affected: 1
2025-09-18 14:10:48,697 - db_manager - INFO - Grievance updated in db: GR-20250918-KOJH-D10C-B
2025-09-18 14:10:48,740 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 14:10:48,744 - db_manager - INFO - Starting database transaction
2025-09-18 14:10:48,745 - db_manager - INFO - Executing get_grievance_files: 
            SELECT file_id, file_name, file_type, file_size, upload_timestamp
            FROM file...
2025-09-18 14:10:48,746 - db_manager - INFO - get_grievance_files completed in 0.01s. Rows: 0
2025-09-18 14:10:48,746 - db_manager - INFO - Transaction committed successfully
2025-09-18 14:10:48,746 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 14:10:48,746 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 14:10:48,751 - db_manager - INFO - Starting database transaction
2025-09-18 14:10:48,751 - db_manager - INFO - Executing get_complainant_by_id: 
            SELECT complainant_id, complainant_unique_id, complainant_full_name,    complainant_pho...
2025-09-18 14:10:48,752 - db_manager - INFO - get_complainant_by_id completed in 0.01s. Rows: 1
2025-09-18 14:10:48,752 - db_manager - INFO - Transaction committed successfully
2025-09-18 14:10:48,753 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 14:10:48,753 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 14:10:48,757 - db_manager - INFO - Starting database transaction
2025-09-18 14:10:48,757 - db_manager - INFO - Executing decrypt_field: SELECT pgp_sym_decrypt(decode(%s, 'hex'), %s) AS decrypted...
2025-09-18 14:10:48,758 - db_manager - INFO - decrypt_field completed in 0.01s. Rows: 1
2025-09-18 14:10:48,758 - db_manager - INFO - Transaction committed successfully
2025-09-18 14:10:48,758 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 14:10:48,758 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 14:10:48,763 - db_manager - INFO - Starting database transaction
2025-09-18 14:10:48,763 - db_manager - INFO - Executing decrypt_field: SELECT pgp_sym_decrypt(decode(%s, 'hex'), %s) AS decrypted...
2025-09-18 14:10:48,764 - db_manager - INFO - decrypt_field completed in 0.01s. Rows: 1
2025-09-18 14:10:48,764 - db_manager - INFO - Transaction committed successfully
2025-09-18 14:10:48,764 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 14:10:48,764 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 14:10:48,769 - db_manager - INFO - Starting database transaction
2025-09-18 14:10:48,769 - db_manager - INFO - Executing decrypt_field: SELECT pgp_sym_decrypt(decode(%s, 'hex'), %s) AS decrypted...
2025-09-18 14:10:48,770 - db_manager - INFO - decrypt_field completed in 0.01s. Rows: 1
2025-09-18 14:10:48,770 - db_manager - INFO - Transaction committed successfully
2025-09-18 14:10:48,770 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 14:10:48,770 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 14:10:48,775 - db_manager - INFO - Starting database transaction
2025-09-18 14:10:48,775 - db_manager - INFO - Executing decrypt_field: SELECT pgp_sym_decrypt(decode(%s, 'hex'), %s) AS decrypted...
2025-09-18 14:10:48,776 - db_manager - INFO - decrypt_field completed in 0.01s. Rows: 1
2025-09-18 14:10:48,776 - db_manager - INFO - Transaction committed successfully
2025-09-18 14:10:48,776 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 14:10:48,776 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 14:10:48,781 - db_manager - INFO - Starting database transaction
2025-09-18 14:10:48,781 - db_manager - INFO - Executing get_grievance_by_id: 
                SELECT g.*, c.complainant_full_name, c.complainant_phone, c.complainant_email,
    ...
2025-09-18 14:10:48,783 - db_manager - INFO - get_grievance_by_id completed in 0.01s. Rows: 1
2025-09-18 14:10:48,783 - db_manager - INFO - Transaction committed successfully
2025-09-18 14:10:48,783 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 14:10:48,784 - db_manager - DEBUG - get_grievance_by_id: grievance_id: {'grievance_id': 'GR-20250918-KOJH-D10C-B', 'complainant_id': 'CM-20250918-KOJH-66FB-B', 'grievance_categories': ['N/A'], 'grievance_categories_alternative': None, 'follow_up_question': None, 'grievance_summary': 'N/A', 'grievance_description': 'dust everywhere in my house\nmy kids are coughing hard', 'grievance_claimed_amount': None, 'grievance_location': None, 'language_code': 'ne', 'grievance_classification_status': 'pending', 'grievance_creation_date': datetime.datetime(2025, 9, 18, 14, 10, 44, 623261, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'grievance_modification_date': datetime.datetime(2025, 9, 18, 14, 10, 48, 693944, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'is_temporary': True, 'source': 'bot', 'complainant_full_name': 'c30d04070302ce10f58f602132487cd23d0109408501e02bb91e45450d5ad1a6689e453919a53c027b00a529ae98ba590a97ef989838cf1695e9c5062bfef3125e255f977347d96cbc3a8987a7b1', 'complainant_phone': 'c30d0407030256c6cb4e11a594997ed23d01dc65ba23ea153182e08fc20a30b47f44908670461d669b03fbb2fd483af9e67a78aa6f9d8c2b2d447aab4c374b491a4dd2ea2b8025026792e37f58c2', 'complainant_email': 'c30d0407030283ba60b010cb4a3d7ed23d01b998156a480377afa1ee4758b6006364c5801285f204a5f01502c95dc1ca9abb32d3c981a9f8b8ac2d41fa2a82d4e9e686d15d0841da0f0360743060', 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_municipality': 'Not provided', 'complainant_ward': None, 'complainant_village': 'Not provided', 'complainant_address': 'c30d040703020d04fca71dedd3c066d23d01ca130387029bf26ef2841d0efb81dd2ffc5eb689e5dbaea0194d2d06e2dcc4dcd42672eb96b5ebb47ea8c44bee844037289ce7ac86d16bc8504f2e80'}, results: [{'grievance_id': 'GR-20250918-KOJH-D10C-B', 'complainant_id': 'CM-20250918-KOJH-66FB-B', 'grievance_categories': '["N/A"]', 'grievance_categories_alternative': None, 'follow_up_question': None, 'grievance_summary': 'N/A', 'grievance_description': 'dust everywhere in my house\nmy kids are coughing hard', 'grievance_claimed_amount': None, 'grievance_location': None, 'language_code': 'ne', 'grievance_classification_status': 'pending', 'grievance_creation_date': datetime.datetime(2025, 9, 18, 14, 10, 44, 623261, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'grievance_modification_date': datetime.datetime(2025, 9, 18, 14, 10, 48, 693944, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'is_temporary': True, 'source': 'bot', 'complainant_full_name': 'c30d04070302ce10f58f602132487cd23d0109408501e02bb91e45450d5ad1a6689e453919a53c027b00a529ae98ba590a97ef989838cf1695e9c5062bfef3125e255f977347d96cbc3a8987a7b1', 'complainant_phone': 'c30d0407030256c6cb4e11a594997ed23d01dc65ba23ea153182e08fc20a30b47f44908670461d669b03fbb2fd483af9e67a78aa6f9d8c2b2d447aab4c374b491a4dd2ea2b8025026792e37f58c2', 'complainant_email': 'c30d0407030283ba60b010cb4a3d7ed23d01b998156a480377afa1ee4758b6006364c5801285f204a5f01502c95dc1ca9abb32d3c981a9f8b8ac2d41fa2a82d4e9e686d15d0841da0f0360743060', 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_municipality': 'Not provided', 'complainant_ward': None, 'complainant_village': 'Not provided', 'complainant_address': 'c30d040703020d04fca71dedd3c066d23d01ca130387029bf26ef2841d0efb81dd2ffc5eb689e5dbaea0194d2d06e2dcc4dcd42672eb96b5ebb47ea8c44bee844037289ce7ac86d16bc8504f2e80'}]
2025-09-18 14:10:48,784 - db_manager - INFO - update_complainant: Updating complainant with ID: CM-20250918-KOJH-66FB-B
2025-09-18 14:10:48,784 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 14:10:48,790 - db_manager - INFO - Starting database transaction
2025-09-18 14:10:48,790 - db_manager - INFO - Executing encrypt_field: SELECT encode(pgp_sym_encrypt(%s, %s), 'hex') AS encrypted...
2025-09-18 14:10:48,791 - db_manager - INFO - encrypt_field completed in 0.01s. Rows: 1
2025-09-18 14:10:48,791 - db_manager - INFO - Transaction committed successfully
2025-09-18 14:10:48,791 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 14:10:48,791 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 14:10:48,797 - db_manager - INFO - Starting database transaction
2025-09-18 14:10:48,797 - db_manager - INFO - Executing encrypt_field: SELECT encode(pgp_sym_encrypt(%s, %s), 'hex') AS encrypted...
2025-09-18 14:10:48,798 - db_manager - INFO - encrypt_field completed in 0.01s. Rows: 1
2025-09-18 14:10:48,799 - db_manager - INFO - Transaction committed successfully
2025-09-18 14:10:48,799 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 14:10:48,799 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 14:10:48,804 - db_manager - INFO - Starting database transaction
2025-09-18 14:10:48,804 - db_manager - INFO - Executing encrypt_field: SELECT encode(pgp_sym_encrypt(%s, %s), 'hex') AS encrypted...
2025-09-18 14:10:48,805 - db_manager - INFO - encrypt_field completed in 0.01s. Rows: 1
2025-09-18 14:10:48,805 - db_manager - INFO - Transaction committed successfully
2025-09-18 14:10:48,805 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 14:10:48,805 - db_manager - DEBUG - encrypted phone number Not provided at encrypt_complainant_data: c30d04070302ead0998e84272c0860d23d01f42e9a960daad7c8d0703cc236a8dc72ec83152bdcab041be966d7961a8d570d026f72160811aca7a657fb767c58ee6baf20e5a16a854f425eeffa23
2025-09-18 14:10:48,805 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 14:10:48,810 - db_manager - INFO - Starting database transaction
2025-09-18 14:10:48,810 - db_manager - INFO - Executing encrypt_field: SELECT encode(pgp_sym_encrypt(%s, %s), 'hex') AS encrypted...
2025-09-18 14:10:48,811 - db_manager - INFO - encrypt_field completed in 0.01s. Rows: 1
2025-09-18 14:10:48,811 - db_manager - INFO - Transaction committed successfully
2025-09-18 14:10:48,811 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 14:10:48,811 - db_manager - DEBUG - phone number Not provided hashed to d83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f at hash_sensitive_data
2025-09-18 14:10:48,811 - db_manager - DEBUG - encrypted and hashed data at encrypt_and_hash_sensitive_data: {'complainant_full_name': 'c30d0407030249e6e94945b5158a6ad23d01100abe2633d9e4c67f7ddc91e292329acf70e8e7511987e0c8d6a4240a1394c2155909524a0d308bc8a4549c40a6c7e34d708505432b3891c0d98670', 'complainant_phone': 'c30d04070302ead0998e84272c0860d23d01f42e9a960daad7c8d0703cc236a8dc72ec83152bdcab041be966d7961a8d570d026f72160811aca7a657fb767c58ee6baf20e5a16a854f425eeffa23', 'complainant_email': 'c30d04070302409ced74b6fe76ce72d23d01231824096606a362526e930ca505e823945d163b9096df3b48c1465bb4f566329ba680b632aae312fe84e8962e31f722be15e054027b7e9818898d2a', 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_municipality': 'Not provided', 'complainant_village': 'Not provided', 'complainant_address': 'c30d040703021b79a3ca54a794a764d23d01b89037000a97be146f2b986d7fdfb47f00f697e82c64b1d6349d5ce6f7f6bc56a77ad4fd01acc06e5dbcbbec48f9059159c8f5576004db3657d5a0f1', 'complainant_email_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'complainant_phone_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'complainant_full_name_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f'}
2025-09-18 14:10:48,811 - db_manager - DEBUG - encrypted_data at update_complainant: {'complainant_full_name': 'c30d0407030249e6e94945b5158a6ad23d01100abe2633d9e4c67f7ddc91e292329acf70e8e7511987e0c8d6a4240a1394c2155909524a0d308bc8a4549c40a6c7e34d708505432b3891c0d98670', 'complainant_phone': 'c30d04070302ead0998e84272c0860d23d01f42e9a960daad7c8d0703cc236a8dc72ec83152bdcab041be966d7961a8d570d026f72160811aca7a657fb767c58ee6baf20e5a16a854f425eeffa23', 'complainant_email': 'c30d04070302409ced74b6fe76ce72d23d01231824096606a362526e930ca505e823945d163b9096df3b48c1465bb4f566329ba680b632aae312fe84e8962e31f722be15e054027b7e9818898d2a', 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_municipality': 'Not provided', 'complainant_village': 'Not provided', 'complainant_address': 'c30d040703021b79a3ca54a794a764d23d01b89037000a97be146f2b986d7fdfb47f00f697e82c64b1d6349d5ce6f7f6bc56a77ad4fd01acc06e5dbcbbec48f9059159c8f5576004db3657d5a0f1', 'complainant_email_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'complainant_phone_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'complainant_full_name_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f'}
2025-09-18 14:10:48,812 - db_manager - DEBUG - execute_update values: ('c30d0407030249e6e94945b5158a6ad23d01100abe2633d9e4c67f7ddc91e292329acf70e8e7511987e0c8d6a4240a1394c2155909524a0d308bc8a4549c40a6c7e34d708505432b3891c0d98670', 'c30d04070302ead0998e84272c0860d23d01f42e9a960daad7c8d0703cc236a8dc72ec83152bdcab041be966d7961a8d570d026f72160811aca7a657fb767c58ee6baf20e5a16a854f425eeffa23', 'c30d04070302409ced74b6fe76ce72d23d01231824096606a362526e930ca505e823945d163b9096df3b48c1465bb4f566329ba680b632aae312fe84e8962e31f722be15e054027b7e9818898d2a', 'Koshi', 'Jhapa', 'Not provided', 'Not provided', 'c30d040703021b79a3ca54a794a764d23d01b89037000a97be146f2b986d7fdfb47f00f697e82c64b1d6349d5ce6f7f6bc56a77ad4fd01acc06e5dbcbbec48f9059159c8f5576004db3657d5a0f1', 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'CM-20250918-KOJH-66FB-B')
2025-09-18 14:10:48,812 - db_manager - DEBUG - execute_update query: UPDATE complainants SET complainant_full_name = %s, complainant_phone = %s, complainant_email = %s, complainant_province = %s, complainant_district = %s, complainant_municipality = %s, complainant_village = %s, complainant_address = %s, complainant_email_hash = %s, complainant_phone_hash = %s, complainant_full_name_hash = %s WHERE complainant_id = %s
2025-09-18 14:10:48,812 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 14:10:48,818 - db_manager - INFO - Starting database transaction
2025-09-18 14:10:48,818 - db_manager - INFO - execute_update: Executing update query: UPDATE complainants SET complainant_full_name = %s, complainant_phone = %s, complainant_email = %s, ...
2025-09-18 14:10:48,819 - db_manager - INFO - execute_update: Update completed in 0.01s. Affected rows: 1
2025-09-18 14:10:48,821 - db_manager - INFO - Transaction committed successfully
2025-09-18 14:10:48,821 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 14:10:48,821 - db_manager - INFO - Complainant updated in db: CM-20250918-KOJH-66FB-B
2025-09-18 14:10:48,821 - db_manager - INFO - update_grievance: Updating grievance with ID: GR-20250918-KOJH-D10C-B
2025-09-18 14:10:48,821 - db_manager - DEBUG - execute_update values: ('["N/A"]', 'N/A', 'dust everywhere in my house\nmy kids are coughing hard', 'GR-20250918-KOJH-D10C-B')
2025-09-18 14:10:48,821 - db_manager - DEBUG - execute_update query: 
                    UPDATE grievances 
                    SET grievance_categories = %s, grievance_summary = %s, grievance_description = %s, grievance_modification_date = CURRENT_TIMESTAMP
                    WHERE grievance_id = %s
                    RETURNING grievance_id
                
2025-09-18 14:10:48,821 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 14:10:48,826 - db_manager - INFO - Starting database transaction
2025-09-18 14:10:48,827 - db_manager - INFO - execute_update: Executing update query: 
                    UPDATE grievances 
                    SET grievance_categories = %s, grievance...
2025-09-18 14:10:48,828 - db_manager - INFO - execute_update: Update completed in 0.01s. Affected rows: 1
2025-09-18 14:10:48,830 - db_manager - INFO - Transaction committed successfully
2025-09-18 14:10:48,830 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 14:10:48,830 - db_manager - INFO - update_grievance: Updated grievance with ID: GR-20250918-KOJH-D10C-B, rows affected: 1
2025-09-18 14:10:48,830 - db_manager - INFO - Grievance updated in db: GR-20250918-KOJH-D10C-B
2025-09-18 14:11:17,105 - db_manager - INFO - create_complainant: Creating complainant with ID: CM-20250918-KOJH-5593-B
2025-09-18 14:11:17,105 - db_manager - DEBUG - encrypted and hashed data at encrypt_and_hash_sensitive_data: {'complainant_id': 'CM-20250918-KOJH-5593-B', 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_unique_id': 'CM-20250918-KOJH-5593-B'}
2025-09-18 14:11:17,105 - db_manager - DEBUG - query_keys at generate_query_string: dict_keys(['complainant_id', 'complainant_province', 'complainant_district', 'complainant_unique_id'])
2025-09-18 14:11:17,105 - db_manager - DEBUG - Generated query: INSERT INTO complainants (complainant_id, complainant_province, complainant_district, complainant_unique_id) VALUES (%s, %s, %s, %s)
2025-09-18 14:11:17,105 - db_manager - DEBUG - len of query_keys: 4
2025-09-18 14:11:17,105 - db_manager - DEBUG - Generated query: INSERT INTO complainants (complainant_id, complainant_province, complainant_district, complainant_unique_id) VALUES (%s, %s, %s, %s)
2025-09-18 14:11:17,105 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 14:11:17,110 - db_manager - INFO - Starting database transaction
2025-09-18 14:11:17,113 - db_manager - INFO - Transaction committed successfully
2025-09-18 14:11:17,113 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 14:11:17,113 - db_manager - INFO - create_complainant: Successfully created complainant with ID: CM-20250918-KOJH-5593-B
2025-09-18 14:11:17,113 - db_manager - INFO - create_grievance: Creating grievance with data: {'grievance_id': 'GR-20250918-KOJH-5ADD-B', 'complainant_id': 'CM-20250918-KOJH-5593-B', 'grievance_description': 'dust everywhere in my house kids are coughing', 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_office': None, 'source': 'bot', 'complainant_unique_id': 'CM-20250918-KOJH-5593-B'}
2025-09-18 14:11:17,113 - db_manager - INFO - create_grievance: Creating grievance with ID: GR-20250918-KOJH-5ADD-B
2025-09-18 14:11:17,113 - db_manager - INFO - create_grievance: Creating grievance with allowed fields: ['grievance_id', 'complainant_id', 'grievance_categories', 'grievance_categories_alternative', 'follow_up_question', 'grievance_summary', 'grievance_description', 'grievance_claimed_amount', 'grievance_location', 'is_temporary', 'source', 'language_code', 'grievance_classification_status']
2025-09-18 14:11:17,113 - db_manager - DEBUG - query_keys at generate_query_string: dict_keys(['grievance_id', 'complainant_id', 'grievance_description', 'source'])
2025-09-18 14:11:17,113 - db_manager - DEBUG - Generated query: INSERT INTO grievances (grievance_id, complainant_id, grievance_description, source) VALUES (%s, %s, %s, %s) RETURNING grievance_id
2025-09-18 14:11:17,113 - db_manager - DEBUG - len of query_keys: 4
2025-09-18 14:11:17,113 - db_manager - DEBUG - Generated query: INSERT INTO grievances (grievance_id, complainant_id, grievance_description, source) VALUES (%s, %s, %s, %s) RETURNING grievance_id
2025-09-18 14:11:17,113 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 14:11:17,118 - db_manager - INFO - Starting database transaction
2025-09-18 14:11:17,121 - db_manager - INFO - Transaction committed successfully
2025-09-18 14:11:17,121 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 14:11:17,121 - db_manager - INFO - create_grievance: Successfully created grievance with ID: GR-20250918-KOJH-5ADD-B
2025-09-18 14:11:32,882 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 14:11:32,887 - db_manager - INFO - Starting database transaction
2025-09-18 14:11:32,887 - db_manager - INFO - Executing get_complainant_by_id: 
            SELECT complainant_id, complainant_unique_id, complainant_full_name,    complainant_pho...
2025-09-18 14:11:32,889 - db_manager - INFO - get_complainant_by_id completed in 0.01s. Rows: 1
2025-09-18 14:11:32,889 - db_manager - INFO - Transaction committed successfully
2025-09-18 14:11:32,889 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 14:11:32,889 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 14:11:32,893 - db_manager - INFO - Starting database transaction
2025-09-18 14:11:32,893 - db_manager - INFO - Executing get_grievance_by_id: 
                SELECT g.*, c.complainant_full_name, c.complainant_phone, c.complainant_email,
    ...
2025-09-18 14:11:32,895 - db_manager - INFO - get_grievance_by_id completed in 0.01s. Rows: 1
2025-09-18 14:11:32,895 - db_manager - INFO - Transaction committed successfully
2025-09-18 14:11:32,895 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 14:11:32,895 - db_manager - DEBUG - get_grievance_by_id: grievance_id: {'grievance_id': 'GR-20250918-KOJH-5ADD-B', 'complainant_id': 'CM-20250918-KOJH-5593-B', 'grievance_categories': ['Environmental - Air Pollution'], 'grievance_categories_alternative': ['Environmental - Noise Pollution', 'Environmental, Social - Cutting Of Trees'], 'follow_up_question': ['How many people are affected by the dust, what health symptoms have you observed (e.g., coughing), and how long has this been happening?'], 'grievance_summary': 'Dust from construction is all around my house and my kids are coughing.', 'grievance_description': 'dust everywhere in my house kids are coughing', 'grievance_claimed_amount': None, 'grievance_location': None, 'language_code': 'en', 'grievance_classification_status': 'pending', 'grievance_creation_date': datetime.datetime(2025, 9, 18, 14, 11, 17, 118635, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'grievance_modification_date': datetime.datetime(2025, 9, 18, 14, 11, 28, 952047, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'is_temporary': True, 'source': 'bot', 'complainant_full_name': None, 'complainant_phone': None, 'complainant_email': None, 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_municipality': None, 'complainant_ward': None, 'complainant_village': None, 'complainant_address': None}, results: [{'grievance_id': 'GR-20250918-KOJH-5ADD-B', 'complainant_id': 'CM-20250918-KOJH-5593-B', 'grievance_categories': '["Environmental - Air Pollution"]', 'grievance_categories_alternative': '["Environmental - Noise Pollution", "Environmental, Social - Cutting Of Trees"]', 'follow_up_question': '["How many people are affected by the dust, what health symptoms have you observed (e.g., coughing), and how long has this been happening?"]', 'grievance_summary': 'Dust from construction is all around my house and my kids are coughing.', 'grievance_description': 'dust everywhere in my house kids are coughing', 'grievance_claimed_amount': None, 'grievance_location': None, 'language_code': 'en', 'grievance_classification_status': 'pending', 'grievance_creation_date': datetime.datetime(2025, 9, 18, 14, 11, 17, 118635, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'grievance_modification_date': datetime.datetime(2025, 9, 18, 14, 11, 28, 952047, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'is_temporary': True, 'source': 'bot', 'complainant_full_name': None, 'complainant_phone': None, 'complainant_email': None, 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_municipality': None, 'complainant_ward': None, 'complainant_village': None, 'complainant_address': None}]
2025-09-18 14:11:32,895 - db_manager - INFO - update_complainant: Updating complainant with ID: CM-20250918-KOJH-5593-B
2025-09-18 14:11:32,895 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 14:11:32,900 - db_manager - INFO - Starting database transaction
2025-09-18 14:11:32,900 - db_manager - INFO - Executing encrypt_field: SELECT encode(pgp_sym_encrypt(%s, %s), 'hex') AS encrypted...
2025-09-18 14:11:32,901 - db_manager - INFO - encrypt_field completed in 0.01s. Rows: 1
2025-09-18 14:11:32,901 - db_manager - INFO - Transaction committed successfully
2025-09-18 14:11:32,901 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 14:11:32,901 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 14:11:32,906 - db_manager - INFO - Starting database transaction
2025-09-18 14:11:32,906 - db_manager - INFO - Executing encrypt_field: SELECT encode(pgp_sym_encrypt(%s, %s), 'hex') AS encrypted...
2025-09-18 14:11:32,907 - db_manager - INFO - encrypt_field completed in 0.01s. Rows: 1
2025-09-18 14:11:32,907 - db_manager - INFO - Transaction committed successfully
2025-09-18 14:11:32,907 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 14:11:32,907 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 14:11:32,911 - db_manager - INFO - Starting database transaction
2025-09-18 14:11:32,912 - db_manager - INFO - Executing encrypt_field: SELECT encode(pgp_sym_encrypt(%s, %s), 'hex') AS encrypted...
2025-09-18 14:11:32,913 - db_manager - INFO - encrypt_field completed in 0.01s. Rows: 1
2025-09-18 14:11:32,913 - db_manager - INFO - Transaction committed successfully
2025-09-18 14:11:32,913 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 14:11:32,913 - db_manager - DEBUG - encrypted phone number Not provided at encrypt_complainant_data: c30d040703029fb3a969b3d004957ad23d01166ae3dc669feac040a26e32561fd852d6681936df8ec9a4c8e60094e745ccd9f772c11f4584f7eb8e85d350d7bf9686365ff7942a610b751a07263b
2025-09-18 14:11:32,913 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 14:11:32,918 - db_manager - INFO - Starting database transaction
2025-09-18 14:11:32,918 - db_manager - INFO - Executing encrypt_field: SELECT encode(pgp_sym_encrypt(%s, %s), 'hex') AS encrypted...
2025-09-18 14:11:32,919 - db_manager - INFO - encrypt_field completed in 0.01s. Rows: 1
2025-09-18 14:11:32,919 - db_manager - INFO - Transaction committed successfully
2025-09-18 14:11:32,919 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 14:11:32,919 - db_manager - DEBUG - phone number Not provided hashed to d83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f at hash_sensitive_data
2025-09-18 14:11:32,919 - db_manager - DEBUG - encrypted and hashed data at encrypt_and_hash_sensitive_data: {'complainant_full_name': 'c30d04070302c42628d6413fbbcb7cd23d01a90213bae834d3992316455595fd0752f7616fbdef377f436a0404df43f99aa696f7563be6dca8c974b250fbf8b8cb69c1dadb294ab154fddefb64ee', 'complainant_phone': 'c30d040703029fb3a969b3d004957ad23d01166ae3dc669feac040a26e32561fd852d6681936df8ec9a4c8e60094e745ccd9f772c11f4584f7eb8e85d350d7bf9686365ff7942a610b751a07263b', 'complainant_email': 'c30d040703029eba5fe3924eadd37cd23d01372fa85e3d16d7feb772be06b409179aac2d1babda2a67ae83a3832c128a4d96245bba2310a3a91c34a683d3129327c393a7971e11d646f644ed1434', 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_municipality': 'Birtamod Municipality', 'complainant_village': 'Slot_Skipped', 'complainant_address': 'c30d04070302d481fdfff50f706d6cd23d01c41c4f2956da9d3a444a16e0c03ffc2d854bb1f2b769fd51923bd77a272487d57b23a522496d8fd310110b2bbf98fc368fe2e1783e12a97bed456327', 'complainant_email_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'complainant_phone_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'complainant_full_name_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f'}
2025-09-18 14:11:32,919 - db_manager - DEBUG - encrypted_data at update_complainant: {'complainant_full_name': 'c30d04070302c42628d6413fbbcb7cd23d01a90213bae834d3992316455595fd0752f7616fbdef377f436a0404df43f99aa696f7563be6dca8c974b250fbf8b8cb69c1dadb294ab154fddefb64ee', 'complainant_phone': 'c30d040703029fb3a969b3d004957ad23d01166ae3dc669feac040a26e32561fd852d6681936df8ec9a4c8e60094e745ccd9f772c11f4584f7eb8e85d350d7bf9686365ff7942a610b751a07263b', 'complainant_email': 'c30d040703029eba5fe3924eadd37cd23d01372fa85e3d16d7feb772be06b409179aac2d1babda2a67ae83a3832c128a4d96245bba2310a3a91c34a683d3129327c393a7971e11d646f644ed1434', 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_municipality': 'Birtamod Municipality', 'complainant_village': 'Slot_Skipped', 'complainant_address': 'c30d04070302d481fdfff50f706d6cd23d01c41c4f2956da9d3a444a16e0c03ffc2d854bb1f2b769fd51923bd77a272487d57b23a522496d8fd310110b2bbf98fc368fe2e1783e12a97bed456327', 'complainant_email_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'complainant_phone_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'complainant_full_name_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f'}
2025-09-18 14:11:32,919 - db_manager - DEBUG - execute_update values: ('c30d04070302c42628d6413fbbcb7cd23d01a90213bae834d3992316455595fd0752f7616fbdef377f436a0404df43f99aa696f7563be6dca8c974b250fbf8b8cb69c1dadb294ab154fddefb64ee', 'c30d040703029fb3a969b3d004957ad23d01166ae3dc669feac040a26e32561fd852d6681936df8ec9a4c8e60094e745ccd9f772c11f4584f7eb8e85d350d7bf9686365ff7942a610b751a07263b', 'c30d040703029eba5fe3924eadd37cd23d01372fa85e3d16d7feb772be06b409179aac2d1babda2a67ae83a3832c128a4d96245bba2310a3a91c34a683d3129327c393a7971e11d646f644ed1434', 'Koshi', 'Jhapa', 'Birtamod Municipality', 'Slot_Skipped', 'c30d04070302d481fdfff50f706d6cd23d01c41c4f2956da9d3a444a16e0c03ffc2d854bb1f2b769fd51923bd77a272487d57b23a522496d8fd310110b2bbf98fc368fe2e1783e12a97bed456327', 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'CM-20250918-KOJH-5593-B')
2025-09-18 14:11:32,919 - db_manager - DEBUG - execute_update query: UPDATE complainants SET complainant_full_name = %s, complainant_phone = %s, complainant_email = %s, complainant_province = %s, complainant_district = %s, complainant_municipality = %s, complainant_village = %s, complainant_address = %s, complainant_email_hash = %s, complainant_phone_hash = %s, complainant_full_name_hash = %s WHERE complainant_id = %s
2025-09-18 14:11:32,920 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 14:11:32,924 - db_manager - INFO - Starting database transaction
2025-09-18 14:11:32,924 - db_manager - INFO - execute_update: Executing update query: UPDATE complainants SET complainant_full_name = %s, complainant_phone = %s, complainant_email = %s, ...
2025-09-18 14:11:32,925 - db_manager - INFO - execute_update: Update completed in 0.01s. Affected rows: 1
2025-09-18 14:11:32,927 - db_manager - INFO - Transaction committed successfully
2025-09-18 14:11:32,927 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 14:11:32,927 - db_manager - INFO - Complainant updated in db: CM-20250918-KOJH-5593-B
2025-09-18 14:11:32,927 - db_manager - INFO - update_grievance: Updating grievance with ID: GR-20250918-KOJH-5ADD-B
2025-09-18 14:11:32,928 - db_manager - DEBUG - execute_update values: ('dust everywhere in my house kids are coughing', 'GR-20250918-KOJH-5ADD-B')
2025-09-18 14:11:32,928 - db_manager - DEBUG - execute_update query: 
                    UPDATE grievances 
                    SET grievance_description = %s, grievance_modification_date = CURRENT_TIMESTAMP
                    WHERE grievance_id = %s
                    RETURNING grievance_id
                
2025-09-18 14:11:32,928 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 14:11:32,932 - db_manager - INFO - Starting database transaction
2025-09-18 14:11:32,932 - db_manager - INFO - execute_update: Executing update query: 
                    UPDATE grievances 
                    SET grievance_description = %s, grievanc...
2025-09-18 14:11:32,933 - db_manager - INFO - execute_update: Update completed in 0.01s. Affected rows: 1
2025-09-18 14:11:32,935 - db_manager - INFO - Transaction committed successfully
2025-09-18 14:11:32,935 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 14:11:32,935 - db_manager - INFO - update_grievance: Updated grievance with ID: GR-20250918-KOJH-5ADD-B, rows affected: 1
2025-09-18 14:11:32,935 - db_manager - INFO - Grievance updated in db: GR-20250918-KOJH-5ADD-B
2025-09-18 14:11:32,935 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 14:11:32,940 - db_manager - INFO - Starting database transaction
2025-09-18 14:11:32,940 - db_manager - INFO - Executing get_grievance_files: 
            SELECT file_id, file_name, file_type, file_size, upload_timestamp
            FROM file...
2025-09-18 14:11:32,941 - db_manager - INFO - get_grievance_files completed in 0.01s. Rows: 0
2025-09-18 14:11:32,941 - db_manager - INFO - Transaction committed successfully
2025-09-18 14:11:32,941 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 14:11:32,941 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 14:11:32,945 - db_manager - INFO - Starting database transaction
2025-09-18 14:11:32,946 - db_manager - INFO - Executing get_grievance_files: 
            SELECT file_id, file_name, file_type, file_size, upload_timestamp
            FROM file...
2025-09-18 14:11:32,947 - db_manager - INFO - get_grievance_files completed in 0.01s. Rows: 0
2025-09-18 14:11:32,947 - db_manager - INFO - Transaction committed successfully
2025-09-18 14:11:32,947 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 14:11:32,989 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 14:11:32,995 - db_manager - INFO - Starting database transaction
2025-09-18 14:11:32,995 - db_manager - INFO - Executing get_grievance_by_id: 
                SELECT g.*, c.complainant_full_name, c.complainant_phone, c.complainant_email,
    ...
2025-09-18 14:11:32,996 - db_manager - INFO - get_grievance_by_id completed in 0.01s. Rows: 1
2025-09-18 14:11:32,997 - db_manager - INFO - Transaction committed successfully
2025-09-18 14:11:32,997 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 14:11:32,997 - db_manager - DEBUG - get_grievance_by_id: grievance_id: {'grievance_id': 'GR-20250918-KOJH-5ADD-B', 'complainant_id': 'CM-20250918-KOJH-5593-B', 'grievance_categories': ['Environmental - Air Pollution'], 'grievance_categories_alternative': ['Environmental - Noise Pollution', 'Environmental, Social - Cutting Of Trees'], 'follow_up_question': ['How many people are affected by the dust, what health symptoms have you observed (e.g., coughing), and how long has this been happening?'], 'grievance_summary': 'Dust from construction is all around my house and my kids are coughing.', 'grievance_description': 'dust everywhere in my house kids are coughing', 'grievance_claimed_amount': None, 'grievance_location': None, 'language_code': 'en', 'grievance_classification_status': 'pending', 'grievance_creation_date': datetime.datetime(2025, 9, 18, 14, 11, 17, 118635, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'grievance_modification_date': datetime.datetime(2025, 9, 18, 14, 11, 32, 932945, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'is_temporary': True, 'source': 'bot', 'complainant_full_name': 'c30d04070302c42628d6413fbbcb7cd23d01a90213bae834d3992316455595fd0752f7616fbdef377f436a0404df43f99aa696f7563be6dca8c974b250fbf8b8cb69c1dadb294ab154fddefb64ee', 'complainant_phone': 'c30d040703029fb3a969b3d004957ad23d01166ae3dc669feac040a26e32561fd852d6681936df8ec9a4c8e60094e745ccd9f772c11f4584f7eb8e85d350d7bf9686365ff7942a610b751a07263b', 'complainant_email': 'c30d040703029eba5fe3924eadd37cd23d01372fa85e3d16d7feb772be06b409179aac2d1babda2a67ae83a3832c128a4d96245bba2310a3a91c34a683d3129327c393a7971e11d646f644ed1434', 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_municipality': 'Birtamod Municipality', 'complainant_ward': None, 'complainant_village': 'Slot_Skipped', 'complainant_address': 'c30d04070302d481fdfff50f706d6cd23d01c41c4f2956da9d3a444a16e0c03ffc2d854bb1f2b769fd51923bd77a272487d57b23a522496d8fd310110b2bbf98fc368fe2e1783e12a97bed456327'}, results: [{'grievance_id': 'GR-20250918-KOJH-5ADD-B', 'complainant_id': 'CM-20250918-KOJH-5593-B', 'grievance_categories': '["Environmental - Air Pollution"]', 'grievance_categories_alternative': '["Environmental - Noise Pollution", "Environmental, Social - Cutting Of Trees"]', 'follow_up_question': '["How many people are affected by the dust, what health symptoms have you observed (e.g., coughing), and how long has this been happening?"]', 'grievance_summary': 'Dust from construction is all around my house and my kids are coughing.', 'grievance_description': 'dust everywhere in my house kids are coughing', 'grievance_claimed_amount': None, 'grievance_location': None, 'language_code': 'en', 'grievance_classification_status': 'pending', 'grievance_creation_date': datetime.datetime(2025, 9, 18, 14, 11, 17, 118635, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'grievance_modification_date': datetime.datetime(2025, 9, 18, 14, 11, 32, 932945, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'is_temporary': True, 'source': 'bot', 'complainant_full_name': 'c30d04070302c42628d6413fbbcb7cd23d01a90213bae834d3992316455595fd0752f7616fbdef377f436a0404df43f99aa696f7563be6dca8c974b250fbf8b8cb69c1dadb294ab154fddefb64ee', 'complainant_phone': 'c30d040703029fb3a969b3d004957ad23d01166ae3dc669feac040a26e32561fd852d6681936df8ec9a4c8e60094e745ccd9f772c11f4584f7eb8e85d350d7bf9686365ff7942a610b751a07263b', 'complainant_email': 'c30d040703029eba5fe3924eadd37cd23d01372fa85e3d16d7feb772be06b409179aac2d1babda2a67ae83a3832c128a4d96245bba2310a3a91c34a683d3129327c393a7971e11d646f644ed1434', 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_municipality': 'Birtamod Municipality', 'complainant_ward': None, 'complainant_village': 'Slot_Skipped', 'complainant_address': 'c30d04070302d481fdfff50f706d6cd23d01c41c4f2956da9d3a444a16e0c03ffc2d854bb1f2b769fd51923bd77a272487d57b23a522496d8fd310110b2bbf98fc368fe2e1783e12a97bed456327'}]
2025-09-18 14:33:49,980 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-18 14:33:49,980 - db_manager - INFO - Database manager initialized successfully
2025-09-18 14:33:49,980 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-18 14:33:49,980 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-18 14:33:49,980 - db_manager - INFO - Database manager initialized successfully
2025-09-18 14:33:49,980 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-18 14:33:49,981 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-18 14:33:49,981 - db_manager - INFO - Database manager initialized successfully
2025-09-18 14:33:49,981 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-18 14:33:49,981 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-18 14:33:49,981 - db_manager - INFO - Database manager initialized successfully
2025-09-18 14:33:49,981 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-18 14:33:49,981 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-18 14:33:49,981 - db_manager - INFO - Database manager initialized successfully
2025-09-18 14:33:49,981 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-18 14:33:49,981 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-18 14:33:49,981 - db_manager - INFO - Database manager initialized successfully
2025-09-18 14:33:49,981 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-18 14:33:49,981 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-18 14:33:49,981 - db_manager - INFO - Database manager initialized successfully
2025-09-18 14:33:49,981 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-18 14:33:49,981 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-18 14:33:49,981 - db_manager - INFO - Database manager initialized successfully
2025-09-18 14:33:49,981 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-18 14:33:49,981 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-18 14:33:49,981 - db_manager - INFO - Database manager initialized successfully
2025-09-18 14:33:49,981 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-18 14:33:49,982 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-18 14:33:49,982 - db_manager - INFO - Database manager initialized successfully
2025-09-18 14:33:49,982 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-18 14:35:15,835 - db_manager - INFO - create_complainant: Creating complainant with ID: CM-20250918-KOJH-F673-B
2025-09-18 14:35:15,836 - db_manager - DEBUG - encrypted and hashed data at encrypt_and_hash_sensitive_data: {'complainant_id': 'CM-20250918-KOJH-F673-B', 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_unique_id': 'CM-20250918-KOJH-F673-B'}
2025-09-18 14:35:15,836 - db_manager - DEBUG - query_keys at generate_query_string: dict_keys(['complainant_id', 'complainant_province', 'complainant_district', 'complainant_unique_id'])
2025-09-18 14:35:15,836 - db_manager - DEBUG - Generated query: INSERT INTO complainants (complainant_id, complainant_province, complainant_district, complainant_unique_id) VALUES (%s, %s, %s, %s)
2025-09-18 14:35:15,836 - db_manager - DEBUG - len of query_keys: 4
2025-09-18 14:35:15,836 - db_manager - DEBUG - Generated query: INSERT INTO complainants (complainant_id, complainant_province, complainant_district, complainant_unique_id) VALUES (%s, %s, %s, %s)
2025-09-18 14:35:15,836 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 14:35:15,846 - db_manager - INFO - Starting database transaction
2025-09-18 14:35:15,850 - db_manager - INFO - Transaction committed successfully
2025-09-18 14:35:15,850 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 14:35:15,850 - db_manager - INFO - create_complainant: Successfully created complainant with ID: CM-20250918-KOJH-F673-B
2025-09-18 14:35:15,850 - db_manager - INFO - create_grievance: Creating grievance with data: {'grievance_id': 'GR-20250918-KOJH-2A16-B', 'complainant_id': 'CM-20250918-KOJH-F673-B', 'grievance_description': 'dust everywhere in my house kids are coughing', 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_office': None, 'source': 'bot', 'complainant_unique_id': 'CM-20250918-KOJH-F673-B'}
2025-09-18 14:35:15,850 - db_manager - INFO - create_grievance: Creating grievance with ID: GR-20250918-KOJH-2A16-B
2025-09-18 14:35:15,850 - db_manager - INFO - create_grievance: Creating grievance with allowed fields: ['grievance_id', 'complainant_id', 'grievance_categories', 'grievance_categories_alternative', 'follow_up_question', 'grievance_summary', 'grievance_description', 'grievance_claimed_amount', 'grievance_location', 'is_temporary', 'source', 'language_code', 'grievance_classification_status']
2025-09-18 14:35:15,850 - db_manager - DEBUG - query_keys at generate_query_string: dict_keys(['grievance_id', 'complainant_id', 'grievance_description', 'source'])
2025-09-18 14:35:15,850 - db_manager - DEBUG - Generated query: INSERT INTO grievances (grievance_id, complainant_id, grievance_description, source) VALUES (%s, %s, %s, %s) RETURNING grievance_id
2025-09-18 14:35:15,850 - db_manager - DEBUG - len of query_keys: 4
2025-09-18 14:35:15,850 - db_manager - DEBUG - Generated query: INSERT INTO grievances (grievance_id, complainant_id, grievance_description, source) VALUES (%s, %s, %s, %s) RETURNING grievance_id
2025-09-18 14:35:15,850 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 14:35:15,856 - db_manager - INFO - Starting database transaction
2025-09-18 14:35:15,862 - db_manager - INFO - Transaction committed successfully
2025-09-18 14:35:15,862 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 14:35:15,862 - db_manager - INFO - create_grievance: Successfully created grievance with ID: GR-20250918-KOJH-2A16-B
2025-09-18 14:35:34,751 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 14:35:34,756 - db_manager - INFO - Starting database transaction
2025-09-18 14:35:34,756 - db_manager - INFO - Executing get_complainant_by_id: 
            SELECT complainant_id, complainant_unique_id, complainant_full_name,    complainant_pho...
2025-09-18 14:35:34,758 - db_manager - INFO - get_complainant_by_id completed in 0.01s. Rows: 1
2025-09-18 14:35:34,758 - db_manager - INFO - Transaction committed successfully
2025-09-18 14:35:34,758 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 14:35:34,758 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 14:35:34,763 - db_manager - INFO - Starting database transaction
2025-09-18 14:35:34,763 - db_manager - INFO - Executing get_grievance_by_id: 
                SELECT g.*, c.complainant_full_name, c.complainant_phone, c.complainant_email,
    ...
2025-09-18 14:35:34,764 - db_manager - INFO - get_grievance_by_id completed in 0.01s. Rows: 1
2025-09-18 14:35:34,765 - db_manager - INFO - Transaction committed successfully
2025-09-18 14:35:34,765 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 14:35:34,765 - db_manager - DEBUG - get_grievance_by_id: grievance_id: {'grievance_id': 'GR-20250918-KOJH-2A16-B', 'complainant_id': 'CM-20250918-KOJH-F673-B', 'grievance_categories': ['Environmental - Air Pollution'], 'grievance_categories_alternative': [], 'follow_up_question': ['How many people in your household are affected by the dust and coughing, and for how long has this been happening? Have any children or other family members developed respiratory symptoms or health problems as a result?'], 'grievance_summary': 'Dust is everywhere in my house due to road works, and my kids are coughing.', 'grievance_description': 'dust everywhere in my house kids are coughing', 'grievance_claimed_amount': None, 'grievance_location': None, 'language_code': 'en', 'grievance_classification_status': 'pending', 'grievance_creation_date': datetime.datetime(2025, 9, 18, 14, 35, 15, 856629, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'grievance_modification_date': datetime.datetime(2025, 9, 18, 14, 35, 28, 359540, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'is_temporary': True, 'source': 'bot', 'complainant_full_name': None, 'complainant_phone': None, 'complainant_email': None, 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_municipality': None, 'complainant_ward': None, 'complainant_village': None, 'complainant_address': None}, results: [{'grievance_id': 'GR-20250918-KOJH-2A16-B', 'complainant_id': 'CM-20250918-KOJH-F673-B', 'grievance_categories': '["Environmental - Air Pollution"]', 'grievance_categories_alternative': '[]', 'follow_up_question': '["How many people in your household are affected by the dust and coughing, and for how long has this been happening? Have any children or other family members developed respiratory symptoms or health problems as a result?"]', 'grievance_summary': 'Dust is everywhere in my house due to road works, and my kids are coughing.', 'grievance_description': 'dust everywhere in my house kids are coughing', 'grievance_claimed_amount': None, 'grievance_location': None, 'language_code': 'en', 'grievance_classification_status': 'pending', 'grievance_creation_date': datetime.datetime(2025, 9, 18, 14, 35, 15, 856629, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'grievance_modification_date': datetime.datetime(2025, 9, 18, 14, 35, 28, 359540, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'is_temporary': True, 'source': 'bot', 'complainant_full_name': None, 'complainant_phone': None, 'complainant_email': None, 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_municipality': None, 'complainant_ward': None, 'complainant_village': None, 'complainant_address': None}]
2025-09-18 14:35:34,765 - db_manager - INFO - update_complainant: Updating complainant with ID: CM-20250918-KOJH-F673-B
2025-09-18 14:35:34,765 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 14:35:34,770 - db_manager - INFO - Starting database transaction
2025-09-18 14:35:34,771 - db_manager - INFO - Executing encrypt_field: SELECT encode(pgp_sym_encrypt(%s, %s), 'hex') AS encrypted...
2025-09-18 14:35:34,774 - db_manager - INFO - encrypt_field completed in 0.01s. Rows: 1
2025-09-18 14:35:34,774 - db_manager - INFO - Transaction committed successfully
2025-09-18 14:35:34,774 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 14:35:34,775 - db_manager - DEBUG - encrypted phone number Not provided at encrypt_complainant_data: c30d0407030251459fb54a73ce8f72d23d0118a0a9da13a233e5d534c1e290b5037b31d8bd8aa44fd4000881d2281a02f96298c02f9a06b7dc94c043fd369d8080ece93a370e7604a4686431c747
2025-09-18 14:35:34,775 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 14:35:34,779 - db_manager - INFO - Starting database transaction
2025-09-18 14:35:34,779 - db_manager - INFO - Executing encrypt_field: SELECT encode(pgp_sym_encrypt(%s, %s), 'hex') AS encrypted...
2025-09-18 14:35:34,780 - db_manager - INFO - encrypt_field completed in 0.01s. Rows: 1
2025-09-18 14:35:34,780 - db_manager - INFO - Transaction committed successfully
2025-09-18 14:35:34,780 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 14:35:34,780 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 14:35:34,784 - db_manager - INFO - Starting database transaction
2025-09-18 14:35:34,785 - db_manager - INFO - Executing encrypt_field: SELECT encode(pgp_sym_encrypt(%s, %s), 'hex') AS encrypted...
2025-09-18 14:35:34,786 - db_manager - INFO - encrypt_field completed in 0.01s. Rows: 1
2025-09-18 14:35:34,786 - db_manager - INFO - Transaction committed successfully
2025-09-18 14:35:34,786 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 14:35:34,786 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 14:35:34,791 - db_manager - INFO - Starting database transaction
2025-09-18 14:35:34,791 - db_manager - INFO - Executing encrypt_field: SELECT encode(pgp_sym_encrypt(%s, %s), 'hex') AS encrypted...
2025-09-18 14:35:34,792 - db_manager - INFO - encrypt_field completed in 0.01s. Rows: 1
2025-09-18 14:35:34,792 - db_manager - INFO - Transaction committed successfully
2025-09-18 14:35:34,792 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 14:35:34,792 - db_manager - DEBUG - phone number Not provided hashed to d83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f at hash_sensitive_data
2025-09-18 14:35:34,793 - db_manager - DEBUG - encrypted and hashed data at encrypt_and_hash_sensitive_data: {'complainant_full_name': 'c30d040703023d8fba114124889f7ed23d01a01703e5b46ce714b39475597638d653e65c57976cc968c374c6ff73dc869b5425cfbc921cce006b9f41b11fae055be256df69a1bd5cc3ac7cb0ce31', 'complainant_phone': 'c30d0407030251459fb54a73ce8f72d23d0118a0a9da13a233e5d534c1e290b5037b31d8bd8aa44fd4000881d2281a02f96298c02f9a06b7dc94c043fd369d8080ece93a370e7604a4686431c747', 'complainant_email': 'c30d04070302cdaacd18ba0f37b66dd23d01e4ae856b5fd8106673a5d905fb2a3b479c7c4d29e1b9567532235a17f91cf0dcc9959737a82c1c26a0734097ac7ec6d57d3ba92ba33af5a82f46fa15', 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_municipality': 'Birtamod Municipality', 'complainant_village': 'Slot_Skipped', 'complainant_address': 'c30d0407030285ff3d0240c884af7bd23d0120e18e1e4f4e51514dc6e23e5feb96d7d73a34a9f6228ac159c2ace097644de0b3404f817e2a85b4e4c320c899354792e0cbedddb11babff2411a69a', 'complainant_phone_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'complainant_email_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'complainant_full_name_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f'}
2025-09-18 14:35:34,793 - db_manager - DEBUG - encrypted_data at update_complainant: {'complainant_full_name': 'c30d040703023d8fba114124889f7ed23d01a01703e5b46ce714b39475597638d653e65c57976cc968c374c6ff73dc869b5425cfbc921cce006b9f41b11fae055be256df69a1bd5cc3ac7cb0ce31', 'complainant_phone': 'c30d0407030251459fb54a73ce8f72d23d0118a0a9da13a233e5d534c1e290b5037b31d8bd8aa44fd4000881d2281a02f96298c02f9a06b7dc94c043fd369d8080ece93a370e7604a4686431c747', 'complainant_email': 'c30d04070302cdaacd18ba0f37b66dd23d01e4ae856b5fd8106673a5d905fb2a3b479c7c4d29e1b9567532235a17f91cf0dcc9959737a82c1c26a0734097ac7ec6d57d3ba92ba33af5a82f46fa15', 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_municipality': 'Birtamod Municipality', 'complainant_village': 'Slot_Skipped', 'complainant_address': 'c30d0407030285ff3d0240c884af7bd23d0120e18e1e4f4e51514dc6e23e5feb96d7d73a34a9f6228ac159c2ace097644de0b3404f817e2a85b4e4c320c899354792e0cbedddb11babff2411a69a', 'complainant_phone_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'complainant_email_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'complainant_full_name_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f'}
2025-09-18 14:35:34,793 - db_manager - DEBUG - execute_update values: ('c30d040703023d8fba114124889f7ed23d01a01703e5b46ce714b39475597638d653e65c57976cc968c374c6ff73dc869b5425cfbc921cce006b9f41b11fae055be256df69a1bd5cc3ac7cb0ce31', 'c30d0407030251459fb54a73ce8f72d23d0118a0a9da13a233e5d534c1e290b5037b31d8bd8aa44fd4000881d2281a02f96298c02f9a06b7dc94c043fd369d8080ece93a370e7604a4686431c747', 'c30d04070302cdaacd18ba0f37b66dd23d01e4ae856b5fd8106673a5d905fb2a3b479c7c4d29e1b9567532235a17f91cf0dcc9959737a82c1c26a0734097ac7ec6d57d3ba92ba33af5a82f46fa15', 'Koshi', 'Jhapa', 'Birtamod Municipality', 'Slot_Skipped', 'c30d0407030285ff3d0240c884af7bd23d0120e18e1e4f4e51514dc6e23e5feb96d7d73a34a9f6228ac159c2ace097644de0b3404f817e2a85b4e4c320c899354792e0cbedddb11babff2411a69a', 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'CM-20250918-KOJH-F673-B')
2025-09-18 14:35:34,793 - db_manager - DEBUG - execute_update query: UPDATE complainants SET complainant_full_name = %s, complainant_phone = %s, complainant_email = %s, complainant_province = %s, complainant_district = %s, complainant_municipality = %s, complainant_village = %s, complainant_address = %s, complainant_phone_hash = %s, complainant_email_hash = %s, complainant_full_name_hash = %s WHERE complainant_id = %s
2025-09-18 14:35:34,793 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 14:35:34,798 - db_manager - INFO - Starting database transaction
2025-09-18 14:35:34,798 - db_manager - INFO - execute_update: Executing update query: UPDATE complainants SET complainant_full_name = %s, complainant_phone = %s, complainant_email = %s, ...
2025-09-18 14:35:34,800 - db_manager - INFO - execute_update: Update completed in 0.01s. Affected rows: 1
2025-09-18 14:35:34,801 - db_manager - INFO - Transaction committed successfully
2025-09-18 14:35:34,801 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 14:35:34,801 - db_manager - INFO - Complainant updated in db: CM-20250918-KOJH-F673-B
2025-09-18 14:35:34,802 - db_manager - INFO - update_grievance: Updating grievance with ID: GR-20250918-KOJH-2A16-B
2025-09-18 14:35:34,802 - db_manager - DEBUG - execute_update values: ('dust everywhere in my house kids are coughing', 'GR-20250918-KOJH-2A16-B')
2025-09-18 14:35:34,802 - db_manager - DEBUG - execute_update query: 
                    UPDATE grievances 
                    SET grievance_description = %s, grievance_modification_date = CURRENT_TIMESTAMP
                    WHERE grievance_id = %s
                    RETURNING grievance_id
                
2025-09-18 14:35:34,802 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 14:35:34,806 - db_manager - INFO - Starting database transaction
2025-09-18 14:35:34,806 - db_manager - INFO - execute_update: Executing update query: 
                    UPDATE grievances 
                    SET grievance_description = %s, grievanc...
2025-09-18 14:35:34,808 - db_manager - INFO - execute_update: Update completed in 0.01s. Affected rows: 1
2025-09-18 14:35:34,810 - db_manager - INFO - Transaction committed successfully
2025-09-18 14:35:34,810 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 14:35:34,810 - db_manager - INFO - update_grievance: Updated grievance with ID: GR-20250918-KOJH-2A16-B, rows affected: 1
2025-09-18 14:35:34,810 - db_manager - INFO - Grievance updated in db: GR-20250918-KOJH-2A16-B
2025-09-18 14:35:34,810 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 14:35:34,815 - db_manager - INFO - Starting database transaction
2025-09-18 14:35:34,815 - db_manager - INFO - Executing get_grievance_files: 
            SELECT file_id, file_name, file_type, file_size, upload_timestamp
            FROM file...
2025-09-18 14:35:34,816 - db_manager - INFO - get_grievance_files completed in 0.01s. Rows: 0
2025-09-18 14:35:34,817 - db_manager - INFO - Transaction committed successfully
2025-09-18 14:35:34,817 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 14:35:34,817 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 14:35:34,821 - db_manager - INFO - Starting database transaction
2025-09-18 14:35:34,821 - db_manager - INFO - Executing get_grievance_files: 
            SELECT file_id, file_name, file_type, file_size, upload_timestamp
            FROM file...
2025-09-18 14:35:34,822 - db_manager - INFO - get_grievance_files completed in 0.01s. Rows: 0
2025-09-18 14:35:34,822 - db_manager - INFO - Transaction committed successfully
2025-09-18 14:35:34,822 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 14:35:34,864 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 14:35:34,869 - db_manager - INFO - Starting database transaction
2025-09-18 14:35:34,869 - db_manager - INFO - Executing get_grievance_by_id: 
                SELECT g.*, c.complainant_full_name, c.complainant_phone, c.complainant_email,
    ...
2025-09-18 14:35:34,871 - db_manager - INFO - get_grievance_by_id completed in 0.01s. Rows: 1
2025-09-18 14:35:34,871 - db_manager - INFO - Transaction committed successfully
2025-09-18 14:35:34,871 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 14:35:34,871 - db_manager - DEBUG - get_grievance_by_id: grievance_id: {'grievance_id': 'GR-20250918-KOJH-2A16-B', 'complainant_id': 'CM-20250918-KOJH-F673-B', 'grievance_categories': ['Environmental - Air Pollution'], 'grievance_categories_alternative': [], 'follow_up_question': ['How many people in your household are affected by the dust and coughing, and for how long has this been happening? Have any children or other family members developed respiratory symptoms or health problems as a result?'], 'grievance_summary': 'Dust is everywhere in my house due to road works, and my kids are coughing.', 'grievance_description': 'dust everywhere in my house kids are coughing', 'grievance_claimed_amount': None, 'grievance_location': None, 'language_code': 'en', 'grievance_classification_status': 'pending', 'grievance_creation_date': datetime.datetime(2025, 9, 18, 14, 35, 15, 856629, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'grievance_modification_date': datetime.datetime(2025, 9, 18, 14, 35, 34, 807028, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'is_temporary': True, 'source': 'bot', 'complainant_full_name': 'c30d040703023d8fba114124889f7ed23d01a01703e5b46ce714b39475597638d653e65c57976cc968c374c6ff73dc869b5425cfbc921cce006b9f41b11fae055be256df69a1bd5cc3ac7cb0ce31', 'complainant_phone': 'c30d0407030251459fb54a73ce8f72d23d0118a0a9da13a233e5d534c1e290b5037b31d8bd8aa44fd4000881d2281a02f96298c02f9a06b7dc94c043fd369d8080ece93a370e7604a4686431c747', 'complainant_email': 'c30d04070302cdaacd18ba0f37b66dd23d01e4ae856b5fd8106673a5d905fb2a3b479c7c4d29e1b9567532235a17f91cf0dcc9959737a82c1c26a0734097ac7ec6d57d3ba92ba33af5a82f46fa15', 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_municipality': 'Birtamod Municipality', 'complainant_ward': None, 'complainant_village': 'Slot_Skipped', 'complainant_address': 'c30d0407030285ff3d0240c884af7bd23d0120e18e1e4f4e51514dc6e23e5feb96d7d73a34a9f6228ac159c2ace097644de0b3404f817e2a85b4e4c320c899354792e0cbedddb11babff2411a69a'}, results: [{'grievance_id': 'GR-20250918-KOJH-2A16-B', 'complainant_id': 'CM-20250918-KOJH-F673-B', 'grievance_categories': '["Environmental - Air Pollution"]', 'grievance_categories_alternative': '[]', 'follow_up_question': '["How many people in your household are affected by the dust and coughing, and for how long has this been happening? Have any children or other family members developed respiratory symptoms or health problems as a result?"]', 'grievance_summary': 'Dust is everywhere in my house due to road works, and my kids are coughing.', 'grievance_description': 'dust everywhere in my house kids are coughing', 'grievance_claimed_amount': None, 'grievance_location': None, 'language_code': 'en', 'grievance_classification_status': 'pending', 'grievance_creation_date': datetime.datetime(2025, 9, 18, 14, 35, 15, 856629, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'grievance_modification_date': datetime.datetime(2025, 9, 18, 14, 35, 34, 807028, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'is_temporary': True, 'source': 'bot', 'complainant_full_name': 'c30d040703023d8fba114124889f7ed23d01a01703e5b46ce714b39475597638d653e65c57976cc968c374c6ff73dc869b5425cfbc921cce006b9f41b11fae055be256df69a1bd5cc3ac7cb0ce31', 'complainant_phone': 'c30d0407030251459fb54a73ce8f72d23d0118a0a9da13a233e5d534c1e290b5037b31d8bd8aa44fd4000881d2281a02f96298c02f9a06b7dc94c043fd369d8080ece93a370e7604a4686431c747', 'complainant_email': 'c30d04070302cdaacd18ba0f37b66dd23d01e4ae856b5fd8106673a5d905fb2a3b479c7c4d29e1b9567532235a17f91cf0dcc9959737a82c1c26a0734097ac7ec6d57d3ba92ba33af5a82f46fa15', 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_municipality': 'Birtamod Municipality', 'complainant_ward': None, 'complainant_village': 'Slot_Skipped', 'complainant_address': 'c30d0407030285ff3d0240c884af7bd23d0120e18e1e4f4e51514dc6e23e5feb96d7d73a34a9f6228ac159c2ace097644de0b3404f817e2a85b4e4c320c899354792e0cbedddb11babff2411a69a'}]
2025-09-18 14:37:46,300 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-18 14:37:46,300 - db_manager - INFO - Database manager initialized successfully
2025-09-18 14:37:46,300 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-18 14:37:46,300 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-18 14:37:46,300 - db_manager - INFO - Database manager initialized successfully
2025-09-18 14:37:46,301 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-18 14:37:46,301 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-18 14:37:46,301 - db_manager - INFO - Database manager initialized successfully
2025-09-18 14:37:46,301 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-18 14:37:46,301 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-18 14:37:46,301 - db_manager - INFO - Database manager initialized successfully
2025-09-18 14:37:46,301 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-18 14:37:46,301 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-18 14:37:46,301 - db_manager - INFO - Database manager initialized successfully
2025-09-18 14:37:46,301 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-18 14:37:46,301 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-18 14:37:46,301 - db_manager - INFO - Database manager initialized successfully
2025-09-18 14:37:46,301 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-18 14:37:46,301 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-18 14:37:46,301 - db_manager - INFO - Database manager initialized successfully
2025-09-18 14:37:46,301 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-18 14:37:46,301 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-18 14:37:46,301 - db_manager - INFO - Database manager initialized successfully
2025-09-18 14:37:46,301 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-18 14:37:46,301 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-18 14:37:46,301 - db_manager - INFO - Database manager initialized successfully
2025-09-18 14:37:46,301 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-18 14:37:46,302 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-18 14:37:46,302 - db_manager - INFO - Database manager initialized successfully
2025-09-18 14:37:46,302 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-18 14:39:02,859 - db_manager - INFO - create_complainant: Creating complainant with ID: CM-20250918-KOJH-D215-B
2025-09-18 14:39:02,859 - db_manager - DEBUG - encrypted and hashed data at encrypt_and_hash_sensitive_data: {'complainant_id': 'CM-20250918-KOJH-D215-B', 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_unique_id': 'CM-20250918-KOJH-D215-B'}
2025-09-18 14:39:02,860 - db_manager - DEBUG - query_keys at generate_query_string: dict_keys(['complainant_id', 'complainant_province', 'complainant_district', 'complainant_unique_id'])
2025-09-18 14:39:02,860 - db_manager - DEBUG - Generated query: INSERT INTO complainants (complainant_id, complainant_province, complainant_district, complainant_unique_id) VALUES (%s, %s, %s, %s)
2025-09-18 14:39:02,860 - db_manager - DEBUG - len of query_keys: 4
2025-09-18 14:39:02,860 - db_manager - DEBUG - Generated query: INSERT INTO complainants (complainant_id, complainant_province, complainant_district, complainant_unique_id) VALUES (%s, %s, %s, %s)
2025-09-18 14:39:02,860 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 14:39:02,867 - db_manager - INFO - Starting database transaction
2025-09-18 14:39:02,869 - db_manager - INFO - Transaction committed successfully
2025-09-18 14:39:02,869 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 14:39:02,869 - db_manager - INFO - create_complainant: Successfully created complainant with ID: CM-20250918-KOJH-D215-B
2025-09-18 14:39:02,869 - db_manager - INFO - create_grievance: Creating grievance with data: {'grievance_id': 'GR-20250918-KOJH-25BA-B', 'complainant_id': 'CM-20250918-KOJH-D215-B', 'grievance_description': 'dust everywhere in my house kids are coughing', 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_office': None, 'source': 'bot', 'complainant_unique_id': 'CM-20250918-KOJH-D215-B'}
2025-09-18 14:39:02,869 - db_manager - INFO - create_grievance: Creating grievance with ID: GR-20250918-KOJH-25BA-B
2025-09-18 14:39:02,869 - db_manager - INFO - create_grievance: Creating grievance with allowed fields: ['grievance_id', 'complainant_id', 'grievance_categories', 'grievance_categories_alternative', 'follow_up_question', 'grievance_summary', 'grievance_description', 'grievance_claimed_amount', 'grievance_location', 'is_temporary', 'source', 'language_code', 'grievance_classification_status']
2025-09-18 14:39:02,869 - db_manager - DEBUG - query_keys at generate_query_string: dict_keys(['grievance_id', 'complainant_id', 'grievance_description', 'source'])
2025-09-18 14:39:02,869 - db_manager - DEBUG - Generated query: INSERT INTO grievances (grievance_id, complainant_id, grievance_description, source) VALUES (%s, %s, %s, %s) RETURNING grievance_id
2025-09-18 14:39:02,869 - db_manager - DEBUG - len of query_keys: 4
2025-09-18 14:39:02,869 - db_manager - DEBUG - Generated query: INSERT INTO grievances (grievance_id, complainant_id, grievance_description, source) VALUES (%s, %s, %s, %s) RETURNING grievance_id
2025-09-18 14:39:02,869 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 14:39:02,874 - db_manager - INFO - Starting database transaction
2025-09-18 14:39:02,878 - db_manager - INFO - Transaction committed successfully
2025-09-18 14:39:02,878 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 14:39:02,878 - db_manager - INFO - create_grievance: Successfully created grievance with ID: GR-20250918-KOJH-25BA-B
2025-09-18 14:39:17,069 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 14:39:17,074 - db_manager - INFO - Starting database transaction
2025-09-18 14:39:17,074 - db_manager - INFO - Executing get_complainant_by_id: 
            SELECT complainant_id, complainant_unique_id, complainant_full_name,    complainant_pho...
2025-09-18 14:39:17,075 - db_manager - INFO - get_complainant_by_id completed in 0.01s. Rows: 1
2025-09-18 14:39:17,075 - db_manager - INFO - Transaction committed successfully
2025-09-18 14:39:17,075 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 14:39:17,075 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 14:39:17,080 - db_manager - INFO - Starting database transaction
2025-09-18 14:39:17,080 - db_manager - INFO - Executing get_grievance_by_id: 
                SELECT g.*, c.complainant_full_name, c.complainant_phone, c.complainant_email,
    ...
2025-09-18 14:39:17,081 - db_manager - INFO - get_grievance_by_id completed in 0.01s. Rows: 1
2025-09-18 14:39:17,081 - db_manager - INFO - Transaction committed successfully
2025-09-18 14:39:17,081 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 14:39:17,082 - db_manager - DEBUG - get_grievance_by_id: grievance_id: {'grievance_id': 'GR-20250918-KOJH-25BA-B', 'complainant_id': 'CM-20250918-KOJH-D215-B', 'grievance_categories': ['Environmental - Air Pollution'], 'grievance_categories_alternative': ['Environmental - Noise Pollution', 'Safety - Road Safety Provisions'], 'follow_up_question': ['How many people in your household are affected by the dust and coughing, and for how long has this been happening?'], 'grievance_summary': 'Dust from road works is entering the house and causing kids to cough.', 'grievance_description': 'dust everywhere in my house kids are coughing', 'grievance_claimed_amount': None, 'grievance_location': None, 'language_code': 'en', 'grievance_classification_status': 'pending', 'grievance_creation_date': datetime.datetime(2025, 9, 18, 14, 39, 2, 874986, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'grievance_modification_date': datetime.datetime(2025, 9, 18, 14, 39, 15, 488884, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'is_temporary': True, 'source': 'bot', 'complainant_full_name': None, 'complainant_phone': None, 'complainant_email': None, 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_municipality': None, 'complainant_ward': None, 'complainant_village': None, 'complainant_address': None}, results: [{'grievance_id': 'GR-20250918-KOJH-25BA-B', 'complainant_id': 'CM-20250918-KOJH-D215-B', 'grievance_categories': '["Environmental - Air Pollution"]', 'grievance_categories_alternative': '["Environmental - Noise Pollution", "Safety - Road Safety Provisions"]', 'follow_up_question': '["How many people in your household are affected by the dust and coughing, and for how long has this been happening?"]', 'grievance_summary': 'Dust from road works is entering the house and causing kids to cough.', 'grievance_description': 'dust everywhere in my house kids are coughing', 'grievance_claimed_amount': None, 'grievance_location': None, 'language_code': 'en', 'grievance_classification_status': 'pending', 'grievance_creation_date': datetime.datetime(2025, 9, 18, 14, 39, 2, 874986, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'grievance_modification_date': datetime.datetime(2025, 9, 18, 14, 39, 15, 488884, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'is_temporary': True, 'source': 'bot', 'complainant_full_name': None, 'complainant_phone': None, 'complainant_email': None, 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_municipality': None, 'complainant_ward': None, 'complainant_village': None, 'complainant_address': None}]
2025-09-18 14:39:17,082 - db_manager - INFO - update_complainant: Updating complainant with ID: CM-20250918-KOJH-D215-B
2025-09-18 14:39:17,082 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 14:39:17,086 - db_manager - INFO - Starting database transaction
2025-09-18 14:39:17,086 - db_manager - INFO - Executing encrypt_field: SELECT encode(pgp_sym_encrypt(%s, %s), 'hex') AS encrypted...
2025-09-18 14:39:17,087 - db_manager - INFO - encrypt_field completed in 0.01s. Rows: 1
2025-09-18 14:39:17,087 - db_manager - INFO - Transaction committed successfully
2025-09-18 14:39:17,087 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 14:39:17,087 - db_manager - DEBUG - encrypted phone number Not provided at encrypt_complainant_data: c30d040703021bf3c90c6c7b9dbc64d23d012c835a23f731578ba7a8b3e430f65e30651d45ec85f4e3693451aee3ea869fd1eb9276b9eb61e1f7a14bf819d9bb90daa80842e7b055585634744128
2025-09-18 14:39:17,087 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 14:39:17,092 - db_manager - INFO - Starting database transaction
2025-09-18 14:39:17,092 - db_manager - INFO - Executing encrypt_field: SELECT encode(pgp_sym_encrypt(%s, %s), 'hex') AS encrypted...
2025-09-18 14:39:17,092 - db_manager - INFO - encrypt_field completed in 0.01s. Rows: 1
2025-09-18 14:39:17,093 - db_manager - INFO - Transaction committed successfully
2025-09-18 14:39:17,093 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 14:39:17,093 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 14:39:17,097 - db_manager - INFO - Starting database transaction
2025-09-18 14:39:17,097 - db_manager - INFO - Executing encrypt_field: SELECT encode(pgp_sym_encrypt(%s, %s), 'hex') AS encrypted...
2025-09-18 14:39:17,098 - db_manager - INFO - encrypt_field completed in 0.01s. Rows: 1
2025-09-18 14:39:17,098 - db_manager - INFO - Transaction committed successfully
2025-09-18 14:39:17,098 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 14:39:17,098 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 14:39:17,102 - db_manager - INFO - Starting database transaction
2025-09-18 14:39:17,102 - db_manager - INFO - Executing encrypt_field: SELECT encode(pgp_sym_encrypt(%s, %s), 'hex') AS encrypted...
2025-09-18 14:39:17,103 - db_manager - INFO - encrypt_field completed in 0.01s. Rows: 1
2025-09-18 14:39:17,104 - db_manager - INFO - Transaction committed successfully
2025-09-18 14:39:17,104 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 14:39:17,104 - db_manager - DEBUG - phone number Not provided hashed to d83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f at hash_sensitive_data
2025-09-18 14:39:17,104 - db_manager - DEBUG - encrypted and hashed data at encrypt_and_hash_sensitive_data: {'complainant_full_name': 'c30d040703023b4edf0c28ae74fb61d23d016c11aba2b8b11832097a66317349d40bf238d1e6127adfe706c7df0c7278e8d35788c4137bb901eaac1d2bcae803f2b9d86b74be74986f45904c49ed', 'complainant_phone': 'c30d040703021bf3c90c6c7b9dbc64d23d012c835a23f731578ba7a8b3e430f65e30651d45ec85f4e3693451aee3ea869fd1eb9276b9eb61e1f7a14bf819d9bb90daa80842e7b055585634744128', 'complainant_email': 'c30d04070302287660c3d01a7e176ad23d015b67252e535ae5e234c1ed5fa198158007303b659af1a0edaf4e02a405e361f90d3f8458175b75b26f5de99885eaa39a24ca8ae9b6ba0baffe850fa2', 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_municipality': 'Birtamod Municipality', 'complainant_village': 'Slot_Skipped', 'complainant_address': 'c30d0407030204859785f051bcdf7cd23d01c2dd7848be1baa8f784948c67a4367062daa256c7baff900ad8259caa377cce5036810280574f081360664aeac8ac0ce87732f3fd7275b40303e6c11', 'complainant_phone_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'complainant_full_name_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'complainant_email_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f'}
2025-09-18 14:39:17,104 - db_manager - DEBUG - encrypted_data at update_complainant: {'complainant_full_name': 'c30d040703023b4edf0c28ae74fb61d23d016c11aba2b8b11832097a66317349d40bf238d1e6127adfe706c7df0c7278e8d35788c4137bb901eaac1d2bcae803f2b9d86b74be74986f45904c49ed', 'complainant_phone': 'c30d040703021bf3c90c6c7b9dbc64d23d012c835a23f731578ba7a8b3e430f65e30651d45ec85f4e3693451aee3ea869fd1eb9276b9eb61e1f7a14bf819d9bb90daa80842e7b055585634744128', 'complainant_email': 'c30d04070302287660c3d01a7e176ad23d015b67252e535ae5e234c1ed5fa198158007303b659af1a0edaf4e02a405e361f90d3f8458175b75b26f5de99885eaa39a24ca8ae9b6ba0baffe850fa2', 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_municipality': 'Birtamod Municipality', 'complainant_village': 'Slot_Skipped', 'complainant_address': 'c30d0407030204859785f051bcdf7cd23d01c2dd7848be1baa8f784948c67a4367062daa256c7baff900ad8259caa377cce5036810280574f081360664aeac8ac0ce87732f3fd7275b40303e6c11', 'complainant_phone_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'complainant_full_name_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'complainant_email_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f'}
2025-09-18 14:39:17,104 - db_manager - DEBUG - execute_update values: ('c30d040703023b4edf0c28ae74fb61d23d016c11aba2b8b11832097a66317349d40bf238d1e6127adfe706c7df0c7278e8d35788c4137bb901eaac1d2bcae803f2b9d86b74be74986f45904c49ed', 'c30d040703021bf3c90c6c7b9dbc64d23d012c835a23f731578ba7a8b3e430f65e30651d45ec85f4e3693451aee3ea869fd1eb9276b9eb61e1f7a14bf819d9bb90daa80842e7b055585634744128', 'c30d04070302287660c3d01a7e176ad23d015b67252e535ae5e234c1ed5fa198158007303b659af1a0edaf4e02a405e361f90d3f8458175b75b26f5de99885eaa39a24ca8ae9b6ba0baffe850fa2', 'Koshi', 'Jhapa', 'Birtamod Municipality', 'Slot_Skipped', 'c30d0407030204859785f051bcdf7cd23d01c2dd7848be1baa8f784948c67a4367062daa256c7baff900ad8259caa377cce5036810280574f081360664aeac8ac0ce87732f3fd7275b40303e6c11', 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'CM-20250918-KOJH-D215-B')
2025-09-18 14:39:17,104 - db_manager - DEBUG - execute_update query: UPDATE complainants SET complainant_full_name = %s, complainant_phone = %s, complainant_email = %s, complainant_province = %s, complainant_district = %s, complainant_municipality = %s, complainant_village = %s, complainant_address = %s, complainant_phone_hash = %s, complainant_full_name_hash = %s, complainant_email_hash = %s WHERE complainant_id = %s
2025-09-18 14:39:17,104 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 14:39:17,108 - db_manager - INFO - Starting database transaction
2025-09-18 14:39:17,108 - db_manager - INFO - execute_update: Executing update query: UPDATE complainants SET complainant_full_name = %s, complainant_phone = %s, complainant_email = %s, ...
2025-09-18 14:39:17,109 - db_manager - INFO - execute_update: Update completed in 0.01s. Affected rows: 1
2025-09-18 14:39:17,111 - db_manager - INFO - Transaction committed successfully
2025-09-18 14:39:17,111 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 14:39:17,112 - db_manager - INFO - Complainant updated in db: CM-20250918-KOJH-D215-B
2025-09-18 14:39:17,112 - db_manager - INFO - update_grievance: Updating grievance with ID: GR-20250918-KOJH-25BA-B
2025-09-18 14:39:17,112 - db_manager - DEBUG - execute_update values: ('dust everywhere in my house kids are coughing', 'GR-20250918-KOJH-25BA-B')
2025-09-18 14:39:17,112 - db_manager - DEBUG - execute_update query: 
                    UPDATE grievances 
                    SET grievance_description = %s, grievance_modification_date = CURRENT_TIMESTAMP
                    WHERE grievance_id = %s
                    RETURNING grievance_id
                
2025-09-18 14:39:17,112 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 14:39:17,116 - db_manager - INFO - Starting database transaction
2025-09-18 14:39:17,116 - db_manager - INFO - execute_update: Executing update query: 
                    UPDATE grievances 
                    SET grievance_description = %s, grievanc...
2025-09-18 14:39:17,117 - db_manager - INFO - execute_update: Update completed in 0.01s. Affected rows: 1
2025-09-18 14:39:17,119 - db_manager - INFO - Transaction committed successfully
2025-09-18 14:39:17,119 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 14:39:17,119 - db_manager - INFO - update_grievance: Updated grievance with ID: GR-20250918-KOJH-25BA-B, rows affected: 1
2025-09-18 14:39:17,119 - db_manager - INFO - Grievance updated in db: GR-20250918-KOJH-25BA-B
2025-09-18 14:39:17,119 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 14:39:17,124 - db_manager - INFO - Starting database transaction
2025-09-18 14:39:17,124 - db_manager - INFO - Executing get_grievance_files: 
            SELECT file_id, file_name, file_type, file_size, upload_timestamp
            FROM file...
2025-09-18 14:39:17,125 - db_manager - INFO - get_grievance_files completed in 0.01s. Rows: 0
2025-09-18 14:39:17,125 - db_manager - INFO - Transaction committed successfully
2025-09-18 14:39:17,125 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 14:39:17,125 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 14:39:17,131 - db_manager - INFO - Starting database transaction
2025-09-18 14:39:17,131 - db_manager - INFO - Executing get_grievance_files: 
            SELECT file_id, file_name, file_type, file_size, upload_timestamp
            FROM file...
2025-09-18 14:39:17,132 - db_manager - INFO - get_grievance_files completed in 0.01s. Rows: 0
2025-09-18 14:39:17,132 - db_manager - INFO - Transaction committed successfully
2025-09-18 14:39:17,132 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 14:39:17,175 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 14:39:17,180 - db_manager - INFO - Starting database transaction
2025-09-18 14:39:17,180 - db_manager - INFO - Executing get_grievance_by_id: 
                SELECT g.*, c.complainant_full_name, c.complainant_phone, c.complainant_email,
    ...
2025-09-18 14:39:17,182 - db_manager - INFO - get_grievance_by_id completed in 0.01s. Rows: 1
2025-09-18 14:39:17,182 - db_manager - INFO - Transaction committed successfully
2025-09-18 14:39:17,182 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 14:39:17,183 - db_manager - DEBUG - get_grievance_by_id: grievance_id: {'grievance_id': 'GR-20250918-KOJH-25BA-B', 'complainant_id': 'CM-20250918-KOJH-D215-B', 'grievance_categories': ['Environmental - Air Pollution'], 'grievance_categories_alternative': ['Environmental - Noise Pollution', 'Safety - Road Safety Provisions'], 'follow_up_question': ['How many people in your household are affected by the dust and coughing, and for how long has this been happening?'], 'grievance_summary': 'Dust from road works is entering the house and causing kids to cough.', 'grievance_description': 'dust everywhere in my house kids are coughing', 'grievance_claimed_amount': None, 'grievance_location': None, 'language_code': 'en', 'grievance_classification_status': 'pending', 'grievance_creation_date': datetime.datetime(2025, 9, 18, 14, 39, 2, 874986, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'grievance_modification_date': datetime.datetime(2025, 9, 18, 14, 39, 17, 116824, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'is_temporary': True, 'source': 'bot', 'complainant_full_name': 'c30d040703023b4edf0c28ae74fb61d23d016c11aba2b8b11832097a66317349d40bf238d1e6127adfe706c7df0c7278e8d35788c4137bb901eaac1d2bcae803f2b9d86b74be74986f45904c49ed', 'complainant_phone': 'c30d040703021bf3c90c6c7b9dbc64d23d012c835a23f731578ba7a8b3e430f65e30651d45ec85f4e3693451aee3ea869fd1eb9276b9eb61e1f7a14bf819d9bb90daa80842e7b055585634744128', 'complainant_email': 'c30d04070302287660c3d01a7e176ad23d015b67252e535ae5e234c1ed5fa198158007303b659af1a0edaf4e02a405e361f90d3f8458175b75b26f5de99885eaa39a24ca8ae9b6ba0baffe850fa2', 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_municipality': 'Birtamod Municipality', 'complainant_ward': None, 'complainant_village': 'Slot_Skipped', 'complainant_address': 'c30d0407030204859785f051bcdf7cd23d01c2dd7848be1baa8f784948c67a4367062daa256c7baff900ad8259caa377cce5036810280574f081360664aeac8ac0ce87732f3fd7275b40303e6c11'}, results: [{'grievance_id': 'GR-20250918-KOJH-25BA-B', 'complainant_id': 'CM-20250918-KOJH-D215-B', 'grievance_categories': '["Environmental - Air Pollution"]', 'grievance_categories_alternative': '["Environmental - Noise Pollution", "Safety - Road Safety Provisions"]', 'follow_up_question': '["How many people in your household are affected by the dust and coughing, and for how long has this been happening?"]', 'grievance_summary': 'Dust from road works is entering the house and causing kids to cough.', 'grievance_description': 'dust everywhere in my house kids are coughing', 'grievance_claimed_amount': None, 'grievance_location': None, 'language_code': 'en', 'grievance_classification_status': 'pending', 'grievance_creation_date': datetime.datetime(2025, 9, 18, 14, 39, 2, 874986, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'grievance_modification_date': datetime.datetime(2025, 9, 18, 14, 39, 17, 116824, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'is_temporary': True, 'source': 'bot', 'complainant_full_name': 'c30d040703023b4edf0c28ae74fb61d23d016c11aba2b8b11832097a66317349d40bf238d1e6127adfe706c7df0c7278e8d35788c4137bb901eaac1d2bcae803f2b9d86b74be74986f45904c49ed', 'complainant_phone': 'c30d040703021bf3c90c6c7b9dbc64d23d012c835a23f731578ba7a8b3e430f65e30651d45ec85f4e3693451aee3ea869fd1eb9276b9eb61e1f7a14bf819d9bb90daa80842e7b055585634744128', 'complainant_email': 'c30d04070302287660c3d01a7e176ad23d015b67252e535ae5e234c1ed5fa198158007303b659af1a0edaf4e02a405e361f90d3f8458175b75b26f5de99885eaa39a24ca8ae9b6ba0baffe850fa2', 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_municipality': 'Birtamod Municipality', 'complainant_ward': None, 'complainant_village': 'Slot_Skipped', 'complainant_address': 'c30d0407030204859785f051bcdf7cd23d01c2dd7848be1baa8f784948c67a4367062daa256c7baff900ad8259caa377cce5036810280574f081360664aeac8ac0ce87732f3fd7275b40303e6c11'}]
2025-09-18 14:51:00,049 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-18 14:51:00,049 - db_manager - INFO - Database manager initialized successfully
2025-09-18 14:51:00,049 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-18 14:51:00,049 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-18 14:51:00,049 - db_manager - INFO - Database manager initialized successfully
2025-09-18 14:51:00,049 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-18 14:51:00,050 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-18 14:51:00,050 - db_manager - INFO - Database manager initialized successfully
2025-09-18 14:51:00,050 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-18 14:51:00,050 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-18 14:51:00,050 - db_manager - INFO - Database manager initialized successfully
2025-09-18 14:51:00,050 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-18 14:51:00,050 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-18 14:51:00,050 - db_manager - INFO - Database manager initialized successfully
2025-09-18 14:51:00,050 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-18 14:51:00,050 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-18 14:51:00,050 - db_manager - INFO - Database manager initialized successfully
2025-09-18 14:51:00,050 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-18 14:51:00,050 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-18 14:51:00,050 - db_manager - INFO - Database manager initialized successfully
2025-09-18 14:51:00,050 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-18 14:51:00,050 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-18 14:51:00,050 - db_manager - INFO - Database manager initialized successfully
2025-09-18 14:51:00,050 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-18 14:51:00,050 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-18 14:51:00,050 - db_manager - INFO - Database manager initialized successfully
2025-09-18 14:51:00,050 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-18 14:51:00,050 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-18 14:51:00,050 - db_manager - INFO - Database manager initialized successfully
2025-09-18 14:51:00,050 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-18 14:53:17,605 - db_manager - INFO - create_complainant: Creating complainant with ID: CM-20250918-KOJH-CFB6-B
2025-09-18 14:53:17,606 - db_manager - DEBUG - encrypted and hashed data at encrypt_and_hash_sensitive_data: {'complainant_id': 'CM-20250918-KOJH-CFB6-B', 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_unique_id': 'CM-20250918-KOJH-CFB6-B'}
2025-09-18 14:53:17,606 - db_manager - DEBUG - query_keys at generate_query_string: dict_keys(['complainant_id', 'complainant_province', 'complainant_district', 'complainant_unique_id'])
2025-09-18 14:53:17,606 - db_manager - DEBUG - Generated query: INSERT INTO complainants (complainant_id, complainant_province, complainant_district, complainant_unique_id) VALUES (%s, %s, %s, %s)
2025-09-18 14:53:17,606 - db_manager - DEBUG - len of query_keys: 4
2025-09-18 14:53:17,606 - db_manager - DEBUG - Generated query: INSERT INTO complainants (complainant_id, complainant_province, complainant_district, complainant_unique_id) VALUES (%s, %s, %s, %s)
2025-09-18 14:53:17,606 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 14:53:17,613 - db_manager - INFO - Starting database transaction
2025-09-18 14:53:17,615 - db_manager - INFO - Transaction committed successfully
2025-09-18 14:53:17,616 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 14:53:17,616 - db_manager - INFO - create_complainant: Successfully created complainant with ID: CM-20250918-KOJH-CFB6-B
2025-09-18 14:53:17,616 - db_manager - INFO - create_grievance: Creating grievance with data: {'grievance_id': 'GR-20250918-KOJH-A761-B', 'complainant_id': 'CM-20250918-KOJH-CFB6-B', 'grievance_description': 'dust everywhere in my house kids are coughing', 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_office': None, 'source': 'bot', 'complainant_unique_id': 'CM-20250918-KOJH-CFB6-B'}
2025-09-18 14:53:17,616 - db_manager - INFO - create_grievance: Creating grievance with ID: GR-20250918-KOJH-A761-B
2025-09-18 14:53:17,616 - db_manager - INFO - create_grievance: Creating grievance with allowed fields: ['grievance_id', 'complainant_id', 'grievance_categories', 'grievance_categories_alternative', 'follow_up_question', 'grievance_summary', 'grievance_description', 'grievance_claimed_amount', 'grievance_location', 'is_temporary', 'source', 'language_code', 'grievance_classification_status']
2025-09-18 14:53:17,616 - db_manager - DEBUG - query_keys at generate_query_string: dict_keys(['grievance_id', 'complainant_id', 'grievance_description', 'source'])
2025-09-18 14:53:17,616 - db_manager - DEBUG - Generated query: INSERT INTO grievances (grievance_id, complainant_id, grievance_description, source) VALUES (%s, %s, %s, %s) RETURNING grievance_id
2025-09-18 14:53:17,616 - db_manager - DEBUG - len of query_keys: 4
2025-09-18 14:53:17,616 - db_manager - DEBUG - Generated query: INSERT INTO grievances (grievance_id, complainant_id, grievance_description, source) VALUES (%s, %s, %s, %s) RETURNING grievance_id
2025-09-18 14:53:17,616 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 14:53:17,622 - db_manager - INFO - Starting database transaction
2025-09-18 14:53:17,627 - db_manager - INFO - Transaction committed successfully
2025-09-18 14:53:17,627 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 14:53:17,627 - db_manager - INFO - create_grievance: Successfully created grievance with ID: GR-20250918-KOJH-A761-B
2025-09-18 14:53:36,929 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 14:53:36,936 - db_manager - INFO - Starting database transaction
2025-09-18 14:53:36,936 - db_manager - INFO - Executing get_complainant_by_id: 
            SELECT complainant_id, complainant_unique_id, complainant_full_name,    complainant_pho...
2025-09-18 14:53:36,937 - db_manager - INFO - get_complainant_by_id completed in 0.01s. Rows: 1
2025-09-18 14:53:36,937 - db_manager - INFO - Transaction committed successfully
2025-09-18 14:53:36,937 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 14:53:36,938 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 14:53:36,944 - db_manager - INFO - Starting database transaction
2025-09-18 14:53:36,944 - db_manager - INFO - Executing get_grievance_by_id: 
                SELECT g.*, c.complainant_full_name, c.complainant_phone, c.complainant_email,
    ...
2025-09-18 14:53:36,946 - db_manager - INFO - get_grievance_by_id completed in 0.01s. Rows: 1
2025-09-18 14:53:36,947 - db_manager - INFO - Transaction committed successfully
2025-09-18 14:53:36,947 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 14:53:36,947 - db_manager - DEBUG - get_grievance_by_id: grievance_id: {'grievance_id': 'GR-20250918-KOJH-A761-B', 'complainant_id': 'CM-20250918-KOJH-CFB6-B', 'grievance_categories': ['Environmental - Air Pollution'], 'grievance_categories_alternative': [], 'follow_up_question': ['How many people in your household are affected by dust and coughing, and for how long has this been happening?'], 'grievance_summary': 'Dust from road works is entering my home and making my children cough.', 'grievance_description': 'dust everywhere in my house kids are coughing', 'grievance_claimed_amount': None, 'grievance_location': None, 'language_code': 'en', 'grievance_classification_status': 'pending', 'grievance_creation_date': datetime.datetime(2025, 9, 18, 14, 53, 17, 623237, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'grievance_modification_date': datetime.datetime(2025, 9, 18, 14, 53, 35, 460843, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'is_temporary': True, 'source': 'bot', 'complainant_full_name': None, 'complainant_phone': None, 'complainant_email': None, 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_municipality': None, 'complainant_ward': None, 'complainant_village': None, 'complainant_address': None}, results: [{'grievance_id': 'GR-20250918-KOJH-A761-B', 'complainant_id': 'CM-20250918-KOJH-CFB6-B', 'grievance_categories': '["Environmental - Air Pollution"]', 'grievance_categories_alternative': '[]', 'follow_up_question': '["How many people in your household are affected by dust and coughing, and for how long has this been happening?"]', 'grievance_summary': 'Dust from road works is entering my home and making my children cough.', 'grievance_description': 'dust everywhere in my house kids are coughing', 'grievance_claimed_amount': None, 'grievance_location': None, 'language_code': 'en', 'grievance_classification_status': 'pending', 'grievance_creation_date': datetime.datetime(2025, 9, 18, 14, 53, 17, 623237, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'grievance_modification_date': datetime.datetime(2025, 9, 18, 14, 53, 35, 460843, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'is_temporary': True, 'source': 'bot', 'complainant_full_name': None, 'complainant_phone': None, 'complainant_email': None, 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_municipality': None, 'complainant_ward': None, 'complainant_village': None, 'complainant_address': None}]
2025-09-18 14:53:36,947 - db_manager - INFO - update_complainant: Updating complainant with ID: CM-20250918-KOJH-CFB6-B
2025-09-18 14:53:36,947 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 14:53:36,953 - db_manager - INFO - Starting database transaction
2025-09-18 14:53:36,953 - db_manager - INFO - Executing encrypt_field: SELECT encode(pgp_sym_encrypt(%s, %s), 'hex') AS encrypted...
2025-09-18 14:53:36,957 - db_manager - INFO - encrypt_field completed in 0.01s. Rows: 1
2025-09-18 14:53:36,958 - db_manager - INFO - Transaction committed successfully
2025-09-18 14:53:36,958 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 14:53:36,958 - db_manager - DEBUG - encrypted phone number Not provided at encrypt_complainant_data: c30d040703021d386f9b88a7be9a62d23d0198936818ddba8c6db1f1d68c113a92f4259e5555a512a5d0379bcc80621b145263a596b3af584c1c49828a7a1a6228d109c11f3c823d7a43017165ab
2025-09-18 14:53:36,958 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 14:53:36,963 - db_manager - INFO - Starting database transaction
2025-09-18 14:53:36,963 - db_manager - INFO - Executing encrypt_field: SELECT encode(pgp_sym_encrypt(%s, %s), 'hex') AS encrypted...
2025-09-18 14:53:36,964 - db_manager - INFO - encrypt_field completed in 0.01s. Rows: 1
2025-09-18 14:53:36,965 - db_manager - INFO - Transaction committed successfully
2025-09-18 14:53:36,965 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 14:53:36,965 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 14:53:36,970 - db_manager - INFO - Starting database transaction
2025-09-18 14:53:36,971 - db_manager - INFO - Executing encrypt_field: SELECT encode(pgp_sym_encrypt(%s, %s), 'hex') AS encrypted...
2025-09-18 14:53:36,972 - db_manager - INFO - encrypt_field completed in 0.01s. Rows: 1
2025-09-18 14:53:36,972 - db_manager - INFO - Transaction committed successfully
2025-09-18 14:53:36,972 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 14:53:36,972 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 14:53:36,977 - db_manager - INFO - Starting database transaction
2025-09-18 14:53:36,978 - db_manager - INFO - Executing encrypt_field: SELECT encode(pgp_sym_encrypt(%s, %s), 'hex') AS encrypted...
2025-09-18 14:53:36,979 - db_manager - INFO - encrypt_field completed in 0.01s. Rows: 1
2025-09-18 14:53:36,980 - db_manager - INFO - Transaction committed successfully
2025-09-18 14:53:36,980 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 14:53:36,980 - db_manager - DEBUG - phone number Not provided hashed to d83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f at hash_sensitive_data
2025-09-18 14:53:36,980 - db_manager - DEBUG - encrypted and hashed data at encrypt_and_hash_sensitive_data: {'complainant_full_name': 'c30d04070302e05df628b617664772d23d01e0608a0a7f57bf69d01a4fb69a74edc55febc14c258949989b0cb1dbd463b2e37d95f182919f005b8489aa57317e8a1f4434af1eac60fbb38e94d52b', 'complainant_phone': 'c30d040703021d386f9b88a7be9a62d23d0198936818ddba8c6db1f1d68c113a92f4259e5555a512a5d0379bcc80621b145263a596b3af584c1c49828a7a1a6228d109c11f3c823d7a43017165ab', 'complainant_email': 'c30d04070302a390806e2d36486b65d23d0180fd4e770bd29083bf813cec232671dfbdd8ab1e6512c5357f532ff11958d6c633d115f1ed118da6fa2fa01fdb07d1c5f97e79d77f4e2c1bf2712eb6', 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_municipality': 'Birtamod Municipality', 'complainant_village': 'Slot_Skipped', 'complainant_address': 'c30d04070302f2076d19b616131f65d23d01586d19684b94730acd2d2c8cacb45b1aa1c49ed0e5fe9c2aab15402c25981c02634b23f2fce0aeae11ee4a2f477941b381899999adce8ce3323d4b5f', 'complainant_phone_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'complainant_email_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'complainant_full_name_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f'}
2025-09-18 14:53:36,980 - db_manager - DEBUG - encrypted_data at update_complainant: {'complainant_full_name': 'c30d04070302e05df628b617664772d23d01e0608a0a7f57bf69d01a4fb69a74edc55febc14c258949989b0cb1dbd463b2e37d95f182919f005b8489aa57317e8a1f4434af1eac60fbb38e94d52b', 'complainant_phone': 'c30d040703021d386f9b88a7be9a62d23d0198936818ddba8c6db1f1d68c113a92f4259e5555a512a5d0379bcc80621b145263a596b3af584c1c49828a7a1a6228d109c11f3c823d7a43017165ab', 'complainant_email': 'c30d04070302a390806e2d36486b65d23d0180fd4e770bd29083bf813cec232671dfbdd8ab1e6512c5357f532ff11958d6c633d115f1ed118da6fa2fa01fdb07d1c5f97e79d77f4e2c1bf2712eb6', 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_municipality': 'Birtamod Municipality', 'complainant_village': 'Slot_Skipped', 'complainant_address': 'c30d04070302f2076d19b616131f65d23d01586d19684b94730acd2d2c8cacb45b1aa1c49ed0e5fe9c2aab15402c25981c02634b23f2fce0aeae11ee4a2f477941b381899999adce8ce3323d4b5f', 'complainant_phone_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'complainant_email_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'complainant_full_name_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f'}
2025-09-18 14:53:36,980 - db_manager - DEBUG - execute_update values: ('c30d04070302e05df628b617664772d23d01e0608a0a7f57bf69d01a4fb69a74edc55febc14c258949989b0cb1dbd463b2e37d95f182919f005b8489aa57317e8a1f4434af1eac60fbb38e94d52b', 'c30d040703021d386f9b88a7be9a62d23d0198936818ddba8c6db1f1d68c113a92f4259e5555a512a5d0379bcc80621b145263a596b3af584c1c49828a7a1a6228d109c11f3c823d7a43017165ab', 'c30d04070302a390806e2d36486b65d23d0180fd4e770bd29083bf813cec232671dfbdd8ab1e6512c5357f532ff11958d6c633d115f1ed118da6fa2fa01fdb07d1c5f97e79d77f4e2c1bf2712eb6', 'Koshi', 'Jhapa', 'Birtamod Municipality', 'Slot_Skipped', 'c30d04070302f2076d19b616131f65d23d01586d19684b94730acd2d2c8cacb45b1aa1c49ed0e5fe9c2aab15402c25981c02634b23f2fce0aeae11ee4a2f477941b381899999adce8ce3323d4b5f', 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'CM-20250918-KOJH-CFB6-B')
2025-09-18 14:53:36,980 - db_manager - DEBUG - execute_update query: UPDATE complainants SET complainant_full_name = %s, complainant_phone = %s, complainant_email = %s, complainant_province = %s, complainant_district = %s, complainant_municipality = %s, complainant_village = %s, complainant_address = %s, complainant_phone_hash = %s, complainant_email_hash = %s, complainant_full_name_hash = %s WHERE complainant_id = %s
2025-09-18 14:53:36,980 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 14:53:36,985 - db_manager - INFO - Starting database transaction
2025-09-18 14:53:36,985 - db_manager - INFO - execute_update: Executing update query: UPDATE complainants SET complainant_full_name = %s, complainant_phone = %s, complainant_email = %s, ...
2025-09-18 14:53:36,987 - db_manager - INFO - execute_update: Update completed in 0.01s. Affected rows: 1
2025-09-18 14:53:36,988 - db_manager - INFO - Transaction committed successfully
2025-09-18 14:53:36,989 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 14:53:36,989 - db_manager - INFO - Complainant updated in db: CM-20250918-KOJH-CFB6-B
2025-09-18 14:53:36,989 - db_manager - INFO - update_grievance: Updating grievance with ID: GR-20250918-KOJH-A761-B
2025-09-18 14:53:36,989 - db_manager - DEBUG - execute_update values: ('dust everywhere in my house kids are coughing', 'GR-20250918-KOJH-A761-B')
2025-09-18 14:53:36,989 - db_manager - DEBUG - execute_update query: 
                    UPDATE grievances 
                    SET grievance_description = %s, grievance_modification_date = CURRENT_TIMESTAMP
                    WHERE grievance_id = %s
                    RETURNING grievance_id
                
2025-09-18 14:53:36,989 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 14:53:36,994 - db_manager - INFO - Starting database transaction
2025-09-18 14:53:36,995 - db_manager - INFO - execute_update: Executing update query: 
                    UPDATE grievances 
                    SET grievance_description = %s, grievanc...
2025-09-18 14:53:36,997 - db_manager - INFO - execute_update: Update completed in 0.01s. Affected rows: 1
2025-09-18 14:53:36,999 - db_manager - INFO - Transaction committed successfully
2025-09-18 14:53:36,999 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 14:53:36,999 - db_manager - INFO - update_grievance: Updated grievance with ID: GR-20250918-KOJH-A761-B, rows affected: 1
2025-09-18 14:53:37,000 - db_manager - INFO - Grievance updated in db: GR-20250918-KOJH-A761-B
2025-09-18 14:53:37,000 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 14:53:37,005 - db_manager - INFO - Starting database transaction
2025-09-18 14:53:37,006 - db_manager - INFO - Executing get_grievance_files: 
            SELECT file_id, file_name, file_type, file_size, upload_timestamp
            FROM file...
2025-09-18 14:53:37,007 - db_manager - INFO - get_grievance_files completed in 0.01s. Rows: 0
2025-09-18 14:53:37,007 - db_manager - INFO - Transaction committed successfully
2025-09-18 14:53:37,008 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 14:53:37,008 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 14:53:37,013 - db_manager - INFO - Starting database transaction
2025-09-18 14:53:37,013 - db_manager - INFO - Executing get_grievance_files: 
            SELECT file_id, file_name, file_type, file_size, upload_timestamp
            FROM file...
2025-09-18 14:53:37,014 - db_manager - INFO - get_grievance_files completed in 0.01s. Rows: 0
2025-09-18 14:53:37,014 - db_manager - INFO - Transaction committed successfully
2025-09-18 14:53:37,014 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 14:53:37,057 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 14:53:37,063 - db_manager - INFO - Starting database transaction
2025-09-18 14:53:37,063 - db_manager - INFO - Executing get_grievance_by_id: 
                SELECT g.*, c.complainant_full_name, c.complainant_phone, c.complainant_email,
    ...
2025-09-18 14:53:37,065 - db_manager - INFO - get_grievance_by_id completed in 0.01s. Rows: 1
2025-09-18 14:53:37,065 - db_manager - INFO - Transaction committed successfully
2025-09-18 14:53:37,065 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 14:53:37,066 - db_manager - DEBUG - get_grievance_by_id: grievance_id: {'grievance_id': 'GR-20250918-KOJH-A761-B', 'complainant_id': 'CM-20250918-KOJH-CFB6-B', 'grievance_categories': ['Environmental - Air Pollution'], 'grievance_categories_alternative': [], 'follow_up_question': ['How many people in your household are affected by dust and coughing, and for how long has this been happening?'], 'grievance_summary': 'Dust from road works is entering my home and making my children cough.', 'grievance_description': 'dust everywhere in my house kids are coughing', 'grievance_claimed_amount': None, 'grievance_location': None, 'language_code': 'en', 'grievance_classification_status': 'pending', 'grievance_creation_date': datetime.datetime(2025, 9, 18, 14, 53, 17, 623237, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'grievance_modification_date': datetime.datetime(2025, 9, 18, 14, 53, 36, 995316, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'is_temporary': True, 'source': 'bot', 'complainant_full_name': 'c30d04070302e05df628b617664772d23d01e0608a0a7f57bf69d01a4fb69a74edc55febc14c258949989b0cb1dbd463b2e37d95f182919f005b8489aa57317e8a1f4434af1eac60fbb38e94d52b', 'complainant_phone': 'c30d040703021d386f9b88a7be9a62d23d0198936818ddba8c6db1f1d68c113a92f4259e5555a512a5d0379bcc80621b145263a596b3af584c1c49828a7a1a6228d109c11f3c823d7a43017165ab', 'complainant_email': 'c30d04070302a390806e2d36486b65d23d0180fd4e770bd29083bf813cec232671dfbdd8ab1e6512c5357f532ff11958d6c633d115f1ed118da6fa2fa01fdb07d1c5f97e79d77f4e2c1bf2712eb6', 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_municipality': 'Birtamod Municipality', 'complainant_ward': None, 'complainant_village': 'Slot_Skipped', 'complainant_address': 'c30d04070302f2076d19b616131f65d23d01586d19684b94730acd2d2c8cacb45b1aa1c49ed0e5fe9c2aab15402c25981c02634b23f2fce0aeae11ee4a2f477941b381899999adce8ce3323d4b5f'}, results: [{'grievance_id': 'GR-20250918-KOJH-A761-B', 'complainant_id': 'CM-20250918-KOJH-CFB6-B', 'grievance_categories': '["Environmental - Air Pollution"]', 'grievance_categories_alternative': '[]', 'follow_up_question': '["How many people in your household are affected by dust and coughing, and for how long has this been happening?"]', 'grievance_summary': 'Dust from road works is entering my home and making my children cough.', 'grievance_description': 'dust everywhere in my house kids are coughing', 'grievance_claimed_amount': None, 'grievance_location': None, 'language_code': 'en', 'grievance_classification_status': 'pending', 'grievance_creation_date': datetime.datetime(2025, 9, 18, 14, 53, 17, 623237, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'grievance_modification_date': datetime.datetime(2025, 9, 18, 14, 53, 36, 995316, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'is_temporary': True, 'source': 'bot', 'complainant_full_name': 'c30d04070302e05df628b617664772d23d01e0608a0a7f57bf69d01a4fb69a74edc55febc14c258949989b0cb1dbd463b2e37d95f182919f005b8489aa57317e8a1f4434af1eac60fbb38e94d52b', 'complainant_phone': 'c30d040703021d386f9b88a7be9a62d23d0198936818ddba8c6db1f1d68c113a92f4259e5555a512a5d0379bcc80621b145263a596b3af584c1c49828a7a1a6228d109c11f3c823d7a43017165ab', 'complainant_email': 'c30d04070302a390806e2d36486b65d23d0180fd4e770bd29083bf813cec232671dfbdd8ab1e6512c5357f532ff11958d6c633d115f1ed118da6fa2fa01fdb07d1c5f97e79d77f4e2c1bf2712eb6', 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_municipality': 'Birtamod Municipality', 'complainant_ward': None, 'complainant_village': 'Slot_Skipped', 'complainant_address': 'c30d04070302f2076d19b616131f65d23d01586d19684b94730acd2d2c8cacb45b1aa1c49ed0e5fe9c2aab15402c25981c02634b23f2fce0aeae11ee4a2f477941b381899999adce8ce3323d4b5f'}]
2025-09-18 14:53:40,539 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 14:53:40,545 - db_manager - INFO - Starting database transaction
2025-09-18 14:53:40,545 - db_manager - INFO - Executing get_complainant_id_from_grievance_id: 
            SELECT complainant_id
            FROM grievances
            WHERE grievance_id = %s
 ...
2025-09-18 14:53:40,546 - db_manager - INFO - get_complainant_id_from_grievance_id completed in 0.01s. Rows: 1
2025-09-18 14:53:40,546 - db_manager - INFO - Transaction committed successfully
2025-09-18 14:53:40,546 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 14:53:40,547 - db_manager - INFO - update_complainant: Updating complainant with ID: CM-20250918-KOJH-CFB6-B
2025-09-18 14:53:40,547 - db_manager - DEBUG - encrypted and hashed data at encrypt_and_hash_sensitive_data: {}
2025-09-18 14:53:40,547 - db_manager - DEBUG - encrypted_data at update_complainant: {}
2025-09-18 14:53:40,547 - db_manager - DEBUG - No complainant field to update
2025-09-18 14:53:40,547 - db_manager - INFO - Complainant updated in db: GR-20250918-KOJH-A761-B
2025-09-18 14:53:40,547 - db_manager - INFO - update_grievance: Updating grievance with ID: GR-20250918-KOJH-A761-B
2025-09-18 14:53:40,547 - db_manager - DEBUG - execute_update values: ('["Environmental - Air Pollution"]', 'Dust from road works is entering my home and making my children cough.', 'GR-20250918-KOJH-A761-B')
2025-09-18 14:53:40,547 - db_manager - DEBUG - execute_update query: 
                    UPDATE grievances 
                    SET grievance_categories = %s, grievance_summary = %s, grievance_modification_date = CURRENT_TIMESTAMP
                    WHERE grievance_id = %s
                    RETURNING grievance_id
                
2025-09-18 14:53:40,547 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 14:53:40,553 - db_manager - INFO - Starting database transaction
2025-09-18 14:53:40,553 - db_manager - INFO - execute_update: Executing update query: 
                    UPDATE grievances 
                    SET grievance_categories = %s, grievance...
2025-09-18 14:53:40,554 - db_manager - INFO - execute_update: Update completed in 0.01s. Affected rows: 1
2025-09-18 14:53:40,558 - db_manager - INFO - Transaction committed successfully
2025-09-18 14:53:40,558 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 14:53:40,559 - db_manager - INFO - update_grievance: Updated grievance with ID: GR-20250918-KOJH-A761-B, rows affected: 1
2025-09-18 14:53:40,559 - db_manager - INFO - Grievance updated in db: GR-20250918-KOJH-A761-B
2025-09-18 14:53:40,600 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 14:53:40,606 - db_manager - INFO - Starting database transaction
2025-09-18 14:53:40,606 - db_manager - INFO - Executing get_grievance_files: 
            SELECT file_id, file_name, file_type, file_size, upload_timestamp
            FROM file...
2025-09-18 14:53:40,607 - db_manager - INFO - get_grievance_files completed in 0.01s. Rows: 0
2025-09-18 14:53:40,607 - db_manager - INFO - Transaction committed successfully
2025-09-18 14:53:40,607 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 14:53:40,607 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 14:53:40,612 - db_manager - INFO - Starting database transaction
2025-09-18 14:53:40,612 - db_manager - INFO - Executing get_complainant_by_id: 
            SELECT complainant_id, complainant_unique_id, complainant_full_name,    complainant_pho...
2025-09-18 14:53:40,613 - db_manager - INFO - get_complainant_by_id completed in 0.01s. Rows: 1
2025-09-18 14:53:40,613 - db_manager - INFO - Transaction committed successfully
2025-09-18 14:53:40,613 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 14:53:40,614 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 14:53:40,618 - db_manager - INFO - Starting database transaction
2025-09-18 14:53:40,618 - db_manager - INFO - Executing decrypt_field: SELECT pgp_sym_decrypt(decode(%s, 'hex'), %s) AS decrypted...
2025-09-18 14:53:40,619 - db_manager - INFO - decrypt_field completed in 0.01s. Rows: 1
2025-09-18 14:53:40,619 - db_manager - INFO - Transaction committed successfully
2025-09-18 14:53:40,619 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 14:53:40,619 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 14:53:40,624 - db_manager - INFO - Starting database transaction
2025-09-18 14:53:40,624 - db_manager - INFO - Executing decrypt_field: SELECT pgp_sym_decrypt(decode(%s, 'hex'), %s) AS decrypted...
2025-09-18 14:53:40,625 - db_manager - INFO - decrypt_field completed in 0.01s. Rows: 1
2025-09-18 14:53:40,625 - db_manager - INFO - Transaction committed successfully
2025-09-18 14:53:40,625 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 14:53:40,626 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 14:53:40,631 - db_manager - INFO - Starting database transaction
2025-09-18 14:53:40,631 - db_manager - INFO - Executing decrypt_field: SELECT pgp_sym_decrypt(decode(%s, 'hex'), %s) AS decrypted...
2025-09-18 14:53:40,632 - db_manager - INFO - decrypt_field completed in 0.01s. Rows: 1
2025-09-18 14:53:40,632 - db_manager - INFO - Transaction committed successfully
2025-09-18 14:53:40,632 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 14:53:40,632 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 14:53:40,637 - db_manager - INFO - Starting database transaction
2025-09-18 14:53:40,637 - db_manager - INFO - Executing decrypt_field: SELECT pgp_sym_decrypt(decode(%s, 'hex'), %s) AS decrypted...
2025-09-18 14:53:40,638 - db_manager - INFO - decrypt_field completed in 0.01s. Rows: 1
2025-09-18 14:53:40,639 - db_manager - INFO - Transaction committed successfully
2025-09-18 14:53:40,639 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 14:53:40,639 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 14:53:40,644 - db_manager - INFO - Starting database transaction
2025-09-18 14:53:40,644 - db_manager - INFO - Executing get_grievance_by_id: 
                SELECT g.*, c.complainant_full_name, c.complainant_phone, c.complainant_email,
    ...
2025-09-18 14:53:40,646 - db_manager - INFO - get_grievance_by_id completed in 0.01s. Rows: 1
2025-09-18 14:53:40,646 - db_manager - INFO - Transaction committed successfully
2025-09-18 14:53:40,646 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 14:53:40,646 - db_manager - DEBUG - get_grievance_by_id: grievance_id: {'grievance_id': 'GR-20250918-KOJH-A761-B', 'complainant_id': 'CM-20250918-KOJH-CFB6-B', 'grievance_categories': ['Environmental - Air Pollution'], 'grievance_categories_alternative': [], 'follow_up_question': ['How many people in your household are affected by dust and coughing, and for how long has this been happening?'], 'grievance_summary': 'Dust from road works is entering my home and making my children cough.', 'grievance_description': 'dust everywhere in my house kids are coughing', 'grievance_claimed_amount': None, 'grievance_location': None, 'language_code': 'en', 'grievance_classification_status': 'pending', 'grievance_creation_date': datetime.datetime(2025, 9, 18, 14, 53, 17, 623237, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'grievance_modification_date': datetime.datetime(2025, 9, 18, 14, 53, 40, 553302, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'is_temporary': True, 'source': 'bot', 'complainant_full_name': 'c30d04070302e05df628b617664772d23d01e0608a0a7f57bf69d01a4fb69a74edc55febc14c258949989b0cb1dbd463b2e37d95f182919f005b8489aa57317e8a1f4434af1eac60fbb38e94d52b', 'complainant_phone': 'c30d040703021d386f9b88a7be9a62d23d0198936818ddba8c6db1f1d68c113a92f4259e5555a512a5d0379bcc80621b145263a596b3af584c1c49828a7a1a6228d109c11f3c823d7a43017165ab', 'complainant_email': 'c30d04070302a390806e2d36486b65d23d0180fd4e770bd29083bf813cec232671dfbdd8ab1e6512c5357f532ff11958d6c633d115f1ed118da6fa2fa01fdb07d1c5f97e79d77f4e2c1bf2712eb6', 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_municipality': 'Birtamod Municipality', 'complainant_ward': None, 'complainant_village': 'Slot_Skipped', 'complainant_address': 'c30d04070302f2076d19b616131f65d23d01586d19684b94730acd2d2c8cacb45b1aa1c49ed0e5fe9c2aab15402c25981c02634b23f2fce0aeae11ee4a2f477941b381899999adce8ce3323d4b5f'}, results: [{'grievance_id': 'GR-20250918-KOJH-A761-B', 'complainant_id': 'CM-20250918-KOJH-CFB6-B', 'grievance_categories': '["Environmental - Air Pollution"]', 'grievance_categories_alternative': '[]', 'follow_up_question': '["How many people in your household are affected by dust and coughing, and for how long has this been happening?"]', 'grievance_summary': 'Dust from road works is entering my home and making my children cough.', 'grievance_description': 'dust everywhere in my house kids are coughing', 'grievance_claimed_amount': None, 'grievance_location': None, 'language_code': 'en', 'grievance_classification_status': 'pending', 'grievance_creation_date': datetime.datetime(2025, 9, 18, 14, 53, 17, 623237, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'grievance_modification_date': datetime.datetime(2025, 9, 18, 14, 53, 40, 553302, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'is_temporary': True, 'source': 'bot', 'complainant_full_name': 'c30d04070302e05df628b617664772d23d01e0608a0a7f57bf69d01a4fb69a74edc55febc14c258949989b0cb1dbd463b2e37d95f182919f005b8489aa57317e8a1f4434af1eac60fbb38e94d52b', 'complainant_phone': 'c30d040703021d386f9b88a7be9a62d23d0198936818ddba8c6db1f1d68c113a92f4259e5555a512a5d0379bcc80621b145263a596b3af584c1c49828a7a1a6228d109c11f3c823d7a43017165ab', 'complainant_email': 'c30d04070302a390806e2d36486b65d23d0180fd4e770bd29083bf813cec232671dfbdd8ab1e6512c5357f532ff11958d6c633d115f1ed118da6fa2fa01fdb07d1c5f97e79d77f4e2c1bf2712eb6', 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_municipality': 'Birtamod Municipality', 'complainant_ward': None, 'complainant_village': 'Slot_Skipped', 'complainant_address': 'c30d04070302f2076d19b616131f65d23d01586d19684b94730acd2d2c8cacb45b1aa1c49ed0e5fe9c2aab15402c25981c02634b23f2fce0aeae11ee4a2f477941b381899999adce8ce3323d4b5f'}]
2025-09-18 14:53:40,646 - db_manager - INFO - update_complainant: Updating complainant with ID: CM-20250918-KOJH-CFB6-B
2025-09-18 14:53:40,646 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 14:53:40,651 - db_manager - INFO - Starting database transaction
2025-09-18 14:53:40,652 - db_manager - INFO - Executing encrypt_field: SELECT encode(pgp_sym_encrypt(%s, %s), 'hex') AS encrypted...
2025-09-18 14:53:40,653 - db_manager - INFO - encrypt_field completed in 0.01s. Rows: 1
2025-09-18 14:53:40,653 - db_manager - INFO - Transaction committed successfully
2025-09-18 14:53:40,653 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 14:53:40,653 - db_manager - DEBUG - encrypted phone number Not provided at encrypt_complainant_data: c30d040703023f5493497e36063366d23d0149a859da6bad5c7bcaa55d5a74f90a324333a2b20df0a45796c0c242a8415ec072a0afb655bc7872ff6a1a057f848451e976dd8bb99b2645c4faa048
2025-09-18 14:53:40,653 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 14:53:40,658 - db_manager - INFO - Starting database transaction
2025-09-18 14:53:40,658 - db_manager - INFO - Executing encrypt_field: SELECT encode(pgp_sym_encrypt(%s, %s), 'hex') AS encrypted...
2025-09-18 14:53:40,659 - db_manager - INFO - encrypt_field completed in 0.01s. Rows: 1
2025-09-18 14:53:40,659 - db_manager - INFO - Transaction committed successfully
2025-09-18 14:53:40,659 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 14:53:40,659 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 14:53:40,665 - db_manager - INFO - Starting database transaction
2025-09-18 14:53:40,665 - db_manager - INFO - Executing encrypt_field: SELECT encode(pgp_sym_encrypt(%s, %s), 'hex') AS encrypted...
2025-09-18 14:53:40,666 - db_manager - INFO - encrypt_field completed in 0.01s. Rows: 1
2025-09-18 14:53:40,666 - db_manager - INFO - Transaction committed successfully
2025-09-18 14:53:40,666 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 14:53:40,666 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 14:53:40,671 - db_manager - INFO - Starting database transaction
2025-09-18 14:53:40,671 - db_manager - INFO - Executing encrypt_field: SELECT encode(pgp_sym_encrypt(%s, %s), 'hex') AS encrypted...
2025-09-18 14:53:40,672 - db_manager - INFO - encrypt_field completed in 0.01s. Rows: 1
2025-09-18 14:53:40,672 - db_manager - INFO - Transaction committed successfully
2025-09-18 14:53:40,672 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 14:53:40,672 - db_manager - DEBUG - phone number Not provided hashed to d83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f at hash_sensitive_data
2025-09-18 14:53:40,672 - db_manager - DEBUG - encrypted and hashed data at encrypt_and_hash_sensitive_data: {'complainant_full_name': 'c30d0407030205bd66b91b3de6d873d23d017e8b8f617b9987bf48d6fd34b1dc288f2a7877b0a01be795d1d63183464507ca914d244574afceb9bf631545bb84d159c5396abefa5d1a674b3f0857', 'complainant_phone': 'c30d040703023f5493497e36063366d23d0149a859da6bad5c7bcaa55d5a74f90a324333a2b20df0a45796c0c242a8415ec072a0afb655bc7872ff6a1a057f848451e976dd8bb99b2645c4faa048', 'complainant_email': 'c30d04070302184191374a5dc4d463d23d015b41892c77f42d17fd921c89006a71d6cd40a934769c0ba964b7b8d13a6e7f4c270b4439d6c1c3393ec025dd267f0bfc69c4b8b149d075370cbfc107', 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_municipality': 'Birtamod Municipality', 'complainant_village': 'Slot_Skipped', 'complainant_address': 'c30d0407030226e5c597c19688777bd23d01e707474683874d039ca30175d085ae8fc54b8e96a1f988bda308c633b2fd48125cbab54226e5e38cd1dd1cdd340eb5348252cad3a90b3a0ca3f49d67', 'complainant_phone_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'complainant_email_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'complainant_full_name_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f'}
2025-09-18 14:53:40,672 - db_manager - DEBUG - encrypted_data at update_complainant: {'complainant_full_name': 'c30d0407030205bd66b91b3de6d873d23d017e8b8f617b9987bf48d6fd34b1dc288f2a7877b0a01be795d1d63183464507ca914d244574afceb9bf631545bb84d159c5396abefa5d1a674b3f0857', 'complainant_phone': 'c30d040703023f5493497e36063366d23d0149a859da6bad5c7bcaa55d5a74f90a324333a2b20df0a45796c0c242a8415ec072a0afb655bc7872ff6a1a057f848451e976dd8bb99b2645c4faa048', 'complainant_email': 'c30d04070302184191374a5dc4d463d23d015b41892c77f42d17fd921c89006a71d6cd40a934769c0ba964b7b8d13a6e7f4c270b4439d6c1c3393ec025dd267f0bfc69c4b8b149d075370cbfc107', 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_municipality': 'Birtamod Municipality', 'complainant_village': 'Slot_Skipped', 'complainant_address': 'c30d0407030226e5c597c19688777bd23d01e707474683874d039ca30175d085ae8fc54b8e96a1f988bda308c633b2fd48125cbab54226e5e38cd1dd1cdd340eb5348252cad3a90b3a0ca3f49d67', 'complainant_phone_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'complainant_email_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'complainant_full_name_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f'}
2025-09-18 14:53:40,672 - db_manager - DEBUG - execute_update values: ('c30d0407030205bd66b91b3de6d873d23d017e8b8f617b9987bf48d6fd34b1dc288f2a7877b0a01be795d1d63183464507ca914d244574afceb9bf631545bb84d159c5396abefa5d1a674b3f0857', 'c30d040703023f5493497e36063366d23d0149a859da6bad5c7bcaa55d5a74f90a324333a2b20df0a45796c0c242a8415ec072a0afb655bc7872ff6a1a057f848451e976dd8bb99b2645c4faa048', 'c30d04070302184191374a5dc4d463d23d015b41892c77f42d17fd921c89006a71d6cd40a934769c0ba964b7b8d13a6e7f4c270b4439d6c1c3393ec025dd267f0bfc69c4b8b149d075370cbfc107', 'Koshi', 'Jhapa', 'Birtamod Municipality', 'Slot_Skipped', 'c30d0407030226e5c597c19688777bd23d01e707474683874d039ca30175d085ae8fc54b8e96a1f988bda308c633b2fd48125cbab54226e5e38cd1dd1cdd340eb5348252cad3a90b3a0ca3f49d67', 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'CM-20250918-KOJH-CFB6-B')
2025-09-18 14:53:40,672 - db_manager - DEBUG - execute_update query: UPDATE complainants SET complainant_full_name = %s, complainant_phone = %s, complainant_email = %s, complainant_province = %s, complainant_district = %s, complainant_municipality = %s, complainant_village = %s, complainant_address = %s, complainant_phone_hash = %s, complainant_email_hash = %s, complainant_full_name_hash = %s WHERE complainant_id = %s
2025-09-18 14:53:40,673 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 14:53:40,677 - db_manager - INFO - Starting database transaction
2025-09-18 14:53:40,677 - db_manager - INFO - execute_update: Executing update query: UPDATE complainants SET complainant_full_name = %s, complainant_phone = %s, complainant_email = %s, ...
2025-09-18 14:53:40,678 - db_manager - INFO - execute_update: Update completed in 0.01s. Affected rows: 1
2025-09-18 14:53:40,682 - db_manager - INFO - Transaction committed successfully
2025-09-18 14:53:40,682 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 14:53:40,682 - db_manager - INFO - Complainant updated in db: CM-20250918-KOJH-CFB6-B
2025-09-18 14:53:40,682 - db_manager - INFO - update_grievance: Updating grievance with ID: GR-20250918-KOJH-A761-B
2025-09-18 14:53:40,682 - db_manager - DEBUG - execute_update values: ('["Environmental - Air Pollution"]', 'Dust from road works is entering my home and making my children cough.', 'dust everywhere in my house kids are coughing', 'GR-20250918-KOJH-A761-B')
2025-09-18 14:53:40,682 - db_manager - DEBUG - execute_update query: 
                    UPDATE grievances 
                    SET grievance_categories = %s, grievance_summary = %s, grievance_description = %s, grievance_modification_date = CURRENT_TIMESTAMP
                    WHERE grievance_id = %s
                    RETURNING grievance_id
                
2025-09-18 14:53:40,682 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 14:53:40,687 - db_manager - INFO - Starting database transaction
2025-09-18 14:53:40,687 - db_manager - INFO - execute_update: Executing update query: 
                    UPDATE grievances 
                    SET grievance_categories = %s, grievance...
2025-09-18 14:53:40,688 - db_manager - INFO - execute_update: Update completed in 0.01s. Affected rows: 1
2025-09-18 14:53:40,691 - db_manager - INFO - Transaction committed successfully
2025-09-18 14:53:40,691 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 14:53:40,691 - db_manager - INFO - update_grievance: Updated grievance with ID: GR-20250918-KOJH-A761-B, rows affected: 1
2025-09-18 14:53:40,691 - db_manager - INFO - Grievance updated in db: GR-20250918-KOJH-A761-B
2025-09-18 14:54:16,368 - db_manager - INFO - create_complainant: Creating complainant with ID: CM-20250918-KOJH-23DF-B
2025-09-18 14:54:16,368 - db_manager - DEBUG - encrypted and hashed data at encrypt_and_hash_sensitive_data: {'complainant_id': 'CM-20250918-KOJH-23DF-B', 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_unique_id': 'CM-20250918-KOJH-23DF-B'}
2025-09-18 14:54:16,368 - db_manager - DEBUG - query_keys at generate_query_string: dict_keys(['complainant_id', 'complainant_province', 'complainant_district', 'complainant_unique_id'])
2025-09-18 14:54:16,368 - db_manager - DEBUG - Generated query: INSERT INTO complainants (complainant_id, complainant_province, complainant_district, complainant_unique_id) VALUES (%s, %s, %s, %s)
2025-09-18 14:54:16,368 - db_manager - DEBUG - len of query_keys: 4
2025-09-18 14:54:16,368 - db_manager - DEBUG - Generated query: INSERT INTO complainants (complainant_id, complainant_province, complainant_district, complainant_unique_id) VALUES (%s, %s, %s, %s)
2025-09-18 14:54:16,368 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 14:54:16,373 - db_manager - INFO - Starting database transaction
2025-09-18 14:54:16,376 - db_manager - INFO - Transaction committed successfully
2025-09-18 14:54:16,376 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 14:54:16,376 - db_manager - INFO - create_complainant: Successfully created complainant with ID: CM-20250918-KOJH-23DF-B
2025-09-18 14:54:16,376 - db_manager - INFO - create_grievance: Creating grievance with data: {'grievance_id': 'GR-20250918-KOJH-200D-B', 'complainant_id': 'CM-20250918-KOJH-23DF-B', 'grievance_description': 'dust everywhere in my house kids are coughing', 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_office': None, 'source': 'bot', 'complainant_unique_id': 'CM-20250918-KOJH-23DF-B'}
2025-09-18 14:54:16,376 - db_manager - INFO - create_grievance: Creating grievance with ID: GR-20250918-KOJH-200D-B
2025-09-18 14:54:16,376 - db_manager - INFO - create_grievance: Creating grievance with allowed fields: ['grievance_id', 'complainant_id', 'grievance_categories', 'grievance_categories_alternative', 'follow_up_question', 'grievance_summary', 'grievance_description', 'grievance_claimed_amount', 'grievance_location', 'is_temporary', 'source', 'language_code', 'grievance_classification_status']
2025-09-18 14:54:16,376 - db_manager - DEBUG - query_keys at generate_query_string: dict_keys(['grievance_id', 'complainant_id', 'grievance_description', 'source'])
2025-09-18 14:54:16,376 - db_manager - DEBUG - Generated query: INSERT INTO grievances (grievance_id, complainant_id, grievance_description, source) VALUES (%s, %s, %s, %s) RETURNING grievance_id
2025-09-18 14:54:16,376 - db_manager - DEBUG - len of query_keys: 4
2025-09-18 14:54:16,376 - db_manager - DEBUG - Generated query: INSERT INTO grievances (grievance_id, complainant_id, grievance_description, source) VALUES (%s, %s, %s, %s) RETURNING grievance_id
2025-09-18 14:54:16,376 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 14:54:16,381 - db_manager - INFO - Starting database transaction
2025-09-18 14:54:16,384 - db_manager - INFO - Transaction committed successfully
2025-09-18 14:54:16,384 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 14:54:16,384 - db_manager - INFO - create_grievance: Successfully created grievance with ID: GR-20250918-KOJH-200D-B
2025-09-18 14:54:17,721 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 14:54:17,726 - db_manager - INFO - Starting database transaction
2025-09-18 14:54:17,726 - db_manager - INFO - Executing get_complainant_by_id: 
            SELECT complainant_id, complainant_unique_id, complainant_full_name,    complainant_pho...
2025-09-18 14:54:17,727 - db_manager - INFO - get_complainant_by_id completed in 0.01s. Rows: 1
2025-09-18 14:54:17,727 - db_manager - INFO - Transaction committed successfully
2025-09-18 14:54:17,727 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 14:54:17,727 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 14:54:17,732 - db_manager - INFO - Starting database transaction
2025-09-18 14:54:17,732 - db_manager - INFO - Executing get_grievance_by_id: 
                SELECT g.*, c.complainant_full_name, c.complainant_phone, c.complainant_email,
    ...
2025-09-18 14:54:17,733 - db_manager - INFO - get_grievance_by_id completed in 0.01s. Rows: 1
2025-09-18 14:54:17,733 - db_manager - INFO - Transaction committed successfully
2025-09-18 14:54:17,733 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 14:54:17,734 - db_manager - DEBUG - get_grievance_by_id: grievance_id: {'grievance_id': 'GR-20250918-KOJH-200D-B', 'complainant_id': 'CM-20250918-KOJH-23DF-B', 'grievance_categories': None, 'grievance_categories_alternative': None, 'follow_up_question': None, 'grievance_summary': None, 'grievance_description': 'dust everywhere in my house kids are coughing', 'grievance_claimed_amount': None, 'grievance_location': None, 'language_code': 'ne', 'grievance_classification_status': 'pending', 'grievance_creation_date': datetime.datetime(2025, 9, 18, 14, 54, 16, 381661, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'grievance_modification_date': datetime.datetime(2025, 9, 18, 14, 54, 16, 381661, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'is_temporary': True, 'source': 'bot', 'complainant_full_name': None, 'complainant_phone': None, 'complainant_email': None, 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_municipality': None, 'complainant_ward': None, 'complainant_village': None, 'complainant_address': None}, results: [{'grievance_id': 'GR-20250918-KOJH-200D-B', 'complainant_id': 'CM-20250918-KOJH-23DF-B', 'grievance_categories': None, 'grievance_categories_alternative': None, 'follow_up_question': None, 'grievance_summary': None, 'grievance_description': 'dust everywhere in my house kids are coughing', 'grievance_claimed_amount': None, 'grievance_location': None, 'language_code': 'ne', 'grievance_classification_status': 'pending', 'grievance_creation_date': datetime.datetime(2025, 9, 18, 14, 54, 16, 381661, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'grievance_modification_date': datetime.datetime(2025, 9, 18, 14, 54, 16, 381661, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'is_temporary': True, 'source': 'bot', 'complainant_full_name': None, 'complainant_phone': None, 'complainant_email': None, 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_municipality': None, 'complainant_ward': None, 'complainant_village': None, 'complainant_address': None}]
2025-09-18 14:54:17,734 - db_manager - INFO - update_complainant: Updating complainant with ID: CM-20250918-KOJH-23DF-B
2025-09-18 14:54:17,734 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 14:54:17,738 - db_manager - INFO - Starting database transaction
2025-09-18 14:54:17,738 - db_manager - INFO - Executing encrypt_field: SELECT encode(pgp_sym_encrypt(%s, %s), 'hex') AS encrypted...
2025-09-18 14:54:17,739 - db_manager - INFO - encrypt_field completed in 0.01s. Rows: 1
2025-09-18 14:54:17,740 - db_manager - INFO - Transaction committed successfully
2025-09-18 14:54:17,740 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 14:54:17,740 - db_manager - DEBUG - encrypted phone number Not provided at encrypt_complainant_data: c30d040703022f03f6e357b2a19c7dd23d01f6642c5de03990658e4e42c3f948e072eebc0ab6a768d0ea680189569ef473c59e97194a70f80638382e0e8a690d6d78815fc2a0b8462b6222b6899f
2025-09-18 14:54:17,740 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 14:54:17,744 - db_manager - INFO - Starting database transaction
2025-09-18 14:54:17,744 - db_manager - INFO - Executing encrypt_field: SELECT encode(pgp_sym_encrypt(%s, %s), 'hex') AS encrypted...
2025-09-18 14:54:17,745 - db_manager - INFO - encrypt_field completed in 0.01s. Rows: 1
2025-09-18 14:54:17,745 - db_manager - INFO - Transaction committed successfully
2025-09-18 14:54:17,745 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 14:54:17,746 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 14:54:17,750 - db_manager - INFO - Starting database transaction
2025-09-18 14:54:17,750 - db_manager - INFO - Executing encrypt_field: SELECT encode(pgp_sym_encrypt(%s, %s), 'hex') AS encrypted...
2025-09-18 14:54:17,751 - db_manager - INFO - encrypt_field completed in 0.01s. Rows: 1
2025-09-18 14:54:17,751 - db_manager - INFO - Transaction committed successfully
2025-09-18 14:54:17,751 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 14:54:17,751 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 14:54:17,756 - db_manager - INFO - Starting database transaction
2025-09-18 14:54:17,756 - db_manager - INFO - Executing encrypt_field: SELECT encode(pgp_sym_encrypt(%s, %s), 'hex') AS encrypted...
2025-09-18 14:54:17,757 - db_manager - INFO - encrypt_field completed in 0.01s. Rows: 1
2025-09-18 14:54:17,757 - db_manager - INFO - Transaction committed successfully
2025-09-18 14:54:17,757 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 14:54:17,757 - db_manager - DEBUG - phone number Not provided hashed to d83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f at hash_sensitive_data
2025-09-18 14:54:17,757 - db_manager - DEBUG - encrypted and hashed data at encrypt_and_hash_sensitive_data: {'complainant_full_name': 'c30d040703027d20b3b13e6a796e7cd23d01136581fef30f8535e870b6f95f840929078581ac960ad256762eb7186380eb1d470e53a579d5be6ef41205cd4fa7763c43adfce0c692efe036b263e0', 'complainant_phone': 'c30d040703022f03f6e357b2a19c7dd23d01f6642c5de03990658e4e42c3f948e072eebc0ab6a768d0ea680189569ef473c59e97194a70f80638382e0e8a690d6d78815fc2a0b8462b6222b6899f', 'complainant_email': 'c30d04070302dd593035822a3e9b6bd23d01af30a9368ecbefbb5b65645d1f4856c714e71a7e39ab1c8c971d3120be1c56ed8a7d59956f06c59980e44c265f91f0ea06e1c13b42fa07ad42a79163', 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_municipality': 'Not provided', 'complainant_village': 'Not provided', 'complainant_address': 'c30d0407030273bd380ef6d9619660d23d01ff83defcf581f23b43b1423a54d1b8519328de349e3287be0e4b2ea1b7290f7624abb99c9c20fba9cbe7bf050958e5cb0a18f4f11aa464c535f9cfcd', 'complainant_phone_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'complainant_email_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'complainant_full_name_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f'}
2025-09-18 14:54:17,757 - db_manager - DEBUG - encrypted_data at update_complainant: {'complainant_full_name': 'c30d040703027d20b3b13e6a796e7cd23d01136581fef30f8535e870b6f95f840929078581ac960ad256762eb7186380eb1d470e53a579d5be6ef41205cd4fa7763c43adfce0c692efe036b263e0', 'complainant_phone': 'c30d040703022f03f6e357b2a19c7dd23d01f6642c5de03990658e4e42c3f948e072eebc0ab6a768d0ea680189569ef473c59e97194a70f80638382e0e8a690d6d78815fc2a0b8462b6222b6899f', 'complainant_email': 'c30d04070302dd593035822a3e9b6bd23d01af30a9368ecbefbb5b65645d1f4856c714e71a7e39ab1c8c971d3120be1c56ed8a7d59956f06c59980e44c265f91f0ea06e1c13b42fa07ad42a79163', 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_municipality': 'Not provided', 'complainant_village': 'Not provided', 'complainant_address': 'c30d0407030273bd380ef6d9619660d23d01ff83defcf581f23b43b1423a54d1b8519328de349e3287be0e4b2ea1b7290f7624abb99c9c20fba9cbe7bf050958e5cb0a18f4f11aa464c535f9cfcd', 'complainant_phone_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'complainant_email_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'complainant_full_name_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f'}
2025-09-18 14:54:17,757 - db_manager - DEBUG - execute_update values: ('c30d040703027d20b3b13e6a796e7cd23d01136581fef30f8535e870b6f95f840929078581ac960ad256762eb7186380eb1d470e53a579d5be6ef41205cd4fa7763c43adfce0c692efe036b263e0', 'c30d040703022f03f6e357b2a19c7dd23d01f6642c5de03990658e4e42c3f948e072eebc0ab6a768d0ea680189569ef473c59e97194a70f80638382e0e8a690d6d78815fc2a0b8462b6222b6899f', 'c30d04070302dd593035822a3e9b6bd23d01af30a9368ecbefbb5b65645d1f4856c714e71a7e39ab1c8c971d3120be1c56ed8a7d59956f06c59980e44c265f91f0ea06e1c13b42fa07ad42a79163', 'Koshi', 'Jhapa', 'Not provided', 'Not provided', 'c30d0407030273bd380ef6d9619660d23d01ff83defcf581f23b43b1423a54d1b8519328de349e3287be0e4b2ea1b7290f7624abb99c9c20fba9cbe7bf050958e5cb0a18f4f11aa464c535f9cfcd', 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'CM-20250918-KOJH-23DF-B')
2025-09-18 14:54:17,758 - db_manager - DEBUG - execute_update query: UPDATE complainants SET complainant_full_name = %s, complainant_phone = %s, complainant_email = %s, complainant_province = %s, complainant_district = %s, complainant_municipality = %s, complainant_village = %s, complainant_address = %s, complainant_phone_hash = %s, complainant_email_hash = %s, complainant_full_name_hash = %s WHERE complainant_id = %s
2025-09-18 14:54:17,758 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 14:54:17,762 - db_manager - INFO - Starting database transaction
2025-09-18 14:54:17,762 - db_manager - INFO - execute_update: Executing update query: UPDATE complainants SET complainant_full_name = %s, complainant_phone = %s, complainant_email = %s, ...
2025-09-18 14:54:17,763 - db_manager - INFO - execute_update: Update completed in 0.01s. Affected rows: 1
2025-09-18 14:54:17,765 - db_manager - INFO - Transaction committed successfully
2025-09-18 14:54:17,766 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 14:54:17,766 - db_manager - INFO - Complainant updated in db: CM-20250918-KOJH-23DF-B
2025-09-18 14:54:17,766 - db_manager - INFO - update_grievance: Updating grievance with ID: GR-20250918-KOJH-200D-B
2025-09-18 14:54:17,766 - db_manager - DEBUG - execute_update values: ('dust everywhere in my house kids are coughing', 'GR-20250918-KOJH-200D-B')
2025-09-18 14:54:17,766 - db_manager - DEBUG - execute_update query: 
                    UPDATE grievances 
                    SET grievance_description = %s, grievance_modification_date = CURRENT_TIMESTAMP
                    WHERE grievance_id = %s
                    RETURNING grievance_id
                
2025-09-18 14:54:17,766 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 14:54:17,770 - db_manager - INFO - Starting database transaction
2025-09-18 14:54:17,770 - db_manager - INFO - execute_update: Executing update query: 
                    UPDATE grievances 
                    SET grievance_description = %s, grievanc...
2025-09-18 14:54:17,771 - db_manager - INFO - execute_update: Update completed in 0.01s. Affected rows: 1
2025-09-18 14:54:17,773 - db_manager - INFO - Transaction committed successfully
2025-09-18 14:54:17,774 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 14:54:17,774 - db_manager - INFO - update_grievance: Updated grievance with ID: GR-20250918-KOJH-200D-B, rows affected: 1
2025-09-18 14:54:17,774 - db_manager - INFO - Grievance updated in db: GR-20250918-KOJH-200D-B
2025-09-18 14:54:17,774 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 14:54:17,778 - db_manager - INFO - Starting database transaction
2025-09-18 14:54:17,778 - db_manager - INFO - Executing get_grievance_files: 
            SELECT file_id, file_name, file_type, file_size, upload_timestamp
            FROM file...
2025-09-18 14:54:17,779 - db_manager - INFO - get_grievance_files completed in 0.01s. Rows: 0
2025-09-18 14:54:17,779 - db_manager - INFO - Transaction committed successfully
2025-09-18 14:54:17,780 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 14:54:17,780 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 14:54:17,784 - db_manager - INFO - Starting database transaction
2025-09-18 14:54:17,784 - db_manager - INFO - Executing get_grievance_files: 
            SELECT file_id, file_name, file_type, file_size, upload_timestamp
            FROM file...
2025-09-18 14:54:17,785 - db_manager - INFO - get_grievance_files completed in 0.01s. Rows: 0
2025-09-18 14:54:17,785 - db_manager - INFO - Transaction committed successfully
2025-09-18 14:54:17,785 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 14:54:17,829 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 14:54:17,834 - db_manager - INFO - Starting database transaction
2025-09-18 14:54:17,835 - db_manager - INFO - Executing get_grievance_by_id: 
                SELECT g.*, c.complainant_full_name, c.complainant_phone, c.complainant_email,
    ...
2025-09-18 14:54:17,837 - db_manager - INFO - get_grievance_by_id completed in 0.01s. Rows: 1
2025-09-18 14:54:17,837 - db_manager - INFO - Transaction committed successfully
2025-09-18 14:54:17,837 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 14:54:17,837 - db_manager - DEBUG - get_grievance_by_id: grievance_id: {'grievance_id': 'GR-20250918-KOJH-200D-B', 'complainant_id': 'CM-20250918-KOJH-23DF-B', 'grievance_categories': None, 'grievance_categories_alternative': None, 'follow_up_question': None, 'grievance_summary': None, 'grievance_description': 'dust everywhere in my house kids are coughing', 'grievance_claimed_amount': None, 'grievance_location': None, 'language_code': 'ne', 'grievance_classification_status': 'pending', 'grievance_creation_date': datetime.datetime(2025, 9, 18, 14, 54, 16, 381661, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'grievance_modification_date': datetime.datetime(2025, 9, 18, 14, 54, 17, 770974, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'is_temporary': True, 'source': 'bot', 'complainant_full_name': 'c30d040703027d20b3b13e6a796e7cd23d01136581fef30f8535e870b6f95f840929078581ac960ad256762eb7186380eb1d470e53a579d5be6ef41205cd4fa7763c43adfce0c692efe036b263e0', 'complainant_phone': 'c30d040703022f03f6e357b2a19c7dd23d01f6642c5de03990658e4e42c3f948e072eebc0ab6a768d0ea680189569ef473c59e97194a70f80638382e0e8a690d6d78815fc2a0b8462b6222b6899f', 'complainant_email': 'c30d04070302dd593035822a3e9b6bd23d01af30a9368ecbefbb5b65645d1f4856c714e71a7e39ab1c8c971d3120be1c56ed8a7d59956f06c59980e44c265f91f0ea06e1c13b42fa07ad42a79163', 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_municipality': 'Not provided', 'complainant_ward': None, 'complainant_village': 'Not provided', 'complainant_address': 'c30d0407030273bd380ef6d9619660d23d01ff83defcf581f23b43b1423a54d1b8519328de349e3287be0e4b2ea1b7290f7624abb99c9c20fba9cbe7bf050958e5cb0a18f4f11aa464c535f9cfcd'}, results: [{'grievance_id': 'GR-20250918-KOJH-200D-B', 'complainant_id': 'CM-20250918-KOJH-23DF-B', 'grievance_categories': None, 'grievance_categories_alternative': None, 'follow_up_question': None, 'grievance_summary': None, 'grievance_description': 'dust everywhere in my house kids are coughing', 'grievance_claimed_amount': None, 'grievance_location': None, 'language_code': 'ne', 'grievance_classification_status': 'pending', 'grievance_creation_date': datetime.datetime(2025, 9, 18, 14, 54, 16, 381661, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'grievance_modification_date': datetime.datetime(2025, 9, 18, 14, 54, 17, 770974, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'is_temporary': True, 'source': 'bot', 'complainant_full_name': 'c30d040703027d20b3b13e6a796e7cd23d01136581fef30f8535e870b6f95f840929078581ac960ad256762eb7186380eb1d470e53a579d5be6ef41205cd4fa7763c43adfce0c692efe036b263e0', 'complainant_phone': 'c30d040703022f03f6e357b2a19c7dd23d01f6642c5de03990658e4e42c3f948e072eebc0ab6a768d0ea680189569ef473c59e97194a70f80638382e0e8a690d6d78815fc2a0b8462b6222b6899f', 'complainant_email': 'c30d04070302dd593035822a3e9b6bd23d01af30a9368ecbefbb5b65645d1f4856c714e71a7e39ab1c8c971d3120be1c56ed8a7d59956f06c59980e44c265f91f0ea06e1c13b42fa07ad42a79163', 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_municipality': 'Not provided', 'complainant_ward': None, 'complainant_village': 'Not provided', 'complainant_address': 'c30d0407030273bd380ef6d9619660d23d01ff83defcf581f23b43b1423a54d1b8519328de349e3287be0e4b2ea1b7290f7624abb99c9c20fba9cbe7bf050958e5cb0a18f4f11aa464c535f9cfcd'}]
2025-09-18 14:54:17,921 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 14:54:17,926 - db_manager - INFO - Starting database transaction
2025-09-18 14:54:17,926 - db_manager - INFO - Executing get_complainant_id_from_grievance_id: 
            SELECT complainant_id
            FROM grievances
            WHERE grievance_id = %s
 ...
2025-09-18 14:54:17,928 - db_manager - INFO - get_complainant_id_from_grievance_id completed in 0.01s. Rows: 1
2025-09-18 14:54:17,928 - db_manager - INFO - Transaction committed successfully
2025-09-18 14:54:17,928 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 14:54:17,928 - db_manager - INFO - update_complainant: Updating complainant with ID: CM-20250918-KOJH-23DF-B
2025-09-18 14:54:17,928 - db_manager - DEBUG - encrypted and hashed data at encrypt_and_hash_sensitive_data: {}
2025-09-18 14:54:17,928 - db_manager - DEBUG - encrypted_data at update_complainant: {}
2025-09-18 14:54:17,928 - db_manager - DEBUG - No complainant field to update
2025-09-18 14:54:17,928 - db_manager - INFO - Complainant updated in db: GR-20250918-KOJH-200D-B
2025-09-18 14:54:17,928 - db_manager - INFO - update_grievance: Updating grievance with ID: GR-20250918-KOJH-200D-B
2025-09-18 14:54:17,928 - db_manager - DEBUG - execute_update values: ('["N/A"]', 'N/A', 'GR-20250918-KOJH-200D-B')
2025-09-18 14:54:17,928 - db_manager - DEBUG - execute_update query: 
                    UPDATE grievances 
                    SET grievance_categories = %s, grievance_summary = %s, grievance_modification_date = CURRENT_TIMESTAMP
                    WHERE grievance_id = %s
                    RETURNING grievance_id
                
2025-09-18 14:54:17,928 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 14:54:17,933 - db_manager - INFO - Starting database transaction
2025-09-18 14:54:17,933 - db_manager - INFO - execute_update: Executing update query: 
                    UPDATE grievances 
                    SET grievance_categories = %s, grievance...
2025-09-18 14:54:17,934 - db_manager - INFO - execute_update: Update completed in 0.01s. Affected rows: 1
2025-09-18 14:54:17,937 - db_manager - INFO - Transaction committed successfully
2025-09-18 14:54:17,937 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 14:54:17,937 - db_manager - INFO - update_grievance: Updated grievance with ID: GR-20250918-KOJH-200D-B, rows affected: 1
2025-09-18 14:54:17,937 - db_manager - INFO - Grievance updated in db: GR-20250918-KOJH-200D-B
2025-09-18 14:54:17,977 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 14:54:17,982 - db_manager - INFO - Starting database transaction
2025-09-18 14:54:17,983 - db_manager - INFO - Executing get_grievance_files: 
            SELECT file_id, file_name, file_type, file_size, upload_timestamp
            FROM file...
2025-09-18 14:54:17,983 - db_manager - INFO - get_grievance_files completed in 0.01s. Rows: 0
2025-09-18 14:54:17,984 - db_manager - INFO - Transaction committed successfully
2025-09-18 14:54:17,984 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 14:54:17,984 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 14:54:17,989 - db_manager - INFO - Starting database transaction
2025-09-18 14:54:17,989 - db_manager - INFO - Executing get_complainant_by_id: 
            SELECT complainant_id, complainant_unique_id, complainant_full_name,    complainant_pho...
2025-09-18 14:54:17,990 - db_manager - INFO - get_complainant_by_id completed in 0.01s. Rows: 1
2025-09-18 14:54:17,990 - db_manager - INFO - Transaction committed successfully
2025-09-18 14:54:17,990 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 14:54:17,990 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 14:54:17,995 - db_manager - INFO - Starting database transaction
2025-09-18 14:54:17,995 - db_manager - INFO - Executing decrypt_field: SELECT pgp_sym_decrypt(decode(%s, 'hex'), %s) AS decrypted...
2025-09-18 14:54:17,996 - db_manager - INFO - decrypt_field completed in 0.01s. Rows: 1
2025-09-18 14:54:17,996 - db_manager - INFO - Transaction committed successfully
2025-09-18 14:54:17,996 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 14:54:17,996 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 14:54:18,001 - db_manager - INFO - Starting database transaction
2025-09-18 14:54:18,001 - db_manager - INFO - Executing decrypt_field: SELECT pgp_sym_decrypt(decode(%s, 'hex'), %s) AS decrypted...
2025-09-18 14:54:18,003 - db_manager - INFO - decrypt_field completed in 0.01s. Rows: 1
2025-09-18 14:54:18,003 - db_manager - INFO - Transaction committed successfully
2025-09-18 14:54:18,003 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 14:54:18,003 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 14:54:18,008 - db_manager - INFO - Starting database transaction
2025-09-18 14:54:18,008 - db_manager - INFO - Executing decrypt_field: SELECT pgp_sym_decrypt(decode(%s, 'hex'), %s) AS decrypted...
2025-09-18 14:54:18,009 - db_manager - INFO - decrypt_field completed in 0.01s. Rows: 1
2025-09-18 14:54:18,009 - db_manager - INFO - Transaction committed successfully
2025-09-18 14:54:18,009 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 14:54:18,009 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 14:54:18,013 - db_manager - INFO - Starting database transaction
2025-09-18 14:54:18,013 - db_manager - INFO - Executing decrypt_field: SELECT pgp_sym_decrypt(decode(%s, 'hex'), %s) AS decrypted...
2025-09-18 14:54:18,014 - db_manager - INFO - decrypt_field completed in 0.01s. Rows: 1
2025-09-18 14:54:18,014 - db_manager - INFO - Transaction committed successfully
2025-09-18 14:54:18,015 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 14:54:18,015 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 14:54:18,019 - db_manager - INFO - Starting database transaction
2025-09-18 14:54:18,019 - db_manager - INFO - Executing get_grievance_by_id: 
                SELECT g.*, c.complainant_full_name, c.complainant_phone, c.complainant_email,
    ...
2025-09-18 14:54:18,021 - db_manager - INFO - get_grievance_by_id completed in 0.01s. Rows: 1
2025-09-18 14:54:18,021 - db_manager - INFO - Transaction committed successfully
2025-09-18 14:54:18,021 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 14:54:18,021 - db_manager - DEBUG - get_grievance_by_id: grievance_id: {'grievance_id': 'GR-20250918-KOJH-200D-B', 'complainant_id': 'CM-20250918-KOJH-23DF-B', 'grievance_categories': ['N/A'], 'grievance_categories_alternative': None, 'follow_up_question': None, 'grievance_summary': 'N/A', 'grievance_description': 'dust everywhere in my house kids are coughing', 'grievance_claimed_amount': None, 'grievance_location': None, 'language_code': 'ne', 'grievance_classification_status': 'pending', 'grievance_creation_date': datetime.datetime(2025, 9, 18, 14, 54, 16, 381661, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'grievance_modification_date': datetime.datetime(2025, 9, 18, 14, 54, 17, 933738, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'is_temporary': True, 'source': 'bot', 'complainant_full_name': 'c30d040703027d20b3b13e6a796e7cd23d01136581fef30f8535e870b6f95f840929078581ac960ad256762eb7186380eb1d470e53a579d5be6ef41205cd4fa7763c43adfce0c692efe036b263e0', 'complainant_phone': 'c30d040703022f03f6e357b2a19c7dd23d01f6642c5de03990658e4e42c3f948e072eebc0ab6a768d0ea680189569ef473c59e97194a70f80638382e0e8a690d6d78815fc2a0b8462b6222b6899f', 'complainant_email': 'c30d04070302dd593035822a3e9b6bd23d01af30a9368ecbefbb5b65645d1f4856c714e71a7e39ab1c8c971d3120be1c56ed8a7d59956f06c59980e44c265f91f0ea06e1c13b42fa07ad42a79163', 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_municipality': 'Not provided', 'complainant_ward': None, 'complainant_village': 'Not provided', 'complainant_address': 'c30d0407030273bd380ef6d9619660d23d01ff83defcf581f23b43b1423a54d1b8519328de349e3287be0e4b2ea1b7290f7624abb99c9c20fba9cbe7bf050958e5cb0a18f4f11aa464c535f9cfcd'}, results: [{'grievance_id': 'GR-20250918-KOJH-200D-B', 'complainant_id': 'CM-20250918-KOJH-23DF-B', 'grievance_categories': '["N/A"]', 'grievance_categories_alternative': None, 'follow_up_question': None, 'grievance_summary': 'N/A', 'grievance_description': 'dust everywhere in my house kids are coughing', 'grievance_claimed_amount': None, 'grievance_location': None, 'language_code': 'ne', 'grievance_classification_status': 'pending', 'grievance_creation_date': datetime.datetime(2025, 9, 18, 14, 54, 16, 381661, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'grievance_modification_date': datetime.datetime(2025, 9, 18, 14, 54, 17, 933738, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'is_temporary': True, 'source': 'bot', 'complainant_full_name': 'c30d040703027d20b3b13e6a796e7cd23d01136581fef30f8535e870b6f95f840929078581ac960ad256762eb7186380eb1d470e53a579d5be6ef41205cd4fa7763c43adfce0c692efe036b263e0', 'complainant_phone': 'c30d040703022f03f6e357b2a19c7dd23d01f6642c5de03990658e4e42c3f948e072eebc0ab6a768d0ea680189569ef473c59e97194a70f80638382e0e8a690d6d78815fc2a0b8462b6222b6899f', 'complainant_email': 'c30d04070302dd593035822a3e9b6bd23d01af30a9368ecbefbb5b65645d1f4856c714e71a7e39ab1c8c971d3120be1c56ed8a7d59956f06c59980e44c265f91f0ea06e1c13b42fa07ad42a79163', 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_municipality': 'Not provided', 'complainant_ward': None, 'complainant_village': 'Not provided', 'complainant_address': 'c30d0407030273bd380ef6d9619660d23d01ff83defcf581f23b43b1423a54d1b8519328de349e3287be0e4b2ea1b7290f7624abb99c9c20fba9cbe7bf050958e5cb0a18f4f11aa464c535f9cfcd'}]
2025-09-18 14:54:18,021 - db_manager - INFO - update_complainant: Updating complainant with ID: CM-20250918-KOJH-23DF-B
2025-09-18 14:54:18,021 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 14:54:18,026 - db_manager - INFO - Starting database transaction
2025-09-18 14:54:18,026 - db_manager - INFO - Executing encrypt_field: SELECT encode(pgp_sym_encrypt(%s, %s), 'hex') AS encrypted...
2025-09-18 14:54:18,027 - db_manager - INFO - encrypt_field completed in 0.01s. Rows: 1
2025-09-18 14:54:18,028 - db_manager - INFO - Transaction committed successfully
2025-09-18 14:54:18,028 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 14:54:18,028 - db_manager - DEBUG - encrypted phone number Not provided at encrypt_complainant_data: c30d040703026348a3a90e3213d165d23d01c8188a1cff2f3cbae9aa8319505687ff6e40d2e5ab69f1b9b3e9e02833f2fc3e827620b87fb5b84909add129677402a21f513798588d8f3565ac1b02
2025-09-18 14:54:18,028 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 14:54:18,034 - db_manager - INFO - Starting database transaction
2025-09-18 14:54:18,034 - db_manager - INFO - Executing encrypt_field: SELECT encode(pgp_sym_encrypt(%s, %s), 'hex') AS encrypted...
2025-09-18 14:54:18,035 - db_manager - INFO - encrypt_field completed in 0.01s. Rows: 1
2025-09-18 14:54:18,035 - db_manager - INFO - Transaction committed successfully
2025-09-18 14:54:18,036 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 14:54:18,036 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 14:54:18,040 - db_manager - INFO - Starting database transaction
2025-09-18 14:54:18,040 - db_manager - INFO - Executing encrypt_field: SELECT encode(pgp_sym_encrypt(%s, %s), 'hex') AS encrypted...
2025-09-18 14:54:18,041 - db_manager - INFO - encrypt_field completed in 0.01s. Rows: 1
2025-09-18 14:54:18,041 - db_manager - INFO - Transaction committed successfully
2025-09-18 14:54:18,041 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 14:54:18,042 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 14:54:18,046 - db_manager - INFO - Starting database transaction
2025-09-18 14:54:18,046 - db_manager - INFO - Executing encrypt_field: SELECT encode(pgp_sym_encrypt(%s, %s), 'hex') AS encrypted...
2025-09-18 14:54:18,047 - db_manager - INFO - encrypt_field completed in 0.01s. Rows: 1
2025-09-18 14:54:18,047 - db_manager - INFO - Transaction committed successfully
2025-09-18 14:54:18,047 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 14:54:18,047 - db_manager - DEBUG - phone number Not provided hashed to d83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f at hash_sensitive_data
2025-09-18 14:54:18,047 - db_manager - DEBUG - encrypted and hashed data at encrypt_and_hash_sensitive_data: {'complainant_full_name': 'c30d0407030283df75bacd6ed93367d23d01127ee489d13f18725ce6d3ddd51d65b3e454b83100193d9b15fcc588d00861840b55976a4327943e8df909a7c044ef80684d8c1910773fde27036042', 'complainant_phone': 'c30d040703026348a3a90e3213d165d23d01c8188a1cff2f3cbae9aa8319505687ff6e40d2e5ab69f1b9b3e9e02833f2fc3e827620b87fb5b84909add129677402a21f513798588d8f3565ac1b02', 'complainant_email': 'c30d04070302f73e9fd129043fa077d23d0119f9678fcfede4ba64098fc5aa2db400dad10adeb8f3facd1d63fe787bee1cda153f94ce289cd09cc0cdc1b3657cdb6acc327cf13cc3af12e9affbc0', 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_municipality': 'Not provided', 'complainant_village': 'Not provided', 'complainant_address': 'c30d04070302542204583cc45f006cd23d0129647746fde3ac5f955d882eb2156c8731f94929817f327a5938b2300ef205049a7c57ce2ffb6618c28798a25eb871c27aa96499d5d28e62161ce357', 'complainant_phone_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'complainant_email_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'complainant_full_name_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f'}
2025-09-18 14:54:18,048 - db_manager - DEBUG - encrypted_data at update_complainant: {'complainant_full_name': 'c30d0407030283df75bacd6ed93367d23d01127ee489d13f18725ce6d3ddd51d65b3e454b83100193d9b15fcc588d00861840b55976a4327943e8df909a7c044ef80684d8c1910773fde27036042', 'complainant_phone': 'c30d040703026348a3a90e3213d165d23d01c8188a1cff2f3cbae9aa8319505687ff6e40d2e5ab69f1b9b3e9e02833f2fc3e827620b87fb5b84909add129677402a21f513798588d8f3565ac1b02', 'complainant_email': 'c30d04070302f73e9fd129043fa077d23d0119f9678fcfede4ba64098fc5aa2db400dad10adeb8f3facd1d63fe787bee1cda153f94ce289cd09cc0cdc1b3657cdb6acc327cf13cc3af12e9affbc0', 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_municipality': 'Not provided', 'complainant_village': 'Not provided', 'complainant_address': 'c30d04070302542204583cc45f006cd23d0129647746fde3ac5f955d882eb2156c8731f94929817f327a5938b2300ef205049a7c57ce2ffb6618c28798a25eb871c27aa96499d5d28e62161ce357', 'complainant_phone_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'complainant_email_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'complainant_full_name_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f'}
2025-09-18 14:54:18,048 - db_manager - DEBUG - execute_update values: ('c30d0407030283df75bacd6ed93367d23d01127ee489d13f18725ce6d3ddd51d65b3e454b83100193d9b15fcc588d00861840b55976a4327943e8df909a7c044ef80684d8c1910773fde27036042', 'c30d040703026348a3a90e3213d165d23d01c8188a1cff2f3cbae9aa8319505687ff6e40d2e5ab69f1b9b3e9e02833f2fc3e827620b87fb5b84909add129677402a21f513798588d8f3565ac1b02', 'c30d04070302f73e9fd129043fa077d23d0119f9678fcfede4ba64098fc5aa2db400dad10adeb8f3facd1d63fe787bee1cda153f94ce289cd09cc0cdc1b3657cdb6acc327cf13cc3af12e9affbc0', 'Koshi', 'Jhapa', 'Not provided', 'Not provided', 'c30d04070302542204583cc45f006cd23d0129647746fde3ac5f955d882eb2156c8731f94929817f327a5938b2300ef205049a7c57ce2ffb6618c28798a25eb871c27aa96499d5d28e62161ce357', 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'CM-20250918-KOJH-23DF-B')
2025-09-18 14:54:18,048 - db_manager - DEBUG - execute_update query: UPDATE complainants SET complainant_full_name = %s, complainant_phone = %s, complainant_email = %s, complainant_province = %s, complainant_district = %s, complainant_municipality = %s, complainant_village = %s, complainant_address = %s, complainant_phone_hash = %s, complainant_email_hash = %s, complainant_full_name_hash = %s WHERE complainant_id = %s
2025-09-18 14:54:18,048 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 14:54:18,052 - db_manager - INFO - Starting database transaction
2025-09-18 14:54:18,052 - db_manager - INFO - execute_update: Executing update query: UPDATE complainants SET complainant_full_name = %s, complainant_phone = %s, complainant_email = %s, ...
2025-09-18 14:54:18,053 - db_manager - INFO - execute_update: Update completed in 0.01s. Affected rows: 1
2025-09-18 14:54:18,055 - db_manager - INFO - Transaction committed successfully
2025-09-18 14:54:18,055 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 14:54:18,055 - db_manager - INFO - Complainant updated in db: CM-20250918-KOJH-23DF-B
2025-09-18 14:54:18,055 - db_manager - INFO - update_grievance: Updating grievance with ID: GR-20250918-KOJH-200D-B
2025-09-18 14:54:18,055 - db_manager - DEBUG - execute_update values: ('["N/A"]', 'N/A', 'dust everywhere in my house kids are coughing', 'GR-20250918-KOJH-200D-B')
2025-09-18 14:54:18,055 - db_manager - DEBUG - execute_update query: 
                    UPDATE grievances 
                    SET grievance_categories = %s, grievance_summary = %s, grievance_description = %s, grievance_modification_date = CURRENT_TIMESTAMP
                    WHERE grievance_id = %s
                    RETURNING grievance_id
                
2025-09-18 14:54:18,055 - db_manager - INFO - Connecting to database: grievance_db
2025-09-18 14:54:18,060 - db_manager - INFO - Starting database transaction
2025-09-18 14:54:18,060 - db_manager - INFO - execute_update: Executing update query: 
                    UPDATE grievances 
                    SET grievance_categories = %s, grievance...
2025-09-18 14:54:18,061 - db_manager - INFO - execute_update: Update completed in 0.01s. Affected rows: 1
2025-09-18 14:54:18,063 - db_manager - INFO - Transaction committed successfully
2025-09-18 14:54:18,063 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-18 14:54:18,063 - db_manager - INFO - update_grievance: Updated grievance with ID: GR-20250918-KOJH-200D-B, rows affected: 1
2025-09-18 14:54:18,063 - db_manager - INFO - Grievance updated in db: GR-20250918-KOJH-200D-B
2025-09-18 15:23:47,936 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-18 15:23:47,936 - db_manager - INFO - Database manager initialized successfully
2025-09-18 15:23:47,937 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-18 15:23:47,937 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-18 15:23:47,937 - db_manager - INFO - Database manager initialized successfully
2025-09-18 15:23:47,937 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-18 15:23:47,937 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-18 15:23:47,937 - db_manager - INFO - Database manager initialized successfully
2025-09-18 15:23:47,937 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-18 15:23:47,937 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-18 15:23:47,937 - db_manager - INFO - Database manager initialized successfully
2025-09-18 15:23:47,937 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-18 15:23:47,937 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-18 15:23:47,937 - db_manager - INFO - Database manager initialized successfully
2025-09-18 15:23:47,937 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-18 15:23:47,937 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-18 15:23:47,937 - db_manager - INFO - Database manager initialized successfully
2025-09-18 15:23:47,937 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-18 15:23:47,937 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-18 15:23:47,937 - db_manager - INFO - Database manager initialized successfully
2025-09-18 15:23:47,937 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-18 15:23:47,937 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-18 15:23:47,937 - db_manager - INFO - Database manager initialized successfully
2025-09-18 15:23:47,938 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-18 15:23:47,938 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-18 15:23:47,938 - db_manager - INFO - Database manager initialized successfully
2025-09-18 15:23:47,938 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-18 15:23:47,938 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-18 15:23:47,938 - db_manager - INFO - Database manager initialized successfully
2025-09-18 15:23:47,938 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-18 15:32:49,161 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-18 15:32:49,161 - db_manager - INFO - Database manager initialized successfully
2025-09-18 15:32:49,161 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-18 15:32:49,161 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-18 15:32:49,161 - db_manager - INFO - Database manager initialized successfully
2025-09-18 15:32:49,161 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-18 15:32:49,161 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-18 15:32:49,161 - db_manager - INFO - Database manager initialized successfully
2025-09-18 15:32:49,161 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-18 15:32:49,161 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-18 15:32:49,162 - db_manager - INFO - Database manager initialized successfully
2025-09-18 15:32:49,162 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-18 15:32:49,162 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-18 15:32:49,162 - db_manager - INFO - Database manager initialized successfully
2025-09-18 15:32:49,162 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-18 15:32:49,162 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-18 15:32:49,162 - db_manager - INFO - Database manager initialized successfully
2025-09-18 15:32:49,162 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-18 15:32:49,162 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-18 15:32:49,162 - db_manager - INFO - Database manager initialized successfully
2025-09-18 15:32:49,162 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-18 15:32:49,162 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-18 15:32:49,162 - db_manager - INFO - Database manager initialized successfully
2025-09-18 15:32:49,162 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-18 15:32:49,162 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-18 15:32:49,162 - db_manager - INFO - Database manager initialized successfully
2025-09-18 15:32:49,162 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-18 15:32:49,162 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-18 15:32:49,162 - db_manager - INFO - Database manager initialized successfully
2025-09-18 15:32:49,162 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-18 15:53:10,247 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-18 15:53:10,247 - db_manager - INFO - Database manager initialized successfully
2025-09-18 15:53:10,247 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-18 15:53:10,247 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-18 15:53:10,247 - db_manager - INFO - Database manager initialized successfully
2025-09-18 15:53:10,247 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-18 15:53:10,247 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-18 15:53:10,248 - db_manager - INFO - Database manager initialized successfully
2025-09-18 15:53:10,248 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-18 15:53:10,248 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-18 15:53:10,248 - db_manager - INFO - Database manager initialized successfully
2025-09-18 15:53:10,248 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-18 15:53:10,248 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-18 15:53:10,248 - db_manager - INFO - Database manager initialized successfully
2025-09-18 15:53:10,248 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-18 15:53:10,248 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-18 15:53:10,248 - db_manager - INFO - Database manager initialized successfully
2025-09-18 15:53:10,248 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-18 15:53:10,248 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-18 15:53:10,248 - db_manager - INFO - Database manager initialized successfully
2025-09-18 15:53:10,248 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-18 15:53:10,248 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-18 15:53:10,248 - db_manager - INFO - Database manager initialized successfully
2025-09-18 15:53:10,248 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-18 15:53:10,248 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-18 15:53:10,248 - db_manager - INFO - Database manager initialized successfully
2025-09-18 15:53:10,248 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-18 15:53:10,248 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-18 15:53:10,248 - db_manager - INFO - Database manager initialized successfully
2025-09-18 15:53:10,248 - db_manager - INFO - Encryption enabled for sensitive fields
