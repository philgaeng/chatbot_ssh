2025-09-11 16:33:32,111 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-11 16:33:32,112 - db_manager - INFO - Database manager initialized successfully
2025-09-11 16:33:32,112 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-11 16:33:32,112 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-11 16:33:32,112 - db_manager - INFO - Database manager initialized successfully
2025-09-11 16:33:32,112 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-11 16:33:32,112 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-11 16:33:32,112 - db_manager - INFO - Database manager initialized successfully
2025-09-11 16:33:32,112 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-11 16:33:32,112 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-11 16:33:32,112 - db_manager - INFO - Database manager initialized successfully
2025-09-11 16:33:32,112 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-11 16:33:32,112 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-11 16:33:32,113 - db_manager - INFO - Database manager initialized successfully
2025-09-11 16:33:32,113 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-11 16:33:32,113 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-11 16:33:32,113 - db_manager - INFO - Database manager initialized successfully
2025-09-11 16:33:32,113 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-11 16:33:32,113 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-11 16:33:32,113 - db_manager - INFO - Database manager initialized successfully
2025-09-11 16:33:32,113 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-11 16:33:32,113 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-11 16:33:32,113 - db_manager - INFO - Database manager initialized successfully
2025-09-11 16:33:32,113 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-11 16:33:32,113 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-11 16:33:32,113 - db_manager - INFO - Database manager initialized successfully
2025-09-11 16:33:32,113 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-11 16:33:32,113 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-11 16:33:32,113 - db_manager - INFO - Database manager initialized successfully
2025-09-11 16:33:32,113 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-11 16:35:15,659 - db_manager - INFO - create_complainant: Creating complainant with ID: CM-20250911-KOJH-7044-B
2025-09-11 16:35:15,660 - db_manager - DEBUG - encrypted and hashed data at encrypt_and_hash_sensitive_data: {'complainant_id': 'CM-20250911-KOJH-7044-B', 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_unique_id': 'CM-20250911-KOJH-7044-B'}
2025-09-11 16:35:15,660 - db_manager - DEBUG - query_keys at generate_query_string: dict_keys(['complainant_id', 'complainant_province', 'complainant_district', 'complainant_unique_id'])
2025-09-11 16:35:15,660 - db_manager - DEBUG - Generated query: INSERT INTO complainants (complainant_id, complainant_province, complainant_district, complainant_unique_id) VALUES (%s, %s, %s, %s)
2025-09-11 16:35:15,660 - db_manager - DEBUG - len of query_keys: 4
2025-09-11 16:35:15,660 - db_manager - DEBUG - Generated query: INSERT INTO complainants (complainant_id, complainant_province, complainant_district, complainant_unique_id) VALUES (%s, %s, %s, %s)
2025-09-11 16:35:15,660 - db_manager - INFO - Connecting to database: grievance_db
2025-09-11 16:35:15,669 - db_manager - INFO - Starting database transaction
2025-09-11 16:35:15,674 - db_manager - INFO - Transaction committed successfully
2025-09-11 16:35:15,674 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-11 16:35:15,674 - db_manager - INFO - create_complainant: Successfully created complainant with ID: CM-20250911-KOJH-7044-B
2025-09-11 16:35:15,674 - db_manager - INFO - create_grievance: Creating grievance with data: {'grievance_id': 'GR-20250911-KOJH-2E3B-B', 'complainant_id': 'CM-20250911-KOJH-7044-B', 'grievance_description': 'there is dust everywhere, my kids are sick now, I need to bring them to hospital', 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_office': None, 'source': 'bot', 'complainant_unique_id': 'CM-20250911-KOJH-7044-B'}
2025-09-11 16:35:15,674 - db_manager - INFO - create_grievance: Creating grievance with ID: GR-20250911-KOJH-2E3B-B
2025-09-11 16:35:15,674 - db_manager - INFO - create_grievance: Creating grievance with allowed fields: ['grievance_id', 'complainant_id', 'grievance_categories', 'grievance_categories_alternative', 'follow_up_question', 'grievance_summary', 'grievance_description', 'grievance_claimed_amount', 'grievance_location', 'is_temporary', 'source', 'language_code', 'grievance_classification_status']
2025-09-11 16:35:15,674 - db_manager - DEBUG - query_keys at generate_query_string: dict_keys(['grievance_id', 'complainant_id', 'grievance_description', 'source'])
2025-09-11 16:35:15,675 - db_manager - DEBUG - Generated query: INSERT INTO grievances (grievance_id, complainant_id, grievance_description, source) VALUES (%s, %s, %s, %s) RETURNING grievance_id
2025-09-11 16:35:15,675 - db_manager - DEBUG - len of query_keys: 4
2025-09-11 16:35:15,675 - db_manager - DEBUG - Generated query: INSERT INTO grievances (grievance_id, complainant_id, grievance_description, source) VALUES (%s, %s, %s, %s) RETURNING grievance_id
2025-09-11 16:35:15,675 - db_manager - INFO - Connecting to database: grievance_db
2025-09-11 16:35:15,680 - db_manager - INFO - Starting database transaction
2025-09-11 16:35:15,687 - db_manager - INFO - Transaction committed successfully
2025-09-11 16:35:15,688 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-11 16:35:15,688 - db_manager - INFO - create_grievance: Successfully created grievance with ID: GR-20250911-KOJH-2E3B-B
2025-09-11 16:35:37,575 - db_manager - INFO - Connecting to database: grievance_db
2025-09-11 16:35:37,581 - db_manager - INFO - Starting database transaction
2025-09-11 16:35:37,581 - db_manager - INFO - Executing get_complainant_by_id: 
            SELECT complainant_id, complainant_unique_id, complainant_full_name,    complainant_pho...
2025-09-11 16:35:37,582 - db_manager - INFO - get_complainant_by_id completed in 0.01s. Rows: 1
2025-09-11 16:35:37,583 - db_manager - INFO - Transaction committed successfully
2025-09-11 16:35:37,583 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-11 16:35:37,583 - db_manager - INFO - Connecting to database: grievance_db
2025-09-11 16:35:37,588 - db_manager - INFO - Starting database transaction
2025-09-11 16:35:37,588 - db_manager - INFO - Executing get_grievance_by_id: 
                SELECT g.*, c.complainant_full_name, c.complainant_phone, c.complainant_email,
    ...
2025-09-11 16:35:37,590 - db_manager - INFO - get_grievance_by_id completed in 0.01s. Rows: 1
2025-09-11 16:35:37,590 - db_manager - INFO - Transaction committed successfully
2025-09-11 16:35:37,590 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-11 16:35:37,590 - db_manager - DEBUG - get_grievance_by_id: grievance_id: {'grievance_id': 'GR-20250911-KOJH-2E3B-B', 'complainant_id': 'CM-20250911-KOJH-7044-B', 'grievance_categories': [], 'grievance_categories_alternative': [], 'follow_up_question': [''], 'grievance_summary': '', 'grievance_description': 'there is dust everywhere, my kids are sick now, I need to bring them to hospital', 'grievance_claimed_amount': None, 'grievance_location': None, 'language_code': 'en', 'grievance_classification_status': 'pending', 'grievance_creation_date': datetime.datetime(2025, 9, 11, 16, 35, 15, 680516, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'grievance_modification_date': datetime.datetime(2025, 9, 11, 16, 35, 17, 551104, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'is_temporary': True, 'source': 'bot', 'complainant_full_name': None, 'complainant_phone': None, 'complainant_email': None, 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_municipality': None, 'complainant_ward': None, 'complainant_village': None, 'complainant_address': None}, results: [{'grievance_id': 'GR-20250911-KOJH-2E3B-B', 'complainant_id': 'CM-20250911-KOJH-7044-B', 'grievance_categories': '[]', 'grievance_categories_alternative': '[]', 'follow_up_question': '[""]', 'grievance_summary': '', 'grievance_description': 'there is dust everywhere, my kids are sick now, I need to bring them to hospital', 'grievance_claimed_amount': None, 'grievance_location': None, 'language_code': 'en', 'grievance_classification_status': 'pending', 'grievance_creation_date': datetime.datetime(2025, 9, 11, 16, 35, 15, 680516, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'grievance_modification_date': datetime.datetime(2025, 9, 11, 16, 35, 17, 551104, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'is_temporary': True, 'source': 'bot', 'complainant_full_name': None, 'complainant_phone': None, 'complainant_email': None, 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_municipality': None, 'complainant_ward': None, 'complainant_village': None, 'complainant_address': None}]
2025-09-11 16:35:37,590 - db_manager - INFO - update_complainant: Updating complainant with ID: CM-20250911-KOJH-7044-B
2025-09-11 16:35:37,590 - db_manager - INFO - Connecting to database: grievance_db
2025-09-11 16:35:37,595 - db_manager - INFO - Starting database transaction
2025-09-11 16:35:37,595 - db_manager - INFO - Executing encrypt_field: SELECT encode(pgp_sym_encrypt(%s, %s), 'hex') AS encrypted...
2025-09-11 16:35:37,600 - db_manager - INFO - encrypt_field completed in 0.01s. Rows: 1
2025-09-11 16:35:37,600 - db_manager - INFO - Transaction committed successfully
2025-09-11 16:35:37,600 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-11 16:35:37,601 - db_manager - INFO - Connecting to database: grievance_db
2025-09-11 16:35:37,605 - db_manager - INFO - Starting database transaction
2025-09-11 16:35:37,606 - db_manager - INFO - Executing encrypt_field: SELECT encode(pgp_sym_encrypt(%s, %s), 'hex') AS encrypted...
2025-09-11 16:35:37,606 - db_manager - INFO - encrypt_field completed in 0.01s. Rows: 1
2025-09-11 16:35:37,607 - db_manager - INFO - Transaction committed successfully
2025-09-11 16:35:37,607 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-11 16:35:37,607 - db_manager - DEBUG - encrypted phone number Not provided at encrypt_complainant_data: c30d0407030247f811ce8fffb1b672d23d0109fe86ca2c0ccf71774e4af5c5f907a0cb5519825c44d70e9bbdfbe4926761f32fbf395980852fdcae7d79807148a841cf270a8b42d10728c78de169
2025-09-11 16:35:37,607 - db_manager - INFO - Connecting to database: grievance_db
2025-09-11 16:35:37,611 - db_manager - INFO - Starting database transaction
2025-09-11 16:35:37,612 - db_manager - INFO - Executing encrypt_field: SELECT encode(pgp_sym_encrypt(%s, %s), 'hex') AS encrypted...
2025-09-11 16:35:37,613 - db_manager - INFO - encrypt_field completed in 0.01s. Rows: 1
2025-09-11 16:35:37,613 - db_manager - INFO - Transaction committed successfully
2025-09-11 16:35:37,613 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-11 16:35:37,613 - db_manager - DEBUG - phone number Not provided hashed to d83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f at hash_sensitive_data
2025-09-11 16:35:37,613 - db_manager - DEBUG - encrypted and hashed data at encrypt_and_hash_sensitive_data: {'complainant_full_name': 'c30d040703028670d81a3846cb0b7fd23d01fdd048031c8c8c88c260308e5715b83150d22c85e30aa6022d41806fa34d8e85037cc9eb2aaa38e99d730a9294ec08289c9fe7721e603fd93c404535', 'complainant_phone': 'c30d0407030247f811ce8fffb1b672d23d0109fe86ca2c0ccf71774e4af5c5f907a0cb5519825c44d70e9bbdfbe4926761f32fbf395980852fdcae7d79807148a841cf270a8b42d10728c78de169', 'complainant_email': 'c30d04070302b9877a97ccf7224c6cd23d01f47de0e288c2a053d9d61e00389b76fddbeb0ac480c9ebc03c16d2bf208ed4d97f266ab402b453d11686c32504c0892128f275e577d510e03d5ef406', 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_email_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'complainant_phone_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'complainant_full_name_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f'}
2025-09-11 16:35:37,613 - db_manager - DEBUG - encrypted_data at update_complainant: {'complainant_full_name': 'c30d040703028670d81a3846cb0b7fd23d01fdd048031c8c8c88c260308e5715b83150d22c85e30aa6022d41806fa34d8e85037cc9eb2aaa38e99d730a9294ec08289c9fe7721e603fd93c404535', 'complainant_phone': 'c30d0407030247f811ce8fffb1b672d23d0109fe86ca2c0ccf71774e4af5c5f907a0cb5519825c44d70e9bbdfbe4926761f32fbf395980852fdcae7d79807148a841cf270a8b42d10728c78de169', 'complainant_email': 'c30d04070302b9877a97ccf7224c6cd23d01f47de0e288c2a053d9d61e00389b76fddbeb0ac480c9ebc03c16d2bf208ed4d97f266ab402b453d11686c32504c0892128f275e577d510e03d5ef406', 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_email_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'complainant_phone_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'complainant_full_name_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f'}
2025-09-11 16:35:37,613 - db_manager - DEBUG - execute_update values: ('c30d040703028670d81a3846cb0b7fd23d01fdd048031c8c8c88c260308e5715b83150d22c85e30aa6022d41806fa34d8e85037cc9eb2aaa38e99d730a9294ec08289c9fe7721e603fd93c404535', 'c30d0407030247f811ce8fffb1b672d23d0109fe86ca2c0ccf71774e4af5c5f907a0cb5519825c44d70e9bbdfbe4926761f32fbf395980852fdcae7d79807148a841cf270a8b42d10728c78de169', 'c30d04070302b9877a97ccf7224c6cd23d01f47de0e288c2a053d9d61e00389b76fddbeb0ac480c9ebc03c16d2bf208ed4d97f266ab402b453d11686c32504c0892128f275e577d510e03d5ef406', 'Koshi', 'Jhapa', 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'CM-20250911-KOJH-7044-B')
2025-09-11 16:35:37,613 - db_manager - DEBUG - execute_update query: UPDATE complainants SET complainant_full_name = %s, complainant_phone = %s, complainant_email = %s, complainant_province = %s, complainant_district = %s, complainant_email_hash = %s, complainant_phone_hash = %s, complainant_full_name_hash = %s WHERE complainant_id = %s
2025-09-11 16:35:37,613 - db_manager - INFO - Connecting to database: grievance_db
2025-09-11 16:35:37,618 - db_manager - INFO - Starting database transaction
2025-09-11 16:35:37,618 - db_manager - INFO - execute_update: Executing update query: UPDATE complainants SET complainant_full_name = %s, complainant_phone = %s, complainant_email = %s, ...
2025-09-11 16:35:37,619 - db_manager - INFO - execute_update: Update completed in 0.01s. Affected rows: 1
2025-09-11 16:35:37,620 - db_manager - INFO - Transaction committed successfully
2025-09-11 16:35:37,621 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-11 16:35:37,621 - db_manager - INFO - Complainant updated in db: CM-20250911-KOJH-7044-B
2025-09-11 16:35:37,621 - db_manager - INFO - update_grievance: Updating grievance with ID: GR-20250911-KOJH-2E3B-B
2025-09-11 16:35:37,621 - db_manager - DEBUG - execute_update values: ('there is dust everywhere, my kids are sick now, I need to bring them to hospital', 'GR-20250911-KOJH-2E3B-B')
2025-09-11 16:35:37,621 - db_manager - DEBUG - execute_update query: 
                    UPDATE grievances 
                    SET grievance_description = %s, grievance_modification_date = CURRENT_TIMESTAMP
                    WHERE grievance_id = %s
                    RETURNING grievance_id
                
2025-09-11 16:35:37,621 - db_manager - INFO - Connecting to database: grievance_db
2025-09-11 16:35:37,625 - db_manager - INFO - Starting database transaction
2025-09-11 16:35:37,626 - db_manager - INFO - execute_update: Executing update query: 
                    UPDATE grievances 
                    SET grievance_description = %s, grievanc...
2025-09-11 16:35:37,627 - db_manager - INFO - execute_update: Update completed in 0.01s. Affected rows: 1
2025-09-11 16:35:37,629 - db_manager - INFO - Transaction committed successfully
2025-09-11 16:35:37,629 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-11 16:35:37,629 - db_manager - INFO - update_grievance: Updated grievance with ID: GR-20250911-KOJH-2E3B-B, rows affected: 1
2025-09-11 16:35:37,629 - db_manager - INFO - Grievance updated in db: GR-20250911-KOJH-2E3B-B
2025-09-11 16:35:37,629 - db_manager - INFO - Connecting to database: grievance_db
2025-09-11 16:35:37,633 - db_manager - INFO - Starting database transaction
2025-09-11 16:35:37,634 - db_manager - INFO - Executing get_grievance_files: 
            SELECT file_id, file_name, file_type, file_size, upload_timestamp
            FROM file...
2025-09-11 16:35:37,636 - db_manager - INFO - get_grievance_files completed in 0.01s. Rows: 0
2025-09-11 16:35:37,636 - db_manager - INFO - Transaction committed successfully
2025-09-11 16:35:37,636 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-11 16:35:37,636 - db_manager - INFO - Connecting to database: grievance_db
2025-09-11 16:35:37,641 - db_manager - INFO - Starting database transaction
2025-09-11 16:35:37,641 - db_manager - INFO - Executing get_grievance_files: 
            SELECT file_id, file_name, file_type, file_size, upload_timestamp
            FROM file...
2025-09-11 16:35:37,642 - db_manager - INFO - get_grievance_files completed in 0.01s. Rows: 0
2025-09-11 16:35:37,642 - db_manager - INFO - Transaction committed successfully
2025-09-11 16:35:37,642 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-11 16:35:37,693 - db_manager - INFO - Connecting to database: grievance_db
2025-09-11 16:35:37,699 - db_manager - INFO - Starting database transaction
2025-09-11 16:35:37,699 - db_manager - INFO - Executing get_grievance_by_id: 
                SELECT g.*, c.complainant_full_name, c.complainant_phone, c.complainant_email,
    ...
2025-09-11 16:35:37,700 - db_manager - INFO - get_grievance_by_id completed in 0.01s. Rows: 1
2025-09-11 16:35:37,701 - db_manager - INFO - Transaction committed successfully
2025-09-11 16:35:37,701 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-11 16:35:37,701 - db_manager - DEBUG - get_grievance_by_id: grievance_id: {'grievance_id': 'GR-20250911-KOJH-2E3B-B', 'complainant_id': 'CM-20250911-KOJH-7044-B', 'grievance_categories': [], 'grievance_categories_alternative': [], 'follow_up_question': [''], 'grievance_summary': '', 'grievance_description': 'there is dust everywhere, my kids are sick now, I need to bring them to hospital', 'grievance_claimed_amount': None, 'grievance_location': None, 'language_code': 'en', 'grievance_classification_status': 'pending', 'grievance_creation_date': datetime.datetime(2025, 9, 11, 16, 35, 15, 680516, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'grievance_modification_date': datetime.datetime(2025, 9, 11, 16, 35, 37, 626126, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'is_temporary': True, 'source': 'bot', 'complainant_full_name': 'c30d040703028670d81a3846cb0b7fd23d01fdd048031c8c8c88c260308e5715b83150d22c85e30aa6022d41806fa34d8e85037cc9eb2aaa38e99d730a9294ec08289c9fe7721e603fd93c404535', 'complainant_phone': 'c30d0407030247f811ce8fffb1b672d23d0109fe86ca2c0ccf71774e4af5c5f907a0cb5519825c44d70e9bbdfbe4926761f32fbf395980852fdcae7d79807148a841cf270a8b42d10728c78de169', 'complainant_email': 'c30d04070302b9877a97ccf7224c6cd23d01f47de0e288c2a053d9d61e00389b76fddbeb0ac480c9ebc03c16d2bf208ed4d97f266ab402b453d11686c32504c0892128f275e577d510e03d5ef406', 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_municipality': None, 'complainant_ward': None, 'complainant_village': None, 'complainant_address': None}, results: [{'grievance_id': 'GR-20250911-KOJH-2E3B-B', 'complainant_id': 'CM-20250911-KOJH-7044-B', 'grievance_categories': '[]', 'grievance_categories_alternative': '[]', 'follow_up_question': '[""]', 'grievance_summary': '', 'grievance_description': 'there is dust everywhere, my kids are sick now, I need to bring them to hospital', 'grievance_claimed_amount': None, 'grievance_location': None, 'language_code': 'en', 'grievance_classification_status': 'pending', 'grievance_creation_date': datetime.datetime(2025, 9, 11, 16, 35, 15, 680516, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'grievance_modification_date': datetime.datetime(2025, 9, 11, 16, 35, 37, 626126, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'is_temporary': True, 'source': 'bot', 'complainant_full_name': 'c30d040703028670d81a3846cb0b7fd23d01fdd048031c8c8c88c260308e5715b83150d22c85e30aa6022d41806fa34d8e85037cc9eb2aaa38e99d730a9294ec08289c9fe7721e603fd93c404535', 'complainant_phone': 'c30d0407030247f811ce8fffb1b672d23d0109fe86ca2c0ccf71774e4af5c5f907a0cb5519825c44d70e9bbdfbe4926761f32fbf395980852fdcae7d79807148a841cf270a8b42d10728c78de169', 'complainant_email': 'c30d04070302b9877a97ccf7224c6cd23d01f47de0e288c2a053d9d61e00389b76fddbeb0ac480c9ebc03c16d2bf208ed4d97f266ab402b453d11686c32504c0892128f275e577d510e03d5ef406', 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_municipality': None, 'complainant_ward': None, 'complainant_village': None, 'complainant_address': None}]
2025-09-11 16:35:37,802 - db_manager - INFO - Connecting to database: grievance_db
2025-09-11 16:35:37,809 - db_manager - INFO - Starting database transaction
2025-09-11 16:35:37,809 - db_manager - INFO - Executing get_complainant_id_from_grievance_id: 
            SELECT complainant_id
            FROM grievances
            WHERE grievance_id = %s
 ...
2025-09-11 16:35:37,810 - db_manager - INFO - get_complainant_id_from_grievance_id completed in 0.01s. Rows: 1
2025-09-11 16:35:37,810 - db_manager - INFO - Transaction committed successfully
2025-09-11 16:35:37,810 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-11 16:35:37,811 - db_manager - INFO - update_complainant: Updating complainant with ID: CM-20250911-KOJH-7044-B
2025-09-11 16:35:37,811 - db_manager - DEBUG - encrypted and hashed data at encrypt_and_hash_sensitive_data: {}
2025-09-11 16:35:37,811 - db_manager - DEBUG - encrypted_data at update_complainant: {}
2025-09-11 16:35:37,811 - db_manager - DEBUG - No complainant field to update
2025-09-11 16:35:37,811 - db_manager - INFO - Complainant updated in db: GR-20250911-KOJH-2E3B-B
2025-09-11 16:35:37,811 - db_manager - INFO - update_grievance: Updating grievance with ID: GR-20250911-KOJH-2E3B-B
2025-09-11 16:35:37,811 - db_manager - DEBUG - execute_update values: ('["N/A"]', 'N/A', 'GR-20250911-KOJH-2E3B-B')
2025-09-11 16:35:37,811 - db_manager - DEBUG - execute_update query: 
                    UPDATE grievances 
                    SET grievance_categories = %s, grievance_summary = %s, grievance_modification_date = CURRENT_TIMESTAMP
                    WHERE grievance_id = %s
                    RETURNING grievance_id
                
2025-09-11 16:35:37,811 - db_manager - INFO - Connecting to database: grievance_db
2025-09-11 16:35:37,817 - db_manager - INFO - Starting database transaction
2025-09-11 16:35:37,817 - db_manager - INFO - execute_update: Executing update query: 
                    UPDATE grievances 
                    SET grievance_categories = %s, grievance...
2025-09-11 16:35:37,818 - db_manager - INFO - execute_update: Update completed in 0.01s. Affected rows: 1
2025-09-11 16:35:37,820 - db_manager - INFO - Transaction committed successfully
2025-09-11 16:35:37,820 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-11 16:35:37,820 - db_manager - INFO - update_grievance: Updated grievance with ID: GR-20250911-KOJH-2E3B-B, rows affected: 1
2025-09-11 16:35:37,820 - db_manager - INFO - Grievance updated in db: GR-20250911-KOJH-2E3B-B
2025-09-11 16:35:37,864 - db_manager - INFO - Connecting to database: grievance_db
2025-09-11 16:35:37,870 - db_manager - INFO - Starting database transaction
2025-09-11 16:35:37,870 - db_manager - INFO - Executing get_grievance_files: 
            SELECT file_id, file_name, file_type, file_size, upload_timestamp
            FROM file...
2025-09-11 16:35:37,871 - db_manager - INFO - get_grievance_files completed in 0.01s. Rows: 0
2025-09-11 16:35:37,871 - db_manager - INFO - Transaction committed successfully
2025-09-11 16:35:37,872 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-11 16:36:07,697 - db_manager - INFO - create_complainant: Creating complainant with ID: CM-20250911-KOJH-4556-B
2025-09-11 16:36:07,697 - db_manager - DEBUG - encrypted and hashed data at encrypt_and_hash_sensitive_data: {'complainant_id': 'CM-20250911-KOJH-4556-B', 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_unique_id': 'CM-20250911-KOJH-4556-B'}
2025-09-11 16:36:07,697 - db_manager - DEBUG - query_keys at generate_query_string: dict_keys(['complainant_id', 'complainant_province', 'complainant_district', 'complainant_unique_id'])
2025-09-11 16:36:07,697 - db_manager - DEBUG - Generated query: INSERT INTO complainants (complainant_id, complainant_province, complainant_district, complainant_unique_id) VALUES (%s, %s, %s, %s)
2025-09-11 16:36:07,697 - db_manager - DEBUG - len of query_keys: 4
2025-09-11 16:36:07,697 - db_manager - DEBUG - Generated query: INSERT INTO complainants (complainant_id, complainant_province, complainant_district, complainant_unique_id) VALUES (%s, %s, %s, %s)
2025-09-11 16:36:07,697 - db_manager - INFO - Connecting to database: grievance_db
2025-09-11 16:36:07,702 - db_manager - INFO - Starting database transaction
2025-09-11 16:36:07,704 - db_manager - INFO - Transaction committed successfully
2025-09-11 16:36:07,705 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-11 16:36:07,705 - db_manager - INFO - create_complainant: Successfully created complainant with ID: CM-20250911-KOJH-4556-B
2025-09-11 16:36:07,705 - db_manager - INFO - create_grievance: Creating grievance with data: {'grievance_id': 'GR-20250911-KOJH-07B5-B', 'complainant_id': 'CM-20250911-KOJH-4556-B', 'grievance_description': 'there is dust everywhere, my kids are sick now, I need to bring them to hospital', 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_office': None, 'source': 'bot', 'complainant_unique_id': 'CM-20250911-KOJH-4556-B'}
2025-09-11 16:36:07,705 - db_manager - INFO - create_grievance: Creating grievance with ID: GR-20250911-KOJH-07B5-B
2025-09-11 16:36:07,705 - db_manager - INFO - create_grievance: Creating grievance with allowed fields: ['grievance_id', 'complainant_id', 'grievance_categories', 'grievance_categories_alternative', 'follow_up_question', 'grievance_summary', 'grievance_description', 'grievance_claimed_amount', 'grievance_location', 'is_temporary', 'source', 'language_code', 'grievance_classification_status']
2025-09-11 16:36:07,705 - db_manager - DEBUG - query_keys at generate_query_string: dict_keys(['grievance_id', 'complainant_id', 'grievance_description', 'source'])
2025-09-11 16:36:07,705 - db_manager - DEBUG - Generated query: INSERT INTO grievances (grievance_id, complainant_id, grievance_description, source) VALUES (%s, %s, %s, %s) RETURNING grievance_id
2025-09-11 16:36:07,705 - db_manager - DEBUG - len of query_keys: 4
2025-09-11 16:36:07,705 - db_manager - DEBUG - Generated query: INSERT INTO grievances (grievance_id, complainant_id, grievance_description, source) VALUES (%s, %s, %s, %s) RETURNING grievance_id
2025-09-11 16:36:07,705 - db_manager - INFO - Connecting to database: grievance_db
2025-09-11 16:36:07,710 - db_manager - INFO - Starting database transaction
2025-09-11 16:36:07,713 - db_manager - INFO - Transaction committed successfully
2025-09-11 16:36:07,714 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-11 16:36:07,714 - db_manager - INFO - create_grievance: Successfully created grievance with ID: GR-20250911-KOJH-07B5-B
2025-09-11 16:36:40,711 - db_manager - INFO - Connecting to database: grievance_db
2025-09-11 16:36:40,716 - db_manager - INFO - Starting database transaction
2025-09-11 16:36:40,716 - db_manager - INFO - Executing get_complainant_by_id: 
            SELECT complainant_id, complainant_unique_id, complainant_full_name,    complainant_pho...
2025-09-11 16:36:40,717 - db_manager - INFO - get_complainant_by_id completed in 0.01s. Rows: 1
2025-09-11 16:36:40,717 - db_manager - INFO - Transaction committed successfully
2025-09-11 16:36:40,717 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-11 16:36:40,718 - db_manager - INFO - Connecting to database: grievance_db
2025-09-11 16:36:40,722 - db_manager - INFO - Starting database transaction
2025-09-11 16:36:40,722 - db_manager - INFO - Executing get_grievance_by_id: 
                SELECT g.*, c.complainant_full_name, c.complainant_phone, c.complainant_email,
    ...
2025-09-11 16:36:40,723 - db_manager - INFO - get_grievance_by_id completed in 0.01s. Rows: 1
2025-09-11 16:36:40,724 - db_manager - INFO - Transaction committed successfully
2025-09-11 16:36:40,724 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-11 16:36:40,724 - db_manager - DEBUG - get_grievance_by_id: grievance_id: {'grievance_id': 'GR-20250911-KOJH-07B5-B', 'complainant_id': 'CM-20250911-KOJH-4556-B', 'grievance_categories': [], 'grievance_categories_alternative': [], 'follow_up_question': [''], 'grievance_summary': '', 'grievance_description': 'there is dust everywhere, my kids are sick now, I need to bring them to hospital', 'grievance_claimed_amount': None, 'grievance_location': None, 'language_code': 'en', 'grievance_classification_status': 'pending', 'grievance_creation_date': datetime.datetime(2025, 9, 11, 16, 36, 7, 711030, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'grievance_modification_date': datetime.datetime(2025, 9, 11, 16, 36, 9, 309427, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'is_temporary': True, 'source': 'bot', 'complainant_full_name': None, 'complainant_phone': None, 'complainant_email': None, 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_municipality': None, 'complainant_ward': None, 'complainant_village': None, 'complainant_address': None}, results: [{'grievance_id': 'GR-20250911-KOJH-07B5-B', 'complainant_id': 'CM-20250911-KOJH-4556-B', 'grievance_categories': '[]', 'grievance_categories_alternative': '[]', 'follow_up_question': '[""]', 'grievance_summary': '', 'grievance_description': 'there is dust everywhere, my kids are sick now, I need to bring them to hospital', 'grievance_claimed_amount': None, 'grievance_location': None, 'language_code': 'en', 'grievance_classification_status': 'pending', 'grievance_creation_date': datetime.datetime(2025, 9, 11, 16, 36, 7, 711030, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'grievance_modification_date': datetime.datetime(2025, 9, 11, 16, 36, 9, 309427, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'is_temporary': True, 'source': 'bot', 'complainant_full_name': None, 'complainant_phone': None, 'complainant_email': None, 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_municipality': None, 'complainant_ward': None, 'complainant_village': None, 'complainant_address': None}]
2025-09-11 16:36:40,724 - db_manager - INFO - update_complainant: Updating complainant with ID: CM-20250911-KOJH-4556-B
2025-09-11 16:36:40,724 - db_manager - INFO - Connecting to database: grievance_db
2025-09-11 16:36:40,729 - db_manager - INFO - Starting database transaction
2025-09-11 16:36:40,730 - db_manager - INFO - Executing encrypt_field: SELECT encode(pgp_sym_encrypt(%s, %s), 'hex') AS encrypted...
2025-09-11 16:36:40,731 - db_manager - INFO - encrypt_field completed in 0.01s. Rows: 1
2025-09-11 16:36:40,731 - db_manager - INFO - Transaction committed successfully
2025-09-11 16:36:40,731 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-11 16:36:40,731 - db_manager - INFO - Connecting to database: grievance_db
2025-09-11 16:36:40,736 - db_manager - INFO - Starting database transaction
2025-09-11 16:36:40,737 - db_manager - INFO - Executing encrypt_field: SELECT encode(pgp_sym_encrypt(%s, %s), 'hex') AS encrypted...
2025-09-11 16:36:40,739 - db_manager - INFO - encrypt_field completed in 0.01s. Rows: 1
2025-09-11 16:36:40,739 - db_manager - INFO - Transaction committed successfully
2025-09-11 16:36:40,739 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-11 16:36:40,740 - db_manager - DEBUG - encrypted phone number Not provided at encrypt_complainant_data: c30d04070302bea1a15d486c06147ed23d0129bd073af20dac52bca629633ca2a8d639fe79ae9ca87b53f14f0d92485dcef210d34926bee55350181e76f56a8840b91e1453585a99dc72fcacc5cd
2025-09-11 16:36:40,740 - db_manager - INFO - Connecting to database: grievance_db
2025-09-11 16:36:40,746 - db_manager - INFO - Starting database transaction
2025-09-11 16:36:40,746 - db_manager - INFO - Executing encrypt_field: SELECT encode(pgp_sym_encrypt(%s, %s), 'hex') AS encrypted...
2025-09-11 16:36:40,747 - db_manager - INFO - encrypt_field completed in 0.01s. Rows: 1
2025-09-11 16:36:40,747 - db_manager - INFO - Transaction committed successfully
2025-09-11 16:36:40,747 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-11 16:36:40,748 - db_manager - DEBUG - phone number Not provided hashed to d83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f at hash_sensitive_data
2025-09-11 16:36:40,748 - db_manager - DEBUG - encrypted and hashed data at encrypt_and_hash_sensitive_data: {'complainant_full_name': 'c30d04070302ffd5a0395fdaa94673d23d012b064bb93c11484652aff330a2081b26ed0c26c781865d36369c87a4b746e4d6fed30c5a2ef30dfd412e86a8d3a9928cc13a4b8073cf457f649f273f', 'complainant_phone': 'c30d04070302bea1a15d486c06147ed23d0129bd073af20dac52bca629633ca2a8d639fe79ae9ca87b53f14f0d92485dcef210d34926bee55350181e76f56a8840b91e1453585a99dc72fcacc5cd', 'complainant_email': 'c30d040703027a91426cd5c377b265d23d0133529b2638660dcecb0c7b71d92ee677622ba5d57fbdd6f2d0863b44418da777f258e2ce12bee1635712a27ad2bf3d5e8fc2dfdbf3f3312626f753ac', 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_email_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'complainant_phone_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'complainant_full_name_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f'}
2025-09-11 16:36:40,748 - db_manager - DEBUG - encrypted_data at update_complainant: {'complainant_full_name': 'c30d04070302ffd5a0395fdaa94673d23d012b064bb93c11484652aff330a2081b26ed0c26c781865d36369c87a4b746e4d6fed30c5a2ef30dfd412e86a8d3a9928cc13a4b8073cf457f649f273f', 'complainant_phone': 'c30d04070302bea1a15d486c06147ed23d0129bd073af20dac52bca629633ca2a8d639fe79ae9ca87b53f14f0d92485dcef210d34926bee55350181e76f56a8840b91e1453585a99dc72fcacc5cd', 'complainant_email': 'c30d040703027a91426cd5c377b265d23d0133529b2638660dcecb0c7b71d92ee677622ba5d57fbdd6f2d0863b44418da777f258e2ce12bee1635712a27ad2bf3d5e8fc2dfdbf3f3312626f753ac', 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_email_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'complainant_phone_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'complainant_full_name_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f'}
2025-09-11 16:36:40,748 - db_manager - DEBUG - execute_update values: ('c30d04070302ffd5a0395fdaa94673d23d012b064bb93c11484652aff330a2081b26ed0c26c781865d36369c87a4b746e4d6fed30c5a2ef30dfd412e86a8d3a9928cc13a4b8073cf457f649f273f', 'c30d04070302bea1a15d486c06147ed23d0129bd073af20dac52bca629633ca2a8d639fe79ae9ca87b53f14f0d92485dcef210d34926bee55350181e76f56a8840b91e1453585a99dc72fcacc5cd', 'c30d040703027a91426cd5c377b265d23d0133529b2638660dcecb0c7b71d92ee677622ba5d57fbdd6f2d0863b44418da777f258e2ce12bee1635712a27ad2bf3d5e8fc2dfdbf3f3312626f753ac', 'Koshi', 'Jhapa', 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'CM-20250911-KOJH-4556-B')
2025-09-11 16:36:40,748 - db_manager - DEBUG - execute_update query: UPDATE complainants SET complainant_full_name = %s, complainant_phone = %s, complainant_email = %s, complainant_province = %s, complainant_district = %s, complainant_email_hash = %s, complainant_phone_hash = %s, complainant_full_name_hash = %s WHERE complainant_id = %s
2025-09-11 16:36:40,748 - db_manager - INFO - Connecting to database: grievance_db
2025-09-11 16:36:40,753 - db_manager - INFO - Starting database transaction
2025-09-11 16:36:40,753 - db_manager - INFO - execute_update: Executing update query: UPDATE complainants SET complainant_full_name = %s, complainant_phone = %s, complainant_email = %s, ...
2025-09-11 16:36:40,754 - db_manager - INFO - execute_update: Update completed in 0.01s. Affected rows: 1
2025-09-11 16:36:40,756 - db_manager - INFO - Transaction committed successfully
2025-09-11 16:36:40,756 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-11 16:36:40,756 - db_manager - INFO - Complainant updated in db: CM-20250911-KOJH-4556-B
2025-09-11 16:36:40,756 - db_manager - INFO - update_grievance: Updating grievance with ID: GR-20250911-KOJH-07B5-B
2025-09-11 16:36:40,757 - db_manager - DEBUG - execute_update values: ('there is dust everywhere, my kids are sick now, I need to bring them to hospital', 'GR-20250911-KOJH-07B5-B')
2025-09-11 16:36:40,757 - db_manager - DEBUG - execute_update query: 
                    UPDATE grievances 
                    SET grievance_description = %s, grievance_modification_date = CURRENT_TIMESTAMP
                    WHERE grievance_id = %s
                    RETURNING grievance_id
                
2025-09-11 16:36:40,757 - db_manager - INFO - Connecting to database: grievance_db
2025-09-11 16:36:40,762 - db_manager - INFO - Starting database transaction
2025-09-11 16:36:40,762 - db_manager - INFO - execute_update: Executing update query: 
                    UPDATE grievances 
                    SET grievance_description = %s, grievanc...
2025-09-11 16:36:40,763 - db_manager - INFO - execute_update: Update completed in 0.01s. Affected rows: 1
2025-09-11 16:36:40,768 - db_manager - INFO - Transaction committed successfully
2025-09-11 16:36:40,768 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-11 16:36:40,768 - db_manager - INFO - update_grievance: Updated grievance with ID: GR-20250911-KOJH-07B5-B, rows affected: 1
2025-09-11 16:36:40,768 - db_manager - INFO - Grievance updated in db: GR-20250911-KOJH-07B5-B
2025-09-11 16:36:40,768 - db_manager - INFO - Connecting to database: grievance_db
2025-09-11 16:36:40,773 - db_manager - INFO - Starting database transaction
2025-09-11 16:36:40,774 - db_manager - INFO - Executing get_grievance_files: 
            SELECT file_id, file_name, file_type, file_size, upload_timestamp
            FROM file...
2025-09-11 16:36:40,775 - db_manager - INFO - get_grievance_files completed in 0.01s. Rows: 0
2025-09-11 16:36:40,775 - db_manager - INFO - Transaction committed successfully
2025-09-11 16:36:40,775 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-11 16:36:40,775 - db_manager - INFO - Connecting to database: grievance_db
2025-09-11 16:36:40,780 - db_manager - INFO - Starting database transaction
2025-09-11 16:36:40,780 - db_manager - INFO - Executing get_grievance_files: 
            SELECT file_id, file_name, file_type, file_size, upload_timestamp
            FROM file...
2025-09-11 16:36:40,781 - db_manager - INFO - get_grievance_files completed in 0.01s. Rows: 0
2025-09-11 16:36:40,781 - db_manager - INFO - Transaction committed successfully
2025-09-11 16:36:40,781 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-11 16:36:40,822 - db_manager - INFO - Connecting to database: grievance_db
2025-09-11 16:36:40,830 - db_manager - INFO - Starting database transaction
2025-09-11 16:36:40,830 - db_manager - INFO - Executing get_grievance_by_id: 
                SELECT g.*, c.complainant_full_name, c.complainant_phone, c.complainant_email,
    ...
2025-09-11 16:36:40,831 - db_manager - INFO - get_grievance_by_id completed in 0.01s. Rows: 1
2025-09-11 16:36:40,832 - db_manager - INFO - Transaction committed successfully
2025-09-11 16:36:40,832 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-11 16:36:40,832 - db_manager - DEBUG - get_grievance_by_id: grievance_id: {'grievance_id': 'GR-20250911-KOJH-07B5-B', 'complainant_id': 'CM-20250911-KOJH-4556-B', 'grievance_categories': [], 'grievance_categories_alternative': [], 'follow_up_question': [''], 'grievance_summary': '', 'grievance_description': 'there is dust everywhere, my kids are sick now, I need to bring them to hospital', 'grievance_claimed_amount': None, 'grievance_location': None, 'language_code': 'en', 'grievance_classification_status': 'pending', 'grievance_creation_date': datetime.datetime(2025, 9, 11, 16, 36, 7, 711030, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'grievance_modification_date': datetime.datetime(2025, 9, 11, 16, 36, 40, 762539, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'is_temporary': True, 'source': 'bot', 'complainant_full_name': 'c30d04070302ffd5a0395fdaa94673d23d012b064bb93c11484652aff330a2081b26ed0c26c781865d36369c87a4b746e4d6fed30c5a2ef30dfd412e86a8d3a9928cc13a4b8073cf457f649f273f', 'complainant_phone': 'c30d04070302bea1a15d486c06147ed23d0129bd073af20dac52bca629633ca2a8d639fe79ae9ca87b53f14f0d92485dcef210d34926bee55350181e76f56a8840b91e1453585a99dc72fcacc5cd', 'complainant_email': 'c30d040703027a91426cd5c377b265d23d0133529b2638660dcecb0c7b71d92ee677622ba5d57fbdd6f2d0863b44418da777f258e2ce12bee1635712a27ad2bf3d5e8fc2dfdbf3f3312626f753ac', 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_municipality': None, 'complainant_ward': None, 'complainant_village': None, 'complainant_address': None}, results: [{'grievance_id': 'GR-20250911-KOJH-07B5-B', 'complainant_id': 'CM-20250911-KOJH-4556-B', 'grievance_categories': '[]', 'grievance_categories_alternative': '[]', 'follow_up_question': '[""]', 'grievance_summary': '', 'grievance_description': 'there is dust everywhere, my kids are sick now, I need to bring them to hospital', 'grievance_claimed_amount': None, 'grievance_location': None, 'language_code': 'en', 'grievance_classification_status': 'pending', 'grievance_creation_date': datetime.datetime(2025, 9, 11, 16, 36, 7, 711030, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'grievance_modification_date': datetime.datetime(2025, 9, 11, 16, 36, 40, 762539, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'is_temporary': True, 'source': 'bot', 'complainant_full_name': 'c30d04070302ffd5a0395fdaa94673d23d012b064bb93c11484652aff330a2081b26ed0c26c781865d36369c87a4b746e4d6fed30c5a2ef30dfd412e86a8d3a9928cc13a4b8073cf457f649f273f', 'complainant_phone': 'c30d04070302bea1a15d486c06147ed23d0129bd073af20dac52bca629633ca2a8d639fe79ae9ca87b53f14f0d92485dcef210d34926bee55350181e76f56a8840b91e1453585a99dc72fcacc5cd', 'complainant_email': 'c30d040703027a91426cd5c377b265d23d0133529b2638660dcecb0c7b71d92ee677622ba5d57fbdd6f2d0863b44418da777f258e2ce12bee1635712a27ad2bf3d5e8fc2dfdbf3f3312626f753ac', 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_municipality': None, 'complainant_ward': None, 'complainant_village': None, 'complainant_address': None}]
2025-09-11 16:36:40,930 - db_manager - INFO - Connecting to database: grievance_db
2025-09-11 16:36:40,936 - db_manager - INFO - Starting database transaction
2025-09-11 16:36:40,936 - db_manager - INFO - Executing get_complainant_id_from_grievance_id: 
            SELECT complainant_id
            FROM grievances
            WHERE grievance_id = %s
 ...
2025-09-11 16:36:40,937 - db_manager - INFO - get_complainant_id_from_grievance_id completed in 0.01s. Rows: 1
2025-09-11 16:36:40,938 - db_manager - INFO - Transaction committed successfully
2025-09-11 16:36:40,938 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-11 16:36:40,938 - db_manager - INFO - update_complainant: Updating complainant with ID: CM-20250911-KOJH-4556-B
2025-09-11 16:36:40,938 - db_manager - DEBUG - encrypted and hashed data at encrypt_and_hash_sensitive_data: {}
2025-09-11 16:36:40,938 - db_manager - DEBUG - encrypted_data at update_complainant: {}
2025-09-11 16:36:40,938 - db_manager - DEBUG - No complainant field to update
2025-09-11 16:36:40,938 - db_manager - INFO - Complainant updated in db: GR-20250911-KOJH-07B5-B
2025-09-11 16:36:40,938 - db_manager - INFO - update_grievance: Updating grievance with ID: GR-20250911-KOJH-07B5-B
2025-09-11 16:36:40,938 - db_manager - DEBUG - execute_update values: ('["N/A"]', 'N/A', 'GR-20250911-KOJH-07B5-B')
2025-09-11 16:36:40,938 - db_manager - DEBUG - execute_update query: 
                    UPDATE grievances 
                    SET grievance_categories = %s, grievance_summary = %s, grievance_modification_date = CURRENT_TIMESTAMP
                    WHERE grievance_id = %s
                    RETURNING grievance_id
                
2025-09-11 16:36:40,938 - db_manager - INFO - Connecting to database: grievance_db
2025-09-11 16:36:40,943 - db_manager - INFO - Starting database transaction
2025-09-11 16:36:40,943 - db_manager - INFO - execute_update: Executing update query: 
                    UPDATE grievances 
                    SET grievance_categories = %s, grievance...
2025-09-11 16:36:40,944 - db_manager - INFO - execute_update: Update completed in 0.01s. Affected rows: 1
2025-09-11 16:36:40,946 - db_manager - INFO - Transaction committed successfully
2025-09-11 16:36:40,946 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-11 16:36:40,946 - db_manager - INFO - update_grievance: Updated grievance with ID: GR-20250911-KOJH-07B5-B, rows affected: 1
2025-09-11 16:36:40,947 - db_manager - INFO - Grievance updated in db: GR-20250911-KOJH-07B5-B
2025-09-11 16:36:40,989 - db_manager - INFO - Connecting to database: grievance_db
2025-09-11 16:36:40,994 - db_manager - INFO - Starting database transaction
2025-09-11 16:36:40,994 - db_manager - INFO - Executing get_grievance_files: 
            SELECT file_id, file_name, file_type, file_size, upload_timestamp
            FROM file...
2025-09-11 16:36:40,995 - db_manager - INFO - get_grievance_files completed in 0.01s. Rows: 0
2025-09-11 16:36:40,995 - db_manager - INFO - Transaction committed successfully
2025-09-11 16:36:40,995 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-11 16:41:27,787 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-11 16:41:27,787 - db_manager - INFO - Database manager initialized successfully
2025-09-11 16:41:27,787 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-11 16:41:27,787 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-11 16:41:27,787 - db_manager - INFO - Database manager initialized successfully
2025-09-11 16:41:27,787 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-11 16:41:27,787 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-11 16:41:27,787 - db_manager - INFO - Database manager initialized successfully
2025-09-11 16:41:27,787 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-11 16:41:27,787 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-11 16:41:27,787 - db_manager - INFO - Database manager initialized successfully
2025-09-11 16:41:27,787 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-11 16:41:27,787 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-11 16:41:27,787 - db_manager - INFO - Database manager initialized successfully
2025-09-11 16:41:27,787 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-11 16:41:27,787 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-11 16:41:27,787 - db_manager - INFO - Database manager initialized successfully
2025-09-11 16:41:27,787 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-11 16:41:27,788 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-11 16:41:27,788 - db_manager - INFO - Database manager initialized successfully
2025-09-11 16:41:27,788 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-11 16:41:27,788 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-11 16:41:27,788 - db_manager - INFO - Database manager initialized successfully
2025-09-11 16:41:27,788 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-11 16:41:27,788 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-11 16:41:27,788 - db_manager - INFO - Database manager initialized successfully
2025-09-11 16:41:27,788 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-11 16:41:27,788 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-11 16:41:27,788 - db_manager - INFO - Database manager initialized successfully
2025-09-11 16:41:27,788 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-11 20:18:13,740 - db_manager - INFO - create_complainant: Creating complainant with ID: CM-20250911-KOJH-54FA-B
2025-09-11 20:18:13,740 - db_manager - DEBUG - encrypted and hashed data at encrypt_and_hash_sensitive_data: {'complainant_id': 'CM-20250911-KOJH-54FA-B', 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_unique_id': 'CM-20250911-KOJH-54FA-B'}
2025-09-11 20:18:13,740 - db_manager - DEBUG - query_keys at generate_query_string: dict_keys(['complainant_id', 'complainant_province', 'complainant_district', 'complainant_unique_id'])
2025-09-11 20:18:13,740 - db_manager - DEBUG - Generated query: INSERT INTO complainants (complainant_id, complainant_province, complainant_district, complainant_unique_id) VALUES (%s, %s, %s, %s)
2025-09-11 20:18:13,740 - db_manager - DEBUG - len of query_keys: 4
2025-09-11 20:18:13,740 - db_manager - DEBUG - Generated query: INSERT INTO complainants (complainant_id, complainant_province, complainant_district, complainant_unique_id) VALUES (%s, %s, %s, %s)
2025-09-11 20:18:13,740 - db_manager - INFO - Connecting to database: grievance_db
2025-09-11 20:18:13,748 - db_manager - INFO - Starting database transaction
2025-09-11 20:18:13,751 - db_manager - INFO - Transaction committed successfully
2025-09-11 20:18:13,751 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-11 20:18:13,752 - db_manager - INFO - create_complainant: Successfully created complainant with ID: CM-20250911-KOJH-54FA-B
2025-09-11 20:18:13,752 - db_manager - INFO - create_grievance: Creating grievance with data: {'grievance_id': 'GR-20250911-KOJH-E084-B', 'complainant_id': 'CM-20250911-KOJH-54FA-B', 'grievance_description': 'there is dust everywhere, my kids are sick now, I need to bring them to hospital', 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_office': None, 'source': 'bot', 'complainant_unique_id': 'CM-20250911-KOJH-54FA-B'}
2025-09-11 20:18:13,752 - db_manager - INFO - create_grievance: Creating grievance with ID: GR-20250911-KOJH-E084-B
2025-09-11 20:18:13,752 - db_manager - INFO - create_grievance: Creating grievance with allowed fields: ['grievance_id', 'complainant_id', 'grievance_categories', 'grievance_categories_alternative', 'follow_up_question', 'grievance_summary', 'grievance_description', 'grievance_claimed_amount', 'grievance_location', 'is_temporary', 'source', 'language_code', 'grievance_classification_status']
2025-09-11 20:18:13,752 - db_manager - DEBUG - query_keys at generate_query_string: dict_keys(['grievance_id', 'complainant_id', 'grievance_description', 'source'])
2025-09-11 20:18:13,752 - db_manager - DEBUG - Generated query: INSERT INTO grievances (grievance_id, complainant_id, grievance_description, source) VALUES (%s, %s, %s, %s) RETURNING grievance_id
2025-09-11 20:18:13,752 - db_manager - DEBUG - len of query_keys: 4
2025-09-11 20:18:13,752 - db_manager - DEBUG - Generated query: INSERT INTO grievances (grievance_id, complainant_id, grievance_description, source) VALUES (%s, %s, %s, %s) RETURNING grievance_id
2025-09-11 20:18:13,752 - db_manager - INFO - Connecting to database: grievance_db
2025-09-11 20:18:13,757 - db_manager - INFO - Starting database transaction
2025-09-11 20:18:13,761 - db_manager - INFO - Transaction committed successfully
2025-09-11 20:18:13,762 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-11 20:18:13,762 - db_manager - INFO - create_grievance: Successfully created grievance with ID: GR-20250911-KOJH-E084-B
2025-09-11 20:18:43,546 - db_manager - INFO - Connecting to database: grievance_db
2025-09-11 20:18:43,552 - db_manager - INFO - Starting database transaction
2025-09-11 20:18:43,552 - db_manager - INFO - Executing get_complainant_by_id: 
            SELECT complainant_id, complainant_unique_id, complainant_full_name,    complainant_pho...
2025-09-11 20:18:43,553 - db_manager - INFO - get_complainant_by_id completed in 0.01s. Rows: 1
2025-09-11 20:18:43,554 - db_manager - INFO - Transaction committed successfully
2025-09-11 20:18:43,554 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-11 20:18:43,554 - db_manager - INFO - Connecting to database: grievance_db
2025-09-11 20:18:43,559 - db_manager - INFO - Starting database transaction
2025-09-11 20:18:43,559 - db_manager - INFO - Executing get_grievance_by_id: 
                SELECT g.*, c.complainant_full_name, c.complainant_phone, c.complainant_email,
    ...
2025-09-11 20:18:43,560 - db_manager - INFO - get_grievance_by_id completed in 0.01s. Rows: 1
2025-09-11 20:18:43,560 - db_manager - INFO - Transaction committed successfully
2025-09-11 20:18:43,560 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-11 20:18:43,561 - db_manager - DEBUG - get_grievance_by_id: grievance_id: {'grievance_id': 'GR-20250911-KOJH-E084-B', 'complainant_id': 'CM-20250911-KOJH-54FA-B', 'grievance_categories': [], 'grievance_categories_alternative': [], 'follow_up_question': [''], 'grievance_summary': '', 'grievance_description': 'there is dust everywhere, my kids are sick now, I need to bring them to hospital', 'grievance_claimed_amount': None, 'grievance_location': None, 'language_code': 'en', 'grievance_classification_status': 'pending', 'grievance_creation_date': datetime.datetime(2025, 9, 11, 20, 18, 13, 758100, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'grievance_modification_date': datetime.datetime(2025, 9, 11, 20, 18, 20, 481412, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'is_temporary': True, 'source': 'bot', 'complainant_full_name': None, 'complainant_phone': None, 'complainant_email': None, 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_municipality': None, 'complainant_ward': None, 'complainant_village': None, 'complainant_address': None}, results: [{'grievance_id': 'GR-20250911-KOJH-E084-B', 'complainant_id': 'CM-20250911-KOJH-54FA-B', 'grievance_categories': '[]', 'grievance_categories_alternative': '[]', 'follow_up_question': '[""]', 'grievance_summary': '', 'grievance_description': 'there is dust everywhere, my kids are sick now, I need to bring them to hospital', 'grievance_claimed_amount': None, 'grievance_location': None, 'language_code': 'en', 'grievance_classification_status': 'pending', 'grievance_creation_date': datetime.datetime(2025, 9, 11, 20, 18, 13, 758100, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'grievance_modification_date': datetime.datetime(2025, 9, 11, 20, 18, 20, 481412, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'is_temporary': True, 'source': 'bot', 'complainant_full_name': None, 'complainant_phone': None, 'complainant_email': None, 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_municipality': None, 'complainant_ward': None, 'complainant_village': None, 'complainant_address': None}]
2025-09-11 20:18:43,561 - db_manager - INFO - update_complainant: Updating complainant with ID: CM-20250911-KOJH-54FA-B
2025-09-11 20:18:43,561 - db_manager - INFO - Connecting to database: grievance_db
2025-09-11 20:18:43,566 - db_manager - INFO - Starting database transaction
2025-09-11 20:18:43,566 - db_manager - INFO - Executing encrypt_field: SELECT encode(pgp_sym_encrypt(%s, %s), 'hex') AS encrypted...
2025-09-11 20:18:43,570 - db_manager - INFO - encrypt_field completed in 0.01s. Rows: 1
2025-09-11 20:18:43,570 - db_manager - INFO - Transaction committed successfully
2025-09-11 20:18:43,570 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-11 20:18:43,570 - db_manager - DEBUG - encrypted phone number Not provided at encrypt_complainant_data: c30d04070302b3b0710419ac225562d23d01a2d6ea2a56ff14f7b0d27576e44d8a4f79c8e75d5036a95879460492a27d9ad2dc0d3a81a7bcaf22f058626c8b0ec1c96c3bcc4f488dee9060759cbc
2025-09-11 20:18:43,570 - db_manager - INFO - Connecting to database: grievance_db
2025-09-11 20:18:43,575 - db_manager - INFO - Starting database transaction
2025-09-11 20:18:43,575 - db_manager - INFO - Executing encrypt_field: SELECT encode(pgp_sym_encrypt(%s, %s), 'hex') AS encrypted...
2025-09-11 20:18:43,576 - db_manager - INFO - encrypt_field completed in 0.01s. Rows: 1
2025-09-11 20:18:43,576 - db_manager - INFO - Transaction committed successfully
2025-09-11 20:18:43,576 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-11 20:18:43,577 - db_manager - INFO - Connecting to database: grievance_db
2025-09-11 20:18:43,581 - db_manager - INFO - Starting database transaction
2025-09-11 20:18:43,581 - db_manager - INFO - Executing encrypt_field: SELECT encode(pgp_sym_encrypt(%s, %s), 'hex') AS encrypted...
2025-09-11 20:18:43,582 - db_manager - INFO - encrypt_field completed in 0.01s. Rows: 1
2025-09-11 20:18:43,583 - db_manager - INFO - Transaction committed successfully
2025-09-11 20:18:43,583 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-11 20:18:43,583 - db_manager - DEBUG - phone number Not provided hashed to d83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f at hash_sensitive_data
2025-09-11 20:18:43,583 - db_manager - DEBUG - encrypted and hashed data at encrypt_and_hash_sensitive_data: {'complainant_full_name': 'c30d040703022c34e91b573b6a356ed23d01c4b808f8da6fc08e4b5004f8a2f9e1359343d70531b91e2c42d73bb940cdf3126081a6db3ba43f37e87b696a60a1e4a6a20b24e1dd833f744bba1291', 'complainant_phone': 'c30d04070302b3b0710419ac225562d23d01a2d6ea2a56ff14f7b0d27576e44d8a4f79c8e75d5036a95879460492a27d9ad2dc0d3a81a7bcaf22f058626c8b0ec1c96c3bcc4f488dee9060759cbc', 'complainant_email': 'c30d04070302244274c5c02b57e56ad23d01a09deb930b807216f7f02a8f3ce373c9aee7a8e11859cdd0c8257bcf2aec9d3938d3984693ebc00eadcbb9a80735540d2a6c1d453eaea46e4bb32f4a', 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_phone_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'complainant_full_name_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'complainant_email_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f'}
2025-09-11 20:18:43,583 - db_manager - DEBUG - encrypted_data at update_complainant: {'complainant_full_name': 'c30d040703022c34e91b573b6a356ed23d01c4b808f8da6fc08e4b5004f8a2f9e1359343d70531b91e2c42d73bb940cdf3126081a6db3ba43f37e87b696a60a1e4a6a20b24e1dd833f744bba1291', 'complainant_phone': 'c30d04070302b3b0710419ac225562d23d01a2d6ea2a56ff14f7b0d27576e44d8a4f79c8e75d5036a95879460492a27d9ad2dc0d3a81a7bcaf22f058626c8b0ec1c96c3bcc4f488dee9060759cbc', 'complainant_email': 'c30d04070302244274c5c02b57e56ad23d01a09deb930b807216f7f02a8f3ce373c9aee7a8e11859cdd0c8257bcf2aec9d3938d3984693ebc00eadcbb9a80735540d2a6c1d453eaea46e4bb32f4a', 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_phone_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'complainant_full_name_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'complainant_email_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f'}
2025-09-11 20:18:43,583 - db_manager - DEBUG - execute_update values: ('c30d040703022c34e91b573b6a356ed23d01c4b808f8da6fc08e4b5004f8a2f9e1359343d70531b91e2c42d73bb940cdf3126081a6db3ba43f37e87b696a60a1e4a6a20b24e1dd833f744bba1291', 'c30d04070302b3b0710419ac225562d23d01a2d6ea2a56ff14f7b0d27576e44d8a4f79c8e75d5036a95879460492a27d9ad2dc0d3a81a7bcaf22f058626c8b0ec1c96c3bcc4f488dee9060759cbc', 'c30d04070302244274c5c02b57e56ad23d01a09deb930b807216f7f02a8f3ce373c9aee7a8e11859cdd0c8257bcf2aec9d3938d3984693ebc00eadcbb9a80735540d2a6c1d453eaea46e4bb32f4a', 'Koshi', 'Jhapa', 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'CM-20250911-KOJH-54FA-B')
2025-09-11 20:18:43,583 - db_manager - DEBUG - execute_update query: UPDATE complainants SET complainant_full_name = %s, complainant_phone = %s, complainant_email = %s, complainant_province = %s, complainant_district = %s, complainant_phone_hash = %s, complainant_full_name_hash = %s, complainant_email_hash = %s WHERE complainant_id = %s
2025-09-11 20:18:43,583 - db_manager - INFO - Connecting to database: grievance_db
2025-09-11 20:18:43,588 - db_manager - INFO - Starting database transaction
2025-09-11 20:18:43,588 - db_manager - INFO - execute_update: Executing update query: UPDATE complainants SET complainant_full_name = %s, complainant_phone = %s, complainant_email = %s, ...
2025-09-11 20:18:43,589 - db_manager - INFO - execute_update: Update completed in 0.01s. Affected rows: 1
2025-09-11 20:18:43,590 - db_manager - INFO - Transaction committed successfully
2025-09-11 20:18:43,590 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-11 20:18:43,591 - db_manager - INFO - Complainant updated in db: CM-20250911-KOJH-54FA-B
2025-09-11 20:18:43,591 - db_manager - INFO - update_grievance: Updating grievance with ID: GR-20250911-KOJH-E084-B
2025-09-11 20:18:43,591 - db_manager - DEBUG - execute_update values: ('there is dust everywhere, my kids are sick now, I need to bring them to hospital', 'GR-20250911-KOJH-E084-B')
2025-09-11 20:18:43,591 - db_manager - DEBUG - execute_update query: 
                    UPDATE grievances 
                    SET grievance_description = %s, grievance_modification_date = CURRENT_TIMESTAMP
                    WHERE grievance_id = %s
                    RETURNING grievance_id
                
2025-09-11 20:18:43,591 - db_manager - INFO - Connecting to database: grievance_db
2025-09-11 20:18:43,595 - db_manager - INFO - Starting database transaction
2025-09-11 20:18:43,595 - db_manager - INFO - execute_update: Executing update query: 
                    UPDATE grievances 
                    SET grievance_description = %s, grievanc...
2025-09-11 20:18:43,596 - db_manager - INFO - execute_update: Update completed in 0.01s. Affected rows: 1
2025-09-11 20:18:43,598 - db_manager - INFO - Transaction committed successfully
2025-09-11 20:18:43,598 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-11 20:18:43,598 - db_manager - INFO - update_grievance: Updated grievance with ID: GR-20250911-KOJH-E084-B, rows affected: 1
2025-09-11 20:18:43,598 - db_manager - INFO - Grievance updated in db: GR-20250911-KOJH-E084-B
2025-09-11 20:18:43,598 - db_manager - INFO - Connecting to database: grievance_db
2025-09-11 20:18:43,603 - db_manager - INFO - Starting database transaction
2025-09-11 20:18:43,603 - db_manager - INFO - Executing get_grievance_files: 
            SELECT file_id, file_name, file_type, file_size, upload_timestamp
            FROM file...
2025-09-11 20:18:43,604 - db_manager - INFO - get_grievance_files completed in 0.01s. Rows: 0
2025-09-11 20:18:43,604 - db_manager - INFO - Transaction committed successfully
2025-09-11 20:18:43,604 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-11 20:18:43,605 - db_manager - INFO - Connecting to database: grievance_db
2025-09-11 20:18:43,609 - db_manager - INFO - Starting database transaction
2025-09-11 20:18:43,609 - db_manager - INFO - Executing get_grievance_files: 
            SELECT file_id, file_name, file_type, file_size, upload_timestamp
            FROM file...
2025-09-11 20:18:43,610 - db_manager - INFO - get_grievance_files completed in 0.01s. Rows: 0
2025-09-11 20:18:43,610 - db_manager - INFO - Transaction committed successfully
2025-09-11 20:18:43,611 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-11 20:18:43,652 - db_manager - INFO - Connecting to database: grievance_db
2025-09-11 20:18:43,658 - db_manager - INFO - Starting database transaction
2025-09-11 20:18:43,658 - db_manager - INFO - Executing get_grievance_by_id: 
                SELECT g.*, c.complainant_full_name, c.complainant_phone, c.complainant_email,
    ...
2025-09-11 20:18:43,659 - db_manager - INFO - get_grievance_by_id completed in 0.01s. Rows: 1
2025-09-11 20:18:43,660 - db_manager - INFO - Transaction committed successfully
2025-09-11 20:18:43,660 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-11 20:18:43,660 - db_manager - DEBUG - get_grievance_by_id: grievance_id: {'grievance_id': 'GR-20250911-KOJH-E084-B', 'complainant_id': 'CM-20250911-KOJH-54FA-B', 'grievance_categories': [], 'grievance_categories_alternative': [], 'follow_up_question': [''], 'grievance_summary': '', 'grievance_description': 'there is dust everywhere, my kids are sick now, I need to bring them to hospital', 'grievance_claimed_amount': None, 'grievance_location': None, 'language_code': 'en', 'grievance_classification_status': 'pending', 'grievance_creation_date': datetime.datetime(2025, 9, 11, 20, 18, 13, 758100, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'grievance_modification_date': datetime.datetime(2025, 9, 11, 20, 18, 43, 595711, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'is_temporary': True, 'source': 'bot', 'complainant_full_name': 'c30d040703022c34e91b573b6a356ed23d01c4b808f8da6fc08e4b5004f8a2f9e1359343d70531b91e2c42d73bb940cdf3126081a6db3ba43f37e87b696a60a1e4a6a20b24e1dd833f744bba1291', 'complainant_phone': 'c30d04070302b3b0710419ac225562d23d01a2d6ea2a56ff14f7b0d27576e44d8a4f79c8e75d5036a95879460492a27d9ad2dc0d3a81a7bcaf22f058626c8b0ec1c96c3bcc4f488dee9060759cbc', 'complainant_email': 'c30d04070302244274c5c02b57e56ad23d01a09deb930b807216f7f02a8f3ce373c9aee7a8e11859cdd0c8257bcf2aec9d3938d3984693ebc00eadcbb9a80735540d2a6c1d453eaea46e4bb32f4a', 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_municipality': None, 'complainant_ward': None, 'complainant_village': None, 'complainant_address': None}, results: [{'grievance_id': 'GR-20250911-KOJH-E084-B', 'complainant_id': 'CM-20250911-KOJH-54FA-B', 'grievance_categories': '[]', 'grievance_categories_alternative': '[]', 'follow_up_question': '[""]', 'grievance_summary': '', 'grievance_description': 'there is dust everywhere, my kids are sick now, I need to bring them to hospital', 'grievance_claimed_amount': None, 'grievance_location': None, 'language_code': 'en', 'grievance_classification_status': 'pending', 'grievance_creation_date': datetime.datetime(2025, 9, 11, 20, 18, 13, 758100, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'grievance_modification_date': datetime.datetime(2025, 9, 11, 20, 18, 43, 595711, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'is_temporary': True, 'source': 'bot', 'complainant_full_name': 'c30d040703022c34e91b573b6a356ed23d01c4b808f8da6fc08e4b5004f8a2f9e1359343d70531b91e2c42d73bb940cdf3126081a6db3ba43f37e87b696a60a1e4a6a20b24e1dd833f744bba1291', 'complainant_phone': 'c30d04070302b3b0710419ac225562d23d01a2d6ea2a56ff14f7b0d27576e44d8a4f79c8e75d5036a95879460492a27d9ad2dc0d3a81a7bcaf22f058626c8b0ec1c96c3bcc4f488dee9060759cbc', 'complainant_email': 'c30d04070302244274c5c02b57e56ad23d01a09deb930b807216f7f02a8f3ce373c9aee7a8e11859cdd0c8257bcf2aec9d3938d3984693ebc00eadcbb9a80735540d2a6c1d453eaea46e4bb32f4a', 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_municipality': None, 'complainant_ward': None, 'complainant_village': None, 'complainant_address': None}]
2025-09-11 20:18:43,755 - db_manager - INFO - Connecting to database: grievance_db
2025-09-11 20:18:43,765 - db_manager - INFO - Starting database transaction
2025-09-11 20:18:43,765 - db_manager - INFO - Executing get_complainant_id_from_grievance_id: 
            SELECT complainant_id
            FROM grievances
            WHERE grievance_id = %s
 ...
2025-09-11 20:18:43,766 - db_manager - INFO - get_complainant_id_from_grievance_id completed in 0.01s. Rows: 1
2025-09-11 20:18:43,766 - db_manager - INFO - Transaction committed successfully
2025-09-11 20:18:43,766 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-11 20:18:43,766 - db_manager - INFO - update_complainant: Updating complainant with ID: CM-20250911-KOJH-54FA-B
2025-09-11 20:18:43,767 - db_manager - DEBUG - encrypted and hashed data at encrypt_and_hash_sensitive_data: {}
2025-09-11 20:18:43,767 - db_manager - DEBUG - encrypted_data at update_complainant: {}
2025-09-11 20:18:43,767 - db_manager - DEBUG - No complainant field to update
2025-09-11 20:18:43,767 - db_manager - INFO - Complainant updated in db: GR-20250911-KOJH-E084-B
2025-09-11 20:18:43,767 - db_manager - INFO - update_grievance: Updating grievance with ID: GR-20250911-KOJH-E084-B
2025-09-11 20:18:43,767 - db_manager - DEBUG - execute_update values: ('["N/A"]', 'N/A', 'GR-20250911-KOJH-E084-B')
2025-09-11 20:18:43,767 - db_manager - DEBUG - execute_update query: 
                    UPDATE grievances 
                    SET grievance_categories = %s, grievance_summary = %s, grievance_modification_date = CURRENT_TIMESTAMP
                    WHERE grievance_id = %s
                    RETURNING grievance_id
                
2025-09-11 20:18:43,767 - db_manager - INFO - Connecting to database: grievance_db
2025-09-11 20:18:43,771 - db_manager - INFO - Starting database transaction
2025-09-11 20:18:43,772 - db_manager - INFO - execute_update: Executing update query: 
                    UPDATE grievances 
                    SET grievance_categories = %s, grievance...
2025-09-11 20:18:43,773 - db_manager - INFO - execute_update: Update completed in 0.01s. Affected rows: 1
2025-09-11 20:18:43,774 - db_manager - INFO - Transaction committed successfully
2025-09-11 20:18:43,774 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-11 20:18:43,774 - db_manager - INFO - update_grievance: Updated grievance with ID: GR-20250911-KOJH-E084-B, rows affected: 1
2025-09-11 20:18:43,774 - db_manager - INFO - Grievance updated in db: GR-20250911-KOJH-E084-B
2025-09-11 20:18:43,818 - db_manager - INFO - Connecting to database: grievance_db
2025-09-11 20:18:43,823 - db_manager - INFO - Starting database transaction
2025-09-11 20:18:43,823 - db_manager - INFO - Executing get_grievance_files: 
            SELECT file_id, file_name, file_type, file_size, upload_timestamp
            FROM file...
2025-09-11 20:18:43,824 - db_manager - INFO - get_grievance_files completed in 0.01s. Rows: 0
2025-09-11 20:18:43,824 - db_manager - INFO - Transaction committed successfully
2025-09-11 20:18:43,824 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-11 20:58:03,015 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-11 20:58:03,016 - db_manager - INFO - Database manager initialized successfully
2025-09-11 20:58:03,016 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-11 20:58:03,016 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-11 20:58:03,016 - db_manager - INFO - Database manager initialized successfully
2025-09-11 20:58:03,016 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-11 20:58:03,016 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-11 20:58:03,016 - db_manager - INFO - Database manager initialized successfully
2025-09-11 20:58:03,016 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-11 20:58:03,016 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-11 20:58:03,016 - db_manager - INFO - Database manager initialized successfully
2025-09-11 20:58:03,016 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-11 20:58:03,016 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-11 20:58:03,016 - db_manager - INFO - Database manager initialized successfully
2025-09-11 20:58:03,016 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-11 20:58:03,016 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-11 20:58:03,016 - db_manager - INFO - Database manager initialized successfully
2025-09-11 20:58:03,016 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-11 20:58:03,017 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-11 20:58:03,017 - db_manager - INFO - Database manager initialized successfully
2025-09-11 20:58:03,017 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-11 20:58:03,017 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-11 20:58:03,017 - db_manager - INFO - Database manager initialized successfully
2025-09-11 20:58:03,017 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-11 20:58:03,017 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-11 20:58:03,017 - db_manager - INFO - Database manager initialized successfully
2025-09-11 20:58:03,017 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-11 20:58:03,017 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-11 20:58:03,017 - db_manager - INFO - Database manager initialized successfully
2025-09-11 20:58:03,017 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-11 20:58:50,273 - db_manager - INFO - create_complainant: Creating complainant with ID: CM-20250911-KOJH-227A-B
2025-09-11 20:58:50,273 - db_manager - DEBUG - encrypted and hashed data at encrypt_and_hash_sensitive_data: {'complainant_id': 'CM-20250911-KOJH-227A-B', 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_unique_id': 'CM-20250911-KOJH-227A-B'}
2025-09-11 20:58:50,273 - db_manager - DEBUG - query_keys at generate_query_string: dict_keys(['complainant_id', 'complainant_province', 'complainant_district', 'complainant_unique_id'])
2025-09-11 20:58:50,273 - db_manager - DEBUG - Generated query: INSERT INTO complainants (complainant_id, complainant_province, complainant_district, complainant_unique_id) VALUES (%s, %s, %s, %s)
2025-09-11 20:58:50,273 - db_manager - DEBUG - len of query_keys: 4
2025-09-11 20:58:50,273 - db_manager - DEBUG - Generated query: INSERT INTO complainants (complainant_id, complainant_province, complainant_district, complainant_unique_id) VALUES (%s, %s, %s, %s)
2025-09-11 20:58:50,273 - db_manager - INFO - Connecting to database: grievance_db
2025-09-11 20:58:50,280 - db_manager - INFO - Starting database transaction
2025-09-11 20:58:50,282 - db_manager - INFO - Transaction committed successfully
2025-09-11 20:58:50,282 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-11 20:58:50,283 - db_manager - INFO - create_complainant: Successfully created complainant with ID: CM-20250911-KOJH-227A-B
2025-09-11 20:58:50,283 - db_manager - INFO - create_grievance: Creating grievance with data: {'grievance_id': 'GR-20250911-KOJH-7FA9-B', 'complainant_id': 'CM-20250911-KOJH-227A-B', 'grievance_description': 'there is dust everywhere, my kids are sick now, I need to bring them to hospital', 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_office': None, 'source': 'bot', 'complainant_unique_id': 'CM-20250911-KOJH-227A-B'}
2025-09-11 20:58:50,283 - db_manager - INFO - create_grievance: Creating grievance with ID: GR-20250911-KOJH-7FA9-B
2025-09-11 20:58:50,283 - db_manager - INFO - create_grievance: Creating grievance with allowed fields: ['grievance_id', 'complainant_id', 'grievance_categories', 'grievance_categories_alternative', 'follow_up_question', 'grievance_summary', 'grievance_description', 'grievance_claimed_amount', 'grievance_location', 'is_temporary', 'source', 'language_code', 'grievance_classification_status']
2025-09-11 20:58:50,283 - db_manager - DEBUG - query_keys at generate_query_string: dict_keys(['grievance_id', 'complainant_id', 'grievance_description', 'source'])
2025-09-11 20:58:50,283 - db_manager - DEBUG - Generated query: INSERT INTO grievances (grievance_id, complainant_id, grievance_description, source) VALUES (%s, %s, %s, %s) RETURNING grievance_id
2025-09-11 20:58:50,283 - db_manager - DEBUG - len of query_keys: 4
2025-09-11 20:58:50,283 - db_manager - DEBUG - Generated query: INSERT INTO grievances (grievance_id, complainant_id, grievance_description, source) VALUES (%s, %s, %s, %s) RETURNING grievance_id
2025-09-11 20:58:50,283 - db_manager - INFO - Connecting to database: grievance_db
2025-09-11 20:58:50,289 - db_manager - INFO - Starting database transaction
2025-09-11 20:58:50,294 - db_manager - INFO - Transaction committed successfully
2025-09-11 20:58:50,294 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-11 20:58:50,294 - db_manager - INFO - create_grievance: Successfully created grievance with ID: GR-20250911-KOJH-7FA9-B
2025-09-11 20:59:04,237 - db_manager - INFO - Connecting to database: grievance_db
2025-09-11 20:59:04,243 - db_manager - INFO - Starting database transaction
2025-09-11 20:59:04,243 - db_manager - INFO - Executing get_complainant_by_id: 
            SELECT complainant_id, complainant_unique_id, complainant_full_name,    complainant_pho...
2025-09-11 20:59:04,244 - db_manager - INFO - get_complainant_by_id completed in 0.01s. Rows: 1
2025-09-11 20:59:04,244 - db_manager - INFO - Transaction committed successfully
2025-09-11 20:59:04,244 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-11 20:59:04,245 - db_manager - INFO - Connecting to database: grievance_db
2025-09-11 20:59:04,249 - db_manager - INFO - Starting database transaction
2025-09-11 20:59:04,250 - db_manager - INFO - Executing get_grievance_by_id: 
                SELECT g.*, c.complainant_full_name, c.complainant_phone, c.complainant_email,
    ...
2025-09-11 20:59:04,251 - db_manager - INFO - get_grievance_by_id completed in 0.01s. Rows: 1
2025-09-11 20:59:04,251 - db_manager - INFO - Transaction committed successfully
2025-09-11 20:59:04,251 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-11 20:59:04,251 - db_manager - DEBUG - get_grievance_by_id: grievance_id: {'grievance_id': 'GR-20250911-KOJH-7FA9-B', 'complainant_id': 'CM-20250911-KOJH-227A-B', 'grievance_categories': [], 'grievance_categories_alternative': [], 'follow_up_question': [''], 'grievance_summary': '', 'grievance_description': 'there is dust everywhere, my kids are sick now, I need to bring them to hospital', 'grievance_claimed_amount': None, 'grievance_location': None, 'language_code': 'en', 'grievance_classification_status': 'pending', 'grievance_creation_date': datetime.datetime(2025, 9, 11, 20, 58, 50, 289382, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'grievance_modification_date': datetime.datetime(2025, 9, 11, 20, 58, 52, 12673, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'is_temporary': True, 'source': 'bot', 'complainant_full_name': None, 'complainant_phone': None, 'complainant_email': None, 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_municipality': None, 'complainant_ward': None, 'complainant_village': None, 'complainant_address': None}, results: [{'grievance_id': 'GR-20250911-KOJH-7FA9-B', 'complainant_id': 'CM-20250911-KOJH-227A-B', 'grievance_categories': '[]', 'grievance_categories_alternative': '[]', 'follow_up_question': '[""]', 'grievance_summary': '', 'grievance_description': 'there is dust everywhere, my kids are sick now, I need to bring them to hospital', 'grievance_claimed_amount': None, 'grievance_location': None, 'language_code': 'en', 'grievance_classification_status': 'pending', 'grievance_creation_date': datetime.datetime(2025, 9, 11, 20, 58, 50, 289382, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'grievance_modification_date': datetime.datetime(2025, 9, 11, 20, 58, 52, 12673, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'is_temporary': True, 'source': 'bot', 'complainant_full_name': None, 'complainant_phone': None, 'complainant_email': None, 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_municipality': None, 'complainant_ward': None, 'complainant_village': None, 'complainant_address': None}]
2025-09-11 20:59:04,251 - db_manager - INFO - update_complainant: Updating complainant with ID: CM-20250911-KOJH-227A-B
2025-09-11 20:59:04,252 - db_manager - INFO - Connecting to database: grievance_db
2025-09-11 20:59:04,256 - db_manager - INFO - Starting database transaction
2025-09-11 20:59:04,256 - db_manager - INFO - Executing encrypt_field: SELECT encode(pgp_sym_encrypt(%s, %s), 'hex') AS encrypted...
2025-09-11 20:59:04,260 - db_manager - INFO - encrypt_field completed in 0.01s. Rows: 1
2025-09-11 20:59:04,260 - db_manager - INFO - Transaction committed successfully
2025-09-11 20:59:04,260 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-11 20:59:04,260 - db_manager - DEBUG - encrypted phone number Not provided at encrypt_complainant_data: c30d04070302796942e6c2db3c4378d23d0136e5329a5ff13b6e7da979c7e105fa258a0d29f2c56187cbab021383b9d67aafea1491a6bfe45bcaa9d1f4a145863c46e0fb1034b9f05feb5bd38e36
2025-09-11 20:59:04,260 - db_manager - INFO - Connecting to database: grievance_db
2025-09-11 20:59:04,264 - db_manager - INFO - Starting database transaction
2025-09-11 20:59:04,265 - db_manager - INFO - Executing encrypt_field: SELECT encode(pgp_sym_encrypt(%s, %s), 'hex') AS encrypted...
2025-09-11 20:59:04,265 - db_manager - INFO - encrypt_field completed in 0.01s. Rows: 1
2025-09-11 20:59:04,265 - db_manager - INFO - Transaction committed successfully
2025-09-11 20:59:04,266 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-11 20:59:04,266 - db_manager - INFO - Connecting to database: grievance_db
2025-09-11 20:59:04,271 - db_manager - INFO - Starting database transaction
2025-09-11 20:59:04,271 - db_manager - INFO - Executing encrypt_field: SELECT encode(pgp_sym_encrypt(%s, %s), 'hex') AS encrypted...
2025-09-11 20:59:04,271 - db_manager - INFO - encrypt_field completed in 0.01s. Rows: 1
2025-09-11 20:59:04,272 - db_manager - INFO - Transaction committed successfully
2025-09-11 20:59:04,272 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-11 20:59:04,272 - db_manager - DEBUG - phone number Not provided hashed to d83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f at hash_sensitive_data
2025-09-11 20:59:04,272 - db_manager - DEBUG - encrypted and hashed data at encrypt_and_hash_sensitive_data: {'complainant_full_name': 'c30d04070302dec3f6f8f550eab36ad23d01954688fe2507b131be19c70687fe37f04f7b9f0f6e3a9cc5d88b027c3adcb5aac37d4ea7f39fb0533717a908333ec338924f8c279b2cfdd1bfb4e2fb', 'complainant_phone': 'c30d04070302796942e6c2db3c4378d23d0136e5329a5ff13b6e7da979c7e105fa258a0d29f2c56187cbab021383b9d67aafea1491a6bfe45bcaa9d1f4a145863c46e0fb1034b9f05feb5bd38e36', 'complainant_email': 'c30d04070302e4f98259b0bff2876dd23d01666e57f8c00066a60ccf93d4335ad6860e4e0f73aa54b6f6ab1d3db3dcb824b1e5f47ec39cc6774a6a533a6269a212131240a73918e05f3cb941939f', 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_phone_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'complainant_full_name_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'complainant_email_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f'}
2025-09-11 20:59:04,272 - db_manager - DEBUG - encrypted_data at update_complainant: {'complainant_full_name': 'c30d04070302dec3f6f8f550eab36ad23d01954688fe2507b131be19c70687fe37f04f7b9f0f6e3a9cc5d88b027c3adcb5aac37d4ea7f39fb0533717a908333ec338924f8c279b2cfdd1bfb4e2fb', 'complainant_phone': 'c30d04070302796942e6c2db3c4378d23d0136e5329a5ff13b6e7da979c7e105fa258a0d29f2c56187cbab021383b9d67aafea1491a6bfe45bcaa9d1f4a145863c46e0fb1034b9f05feb5bd38e36', 'complainant_email': 'c30d04070302e4f98259b0bff2876dd23d01666e57f8c00066a60ccf93d4335ad6860e4e0f73aa54b6f6ab1d3db3dcb824b1e5f47ec39cc6774a6a533a6269a212131240a73918e05f3cb941939f', 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_phone_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'complainant_full_name_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'complainant_email_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f'}
2025-09-11 20:59:04,272 - db_manager - DEBUG - execute_update values: ('c30d04070302dec3f6f8f550eab36ad23d01954688fe2507b131be19c70687fe37f04f7b9f0f6e3a9cc5d88b027c3adcb5aac37d4ea7f39fb0533717a908333ec338924f8c279b2cfdd1bfb4e2fb', 'c30d04070302796942e6c2db3c4378d23d0136e5329a5ff13b6e7da979c7e105fa258a0d29f2c56187cbab021383b9d67aafea1491a6bfe45bcaa9d1f4a145863c46e0fb1034b9f05feb5bd38e36', 'c30d04070302e4f98259b0bff2876dd23d01666e57f8c00066a60ccf93d4335ad6860e4e0f73aa54b6f6ab1d3db3dcb824b1e5f47ec39cc6774a6a533a6269a212131240a73918e05f3cb941939f', 'Koshi', 'Jhapa', 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'CM-20250911-KOJH-227A-B')
2025-09-11 20:59:04,272 - db_manager - DEBUG - execute_update query: UPDATE complainants SET complainant_full_name = %s, complainant_phone = %s, complainant_email = %s, complainant_province = %s, complainant_district = %s, complainant_phone_hash = %s, complainant_full_name_hash = %s, complainant_email_hash = %s WHERE complainant_id = %s
2025-09-11 20:59:04,272 - db_manager - INFO - Connecting to database: grievance_db
2025-09-11 20:59:04,276 - db_manager - INFO - Starting database transaction
2025-09-11 20:59:04,276 - db_manager - INFO - execute_update: Executing update query: UPDATE complainants SET complainant_full_name = %s, complainant_phone = %s, complainant_email = %s, ...
2025-09-11 20:59:04,277 - db_manager - INFO - execute_update: Update completed in 0.01s. Affected rows: 1
2025-09-11 20:59:04,279 - db_manager - INFO - Transaction committed successfully
2025-09-11 20:59:04,279 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-11 20:59:04,279 - db_manager - INFO - Complainant updated in db: CM-20250911-KOJH-227A-B
2025-09-11 20:59:04,279 - db_manager - INFO - update_grievance: Updating grievance with ID: GR-20250911-KOJH-7FA9-B
2025-09-11 20:59:04,279 - db_manager - DEBUG - execute_update values: ('there is dust everywhere, my kids are sick now, I need to bring them to hospital', 'GR-20250911-KOJH-7FA9-B')
2025-09-11 20:59:04,279 - db_manager - DEBUG - execute_update query: 
                    UPDATE grievances 
                    SET grievance_description = %s, grievance_modification_date = CURRENT_TIMESTAMP
                    WHERE grievance_id = %s
                    RETURNING grievance_id
                
2025-09-11 20:59:04,279 - db_manager - INFO - Connecting to database: grievance_db
2025-09-11 20:59:04,283 - db_manager - INFO - Starting database transaction
2025-09-11 20:59:04,283 - db_manager - INFO - execute_update: Executing update query: 
                    UPDATE grievances 
                    SET grievance_description = %s, grievanc...
2025-09-11 20:59:04,284 - db_manager - INFO - execute_update: Update completed in 0.01s. Affected rows: 1
2025-09-11 20:59:04,287 - db_manager - INFO - Transaction committed successfully
2025-09-11 20:59:04,287 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-11 20:59:04,287 - db_manager - INFO - update_grievance: Updated grievance with ID: GR-20250911-KOJH-7FA9-B, rows affected: 1
2025-09-11 20:59:04,287 - db_manager - INFO - Grievance updated in db: GR-20250911-KOJH-7FA9-B
2025-09-11 20:59:04,287 - db_manager - INFO - Connecting to database: grievance_db
2025-09-11 20:59:04,292 - db_manager - INFO - Starting database transaction
2025-09-11 20:59:04,292 - db_manager - INFO - Executing get_grievance_files: 
            SELECT file_id, file_name, file_type, file_size, upload_timestamp
            FROM file...
2025-09-11 20:59:04,293 - db_manager - INFO - get_grievance_files completed in 0.01s. Rows: 0
2025-09-11 20:59:04,293 - db_manager - INFO - Transaction committed successfully
2025-09-11 20:59:04,293 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-11 20:59:04,293 - db_manager - INFO - Connecting to database: grievance_db
2025-09-11 20:59:04,297 - db_manager - INFO - Starting database transaction
2025-09-11 20:59:04,297 - db_manager - INFO - Executing get_grievance_files: 
            SELECT file_id, file_name, file_type, file_size, upload_timestamp
            FROM file...
2025-09-11 20:59:04,298 - db_manager - INFO - get_grievance_files completed in 0.01s. Rows: 0
2025-09-11 20:59:04,298 - db_manager - INFO - Transaction committed successfully
2025-09-11 20:59:04,299 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-11 20:59:04,347 - db_manager - INFO - Connecting to database: grievance_db
2025-09-11 20:59:04,362 - db_manager - INFO - Starting database transaction
2025-09-11 20:59:04,363 - db_manager - INFO - Executing get_grievance_by_id: 
                SELECT g.*, c.complainant_full_name, c.complainant_phone, c.complainant_email,
    ...
2025-09-11 20:59:04,365 - db_manager - INFO - get_grievance_by_id completed in 0.02s. Rows: 1
2025-09-11 20:59:04,365 - db_manager - INFO - Transaction committed successfully
2025-09-11 20:59:04,366 - db_manager - INFO - Database connection closed. Duration: 0.02s
2025-09-11 20:59:04,366 - db_manager - DEBUG - get_grievance_by_id: grievance_id: {'grievance_id': 'GR-20250911-KOJH-7FA9-B', 'complainant_id': 'CM-20250911-KOJH-227A-B', 'grievance_categories': [], 'grievance_categories_alternative': [], 'follow_up_question': [''], 'grievance_summary': '', 'grievance_description': 'there is dust everywhere, my kids are sick now, I need to bring them to hospital', 'grievance_claimed_amount': None, 'grievance_location': None, 'language_code': 'en', 'grievance_classification_status': 'pending', 'grievance_creation_date': datetime.datetime(2025, 9, 11, 20, 58, 50, 289382, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'grievance_modification_date': datetime.datetime(2025, 9, 11, 20, 59, 4, 284009, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'is_temporary': True, 'source': 'bot', 'complainant_full_name': 'c30d04070302dec3f6f8f550eab36ad23d01954688fe2507b131be19c70687fe37f04f7b9f0f6e3a9cc5d88b027c3adcb5aac37d4ea7f39fb0533717a908333ec338924f8c279b2cfdd1bfb4e2fb', 'complainant_phone': 'c30d04070302796942e6c2db3c4378d23d0136e5329a5ff13b6e7da979c7e105fa258a0d29f2c56187cbab021383b9d67aafea1491a6bfe45bcaa9d1f4a145863c46e0fb1034b9f05feb5bd38e36', 'complainant_email': 'c30d04070302e4f98259b0bff2876dd23d01666e57f8c00066a60ccf93d4335ad6860e4e0f73aa54b6f6ab1d3db3dcb824b1e5f47ec39cc6774a6a533a6269a212131240a73918e05f3cb941939f', 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_municipality': None, 'complainant_ward': None, 'complainant_village': None, 'complainant_address': None}, results: [{'grievance_id': 'GR-20250911-KOJH-7FA9-B', 'complainant_id': 'CM-20250911-KOJH-227A-B', 'grievance_categories': '[]', 'grievance_categories_alternative': '[]', 'follow_up_question': '[""]', 'grievance_summary': '', 'grievance_description': 'there is dust everywhere, my kids are sick now, I need to bring them to hospital', 'grievance_claimed_amount': None, 'grievance_location': None, 'language_code': 'en', 'grievance_classification_status': 'pending', 'grievance_creation_date': datetime.datetime(2025, 9, 11, 20, 58, 50, 289382, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'grievance_modification_date': datetime.datetime(2025, 9, 11, 20, 59, 4, 284009, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'is_temporary': True, 'source': 'bot', 'complainant_full_name': 'c30d04070302dec3f6f8f550eab36ad23d01954688fe2507b131be19c70687fe37f04f7b9f0f6e3a9cc5d88b027c3adcb5aac37d4ea7f39fb0533717a908333ec338924f8c279b2cfdd1bfb4e2fb', 'complainant_phone': 'c30d04070302796942e6c2db3c4378d23d0136e5329a5ff13b6e7da979c7e105fa258a0d29f2c56187cbab021383b9d67aafea1491a6bfe45bcaa9d1f4a145863c46e0fb1034b9f05feb5bd38e36', 'complainant_email': 'c30d04070302e4f98259b0bff2876dd23d01666e57f8c00066a60ccf93d4335ad6860e4e0f73aa54b6f6ab1d3db3dcb824b1e5f47ec39cc6774a6a533a6269a212131240a73918e05f3cb941939f', 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_municipality': None, 'complainant_ward': None, 'complainant_village': None, 'complainant_address': None}]
2025-09-11 21:07:00,596 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-11 21:07:00,596 - db_manager - INFO - Database manager initialized successfully
2025-09-11 21:07:00,596 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-11 21:07:00,596 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-11 21:07:00,596 - db_manager - INFO - Database manager initialized successfully
2025-09-11 21:07:00,596 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-11 21:07:00,597 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-11 21:07:00,597 - db_manager - INFO - Database manager initialized successfully
2025-09-11 21:07:00,597 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-11 21:07:00,597 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-11 21:07:00,597 - db_manager - INFO - Database manager initialized successfully
2025-09-11 21:07:00,597 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-11 21:07:00,597 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-11 21:07:00,597 - db_manager - INFO - Database manager initialized successfully
2025-09-11 21:07:00,597 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-11 21:07:00,597 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-11 21:07:00,597 - db_manager - INFO - Database manager initialized successfully
2025-09-11 21:07:00,597 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-11 21:07:00,597 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-11 21:07:00,597 - db_manager - INFO - Database manager initialized successfully
2025-09-11 21:07:00,597 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-11 21:07:00,597 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-11 21:07:00,597 - db_manager - INFO - Database manager initialized successfully
2025-09-11 21:07:00,597 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-11 21:07:00,597 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-11 21:07:00,597 - db_manager - INFO - Database manager initialized successfully
2025-09-11 21:07:00,597 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-11 21:07:00,597 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-11 21:07:00,597 - db_manager - INFO - Database manager initialized successfully
2025-09-11 21:07:00,597 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-11 21:08:47,361 - db_manager - INFO - create_complainant: Creating complainant with ID: CM-20250911-KOJH-205B-B
2025-09-11 21:08:47,362 - db_manager - DEBUG - encrypted and hashed data at encrypt_and_hash_sensitive_data: {'complainant_id': 'CM-20250911-KOJH-205B-B', 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_unique_id': 'CM-20250911-KOJH-205B-B'}
2025-09-11 21:08:47,362 - db_manager - DEBUG - query_keys at generate_query_string: dict_keys(['complainant_id', 'complainant_province', 'complainant_district', 'complainant_unique_id'])
2025-09-11 21:08:47,362 - db_manager - DEBUG - Generated query: INSERT INTO complainants (complainant_id, complainant_province, complainant_district, complainant_unique_id) VALUES (%s, %s, %s, %s)
2025-09-11 21:08:47,362 - db_manager - DEBUG - len of query_keys: 4
2025-09-11 21:08:47,362 - db_manager - DEBUG - Generated query: INSERT INTO complainants (complainant_id, complainant_province, complainant_district, complainant_unique_id) VALUES (%s, %s, %s, %s)
2025-09-11 21:08:47,362 - db_manager - INFO - Connecting to database: grievance_db
2025-09-11 21:08:47,369 - db_manager - INFO - Starting database transaction
2025-09-11 21:08:47,372 - db_manager - INFO - Transaction committed successfully
2025-09-11 21:08:47,372 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-11 21:08:47,372 - db_manager - INFO - create_complainant: Successfully created complainant with ID: CM-20250911-KOJH-205B-B
2025-09-11 21:08:47,372 - db_manager - INFO - create_grievance: Creating grievance with data: {'grievance_id': 'GR-20250911-KOJH-F0B8-B', 'complainant_id': 'CM-20250911-KOJH-205B-B', 'grievance_description': 'there is dust everywhere, my kids are sick now, I need to bring them to hospital', 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_office': None, 'source': 'bot', 'complainant_unique_id': 'CM-20250911-KOJH-205B-B'}
2025-09-11 21:08:47,372 - db_manager - INFO - create_grievance: Creating grievance with ID: GR-20250911-KOJH-F0B8-B
2025-09-11 21:08:47,372 - db_manager - INFO - create_grievance: Creating grievance with allowed fields: ['grievance_id', 'complainant_id', 'grievance_categories', 'grievance_categories_alternative', 'follow_up_question', 'grievance_summary', 'grievance_description', 'grievance_claimed_amount', 'grievance_location', 'is_temporary', 'source', 'language_code', 'grievance_classification_status']
2025-09-11 21:08:47,372 - db_manager - DEBUG - query_keys at generate_query_string: dict_keys(['grievance_id', 'complainant_id', 'grievance_description', 'source'])
2025-09-11 21:08:47,372 - db_manager - DEBUG - Generated query: INSERT INTO grievances (grievance_id, complainant_id, grievance_description, source) VALUES (%s, %s, %s, %s) RETURNING grievance_id
2025-09-11 21:08:47,372 - db_manager - DEBUG - len of query_keys: 4
2025-09-11 21:08:47,372 - db_manager - DEBUG - Generated query: INSERT INTO grievances (grievance_id, complainant_id, grievance_description, source) VALUES (%s, %s, %s, %s) RETURNING grievance_id
2025-09-11 21:08:47,372 - db_manager - INFO - Connecting to database: grievance_db
2025-09-11 21:08:47,377 - db_manager - INFO - Starting database transaction
2025-09-11 21:08:47,381 - db_manager - INFO - Transaction committed successfully
2025-09-11 21:08:47,381 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-11 21:08:47,381 - db_manager - INFO - create_grievance: Successfully created grievance with ID: GR-20250911-KOJH-F0B8-B
2025-09-11 21:09:04,820 - db_manager - INFO - Connecting to database: grievance_db
2025-09-11 21:09:04,825 - db_manager - INFO - Starting database transaction
2025-09-11 21:09:04,825 - db_manager - INFO - Executing get_complainant_by_id: 
            SELECT complainant_id, complainant_unique_id, complainant_full_name,    complainant_pho...
2025-09-11 21:09:04,826 - db_manager - INFO - get_complainant_by_id completed in 0.01s. Rows: 1
2025-09-11 21:09:04,826 - db_manager - INFO - Transaction committed successfully
2025-09-11 21:09:04,826 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-11 21:09:04,826 - db_manager - INFO - Connecting to database: grievance_db
2025-09-11 21:09:04,830 - db_manager - INFO - Starting database transaction
2025-09-11 21:09:04,830 - db_manager - INFO - Executing get_grievance_by_id: 
                SELECT g.*, c.complainant_full_name, c.complainant_phone, c.complainant_email,
    ...
2025-09-11 21:09:04,831 - db_manager - INFO - get_grievance_by_id completed in 0.01s. Rows: 1
2025-09-11 21:09:04,831 - db_manager - INFO - Transaction committed successfully
2025-09-11 21:09:04,831 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-11 21:09:04,832 - db_manager - DEBUG - get_grievance_by_id: grievance_id: {'grievance_id': 'GR-20250911-KOJH-F0B8-B', 'complainant_id': 'CM-20250911-KOJH-205B-B', 'grievance_categories': ['Environmental - Air Pollution'], 'grievance_categories_alternative': ['Environmental - Noise Pollution', 'Safety - Road Safety Provisions', 'Environmental - Drainage and Sewage Management'], 'follow_up_question': ['How many people in your family have been affected by the dust, and what type of health issues have they developed?'], 'grievance_summary': 'Dust from construction is making children sick and they need to go to the hospital.', 'grievance_description': 'there is dust everywhere, my kids are sick now, I need to bring them to hospital', 'grievance_claimed_amount': None, 'grievance_location': None, 'language_code': 'en', 'grievance_classification_status': 'pending', 'grievance_creation_date': datetime.datetime(2025, 9, 11, 21, 8, 47, 377766, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'grievance_modification_date': datetime.datetime(2025, 9, 11, 21, 8, 55, 997242, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'is_temporary': True, 'source': 'bot', 'complainant_full_name': None, 'complainant_phone': None, 'complainant_email': None, 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_municipality': None, 'complainant_ward': None, 'complainant_village': None, 'complainant_address': None}, results: [{'grievance_id': 'GR-20250911-KOJH-F0B8-B', 'complainant_id': 'CM-20250911-KOJH-205B-B', 'grievance_categories': '["Environmental - Air Pollution"]', 'grievance_categories_alternative': '["Environmental - Noise Pollution", "Safety - Road Safety Provisions", "Environmental - Drainage and Sewage Management"]', 'follow_up_question': '["How many people in your family have been affected by the dust, and what type of health issues have they developed?"]', 'grievance_summary': 'Dust from construction is making children sick and they need to go to the hospital.', 'grievance_description': 'there is dust everywhere, my kids are sick now, I need to bring them to hospital', 'grievance_claimed_amount': None, 'grievance_location': None, 'language_code': 'en', 'grievance_classification_status': 'pending', 'grievance_creation_date': datetime.datetime(2025, 9, 11, 21, 8, 47, 377766, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'grievance_modification_date': datetime.datetime(2025, 9, 11, 21, 8, 55, 997242, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'is_temporary': True, 'source': 'bot', 'complainant_full_name': None, 'complainant_phone': None, 'complainant_email': None, 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_municipality': None, 'complainant_ward': None, 'complainant_village': None, 'complainant_address': None}]
2025-09-11 21:09:04,832 - db_manager - INFO - update_complainant: Updating complainant with ID: CM-20250911-KOJH-205B-B
2025-09-11 21:09:04,832 - db_manager - INFO - Connecting to database: grievance_db
2025-09-11 21:09:04,836 - db_manager - INFO - Starting database transaction
2025-09-11 21:09:04,836 - db_manager - INFO - Executing encrypt_field: SELECT encode(pgp_sym_encrypt(%s, %s), 'hex') AS encrypted...
2025-09-11 21:09:04,839 - db_manager - INFO - encrypt_field completed in 0.01s. Rows: 1
2025-09-11 21:09:04,839 - db_manager - INFO - Transaction committed successfully
2025-09-11 21:09:04,839 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-11 21:09:04,839 - db_manager - INFO - Connecting to database: grievance_db
2025-09-11 21:09:04,844 - db_manager - INFO - Starting database transaction
2025-09-11 21:09:04,844 - db_manager - INFO - Executing encrypt_field: SELECT encode(pgp_sym_encrypt(%s, %s), 'hex') AS encrypted...
2025-09-11 21:09:04,845 - db_manager - INFO - encrypt_field completed in 0.01s. Rows: 1
2025-09-11 21:09:04,845 - db_manager - INFO - Transaction committed successfully
2025-09-11 21:09:04,845 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-11 21:09:04,845 - db_manager - DEBUG - encrypted phone number Not provided at encrypt_complainant_data: c30d04070302d45719f776f8eb9f7ad23d016b17dfaa462159d0124442395c156706aaa590667386b46d4fb634aab0500d1fd55b37c68d36d915e9fb4a68ded565ea54a4181634dbc75ff6342a78
2025-09-11 21:09:04,846 - db_manager - INFO - Connecting to database: grievance_db
2025-09-11 21:09:04,850 - db_manager - INFO - Starting database transaction
2025-09-11 21:09:04,850 - db_manager - INFO - Executing encrypt_field: SELECT encode(pgp_sym_encrypt(%s, %s), 'hex') AS encrypted...
2025-09-11 21:09:04,851 - db_manager - INFO - encrypt_field completed in 0.01s. Rows: 1
2025-09-11 21:09:04,851 - db_manager - INFO - Transaction committed successfully
2025-09-11 21:09:04,851 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-11 21:09:04,851 - db_manager - DEBUG - phone number Not provided hashed to d83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f at hash_sensitive_data
2025-09-11 21:09:04,851 - db_manager - DEBUG - encrypted and hashed data at encrypt_and_hash_sensitive_data: {'complainant_full_name': 'c30d04070302f0d4077edcba0d057fd23d01e57b83b1610ddb352970daeb413b30cf336d1629be80fefaa29fb1d587350481e4f93b4f7b08da37557befb84b926d5c064b07bd3198be0ed8121e08', 'complainant_phone': 'c30d04070302d45719f776f8eb9f7ad23d016b17dfaa462159d0124442395c156706aaa590667386b46d4fb634aab0500d1fd55b37c68d36d915e9fb4a68ded565ea54a4181634dbc75ff6342a78', 'complainant_email': 'c30d040703027c1e48cbf63ba21477d23d018f8f89d57799d0f842754b4a6d50c3640b4d386978134b8a88126dea25be20f44ed33241c36476818fbba4f513a2afc2841a91d4204b720f38bfd437', 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_email_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'complainant_phone_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'complainant_full_name_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f'}
2025-09-11 21:09:04,851 - db_manager - DEBUG - encrypted_data at update_complainant: {'complainant_full_name': 'c30d04070302f0d4077edcba0d057fd23d01e57b83b1610ddb352970daeb413b30cf336d1629be80fefaa29fb1d587350481e4f93b4f7b08da37557befb84b926d5c064b07bd3198be0ed8121e08', 'complainant_phone': 'c30d04070302d45719f776f8eb9f7ad23d016b17dfaa462159d0124442395c156706aaa590667386b46d4fb634aab0500d1fd55b37c68d36d915e9fb4a68ded565ea54a4181634dbc75ff6342a78', 'complainant_email': 'c30d040703027c1e48cbf63ba21477d23d018f8f89d57799d0f842754b4a6d50c3640b4d386978134b8a88126dea25be20f44ed33241c36476818fbba4f513a2afc2841a91d4204b720f38bfd437', 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_email_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'complainant_phone_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'complainant_full_name_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f'}
2025-09-11 21:09:04,851 - db_manager - DEBUG - execute_update values: ('c30d04070302f0d4077edcba0d057fd23d01e57b83b1610ddb352970daeb413b30cf336d1629be80fefaa29fb1d587350481e4f93b4f7b08da37557befb84b926d5c064b07bd3198be0ed8121e08', 'c30d04070302d45719f776f8eb9f7ad23d016b17dfaa462159d0124442395c156706aaa590667386b46d4fb634aab0500d1fd55b37c68d36d915e9fb4a68ded565ea54a4181634dbc75ff6342a78', 'c30d040703027c1e48cbf63ba21477d23d018f8f89d57799d0f842754b4a6d50c3640b4d386978134b8a88126dea25be20f44ed33241c36476818fbba4f513a2afc2841a91d4204b720f38bfd437', 'Koshi', 'Jhapa', 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'CM-20250911-KOJH-205B-B')
2025-09-11 21:09:04,852 - db_manager - DEBUG - execute_update query: UPDATE complainants SET complainant_full_name = %s, complainant_phone = %s, complainant_email = %s, complainant_province = %s, complainant_district = %s, complainant_email_hash = %s, complainant_phone_hash = %s, complainant_full_name_hash = %s WHERE complainant_id = %s
2025-09-11 21:09:04,852 - db_manager - INFO - Connecting to database: grievance_db
2025-09-11 21:09:04,856 - db_manager - INFO - Starting database transaction
2025-09-11 21:09:04,856 - db_manager - INFO - execute_update: Executing update query: UPDATE complainants SET complainant_full_name = %s, complainant_phone = %s, complainant_email = %s, ...
2025-09-11 21:09:04,857 - db_manager - INFO - execute_update: Update completed in 0.01s. Affected rows: 1
2025-09-11 21:09:04,858 - db_manager - INFO - Transaction committed successfully
2025-09-11 21:09:04,858 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-11 21:09:04,859 - db_manager - INFO - Complainant updated in db: CM-20250911-KOJH-205B-B
2025-09-11 21:09:04,859 - db_manager - INFO - update_grievance: Updating grievance with ID: GR-20250911-KOJH-F0B8-B
2025-09-11 21:09:04,859 - db_manager - DEBUG - execute_update values: ('there is dust everywhere, my kids are sick now, I need to bring them to hospital', 'GR-20250911-KOJH-F0B8-B')
2025-09-11 21:09:04,859 - db_manager - DEBUG - execute_update query: 
                    UPDATE grievances 
                    SET grievance_description = %s, grievance_modification_date = CURRENT_TIMESTAMP
                    WHERE grievance_id = %s
                    RETURNING grievance_id
                
2025-09-11 21:09:04,859 - db_manager - INFO - Connecting to database: grievance_db
2025-09-11 21:09:04,863 - db_manager - INFO - Starting database transaction
2025-09-11 21:09:04,863 - db_manager - INFO - execute_update: Executing update query: 
                    UPDATE grievances 
                    SET grievance_description = %s, grievanc...
2025-09-11 21:09:04,864 - db_manager - INFO - execute_update: Update completed in 0.01s. Affected rows: 1
2025-09-11 21:09:04,867 - db_manager - INFO - Transaction committed successfully
2025-09-11 21:09:04,867 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-11 21:09:04,867 - db_manager - INFO - update_grievance: Updated grievance with ID: GR-20250911-KOJH-F0B8-B, rows affected: 1
2025-09-11 21:09:04,867 - db_manager - INFO - Grievance updated in db: GR-20250911-KOJH-F0B8-B
2025-09-11 21:09:04,867 - db_manager - INFO - Connecting to database: grievance_db
2025-09-11 21:09:04,873 - db_manager - INFO - Starting database transaction
2025-09-11 21:09:04,873 - db_manager - INFO - Executing get_grievance_files: 
            SELECT file_id, file_name, file_type, file_size, upload_timestamp
            FROM file...
2025-09-11 21:09:04,874 - db_manager - INFO - get_grievance_files completed in 0.01s. Rows: 0
2025-09-11 21:09:04,874 - db_manager - INFO - Transaction committed successfully
2025-09-11 21:09:04,874 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-11 21:09:04,875 - db_manager - INFO - Connecting to database: grievance_db
2025-09-11 21:09:04,879 - db_manager - INFO - Starting database transaction
2025-09-11 21:09:04,880 - db_manager - INFO - Executing get_grievance_files: 
            SELECT file_id, file_name, file_type, file_size, upload_timestamp
            FROM file...
2025-09-11 21:09:04,881 - db_manager - INFO - get_grievance_files completed in 0.01s. Rows: 0
2025-09-11 21:09:04,881 - db_manager - INFO - Transaction committed successfully
2025-09-11 21:09:04,881 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-11 21:09:04,924 - db_manager - INFO - Connecting to database: grievance_db
2025-09-11 21:09:04,929 - db_manager - INFO - Starting database transaction
2025-09-11 21:09:04,930 - db_manager - INFO - Executing get_grievance_by_id: 
                SELECT g.*, c.complainant_full_name, c.complainant_phone, c.complainant_email,
    ...
2025-09-11 21:09:04,931 - db_manager - INFO - get_grievance_by_id completed in 0.01s. Rows: 1
2025-09-11 21:09:04,932 - db_manager - INFO - Transaction committed successfully
2025-09-11 21:09:04,932 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-11 21:09:04,932 - db_manager - DEBUG - get_grievance_by_id: grievance_id: {'grievance_id': 'GR-20250911-KOJH-F0B8-B', 'complainant_id': 'CM-20250911-KOJH-205B-B', 'grievance_categories': ['Environmental - Air Pollution'], 'grievance_categories_alternative': ['Environmental - Noise Pollution', 'Safety - Road Safety Provisions', 'Environmental - Drainage and Sewage Management'], 'follow_up_question': ['How many people in your family have been affected by the dust, and what type of health issues have they developed?'], 'grievance_summary': 'Dust from construction is making children sick and they need to go to the hospital.', 'grievance_description': 'there is dust everywhere, my kids are sick now, I need to bring them to hospital', 'grievance_claimed_amount': None, 'grievance_location': None, 'language_code': 'en', 'grievance_classification_status': 'pending', 'grievance_creation_date': datetime.datetime(2025, 9, 11, 21, 8, 47, 377766, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'grievance_modification_date': datetime.datetime(2025, 9, 11, 21, 9, 4, 863927, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'is_temporary': True, 'source': 'bot', 'complainant_full_name': 'c30d04070302f0d4077edcba0d057fd23d01e57b83b1610ddb352970daeb413b30cf336d1629be80fefaa29fb1d587350481e4f93b4f7b08da37557befb84b926d5c064b07bd3198be0ed8121e08', 'complainant_phone': 'c30d04070302d45719f776f8eb9f7ad23d016b17dfaa462159d0124442395c156706aaa590667386b46d4fb634aab0500d1fd55b37c68d36d915e9fb4a68ded565ea54a4181634dbc75ff6342a78', 'complainant_email': 'c30d040703027c1e48cbf63ba21477d23d018f8f89d57799d0f842754b4a6d50c3640b4d386978134b8a88126dea25be20f44ed33241c36476818fbba4f513a2afc2841a91d4204b720f38bfd437', 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_municipality': None, 'complainant_ward': None, 'complainant_village': None, 'complainant_address': None}, results: [{'grievance_id': 'GR-20250911-KOJH-F0B8-B', 'complainant_id': 'CM-20250911-KOJH-205B-B', 'grievance_categories': '["Environmental - Air Pollution"]', 'grievance_categories_alternative': '["Environmental - Noise Pollution", "Safety - Road Safety Provisions", "Environmental - Drainage and Sewage Management"]', 'follow_up_question': '["How many people in your family have been affected by the dust, and what type of health issues have they developed?"]', 'grievance_summary': 'Dust from construction is making children sick and they need to go to the hospital.', 'grievance_description': 'there is dust everywhere, my kids are sick now, I need to bring them to hospital', 'grievance_claimed_amount': None, 'grievance_location': None, 'language_code': 'en', 'grievance_classification_status': 'pending', 'grievance_creation_date': datetime.datetime(2025, 9, 11, 21, 8, 47, 377766, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'grievance_modification_date': datetime.datetime(2025, 9, 11, 21, 9, 4, 863927, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'is_temporary': True, 'source': 'bot', 'complainant_full_name': 'c30d04070302f0d4077edcba0d057fd23d01e57b83b1610ddb352970daeb413b30cf336d1629be80fefaa29fb1d587350481e4f93b4f7b08da37557befb84b926d5c064b07bd3198be0ed8121e08', 'complainant_phone': 'c30d04070302d45719f776f8eb9f7ad23d016b17dfaa462159d0124442395c156706aaa590667386b46d4fb634aab0500d1fd55b37c68d36d915e9fb4a68ded565ea54a4181634dbc75ff6342a78', 'complainant_email': 'c30d040703027c1e48cbf63ba21477d23d018f8f89d57799d0f842754b4a6d50c3640b4d386978134b8a88126dea25be20f44ed33241c36476818fbba4f513a2afc2841a91d4204b720f38bfd437', 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_municipality': None, 'complainant_ward': None, 'complainant_village': None, 'complainant_address': None}]
2025-09-11 21:09:32,209 - db_manager - INFO - Connecting to database: grievance_db
2025-09-11 21:09:32,215 - db_manager - INFO - Starting database transaction
2025-09-11 21:09:32,215 - db_manager - INFO - Executing get_complainant_id_from_grievance_id: 
            SELECT complainant_id
            FROM grievances
            WHERE grievance_id = %s
 ...
2025-09-11 21:09:32,216 - db_manager - INFO - get_complainant_id_from_grievance_id completed in 0.01s. Rows: 1
2025-09-11 21:09:32,216 - db_manager - INFO - Transaction committed successfully
2025-09-11 21:09:32,216 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-11 21:09:32,217 - db_manager - INFO - update_complainant: Updating complainant with ID: CM-20250911-KOJH-205B-B
2025-09-11 21:09:32,217 - db_manager - DEBUG - encrypted and hashed data at encrypt_and_hash_sensitive_data: {}
2025-09-11 21:09:32,217 - db_manager - DEBUG - encrypted_data at update_complainant: {}
2025-09-11 21:09:32,217 - db_manager - DEBUG - No complainant field to update
2025-09-11 21:09:32,217 - db_manager - INFO - Complainant updated in db: GR-20250911-KOJH-F0B8-B
2025-09-11 21:09:32,217 - db_manager - INFO - update_grievance: Updating grievance with ID: GR-20250911-KOJH-F0B8-B
2025-09-11 21:09:32,217 - db_manager - DEBUG - execute_update values: ('["Environmental - Air Pollution"]', 'GR-20250911-KOJH-F0B8-B')
2025-09-11 21:09:32,217 - db_manager - DEBUG - execute_update query: 
                    UPDATE grievances 
                    SET grievance_categories = %s, grievance_modification_date = CURRENT_TIMESTAMP
                    WHERE grievance_id = %s
                    RETURNING grievance_id
                
2025-09-11 21:09:32,217 - db_manager - INFO - Connecting to database: grievance_db
2025-09-11 21:09:32,222 - db_manager - INFO - Starting database transaction
2025-09-11 21:09:32,222 - db_manager - INFO - execute_update: Executing update query: 
                    UPDATE grievances 
                    SET grievance_categories = %s, grievance...
2025-09-11 21:09:32,223 - db_manager - INFO - execute_update: Update completed in 0.01s. Affected rows: 1
2025-09-11 21:09:32,226 - db_manager - INFO - Transaction committed successfully
2025-09-11 21:09:32,226 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-11 21:09:32,226 - db_manager - INFO - update_grievance: Updated grievance with ID: GR-20250911-KOJH-F0B8-B, rows affected: 1
2025-09-11 21:09:32,226 - db_manager - INFO - Grievance updated in db: GR-20250911-KOJH-F0B8-B
2025-09-11 21:09:32,274 - db_manager - INFO - Connecting to database: grievance_db
2025-09-11 21:09:32,279 - db_manager - INFO - Starting database transaction
2025-09-11 21:09:32,279 - db_manager - INFO - Executing get_grievance_files: 
            SELECT file_id, file_name, file_type, file_size, upload_timestamp
            FROM file...
2025-09-11 21:09:32,280 - db_manager - INFO - get_grievance_files completed in 0.01s. Rows: 0
2025-09-11 21:09:32,280 - db_manager - INFO - Transaction committed successfully
2025-09-11 21:09:32,280 - db_manager - INFO - Database connection closed. Duration: 0.01s
