2025-09-08 08:30:43,199 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-08 08:30:43,199 - db_manager - INFO - Database manager initialized successfully
2025-09-08 08:30:43,199 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-08 08:30:43,199 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-08 08:30:43,199 - db_manager - INFO - Database manager initialized successfully
2025-09-08 08:30:43,199 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-08 08:30:43,200 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-08 08:30:43,200 - db_manager - INFO - Database manager initialized successfully
2025-09-08 08:30:43,200 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-08 08:30:43,200 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-08 08:30:43,200 - db_manager - INFO - Database manager initialized successfully
2025-09-08 08:30:43,200 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-08 08:30:43,200 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-08 08:30:43,200 - db_manager - INFO - Database manager initialized successfully
2025-09-08 08:30:43,200 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-08 08:30:43,200 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-08 08:30:43,200 - db_manager - INFO - Database manager initialized successfully
2025-09-08 08:30:43,200 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-08 08:30:43,200 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-08 08:30:43,200 - db_manager - INFO - Database manager initialized successfully
2025-09-08 08:30:43,200 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-08 08:30:43,200 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-08 08:30:43,200 - db_manager - INFO - Database manager initialized successfully
2025-09-08 08:30:43,200 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-08 08:30:43,200 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-08 08:30:43,200 - db_manager - INFO - Database manager initialized successfully
2025-09-08 08:30:43,200 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-08 08:30:43,200 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-08 08:30:43,200 - db_manager - INFO - Database manager initialized successfully
2025-09-08 08:30:43,200 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-08 08:32:31,949 - db_manager - INFO - create_complainant: Creating complainant with ID: CM-20250908-KOJH-991F-B
2025-09-08 08:32:31,949 - db_manager - DEBUG - encrypted and hashed data at encrypt_and_hash_sensitive_data: {'complainant_id': 'CM-20250908-KOJH-991F-B', 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_unique_id': 'CM-20250908-KOJH-991F-B'}
2025-09-08 08:32:31,949 - db_manager - DEBUG - query_keys at generate_query_string: dict_keys(['complainant_id', 'complainant_province', 'complainant_district', 'complainant_unique_id'])
2025-09-08 08:32:31,949 - db_manager - DEBUG - Generated query: INSERT INTO complainants (complainant_id, complainant_province, complainant_district, complainant_unique_id) VALUES (%s, %s, %s, %s)
2025-09-08 08:32:31,949 - db_manager - DEBUG - len of query_keys: 4
2025-09-08 08:32:31,949 - db_manager - DEBUG - Generated query: INSERT INTO complainants (complainant_id, complainant_province, complainant_district, complainant_unique_id) VALUES (%s, %s, %s, %s)
2025-09-08 08:32:31,949 - db_manager - INFO - Connecting to database: grievance_db
2025-09-08 08:32:31,956 - db_manager - INFO - Starting database transaction
2025-09-08 08:32:31,959 - db_manager - INFO - Transaction committed successfully
2025-09-08 08:32:31,959 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-08 08:32:31,959 - db_manager - INFO - create_complainant: Successfully created complainant with ID: CM-20250908-KOJH-991F-B
2025-09-08 08:32:31,959 - db_manager - INFO - create_grievance: Creating grievance with data: {'grievance_id': 'GR-20250908-KOJH-6976-B', 'complainant_id': 'CM-20250908-KOJH-991F-B', 'grievance_description': 'dust everywhere in my house d\nkids are coughing\nneed to go to hospital', 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_office': None, 'source': 'bot', 'complainant_unique_id': 'CM-20250908-KOJH-991F-B'}
2025-09-08 08:32:31,959 - db_manager - INFO - create_grievance: Creating grievance with ID: GR-20250908-KOJH-6976-B
2025-09-08 08:32:31,959 - db_manager - DEBUG - query_keys at generate_query_string: dict_keys(['grievance_id', 'complainant_id', 'grievance_description', 'source'])
2025-09-08 08:32:31,960 - db_manager - DEBUG - Generated query: INSERT INTO grievances (grievance_id, complainant_id, grievance_description, source) VALUES (%s, %s, %s, %s) RETURNING grievance_id
2025-09-08 08:32:31,960 - db_manager - DEBUG - len of query_keys: 4
2025-09-08 08:32:31,960 - db_manager - DEBUG - Generated query: INSERT INTO grievances (grievance_id, complainant_id, grievance_description, source) VALUES (%s, %s, %s, %s) RETURNING grievance_id
2025-09-08 08:32:31,960 - db_manager - INFO - Connecting to database: grievance_db
2025-09-08 08:32:31,964 - db_manager - INFO - Starting database transaction
2025-09-08 08:32:31,970 - db_manager - INFO - Transaction committed successfully
2025-09-08 08:32:31,970 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-08 08:32:31,970 - db_manager - INFO - create_grievance: Successfully created grievance with ID: GR-20250908-KOJH-6976-B
2025-09-08 08:32:53,656 - db_manager - INFO - Connecting to database: grievance_db
2025-09-08 08:32:53,661 - db_manager - INFO - Starting database transaction
2025-09-08 08:32:53,661 - db_manager - INFO - Executing get_complainant_by_id: 
            SELECT complainant_id, complainant_unique_id, complainant_full_name,    complainant_pho...
2025-09-08 08:32:53,663 - db_manager - INFO - get_complainant_by_id completed in 0.01s. Rows: 1
2025-09-08 08:32:53,663 - db_manager - INFO - Transaction committed successfully
2025-09-08 08:32:53,663 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-08 08:32:53,663 - db_manager - INFO - Connecting to database: grievance_db
2025-09-08 08:32:53,668 - db_manager - INFO - Starting database transaction
2025-09-08 08:32:53,668 - db_manager - INFO - Executing get_grievance_by_id: 
                SELECT g.*, c.complainant_full_name, c.complainant_phone, c.complainant_email,
    ...
2025-09-08 08:32:53,669 - db_manager - INFO - get_grievance_by_id completed in 0.01s. Rows: 1
2025-09-08 08:32:53,670 - db_manager - INFO - Transaction committed successfully
2025-09-08 08:32:53,670 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-08 08:32:53,670 - db_manager - DEBUG - get_grievance_by_id: grievance_id: {'grievance_id': 'GR-20250908-KOJH-6976-B', 'complainant_id': 'CM-20250908-KOJH-991F-B', 'grievance_categories': '{"Environmental - Air Pollution"}', 'grievance_summary': 'घरमा धुलो छ, बच्चाहरू खोकि लागेको छ र अस्पताल जानु पर्छ।', 'grievance_description': 'dust everywhere in my house d\nkids are coughing\nneed to go to hospital', 'grievance_claimed_amount': None, 'grievance_location': None, 'language_code': 'en', 'classification_status': 'pending', 'grievance_creation_date': datetime.datetime(2025, 9, 8, 8, 32, 31, 965158, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'grievance_modification_date': datetime.datetime(2025, 9, 8, 8, 32, 35, 508493, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'is_temporary': True, 'source': 'bot', 'complainant_full_name': None, 'complainant_phone': None, 'complainant_email': None, 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_municipality': None, 'complainant_ward': None, 'complainant_village': None, 'complainant_address': None}, results: [{'grievance_id': 'GR-20250908-KOJH-6976-B', 'complainant_id': 'CM-20250908-KOJH-991F-B', 'grievance_categories': '{"Environmental - Air Pollution"}', 'grievance_summary': 'घरमा धुलो छ, बच्चाहरू खोकि लागेको छ र अस्पताल जानु पर्छ।', 'grievance_description': 'dust everywhere in my house d\nkids are coughing\nneed to go to hospital', 'grievance_claimed_amount': None, 'grievance_location': None, 'language_code': 'en', 'classification_status': 'pending', 'grievance_creation_date': datetime.datetime(2025, 9, 8, 8, 32, 31, 965158, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'grievance_modification_date': datetime.datetime(2025, 9, 8, 8, 32, 35, 508493, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'is_temporary': True, 'source': 'bot', 'complainant_full_name': None, 'complainant_phone': None, 'complainant_email': None, 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_municipality': None, 'complainant_ward': None, 'complainant_village': None, 'complainant_address': None}]
2025-09-08 08:32:53,670 - db_manager - INFO - update_complainant: Updating complainant with ID: CM-20250908-KOJH-991F-B
2025-09-08 08:32:53,670 - db_manager - INFO - Connecting to database: grievance_db
2025-09-08 08:32:53,676 - db_manager - INFO - Starting database transaction
2025-09-08 08:32:53,676 - db_manager - INFO - Executing encrypt_field: SELECT encode(pgp_sym_encrypt(%s, %s), 'hex') AS encrypted...
2025-09-08 08:32:53,680 - db_manager - INFO - encrypt_field completed in 0.01s. Rows: 1
2025-09-08 08:32:53,681 - db_manager - INFO - Transaction committed successfully
2025-09-08 08:32:53,681 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-08 08:32:53,681 - db_manager - DEBUG - encrypted phone number Not provided at encrypt_complainant_data: c30d04070302c3b9b02f91a0a5716ad23d01113b492814c8667f20418efdc3fe5f57932a6660af32880a69496121a413eb1e923c5b0f7a8ec8c5258b297556619e6b80a3fe84f24676a83f8c9dbc
2025-09-08 08:32:53,681 - db_manager - INFO - Connecting to database: grievance_db
2025-09-08 08:32:53,685 - db_manager - INFO - Starting database transaction
2025-09-08 08:32:53,685 - db_manager - INFO - Executing encrypt_field: SELECT encode(pgp_sym_encrypt(%s, %s), 'hex') AS encrypted...
2025-09-08 08:32:53,686 - db_manager - INFO - encrypt_field completed in 0.01s. Rows: 1
2025-09-08 08:32:53,686 - db_manager - INFO - Transaction committed successfully
2025-09-08 08:32:53,687 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-08 08:32:53,687 - db_manager - INFO - Connecting to database: grievance_db
2025-09-08 08:32:53,691 - db_manager - INFO - Starting database transaction
2025-09-08 08:32:53,692 - db_manager - INFO - Executing encrypt_field: SELECT encode(pgp_sym_encrypt(%s, %s), 'hex') AS encrypted...
2025-09-08 08:32:53,693 - db_manager - INFO - encrypt_field completed in 0.01s. Rows: 1
2025-09-08 08:32:53,693 - db_manager - INFO - Transaction committed successfully
2025-09-08 08:32:53,693 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-08 08:32:53,693 - db_manager - DEBUG - phone number Not provided hashed to d83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f at hash_sensitive_data
2025-09-08 08:32:53,693 - db_manager - DEBUG - encrypted and hashed data at encrypt_and_hash_sensitive_data: {'complainant_full_name': 'c30d04070302539af2027947dfd776d23d01db7b7fa6afa7f15693d198aa33d49b4451cd42049d427fd6e31d93246897b93c790b6672f3dec6a337900be88d9e921776591dbafd8c7f17589546ce', 'complainant_phone': 'c30d04070302c3b9b02f91a0a5716ad23d01113b492814c8667f20418efdc3fe5f57932a6660af32880a69496121a413eb1e923c5b0f7a8ec8c5258b297556619e6b80a3fe84f24676a83f8c9dbc', 'complainant_email': 'c30d040703022418b014c923ce6670d23d01067d9d479badc32a1929ae1f37e1e5e398571acf8109e35c56a8137435c1ca8ac1757a636eadd00866f8b75563d71a89030fd79d4e942fb3fc37b916', 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_phone_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'complainant_email_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'complainant_full_name_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f'}
2025-09-08 08:32:53,693 - db_manager - DEBUG - encrypted_data at update_complainant: {'complainant_full_name': 'c30d04070302539af2027947dfd776d23d01db7b7fa6afa7f15693d198aa33d49b4451cd42049d427fd6e31d93246897b93c790b6672f3dec6a337900be88d9e921776591dbafd8c7f17589546ce', 'complainant_phone': 'c30d04070302c3b9b02f91a0a5716ad23d01113b492814c8667f20418efdc3fe5f57932a6660af32880a69496121a413eb1e923c5b0f7a8ec8c5258b297556619e6b80a3fe84f24676a83f8c9dbc', 'complainant_email': 'c30d040703022418b014c923ce6670d23d01067d9d479badc32a1929ae1f37e1e5e398571acf8109e35c56a8137435c1ca8ac1757a636eadd00866f8b75563d71a89030fd79d4e942fb3fc37b916', 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_phone_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'complainant_email_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'complainant_full_name_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f'}
2025-09-08 08:32:53,693 - db_manager - DEBUG - execute_update values: ('c30d04070302539af2027947dfd776d23d01db7b7fa6afa7f15693d198aa33d49b4451cd42049d427fd6e31d93246897b93c790b6672f3dec6a337900be88d9e921776591dbafd8c7f17589546ce', 'c30d04070302c3b9b02f91a0a5716ad23d01113b492814c8667f20418efdc3fe5f57932a6660af32880a69496121a413eb1e923c5b0f7a8ec8c5258b297556619e6b80a3fe84f24676a83f8c9dbc', 'c30d040703022418b014c923ce6670d23d01067d9d479badc32a1929ae1f37e1e5e398571acf8109e35c56a8137435c1ca8ac1757a636eadd00866f8b75563d71a89030fd79d4e942fb3fc37b916', 'Koshi', 'Jhapa', 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'CM-20250908-KOJH-991F-B')
2025-09-08 08:32:53,693 - db_manager - DEBUG - execute_update query: UPDATE complainants SET complainant_full_name = %s, complainant_phone = %s, complainant_email = %s, complainant_province = %s, complainant_district = %s, complainant_phone_hash = %s, complainant_email_hash = %s, complainant_full_name_hash = %s WHERE complainant_id = %s
2025-09-08 08:32:53,693 - db_manager - INFO - Connecting to database: grievance_db
2025-09-08 08:32:53,698 - db_manager - INFO - Starting database transaction
2025-09-08 08:32:53,698 - db_manager - INFO - execute_update: Executing update query: UPDATE complainants SET complainant_full_name = %s, complainant_phone = %s, complainant_email = %s, ...
2025-09-08 08:32:53,699 - db_manager - INFO - execute_update: Update completed in 0.01s. Affected rows: 1
2025-09-08 08:32:53,702 - db_manager - INFO - Transaction committed successfully
2025-09-08 08:32:53,702 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-08 08:32:53,702 - db_manager - INFO - Complainant updated in db: CM-20250908-KOJH-991F-B
2025-09-08 08:32:53,703 - db_manager - INFO - update_grievance: Updating grievance with ID: GR-20250908-KOJH-6976-B
2025-09-08 08:32:53,703 - db_manager - DEBUG - execute_update values: ('dust everywhere in my house d\nkids are coughing\nneed to go to hospital', 'GR-20250908-KOJH-6976-B')
2025-09-08 08:32:53,703 - db_manager - DEBUG - execute_update query: 
                    UPDATE grievances 
                    SET grievance_description = %s, grievance_modification_date = CURRENT_TIMESTAMP
                    WHERE grievance_id = %s
                    RETURNING grievance_id
                
2025-09-08 08:32:53,703 - db_manager - INFO - Connecting to database: grievance_db
2025-09-08 08:32:53,708 - db_manager - INFO - Starting database transaction
2025-09-08 08:32:53,708 - db_manager - INFO - execute_update: Executing update query: 
                    UPDATE grievances 
                    SET grievance_description = %s, grievanc...
2025-09-08 08:32:53,710 - db_manager - INFO - execute_update: Update completed in 0.01s. Affected rows: 1
2025-09-08 08:32:53,713 - db_manager - INFO - Transaction committed successfully
2025-09-08 08:32:53,713 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-08 08:32:53,713 - db_manager - INFO - update_grievance: Updated grievance with ID: GR-20250908-KOJH-6976-B, rows affected: 1
2025-09-08 08:32:53,714 - db_manager - INFO - Grievance updated in db: GR-20250908-KOJH-6976-B
2025-09-08 08:32:53,714 - db_manager - INFO - Connecting to database: grievance_db
2025-09-08 08:32:53,719 - db_manager - INFO - Starting database transaction
2025-09-08 08:32:53,719 - db_manager - INFO - Executing get_grievance_files: 
            SELECT file_id, file_name, file_type, file_size, upload_timestamp
            FROM file...
2025-09-08 08:32:53,720 - db_manager - INFO - get_grievance_files completed in 0.01s. Rows: 0
2025-09-08 08:32:53,721 - db_manager - INFO - Transaction committed successfully
2025-09-08 08:32:53,721 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-08 08:32:53,721 - db_manager - INFO - Connecting to database: grievance_db
2025-09-08 08:32:53,725 - db_manager - INFO - Starting database transaction
2025-09-08 08:32:53,725 - db_manager - INFO - Executing get_grievance_files: 
            SELECT file_id, file_name, file_type, file_size, upload_timestamp
            FROM file...
2025-09-08 08:32:53,726 - db_manager - INFO - get_grievance_files completed in 0.01s. Rows: 0
2025-09-08 08:32:53,727 - db_manager - INFO - Transaction committed successfully
2025-09-08 08:32:53,727 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-08 08:32:53,770 - db_manager - INFO - Connecting to database: grievance_db
2025-09-08 08:32:53,776 - db_manager - INFO - Starting database transaction
2025-09-08 08:32:53,776 - db_manager - INFO - Executing get_grievance_by_id: 
                SELECT g.*, c.complainant_full_name, c.complainant_phone, c.complainant_email,
    ...
2025-09-08 08:32:53,778 - db_manager - INFO - get_grievance_by_id completed in 0.01s. Rows: 1
2025-09-08 08:32:53,778 - db_manager - INFO - Transaction committed successfully
2025-09-08 08:32:53,778 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-08 08:32:53,778 - db_manager - DEBUG - get_grievance_by_id: grievance_id: {'grievance_id': 'GR-20250908-KOJH-6976-B', 'complainant_id': 'CM-20250908-KOJH-991F-B', 'grievance_categories': '{"Environmental - Air Pollution"}', 'grievance_summary': 'घरमा धुलो छ, बच्चाहरू खोकि लागेको छ र अस्पताल जानु पर्छ।', 'grievance_description': 'dust everywhere in my house d\nkids are coughing\nneed to go to hospital', 'grievance_claimed_amount': None, 'grievance_location': None, 'language_code': 'en', 'classification_status': 'pending', 'grievance_creation_date': datetime.datetime(2025, 9, 8, 8, 32, 31, 965158, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'grievance_modification_date': datetime.datetime(2025, 9, 8, 8, 32, 53, 709005, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'is_temporary': True, 'source': 'bot', 'complainant_full_name': 'c30d04070302539af2027947dfd776d23d01db7b7fa6afa7f15693d198aa33d49b4451cd42049d427fd6e31d93246897b93c790b6672f3dec6a337900be88d9e921776591dbafd8c7f17589546ce', 'complainant_phone': 'c30d04070302c3b9b02f91a0a5716ad23d01113b492814c8667f20418efdc3fe5f57932a6660af32880a69496121a413eb1e923c5b0f7a8ec8c5258b297556619e6b80a3fe84f24676a83f8c9dbc', 'complainant_email': 'c30d040703022418b014c923ce6670d23d01067d9d479badc32a1929ae1f37e1e5e398571acf8109e35c56a8137435c1ca8ac1757a636eadd00866f8b75563d71a89030fd79d4e942fb3fc37b916', 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_municipality': None, 'complainant_ward': None, 'complainant_village': None, 'complainant_address': None}, results: [{'grievance_id': 'GR-20250908-KOJH-6976-B', 'complainant_id': 'CM-20250908-KOJH-991F-B', 'grievance_categories': '{"Environmental - Air Pollution"}', 'grievance_summary': 'घरमा धुलो छ, बच्चाहरू खोकि लागेको छ र अस्पताल जानु पर्छ।', 'grievance_description': 'dust everywhere in my house d\nkids are coughing\nneed to go to hospital', 'grievance_claimed_amount': None, 'grievance_location': None, 'language_code': 'en', 'classification_status': 'pending', 'grievance_creation_date': datetime.datetime(2025, 9, 8, 8, 32, 31, 965158, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'grievance_modification_date': datetime.datetime(2025, 9, 8, 8, 32, 53, 709005, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'is_temporary': True, 'source': 'bot', 'complainant_full_name': 'c30d04070302539af2027947dfd776d23d01db7b7fa6afa7f15693d198aa33d49b4451cd42049d427fd6e31d93246897b93c790b6672f3dec6a337900be88d9e921776591dbafd8c7f17589546ce', 'complainant_phone': 'c30d04070302c3b9b02f91a0a5716ad23d01113b492814c8667f20418efdc3fe5f57932a6660af32880a69496121a413eb1e923c5b0f7a8ec8c5258b297556619e6b80a3fe84f24676a83f8c9dbc', 'complainant_email': 'c30d040703022418b014c923ce6670d23d01067d9d479badc32a1929ae1f37e1e5e398571acf8109e35c56a8137435c1ca8ac1757a636eadd00866f8b75563d71a89030fd79d4e942fb3fc37b916', 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_municipality': None, 'complainant_ward': None, 'complainant_village': None, 'complainant_address': None}]
2025-09-08 08:36:40,894 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-08 08:36:40,894 - db_manager - INFO - Database manager initialized successfully
2025-09-08 08:36:40,894 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-08 08:36:40,894 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-08 08:36:40,894 - db_manager - INFO - Database manager initialized successfully
2025-09-08 08:36:40,894 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-08 08:36:40,894 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-08 08:36:40,894 - db_manager - INFO - Database manager initialized successfully
2025-09-08 08:36:40,894 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-08 08:36:40,894 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-08 08:36:40,894 - db_manager - INFO - Database manager initialized successfully
2025-09-08 08:36:40,895 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-08 08:36:40,895 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-08 08:36:40,895 - db_manager - INFO - Database manager initialized successfully
2025-09-08 08:36:40,895 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-08 08:36:40,895 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-08 08:36:40,895 - db_manager - INFO - Database manager initialized successfully
2025-09-08 08:36:40,895 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-08 08:36:40,895 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-08 08:36:40,895 - db_manager - INFO - Database manager initialized successfully
2025-09-08 08:36:40,895 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-08 08:36:40,895 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-08 08:36:40,895 - db_manager - INFO - Database manager initialized successfully
2025-09-08 08:36:40,895 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-08 08:36:40,895 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-08 08:36:40,895 - db_manager - INFO - Database manager initialized successfully
2025-09-08 08:36:40,895 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-08 08:36:40,895 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-08 08:36:40,895 - db_manager - INFO - Database manager initialized successfully
2025-09-08 08:36:40,895 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-08 08:38:31,884 - db_manager - INFO - create_complainant: Creating complainant with ID: CM-20250908-KOJH-6767-B
2025-09-08 08:38:31,884 - db_manager - DEBUG - encrypted and hashed data at encrypt_and_hash_sensitive_data: {'complainant_id': 'CM-20250908-KOJH-6767-B', 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_unique_id': 'CM-20250908-KOJH-6767-B'}
2025-09-08 08:38:31,884 - db_manager - DEBUG - query_keys at generate_query_string: dict_keys(['complainant_id', 'complainant_province', 'complainant_district', 'complainant_unique_id'])
2025-09-08 08:38:31,885 - db_manager - DEBUG - Generated query: INSERT INTO complainants (complainant_id, complainant_province, complainant_district, complainant_unique_id) VALUES (%s, %s, %s, %s)
2025-09-08 08:38:31,885 - db_manager - DEBUG - len of query_keys: 4
2025-09-08 08:38:31,885 - db_manager - DEBUG - Generated query: INSERT INTO complainants (complainant_id, complainant_province, complainant_district, complainant_unique_id) VALUES (%s, %s, %s, %s)
2025-09-08 08:38:31,885 - db_manager - INFO - Connecting to database: grievance_db
2025-09-08 08:38:31,893 - db_manager - INFO - Starting database transaction
2025-09-08 08:38:31,896 - db_manager - INFO - Transaction committed successfully
2025-09-08 08:38:31,897 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-08 08:38:31,897 - db_manager - INFO - create_complainant: Successfully created complainant with ID: CM-20250908-KOJH-6767-B
2025-09-08 08:38:31,897 - db_manager - INFO - create_grievance: Creating grievance with data: {'grievance_id': 'GR-20250908-KOJH-5220-B', 'complainant_id': 'CM-20250908-KOJH-6767-B', 'grievance_description': 'dust everywhere in my house d kids are coughing need to go to hospital', 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_office': None, 'source': 'bot', 'complainant_unique_id': 'CM-20250908-KOJH-6767-B'}
2025-09-08 08:38:31,897 - db_manager - INFO - create_grievance: Creating grievance with ID: GR-20250908-KOJH-5220-B
2025-09-08 08:38:31,897 - db_manager - DEBUG - query_keys at generate_query_string: dict_keys(['grievance_id', 'complainant_id', 'grievance_description', 'source'])
2025-09-08 08:38:31,897 - db_manager - DEBUG - Generated query: INSERT INTO grievances (grievance_id, complainant_id, grievance_description, source) VALUES (%s, %s, %s, %s) RETURNING grievance_id
2025-09-08 08:38:31,897 - db_manager - DEBUG - len of query_keys: 4
2025-09-08 08:38:31,897 - db_manager - DEBUG - Generated query: INSERT INTO grievances (grievance_id, complainant_id, grievance_description, source) VALUES (%s, %s, %s, %s) RETURNING grievance_id
2025-09-08 08:38:31,897 - db_manager - INFO - Connecting to database: grievance_db
2025-09-08 08:38:31,902 - db_manager - INFO - Starting database transaction
2025-09-08 08:38:31,906 - db_manager - INFO - Transaction committed successfully
2025-09-08 08:38:31,906 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-08 08:38:31,906 - db_manager - INFO - create_grievance: Successfully created grievance with ID: GR-20250908-KOJH-5220-B
2025-09-08 08:39:03,312 - db_manager - INFO - Connecting to database: grievance_db
2025-09-08 08:39:03,318 - db_manager - INFO - Starting database transaction
2025-09-08 08:39:03,319 - db_manager - INFO - Executing get_complainant_by_id: 
            SELECT complainant_id, complainant_unique_id, complainant_full_name,    complainant_pho...
2025-09-08 08:39:03,320 - db_manager - INFO - get_complainant_by_id completed in 0.01s. Rows: 1
2025-09-08 08:39:03,321 - db_manager - INFO - Transaction committed successfully
2025-09-08 08:39:03,321 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-08 08:39:03,321 - db_manager - INFO - Connecting to database: grievance_db
2025-09-08 08:39:03,326 - db_manager - INFO - Starting database transaction
2025-09-08 08:39:03,326 - db_manager - INFO - Executing get_grievance_by_id: 
                SELECT g.*, c.complainant_full_name, c.complainant_phone, c.complainant_email,
    ...
2025-09-08 08:39:03,328 - db_manager - INFO - get_grievance_by_id completed in 0.01s. Rows: 1
2025-09-08 08:39:03,328 - db_manager - INFO - Transaction committed successfully
2025-09-08 08:39:03,328 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-08 08:39:03,328 - db_manager - DEBUG - get_grievance_by_id: grievance_id: {'grievance_id': 'GR-20250908-KOJH-5220-B', 'complainant_id': 'CM-20250908-KOJH-6767-B', 'grievance_categories': '{"Environmental - Air Pollution"}', 'grievance_summary': 'घरमा धूलो छ, बच्चाहरुले खोकी लागेको छ, अस्पताल जानु पर्ने छ', 'grievance_description': 'dust everywhere in my house d kids are coughing need to go to hospital', 'grievance_claimed_amount': None, 'grievance_location': None, 'language_code': 'en', 'classification_status': 'pending', 'grievance_creation_date': datetime.datetime(2025, 9, 8, 8, 38, 31, 902922, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'grievance_modification_date': datetime.datetime(2025, 9, 8, 8, 38, 36, 72775, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'is_temporary': True, 'source': 'bot', 'complainant_full_name': None, 'complainant_phone': None, 'complainant_email': None, 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_municipality': None, 'complainant_ward': None, 'complainant_village': None, 'complainant_address': None}, results: [{'grievance_id': 'GR-20250908-KOJH-5220-B', 'complainant_id': 'CM-20250908-KOJH-6767-B', 'grievance_categories': '{"Environmental - Air Pollution"}', 'grievance_summary': 'घरमा धूलो छ, बच्चाहरुले खोकी लागेको छ, अस्पताल जानु पर्ने छ', 'grievance_description': 'dust everywhere in my house d kids are coughing need to go to hospital', 'grievance_claimed_amount': None, 'grievance_location': None, 'language_code': 'en', 'classification_status': 'pending', 'grievance_creation_date': datetime.datetime(2025, 9, 8, 8, 38, 31, 902922, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'grievance_modification_date': datetime.datetime(2025, 9, 8, 8, 38, 36, 72775, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'is_temporary': True, 'source': 'bot', 'complainant_full_name': None, 'complainant_phone': None, 'complainant_email': None, 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_municipality': None, 'complainant_ward': None, 'complainant_village': None, 'complainant_address': None}]
2025-09-08 08:39:03,329 - db_manager - INFO - update_complainant: Updating complainant with ID: CM-20250908-KOJH-6767-B
2025-09-08 08:39:03,329 - db_manager - INFO - Connecting to database: grievance_db
2025-09-08 08:39:03,334 - db_manager - INFO - Starting database transaction
2025-09-08 08:39:03,334 - db_manager - INFO - Executing encrypt_field: SELECT encode(pgp_sym_encrypt(%s, %s), 'hex') AS encrypted...
2025-09-08 08:39:03,335 - db_manager - INFO - encrypt_field completed in 0.01s. Rows: 1
2025-09-08 08:39:03,335 - db_manager - INFO - Transaction committed successfully
2025-09-08 08:39:03,335 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-08 08:39:03,335 - db_manager - DEBUG - encrypted phone number +9779876543210 at encrypt_complainant_data: c30d040703022f9f6058b7ce0ec865d23f018965c64a6d4157774890ed5a9faa7e28afb854e2853cec0cc97413305ff8f0fb41c8fa03a2adc6dd32bce465def4759890f17c9aed9097b60f2385269a30
2025-09-08 08:39:03,335 - db_manager - INFO - Connecting to database: grievance_db
2025-09-08 08:39:03,341 - db_manager - INFO - Starting database transaction
2025-09-08 08:39:03,341 - db_manager - INFO - Executing encrypt_field: SELECT encode(pgp_sym_encrypt(%s, %s), 'hex') AS encrypted...
2025-09-08 08:39:03,342 - db_manager - INFO - encrypt_field completed in 0.01s. Rows: 1
2025-09-08 08:39:03,342 - db_manager - INFO - Transaction committed successfully
2025-09-08 08:39:03,342 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-08 08:39:03,342 - db_manager - INFO - Connecting to database: grievance_db
2025-09-08 08:39:03,348 - db_manager - INFO - Starting database transaction
2025-09-08 08:39:03,348 - db_manager - INFO - Executing encrypt_field: SELECT encode(pgp_sym_encrypt(%s, %s), 'hex') AS encrypted...
2025-09-08 08:39:03,349 - db_manager - INFO - encrypt_field completed in 0.01s. Rows: 1
2025-09-08 08:39:03,349 - db_manager - INFO - Transaction committed successfully
2025-09-08 08:39:03,349 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-08 08:39:03,349 - db_manager - DEBUG - phone number +9779876543210 hashed to c95ee4a714418be9379a77482c9a8b2003400429703eabebc8d6d971e864f8e0 at hash_sensitive_data
2025-09-08 08:39:03,349 - db_manager - DEBUG - encrypted and hashed data at encrypt_and_hash_sensitive_data: {'complainant_full_name': 'c30d040703027f6c08079e74c9047fd23901747f15042290fd7a807550eb8f71ef3bfb3107bc3078ff62c715ebab87c5cb6a01daa33f3207cd1ce6306c7d2312f8b35bee867307d8aa16', 'complainant_phone': 'c30d040703022f9f6058b7ce0ec865d23f018965c64a6d4157774890ed5a9faa7e28afb854e2853cec0cc97413305ff8f0fb41c8fa03a2adc6dd32bce465def4759890f17c9aed9097b60f2385269a30', 'complainant_email': 'c30d040703029217f913b7a9603876d23d0102bde5a562e8d46c6c75885dfb9136261ecd9fae0b30528c419d1acfd72dad6f09c7dca98e3457314748e59de8a017d6f6a7f023d20e2886ae787ff4', 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_phone_hash': 'c95ee4a714418be9379a77482c9a8b2003400429703eabebc8d6d971e864f8e0', 'complainant_email_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'complainant_full_name_hash': 'e3df2bf608189f9d7a34a09433c704e6c1d11cc12c15c0ebda0332cb911907fc'}
2025-09-08 08:39:03,349 - db_manager - DEBUG - encrypted_data at update_complainant: {'complainant_full_name': 'c30d040703027f6c08079e74c9047fd23901747f15042290fd7a807550eb8f71ef3bfb3107bc3078ff62c715ebab87c5cb6a01daa33f3207cd1ce6306c7d2312f8b35bee867307d8aa16', 'complainant_phone': 'c30d040703022f9f6058b7ce0ec865d23f018965c64a6d4157774890ed5a9faa7e28afb854e2853cec0cc97413305ff8f0fb41c8fa03a2adc6dd32bce465def4759890f17c9aed9097b60f2385269a30', 'complainant_email': 'c30d040703029217f913b7a9603876d23d0102bde5a562e8d46c6c75885dfb9136261ecd9fae0b30528c419d1acfd72dad6f09c7dca98e3457314748e59de8a017d6f6a7f023d20e2886ae787ff4', 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_phone_hash': 'c95ee4a714418be9379a77482c9a8b2003400429703eabebc8d6d971e864f8e0', 'complainant_email_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'complainant_full_name_hash': 'e3df2bf608189f9d7a34a09433c704e6c1d11cc12c15c0ebda0332cb911907fc'}
2025-09-08 08:39:03,349 - db_manager - DEBUG - execute_update values: ('c30d040703027f6c08079e74c9047fd23901747f15042290fd7a807550eb8f71ef3bfb3107bc3078ff62c715ebab87c5cb6a01daa33f3207cd1ce6306c7d2312f8b35bee867307d8aa16', 'c30d040703022f9f6058b7ce0ec865d23f018965c64a6d4157774890ed5a9faa7e28afb854e2853cec0cc97413305ff8f0fb41c8fa03a2adc6dd32bce465def4759890f17c9aed9097b60f2385269a30', 'c30d040703029217f913b7a9603876d23d0102bde5a562e8d46c6c75885dfb9136261ecd9fae0b30528c419d1acfd72dad6f09c7dca98e3457314748e59de8a017d6f6a7f023d20e2886ae787ff4', 'Koshi', 'Jhapa', 'c95ee4a714418be9379a77482c9a8b2003400429703eabebc8d6d971e864f8e0', 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'e3df2bf608189f9d7a34a09433c704e6c1d11cc12c15c0ebda0332cb911907fc', 'CM-20250908-KOJH-6767-B')
2025-09-08 08:39:03,349 - db_manager - DEBUG - execute_update query: UPDATE complainants SET complainant_full_name = %s, complainant_phone = %s, complainant_email = %s, complainant_province = %s, complainant_district = %s, complainant_phone_hash = %s, complainant_email_hash = %s, complainant_full_name_hash = %s WHERE complainant_id = %s
2025-09-08 08:39:03,349 - db_manager - INFO - Connecting to database: grievance_db
2025-09-08 08:39:03,354 - db_manager - INFO - Starting database transaction
2025-09-08 08:39:03,354 - db_manager - INFO - execute_update: Executing update query: UPDATE complainants SET complainant_full_name = %s, complainant_phone = %s, complainant_email = %s, ...
2025-09-08 08:39:03,355 - db_manager - INFO - execute_update: Update completed in 0.01s. Affected rows: 1
2025-09-08 08:39:03,357 - db_manager - INFO - Transaction committed successfully
2025-09-08 08:39:03,358 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-08 08:39:03,358 - db_manager - INFO - Complainant updated in db: CM-20250908-KOJH-6767-B
2025-09-08 08:39:03,358 - db_manager - INFO - update_grievance: Updating grievance with ID: GR-20250908-KOJH-5220-B
2025-09-08 08:39:03,358 - db_manager - DEBUG - execute_update values: ('dust everywhere in my house d kids are coughing need to go to hospital', 'GR-20250908-KOJH-5220-B')
2025-09-08 08:39:03,358 - db_manager - DEBUG - execute_update query: 
                    UPDATE grievances 
                    SET grievance_description = %s, grievance_modification_date = CURRENT_TIMESTAMP
                    WHERE grievance_id = %s
                    RETURNING grievance_id
                
2025-09-08 08:39:03,358 - db_manager - INFO - Connecting to database: grievance_db
2025-09-08 08:39:03,362 - db_manager - INFO - Starting database transaction
2025-09-08 08:39:03,362 - db_manager - INFO - execute_update: Executing update query: 
                    UPDATE grievances 
                    SET grievance_description = %s, grievanc...
2025-09-08 08:39:03,364 - db_manager - INFO - execute_update: Update completed in 0.01s. Affected rows: 1
2025-09-08 08:39:03,366 - db_manager - INFO - Transaction committed successfully
2025-09-08 08:39:03,366 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-08 08:39:03,366 - db_manager - INFO - update_grievance: Updated grievance with ID: GR-20250908-KOJH-5220-B, rows affected: 1
2025-09-08 08:39:03,366 - db_manager - INFO - Grievance updated in db: GR-20250908-KOJH-5220-B
2025-09-08 08:39:03,366 - db_manager - INFO - Connecting to database: grievance_db
2025-09-08 08:39:03,370 - db_manager - INFO - Starting database transaction
2025-09-08 08:39:03,371 - db_manager - INFO - Executing get_grievance_files: 
            SELECT file_id, file_name, file_type, file_size, upload_timestamp
            FROM file...
2025-09-08 08:39:03,372 - db_manager - INFO - get_grievance_files completed in 0.01s. Rows: 0
2025-09-08 08:39:03,372 - db_manager - INFO - Transaction committed successfully
2025-09-08 08:39:03,372 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-08 08:39:03,372 - db_manager - INFO - Connecting to database: grievance_db
2025-09-08 08:39:03,377 - db_manager - INFO - Starting database transaction
2025-09-08 08:39:03,377 - db_manager - INFO - Executing get_grievance_files: 
            SELECT file_id, file_name, file_type, file_size, upload_timestamp
            FROM file...
2025-09-08 08:39:03,378 - db_manager - INFO - get_grievance_files completed in 0.01s. Rows: 0
2025-09-08 08:39:03,378 - db_manager - INFO - Transaction committed successfully
2025-09-08 08:39:03,378 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-08 08:39:03,423 - db_manager - INFO - Connecting to database: grievance_db
2025-09-08 08:39:03,428 - db_manager - INFO - Starting database transaction
2025-09-08 08:39:03,428 - db_manager - INFO - Executing get_grievance_by_id: 
                SELECT g.*, c.complainant_full_name, c.complainant_phone, c.complainant_email,
    ...
2025-09-08 08:39:03,429 - db_manager - INFO - get_grievance_by_id completed in 0.01s. Rows: 1
2025-09-08 08:39:03,430 - db_manager - INFO - Transaction committed successfully
2025-09-08 08:39:03,430 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-08 08:39:03,430 - db_manager - DEBUG - get_grievance_by_id: grievance_id: {'grievance_id': 'GR-20250908-KOJH-5220-B', 'complainant_id': 'CM-20250908-KOJH-6767-B', 'grievance_categories': '{"Environmental - Air Pollution"}', 'grievance_summary': 'घरमा धूलो छ, बच्चाहरुले खोकी लागेको छ, अस्पताल जानु पर्ने छ', 'grievance_description': 'dust everywhere in my house d kids are coughing need to go to hospital', 'grievance_claimed_amount': None, 'grievance_location': None, 'language_code': 'en', 'classification_status': 'pending', 'grievance_creation_date': datetime.datetime(2025, 9, 8, 8, 38, 31, 902922, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'grievance_modification_date': datetime.datetime(2025, 9, 8, 8, 39, 3, 363012, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'is_temporary': True, 'source': 'bot', 'complainant_full_name': 'c30d040703027f6c08079e74c9047fd23901747f15042290fd7a807550eb8f71ef3bfb3107bc3078ff62c715ebab87c5cb6a01daa33f3207cd1ce6306c7d2312f8b35bee867307d8aa16', 'complainant_phone': 'c30d040703022f9f6058b7ce0ec865d23f018965c64a6d4157774890ed5a9faa7e28afb854e2853cec0cc97413305ff8f0fb41c8fa03a2adc6dd32bce465def4759890f17c9aed9097b60f2385269a30', 'complainant_email': 'c30d040703029217f913b7a9603876d23d0102bde5a562e8d46c6c75885dfb9136261ecd9fae0b30528c419d1acfd72dad6f09c7dca98e3457314748e59de8a017d6f6a7f023d20e2886ae787ff4', 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_municipality': None, 'complainant_ward': None, 'complainant_village': None, 'complainant_address': None}, results: [{'grievance_id': 'GR-20250908-KOJH-5220-B', 'complainant_id': 'CM-20250908-KOJH-6767-B', 'grievance_categories': '{"Environmental - Air Pollution"}', 'grievance_summary': 'घरमा धूलो छ, बच्चाहरुले खोकी लागेको छ, अस्पताल जानु पर्ने छ', 'grievance_description': 'dust everywhere in my house d kids are coughing need to go to hospital', 'grievance_claimed_amount': None, 'grievance_location': None, 'language_code': 'en', 'classification_status': 'pending', 'grievance_creation_date': datetime.datetime(2025, 9, 8, 8, 38, 31, 902922, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'grievance_modification_date': datetime.datetime(2025, 9, 8, 8, 39, 3, 363012, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'is_temporary': True, 'source': 'bot', 'complainant_full_name': 'c30d040703027f6c08079e74c9047fd23901747f15042290fd7a807550eb8f71ef3bfb3107bc3078ff62c715ebab87c5cb6a01daa33f3207cd1ce6306c7d2312f8b35bee867307d8aa16', 'complainant_phone': 'c30d040703022f9f6058b7ce0ec865d23f018965c64a6d4157774890ed5a9faa7e28afb854e2853cec0cc97413305ff8f0fb41c8fa03a2adc6dd32bce465def4759890f17c9aed9097b60f2385269a30', 'complainant_email': 'c30d040703029217f913b7a9603876d23d0102bde5a562e8d46c6c75885dfb9136261ecd9fae0b30528c419d1acfd72dad6f09c7dca98e3457314748e59de8a017d6f6a7f023d20e2886ae787ff4', 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_municipality': None, 'complainant_ward': None, 'complainant_village': None, 'complainant_address': None}]
2025-09-08 08:55:23,867 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-08 08:55:23,867 - db_manager - INFO - Database manager initialized successfully
2025-09-08 08:55:23,867 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-08 08:55:23,867 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-08 08:55:23,867 - db_manager - INFO - Database manager initialized successfully
2025-09-08 08:55:23,867 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-08 08:55:23,867 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-08 08:55:23,867 - db_manager - INFO - Database manager initialized successfully
2025-09-08 08:55:23,867 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-08 08:55:23,868 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-08 08:55:23,868 - db_manager - INFO - Database manager initialized successfully
2025-09-08 08:55:23,868 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-08 08:55:23,868 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-08 08:55:23,868 - db_manager - INFO - Database manager initialized successfully
2025-09-08 08:55:23,868 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-08 08:55:23,868 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-08 08:55:23,868 - db_manager - INFO - Database manager initialized successfully
2025-09-08 08:55:23,868 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-08 08:55:23,868 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-08 08:55:23,868 - db_manager - INFO - Database manager initialized successfully
2025-09-08 08:55:23,868 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-08 08:55:23,868 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-08 08:55:23,868 - db_manager - INFO - Database manager initialized successfully
2025-09-08 08:55:23,868 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-08 08:55:23,868 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-08 08:55:23,868 - db_manager - INFO - Database manager initialized successfully
2025-09-08 08:55:23,868 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-08 08:55:23,868 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-08 08:55:23,868 - db_manager - INFO - Database manager initialized successfully
2025-09-08 08:55:23,868 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-08 08:56:50,115 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-08 08:56:50,115 - db_manager - INFO - Database manager initialized successfully
2025-09-08 08:56:50,115 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-08 08:56:50,115 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-08 08:56:50,115 - db_manager - INFO - Database manager initialized successfully
2025-09-08 08:56:50,115 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-08 08:56:50,115 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-08 08:56:50,115 - db_manager - INFO - Database manager initialized successfully
2025-09-08 08:56:50,115 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-08 08:56:50,115 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-08 08:56:50,115 - db_manager - INFO - Database manager initialized successfully
2025-09-08 08:56:50,115 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-08 08:56:50,115 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-08 08:56:50,116 - db_manager - INFO - Database manager initialized successfully
2025-09-08 08:56:50,116 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-08 08:56:50,116 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-08 08:56:50,116 - db_manager - INFO - Database manager initialized successfully
2025-09-08 08:56:50,116 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-08 08:56:50,116 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-08 08:56:50,116 - db_manager - INFO - Database manager initialized successfully
2025-09-08 08:56:50,116 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-08 08:56:50,116 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-08 08:56:50,116 - db_manager - INFO - Database manager initialized successfully
2025-09-08 08:56:50,116 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-08 08:56:50,116 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-08 08:56:50,116 - db_manager - INFO - Database manager initialized successfully
2025-09-08 08:56:50,116 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-08 08:56:50,116 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-08 08:56:50,116 - db_manager - INFO - Database manager initialized successfully
2025-09-08 08:56:50,116 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-08 08:57:39,033 - db_manager - INFO - create_complainant: Creating complainant with ID: CM-20250908-KOJH-1867-B
2025-09-08 08:57:39,033 - db_manager - DEBUG - encrypted and hashed data at encrypt_and_hash_sensitive_data: {'complainant_id': 'CM-20250908-KOJH-1867-B', 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_unique_id': 'CM-20250908-KOJH-1867-B'}
2025-09-08 08:57:39,034 - db_manager - DEBUG - query_keys at generate_query_string: dict_keys(['complainant_id', 'complainant_province', 'complainant_district', 'complainant_unique_id'])
2025-09-08 08:57:39,034 - db_manager - DEBUG - Generated query: INSERT INTO complainants (complainant_id, complainant_province, complainant_district, complainant_unique_id) VALUES (%s, %s, %s, %s)
2025-09-08 08:57:39,034 - db_manager - DEBUG - len of query_keys: 4
2025-09-08 08:57:39,034 - db_manager - DEBUG - Generated query: INSERT INTO complainants (complainant_id, complainant_province, complainant_district, complainant_unique_id) VALUES (%s, %s, %s, %s)
2025-09-08 08:57:39,034 - db_manager - INFO - Connecting to database: grievance_db
2025-09-08 08:57:39,039 - db_manager - INFO - Starting database transaction
2025-09-08 08:57:39,042 - db_manager - INFO - Transaction committed successfully
2025-09-08 08:57:39,042 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-08 08:57:39,042 - db_manager - INFO - create_complainant: Successfully created complainant with ID: CM-20250908-KOJH-1867-B
2025-09-08 08:57:39,042 - db_manager - INFO - create_grievance: Creating grievance with data: {'grievance_id': 'GR-20250908-KOJH-83B5-B', 'complainant_id': 'CM-20250908-KOJH-1867-B', 'grievance_description': 'dust everywhere in my house d kids are coughing need to go to hospital', 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_office': None, 'source': 'bot', 'complainant_unique_id': 'CM-20250908-KOJH-1867-B'}
2025-09-08 08:57:39,043 - db_manager - INFO - create_grievance: Creating grievance with ID: GR-20250908-KOJH-83B5-B
2025-09-08 08:57:39,043 - db_manager - DEBUG - query_keys at generate_query_string: dict_keys(['grievance_id', 'complainant_id', 'grievance_description', 'source'])
2025-09-08 08:57:39,043 - db_manager - DEBUG - Generated query: INSERT INTO grievances (grievance_id, complainant_id, grievance_description, source) VALUES (%s, %s, %s, %s) RETURNING grievance_id
2025-09-08 08:57:39,043 - db_manager - DEBUG - len of query_keys: 4
2025-09-08 08:57:39,043 - db_manager - DEBUG - Generated query: INSERT INTO grievances (grievance_id, complainant_id, grievance_description, source) VALUES (%s, %s, %s, %s) RETURNING grievance_id
2025-09-08 08:57:39,043 - db_manager - INFO - Connecting to database: grievance_db
2025-09-08 08:57:39,048 - db_manager - INFO - Starting database transaction
2025-09-08 08:57:39,052 - db_manager - INFO - Transaction committed successfully
2025-09-08 08:57:39,052 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-08 08:57:39,053 - db_manager - INFO - create_grievance: Successfully created grievance with ID: GR-20250908-KOJH-83B5-B
2025-09-08 08:58:00,842 - db_manager - INFO - Connecting to database: grievance_db
2025-09-08 08:58:00,848 - db_manager - INFO - Starting database transaction
2025-09-08 08:58:00,848 - db_manager - INFO - Executing get_complainant_by_id: 
            SELECT complainant_id, complainant_unique_id, complainant_full_name,    complainant_pho...
2025-09-08 08:58:00,850 - db_manager - INFO - get_complainant_by_id completed in 0.01s. Rows: 1
2025-09-08 08:58:00,850 - db_manager - INFO - Transaction committed successfully
2025-09-08 08:58:00,850 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-08 08:58:00,850 - db_manager - INFO - Connecting to database: grievance_db
2025-09-08 08:58:00,855 - db_manager - INFO - Starting database transaction
2025-09-08 08:58:00,855 - db_manager - INFO - Executing get_grievance_by_id: 
                SELECT g.*, c.complainant_full_name, c.complainant_phone, c.complainant_email,
    ...
2025-09-08 08:58:00,857 - db_manager - INFO - get_grievance_by_id completed in 0.01s. Rows: 1
2025-09-08 08:58:00,857 - db_manager - INFO - Transaction committed successfully
2025-09-08 08:58:00,857 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-08 08:58:00,858 - db_manager - DEBUG - get_grievance_by_id: grievance_id: {'grievance_id': 'GR-20250908-KOJH-83B5-B', 'complainant_id': 'CM-20250908-KOJH-1867-B', 'grievance_categories': '{"Environmental - Air Pollution"}', 'grievance_summary': 'घरमा धूलो भयो, बच्चाहरुलाई खोकी लागेको छ र अस्पताल जानु पर्ने भएको छ।', 'grievance_description': 'dust everywhere in my house d kids are coughing need to go to hospital', 'grievance_claimed_amount': None, 'grievance_location': None, 'language_code': 'en', 'classification_status': 'pending', 'grievance_creation_date': datetime.datetime(2025, 9, 8, 8, 57, 39, 48361, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'grievance_modification_date': datetime.datetime(2025, 9, 8, 8, 57, 43, 648222, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'is_temporary': True, 'source': 'bot', 'complainant_full_name': None, 'complainant_phone': None, 'complainant_email': None, 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_municipality': None, 'complainant_ward': None, 'complainant_village': None, 'complainant_address': None}, results: [{'grievance_id': 'GR-20250908-KOJH-83B5-B', 'complainant_id': 'CM-20250908-KOJH-1867-B', 'grievance_categories': '{"Environmental - Air Pollution"}', 'grievance_summary': 'घरमा धूलो भयो, बच्चाहरुलाई खोकी लागेको छ र अस्पताल जानु पर्ने भएको छ।', 'grievance_description': 'dust everywhere in my house d kids are coughing need to go to hospital', 'grievance_claimed_amount': None, 'grievance_location': None, 'language_code': 'en', 'classification_status': 'pending', 'grievance_creation_date': datetime.datetime(2025, 9, 8, 8, 57, 39, 48361, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'grievance_modification_date': datetime.datetime(2025, 9, 8, 8, 57, 43, 648222, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'is_temporary': True, 'source': 'bot', 'complainant_full_name': None, 'complainant_phone': None, 'complainant_email': None, 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_municipality': None, 'complainant_ward': None, 'complainant_village': None, 'complainant_address': None}]
2025-09-08 08:58:00,858 - db_manager - INFO - update_complainant: Updating complainant with ID: CM-20250908-KOJH-1867-B
2025-09-08 08:58:00,858 - db_manager - INFO - Connecting to database: grievance_db
2025-09-08 08:58:00,864 - db_manager - INFO - Starting database transaction
2025-09-08 08:58:00,864 - db_manager - INFO - Executing encrypt_field: SELECT encode(pgp_sym_encrypt(%s, %s), 'hex') AS encrypted...
2025-09-08 08:58:00,868 - db_manager - INFO - encrypt_field completed in 0.01s. Rows: 1
2025-09-08 08:58:00,868 - db_manager - INFO - Transaction committed successfully
2025-09-08 08:58:00,868 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-08 08:58:00,869 - db_manager - DEBUG - encrypted phone number Not provided at encrypt_complainant_data: c30d040703022c2e7323b4bff73871d23d0173d591a3c08ee2a05dc7eac75d6bad45ab1bfb371333b6b189817ab92816e21ea525a1fd8f69a0cf10fb167f6a25a0b59c775bac384f82987673579d
2025-09-08 08:58:00,869 - db_manager - INFO - Connecting to database: grievance_db
2025-09-08 08:58:00,875 - db_manager - INFO - Starting database transaction
2025-09-08 08:58:00,875 - db_manager - INFO - Executing encrypt_field: SELECT encode(pgp_sym_encrypt(%s, %s), 'hex') AS encrypted...
2025-09-08 08:58:00,876 - db_manager - INFO - encrypt_field completed in 0.01s. Rows: 1
2025-09-08 08:58:00,876 - db_manager - INFO - Transaction committed successfully
2025-09-08 08:58:00,876 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-08 08:58:00,876 - db_manager - INFO - Connecting to database: grievance_db
2025-09-08 08:58:00,882 - db_manager - INFO - Starting database transaction
2025-09-08 08:58:00,882 - db_manager - INFO - Executing encrypt_field: SELECT encode(pgp_sym_encrypt(%s, %s), 'hex') AS encrypted...
2025-09-08 08:58:00,883 - db_manager - INFO - encrypt_field completed in 0.01s. Rows: 1
2025-09-08 08:58:00,884 - db_manager - INFO - Transaction committed successfully
2025-09-08 08:58:00,884 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-08 08:58:00,884 - db_manager - DEBUG - phone number Not provided hashed to d83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f at hash_sensitive_data
2025-09-08 08:58:00,884 - db_manager - DEBUG - encrypted and hashed data at encrypt_and_hash_sensitive_data: {'complainant_full_name': 'c30d04070302f4b264d815fad01270d23d01e4698c63fbb0c2d95274bfcb4661683f96e5b33d67c8e7472844d237556226bd33d5c41cf7f4021d969df93ae20003ddd6ace93c2feee484f4a50928', 'complainant_phone': 'c30d040703022c2e7323b4bff73871d23d0173d591a3c08ee2a05dc7eac75d6bad45ab1bfb371333b6b189817ab92816e21ea525a1fd8f69a0cf10fb167f6a25a0b59c775bac384f82987673579d', 'complainant_email': 'c30d040703021e5a09c20376573770d23d01689a47ac7ebfb4715fe085f093363267b5c037368ae240bdda3786368d73a39957cc2d579960183c4f7319405d200d9648d4c20ceabee008800a670f', 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_phone_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'complainant_email_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'complainant_full_name_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f'}
2025-09-08 08:58:00,884 - db_manager - DEBUG - encrypted_data at update_complainant: {'complainant_full_name': 'c30d04070302f4b264d815fad01270d23d01e4698c63fbb0c2d95274bfcb4661683f96e5b33d67c8e7472844d237556226bd33d5c41cf7f4021d969df93ae20003ddd6ace93c2feee484f4a50928', 'complainant_phone': 'c30d040703022c2e7323b4bff73871d23d0173d591a3c08ee2a05dc7eac75d6bad45ab1bfb371333b6b189817ab92816e21ea525a1fd8f69a0cf10fb167f6a25a0b59c775bac384f82987673579d', 'complainant_email': 'c30d040703021e5a09c20376573770d23d01689a47ac7ebfb4715fe085f093363267b5c037368ae240bdda3786368d73a39957cc2d579960183c4f7319405d200d9648d4c20ceabee008800a670f', 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_phone_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'complainant_email_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'complainant_full_name_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f'}
2025-09-08 08:58:00,884 - db_manager - DEBUG - execute_update values: ('c30d04070302f4b264d815fad01270d23d01e4698c63fbb0c2d95274bfcb4661683f96e5b33d67c8e7472844d237556226bd33d5c41cf7f4021d969df93ae20003ddd6ace93c2feee484f4a50928', 'c30d040703022c2e7323b4bff73871d23d0173d591a3c08ee2a05dc7eac75d6bad45ab1bfb371333b6b189817ab92816e21ea525a1fd8f69a0cf10fb167f6a25a0b59c775bac384f82987673579d', 'c30d040703021e5a09c20376573770d23d01689a47ac7ebfb4715fe085f093363267b5c037368ae240bdda3786368d73a39957cc2d579960183c4f7319405d200d9648d4c20ceabee008800a670f', 'Koshi', 'Jhapa', 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'CM-20250908-KOJH-1867-B')
2025-09-08 08:58:00,884 - db_manager - DEBUG - execute_update query: UPDATE complainants SET complainant_full_name = %s, complainant_phone = %s, complainant_email = %s, complainant_province = %s, complainant_district = %s, complainant_phone_hash = %s, complainant_email_hash = %s, complainant_full_name_hash = %s WHERE complainant_id = %s
2025-09-08 08:58:00,884 - db_manager - INFO - Connecting to database: grievance_db
2025-09-08 08:58:00,889 - db_manager - INFO - Starting database transaction
2025-09-08 08:58:00,890 - db_manager - INFO - execute_update: Executing update query: UPDATE complainants SET complainant_full_name = %s, complainant_phone = %s, complainant_email = %s, ...
2025-09-08 08:58:00,891 - db_manager - INFO - execute_update: Update completed in 0.01s. Affected rows: 1
2025-09-08 08:58:00,892 - db_manager - INFO - Transaction committed successfully
2025-09-08 08:58:00,892 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-08 08:58:00,893 - db_manager - INFO - Complainant updated in db: CM-20250908-KOJH-1867-B
2025-09-08 08:58:00,893 - db_manager - INFO - update_grievance: Updating grievance with ID: GR-20250908-KOJH-83B5-B
2025-09-08 08:58:00,893 - db_manager - DEBUG - execute_update values: ('dust everywhere in my house d kids are coughing need to go to hospital', 'GR-20250908-KOJH-83B5-B')
2025-09-08 08:58:00,893 - db_manager - DEBUG - execute_update query: 
                    UPDATE grievances 
                    SET grievance_description = %s, grievance_modification_date = CURRENT_TIMESTAMP
                    WHERE grievance_id = %s
                    RETURNING grievance_id
                
2025-09-08 08:58:00,893 - db_manager - INFO - Connecting to database: grievance_db
2025-09-08 08:58:00,898 - db_manager - INFO - Starting database transaction
2025-09-08 08:58:00,898 - db_manager - INFO - execute_update: Executing update query: 
                    UPDATE grievances 
                    SET grievance_description = %s, grievanc...
2025-09-08 08:58:00,899 - db_manager - INFO - execute_update: Update completed in 0.01s. Affected rows: 1
2025-09-08 08:58:00,901 - db_manager - INFO - Transaction committed successfully
2025-09-08 08:58:00,901 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-08 08:58:00,901 - db_manager - INFO - update_grievance: Updated grievance with ID: GR-20250908-KOJH-83B5-B, rows affected: 1
2025-09-08 08:58:00,902 - db_manager - INFO - Grievance updated in db: GR-20250908-KOJH-83B5-B
2025-09-08 08:58:00,902 - db_manager - INFO - Connecting to database: grievance_db
2025-09-08 08:58:00,906 - db_manager - INFO - Starting database transaction
2025-09-08 08:58:00,907 - db_manager - INFO - Executing get_grievance_files: 
            SELECT file_id, file_name, file_type, file_size, upload_timestamp
            FROM file...
2025-09-08 08:58:00,908 - db_manager - INFO - get_grievance_files completed in 0.01s. Rows: 0
2025-09-08 08:58:00,908 - db_manager - INFO - Transaction committed successfully
2025-09-08 08:58:00,908 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-08 08:58:00,908 - db_manager - INFO - Connecting to database: grievance_db
2025-09-08 08:58:00,913 - db_manager - INFO - Starting database transaction
2025-09-08 08:58:00,913 - db_manager - INFO - Executing get_grievance_files: 
            SELECT file_id, file_name, file_type, file_size, upload_timestamp
            FROM file...
2025-09-08 08:58:00,914 - db_manager - INFO - get_grievance_files completed in 0.01s. Rows: 0
2025-09-08 08:58:00,914 - db_manager - INFO - Transaction committed successfully
2025-09-08 08:58:00,914 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-08 08:58:00,957 - db_manager - INFO - Connecting to database: grievance_db
2025-09-08 08:58:00,962 - db_manager - INFO - Starting database transaction
2025-09-08 08:58:00,963 - db_manager - INFO - Executing get_grievance_by_id: 
                SELECT g.*, c.complainant_full_name, c.complainant_phone, c.complainant_email,
    ...
2025-09-08 08:58:00,964 - db_manager - INFO - get_grievance_by_id completed in 0.01s. Rows: 1
2025-09-08 08:58:00,965 - db_manager - INFO - Transaction committed successfully
2025-09-08 08:58:00,965 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-08 08:58:00,965 - db_manager - DEBUG - get_grievance_by_id: grievance_id: {'grievance_id': 'GR-20250908-KOJH-83B5-B', 'complainant_id': 'CM-20250908-KOJH-1867-B', 'grievance_categories': '{"Environmental - Air Pollution"}', 'grievance_summary': 'घरमा धूलो भयो, बच्चाहरुलाई खोकी लागेको छ र अस्पताल जानु पर्ने भएको छ।', 'grievance_description': 'dust everywhere in my house d kids are coughing need to go to hospital', 'grievance_claimed_amount': None, 'grievance_location': None, 'language_code': 'en', 'classification_status': 'pending', 'grievance_creation_date': datetime.datetime(2025, 9, 8, 8, 57, 39, 48361, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'grievance_modification_date': datetime.datetime(2025, 9, 8, 8, 58, 0, 898540, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'is_temporary': True, 'source': 'bot', 'complainant_full_name': 'c30d04070302f4b264d815fad01270d23d01e4698c63fbb0c2d95274bfcb4661683f96e5b33d67c8e7472844d237556226bd33d5c41cf7f4021d969df93ae20003ddd6ace93c2feee484f4a50928', 'complainant_phone': 'c30d040703022c2e7323b4bff73871d23d0173d591a3c08ee2a05dc7eac75d6bad45ab1bfb371333b6b189817ab92816e21ea525a1fd8f69a0cf10fb167f6a25a0b59c775bac384f82987673579d', 'complainant_email': 'c30d040703021e5a09c20376573770d23d01689a47ac7ebfb4715fe085f093363267b5c037368ae240bdda3786368d73a39957cc2d579960183c4f7319405d200d9648d4c20ceabee008800a670f', 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_municipality': None, 'complainant_ward': None, 'complainant_village': None, 'complainant_address': None}, results: [{'grievance_id': 'GR-20250908-KOJH-83B5-B', 'complainant_id': 'CM-20250908-KOJH-1867-B', 'grievance_categories': '{"Environmental - Air Pollution"}', 'grievance_summary': 'घरमा धूलो भयो, बच्चाहरुलाई खोकी लागेको छ र अस्पताल जानु पर्ने भएको छ।', 'grievance_description': 'dust everywhere in my house d kids are coughing need to go to hospital', 'grievance_claimed_amount': None, 'grievance_location': None, 'language_code': 'en', 'classification_status': 'pending', 'grievance_creation_date': datetime.datetime(2025, 9, 8, 8, 57, 39, 48361, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'grievance_modification_date': datetime.datetime(2025, 9, 8, 8, 58, 0, 898540, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'is_temporary': True, 'source': 'bot', 'complainant_full_name': 'c30d04070302f4b264d815fad01270d23d01e4698c63fbb0c2d95274bfcb4661683f96e5b33d67c8e7472844d237556226bd33d5c41cf7f4021d969df93ae20003ddd6ace93c2feee484f4a50928', 'complainant_phone': 'c30d040703022c2e7323b4bff73871d23d0173d591a3c08ee2a05dc7eac75d6bad45ab1bfb371333b6b189817ab92816e21ea525a1fd8f69a0cf10fb167f6a25a0b59c775bac384f82987673579d', 'complainant_email': 'c30d040703021e5a09c20376573770d23d01689a47ac7ebfb4715fe085f093363267b5c037368ae240bdda3786368d73a39957cc2d579960183c4f7319405d200d9648d4c20ceabee008800a670f', 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_municipality': None, 'complainant_ward': None, 'complainant_village': None, 'complainant_address': None}]
2025-09-08 09:01:32,422 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-08 09:01:32,422 - db_manager - INFO - Database manager initialized successfully
2025-09-08 09:01:32,422 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-08 09:01:32,422 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-08 09:01:32,422 - db_manager - INFO - Database manager initialized successfully
2025-09-08 09:01:32,422 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-08 09:01:32,422 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-08 09:01:32,422 - db_manager - INFO - Database manager initialized successfully
2025-09-08 09:01:32,422 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-08 09:01:32,422 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-08 09:01:32,422 - db_manager - INFO - Database manager initialized successfully
2025-09-08 09:01:32,422 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-08 09:01:32,422 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-08 09:01:32,423 - db_manager - INFO - Database manager initialized successfully
2025-09-08 09:01:32,423 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-08 09:01:32,423 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-08 09:01:32,423 - db_manager - INFO - Database manager initialized successfully
2025-09-08 09:01:32,423 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-08 09:01:32,423 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-08 09:01:32,423 - db_manager - INFO - Database manager initialized successfully
2025-09-08 09:01:32,423 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-08 09:01:32,423 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-08 09:01:32,423 - db_manager - INFO - Database manager initialized successfully
2025-09-08 09:01:32,423 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-08 09:01:32,423 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-08 09:01:32,423 - db_manager - INFO - Database manager initialized successfully
2025-09-08 09:01:32,423 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-08 09:01:32,423 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-08 09:01:32,423 - db_manager - INFO - Database manager initialized successfully
2025-09-08 09:01:32,423 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-08 09:02:36,683 - db_manager - INFO - create_complainant: Creating complainant with ID: CM-20250908-KOJH-DC6C-B
2025-09-08 09:02:36,683 - db_manager - DEBUG - encrypted and hashed data at encrypt_and_hash_sensitive_data: {'complainant_id': 'CM-20250908-KOJH-DC6C-B', 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_unique_id': 'CM-20250908-KOJH-DC6C-B'}
2025-09-08 09:02:36,683 - db_manager - DEBUG - query_keys at generate_query_string: dict_keys(['complainant_id', 'complainant_province', 'complainant_district', 'complainant_unique_id'])
2025-09-08 09:02:36,683 - db_manager - DEBUG - Generated query: INSERT INTO complainants (complainant_id, complainant_province, complainant_district, complainant_unique_id) VALUES (%s, %s, %s, %s)
2025-09-08 09:02:36,683 - db_manager - DEBUG - len of query_keys: 4
2025-09-08 09:02:36,683 - db_manager - DEBUG - Generated query: INSERT INTO complainants (complainant_id, complainant_province, complainant_district, complainant_unique_id) VALUES (%s, %s, %s, %s)
2025-09-08 09:02:36,683 - db_manager - INFO - Connecting to database: grievance_db
2025-09-08 09:02:36,690 - db_manager - INFO - Starting database transaction
2025-09-08 09:02:36,693 - db_manager - INFO - Transaction committed successfully
2025-09-08 09:02:36,693 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-08 09:02:36,693 - db_manager - INFO - create_complainant: Successfully created complainant with ID: CM-20250908-KOJH-DC6C-B
2025-09-08 09:02:36,693 - db_manager - INFO - create_grievance: Creating grievance with data: {'grievance_id': 'GR-20250908-KOJH-6D18-B', 'complainant_id': 'CM-20250908-KOJH-DC6C-B', 'grievance_description': 'dust everywhere in my house\nkids are coughing too much\nneed to go to hospital', 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_office': None, 'source': 'bot', 'complainant_unique_id': 'CM-20250908-KOJH-DC6C-B'}
2025-09-08 09:02:36,693 - db_manager - INFO - create_grievance: Creating grievance with ID: GR-20250908-KOJH-6D18-B
2025-09-08 09:02:36,693 - db_manager - DEBUG - query_keys at generate_query_string: dict_keys(['grievance_id', 'complainant_id', 'grievance_description', 'source'])
2025-09-08 09:02:36,693 - db_manager - DEBUG - Generated query: INSERT INTO grievances (grievance_id, complainant_id, grievance_description, source) VALUES (%s, %s, %s, %s) RETURNING grievance_id
2025-09-08 09:02:36,693 - db_manager - DEBUG - len of query_keys: 4
2025-09-08 09:02:36,693 - db_manager - DEBUG - Generated query: INSERT INTO grievances (grievance_id, complainant_id, grievance_description, source) VALUES (%s, %s, %s, %s) RETURNING grievance_id
2025-09-08 09:02:36,694 - db_manager - INFO - Connecting to database: grievance_db
2025-09-08 09:02:36,699 - db_manager - INFO - Starting database transaction
2025-09-08 09:02:36,703 - db_manager - INFO - Transaction committed successfully
2025-09-08 09:02:36,704 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-08 09:02:36,704 - db_manager - INFO - create_grievance: Successfully created grievance with ID: GR-20250908-KOJH-6D18-B
2025-09-08 09:02:57,956 - db_manager - INFO - Connecting to database: grievance_db
2025-09-08 09:02:57,962 - db_manager - INFO - Starting database transaction
2025-09-08 09:02:57,962 - db_manager - INFO - Executing get_complainant_by_id: 
            SELECT complainant_id, complainant_unique_id, complainant_full_name,    complainant_pho...
2025-09-08 09:02:57,963 - db_manager - INFO - get_complainant_by_id completed in 0.01s. Rows: 1
2025-09-08 09:02:57,963 - db_manager - INFO - Transaction committed successfully
2025-09-08 09:02:57,963 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-08 09:02:57,963 - db_manager - INFO - Connecting to database: grievance_db
2025-09-08 09:02:57,968 - db_manager - INFO - Starting database transaction
2025-09-08 09:02:57,968 - db_manager - INFO - Executing get_grievance_by_id: 
                SELECT g.*, c.complainant_full_name, c.complainant_phone, c.complainant_email,
    ...
2025-09-08 09:02:57,969 - db_manager - INFO - get_grievance_by_id completed in 0.01s. Rows: 1
2025-09-08 09:02:57,969 - db_manager - INFO - Transaction committed successfully
2025-09-08 09:02:57,970 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-08 09:02:57,970 - db_manager - DEBUG - get_grievance_by_id: grievance_id: {'grievance_id': 'GR-20250908-KOJH-6D18-B', 'complainant_id': 'CM-20250908-KOJH-DC6C-B', 'grievance_categories': '{"Environmental - Air Pollution"}', 'grievance_summary': 'घरमा धुलो सबै ठाउँमा छ। बच्चाहरु धेरै खोक्दैछन् र अस्पताल जानु पर्दछ।', 'grievance_description': 'dust everywhere in my house\nkids are coughing too much\nneed to go to hospital', 'grievance_claimed_amount': None, 'grievance_location': None, 'language_code': 'en', 'classification_status': 'pending', 'grievance_creation_date': datetime.datetime(2025, 9, 8, 9, 2, 36, 700058, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'grievance_modification_date': datetime.datetime(2025, 9, 8, 9, 2, 40, 59091, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'is_temporary': True, 'source': 'bot', 'complainant_full_name': None, 'complainant_phone': None, 'complainant_email': None, 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_municipality': None, 'complainant_ward': None, 'complainant_village': None, 'complainant_address': None}, results: [{'grievance_id': 'GR-20250908-KOJH-6D18-B', 'complainant_id': 'CM-20250908-KOJH-DC6C-B', 'grievance_categories': '{"Environmental - Air Pollution"}', 'grievance_summary': 'घरमा धुलो सबै ठाउँमा छ। बच्चाहरु धेरै खोक्दैछन् र अस्पताल जानु पर्दछ।', 'grievance_description': 'dust everywhere in my house\nkids are coughing too much\nneed to go to hospital', 'grievance_claimed_amount': None, 'grievance_location': None, 'language_code': 'en', 'classification_status': 'pending', 'grievance_creation_date': datetime.datetime(2025, 9, 8, 9, 2, 36, 700058, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'grievance_modification_date': datetime.datetime(2025, 9, 8, 9, 2, 40, 59091, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'is_temporary': True, 'source': 'bot', 'complainant_full_name': None, 'complainant_phone': None, 'complainant_email': None, 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_municipality': None, 'complainant_ward': None, 'complainant_village': None, 'complainant_address': None}]
2025-09-08 09:02:57,970 - db_manager - INFO - update_complainant: Updating complainant with ID: CM-20250908-KOJH-DC6C-B
2025-09-08 09:02:57,970 - db_manager - INFO - Connecting to database: grievance_db
2025-09-08 09:02:57,975 - db_manager - INFO - Starting database transaction
2025-09-08 09:02:57,975 - db_manager - INFO - Executing encrypt_field: SELECT encode(pgp_sym_encrypt(%s, %s), 'hex') AS encrypted...
2025-09-08 09:02:57,976 - db_manager - INFO - encrypt_field completed in 0.01s. Rows: 1
2025-09-08 09:02:57,976 - db_manager - INFO - Transaction committed successfully
2025-09-08 09:02:57,976 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-08 09:02:57,976 - db_manager - INFO - Connecting to database: grievance_db
2025-09-08 09:02:57,981 - db_manager - INFO - Starting database transaction
2025-09-08 09:02:57,981 - db_manager - INFO - Executing encrypt_field: SELECT encode(pgp_sym_encrypt(%s, %s), 'hex') AS encrypted...
2025-09-08 09:02:57,982 - db_manager - INFO - encrypt_field completed in 0.01s. Rows: 1
2025-09-08 09:02:57,982 - db_manager - INFO - Transaction committed successfully
2025-09-08 09:02:57,982 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-08 09:02:57,982 - db_manager - INFO - Connecting to database: grievance_db
2025-09-08 09:02:57,987 - db_manager - INFO - Starting database transaction
2025-09-08 09:02:57,987 - db_manager - INFO - Executing encrypt_field: SELECT encode(pgp_sym_encrypt(%s, %s), 'hex') AS encrypted...
2025-09-08 09:02:57,988 - db_manager - INFO - encrypt_field completed in 0.01s. Rows: 1
2025-09-08 09:02:57,988 - db_manager - INFO - Transaction committed successfully
2025-09-08 09:02:57,989 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-08 09:02:57,989 - db_manager - DEBUG - encrypted phone number Not provided at encrypt_complainant_data: c30d04070302d4174d910f89202462d23d0138b5ef3e9f581b0f41621f4c54e5d770565742cdcbcf6b4ac637c5d1a8ba8aa23997c1067242310a56fa99e50f2af8f35b5fbb08075d77597bb7e504
2025-09-08 09:02:57,989 - db_manager - DEBUG - phone number Not provided hashed to d83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f at hash_sensitive_data
2025-09-08 09:02:57,989 - db_manager - DEBUG - encrypted and hashed data at encrypt_and_hash_sensitive_data: {'complainant_full_name': 'c30d0407030217fece40db8ac92d60d23d016863682b5049c3311933f3399915debbbcc73c17e9d143283b2763c93822c53d0da7702ba65bdf6474ed9c2615304f6e83198e683b1aed81ccb886ff', 'complainant_phone': 'c30d04070302d4174d910f89202462d23d0138b5ef3e9f581b0f41621f4c54e5d770565742cdcbcf6b4ac637c5d1a8ba8aa23997c1067242310a56fa99e50f2af8f35b5fbb08075d77597bb7e504', 'complainant_email': 'c30d04070302181fadfc6ca9dc5a6bd23d0188a0f354d0a91f4f607b98ff5673497b85c831e783f2efc455ca449812cf0d9d0176fea9d7a9d9f9dbd8c50fcaf86945e365a43739906eaf19013e3d', 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_email_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'complainant_full_name_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'complainant_phone_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f'}
2025-09-08 09:02:57,989 - db_manager - DEBUG - encrypted_data at update_complainant: {'complainant_full_name': 'c30d0407030217fece40db8ac92d60d23d016863682b5049c3311933f3399915debbbcc73c17e9d143283b2763c93822c53d0da7702ba65bdf6474ed9c2615304f6e83198e683b1aed81ccb886ff', 'complainant_phone': 'c30d04070302d4174d910f89202462d23d0138b5ef3e9f581b0f41621f4c54e5d770565742cdcbcf6b4ac637c5d1a8ba8aa23997c1067242310a56fa99e50f2af8f35b5fbb08075d77597bb7e504', 'complainant_email': 'c30d04070302181fadfc6ca9dc5a6bd23d0188a0f354d0a91f4f607b98ff5673497b85c831e783f2efc455ca449812cf0d9d0176fea9d7a9d9f9dbd8c50fcaf86945e365a43739906eaf19013e3d', 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_email_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'complainant_full_name_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'complainant_phone_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f'}
2025-09-08 09:02:57,989 - db_manager - DEBUG - execute_update values: ('c30d0407030217fece40db8ac92d60d23d016863682b5049c3311933f3399915debbbcc73c17e9d143283b2763c93822c53d0da7702ba65bdf6474ed9c2615304f6e83198e683b1aed81ccb886ff', 'c30d04070302d4174d910f89202462d23d0138b5ef3e9f581b0f41621f4c54e5d770565742cdcbcf6b4ac637c5d1a8ba8aa23997c1067242310a56fa99e50f2af8f35b5fbb08075d77597bb7e504', 'c30d04070302181fadfc6ca9dc5a6bd23d0188a0f354d0a91f4f607b98ff5673497b85c831e783f2efc455ca449812cf0d9d0176fea9d7a9d9f9dbd8c50fcaf86945e365a43739906eaf19013e3d', 'Koshi', 'Jhapa', 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'CM-20250908-KOJH-DC6C-B')
2025-09-08 09:02:57,989 - db_manager - DEBUG - execute_update query: UPDATE complainants SET complainant_full_name = %s, complainant_phone = %s, complainant_email = %s, complainant_province = %s, complainant_district = %s, complainant_email_hash = %s, complainant_full_name_hash = %s, complainant_phone_hash = %s WHERE complainant_id = %s
2025-09-08 09:02:57,989 - db_manager - INFO - Connecting to database: grievance_db
2025-09-08 09:02:57,994 - db_manager - INFO - Starting database transaction
2025-09-08 09:02:57,994 - db_manager - INFO - execute_update: Executing update query: UPDATE complainants SET complainant_full_name = %s, complainant_phone = %s, complainant_email = %s, ...
2025-09-08 09:02:57,995 - db_manager - INFO - execute_update: Update completed in 0.01s. Affected rows: 1
2025-09-08 09:02:57,997 - db_manager - INFO - Transaction committed successfully
2025-09-08 09:02:57,997 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-08 09:02:57,997 - db_manager - INFO - Complainant updated in db: CM-20250908-KOJH-DC6C-B
2025-09-08 09:02:57,997 - db_manager - INFO - update_grievance: Updating grievance with ID: GR-20250908-KOJH-6D18-B
2025-09-08 09:02:57,997 - db_manager - DEBUG - execute_update values: ('dust everywhere in my house\nkids are coughing too much\nneed to go to hospital', 'GR-20250908-KOJH-6D18-B')
2025-09-08 09:02:57,997 - db_manager - DEBUG - execute_update query: 
                    UPDATE grievances 
                    SET grievance_description = %s, grievance_modification_date = CURRENT_TIMESTAMP
                    WHERE grievance_id = %s
                    RETURNING grievance_id
                
2025-09-08 09:02:57,997 - db_manager - INFO - Connecting to database: grievance_db
2025-09-08 09:02:58,002 - db_manager - INFO - Starting database transaction
2025-09-08 09:02:58,002 - db_manager - INFO - execute_update: Executing update query: 
                    UPDATE grievances 
                    SET grievance_description = %s, grievanc...
2025-09-08 09:02:58,003 - db_manager - INFO - execute_update: Update completed in 0.01s. Affected rows: 1
2025-09-08 09:02:58,007 - db_manager - INFO - Transaction committed successfully
2025-09-08 09:02:58,007 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-08 09:02:58,007 - db_manager - INFO - update_grievance: Updated grievance with ID: GR-20250908-KOJH-6D18-B, rows affected: 1
2025-09-08 09:02:58,007 - db_manager - INFO - Grievance updated in db: GR-20250908-KOJH-6D18-B
2025-09-08 09:02:58,007 - db_manager - INFO - Connecting to database: grievance_db
2025-09-08 09:02:58,012 - db_manager - INFO - Starting database transaction
2025-09-08 09:02:58,012 - db_manager - INFO - Executing get_grievance_files: 
            SELECT file_id, file_name, file_type, file_size, upload_timestamp
            FROM file...
2025-09-08 09:02:58,013 - db_manager - INFO - get_grievance_files completed in 0.01s. Rows: 0
2025-09-08 09:02:58,013 - db_manager - INFO - Transaction committed successfully
2025-09-08 09:02:58,013 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-08 09:02:58,013 - db_manager - INFO - Connecting to database: grievance_db
2025-09-08 09:02:58,018 - db_manager - INFO - Starting database transaction
2025-09-08 09:02:58,018 - db_manager - INFO - Executing get_grievance_files: 
            SELECT file_id, file_name, file_type, file_size, upload_timestamp
            FROM file...
2025-09-08 09:02:58,019 - db_manager - INFO - get_grievance_files completed in 0.01s. Rows: 0
2025-09-08 09:02:58,019 - db_manager - INFO - Transaction committed successfully
2025-09-08 09:02:58,019 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-08 09:02:58,064 - db_manager - INFO - Connecting to database: grievance_db
2025-09-08 09:02:58,069 - db_manager - INFO - Starting database transaction
2025-09-08 09:02:58,069 - db_manager - INFO - Executing get_grievance_by_id: 
                SELECT g.*, c.complainant_full_name, c.complainant_phone, c.complainant_email,
    ...
2025-09-08 09:02:58,071 - db_manager - INFO - get_grievance_by_id completed in 0.01s. Rows: 1
2025-09-08 09:02:58,071 - db_manager - INFO - Transaction committed successfully
2025-09-08 09:02:58,071 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-08 09:02:58,072 - db_manager - DEBUG - get_grievance_by_id: grievance_id: {'grievance_id': 'GR-20250908-KOJH-6D18-B', 'complainant_id': 'CM-20250908-KOJH-DC6C-B', 'grievance_categories': '{"Environmental - Air Pollution"}', 'grievance_summary': 'घरमा धुलो सबै ठाउँमा छ। बच्चाहरु धेरै खोक्दैछन् र अस्पताल जानु पर्दछ।', 'grievance_description': 'dust everywhere in my house\nkids are coughing too much\nneed to go to hospital', 'grievance_claimed_amount': None, 'grievance_location': None, 'language_code': 'en', 'classification_status': 'pending', 'grievance_creation_date': datetime.datetime(2025, 9, 8, 9, 2, 36, 700058, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'grievance_modification_date': datetime.datetime(2025, 9, 8, 9, 2, 58, 2522, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'is_temporary': True, 'source': 'bot', 'complainant_full_name': 'c30d0407030217fece40db8ac92d60d23d016863682b5049c3311933f3399915debbbcc73c17e9d143283b2763c93822c53d0da7702ba65bdf6474ed9c2615304f6e83198e683b1aed81ccb886ff', 'complainant_phone': 'c30d04070302d4174d910f89202462d23d0138b5ef3e9f581b0f41621f4c54e5d770565742cdcbcf6b4ac637c5d1a8ba8aa23997c1067242310a56fa99e50f2af8f35b5fbb08075d77597bb7e504', 'complainant_email': 'c30d04070302181fadfc6ca9dc5a6bd23d0188a0f354d0a91f4f607b98ff5673497b85c831e783f2efc455ca449812cf0d9d0176fea9d7a9d9f9dbd8c50fcaf86945e365a43739906eaf19013e3d', 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_municipality': None, 'complainant_ward': None, 'complainant_village': None, 'complainant_address': None}, results: [{'grievance_id': 'GR-20250908-KOJH-6D18-B', 'complainant_id': 'CM-20250908-KOJH-DC6C-B', 'grievance_categories': '{"Environmental - Air Pollution"}', 'grievance_summary': 'घरमा धुलो सबै ठाउँमा छ। बच्चाहरु धेरै खोक्दैछन् र अस्पताल जानु पर्दछ।', 'grievance_description': 'dust everywhere in my house\nkids are coughing too much\nneed to go to hospital', 'grievance_claimed_amount': None, 'grievance_location': None, 'language_code': 'en', 'classification_status': 'pending', 'grievance_creation_date': datetime.datetime(2025, 9, 8, 9, 2, 36, 700058, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'grievance_modification_date': datetime.datetime(2025, 9, 8, 9, 2, 58, 2522, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'is_temporary': True, 'source': 'bot', 'complainant_full_name': 'c30d0407030217fece40db8ac92d60d23d016863682b5049c3311933f3399915debbbcc73c17e9d143283b2763c93822c53d0da7702ba65bdf6474ed9c2615304f6e83198e683b1aed81ccb886ff', 'complainant_phone': 'c30d04070302d4174d910f89202462d23d0138b5ef3e9f581b0f41621f4c54e5d770565742cdcbcf6b4ac637c5d1a8ba8aa23997c1067242310a56fa99e50f2af8f35b5fbb08075d77597bb7e504', 'complainant_email': 'c30d04070302181fadfc6ca9dc5a6bd23d0188a0f354d0a91f4f607b98ff5673497b85c831e783f2efc455ca449812cf0d9d0176fea9d7a9d9f9dbd8c50fcaf86945e365a43739906eaf19013e3d', 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_municipality': None, 'complainant_ward': None, 'complainant_village': None, 'complainant_address': None}]
2025-09-08 09:15:28,336 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-08 09:15:28,337 - db_manager - INFO - Database manager initialized successfully
2025-09-08 09:15:28,337 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-08 09:15:28,337 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-08 09:15:28,337 - db_manager - INFO - Database manager initialized successfully
2025-09-08 09:15:28,337 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-08 09:15:28,337 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-08 09:15:28,337 - db_manager - INFO - Database manager initialized successfully
2025-09-08 09:15:28,337 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-08 09:15:28,337 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-08 09:15:28,337 - db_manager - INFO - Database manager initialized successfully
2025-09-08 09:15:28,337 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-08 09:15:28,337 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-08 09:15:28,337 - db_manager - INFO - Database manager initialized successfully
2025-09-08 09:15:28,337 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-08 09:15:28,337 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-08 09:15:28,337 - db_manager - INFO - Database manager initialized successfully
2025-09-08 09:15:28,337 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-08 09:15:28,337 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-08 09:15:28,337 - db_manager - INFO - Database manager initialized successfully
2025-09-08 09:15:28,337 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-08 09:15:28,338 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-08 09:15:28,338 - db_manager - INFO - Database manager initialized successfully
2025-09-08 09:15:28,338 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-08 09:15:28,338 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-08 09:15:28,338 - db_manager - INFO - Database manager initialized successfully
2025-09-08 09:15:28,338 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-08 09:15:28,338 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-08 09:15:28,338 - db_manager - INFO - Database manager initialized successfully
2025-09-08 09:15:28,338 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-08 09:16:52,399 - db_manager - INFO - create_complainant: Creating complainant with ID: CM-20250908-KOJH-C381-B
2025-09-08 09:16:52,399 - db_manager - DEBUG - encrypted and hashed data at encrypt_and_hash_sensitive_data: {'complainant_id': 'CM-20250908-KOJH-C381-B', 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_unique_id': 'CM-20250908-KOJH-C381-B'}
2025-09-08 09:16:52,399 - db_manager - DEBUG - query_keys at generate_query_string: dict_keys(['complainant_id', 'complainant_province', 'complainant_district', 'complainant_unique_id'])
2025-09-08 09:16:52,399 - db_manager - DEBUG - Generated query: INSERT INTO complainants (complainant_id, complainant_province, complainant_district, complainant_unique_id) VALUES (%s, %s, %s, %s)
2025-09-08 09:16:52,399 - db_manager - DEBUG - len of query_keys: 4
2025-09-08 09:16:52,399 - db_manager - DEBUG - Generated query: INSERT INTO complainants (complainant_id, complainant_province, complainant_district, complainant_unique_id) VALUES (%s, %s, %s, %s)
2025-09-08 09:16:52,399 - db_manager - INFO - Connecting to database: grievance_db
2025-09-08 09:16:52,407 - db_manager - INFO - Starting database transaction
2025-09-08 09:16:52,416 - db_manager - INFO - Transaction committed successfully
2025-09-08 09:16:52,416 - db_manager - INFO - Database connection closed. Duration: 0.02s
2025-09-08 09:16:52,416 - db_manager - INFO - create_complainant: Successfully created complainant with ID: CM-20250908-KOJH-C381-B
2025-09-08 09:16:52,416 - db_manager - INFO - create_grievance: Creating grievance with data: {'grievance_id': 'GR-20250908-KOJH-0426-B', 'complainant_id': 'CM-20250908-KOJH-C381-B', 'grievance_description': 'dust everywhere in my house kids are coughing too much need to go to hospital', 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_office': None, 'source': 'bot', 'complainant_unique_id': 'CM-20250908-KOJH-C381-B'}
2025-09-08 09:16:52,416 - db_manager - INFO - create_grievance: Creating grievance with ID: GR-20250908-KOJH-0426-B
2025-09-08 09:16:52,416 - db_manager - DEBUG - query_keys at generate_query_string: dict_keys(['grievance_id', 'complainant_id', 'grievance_description', 'source'])
2025-09-08 09:16:52,417 - db_manager - DEBUG - Generated query: INSERT INTO grievances (grievance_id, complainant_id, grievance_description, source) VALUES (%s, %s, %s, %s) RETURNING grievance_id
2025-09-08 09:16:52,417 - db_manager - DEBUG - len of query_keys: 4
2025-09-08 09:16:52,417 - db_manager - DEBUG - Generated query: INSERT INTO grievances (grievance_id, complainant_id, grievance_description, source) VALUES (%s, %s, %s, %s) RETURNING grievance_id
2025-09-08 09:16:52,417 - db_manager - INFO - Connecting to database: grievance_db
2025-09-08 09:16:52,422 - db_manager - INFO - Starting database transaction
2025-09-08 09:16:52,432 - db_manager - INFO - Transaction committed successfully
2025-09-08 09:16:52,432 - db_manager - INFO - Database connection closed. Duration: 0.02s
2025-09-08 09:16:52,432 - db_manager - INFO - create_grievance: Successfully created grievance with ID: GR-20250908-KOJH-0426-B
2025-09-08 09:17:23,734 - db_manager - INFO - Connecting to database: grievance_db
2025-09-08 09:17:23,739 - db_manager - INFO - Starting database transaction
2025-09-08 09:17:23,739 - db_manager - INFO - Executing get_complainant_by_id: 
            SELECT complainant_id, complainant_unique_id, complainant_full_name,    complainant_pho...
2025-09-08 09:17:23,740 - db_manager - INFO - get_complainant_by_id completed in 0.01s. Rows: 1
2025-09-08 09:17:23,740 - db_manager - INFO - Transaction committed successfully
2025-09-08 09:17:23,740 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-08 09:17:23,740 - db_manager - INFO - Connecting to database: grievance_db
2025-09-08 09:17:23,746 - db_manager - INFO - Starting database transaction
2025-09-08 09:17:23,746 - db_manager - INFO - Executing get_grievance_by_id: 
                SELECT g.*, c.complainant_full_name, c.complainant_phone, c.complainant_email,
    ...
2025-09-08 09:17:23,747 - db_manager - INFO - get_grievance_by_id completed in 0.01s. Rows: 1
2025-09-08 09:17:23,748 - db_manager - INFO - Transaction committed successfully
2025-09-08 09:17:23,748 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-08 09:17:23,748 - db_manager - DEBUG - get_grievance_by_id: grievance_id: {'grievance_id': 'GR-20250908-KOJH-0426-B', 'complainant_id': 'CM-20250908-KOJH-C381-B', 'grievance_categories': '{"Environmental - Air Pollution"}', 'grievance_summary': 'घरमा धुलो बाटोले, बच्चाहरुलाई खोकी आयो, अस्पताल जानुपर्ने छ।', 'grievance_description': 'dust everywhere in my house kids are coughing too much need to go to hospital', 'grievance_claimed_amount': None, 'grievance_location': None, 'language_code': 'en', 'classification_status': 'pending', 'grievance_creation_date': datetime.datetime(2025, 9, 8, 9, 16, 52, 423017, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'grievance_modification_date': datetime.datetime(2025, 9, 8, 9, 16, 55, 674761, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'is_temporary': True, 'source': 'bot', 'complainant_full_name': None, 'complainant_phone': None, 'complainant_email': None, 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_municipality': None, 'complainant_ward': None, 'complainant_village': None, 'complainant_address': None}, results: [{'grievance_id': 'GR-20250908-KOJH-0426-B', 'complainant_id': 'CM-20250908-KOJH-C381-B', 'grievance_categories': '{"Environmental - Air Pollution"}', 'grievance_summary': 'घरमा धुलो बाटोले, बच्चाहरुलाई खोकी आयो, अस्पताल जानुपर्ने छ।', 'grievance_description': 'dust everywhere in my house kids are coughing too much need to go to hospital', 'grievance_claimed_amount': None, 'grievance_location': None, 'language_code': 'en', 'classification_status': 'pending', 'grievance_creation_date': datetime.datetime(2025, 9, 8, 9, 16, 52, 423017, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'grievance_modification_date': datetime.datetime(2025, 9, 8, 9, 16, 55, 674761, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'is_temporary': True, 'source': 'bot', 'complainant_full_name': None, 'complainant_phone': None, 'complainant_email': None, 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_municipality': None, 'complainant_ward': None, 'complainant_village': None, 'complainant_address': None}]
2025-09-08 09:17:23,748 - db_manager - INFO - update_complainant: Updating complainant with ID: CM-20250908-KOJH-C381-B
2025-09-08 09:17:23,748 - db_manager - INFO - Connecting to database: grievance_db
2025-09-08 09:17:23,753 - db_manager - INFO - Starting database transaction
2025-09-08 09:17:23,753 - db_manager - INFO - Executing encrypt_field: SELECT encode(pgp_sym_encrypt(%s, %s), 'hex') AS encrypted...
2025-09-08 09:17:23,756 - db_manager - INFO - encrypt_field completed in 0.01s. Rows: 1
2025-09-08 09:17:23,756 - db_manager - INFO - Transaction committed successfully
2025-09-08 09:17:23,756 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-08 09:17:23,756 - db_manager - INFO - Connecting to database: grievance_db
2025-09-08 09:17:23,760 - db_manager - INFO - Starting database transaction
2025-09-08 09:17:23,761 - db_manager - INFO - Executing encrypt_field: SELECT encode(pgp_sym_encrypt(%s, %s), 'hex') AS encrypted...
2025-09-08 09:17:23,761 - db_manager - INFO - encrypt_field completed in 0.01s. Rows: 1
2025-09-08 09:17:23,762 - db_manager - INFO - Transaction committed successfully
2025-09-08 09:17:23,762 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-08 09:17:23,762 - db_manager - INFO - Connecting to database: grievance_db
2025-09-08 09:17:23,766 - db_manager - INFO - Starting database transaction
2025-09-08 09:17:23,766 - db_manager - INFO - Executing encrypt_field: SELECT encode(pgp_sym_encrypt(%s, %s), 'hex') AS encrypted...
2025-09-08 09:17:23,767 - db_manager - INFO - encrypt_field completed in 0.01s. Rows: 1
2025-09-08 09:17:23,768 - db_manager - INFO - Transaction committed successfully
2025-09-08 09:17:23,768 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-08 09:17:23,768 - db_manager - DEBUG - encrypted phone number Not provided at encrypt_complainant_data: c30d04070302cc8647f81489f13c75d23d010d57fe7e19e6cbf2a91fd5c89ef96f5731a8db4770198dc57de9fd281833d03b67dc635716a2a1af5f53a80c6f97908da394b077afcfd70bf407c1e0
2025-09-08 09:17:23,768 - db_manager - DEBUG - phone number Not provided hashed to d83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f at hash_sensitive_data
2025-09-08 09:17:23,768 - db_manager - DEBUG - encrypted and hashed data at encrypt_and_hash_sensitive_data: {'complainant_full_name': 'c30d0407030259646cff72d831447cd23d01fab8dc4dfe088ba46bb9ae68e077483599a70abc3590add36a1a0eccf255d370b958c79f18d9b3f69d205b76b85bcf14ba2a8305a85db72b86d40ff0', 'complainant_phone': 'c30d04070302cc8647f81489f13c75d23d010d57fe7e19e6cbf2a91fd5c89ef96f5731a8db4770198dc57de9fd281833d03b67dc635716a2a1af5f53a80c6f97908da394b077afcfd70bf407c1e0', 'complainant_email': 'c30d04070302624e99913b43a3586ed23d01e8f63ad503485fbae9932fdfa3d779284dd850c5dbb4dca8d0155e5d3ded3e6665625264f1ce0abbbec0e2e59119ac7257cb5bbd727a8bd0075dd50e', 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_full_name_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'complainant_email_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'complainant_phone_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f'}
2025-09-08 09:17:23,768 - db_manager - DEBUG - encrypted_data at update_complainant: {'complainant_full_name': 'c30d0407030259646cff72d831447cd23d01fab8dc4dfe088ba46bb9ae68e077483599a70abc3590add36a1a0eccf255d370b958c79f18d9b3f69d205b76b85bcf14ba2a8305a85db72b86d40ff0', 'complainant_phone': 'c30d04070302cc8647f81489f13c75d23d010d57fe7e19e6cbf2a91fd5c89ef96f5731a8db4770198dc57de9fd281833d03b67dc635716a2a1af5f53a80c6f97908da394b077afcfd70bf407c1e0', 'complainant_email': 'c30d04070302624e99913b43a3586ed23d01e8f63ad503485fbae9932fdfa3d779284dd850c5dbb4dca8d0155e5d3ded3e6665625264f1ce0abbbec0e2e59119ac7257cb5bbd727a8bd0075dd50e', 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_full_name_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'complainant_email_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'complainant_phone_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f'}
2025-09-08 09:17:23,768 - db_manager - DEBUG - execute_update values: ('c30d0407030259646cff72d831447cd23d01fab8dc4dfe088ba46bb9ae68e077483599a70abc3590add36a1a0eccf255d370b958c79f18d9b3f69d205b76b85bcf14ba2a8305a85db72b86d40ff0', 'c30d04070302cc8647f81489f13c75d23d010d57fe7e19e6cbf2a91fd5c89ef96f5731a8db4770198dc57de9fd281833d03b67dc635716a2a1af5f53a80c6f97908da394b077afcfd70bf407c1e0', 'c30d04070302624e99913b43a3586ed23d01e8f63ad503485fbae9932fdfa3d779284dd850c5dbb4dca8d0155e5d3ded3e6665625264f1ce0abbbec0e2e59119ac7257cb5bbd727a8bd0075dd50e', 'Koshi', 'Jhapa', 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'CM-20250908-KOJH-C381-B')
2025-09-08 09:17:23,768 - db_manager - DEBUG - execute_update query: UPDATE complainants SET complainant_full_name = %s, complainant_phone = %s, complainant_email = %s, complainant_province = %s, complainant_district = %s, complainant_full_name_hash = %s, complainant_email_hash = %s, complainant_phone_hash = %s WHERE complainant_id = %s
2025-09-08 09:17:23,768 - db_manager - INFO - Connecting to database: grievance_db
2025-09-08 09:17:23,773 - db_manager - INFO - Starting database transaction
2025-09-08 09:17:23,773 - db_manager - INFO - execute_update: Executing update query: UPDATE complainants SET complainant_full_name = %s, complainant_phone = %s, complainant_email = %s, ...
2025-09-08 09:17:23,774 - db_manager - INFO - execute_update: Update completed in 0.01s. Affected rows: 1
2025-09-08 09:17:23,775 - db_manager - INFO - Transaction committed successfully
2025-09-08 09:17:23,775 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-08 09:17:23,775 - db_manager - INFO - Complainant updated in db: CM-20250908-KOJH-C381-B
2025-09-08 09:17:23,776 - db_manager - INFO - update_grievance: Updating grievance with ID: GR-20250908-KOJH-0426-B
2025-09-08 09:17:23,776 - db_manager - DEBUG - execute_update values: ('dust everywhere in my house kids are coughing too much need to go to hospital', 'GR-20250908-KOJH-0426-B')
2025-09-08 09:17:23,776 - db_manager - DEBUG - execute_update query: 
                    UPDATE grievances 
                    SET grievance_description = %s, grievance_modification_date = CURRENT_TIMESTAMP
                    WHERE grievance_id = %s
                    RETURNING grievance_id
                
2025-09-08 09:17:23,776 - db_manager - INFO - Connecting to database: grievance_db
2025-09-08 09:17:23,780 - db_manager - INFO - Starting database transaction
2025-09-08 09:17:23,780 - db_manager - INFO - execute_update: Executing update query: 
                    UPDATE grievances 
                    SET grievance_description = %s, grievanc...
2025-09-08 09:17:23,782 - db_manager - INFO - execute_update: Update completed in 0.01s. Affected rows: 1
2025-09-08 09:17:23,784 - db_manager - INFO - Transaction committed successfully
2025-09-08 09:17:23,784 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-08 09:17:23,784 - db_manager - INFO - update_grievance: Updated grievance with ID: GR-20250908-KOJH-0426-B, rows affected: 1
2025-09-08 09:17:23,784 - db_manager - INFO - Grievance updated in db: GR-20250908-KOJH-0426-B
2025-09-08 09:17:23,784 - db_manager - INFO - Connecting to database: grievance_db
2025-09-08 09:17:23,789 - db_manager - INFO - Starting database transaction
2025-09-08 09:17:23,790 - db_manager - INFO - Executing get_grievance_files: 
            SELECT file_id, file_name, file_type, file_size, upload_timestamp
            FROM file...
2025-09-08 09:17:23,791 - db_manager - INFO - get_grievance_files completed in 0.01s. Rows: 0
2025-09-08 09:17:23,791 - db_manager - INFO - Transaction committed successfully
2025-09-08 09:17:23,791 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-08 09:17:23,791 - db_manager - INFO - Connecting to database: grievance_db
2025-09-08 09:17:23,796 - db_manager - INFO - Starting database transaction
2025-09-08 09:17:23,796 - db_manager - INFO - Executing get_grievance_files: 
            SELECT file_id, file_name, file_type, file_size, upload_timestamp
            FROM file...
2025-09-08 09:17:23,798 - db_manager - INFO - get_grievance_files completed in 0.01s. Rows: 0
2025-09-08 09:17:23,798 - db_manager - INFO - Transaction committed successfully
2025-09-08 09:17:23,798 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-08 09:17:23,843 - db_manager - INFO - Connecting to database: grievance_db
2025-09-08 09:17:23,848 - db_manager - INFO - Starting database transaction
2025-09-08 09:17:23,848 - db_manager - INFO - Executing get_grievance_by_id: 
                SELECT g.*, c.complainant_full_name, c.complainant_phone, c.complainant_email,
    ...
2025-09-08 09:17:23,850 - db_manager - INFO - get_grievance_by_id completed in 0.01s. Rows: 1
2025-09-08 09:17:23,850 - db_manager - INFO - Transaction committed successfully
2025-09-08 09:17:23,850 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-08 09:17:23,850 - db_manager - DEBUG - get_grievance_by_id: grievance_id: {'grievance_id': 'GR-20250908-KOJH-0426-B', 'complainant_id': 'CM-20250908-KOJH-C381-B', 'grievance_categories': '{"Environmental - Air Pollution"}', 'grievance_summary': 'घरमा धुलो बाटोले, बच्चाहरुलाई खोकी आयो, अस्पताल जानुपर्ने छ।', 'grievance_description': 'dust everywhere in my house kids are coughing too much need to go to hospital', 'grievance_claimed_amount': None, 'grievance_location': None, 'language_code': 'en', 'classification_status': 'pending', 'grievance_creation_date': datetime.datetime(2025, 9, 8, 9, 16, 52, 423017, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'grievance_modification_date': datetime.datetime(2025, 9, 8, 9, 17, 23, 780819, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'is_temporary': True, 'source': 'bot', 'complainant_full_name': 'c30d0407030259646cff72d831447cd23d01fab8dc4dfe088ba46bb9ae68e077483599a70abc3590add36a1a0eccf255d370b958c79f18d9b3f69d205b76b85bcf14ba2a8305a85db72b86d40ff0', 'complainant_phone': 'c30d04070302cc8647f81489f13c75d23d010d57fe7e19e6cbf2a91fd5c89ef96f5731a8db4770198dc57de9fd281833d03b67dc635716a2a1af5f53a80c6f97908da394b077afcfd70bf407c1e0', 'complainant_email': 'c30d04070302624e99913b43a3586ed23d01e8f63ad503485fbae9932fdfa3d779284dd850c5dbb4dca8d0155e5d3ded3e6665625264f1ce0abbbec0e2e59119ac7257cb5bbd727a8bd0075dd50e', 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_municipality': None, 'complainant_ward': None, 'complainant_village': None, 'complainant_address': None}, results: [{'grievance_id': 'GR-20250908-KOJH-0426-B', 'complainant_id': 'CM-20250908-KOJH-C381-B', 'grievance_categories': '{"Environmental - Air Pollution"}', 'grievance_summary': 'घरमा धुलो बाटोले, बच्चाहरुलाई खोकी आयो, अस्पताल जानुपर्ने छ।', 'grievance_description': 'dust everywhere in my house kids are coughing too much need to go to hospital', 'grievance_claimed_amount': None, 'grievance_location': None, 'language_code': 'en', 'classification_status': 'pending', 'grievance_creation_date': datetime.datetime(2025, 9, 8, 9, 16, 52, 423017, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'grievance_modification_date': datetime.datetime(2025, 9, 8, 9, 17, 23, 780819, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'is_temporary': True, 'source': 'bot', 'complainant_full_name': 'c30d0407030259646cff72d831447cd23d01fab8dc4dfe088ba46bb9ae68e077483599a70abc3590add36a1a0eccf255d370b958c79f18d9b3f69d205b76b85bcf14ba2a8305a85db72b86d40ff0', 'complainant_phone': 'c30d04070302cc8647f81489f13c75d23d010d57fe7e19e6cbf2a91fd5c89ef96f5731a8db4770198dc57de9fd281833d03b67dc635716a2a1af5f53a80c6f97908da394b077afcfd70bf407c1e0', 'complainant_email': 'c30d04070302624e99913b43a3586ed23d01e8f63ad503485fbae9932fdfa3d779284dd850c5dbb4dca8d0155e5d3ded3e6665625264f1ce0abbbec0e2e59119ac7257cb5bbd727a8bd0075dd50e', 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_municipality': None, 'complainant_ward': None, 'complainant_village': None, 'complainant_address': None}]
2025-09-08 09:24:25,394 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-08 09:24:25,395 - db_manager - INFO - Database manager initialized successfully
2025-09-08 09:24:25,395 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-08 09:24:25,395 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-08 09:24:25,395 - db_manager - INFO - Database manager initialized successfully
2025-09-08 09:24:25,395 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-08 09:24:25,395 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-08 09:24:25,395 - db_manager - INFO - Database manager initialized successfully
2025-09-08 09:24:25,396 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-08 09:24:25,396 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-08 09:24:25,396 - db_manager - INFO - Database manager initialized successfully
2025-09-08 09:24:25,396 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-08 09:24:25,396 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-08 09:24:25,396 - db_manager - INFO - Database manager initialized successfully
2025-09-08 09:24:25,396 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-08 09:24:25,396 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-08 09:24:25,396 - db_manager - INFO - Database manager initialized successfully
2025-09-08 09:24:25,396 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-08 09:24:25,396 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-08 09:24:25,396 - db_manager - INFO - Database manager initialized successfully
2025-09-08 09:24:25,396 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-08 09:24:25,396 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-08 09:24:25,396 - db_manager - INFO - Database manager initialized successfully
2025-09-08 09:24:25,396 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-08 09:24:25,396 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-08 09:24:25,396 - db_manager - INFO - Database manager initialized successfully
2025-09-08 09:24:25,396 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-08 09:24:25,396 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-08 09:24:25,396 - db_manager - INFO - Database manager initialized successfully
2025-09-08 09:24:25,396 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-08 09:25:57,445 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-08 09:25:57,445 - db_manager - INFO - Database manager initialized successfully
2025-09-08 09:25:57,446 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-08 09:25:57,446 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-08 09:25:57,446 - db_manager - INFO - Database manager initialized successfully
2025-09-08 09:25:57,446 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-08 09:25:57,446 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-08 09:25:57,446 - db_manager - INFO - Database manager initialized successfully
2025-09-08 09:25:57,446 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-08 09:25:57,446 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-08 09:25:57,446 - db_manager - INFO - Database manager initialized successfully
2025-09-08 09:25:57,446 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-08 09:25:57,446 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-08 09:25:57,446 - db_manager - INFO - Database manager initialized successfully
2025-09-08 09:25:57,446 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-08 09:25:57,446 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-08 09:25:57,446 - db_manager - INFO - Database manager initialized successfully
2025-09-08 09:25:57,446 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-08 09:25:57,446 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-08 09:25:57,446 - db_manager - INFO - Database manager initialized successfully
2025-09-08 09:25:57,446 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-08 09:25:57,446 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-08 09:25:57,446 - db_manager - INFO - Database manager initialized successfully
2025-09-08 09:25:57,446 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-08 09:25:57,446 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-08 09:25:57,447 - db_manager - INFO - Database manager initialized successfully
2025-09-08 09:25:57,447 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-08 09:25:57,447 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-08 09:25:57,447 - db_manager - INFO - Database manager initialized successfully
2025-09-08 09:25:57,447 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-08 09:28:32,132 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-08 09:28:32,132 - db_manager - INFO - Database manager initialized successfully
2025-09-08 09:28:32,132 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-08 09:28:32,132 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-08 09:28:32,132 - db_manager - INFO - Database manager initialized successfully
2025-09-08 09:28:32,132 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-08 09:28:32,132 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-08 09:28:32,132 - db_manager - INFO - Database manager initialized successfully
2025-09-08 09:28:32,132 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-08 09:28:32,132 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-08 09:28:32,132 - db_manager - INFO - Database manager initialized successfully
2025-09-08 09:28:32,132 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-08 09:28:32,132 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-08 09:28:32,132 - db_manager - INFO - Database manager initialized successfully
2025-09-08 09:28:32,133 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-08 09:28:32,133 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-08 09:28:32,133 - db_manager - INFO - Database manager initialized successfully
2025-09-08 09:28:32,133 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-08 09:28:32,133 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-08 09:28:32,133 - db_manager - INFO - Database manager initialized successfully
2025-09-08 09:28:32,133 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-08 09:28:32,133 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-08 09:28:32,133 - db_manager - INFO - Database manager initialized successfully
2025-09-08 09:28:32,133 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-08 09:28:32,133 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-08 09:28:32,133 - db_manager - INFO - Database manager initialized successfully
2025-09-08 09:28:32,133 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-08 09:28:32,133 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-08 09:28:32,133 - db_manager - INFO - Database manager initialized successfully
2025-09-08 09:28:32,133 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-08 09:30:08,742 - db_manager - INFO - create_complainant: Creating complainant with ID: CM-20250908-KOJH-4C6A-B
2025-09-08 09:30:08,742 - db_manager - DEBUG - encrypted and hashed data at encrypt_and_hash_sensitive_data: {'complainant_id': 'CM-20250908-KOJH-4C6A-B', 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_unique_id': 'CM-20250908-KOJH-4C6A-B'}
2025-09-08 09:30:08,743 - db_manager - DEBUG - query_keys at generate_query_string: dict_keys(['complainant_id', 'complainant_province', 'complainant_district', 'complainant_unique_id'])
2025-09-08 09:30:08,743 - db_manager - DEBUG - Generated query: INSERT INTO complainants (complainant_id, complainant_province, complainant_district, complainant_unique_id) VALUES (%s, %s, %s, %s)
2025-09-08 09:30:08,743 - db_manager - DEBUG - len of query_keys: 4
2025-09-08 09:30:08,743 - db_manager - DEBUG - Generated query: INSERT INTO complainants (complainant_id, complainant_province, complainant_district, complainant_unique_id) VALUES (%s, %s, %s, %s)
2025-09-08 09:30:08,743 - db_manager - INFO - Connecting to database: grievance_db
2025-09-08 09:30:08,751 - db_manager - INFO - Starting database transaction
2025-09-08 09:30:08,754 - db_manager - INFO - Transaction committed successfully
2025-09-08 09:30:08,754 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-08 09:30:08,754 - db_manager - INFO - create_complainant: Successfully created complainant with ID: CM-20250908-KOJH-4C6A-B
2025-09-08 09:30:08,754 - db_manager - INFO - create_grievance: Creating grievance with data: {'grievance_id': 'GR-20250908-KOJH-282B-B', 'complainant_id': 'CM-20250908-KOJH-4C6A-B', 'grievance_description': 'There is dust all over my house\nkids are coughing \nI need to go to the hospital', 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_office': None, 'source': 'bot', 'complainant_unique_id': 'CM-20250908-KOJH-4C6A-B'}
2025-09-08 09:30:08,754 - db_manager - INFO - create_grievance: Creating grievance with ID: GR-20250908-KOJH-282B-B
2025-09-08 09:30:08,754 - db_manager - DEBUG - query_keys at generate_query_string: dict_keys(['grievance_id', 'complainant_id', 'grievance_description', 'source'])
2025-09-08 09:30:08,754 - db_manager - DEBUG - Generated query: INSERT INTO grievances (grievance_id, complainant_id, grievance_description, source) VALUES (%s, %s, %s, %s) RETURNING grievance_id
2025-09-08 09:30:08,754 - db_manager - DEBUG - len of query_keys: 4
2025-09-08 09:30:08,754 - db_manager - DEBUG - Generated query: INSERT INTO grievances (grievance_id, complainant_id, grievance_description, source) VALUES (%s, %s, %s, %s) RETURNING grievance_id
2025-09-08 09:30:08,755 - db_manager - INFO - Connecting to database: grievance_db
2025-09-08 09:30:08,760 - db_manager - INFO - Starting database transaction
2025-09-08 09:30:08,764 - db_manager - INFO - Transaction committed successfully
2025-09-08 09:30:08,764 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-08 09:30:08,765 - db_manager - INFO - create_grievance: Successfully created grievance with ID: GR-20250908-KOJH-282B-B
2025-09-08 09:30:28,616 - db_manager - INFO - Connecting to database: grievance_db
2025-09-08 09:30:28,621 - db_manager - INFO - Starting database transaction
2025-09-08 09:30:28,621 - db_manager - INFO - Executing get_complainant_by_id: 
            SELECT complainant_id, complainant_unique_id, complainant_full_name,    complainant_pho...
2025-09-08 09:30:28,622 - db_manager - INFO - get_complainant_by_id completed in 0.01s. Rows: 1
2025-09-08 09:30:28,622 - db_manager - INFO - Transaction committed successfully
2025-09-08 09:30:28,623 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-08 09:30:28,623 - db_manager - INFO - Connecting to database: grievance_db
2025-09-08 09:30:28,628 - db_manager - INFO - Starting database transaction
2025-09-08 09:30:28,628 - db_manager - INFO - Executing get_grievance_by_id: 
                SELECT g.*, c.complainant_full_name, c.complainant_phone, c.complainant_email,
    ...
2025-09-08 09:30:28,629 - db_manager - INFO - get_grievance_by_id completed in 0.01s. Rows: 1
2025-09-08 09:30:28,630 - db_manager - INFO - Transaction committed successfully
2025-09-08 09:30:28,630 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-08 09:30:28,630 - db_manager - DEBUG - get_grievance_by_id: grievance_id: {'grievance_id': 'GR-20250908-KOJH-282B-B', 'complainant_id': 'CM-20250908-KOJH-4C6A-B', 'grievance_categories': '{"Environmental - Air Pollution"}', 'grievance_summary': 'मेरो घरमा ढ़ेरै धुलो, बच्चाहरुले खोकी लागेको छ , मलाई अस्पताल जानु पर्ने छ।', 'grievance_description': 'There is dust all over my house\nkids are coughing \nI need to go to the hospital', 'grievance_claimed_amount': None, 'grievance_location': None, 'language_code': 'en', 'classification_status': 'pending', 'grievance_creation_date': datetime.datetime(2025, 9, 8, 9, 30, 8, 760717, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'grievance_modification_date': datetime.datetime(2025, 9, 8, 9, 30, 13, 918734, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'is_temporary': True, 'source': 'bot', 'complainant_full_name': None, 'complainant_phone': None, 'complainant_email': None, 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_municipality': None, 'complainant_ward': None, 'complainant_village': None, 'complainant_address': None}, results: [{'grievance_id': 'GR-20250908-KOJH-282B-B', 'complainant_id': 'CM-20250908-KOJH-4C6A-B', 'grievance_categories': '{"Environmental - Air Pollution"}', 'grievance_summary': 'मेरो घरमा ढ़ेरै धुलो, बच्चाहरुले खोकी लागेको छ , मलाई अस्पताल जानु पर्ने छ।', 'grievance_description': 'There is dust all over my house\nkids are coughing \nI need to go to the hospital', 'grievance_claimed_amount': None, 'grievance_location': None, 'language_code': 'en', 'classification_status': 'pending', 'grievance_creation_date': datetime.datetime(2025, 9, 8, 9, 30, 8, 760717, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'grievance_modification_date': datetime.datetime(2025, 9, 8, 9, 30, 13, 918734, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'is_temporary': True, 'source': 'bot', 'complainant_full_name': None, 'complainant_phone': None, 'complainant_email': None, 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_municipality': None, 'complainant_ward': None, 'complainant_village': None, 'complainant_address': None}]
2025-09-08 09:30:28,630 - db_manager - INFO - update_complainant: Updating complainant with ID: CM-20250908-KOJH-4C6A-B
2025-09-08 09:30:28,630 - db_manager - INFO - Connecting to database: grievance_db
2025-09-08 09:30:28,635 - db_manager - INFO - Starting database transaction
2025-09-08 09:30:28,635 - db_manager - INFO - Executing encrypt_field: SELECT encode(pgp_sym_encrypt(%s, %s), 'hex') AS encrypted...
2025-09-08 09:30:28,637 - db_manager - INFO - encrypt_field completed in 0.01s. Rows: 1
2025-09-08 09:30:28,638 - db_manager - INFO - Transaction committed successfully
2025-09-08 09:30:28,638 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-08 09:30:28,638 - db_manager - INFO - Connecting to database: grievance_db
2025-09-08 09:30:28,643 - db_manager - INFO - Starting database transaction
2025-09-08 09:30:28,643 - db_manager - INFO - Executing encrypt_field: SELECT encode(pgp_sym_encrypt(%s, %s), 'hex') AS encrypted...
2025-09-08 09:30:28,644 - db_manager - INFO - encrypt_field completed in 0.01s. Rows: 1
2025-09-08 09:30:28,644 - db_manager - INFO - Transaction committed successfully
2025-09-08 09:30:28,644 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-08 09:30:28,644 - db_manager - DEBUG - encrypted phone number Not provided at encrypt_complainant_data: c30d04070302cb763c49c59f586d68d23d01a61112f840b6bf5b4915f8a21bd53b113fbde140d68a96e45a945e4621f96bd322a3ddc23737dd59182a142e7b3ab8af40bf783ebf8963c71af08b2e
2025-09-08 09:30:28,644 - db_manager - INFO - Connecting to database: grievance_db
2025-09-08 09:30:28,649 - db_manager - INFO - Starting database transaction
2025-09-08 09:30:28,649 - db_manager - INFO - Executing encrypt_field: SELECT encode(pgp_sym_encrypt(%s, %s), 'hex') AS encrypted...
2025-09-08 09:30:28,649 - db_manager - INFO - encrypt_field completed in 0.01s. Rows: 1
2025-09-08 09:30:28,650 - db_manager - INFO - Transaction committed successfully
2025-09-08 09:30:28,650 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-08 09:30:28,650 - db_manager - DEBUG - phone number Not provided hashed to d83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f at hash_sensitive_data
2025-09-08 09:30:28,650 - db_manager - DEBUG - encrypted and hashed data at encrypt_and_hash_sensitive_data: {'complainant_full_name': 'c30d04070302edf98d9123e4790060d23d019146e00856d81e4e284c5356b24fc00897c804497ad392ab9c48d3417b394adbb3ad504376598a7e3810109bfb99fb0faa84c29e74443ca2342eb848', 'complainant_phone': 'c30d04070302cb763c49c59f586d68d23d01a61112f840b6bf5b4915f8a21bd53b113fbde140d68a96e45a945e4621f96bd322a3ddc23737dd59182a142e7b3ab8af40bf783ebf8963c71af08b2e', 'complainant_email': 'c30d0407030270366b9328de2ac97cd23d010cccdcb4a6649b7397c81e070f4832a1685aab71173eb680e6ed1a2f7bbad7b30da8d56d4360a5ef0811f02ede9cb337b8f207c40f9a31b186ca9387', 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_email_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'complainant_phone_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'complainant_full_name_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f'}
2025-09-08 09:30:28,650 - db_manager - DEBUG - encrypted_data at update_complainant: {'complainant_full_name': 'c30d04070302edf98d9123e4790060d23d019146e00856d81e4e284c5356b24fc00897c804497ad392ab9c48d3417b394adbb3ad504376598a7e3810109bfb99fb0faa84c29e74443ca2342eb848', 'complainant_phone': 'c30d04070302cb763c49c59f586d68d23d01a61112f840b6bf5b4915f8a21bd53b113fbde140d68a96e45a945e4621f96bd322a3ddc23737dd59182a142e7b3ab8af40bf783ebf8963c71af08b2e', 'complainant_email': 'c30d0407030270366b9328de2ac97cd23d010cccdcb4a6649b7397c81e070f4832a1685aab71173eb680e6ed1a2f7bbad7b30da8d56d4360a5ef0811f02ede9cb337b8f207c40f9a31b186ca9387', 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_email_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'complainant_phone_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'complainant_full_name_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f'}
2025-09-08 09:30:28,650 - db_manager - DEBUG - execute_update values: ('c30d04070302edf98d9123e4790060d23d019146e00856d81e4e284c5356b24fc00897c804497ad392ab9c48d3417b394adbb3ad504376598a7e3810109bfb99fb0faa84c29e74443ca2342eb848', 'c30d04070302cb763c49c59f586d68d23d01a61112f840b6bf5b4915f8a21bd53b113fbde140d68a96e45a945e4621f96bd322a3ddc23737dd59182a142e7b3ab8af40bf783ebf8963c71af08b2e', 'c30d0407030270366b9328de2ac97cd23d010cccdcb4a6649b7397c81e070f4832a1685aab71173eb680e6ed1a2f7bbad7b30da8d56d4360a5ef0811f02ede9cb337b8f207c40f9a31b186ca9387', 'Koshi', 'Jhapa', 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'CM-20250908-KOJH-4C6A-B')
2025-09-08 09:30:28,650 - db_manager - DEBUG - execute_update query: UPDATE complainants SET complainant_full_name = %s, complainant_phone = %s, complainant_email = %s, complainant_province = %s, complainant_district = %s, complainant_email_hash = %s, complainant_phone_hash = %s, complainant_full_name_hash = %s WHERE complainant_id = %s
2025-09-08 09:30:28,650 - db_manager - INFO - Connecting to database: grievance_db
2025-09-08 09:30:28,654 - db_manager - INFO - Starting database transaction
2025-09-08 09:30:28,654 - db_manager - INFO - execute_update: Executing update query: UPDATE complainants SET complainant_full_name = %s, complainant_phone = %s, complainant_email = %s, ...
2025-09-08 09:30:28,655 - db_manager - INFO - execute_update: Update completed in 0.01s. Affected rows: 1
2025-09-08 09:30:28,657 - db_manager - INFO - Transaction committed successfully
2025-09-08 09:30:28,657 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-08 09:30:28,658 - db_manager - INFO - Complainant updated in db: CM-20250908-KOJH-4C6A-B
2025-09-08 09:30:28,658 - db_manager - INFO - update_grievance: Updating grievance with ID: GR-20250908-KOJH-282B-B
2025-09-08 09:30:28,658 - db_manager - DEBUG - execute_update values: ('There is dust all over my house\nkids are coughing \nI need to go to the hospital', 'GR-20250908-KOJH-282B-B')
2025-09-08 09:30:28,658 - db_manager - DEBUG - execute_update query: 
                    UPDATE grievances 
                    SET grievance_description = %s, grievance_modification_date = CURRENT_TIMESTAMP
                    WHERE grievance_id = %s
                    RETURNING grievance_id
                
2025-09-08 09:30:28,658 - db_manager - INFO - Connecting to database: grievance_db
2025-09-08 09:30:28,663 - db_manager - INFO - Starting database transaction
2025-09-08 09:30:28,663 - db_manager - INFO - execute_update: Executing update query: 
                    UPDATE grievances 
                    SET grievance_description = %s, grievanc...
2025-09-08 09:30:28,664 - db_manager - INFO - execute_update: Update completed in 0.01s. Affected rows: 1
2025-09-08 09:30:28,666 - db_manager - INFO - Transaction committed successfully
2025-09-08 09:30:28,666 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-08 09:30:28,666 - db_manager - INFO - update_grievance: Updated grievance with ID: GR-20250908-KOJH-282B-B, rows affected: 1
2025-09-08 09:30:28,666 - db_manager - INFO - Grievance updated in db: GR-20250908-KOJH-282B-B
2025-09-08 09:30:28,666 - db_manager - INFO - Connecting to database: grievance_db
2025-09-08 09:30:28,672 - db_manager - INFO - Starting database transaction
2025-09-08 09:30:28,672 - db_manager - INFO - Executing get_grievance_files: 
            SELECT file_id, file_name, file_type, file_size, upload_timestamp
            FROM file...
2025-09-08 09:30:28,673 - db_manager - INFO - get_grievance_files completed in 0.01s. Rows: 0
2025-09-08 09:30:28,673 - db_manager - INFO - Transaction committed successfully
2025-09-08 09:30:28,674 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-08 09:30:28,674 - db_manager - INFO - Connecting to database: grievance_db
2025-09-08 09:30:28,679 - db_manager - INFO - Starting database transaction
2025-09-08 09:30:28,679 - db_manager - INFO - Executing get_grievance_files: 
            SELECT file_id, file_name, file_type, file_size, upload_timestamp
            FROM file...
2025-09-08 09:30:28,680 - db_manager - INFO - get_grievance_files completed in 0.01s. Rows: 0
2025-09-08 09:30:28,680 - db_manager - INFO - Transaction committed successfully
2025-09-08 09:30:28,680 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-08 09:30:28,725 - db_manager - INFO - Connecting to database: grievance_db
2025-09-08 09:30:28,732 - db_manager - INFO - Starting database transaction
2025-09-08 09:30:28,732 - db_manager - INFO - Executing get_grievance_by_id: 
                SELECT g.*, c.complainant_full_name, c.complainant_phone, c.complainant_email,
    ...
2025-09-08 09:30:28,734 - db_manager - INFO - get_grievance_by_id completed in 0.01s. Rows: 1
2025-09-08 09:30:28,735 - db_manager - INFO - Transaction committed successfully
2025-09-08 09:30:28,735 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-08 09:30:28,735 - db_manager - DEBUG - get_grievance_by_id: grievance_id: {'grievance_id': 'GR-20250908-KOJH-282B-B', 'complainant_id': 'CM-20250908-KOJH-4C6A-B', 'grievance_categories': '{"Environmental - Air Pollution"}', 'grievance_summary': 'मेरो घरमा ढ़ेरै धुलो, बच्चाहरुले खोकी लागेको छ , मलाई अस्पताल जानु पर्ने छ।', 'grievance_description': 'There is dust all over my house\nkids are coughing \nI need to go to the hospital', 'grievance_claimed_amount': None, 'grievance_location': None, 'language_code': 'en', 'classification_status': 'pending', 'grievance_creation_date': datetime.datetime(2025, 9, 8, 9, 30, 8, 760717, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'grievance_modification_date': datetime.datetime(2025, 9, 8, 9, 30, 28, 663611, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'is_temporary': True, 'source': 'bot', 'complainant_full_name': 'c30d04070302edf98d9123e4790060d23d019146e00856d81e4e284c5356b24fc00897c804497ad392ab9c48d3417b394adbb3ad504376598a7e3810109bfb99fb0faa84c29e74443ca2342eb848', 'complainant_phone': 'c30d04070302cb763c49c59f586d68d23d01a61112f840b6bf5b4915f8a21bd53b113fbde140d68a96e45a945e4621f96bd322a3ddc23737dd59182a142e7b3ab8af40bf783ebf8963c71af08b2e', 'complainant_email': 'c30d0407030270366b9328de2ac97cd23d010cccdcb4a6649b7397c81e070f4832a1685aab71173eb680e6ed1a2f7bbad7b30da8d56d4360a5ef0811f02ede9cb337b8f207c40f9a31b186ca9387', 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_municipality': None, 'complainant_ward': None, 'complainant_village': None, 'complainant_address': None}, results: [{'grievance_id': 'GR-20250908-KOJH-282B-B', 'complainant_id': 'CM-20250908-KOJH-4C6A-B', 'grievance_categories': '{"Environmental - Air Pollution"}', 'grievance_summary': 'मेरो घरमा ढ़ेरै धुलो, बच्चाहरुले खोकी लागेको छ , मलाई अस्पताल जानु पर्ने छ।', 'grievance_description': 'There is dust all over my house\nkids are coughing \nI need to go to the hospital', 'grievance_claimed_amount': None, 'grievance_location': None, 'language_code': 'en', 'classification_status': 'pending', 'grievance_creation_date': datetime.datetime(2025, 9, 8, 9, 30, 8, 760717, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'grievance_modification_date': datetime.datetime(2025, 9, 8, 9, 30, 28, 663611, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'is_temporary': True, 'source': 'bot', 'complainant_full_name': 'c30d04070302edf98d9123e4790060d23d019146e00856d81e4e284c5356b24fc00897c804497ad392ab9c48d3417b394adbb3ad504376598a7e3810109bfb99fb0faa84c29e74443ca2342eb848', 'complainant_phone': 'c30d04070302cb763c49c59f586d68d23d01a61112f840b6bf5b4915f8a21bd53b113fbde140d68a96e45a945e4621f96bd322a3ddc23737dd59182a142e7b3ab8af40bf783ebf8963c71af08b2e', 'complainant_email': 'c30d0407030270366b9328de2ac97cd23d010cccdcb4a6649b7397c81e070f4832a1685aab71173eb680e6ed1a2f7bbad7b30da8d56d4360a5ef0811f02ede9cb337b8f207c40f9a31b186ca9387', 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_municipality': None, 'complainant_ward': None, 'complainant_village': None, 'complainant_address': None}]
2025-09-08 09:40:41,430 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-08 09:40:41,431 - db_manager - INFO - Database manager initialized successfully
2025-09-08 09:40:41,431 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-08 09:40:41,431 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-08 09:40:41,431 - db_manager - INFO - Database manager initialized successfully
2025-09-08 09:40:41,432 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-08 09:40:41,432 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-08 09:40:41,432 - db_manager - INFO - Database manager initialized successfully
2025-09-08 09:40:41,432 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-08 09:40:41,432 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-08 09:40:41,432 - db_manager - INFO - Database manager initialized successfully
2025-09-08 09:40:41,432 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-08 09:40:41,432 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-08 09:40:41,432 - db_manager - INFO - Database manager initialized successfully
2025-09-08 09:40:41,432 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-08 09:40:41,432 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-08 09:40:41,432 - db_manager - INFO - Database manager initialized successfully
2025-09-08 09:40:41,432 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-08 09:40:41,432 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-08 09:40:41,432 - db_manager - INFO - Database manager initialized successfully
2025-09-08 09:40:41,432 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-08 09:40:41,433 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-08 09:40:41,433 - db_manager - INFO - Database manager initialized successfully
2025-09-08 09:40:41,433 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-08 09:40:41,433 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-08 09:40:41,433 - db_manager - INFO - Database manager initialized successfully
2025-09-08 09:40:41,433 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-08 09:40:41,433 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-08 09:40:41,433 - db_manager - INFO - Database manager initialized successfully
2025-09-08 09:40:41,433 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-08 09:44:12,866 - db_manager - INFO - create_complainant: Creating complainant with ID: CM-20250908-KOJH-D567-B
2025-09-08 09:44:12,867 - db_manager - DEBUG - encrypted and hashed data at encrypt_and_hash_sensitive_data: {'complainant_id': 'CM-20250908-KOJH-D567-B', 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_unique_id': 'CM-20250908-KOJH-D567-B'}
2025-09-08 09:44:12,867 - db_manager - DEBUG - query_keys at generate_query_string: dict_keys(['complainant_id', 'complainant_province', 'complainant_district', 'complainant_unique_id'])
2025-09-08 09:44:12,867 - db_manager - DEBUG - Generated query: INSERT INTO complainants (complainant_id, complainant_province, complainant_district, complainant_unique_id) VALUES (%s, %s, %s, %s)
2025-09-08 09:44:12,867 - db_manager - DEBUG - len of query_keys: 4
2025-09-08 09:44:12,867 - db_manager - DEBUG - Generated query: INSERT INTO complainants (complainant_id, complainant_province, complainant_district, complainant_unique_id) VALUES (%s, %s, %s, %s)
2025-09-08 09:44:12,867 - db_manager - INFO - Connecting to database: grievance_db
2025-09-08 09:44:12,873 - db_manager - INFO - Starting database transaction
2025-09-08 09:44:12,875 - db_manager - INFO - Transaction committed successfully
2025-09-08 09:44:12,875 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-08 09:44:12,875 - db_manager - INFO - create_complainant: Successfully created complainant with ID: CM-20250908-KOJH-D567-B
2025-09-08 09:44:12,876 - db_manager - INFO - create_grievance: Creating grievance with data: {'grievance_id': 'GR-20250908-KOJH-2A9D-B', 'complainant_id': 'CM-20250908-KOJH-D567-B', 'grievance_description': 'dust everywhere\nneed to go to hospital', 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_office': None, 'source': 'bot', 'complainant_unique_id': 'CM-20250908-KOJH-D567-B'}
2025-09-08 09:44:12,876 - db_manager - INFO - create_grievance: Creating grievance with ID: GR-20250908-KOJH-2A9D-B
2025-09-08 09:44:12,876 - db_manager - DEBUG - query_keys at generate_query_string: dict_keys(['grievance_id', 'complainant_id', 'grievance_description', 'source'])
2025-09-08 09:44:12,876 - db_manager - DEBUG - Generated query: INSERT INTO grievances (grievance_id, complainant_id, grievance_description, source) VALUES (%s, %s, %s, %s) RETURNING grievance_id
2025-09-08 09:44:12,876 - db_manager - DEBUG - len of query_keys: 4
2025-09-08 09:44:12,876 - db_manager - DEBUG - Generated query: INSERT INTO grievances (grievance_id, complainant_id, grievance_description, source) VALUES (%s, %s, %s, %s) RETURNING grievance_id
2025-09-08 09:44:12,876 - db_manager - INFO - Connecting to database: grievance_db
2025-09-08 09:44:12,881 - db_manager - INFO - Starting database transaction
2025-09-08 09:44:12,885 - db_manager - INFO - Transaction committed successfully
2025-09-08 09:44:12,885 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-08 09:44:12,885 - db_manager - INFO - create_grievance: Successfully created grievance with ID: GR-20250908-KOJH-2A9D-B
2025-09-08 09:44:29,814 - db_manager - INFO - Connecting to database: grievance_db
2025-09-08 09:44:29,819 - db_manager - INFO - Starting database transaction
2025-09-08 09:44:29,819 - db_manager - INFO - Executing get_complainant_by_id: 
            SELECT complainant_id, complainant_unique_id, complainant_full_name,    complainant_pho...
2025-09-08 09:44:29,820 - db_manager - INFO - get_complainant_by_id completed in 0.01s. Rows: 1
2025-09-08 09:44:29,821 - db_manager - INFO - Transaction committed successfully
2025-09-08 09:44:29,821 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-08 09:44:29,821 - db_manager - INFO - Connecting to database: grievance_db
2025-09-08 09:44:29,826 - db_manager - INFO - Starting database transaction
2025-09-08 09:44:29,826 - db_manager - INFO - Executing get_grievance_by_id: 
                SELECT g.*, c.complainant_full_name, c.complainant_phone, c.complainant_email,
    ...
2025-09-08 09:44:29,828 - db_manager - INFO - get_grievance_by_id completed in 0.01s. Rows: 1
2025-09-08 09:44:29,828 - db_manager - INFO - Transaction committed successfully
2025-09-08 09:44:29,828 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-08 09:44:29,828 - db_manager - DEBUG - get_grievance_by_id: grievance_id: {'grievance_id': 'GR-20250908-KOJH-2A9D-B', 'complainant_id': 'CM-20250908-KOJH-D567-B', 'grievance_categories': '{"Environmental - Air Pollution","Safety - Road Safety Provisions"}', 'grievance_summary': 'धूलभरी अन्यत्र, अस्पताल जान आवश्यकता', 'grievance_description': 'dust everywhere\nneed to go to hospital', 'grievance_claimed_amount': None, 'grievance_location': None, 'language_code': 'en', 'classification_status': 'pending', 'grievance_creation_date': datetime.datetime(2025, 9, 8, 9, 44, 12, 881296, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'grievance_modification_date': datetime.datetime(2025, 9, 8, 9, 44, 16, 672233, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'is_temporary': True, 'source': 'bot', 'complainant_full_name': None, 'complainant_phone': None, 'complainant_email': None, 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_municipality': None, 'complainant_ward': None, 'complainant_village': None, 'complainant_address': None}, results: [{'grievance_id': 'GR-20250908-KOJH-2A9D-B', 'complainant_id': 'CM-20250908-KOJH-D567-B', 'grievance_categories': '{"Environmental - Air Pollution","Safety - Road Safety Provisions"}', 'grievance_summary': 'धूलभरी अन्यत्र, अस्पताल जान आवश्यकता', 'grievance_description': 'dust everywhere\nneed to go to hospital', 'grievance_claimed_amount': None, 'grievance_location': None, 'language_code': 'en', 'classification_status': 'pending', 'grievance_creation_date': datetime.datetime(2025, 9, 8, 9, 44, 12, 881296, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'grievance_modification_date': datetime.datetime(2025, 9, 8, 9, 44, 16, 672233, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'is_temporary': True, 'source': 'bot', 'complainant_full_name': None, 'complainant_phone': None, 'complainant_email': None, 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_municipality': None, 'complainant_ward': None, 'complainant_village': None, 'complainant_address': None}]
2025-09-08 09:44:29,828 - db_manager - INFO - update_complainant: Updating complainant with ID: CM-20250908-KOJH-D567-B
2025-09-08 09:44:29,828 - db_manager - INFO - Connecting to database: grievance_db
2025-09-08 09:44:29,836 - db_manager - INFO - Starting database transaction
2025-09-08 09:44:29,836 - db_manager - INFO - Executing encrypt_field: SELECT encode(pgp_sym_encrypt(%s, %s), 'hex') AS encrypted...
2025-09-08 09:44:29,839 - db_manager - INFO - encrypt_field completed in 0.01s. Rows: 1
2025-09-08 09:44:29,839 - db_manager - INFO - Transaction committed successfully
2025-09-08 09:44:29,839 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-08 09:44:29,839 - db_manager - INFO - Connecting to database: grievance_db
2025-09-08 09:44:29,844 - db_manager - INFO - Starting database transaction
2025-09-08 09:44:29,845 - db_manager - INFO - Executing encrypt_field: SELECT encode(pgp_sym_encrypt(%s, %s), 'hex') AS encrypted...
2025-09-08 09:44:29,846 - db_manager - INFO - encrypt_field completed in 0.01s. Rows: 1
2025-09-08 09:44:29,846 - db_manager - INFO - Transaction committed successfully
2025-09-08 09:44:29,847 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-08 09:44:29,847 - db_manager - INFO - Connecting to database: grievance_db
2025-09-08 09:44:29,853 - db_manager - INFO - Starting database transaction
2025-09-08 09:44:29,853 - db_manager - INFO - Executing encrypt_field: SELECT encode(pgp_sym_encrypt(%s, %s), 'hex') AS encrypted...
2025-09-08 09:44:29,854 - db_manager - INFO - encrypt_field completed in 0.01s. Rows: 1
2025-09-08 09:44:29,855 - db_manager - INFO - Transaction committed successfully
2025-09-08 09:44:29,855 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-08 09:44:29,855 - db_manager - DEBUG - encrypted phone number Not provided at encrypt_complainant_data: c30d04070302907c909baa7230907ad23d01fe268c084747ef1aaeed475cfd4b0f8b1caecad13abbc3a4e59c92f954218018757ec02b768f0df86199a873c79526ffa8c9cb2f150eb1c46faf93ac
2025-09-08 09:44:29,855 - db_manager - DEBUG - phone number Not provided hashed to d83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f at hash_sensitive_data
2025-09-08 09:44:29,855 - db_manager - DEBUG - encrypted and hashed data at encrypt_and_hash_sensitive_data: {'complainant_full_name': 'c30d0407030220958665a4cc739b6ad23d016dd704db960190fdb6c8cba2346c607d8a11a1c2dc68c8d938bcac4a86dc896526d9b5682cf9539e875ac42c30f00ac45d63a843acac5d3d83f42e25', 'complainant_phone': 'c30d04070302907c909baa7230907ad23d01fe268c084747ef1aaeed475cfd4b0f8b1caecad13abbc3a4e59c92f954218018757ec02b768f0df86199a873c79526ffa8c9cb2f150eb1c46faf93ac', 'complainant_email': 'c30d04070302c8db7249062a80547cd23d014d61b9d205f2ec31df0985531ed38b9fb665581952aefa49f4583326695bb2ddf51c9aee58ce67119637877418b4e6529e4cb703bcd0d7a4f9929c36', 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_full_name_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'complainant_email_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'complainant_phone_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f'}
2025-09-08 09:44:29,855 - db_manager - DEBUG - encrypted_data at update_complainant: {'complainant_full_name': 'c30d0407030220958665a4cc739b6ad23d016dd704db960190fdb6c8cba2346c607d8a11a1c2dc68c8d938bcac4a86dc896526d9b5682cf9539e875ac42c30f00ac45d63a843acac5d3d83f42e25', 'complainant_phone': 'c30d04070302907c909baa7230907ad23d01fe268c084747ef1aaeed475cfd4b0f8b1caecad13abbc3a4e59c92f954218018757ec02b768f0df86199a873c79526ffa8c9cb2f150eb1c46faf93ac', 'complainant_email': 'c30d04070302c8db7249062a80547cd23d014d61b9d205f2ec31df0985531ed38b9fb665581952aefa49f4583326695bb2ddf51c9aee58ce67119637877418b4e6529e4cb703bcd0d7a4f9929c36', 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_full_name_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'complainant_email_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'complainant_phone_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f'}
2025-09-08 09:44:29,855 - db_manager - DEBUG - execute_update values: ('c30d0407030220958665a4cc739b6ad23d016dd704db960190fdb6c8cba2346c607d8a11a1c2dc68c8d938bcac4a86dc896526d9b5682cf9539e875ac42c30f00ac45d63a843acac5d3d83f42e25', 'c30d04070302907c909baa7230907ad23d01fe268c084747ef1aaeed475cfd4b0f8b1caecad13abbc3a4e59c92f954218018757ec02b768f0df86199a873c79526ffa8c9cb2f150eb1c46faf93ac', 'c30d04070302c8db7249062a80547cd23d014d61b9d205f2ec31df0985531ed38b9fb665581952aefa49f4583326695bb2ddf51c9aee58ce67119637877418b4e6529e4cb703bcd0d7a4f9929c36', 'Koshi', 'Jhapa', 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'CM-20250908-KOJH-D567-B')
2025-09-08 09:44:29,855 - db_manager - DEBUG - execute_update query: UPDATE complainants SET complainant_full_name = %s, complainant_phone = %s, complainant_email = %s, complainant_province = %s, complainant_district = %s, complainant_full_name_hash = %s, complainant_email_hash = %s, complainant_phone_hash = %s WHERE complainant_id = %s
2025-09-08 09:44:29,855 - db_manager - INFO - Connecting to database: grievance_db
2025-09-08 09:44:29,860 - db_manager - INFO - Starting database transaction
2025-09-08 09:44:29,860 - db_manager - INFO - execute_update: Executing update query: UPDATE complainants SET complainant_full_name = %s, complainant_phone = %s, complainant_email = %s, ...
2025-09-08 09:44:29,861 - db_manager - INFO - execute_update: Update completed in 0.01s. Affected rows: 1
2025-09-08 09:44:29,863 - db_manager - INFO - Transaction committed successfully
2025-09-08 09:44:29,863 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-08 09:44:29,863 - db_manager - INFO - Complainant updated in db: CM-20250908-KOJH-D567-B
2025-09-08 09:44:29,863 - db_manager - INFO - update_grievance: Updating grievance with ID: GR-20250908-KOJH-2A9D-B
2025-09-08 09:44:29,863 - db_manager - DEBUG - execute_update values: ('dust everywhere\nneed to go to hospital', 'GR-20250908-KOJH-2A9D-B')
2025-09-08 09:44:29,863 - db_manager - DEBUG - execute_update query: 
                    UPDATE grievances 
                    SET grievance_description = %s, grievance_modification_date = CURRENT_TIMESTAMP
                    WHERE grievance_id = %s
                    RETURNING grievance_id
                
2025-09-08 09:44:29,863 - db_manager - INFO - Connecting to database: grievance_db
2025-09-08 09:44:29,868 - db_manager - INFO - Starting database transaction
2025-09-08 09:44:29,868 - db_manager - INFO - execute_update: Executing update query: 
                    UPDATE grievances 
                    SET grievance_description = %s, grievanc...
2025-09-08 09:44:29,869 - db_manager - INFO - execute_update: Update completed in 0.01s. Affected rows: 1
2025-09-08 09:44:29,871 - db_manager - INFO - Transaction committed successfully
2025-09-08 09:44:29,871 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-08 09:44:29,871 - db_manager - INFO - update_grievance: Updated grievance with ID: GR-20250908-KOJH-2A9D-B, rows affected: 1
2025-09-08 09:44:29,871 - db_manager - INFO - Grievance updated in db: GR-20250908-KOJH-2A9D-B
2025-09-08 09:44:29,871 - db_manager - INFO - Connecting to database: grievance_db
2025-09-08 09:44:29,876 - db_manager - INFO - Starting database transaction
2025-09-08 09:44:29,876 - db_manager - INFO - Executing get_grievance_files: 
            SELECT file_id, file_name, file_type, file_size, upload_timestamp
            FROM file...
2025-09-08 09:44:29,877 - db_manager - INFO - get_grievance_files completed in 0.01s. Rows: 0
2025-09-08 09:44:29,877 - db_manager - INFO - Transaction committed successfully
2025-09-08 09:44:29,877 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-08 09:44:29,877 - db_manager - INFO - Connecting to database: grievance_db
2025-09-08 09:44:29,882 - db_manager - INFO - Starting database transaction
2025-09-08 09:44:29,882 - db_manager - INFO - Executing get_grievance_files: 
            SELECT file_id, file_name, file_type, file_size, upload_timestamp
            FROM file...
2025-09-08 09:44:29,883 - db_manager - INFO - get_grievance_files completed in 0.01s. Rows: 0
2025-09-08 09:44:29,883 - db_manager - INFO - Transaction committed successfully
2025-09-08 09:44:29,883 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-08 09:44:29,927 - db_manager - INFO - Connecting to database: grievance_db
2025-09-08 09:44:29,932 - db_manager - INFO - Starting database transaction
2025-09-08 09:44:29,932 - db_manager - INFO - Executing get_grievance_by_id: 
                SELECT g.*, c.complainant_full_name, c.complainant_phone, c.complainant_email,
    ...
2025-09-08 09:44:29,934 - db_manager - INFO - get_grievance_by_id completed in 0.01s. Rows: 1
2025-09-08 09:44:29,935 - db_manager - INFO - Transaction committed successfully
2025-09-08 09:44:29,935 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-08 09:44:29,935 - db_manager - DEBUG - get_grievance_by_id: grievance_id: {'grievance_id': 'GR-20250908-KOJH-2A9D-B', 'complainant_id': 'CM-20250908-KOJH-D567-B', 'grievance_categories': '{"Environmental - Air Pollution","Safety - Road Safety Provisions"}', 'grievance_summary': 'धूलभरी अन्यत्र, अस्पताल जान आवश्यकता', 'grievance_description': 'dust everywhere\nneed to go to hospital', 'grievance_claimed_amount': None, 'grievance_location': None, 'language_code': 'en', 'classification_status': 'pending', 'grievance_creation_date': datetime.datetime(2025, 9, 8, 9, 44, 12, 881296, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'grievance_modification_date': datetime.datetime(2025, 9, 8, 9, 44, 29, 868298, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'is_temporary': True, 'source': 'bot', 'complainant_full_name': 'c30d0407030220958665a4cc739b6ad23d016dd704db960190fdb6c8cba2346c607d8a11a1c2dc68c8d938bcac4a86dc896526d9b5682cf9539e875ac42c30f00ac45d63a843acac5d3d83f42e25', 'complainant_phone': 'c30d04070302907c909baa7230907ad23d01fe268c084747ef1aaeed475cfd4b0f8b1caecad13abbc3a4e59c92f954218018757ec02b768f0df86199a873c79526ffa8c9cb2f150eb1c46faf93ac', 'complainant_email': 'c30d04070302c8db7249062a80547cd23d014d61b9d205f2ec31df0985531ed38b9fb665581952aefa49f4583326695bb2ddf51c9aee58ce67119637877418b4e6529e4cb703bcd0d7a4f9929c36', 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_municipality': None, 'complainant_ward': None, 'complainant_village': None, 'complainant_address': None}, results: [{'grievance_id': 'GR-20250908-KOJH-2A9D-B', 'complainant_id': 'CM-20250908-KOJH-D567-B', 'grievance_categories': '{"Environmental - Air Pollution","Safety - Road Safety Provisions"}', 'grievance_summary': 'धूलभरी अन्यत्र, अस्पताल जान आवश्यकता', 'grievance_description': 'dust everywhere\nneed to go to hospital', 'grievance_claimed_amount': None, 'grievance_location': None, 'language_code': 'en', 'classification_status': 'pending', 'grievance_creation_date': datetime.datetime(2025, 9, 8, 9, 44, 12, 881296, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'grievance_modification_date': datetime.datetime(2025, 9, 8, 9, 44, 29, 868298, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'is_temporary': True, 'source': 'bot', 'complainant_full_name': 'c30d0407030220958665a4cc739b6ad23d016dd704db960190fdb6c8cba2346c607d8a11a1c2dc68c8d938bcac4a86dc896526d9b5682cf9539e875ac42c30f00ac45d63a843acac5d3d83f42e25', 'complainant_phone': 'c30d04070302907c909baa7230907ad23d01fe268c084747ef1aaeed475cfd4b0f8b1caecad13abbc3a4e59c92f954218018757ec02b768f0df86199a873c79526ffa8c9cb2f150eb1c46faf93ac', 'complainant_email': 'c30d04070302c8db7249062a80547cd23d014d61b9d205f2ec31df0985531ed38b9fb665581952aefa49f4583326695bb2ddf51c9aee58ce67119637877418b4e6529e4cb703bcd0d7a4f9929c36', 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_municipality': None, 'complainant_ward': None, 'complainant_village': None, 'complainant_address': None}]
2025-09-08 10:06:14,370 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-08 10:06:14,370 - db_manager - INFO - Database manager initialized successfully
2025-09-08 10:06:14,370 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-08 10:06:14,370 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-08 10:06:14,370 - db_manager - INFO - Database manager initialized successfully
2025-09-08 10:06:14,370 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-08 10:06:14,370 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-08 10:06:14,371 - db_manager - INFO - Database manager initialized successfully
2025-09-08 10:06:14,371 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-08 10:06:14,371 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-08 10:06:14,371 - db_manager - INFO - Database manager initialized successfully
2025-09-08 10:06:14,371 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-08 10:06:14,371 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-08 10:06:14,371 - db_manager - INFO - Database manager initialized successfully
2025-09-08 10:06:14,371 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-08 10:06:14,371 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-08 10:06:14,371 - db_manager - INFO - Database manager initialized successfully
2025-09-08 10:06:14,371 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-08 10:06:14,371 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-08 10:06:14,371 - db_manager - INFO - Database manager initialized successfully
2025-09-08 10:06:14,371 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-08 10:06:14,371 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-08 10:06:14,371 - db_manager - INFO - Database manager initialized successfully
2025-09-08 10:06:14,371 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-08 10:06:14,371 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-08 10:06:14,371 - db_manager - INFO - Database manager initialized successfully
2025-09-08 10:06:14,371 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-08 10:06:14,372 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-08 10:06:14,372 - db_manager - INFO - Database manager initialized successfully
2025-09-08 10:06:14,372 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-08 10:06:49,636 - db_manager - INFO - create_complainant: Creating complainant with ID: CM-20250908-KOJH-639D-B
2025-09-08 10:06:49,637 - db_manager - DEBUG - encrypted and hashed data at encrypt_and_hash_sensitive_data: {'complainant_id': 'CM-20250908-KOJH-639D-B', 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_unique_id': 'CM-20250908-KOJH-639D-B'}
2025-09-08 10:06:49,637 - db_manager - DEBUG - query_keys at generate_query_string: dict_keys(['complainant_id', 'complainant_province', 'complainant_district', 'complainant_unique_id'])
2025-09-08 10:06:49,637 - db_manager - DEBUG - Generated query: INSERT INTO complainants (complainant_id, complainant_province, complainant_district, complainant_unique_id) VALUES (%s, %s, %s, %s)
2025-09-08 10:06:49,637 - db_manager - DEBUG - len of query_keys: 4
2025-09-08 10:06:49,637 - db_manager - DEBUG - Generated query: INSERT INTO complainants (complainant_id, complainant_province, complainant_district, complainant_unique_id) VALUES (%s, %s, %s, %s)
2025-09-08 10:06:49,637 - db_manager - INFO - Connecting to database: grievance_db
2025-09-08 10:06:49,642 - db_manager - INFO - Starting database transaction
2025-09-08 10:06:49,644 - db_manager - INFO - Transaction committed successfully
2025-09-08 10:06:49,644 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-08 10:06:49,645 - db_manager - INFO - create_complainant: Successfully created complainant with ID: CM-20250908-KOJH-639D-B
2025-09-08 10:06:49,645 - db_manager - INFO - create_grievance: Creating grievance with data: {'grievance_id': 'GR-20250908-KOJH-A02B-B', 'complainant_id': 'CM-20250908-KOJH-639D-B', 'grievance_description': '"dust everywhere need to go to hospital"', 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_office': None, 'source': 'bot', 'complainant_unique_id': 'CM-20250908-KOJH-639D-B'}
2025-09-08 10:06:49,645 - db_manager - INFO - create_grievance: Creating grievance with ID: GR-20250908-KOJH-A02B-B
2025-09-08 10:06:49,645 - db_manager - DEBUG - query_keys at generate_query_string: dict_keys(['grievance_id', 'complainant_id', 'grievance_description', 'source'])
2025-09-08 10:06:49,645 - db_manager - DEBUG - Generated query: INSERT INTO grievances (grievance_id, complainant_id, grievance_description, source) VALUES (%s, %s, %s, %s) RETURNING grievance_id
2025-09-08 10:06:49,645 - db_manager - DEBUG - len of query_keys: 4
2025-09-08 10:06:49,645 - db_manager - DEBUG - Generated query: INSERT INTO grievances (grievance_id, complainant_id, grievance_description, source) VALUES (%s, %s, %s, %s) RETURNING grievance_id
2025-09-08 10:06:49,645 - db_manager - INFO - Connecting to database: grievance_db
2025-09-08 10:06:49,650 - db_manager - INFO - Starting database transaction
2025-09-08 10:06:49,654 - db_manager - INFO - Transaction committed successfully
2025-09-08 10:06:49,654 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-08 10:06:49,654 - db_manager - INFO - create_grievance: Successfully created grievance with ID: GR-20250908-KOJH-A02B-B
2025-09-08 10:07:26,194 - db_manager - INFO - Connecting to database: grievance_db
2025-09-08 10:07:26,201 - db_manager - INFO - Starting database transaction
2025-09-08 10:07:26,201 - db_manager - INFO - Executing get_complainant_by_id: 
            SELECT complainant_id, complainant_unique_id, complainant_full_name,    complainant_pho...
2025-09-08 10:07:26,203 - db_manager - INFO - get_complainant_by_id completed in 0.01s. Rows: 1
2025-09-08 10:07:26,203 - db_manager - INFO - Transaction committed successfully
2025-09-08 10:07:26,203 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-08 10:07:26,203 - db_manager - INFO - Connecting to database: grievance_db
2025-09-08 10:07:26,208 - db_manager - INFO - Starting database transaction
2025-09-08 10:07:26,208 - db_manager - INFO - Executing get_grievance_by_id: 
                SELECT g.*, c.complainant_full_name, c.complainant_phone, c.complainant_email,
    ...
2025-09-08 10:07:26,210 - db_manager - INFO - get_grievance_by_id completed in 0.01s. Rows: 1
2025-09-08 10:07:26,210 - db_manager - INFO - Transaction committed successfully
2025-09-08 10:07:26,210 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-08 10:07:26,211 - db_manager - DEBUG - get_grievance_by_id: grievance_id: {'grievance_id': 'GR-20250908-KOJH-A02B-B', 'complainant_id': 'CM-20250908-KOJH-639D-B', 'grievance_categories': '{"Environmental - Air Pollution"}', 'grievance_summary': 'धुलो हरेक ठाउँमा रहेको छ, अस्पताल जान पर्दछ।', 'grievance_description': '"dust everywhere need to go to hospital"', 'grievance_claimed_amount': None, 'grievance_location': None, 'language_code': 'en', 'classification_status': 'pending', 'grievance_creation_date': datetime.datetime(2025, 9, 8, 10, 6, 49, 650562, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'grievance_modification_date': datetime.datetime(2025, 9, 8, 10, 6, 54, 329147, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'is_temporary': True, 'source': 'bot', 'complainant_full_name': None, 'complainant_phone': None, 'complainant_email': None, 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_municipality': None, 'complainant_ward': None, 'complainant_village': None, 'complainant_address': None}, results: [{'grievance_id': 'GR-20250908-KOJH-A02B-B', 'complainant_id': 'CM-20250908-KOJH-639D-B', 'grievance_categories': '{"Environmental - Air Pollution"}', 'grievance_summary': 'धुलो हरेक ठाउँमा रहेको छ, अस्पताल जान पर्दछ।', 'grievance_description': '"dust everywhere need to go to hospital"', 'grievance_claimed_amount': None, 'grievance_location': None, 'language_code': 'en', 'classification_status': 'pending', 'grievance_creation_date': datetime.datetime(2025, 9, 8, 10, 6, 49, 650562, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'grievance_modification_date': datetime.datetime(2025, 9, 8, 10, 6, 54, 329147, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'is_temporary': True, 'source': 'bot', 'complainant_full_name': None, 'complainant_phone': None, 'complainant_email': None, 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_municipality': None, 'complainant_ward': None, 'complainant_village': None, 'complainant_address': None}]
2025-09-08 10:07:26,211 - db_manager - INFO - update_complainant: Updating complainant with ID: CM-20250908-KOJH-639D-B
2025-09-08 10:07:26,211 - db_manager - INFO - Connecting to database: grievance_db
2025-09-08 10:07:26,216 - db_manager - INFO - Starting database transaction
2025-09-08 10:07:26,216 - db_manager - INFO - Executing encrypt_field: SELECT encode(pgp_sym_encrypt(%s, %s), 'hex') AS encrypted...
2025-09-08 10:07:26,219 - db_manager - INFO - encrypt_field completed in 0.01s. Rows: 1
2025-09-08 10:07:26,219 - db_manager - INFO - Transaction committed successfully
2025-09-08 10:07:26,219 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-08 10:07:26,219 - db_manager - INFO - Connecting to database: grievance_db
2025-09-08 10:07:26,224 - db_manager - INFO - Starting database transaction
2025-09-08 10:07:26,224 - db_manager - INFO - Executing encrypt_field: SELECT encode(pgp_sym_encrypt(%s, %s), 'hex') AS encrypted...
2025-09-08 10:07:26,225 - db_manager - INFO - encrypt_field completed in 0.01s. Rows: 1
2025-09-08 10:07:26,225 - db_manager - INFO - Transaction committed successfully
2025-09-08 10:07:26,226 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-08 10:07:26,226 - db_manager - INFO - Connecting to database: grievance_db
2025-09-08 10:07:26,230 - db_manager - INFO - Starting database transaction
2025-09-08 10:07:26,230 - db_manager - INFO - Executing encrypt_field: SELECT encode(pgp_sym_encrypt(%s, %s), 'hex') AS encrypted...
2025-09-08 10:07:26,231 - db_manager - INFO - encrypt_field completed in 0.01s. Rows: 1
2025-09-08 10:07:26,232 - db_manager - INFO - Transaction committed successfully
2025-09-08 10:07:26,232 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-08 10:07:26,232 - db_manager - DEBUG - encrypted phone number Not provided at encrypt_complainant_data: c30d04070302031dfa76070a97cc74d23d01a000c8da2a0e4a53be45b8a1cdccb86ed25fa5411ef4efb0675bb00b5bf5fa6804ce6bd822971d6a39576008b25675d50e203633f39abbf81c44f3b9
2025-09-08 10:07:26,232 - db_manager - DEBUG - phone number Not provided hashed to d83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f at hash_sensitive_data
2025-09-08 10:07:26,232 - db_manager - DEBUG - encrypted and hashed data at encrypt_and_hash_sensitive_data: {'complainant_full_name': 'c30d04070302f25d886aa24a898f73d23d0144fde81b1418fa349949b612ecb7dcc985b359ceaebe8f5b8d81f2cbeef8d4271ed0015a8e7430d49668984e36f498528aad1998bd0a22c9f8204a3a', 'complainant_phone': 'c30d04070302031dfa76070a97cc74d23d01a000c8da2a0e4a53be45b8a1cdccb86ed25fa5411ef4efb0675bb00b5bf5fa6804ce6bd822971d6a39576008b25675d50e203633f39abbf81c44f3b9', 'complainant_email': 'c30d04070302085e299209fb6d4e76d23d016e0f53657e63c960767ab0c97e9ad3917089a5b75a74f4a62785bf01deb80ea131b136c4da7ecdd92463a4727d6281e6d54de9d2f74f05f38d00c2cd', 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_full_name_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'complainant_email_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'complainant_phone_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f'}
2025-09-08 10:07:26,232 - db_manager - DEBUG - encrypted_data at update_complainant: {'complainant_full_name': 'c30d04070302f25d886aa24a898f73d23d0144fde81b1418fa349949b612ecb7dcc985b359ceaebe8f5b8d81f2cbeef8d4271ed0015a8e7430d49668984e36f498528aad1998bd0a22c9f8204a3a', 'complainant_phone': 'c30d04070302031dfa76070a97cc74d23d01a000c8da2a0e4a53be45b8a1cdccb86ed25fa5411ef4efb0675bb00b5bf5fa6804ce6bd822971d6a39576008b25675d50e203633f39abbf81c44f3b9', 'complainant_email': 'c30d04070302085e299209fb6d4e76d23d016e0f53657e63c960767ab0c97e9ad3917089a5b75a74f4a62785bf01deb80ea131b136c4da7ecdd92463a4727d6281e6d54de9d2f74f05f38d00c2cd', 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_full_name_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'complainant_email_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'complainant_phone_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f'}
2025-09-08 10:07:26,232 - db_manager - DEBUG - execute_update values: ('c30d04070302f25d886aa24a898f73d23d0144fde81b1418fa349949b612ecb7dcc985b359ceaebe8f5b8d81f2cbeef8d4271ed0015a8e7430d49668984e36f498528aad1998bd0a22c9f8204a3a', 'c30d04070302031dfa76070a97cc74d23d01a000c8da2a0e4a53be45b8a1cdccb86ed25fa5411ef4efb0675bb00b5bf5fa6804ce6bd822971d6a39576008b25675d50e203633f39abbf81c44f3b9', 'c30d04070302085e299209fb6d4e76d23d016e0f53657e63c960767ab0c97e9ad3917089a5b75a74f4a62785bf01deb80ea131b136c4da7ecdd92463a4727d6281e6d54de9d2f74f05f38d00c2cd', 'Koshi', 'Jhapa', 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'CM-20250908-KOJH-639D-B')
2025-09-08 10:07:26,232 - db_manager - DEBUG - execute_update query: UPDATE complainants SET complainant_full_name = %s, complainant_phone = %s, complainant_email = %s, complainant_province = %s, complainant_district = %s, complainant_full_name_hash = %s, complainant_email_hash = %s, complainant_phone_hash = %s WHERE complainant_id = %s
2025-09-08 10:07:26,232 - db_manager - INFO - Connecting to database: grievance_db
2025-09-08 10:07:26,237 - db_manager - INFO - Starting database transaction
2025-09-08 10:07:26,237 - db_manager - INFO - execute_update: Executing update query: UPDATE complainants SET complainant_full_name = %s, complainant_phone = %s, complainant_email = %s, ...
2025-09-08 10:07:26,239 - db_manager - INFO - execute_update: Update completed in 0.01s. Affected rows: 1
2025-09-08 10:07:26,241 - db_manager - INFO - Transaction committed successfully
2025-09-08 10:07:26,241 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-08 10:07:26,241 - db_manager - INFO - Complainant updated in db: CM-20250908-KOJH-639D-B
2025-09-08 10:07:26,241 - db_manager - INFO - update_grievance: Updating grievance with ID: GR-20250908-KOJH-A02B-B
2025-09-08 10:07:26,241 - db_manager - DEBUG - execute_update values: ('"dust everywhere need to go to hospital"', 'GR-20250908-KOJH-A02B-B')
2025-09-08 10:07:26,241 - db_manager - DEBUG - execute_update query: 
                    UPDATE grievances 
                    SET grievance_description = %s, grievance_modification_date = CURRENT_TIMESTAMP
                    WHERE grievance_id = %s
                    RETURNING grievance_id
                
2025-09-08 10:07:26,241 - db_manager - INFO - Connecting to database: grievance_db
2025-09-08 10:07:26,246 - db_manager - INFO - Starting database transaction
2025-09-08 10:07:26,246 - db_manager - INFO - execute_update: Executing update query: 
                    UPDATE grievances 
                    SET grievance_description = %s, grievanc...
2025-09-08 10:07:26,247 - db_manager - INFO - execute_update: Update completed in 0.01s. Affected rows: 1
2025-09-08 10:07:26,249 - db_manager - INFO - Transaction committed successfully
2025-09-08 10:07:26,249 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-08 10:07:26,249 - db_manager - INFO - update_grievance: Updated grievance with ID: GR-20250908-KOJH-A02B-B, rows affected: 1
2025-09-08 10:07:26,249 - db_manager - INFO - Grievance updated in db: GR-20250908-KOJH-A02B-B
2025-09-08 10:07:26,249 - db_manager - INFO - Connecting to database: grievance_db
2025-09-08 10:07:26,254 - db_manager - INFO - Starting database transaction
2025-09-08 10:07:26,254 - db_manager - INFO - Executing get_grievance_files: 
            SELECT file_id, file_name, file_type, file_size, upload_timestamp
            FROM file...
2025-09-08 10:07:26,255 - db_manager - INFO - get_grievance_files completed in 0.01s. Rows: 0
2025-09-08 10:07:26,255 - db_manager - INFO - Transaction committed successfully
2025-09-08 10:07:26,255 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-08 10:07:26,255 - db_manager - INFO - Connecting to database: grievance_db
2025-09-08 10:07:26,259 - db_manager - INFO - Starting database transaction
2025-09-08 10:07:26,260 - db_manager - INFO - Executing get_grievance_files: 
            SELECT file_id, file_name, file_type, file_size, upload_timestamp
            FROM file...
2025-09-08 10:07:26,260 - db_manager - INFO - get_grievance_files completed in 0.01s. Rows: 0
2025-09-08 10:07:26,261 - db_manager - INFO - Transaction committed successfully
2025-09-08 10:07:26,261 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-08 10:07:26,304 - db_manager - INFO - Connecting to database: grievance_db
2025-09-08 10:07:26,309 - db_manager - INFO - Starting database transaction
2025-09-08 10:07:26,309 - db_manager - INFO - Executing get_grievance_by_id: 
                SELECT g.*, c.complainant_full_name, c.complainant_phone, c.complainant_email,
    ...
2025-09-08 10:07:26,311 - db_manager - INFO - get_grievance_by_id completed in 0.01s. Rows: 1
2025-09-08 10:07:26,311 - db_manager - INFO - Transaction committed successfully
2025-09-08 10:07:26,312 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-08 10:07:26,312 - db_manager - DEBUG - get_grievance_by_id: grievance_id: {'grievance_id': 'GR-20250908-KOJH-A02B-B', 'complainant_id': 'CM-20250908-KOJH-639D-B', 'grievance_categories': '{"Environmental - Air Pollution"}', 'grievance_summary': 'धुलो हरेक ठाउँमा रहेको छ, अस्पताल जान पर्दछ।', 'grievance_description': '"dust everywhere need to go to hospital"', 'grievance_claimed_amount': None, 'grievance_location': None, 'language_code': 'en', 'classification_status': 'pending', 'grievance_creation_date': datetime.datetime(2025, 9, 8, 10, 6, 49, 650562, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'grievance_modification_date': datetime.datetime(2025, 9, 8, 10, 7, 26, 246569, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'is_temporary': True, 'source': 'bot', 'complainant_full_name': 'c30d04070302f25d886aa24a898f73d23d0144fde81b1418fa349949b612ecb7dcc985b359ceaebe8f5b8d81f2cbeef8d4271ed0015a8e7430d49668984e36f498528aad1998bd0a22c9f8204a3a', 'complainant_phone': 'c30d04070302031dfa76070a97cc74d23d01a000c8da2a0e4a53be45b8a1cdccb86ed25fa5411ef4efb0675bb00b5bf5fa6804ce6bd822971d6a39576008b25675d50e203633f39abbf81c44f3b9', 'complainant_email': 'c30d04070302085e299209fb6d4e76d23d016e0f53657e63c960767ab0c97e9ad3917089a5b75a74f4a62785bf01deb80ea131b136c4da7ecdd92463a4727d6281e6d54de9d2f74f05f38d00c2cd', 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_municipality': None, 'complainant_ward': None, 'complainant_village': None, 'complainant_address': None}, results: [{'grievance_id': 'GR-20250908-KOJH-A02B-B', 'complainant_id': 'CM-20250908-KOJH-639D-B', 'grievance_categories': '{"Environmental - Air Pollution"}', 'grievance_summary': 'धुलो हरेक ठाउँमा रहेको छ, अस्पताल जान पर्दछ।', 'grievance_description': '"dust everywhere need to go to hospital"', 'grievance_claimed_amount': None, 'grievance_location': None, 'language_code': 'en', 'classification_status': 'pending', 'grievance_creation_date': datetime.datetime(2025, 9, 8, 10, 6, 49, 650562, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'grievance_modification_date': datetime.datetime(2025, 9, 8, 10, 7, 26, 246569, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'is_temporary': True, 'source': 'bot', 'complainant_full_name': 'c30d04070302f25d886aa24a898f73d23d0144fde81b1418fa349949b612ecb7dcc985b359ceaebe8f5b8d81f2cbeef8d4271ed0015a8e7430d49668984e36f498528aad1998bd0a22c9f8204a3a', 'complainant_phone': 'c30d04070302031dfa76070a97cc74d23d01a000c8da2a0e4a53be45b8a1cdccb86ed25fa5411ef4efb0675bb00b5bf5fa6804ce6bd822971d6a39576008b25675d50e203633f39abbf81c44f3b9', 'complainant_email': 'c30d04070302085e299209fb6d4e76d23d016e0f53657e63c960767ab0c97e9ad3917089a5b75a74f4a62785bf01deb80ea131b136c4da7ecdd92463a4727d6281e6d54de9d2f74f05f38d00c2cd', 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_municipality': None, 'complainant_ward': None, 'complainant_village': None, 'complainant_address': None}]
2025-09-08 10:13:59,573 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-08 10:13:59,574 - db_manager - INFO - Database manager initialized successfully
2025-09-08 10:13:59,574 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-08 10:13:59,574 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-08 10:13:59,574 - db_manager - INFO - Database manager initialized successfully
2025-09-08 10:13:59,574 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-08 10:13:59,574 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-08 10:13:59,575 - db_manager - INFO - Database manager initialized successfully
2025-09-08 10:13:59,575 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-08 10:13:59,575 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-08 10:13:59,575 - db_manager - INFO - Database manager initialized successfully
2025-09-08 10:13:59,575 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-08 10:13:59,575 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-08 10:13:59,575 - db_manager - INFO - Database manager initialized successfully
2025-09-08 10:13:59,575 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-08 10:13:59,575 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-08 10:13:59,575 - db_manager - INFO - Database manager initialized successfully
2025-09-08 10:13:59,575 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-08 10:13:59,575 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-08 10:13:59,575 - db_manager - INFO - Database manager initialized successfully
2025-09-08 10:13:59,575 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-08 10:13:59,575 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-08 10:13:59,575 - db_manager - INFO - Database manager initialized successfully
2025-09-08 10:13:59,575 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-08 10:13:59,575 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-08 10:13:59,575 - db_manager - INFO - Database manager initialized successfully
2025-09-08 10:13:59,575 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-08 10:13:59,575 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-08 10:13:59,575 - db_manager - INFO - Database manager initialized successfully
2025-09-08 10:13:59,575 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-08 10:14:46,284 - db_manager - INFO - create_complainant: Creating complainant with ID: CM-20250908-KOJH-CC4C-B
2025-09-08 10:14:46,284 - db_manager - DEBUG - encrypted and hashed data at encrypt_and_hash_sensitive_data: {'complainant_id': 'CM-20250908-KOJH-CC4C-B', 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_unique_id': 'CM-20250908-KOJH-CC4C-B'}
2025-09-08 10:14:46,285 - db_manager - DEBUG - query_keys at generate_query_string: dict_keys(['complainant_id', 'complainant_province', 'complainant_district', 'complainant_unique_id'])
2025-09-08 10:14:46,285 - db_manager - DEBUG - Generated query: INSERT INTO complainants (complainant_id, complainant_province, complainant_district, complainant_unique_id) VALUES (%s, %s, %s, %s)
2025-09-08 10:14:46,285 - db_manager - DEBUG - len of query_keys: 4
2025-09-08 10:14:46,285 - db_manager - DEBUG - Generated query: INSERT INTO complainants (complainant_id, complainant_province, complainant_district, complainant_unique_id) VALUES (%s, %s, %s, %s)
2025-09-08 10:14:46,285 - db_manager - INFO - Connecting to database: grievance_db
2025-09-08 10:14:46,292 - db_manager - INFO - Starting database transaction
2025-09-08 10:14:46,294 - db_manager - INFO - Transaction committed successfully
2025-09-08 10:14:46,294 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-08 10:14:46,294 - db_manager - INFO - create_complainant: Successfully created complainant with ID: CM-20250908-KOJH-CC4C-B
2025-09-08 10:14:46,294 - db_manager - INFO - create_grievance: Creating grievance with data: {'grievance_id': 'GR-20250908-KOJH-A174-B', 'complainant_id': 'CM-20250908-KOJH-CC4C-B', 'grievance_description': 'dust everywhere\nkids are very sick', 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_office': None, 'source': 'bot', 'complainant_unique_id': 'CM-20250908-KOJH-CC4C-B'}
2025-09-08 10:14:46,294 - db_manager - INFO - create_grievance: Creating grievance with ID: GR-20250908-KOJH-A174-B
2025-09-08 10:14:46,294 - db_manager - DEBUG - query_keys at generate_query_string: dict_keys(['grievance_id', 'complainant_id', 'grievance_description', 'source'])
2025-09-08 10:14:46,294 - db_manager - DEBUG - Generated query: INSERT INTO grievances (grievance_id, complainant_id, grievance_description, source) VALUES (%s, %s, %s, %s) RETURNING grievance_id
2025-09-08 10:14:46,294 - db_manager - DEBUG - len of query_keys: 4
2025-09-08 10:14:46,294 - db_manager - DEBUG - Generated query: INSERT INTO grievances (grievance_id, complainant_id, grievance_description, source) VALUES (%s, %s, %s, %s) RETURNING grievance_id
2025-09-08 10:14:46,294 - db_manager - INFO - Connecting to database: grievance_db
2025-09-08 10:14:46,299 - db_manager - INFO - Starting database transaction
2025-09-08 10:14:46,303 - db_manager - INFO - Transaction committed successfully
2025-09-08 10:14:46,303 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-08 10:14:46,303 - db_manager - INFO - create_grievance: Successfully created grievance with ID: GR-20250908-KOJH-A174-B
2025-09-08 10:15:20,057 - db_manager - INFO - Connecting to database: grievance_db
2025-09-08 10:15:20,063 - db_manager - INFO - Starting database transaction
2025-09-08 10:15:20,063 - db_manager - INFO - Executing get_complainant_by_id: 
            SELECT complainant_id, complainant_unique_id, complainant_full_name,    complainant_pho...
2025-09-08 10:15:20,064 - db_manager - INFO - get_complainant_by_id completed in 0.01s. Rows: 1
2025-09-08 10:15:20,065 - db_manager - INFO - Transaction committed successfully
2025-09-08 10:15:20,065 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-08 10:15:20,065 - db_manager - INFO - Connecting to database: grievance_db
2025-09-08 10:15:20,069 - db_manager - INFO - Starting database transaction
2025-09-08 10:15:20,070 - db_manager - INFO - Executing get_grievance_by_id: 
                SELECT g.*, c.complainant_full_name, c.complainant_phone, c.complainant_email,
    ...
2025-09-08 10:15:20,071 - db_manager - INFO - get_grievance_by_id completed in 0.01s. Rows: 1
2025-09-08 10:15:20,072 - db_manager - INFO - Transaction committed successfully
2025-09-08 10:15:20,072 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-08 10:15:20,072 - db_manager - DEBUG - get_grievance_by_id: grievance_id: {'grievance_id': 'GR-20250908-KOJH-A174-B', 'complainant_id': 'CM-20250908-KOJH-CC4C-B', 'grievance_categories': '{"Environmental - Air Pollution"}', 'grievance_summary': 'धूल सबै ठाउँमा, बालबालिकाहरु धेरै बिरामी', 'grievance_description': 'dust everywhere\nkids are very sick', 'grievance_claimed_amount': None, 'grievance_location': None, 'language_code': 'en', 'classification_status': 'pending', 'grievance_creation_date': datetime.datetime(2025, 9, 8, 10, 14, 46, 299682, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'grievance_modification_date': datetime.datetime(2025, 9, 8, 10, 14, 50, 290209, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'is_temporary': True, 'source': 'bot', 'complainant_full_name': None, 'complainant_phone': None, 'complainant_email': None, 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_municipality': None, 'complainant_ward': None, 'complainant_village': None, 'complainant_address': None}, results: [{'grievance_id': 'GR-20250908-KOJH-A174-B', 'complainant_id': 'CM-20250908-KOJH-CC4C-B', 'grievance_categories': '{"Environmental - Air Pollution"}', 'grievance_summary': 'धूल सबै ठाउँमा, बालबालिकाहरु धेरै बिरामी', 'grievance_description': 'dust everywhere\nkids are very sick', 'grievance_claimed_amount': None, 'grievance_location': None, 'language_code': 'en', 'classification_status': 'pending', 'grievance_creation_date': datetime.datetime(2025, 9, 8, 10, 14, 46, 299682, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'grievance_modification_date': datetime.datetime(2025, 9, 8, 10, 14, 50, 290209, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'is_temporary': True, 'source': 'bot', 'complainant_full_name': None, 'complainant_phone': None, 'complainant_email': None, 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_municipality': None, 'complainant_ward': None, 'complainant_village': None, 'complainant_address': None}]
2025-09-08 10:15:20,072 - db_manager - INFO - update_complainant: Updating complainant with ID: CM-20250908-KOJH-CC4C-B
2025-09-08 10:15:20,072 - db_manager - INFO - Connecting to database: grievance_db
2025-09-08 10:15:20,077 - db_manager - INFO - Starting database transaction
2025-09-08 10:15:20,077 - db_manager - INFO - Executing encrypt_field: SELECT encode(pgp_sym_encrypt(%s, %s), 'hex') AS encrypted...
2025-09-08 10:15:20,079 - db_manager - INFO - encrypt_field completed in 0.01s. Rows: 1
2025-09-08 10:15:20,080 - db_manager - INFO - Transaction committed successfully
2025-09-08 10:15:20,080 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-08 10:15:20,080 - db_manager - DEBUG - encrypted phone number Not provided at encrypt_complainant_data: c30d040703024f5239e18352089e7cd23d018c4eb05b9a5c38c4bf04bdebe808345250bdc8060559b7d334562b1c73cc7014640d9596398cbf89a8d1bcce111265a5c2ba8d5aed412624b638361f
2025-09-08 10:15:20,080 - db_manager - INFO - Connecting to database: grievance_db
2025-09-08 10:15:20,085 - db_manager - INFO - Starting database transaction
2025-09-08 10:15:20,085 - db_manager - INFO - Executing encrypt_field: SELECT encode(pgp_sym_encrypt(%s, %s), 'hex') AS encrypted...
2025-09-08 10:15:20,086 - db_manager - INFO - encrypt_field completed in 0.01s. Rows: 1
2025-09-08 10:15:20,086 - db_manager - INFO - Transaction committed successfully
2025-09-08 10:15:20,086 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-08 10:15:20,086 - db_manager - INFO - Connecting to database: grievance_db
2025-09-08 10:15:20,090 - db_manager - INFO - Starting database transaction
2025-09-08 10:15:20,090 - db_manager - INFO - Executing encrypt_field: SELECT encode(pgp_sym_encrypt(%s, %s), 'hex') AS encrypted...
2025-09-08 10:15:20,092 - db_manager - INFO - encrypt_field completed in 0.01s. Rows: 1
2025-09-08 10:15:20,092 - db_manager - INFO - Transaction committed successfully
2025-09-08 10:15:20,092 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-08 10:15:20,092 - db_manager - DEBUG - phone number Not provided hashed to d83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f at hash_sensitive_data
2025-09-08 10:15:20,092 - db_manager - DEBUG - encrypted and hashed data at encrypt_and_hash_sensitive_data: {'complainant_full_name': 'c30d040703024f98b79cb80f81bf7ad23d019afb6ea10b51c7441e816da94b037c13efab265d3ba02a05d6aae53da0f4570783169163f7176d2074ca58b3e3db1b547620b475d284770cd2bc2c74', 'complainant_phone': 'c30d040703024f5239e18352089e7cd23d018c4eb05b9a5c38c4bf04bdebe808345250bdc8060559b7d334562b1c73cc7014640d9596398cbf89a8d1bcce111265a5c2ba8d5aed412624b638361f', 'complainant_email': 'c30d04070302b55e73aa5488b8ce6fd23d01b70d28758d20672393194f65bfe3301a4e760795e125873ba54ae1fbf140cd6f3d87d027c50b13ce09ffbdca76471d9ce0565fa86ef5870d41f0554f', 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_phone_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'complainant_full_name_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'complainant_email_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f'}
2025-09-08 10:15:20,092 - db_manager - DEBUG - encrypted_data at update_complainant: {'complainant_full_name': 'c30d040703024f98b79cb80f81bf7ad23d019afb6ea10b51c7441e816da94b037c13efab265d3ba02a05d6aae53da0f4570783169163f7176d2074ca58b3e3db1b547620b475d284770cd2bc2c74', 'complainant_phone': 'c30d040703024f5239e18352089e7cd23d018c4eb05b9a5c38c4bf04bdebe808345250bdc8060559b7d334562b1c73cc7014640d9596398cbf89a8d1bcce111265a5c2ba8d5aed412624b638361f', 'complainant_email': 'c30d04070302b55e73aa5488b8ce6fd23d01b70d28758d20672393194f65bfe3301a4e760795e125873ba54ae1fbf140cd6f3d87d027c50b13ce09ffbdca76471d9ce0565fa86ef5870d41f0554f', 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_phone_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'complainant_full_name_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'complainant_email_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f'}
2025-09-08 10:15:20,092 - db_manager - DEBUG - execute_update values: ('c30d040703024f98b79cb80f81bf7ad23d019afb6ea10b51c7441e816da94b037c13efab265d3ba02a05d6aae53da0f4570783169163f7176d2074ca58b3e3db1b547620b475d284770cd2bc2c74', 'c30d040703024f5239e18352089e7cd23d018c4eb05b9a5c38c4bf04bdebe808345250bdc8060559b7d334562b1c73cc7014640d9596398cbf89a8d1bcce111265a5c2ba8d5aed412624b638361f', 'c30d04070302b55e73aa5488b8ce6fd23d01b70d28758d20672393194f65bfe3301a4e760795e125873ba54ae1fbf140cd6f3d87d027c50b13ce09ffbdca76471d9ce0565fa86ef5870d41f0554f', 'Koshi', 'Jhapa', 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'CM-20250908-KOJH-CC4C-B')
2025-09-08 10:15:20,092 - db_manager - DEBUG - execute_update query: UPDATE complainants SET complainant_full_name = %s, complainant_phone = %s, complainant_email = %s, complainant_province = %s, complainant_district = %s, complainant_phone_hash = %s, complainant_full_name_hash = %s, complainant_email_hash = %s WHERE complainant_id = %s
2025-09-08 10:15:20,092 - db_manager - INFO - Connecting to database: grievance_db
2025-09-08 10:15:20,097 - db_manager - INFO - Starting database transaction
2025-09-08 10:15:20,097 - db_manager - INFO - execute_update: Executing update query: UPDATE complainants SET complainant_full_name = %s, complainant_phone = %s, complainant_email = %s, ...
2025-09-08 10:15:20,098 - db_manager - INFO - execute_update: Update completed in 0.01s. Affected rows: 1
2025-09-08 10:15:20,100 - db_manager - INFO - Transaction committed successfully
2025-09-08 10:15:20,100 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-08 10:15:20,100 - db_manager - INFO - Complainant updated in db: CM-20250908-KOJH-CC4C-B
2025-09-08 10:15:20,100 - db_manager - INFO - update_grievance: Updating grievance with ID: GR-20250908-KOJH-A174-B
2025-09-08 10:15:20,100 - db_manager - DEBUG - execute_update values: ('dust everywhere\nkids are very sick', 'GR-20250908-KOJH-A174-B')
2025-09-08 10:15:20,100 - db_manager - DEBUG - execute_update query: 
                    UPDATE grievances 
                    SET grievance_description = %s, grievance_modification_date = CURRENT_TIMESTAMP
                    WHERE grievance_id = %s
                    RETURNING grievance_id
                
2025-09-08 10:15:20,100 - db_manager - INFO - Connecting to database: grievance_db
2025-09-08 10:15:20,105 - db_manager - INFO - Starting database transaction
2025-09-08 10:15:20,105 - db_manager - INFO - execute_update: Executing update query: 
                    UPDATE grievances 
                    SET grievance_description = %s, grievanc...
2025-09-08 10:15:20,106 - db_manager - INFO - execute_update: Update completed in 0.01s. Affected rows: 1
2025-09-08 10:15:20,108 - db_manager - INFO - Transaction committed successfully
2025-09-08 10:15:20,108 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-08 10:15:20,108 - db_manager - INFO - update_grievance: Updated grievance with ID: GR-20250908-KOJH-A174-B, rows affected: 1
2025-09-08 10:15:20,109 - db_manager - INFO - Grievance updated in db: GR-20250908-KOJH-A174-B
2025-09-08 10:15:20,109 - db_manager - INFO - Connecting to database: grievance_db
2025-09-08 10:15:20,114 - db_manager - INFO - Starting database transaction
2025-09-08 10:15:20,114 - db_manager - INFO - Executing get_grievance_files: 
            SELECT file_id, file_name, file_type, file_size, upload_timestamp
            FROM file...
2025-09-08 10:15:20,115 - db_manager - INFO - get_grievance_files completed in 0.01s. Rows: 0
2025-09-08 10:15:20,115 - db_manager - INFO - Transaction committed successfully
2025-09-08 10:15:20,115 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-08 10:15:20,115 - db_manager - INFO - Connecting to database: grievance_db
2025-09-08 10:15:20,121 - db_manager - INFO - Starting database transaction
2025-09-08 10:15:20,121 - db_manager - INFO - Executing get_grievance_files: 
            SELECT file_id, file_name, file_type, file_size, upload_timestamp
            FROM file...
2025-09-08 10:15:20,122 - db_manager - INFO - get_grievance_files completed in 0.01s. Rows: 0
2025-09-08 10:15:20,123 - db_manager - INFO - Transaction committed successfully
2025-09-08 10:15:20,123 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-08 10:15:20,164 - db_manager - INFO - Connecting to database: grievance_db
2025-09-08 10:15:20,169 - db_manager - INFO - Starting database transaction
2025-09-08 10:15:20,169 - db_manager - INFO - Executing get_grievance_by_id: 
                SELECT g.*, c.complainant_full_name, c.complainant_phone, c.complainant_email,
    ...
2025-09-08 10:15:20,171 - db_manager - INFO - get_grievance_by_id completed in 0.01s. Rows: 1
2025-09-08 10:15:20,171 - db_manager - INFO - Transaction committed successfully
2025-09-08 10:15:20,171 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-08 10:15:20,172 - db_manager - DEBUG - get_grievance_by_id: grievance_id: {'grievance_id': 'GR-20250908-KOJH-A174-B', 'complainant_id': 'CM-20250908-KOJH-CC4C-B', 'grievance_categories': '{"Environmental - Air Pollution"}', 'grievance_summary': 'धूल सबै ठाउँमा, बालबालिकाहरु धेरै बिरामी', 'grievance_description': 'dust everywhere\nkids are very sick', 'grievance_claimed_amount': None, 'grievance_location': None, 'language_code': 'en', 'classification_status': 'pending', 'grievance_creation_date': datetime.datetime(2025, 9, 8, 10, 14, 46, 299682, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'grievance_modification_date': datetime.datetime(2025, 9, 8, 10, 15, 20, 105674, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'is_temporary': True, 'source': 'bot', 'complainant_full_name': 'c30d040703024f98b79cb80f81bf7ad23d019afb6ea10b51c7441e816da94b037c13efab265d3ba02a05d6aae53da0f4570783169163f7176d2074ca58b3e3db1b547620b475d284770cd2bc2c74', 'complainant_phone': 'c30d040703024f5239e18352089e7cd23d018c4eb05b9a5c38c4bf04bdebe808345250bdc8060559b7d334562b1c73cc7014640d9596398cbf89a8d1bcce111265a5c2ba8d5aed412624b638361f', 'complainant_email': 'c30d04070302b55e73aa5488b8ce6fd23d01b70d28758d20672393194f65bfe3301a4e760795e125873ba54ae1fbf140cd6f3d87d027c50b13ce09ffbdca76471d9ce0565fa86ef5870d41f0554f', 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_municipality': None, 'complainant_ward': None, 'complainant_village': None, 'complainant_address': None}, results: [{'grievance_id': 'GR-20250908-KOJH-A174-B', 'complainant_id': 'CM-20250908-KOJH-CC4C-B', 'grievance_categories': '{"Environmental - Air Pollution"}', 'grievance_summary': 'धूल सबै ठाउँमा, बालबालिकाहरु धेरै बिरामी', 'grievance_description': 'dust everywhere\nkids are very sick', 'grievance_claimed_amount': None, 'grievance_location': None, 'language_code': 'en', 'classification_status': 'pending', 'grievance_creation_date': datetime.datetime(2025, 9, 8, 10, 14, 46, 299682, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'grievance_modification_date': datetime.datetime(2025, 9, 8, 10, 15, 20, 105674, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'is_temporary': True, 'source': 'bot', 'complainant_full_name': 'c30d040703024f98b79cb80f81bf7ad23d019afb6ea10b51c7441e816da94b037c13efab265d3ba02a05d6aae53da0f4570783169163f7176d2074ca58b3e3db1b547620b475d284770cd2bc2c74', 'complainant_phone': 'c30d040703024f5239e18352089e7cd23d018c4eb05b9a5c38c4bf04bdebe808345250bdc8060559b7d334562b1c73cc7014640d9596398cbf89a8d1bcce111265a5c2ba8d5aed412624b638361f', 'complainant_email': 'c30d04070302b55e73aa5488b8ce6fd23d01b70d28758d20672393194f65bfe3301a4e760795e125873ba54ae1fbf140cd6f3d87d027c50b13ce09ffbdca76471d9ce0565fa86ef5870d41f0554f', 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_municipality': None, 'complainant_ward': None, 'complainant_village': None, 'complainant_address': None}]
2025-09-08 10:23:56,046 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-08 10:23:56,047 - db_manager - INFO - Database manager initialized successfully
2025-09-08 10:23:56,047 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-08 10:23:56,047 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-08 10:23:56,047 - db_manager - INFO - Database manager initialized successfully
2025-09-08 10:23:56,047 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-08 10:23:56,047 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-08 10:23:56,047 - db_manager - INFO - Database manager initialized successfully
2025-09-08 10:23:56,047 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-08 10:23:56,047 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-08 10:23:56,047 - db_manager - INFO - Database manager initialized successfully
2025-09-08 10:23:56,047 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-08 10:23:56,047 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-08 10:23:56,047 - db_manager - INFO - Database manager initialized successfully
2025-09-08 10:23:56,047 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-08 10:23:56,047 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-08 10:23:56,048 - db_manager - INFO - Database manager initialized successfully
2025-09-08 10:23:56,048 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-08 10:23:56,048 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-08 10:23:56,048 - db_manager - INFO - Database manager initialized successfully
2025-09-08 10:23:56,048 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-08 10:23:56,048 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-08 10:23:56,048 - db_manager - INFO - Database manager initialized successfully
2025-09-08 10:23:56,048 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-08 10:23:56,048 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-08 10:23:56,048 - db_manager - INFO - Database manager initialized successfully
2025-09-08 10:23:56,048 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-08 10:23:56,048 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-08 10:23:56,048 - db_manager - INFO - Database manager initialized successfully
2025-09-08 10:23:56,048 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-08 10:26:14,204 - db_manager - INFO - create_complainant: Creating complainant with ID: CM-20250908-KOJH-85E0-B
2025-09-08 10:26:14,204 - db_manager - DEBUG - encrypted and hashed data at encrypt_and_hash_sensitive_data: {'complainant_id': 'CM-20250908-KOJH-85E0-B', 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_unique_id': 'CM-20250908-KOJH-85E0-B'}
2025-09-08 10:26:14,204 - db_manager - DEBUG - query_keys at generate_query_string: dict_keys(['complainant_id', 'complainant_province', 'complainant_district', 'complainant_unique_id'])
2025-09-08 10:26:14,204 - db_manager - DEBUG - Generated query: INSERT INTO complainants (complainant_id, complainant_province, complainant_district, complainant_unique_id) VALUES (%s, %s, %s, %s)
2025-09-08 10:26:14,204 - db_manager - DEBUG - len of query_keys: 4
2025-09-08 10:26:14,204 - db_manager - DEBUG - Generated query: INSERT INTO complainants (complainant_id, complainant_province, complainant_district, complainant_unique_id) VALUES (%s, %s, %s, %s)
2025-09-08 10:26:14,204 - db_manager - INFO - Connecting to database: grievance_db
2025-09-08 10:26:14,211 - db_manager - INFO - Starting database transaction
2025-09-08 10:26:14,213 - db_manager - INFO - Transaction committed successfully
2025-09-08 10:26:14,213 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-08 10:26:14,214 - db_manager - INFO - create_complainant: Successfully created complainant with ID: CM-20250908-KOJH-85E0-B
2025-09-08 10:26:14,214 - db_manager - INFO - create_grievance: Creating grievance with data: {'grievance_id': 'GR-20250908-KOJH-2E2F-B', 'complainant_id': 'CM-20250908-KOJH-85E0-B', 'grievance_description': 'dust everywhere kids are very sick', 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_office': None, 'source': 'bot', 'complainant_unique_id': 'CM-20250908-KOJH-85E0-B'}
2025-09-08 10:26:14,214 - db_manager - INFO - create_grievance: Creating grievance with ID: GR-20250908-KOJH-2E2F-B
2025-09-08 10:26:14,214 - db_manager - DEBUG - query_keys at generate_query_string: dict_keys(['grievance_id', 'complainant_id', 'grievance_description', 'source'])
2025-09-08 10:26:14,214 - db_manager - DEBUG - Generated query: INSERT INTO grievances (grievance_id, complainant_id, grievance_description, source) VALUES (%s, %s, %s, %s) RETURNING grievance_id
2025-09-08 10:26:14,214 - db_manager - DEBUG - len of query_keys: 4
2025-09-08 10:26:14,214 - db_manager - DEBUG - Generated query: INSERT INTO grievances (grievance_id, complainant_id, grievance_description, source) VALUES (%s, %s, %s, %s) RETURNING grievance_id
2025-09-08 10:26:14,214 - db_manager - INFO - Connecting to database: grievance_db
2025-09-08 10:26:14,219 - db_manager - INFO - Starting database transaction
2025-09-08 10:26:14,227 - db_manager - INFO - Transaction committed successfully
2025-09-08 10:26:14,228 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-08 10:26:14,228 - db_manager - INFO - create_grievance: Successfully created grievance with ID: GR-20250908-KOJH-2E2F-B
2025-09-08 10:26:29,850 - db_manager - INFO - Connecting to database: grievance_db
2025-09-08 10:26:29,855 - db_manager - INFO - Starting database transaction
2025-09-08 10:26:29,856 - db_manager - INFO - Executing get_complainant_by_id: 
            SELECT complainant_id, complainant_unique_id, complainant_full_name,    complainant_pho...
2025-09-08 10:26:29,857 - db_manager - INFO - get_complainant_by_id completed in 0.01s. Rows: 1
2025-09-08 10:26:29,857 - db_manager - INFO - Transaction committed successfully
2025-09-08 10:26:29,857 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-08 10:26:29,857 - db_manager - INFO - Connecting to database: grievance_db
2025-09-08 10:26:29,862 - db_manager - INFO - Starting database transaction
2025-09-08 10:26:29,863 - db_manager - INFO - Executing get_grievance_by_id: 
                SELECT g.*, c.complainant_full_name, c.complainant_phone, c.complainant_email,
    ...
2025-09-08 10:26:29,864 - db_manager - INFO - get_grievance_by_id completed in 0.01s. Rows: 1
2025-09-08 10:26:29,864 - db_manager - INFO - Transaction committed successfully
2025-09-08 10:26:29,864 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-08 10:26:29,865 - db_manager - DEBUG - get_grievance_by_id: grievance_id: {'grievance_id': 'GR-20250908-KOJH-2E2F-B', 'complainant_id': 'CM-20250908-KOJH-85E0-B', 'grievance_categories': '{"Environmental - Air Pollution"}', 'grievance_summary': 'धूलो सबै ठाउँमा फैलिएकोछ, बालबालिका धेरै बिरामी छन्।', 'grievance_description': 'dust everywhere kids are very sick', 'grievance_claimed_amount': None, 'grievance_location': None, 'language_code': 'en', 'classification_status': 'pending', 'grievance_creation_date': datetime.datetime(2025, 9, 8, 10, 26, 14, 219910, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'grievance_modification_date': datetime.datetime(2025, 9, 8, 10, 26, 17, 753186, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'is_temporary': True, 'source': 'bot', 'complainant_full_name': None, 'complainant_phone': None, 'complainant_email': None, 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_municipality': None, 'complainant_ward': None, 'complainant_village': None, 'complainant_address': None}, results: [{'grievance_id': 'GR-20250908-KOJH-2E2F-B', 'complainant_id': 'CM-20250908-KOJH-85E0-B', 'grievance_categories': '{"Environmental - Air Pollution"}', 'grievance_summary': 'धूलो सबै ठाउँमा फैलिएकोछ, बालबालिका धेरै बिरामी छन्।', 'grievance_description': 'dust everywhere kids are very sick', 'grievance_claimed_amount': None, 'grievance_location': None, 'language_code': 'en', 'classification_status': 'pending', 'grievance_creation_date': datetime.datetime(2025, 9, 8, 10, 26, 14, 219910, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'grievance_modification_date': datetime.datetime(2025, 9, 8, 10, 26, 17, 753186, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'is_temporary': True, 'source': 'bot', 'complainant_full_name': None, 'complainant_phone': None, 'complainant_email': None, 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_municipality': None, 'complainant_ward': None, 'complainant_village': None, 'complainant_address': None}]
2025-09-08 10:26:29,865 - db_manager - INFO - update_complainant: Updating complainant with ID: CM-20250908-KOJH-85E0-B
2025-09-08 10:26:29,865 - db_manager - INFO - Connecting to database: grievance_db
2025-09-08 10:26:29,870 - db_manager - INFO - Starting database transaction
2025-09-08 10:26:29,870 - db_manager - INFO - Executing encrypt_field: SELECT encode(pgp_sym_encrypt(%s, %s), 'hex') AS encrypted...
2025-09-08 10:26:29,873 - db_manager - INFO - encrypt_field completed in 0.01s. Rows: 1
2025-09-08 10:26:29,874 - db_manager - INFO - Transaction committed successfully
2025-09-08 10:26:29,874 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-08 10:26:29,874 - db_manager - INFO - Connecting to database: grievance_db
2025-09-08 10:26:29,879 - db_manager - INFO - Starting database transaction
2025-09-08 10:26:29,879 - db_manager - INFO - Executing encrypt_field: SELECT encode(pgp_sym_encrypt(%s, %s), 'hex') AS encrypted...
2025-09-08 10:26:29,880 - db_manager - INFO - encrypt_field completed in 0.01s. Rows: 1
2025-09-08 10:26:29,880 - db_manager - INFO - Transaction committed successfully
2025-09-08 10:26:29,881 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-08 10:26:29,881 - db_manager - DEBUG - encrypted phone number Not provided at encrypt_complainant_data: c30d040703026657f265137a0d556ed23d0139da599b3b3cb047c2100cb4be0024daa94d8056b21c36413728c8d8e9f496e0cf6e7b629d2d195568620555d9177dfe87cceb5ec95965c28645c221
2025-09-08 10:26:29,881 - db_manager - INFO - Connecting to database: grievance_db
2025-09-08 10:26:29,885 - db_manager - INFO - Starting database transaction
2025-09-08 10:26:29,885 - db_manager - INFO - Executing encrypt_field: SELECT encode(pgp_sym_encrypt(%s, %s), 'hex') AS encrypted...
2025-09-08 10:26:29,886 - db_manager - INFO - encrypt_field completed in 0.01s. Rows: 1
2025-09-08 10:26:29,886 - db_manager - INFO - Transaction committed successfully
2025-09-08 10:26:29,886 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-08 10:26:29,886 - db_manager - DEBUG - phone number Not provided hashed to d83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f at hash_sensitive_data
2025-09-08 10:26:29,886 - db_manager - DEBUG - encrypted and hashed data at encrypt_and_hash_sensitive_data: {'complainant_full_name': 'c30d04070302c2f85d99a840e2907bd23d01b5e268d7ef2d2c332be0b2f08d77a72372ab59ba831015f698e5b00f915ebe730986c18da4331af95c5672f5b8233ff86df0a4b34fe84b1cc18c07af', 'complainant_phone': 'c30d040703026657f265137a0d556ed23d0139da599b3b3cb047c2100cb4be0024daa94d8056b21c36413728c8d8e9f496e0cf6e7b629d2d195568620555d9177dfe87cceb5ec95965c28645c221', 'complainant_email': 'c30d04070302193bb40d8f6ec1c376d23d01db4391fa30e924996923e8c5394381b9d81bd0bdd76df51efbab9986cf57112fad3f23925624ffbc4cca5d6850e11dbea1e9f8bc06ae11161cff5793', 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_email_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'complainant_phone_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'complainant_full_name_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f'}
2025-09-08 10:26:29,886 - db_manager - DEBUG - encrypted_data at update_complainant: {'complainant_full_name': 'c30d04070302c2f85d99a840e2907bd23d01b5e268d7ef2d2c332be0b2f08d77a72372ab59ba831015f698e5b00f915ebe730986c18da4331af95c5672f5b8233ff86df0a4b34fe84b1cc18c07af', 'complainant_phone': 'c30d040703026657f265137a0d556ed23d0139da599b3b3cb047c2100cb4be0024daa94d8056b21c36413728c8d8e9f496e0cf6e7b629d2d195568620555d9177dfe87cceb5ec95965c28645c221', 'complainant_email': 'c30d04070302193bb40d8f6ec1c376d23d01db4391fa30e924996923e8c5394381b9d81bd0bdd76df51efbab9986cf57112fad3f23925624ffbc4cca5d6850e11dbea1e9f8bc06ae11161cff5793', 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_email_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'complainant_phone_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'complainant_full_name_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f'}
2025-09-08 10:26:29,886 - db_manager - DEBUG - execute_update values: ('c30d04070302c2f85d99a840e2907bd23d01b5e268d7ef2d2c332be0b2f08d77a72372ab59ba831015f698e5b00f915ebe730986c18da4331af95c5672f5b8233ff86df0a4b34fe84b1cc18c07af', 'c30d040703026657f265137a0d556ed23d0139da599b3b3cb047c2100cb4be0024daa94d8056b21c36413728c8d8e9f496e0cf6e7b629d2d195568620555d9177dfe87cceb5ec95965c28645c221', 'c30d04070302193bb40d8f6ec1c376d23d01db4391fa30e924996923e8c5394381b9d81bd0bdd76df51efbab9986cf57112fad3f23925624ffbc4cca5d6850e11dbea1e9f8bc06ae11161cff5793', 'Koshi', 'Jhapa', 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'CM-20250908-KOJH-85E0-B')
2025-09-08 10:26:29,886 - db_manager - DEBUG - execute_update query: UPDATE complainants SET complainant_full_name = %s, complainant_phone = %s, complainant_email = %s, complainant_province = %s, complainant_district = %s, complainant_email_hash = %s, complainant_phone_hash = %s, complainant_full_name_hash = %s WHERE complainant_id = %s
2025-09-08 10:26:29,886 - db_manager - INFO - Connecting to database: grievance_db
2025-09-08 10:26:29,891 - db_manager - INFO - Starting database transaction
2025-09-08 10:26:29,891 - db_manager - INFO - execute_update: Executing update query: UPDATE complainants SET complainant_full_name = %s, complainant_phone = %s, complainant_email = %s, ...
2025-09-08 10:26:29,892 - db_manager - INFO - execute_update: Update completed in 0.01s. Affected rows: 1
2025-09-08 10:26:29,894 - db_manager - INFO - Transaction committed successfully
2025-09-08 10:26:29,894 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-08 10:26:29,894 - db_manager - INFO - Complainant updated in db: CM-20250908-KOJH-85E0-B
2025-09-08 10:26:29,894 - db_manager - INFO - update_grievance: Updating grievance with ID: GR-20250908-KOJH-2E2F-B
2025-09-08 10:26:29,894 - db_manager - DEBUG - execute_update values: ('dust everywhere kids are very sick', 'GR-20250908-KOJH-2E2F-B')
2025-09-08 10:26:29,894 - db_manager - DEBUG - execute_update query: 
                    UPDATE grievances 
                    SET grievance_description = %s, grievance_modification_date = CURRENT_TIMESTAMP
                    WHERE grievance_id = %s
                    RETURNING grievance_id
                
2025-09-08 10:26:29,894 - db_manager - INFO - Connecting to database: grievance_db
2025-09-08 10:26:29,899 - db_manager - INFO - Starting database transaction
2025-09-08 10:26:29,899 - db_manager - INFO - execute_update: Executing update query: 
                    UPDATE grievances 
                    SET grievance_description = %s, grievanc...
2025-09-08 10:26:29,900 - db_manager - INFO - execute_update: Update completed in 0.01s. Affected rows: 1
2025-09-08 10:26:29,901 - db_manager - INFO - Transaction committed successfully
2025-09-08 10:26:29,901 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-08 10:26:29,901 - db_manager - INFO - update_grievance: Updated grievance with ID: GR-20250908-KOJH-2E2F-B, rows affected: 1
2025-09-08 10:26:29,901 - db_manager - INFO - Grievance updated in db: GR-20250908-KOJH-2E2F-B
2025-09-08 10:26:29,902 - db_manager - INFO - Connecting to database: grievance_db
2025-09-08 10:26:29,906 - db_manager - INFO - Starting database transaction
2025-09-08 10:26:29,907 - db_manager - INFO - Executing get_grievance_files: 
            SELECT file_id, file_name, file_type, file_size, upload_timestamp
            FROM file...
2025-09-08 10:26:29,908 - db_manager - INFO - get_grievance_files completed in 0.01s. Rows: 0
2025-09-08 10:26:29,908 - db_manager - INFO - Transaction committed successfully
2025-09-08 10:26:29,908 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-08 10:26:29,908 - db_manager - INFO - Connecting to database: grievance_db
2025-09-08 10:26:29,913 - db_manager - INFO - Starting database transaction
2025-09-08 10:26:29,913 - db_manager - INFO - Executing get_grievance_files: 
            SELECT file_id, file_name, file_type, file_size, upload_timestamp
            FROM file...
2025-09-08 10:26:29,915 - db_manager - INFO - get_grievance_files completed in 0.01s. Rows: 0
2025-09-08 10:26:29,915 - db_manager - INFO - Transaction committed successfully
2025-09-08 10:26:29,915 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-08 10:26:29,962 - db_manager - INFO - Connecting to database: grievance_db
2025-09-08 10:26:29,967 - db_manager - INFO - Starting database transaction
2025-09-08 10:26:29,967 - db_manager - INFO - Executing get_grievance_by_id: 
                SELECT g.*, c.complainant_full_name, c.complainant_phone, c.complainant_email,
    ...
2025-09-08 10:26:29,969 - db_manager - INFO - get_grievance_by_id completed in 0.01s. Rows: 1
2025-09-08 10:26:29,969 - db_manager - INFO - Transaction committed successfully
2025-09-08 10:26:29,969 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-08 10:26:29,970 - db_manager - DEBUG - get_grievance_by_id: grievance_id: {'grievance_id': 'GR-20250908-KOJH-2E2F-B', 'complainant_id': 'CM-20250908-KOJH-85E0-B', 'grievance_categories': '{"Environmental - Air Pollution"}', 'grievance_summary': 'धूलो सबै ठाउँमा फैलिएकोछ, बालबालिका धेरै बिरामी छन्।', 'grievance_description': 'dust everywhere kids are very sick', 'grievance_claimed_amount': None, 'grievance_location': None, 'language_code': 'en', 'classification_status': 'pending', 'grievance_creation_date': datetime.datetime(2025, 9, 8, 10, 26, 14, 219910, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'grievance_modification_date': datetime.datetime(2025, 9, 8, 10, 26, 29, 899326, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'is_temporary': True, 'source': 'bot', 'complainant_full_name': 'c30d04070302c2f85d99a840e2907bd23d01b5e268d7ef2d2c332be0b2f08d77a72372ab59ba831015f698e5b00f915ebe730986c18da4331af95c5672f5b8233ff86df0a4b34fe84b1cc18c07af', 'complainant_phone': 'c30d040703026657f265137a0d556ed23d0139da599b3b3cb047c2100cb4be0024daa94d8056b21c36413728c8d8e9f496e0cf6e7b629d2d195568620555d9177dfe87cceb5ec95965c28645c221', 'complainant_email': 'c30d04070302193bb40d8f6ec1c376d23d01db4391fa30e924996923e8c5394381b9d81bd0bdd76df51efbab9986cf57112fad3f23925624ffbc4cca5d6850e11dbea1e9f8bc06ae11161cff5793', 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_municipality': None, 'complainant_ward': None, 'complainant_village': None, 'complainant_address': None}, results: [{'grievance_id': 'GR-20250908-KOJH-2E2F-B', 'complainant_id': 'CM-20250908-KOJH-85E0-B', 'grievance_categories': '{"Environmental - Air Pollution"}', 'grievance_summary': 'धूलो सबै ठाउँमा फैलिएकोछ, बालबालिका धेरै बिरामी छन्।', 'grievance_description': 'dust everywhere kids are very sick', 'grievance_claimed_amount': None, 'grievance_location': None, 'language_code': 'en', 'classification_status': 'pending', 'grievance_creation_date': datetime.datetime(2025, 9, 8, 10, 26, 14, 219910, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'grievance_modification_date': datetime.datetime(2025, 9, 8, 10, 26, 29, 899326, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'is_temporary': True, 'source': 'bot', 'complainant_full_name': 'c30d04070302c2f85d99a840e2907bd23d01b5e268d7ef2d2c332be0b2f08d77a72372ab59ba831015f698e5b00f915ebe730986c18da4331af95c5672f5b8233ff86df0a4b34fe84b1cc18c07af', 'complainant_phone': 'c30d040703026657f265137a0d556ed23d0139da599b3b3cb047c2100cb4be0024daa94d8056b21c36413728c8d8e9f496e0cf6e7b629d2d195568620555d9177dfe87cceb5ec95965c28645c221', 'complainant_email': 'c30d04070302193bb40d8f6ec1c376d23d01db4391fa30e924996923e8c5394381b9d81bd0bdd76df51efbab9986cf57112fad3f23925624ffbc4cca5d6850e11dbea1e9f8bc06ae11161cff5793', 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_municipality': None, 'complainant_ward': None, 'complainant_village': None, 'complainant_address': None}]
2025-09-08 10:29:41,319 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-08 10:29:41,319 - db_manager - INFO - Database manager initialized successfully
2025-09-08 10:29:41,319 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-08 10:29:41,319 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-08 10:29:41,319 - db_manager - INFO - Database manager initialized successfully
2025-09-08 10:29:41,319 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-08 10:29:41,319 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-08 10:29:41,319 - db_manager - INFO - Database manager initialized successfully
2025-09-08 10:29:41,319 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-08 10:29:41,319 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-08 10:29:41,319 - db_manager - INFO - Database manager initialized successfully
2025-09-08 10:29:41,319 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-08 10:29:41,319 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-08 10:29:41,319 - db_manager - INFO - Database manager initialized successfully
2025-09-08 10:29:41,319 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-08 10:29:41,320 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-08 10:29:41,320 - db_manager - INFO - Database manager initialized successfully
2025-09-08 10:29:41,320 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-08 10:29:41,320 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-08 10:29:41,320 - db_manager - INFO - Database manager initialized successfully
2025-09-08 10:29:41,320 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-08 10:29:41,320 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-08 10:29:41,320 - db_manager - INFO - Database manager initialized successfully
2025-09-08 10:29:41,320 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-08 10:29:41,320 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-08 10:29:41,320 - db_manager - INFO - Database manager initialized successfully
2025-09-08 10:29:41,320 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-08 10:29:41,320 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-08 10:29:41,320 - db_manager - INFO - Database manager initialized successfully
2025-09-08 10:29:41,320 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-08 10:30:55,973 - db_manager - INFO - create_complainant: Creating complainant with ID: CM-20250908-KOJH-DF15-B
2025-09-08 10:30:55,973 - db_manager - DEBUG - encrypted and hashed data at encrypt_and_hash_sensitive_data: {'complainant_id': 'CM-20250908-KOJH-DF15-B', 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_unique_id': 'CM-20250908-KOJH-DF15-B'}
2025-09-08 10:30:55,973 - db_manager - DEBUG - query_keys at generate_query_string: dict_keys(['complainant_id', 'complainant_province', 'complainant_district', 'complainant_unique_id'])
2025-09-08 10:30:55,973 - db_manager - DEBUG - Generated query: INSERT INTO complainants (complainant_id, complainant_province, complainant_district, complainant_unique_id) VALUES (%s, %s, %s, %s)
2025-09-08 10:30:55,973 - db_manager - DEBUG - len of query_keys: 4
2025-09-08 10:30:55,974 - db_manager - DEBUG - Generated query: INSERT INTO complainants (complainant_id, complainant_province, complainant_district, complainant_unique_id) VALUES (%s, %s, %s, %s)
2025-09-08 10:30:55,974 - db_manager - INFO - Connecting to database: grievance_db
2025-09-08 10:30:55,981 - db_manager - INFO - Starting database transaction
2025-09-08 10:30:55,983 - db_manager - INFO - Transaction committed successfully
2025-09-08 10:30:55,983 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-08 10:30:55,983 - db_manager - INFO - create_complainant: Successfully created complainant with ID: CM-20250908-KOJH-DF15-B
2025-09-08 10:30:55,984 - db_manager - INFO - create_grievance: Creating grievance with data: {'grievance_id': 'GR-20250908-KOJH-BE5B-B', 'complainant_id': 'CM-20250908-KOJH-DF15-B', 'grievance_description': 'dust everywhere in the house\nKids are coughing a lot', 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_office': None, 'source': 'bot', 'complainant_unique_id': 'CM-20250908-KOJH-DF15-B'}
2025-09-08 10:30:55,984 - db_manager - INFO - create_grievance: Creating grievance with ID: GR-20250908-KOJH-BE5B-B
2025-09-08 10:30:55,984 - db_manager - DEBUG - query_keys at generate_query_string: dict_keys(['grievance_id', 'complainant_id', 'grievance_description', 'source'])
2025-09-08 10:30:55,984 - db_manager - DEBUG - Generated query: INSERT INTO grievances (grievance_id, complainant_id, grievance_description, source) VALUES (%s, %s, %s, %s) RETURNING grievance_id
2025-09-08 10:30:55,984 - db_manager - DEBUG - len of query_keys: 4
2025-09-08 10:30:55,984 - db_manager - DEBUG - Generated query: INSERT INTO grievances (grievance_id, complainant_id, grievance_description, source) VALUES (%s, %s, %s, %s) RETURNING grievance_id
2025-09-08 10:30:55,984 - db_manager - INFO - Connecting to database: grievance_db
2025-09-08 10:30:55,989 - db_manager - INFO - Starting database transaction
2025-09-08 10:30:55,993 - db_manager - INFO - Transaction committed successfully
2025-09-08 10:30:55,993 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-08 10:30:55,993 - db_manager - INFO - create_grievance: Successfully created grievance with ID: GR-20250908-KOJH-BE5B-B
2025-09-08 10:31:19,780 - db_manager - INFO - Connecting to database: grievance_db
2025-09-08 10:31:19,785 - db_manager - INFO - Starting database transaction
2025-09-08 10:31:19,785 - db_manager - INFO - Executing get_complainant_by_id: 
            SELECT complainant_id, complainant_unique_id, complainant_full_name,    complainant_pho...
2025-09-08 10:31:19,786 - db_manager - INFO - get_complainant_by_id completed in 0.01s. Rows: 1
2025-09-08 10:31:19,786 - db_manager - INFO - Transaction committed successfully
2025-09-08 10:31:19,786 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-08 10:31:19,787 - db_manager - INFO - Connecting to database: grievance_db
2025-09-08 10:31:19,791 - db_manager - INFO - Starting database transaction
2025-09-08 10:31:19,791 - db_manager - INFO - Executing get_grievance_by_id: 
                SELECT g.*, c.complainant_full_name, c.complainant_phone, c.complainant_email,
    ...
2025-09-08 10:31:19,793 - db_manager - INFO - get_grievance_by_id completed in 0.01s. Rows: 1
2025-09-08 10:31:19,793 - db_manager - INFO - Transaction committed successfully
2025-09-08 10:31:19,793 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-08 10:31:19,793 - db_manager - DEBUG - get_grievance_by_id: grievance_id: {'grievance_id': 'GR-20250908-KOJH-BE5B-B', 'complainant_id': 'CM-20250908-KOJH-DF15-B', 'grievance_categories': '{"Environmental - Air Pollution"}', 'grievance_summary': 'घरमा धूलो हरेक ठाउँमा छ। बालबालिका धेरै खोकि रहेका छन्।', 'grievance_description': 'dust everywhere in the house\nKids are coughing a lot', 'grievance_claimed_amount': None, 'grievance_location': None, 'language_code': 'en', 'classification_status': 'pending', 'grievance_creation_date': datetime.datetime(2025, 9, 8, 10, 30, 55, 989536, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'grievance_modification_date': datetime.datetime(2025, 9, 8, 10, 31, 0, 317136, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'is_temporary': True, 'source': 'bot', 'complainant_full_name': None, 'complainant_phone': None, 'complainant_email': None, 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_municipality': None, 'complainant_ward': None, 'complainant_village': None, 'complainant_address': None}, results: [{'grievance_id': 'GR-20250908-KOJH-BE5B-B', 'complainant_id': 'CM-20250908-KOJH-DF15-B', 'grievance_categories': '{"Environmental - Air Pollution"}', 'grievance_summary': 'घरमा धूलो हरेक ठाउँमा छ। बालबालिका धेरै खोकि रहेका छन्।', 'grievance_description': 'dust everywhere in the house\nKids are coughing a lot', 'grievance_claimed_amount': None, 'grievance_location': None, 'language_code': 'en', 'classification_status': 'pending', 'grievance_creation_date': datetime.datetime(2025, 9, 8, 10, 30, 55, 989536, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'grievance_modification_date': datetime.datetime(2025, 9, 8, 10, 31, 0, 317136, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'is_temporary': True, 'source': 'bot', 'complainant_full_name': None, 'complainant_phone': None, 'complainant_email': None, 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_municipality': None, 'complainant_ward': None, 'complainant_village': None, 'complainant_address': None}]
2025-09-08 10:31:19,793 - db_manager - INFO - update_complainant: Updating complainant with ID: CM-20250908-KOJH-DF15-B
2025-09-08 10:31:19,794 - db_manager - INFO - Connecting to database: grievance_db
2025-09-08 10:31:19,798 - db_manager - INFO - Starting database transaction
2025-09-08 10:31:19,798 - db_manager - INFO - Executing encrypt_field: SELECT encode(pgp_sym_encrypt(%s, %s), 'hex') AS encrypted...
2025-09-08 10:31:19,799 - db_manager - INFO - encrypt_field completed in 0.01s. Rows: 1
2025-09-08 10:31:19,799 - db_manager - INFO - Transaction committed successfully
2025-09-08 10:31:19,799 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-08 10:31:19,799 - db_manager - DEBUG - encrypted phone number Not provided at encrypt_complainant_data: c30d04070302121168d172394bf367d23d0186cd207500e4cd0539fa43b7422991e60bb91b7c7ea6c61e4cd0398366c969358c5d1df431f87518b053e0bdf33e65dd9b7c117c7cc636d72058f4b4
2025-09-08 10:31:19,799 - db_manager - INFO - Connecting to database: grievance_db
2025-09-08 10:31:19,803 - db_manager - INFO - Starting database transaction
2025-09-08 10:31:19,803 - db_manager - INFO - Executing encrypt_field: SELECT encode(pgp_sym_encrypt(%s, %s), 'hex') AS encrypted...
2025-09-08 10:31:19,804 - db_manager - INFO - encrypt_field completed in 0.01s. Rows: 1
2025-09-08 10:31:19,804 - db_manager - INFO - Transaction committed successfully
2025-09-08 10:31:19,805 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-08 10:31:19,805 - db_manager - INFO - Connecting to database: grievance_db
2025-09-08 10:31:19,809 - db_manager - INFO - Starting database transaction
2025-09-08 10:31:19,809 - db_manager - INFO - Executing encrypt_field: SELECT encode(pgp_sym_encrypt(%s, %s), 'hex') AS encrypted...
2025-09-08 10:31:19,810 - db_manager - INFO - encrypt_field completed in 0.01s. Rows: 1
2025-09-08 10:31:19,810 - db_manager - INFO - Transaction committed successfully
2025-09-08 10:31:19,810 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-08 10:31:19,810 - db_manager - DEBUG - phone number Not provided hashed to d83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f at hash_sensitive_data
2025-09-08 10:31:19,810 - db_manager - DEBUG - encrypted and hashed data at encrypt_and_hash_sensitive_data: {'complainant_full_name': 'c30d040703029fe20ccc0ed2c1f677d23d01fa41b1f1a4de5a5cadbf81877b5a7cc34d6f4d572cb4bbcbfb66ae481c34b35d31b47bbebc526200f9c0d974ec1a7f4ccc7ccb9c4dfd3e5a9fb7ec3a', 'complainant_phone': 'c30d04070302121168d172394bf367d23d0186cd207500e4cd0539fa43b7422991e60bb91b7c7ea6c61e4cd0398366c969358c5d1df431f87518b053e0bdf33e65dd9b7c117c7cc636d72058f4b4', 'complainant_email': 'c30d040703029e0cc07d736551627bd23d01179a74a748991bf6206519fdd9131c6f7310b2883a73f596cda0a4e838bdba4bbf5a6f8f87c8fd6ecac0414faec67809f8bf42cb6f1e58c9e7e77976', 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_phone_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'complainant_full_name_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'complainant_email_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f'}
2025-09-08 10:31:19,810 - db_manager - DEBUG - encrypted_data at update_complainant: {'complainant_full_name': 'c30d040703029fe20ccc0ed2c1f677d23d01fa41b1f1a4de5a5cadbf81877b5a7cc34d6f4d572cb4bbcbfb66ae481c34b35d31b47bbebc526200f9c0d974ec1a7f4ccc7ccb9c4dfd3e5a9fb7ec3a', 'complainant_phone': 'c30d04070302121168d172394bf367d23d0186cd207500e4cd0539fa43b7422991e60bb91b7c7ea6c61e4cd0398366c969358c5d1df431f87518b053e0bdf33e65dd9b7c117c7cc636d72058f4b4', 'complainant_email': 'c30d040703029e0cc07d736551627bd23d01179a74a748991bf6206519fdd9131c6f7310b2883a73f596cda0a4e838bdba4bbf5a6f8f87c8fd6ecac0414faec67809f8bf42cb6f1e58c9e7e77976', 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_phone_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'complainant_full_name_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'complainant_email_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f'}
2025-09-08 10:31:19,810 - db_manager - DEBUG - execute_update values: ('c30d040703029fe20ccc0ed2c1f677d23d01fa41b1f1a4de5a5cadbf81877b5a7cc34d6f4d572cb4bbcbfb66ae481c34b35d31b47bbebc526200f9c0d974ec1a7f4ccc7ccb9c4dfd3e5a9fb7ec3a', 'c30d04070302121168d172394bf367d23d0186cd207500e4cd0539fa43b7422991e60bb91b7c7ea6c61e4cd0398366c969358c5d1df431f87518b053e0bdf33e65dd9b7c117c7cc636d72058f4b4', 'c30d040703029e0cc07d736551627bd23d01179a74a748991bf6206519fdd9131c6f7310b2883a73f596cda0a4e838bdba4bbf5a6f8f87c8fd6ecac0414faec67809f8bf42cb6f1e58c9e7e77976', 'Koshi', 'Jhapa', 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'CM-20250908-KOJH-DF15-B')
2025-09-08 10:31:19,810 - db_manager - DEBUG - execute_update query: UPDATE complainants SET complainant_full_name = %s, complainant_phone = %s, complainant_email = %s, complainant_province = %s, complainant_district = %s, complainant_phone_hash = %s, complainant_full_name_hash = %s, complainant_email_hash = %s WHERE complainant_id = %s
2025-09-08 10:31:19,810 - db_manager - INFO - Connecting to database: grievance_db
2025-09-08 10:31:19,815 - db_manager - INFO - Starting database transaction
2025-09-08 10:31:19,815 - db_manager - INFO - execute_update: Executing update query: UPDATE complainants SET complainant_full_name = %s, complainant_phone = %s, complainant_email = %s, ...
2025-09-08 10:31:19,815 - db_manager - INFO - execute_update: Update completed in 0.01s. Affected rows: 1
2025-09-08 10:31:19,818 - db_manager - INFO - Transaction committed successfully
2025-09-08 10:31:19,818 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-08 10:31:19,818 - db_manager - INFO - Complainant updated in db: CM-20250908-KOJH-DF15-B
2025-09-08 10:31:19,818 - db_manager - INFO - update_grievance: Updating grievance with ID: GR-20250908-KOJH-BE5B-B
2025-09-08 10:31:19,818 - db_manager - DEBUG - execute_update values: ('dust everywhere in the house\nKids are coughing a lot', 'GR-20250908-KOJH-BE5B-B')
2025-09-08 10:31:19,818 - db_manager - DEBUG - execute_update query: 
                    UPDATE grievances 
                    SET grievance_description = %s, grievance_modification_date = CURRENT_TIMESTAMP
                    WHERE grievance_id = %s
                    RETURNING grievance_id
                
2025-09-08 10:31:19,818 - db_manager - INFO - Connecting to database: grievance_db
2025-09-08 10:31:19,823 - db_manager - INFO - Starting database transaction
2025-09-08 10:31:19,823 - db_manager - INFO - execute_update: Executing update query: 
                    UPDATE grievances 
                    SET grievance_description = %s, grievanc...
2025-09-08 10:31:19,824 - db_manager - INFO - execute_update: Update completed in 0.01s. Affected rows: 1
2025-09-08 10:31:19,826 - db_manager - INFO - Transaction committed successfully
2025-09-08 10:31:19,826 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-08 10:31:19,826 - db_manager - INFO - update_grievance: Updated grievance with ID: GR-20250908-KOJH-BE5B-B, rows affected: 1
2025-09-08 10:31:19,826 - db_manager - INFO - Grievance updated in db: GR-20250908-KOJH-BE5B-B
2025-09-08 10:31:19,827 - db_manager - INFO - Connecting to database: grievance_db
2025-09-08 10:31:19,831 - db_manager - INFO - Starting database transaction
2025-09-08 10:31:19,831 - db_manager - INFO - Executing get_grievance_files: 
            SELECT file_id, file_name, file_type, file_size, upload_timestamp
            FROM file...
2025-09-08 10:31:19,832 - db_manager - INFO - get_grievance_files completed in 0.01s. Rows: 0
2025-09-08 10:31:19,832 - db_manager - INFO - Transaction committed successfully
2025-09-08 10:31:19,833 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-08 10:31:19,833 - db_manager - INFO - Connecting to database: grievance_db
2025-09-08 10:31:19,838 - db_manager - INFO - Starting database transaction
2025-09-08 10:31:19,838 - db_manager - INFO - Executing get_grievance_files: 
            SELECT file_id, file_name, file_type, file_size, upload_timestamp
            FROM file...
2025-09-08 10:31:19,839 - db_manager - INFO - get_grievance_files completed in 0.01s. Rows: 0
2025-09-08 10:31:19,840 - db_manager - INFO - Transaction committed successfully
2025-09-08 10:31:19,840 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-08 10:31:19,882 - db_manager - INFO - Connecting to database: grievance_db
2025-09-08 10:31:19,887 - db_manager - INFO - Starting database transaction
2025-09-08 10:31:19,887 - db_manager - INFO - Executing get_grievance_by_id: 
                SELECT g.*, c.complainant_full_name, c.complainant_phone, c.complainant_email,
    ...
2025-09-08 10:31:19,889 - db_manager - INFO - get_grievance_by_id completed in 0.01s. Rows: 1
2025-09-08 10:31:19,889 - db_manager - INFO - Transaction committed successfully
2025-09-08 10:31:19,889 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-08 10:31:19,890 - db_manager - DEBUG - get_grievance_by_id: grievance_id: {'grievance_id': 'GR-20250908-KOJH-BE5B-B', 'complainant_id': 'CM-20250908-KOJH-DF15-B', 'grievance_categories': '{"Environmental - Air Pollution"}', 'grievance_summary': 'घरमा धूलो हरेक ठाउँमा छ। बालबालिका धेरै खोकि रहेका छन्।', 'grievance_description': 'dust everywhere in the house\nKids are coughing a lot', 'grievance_claimed_amount': None, 'grievance_location': None, 'language_code': 'en', 'classification_status': 'pending', 'grievance_creation_date': datetime.datetime(2025, 9, 8, 10, 30, 55, 989536, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'grievance_modification_date': datetime.datetime(2025, 9, 8, 10, 31, 19, 823568, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'is_temporary': True, 'source': 'bot', 'complainant_full_name': 'c30d040703029fe20ccc0ed2c1f677d23d01fa41b1f1a4de5a5cadbf81877b5a7cc34d6f4d572cb4bbcbfb66ae481c34b35d31b47bbebc526200f9c0d974ec1a7f4ccc7ccb9c4dfd3e5a9fb7ec3a', 'complainant_phone': 'c30d04070302121168d172394bf367d23d0186cd207500e4cd0539fa43b7422991e60bb91b7c7ea6c61e4cd0398366c969358c5d1df431f87518b053e0bdf33e65dd9b7c117c7cc636d72058f4b4', 'complainant_email': 'c30d040703029e0cc07d736551627bd23d01179a74a748991bf6206519fdd9131c6f7310b2883a73f596cda0a4e838bdba4bbf5a6f8f87c8fd6ecac0414faec67809f8bf42cb6f1e58c9e7e77976', 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_municipality': None, 'complainant_ward': None, 'complainant_village': None, 'complainant_address': None}, results: [{'grievance_id': 'GR-20250908-KOJH-BE5B-B', 'complainant_id': 'CM-20250908-KOJH-DF15-B', 'grievance_categories': '{"Environmental - Air Pollution"}', 'grievance_summary': 'घरमा धूलो हरेक ठाउँमा छ। बालबालिका धेरै खोकि रहेका छन्।', 'grievance_description': 'dust everywhere in the house\nKids are coughing a lot', 'grievance_claimed_amount': None, 'grievance_location': None, 'language_code': 'en', 'classification_status': 'pending', 'grievance_creation_date': datetime.datetime(2025, 9, 8, 10, 30, 55, 989536, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'grievance_modification_date': datetime.datetime(2025, 9, 8, 10, 31, 19, 823568, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'is_temporary': True, 'source': 'bot', 'complainant_full_name': 'c30d040703029fe20ccc0ed2c1f677d23d01fa41b1f1a4de5a5cadbf81877b5a7cc34d6f4d572cb4bbcbfb66ae481c34b35d31b47bbebc526200f9c0d974ec1a7f4ccc7ccb9c4dfd3e5a9fb7ec3a', 'complainant_phone': 'c30d04070302121168d172394bf367d23d0186cd207500e4cd0539fa43b7422991e60bb91b7c7ea6c61e4cd0398366c969358c5d1df431f87518b053e0bdf33e65dd9b7c117c7cc636d72058f4b4', 'complainant_email': 'c30d040703029e0cc07d736551627bd23d01179a74a748991bf6206519fdd9131c6f7310b2883a73f596cda0a4e838bdba4bbf5a6f8f87c8fd6ecac0414faec67809f8bf42cb6f1e58c9e7e77976', 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_municipality': None, 'complainant_ward': None, 'complainant_village': None, 'complainant_address': None}]
2025-09-08 10:37:14,206 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-08 10:37:14,206 - db_manager - INFO - Database manager initialized successfully
2025-09-08 10:37:14,206 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-08 10:37:14,206 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-08 10:37:14,207 - db_manager - INFO - Database manager initialized successfully
2025-09-08 10:37:14,207 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-08 10:37:14,207 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-08 10:37:14,207 - db_manager - INFO - Database manager initialized successfully
2025-09-08 10:37:14,207 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-08 10:37:14,207 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-08 10:37:14,207 - db_manager - INFO - Database manager initialized successfully
2025-09-08 10:37:14,207 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-08 10:37:14,208 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-08 10:37:14,208 - db_manager - INFO - Database manager initialized successfully
2025-09-08 10:37:14,208 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-08 10:37:14,208 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-08 10:37:14,208 - db_manager - INFO - Database manager initialized successfully
2025-09-08 10:37:14,208 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-08 10:37:14,208 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-08 10:37:14,208 - db_manager - INFO - Database manager initialized successfully
2025-09-08 10:37:14,208 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-08 10:37:14,208 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-08 10:37:14,208 - db_manager - INFO - Database manager initialized successfully
2025-09-08 10:37:14,208 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-08 10:37:14,208 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-08 10:37:14,208 - db_manager - INFO - Database manager initialized successfully
2025-09-08 10:37:14,208 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-08 10:37:14,208 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-08 10:37:14,208 - db_manager - INFO - Database manager initialized successfully
2025-09-08 10:37:14,208 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-08 10:38:29,029 - db_manager - INFO - create_complainant: Creating complainant with ID: CM-20250908-KOJH-A31D-B
2025-09-08 10:38:29,030 - db_manager - DEBUG - encrypted and hashed data at encrypt_and_hash_sensitive_data: {'complainant_id': 'CM-20250908-KOJH-A31D-B', 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_unique_id': 'CM-20250908-KOJH-A31D-B'}
2025-09-08 10:38:29,030 - db_manager - DEBUG - query_keys at generate_query_string: dict_keys(['complainant_id', 'complainant_province', 'complainant_district', 'complainant_unique_id'])
2025-09-08 10:38:29,030 - db_manager - DEBUG - Generated query: INSERT INTO complainants (complainant_id, complainant_province, complainant_district, complainant_unique_id) VALUES (%s, %s, %s, %s)
2025-09-08 10:38:29,030 - db_manager - DEBUG - len of query_keys: 4
2025-09-08 10:38:29,030 - db_manager - DEBUG - Generated query: INSERT INTO complainants (complainant_id, complainant_province, complainant_district, complainant_unique_id) VALUES (%s, %s, %s, %s)
2025-09-08 10:38:29,030 - db_manager - INFO - Connecting to database: grievance_db
2025-09-08 10:38:29,036 - db_manager - INFO - Starting database transaction
2025-09-08 10:38:29,038 - db_manager - INFO - Transaction committed successfully
2025-09-08 10:38:29,038 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-08 10:38:29,039 - db_manager - INFO - create_complainant: Successfully created complainant with ID: CM-20250908-KOJH-A31D-B
2025-09-08 10:38:29,039 - db_manager - INFO - create_grievance: Creating grievance with data: {'grievance_id': 'GR-20250908-KOJH-740B-B', 'complainant_id': 'CM-20250908-KOJH-A31D-B', 'grievance_description': 'dust everywhere in the house Kids are coughing a lot', 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_office': None, 'source': 'bot', 'complainant_unique_id': 'CM-20250908-KOJH-A31D-B'}
2025-09-08 10:38:29,039 - db_manager - INFO - create_grievance: Creating grievance with ID: GR-20250908-KOJH-740B-B
2025-09-08 10:38:29,039 - db_manager - DEBUG - query_keys at generate_query_string: dict_keys(['grievance_id', 'complainant_id', 'grievance_description', 'source'])
2025-09-08 10:38:29,039 - db_manager - DEBUG - Generated query: INSERT INTO grievances (grievance_id, complainant_id, grievance_description, source) VALUES (%s, %s, %s, %s) RETURNING grievance_id
2025-09-08 10:38:29,039 - db_manager - DEBUG - len of query_keys: 4
2025-09-08 10:38:29,039 - db_manager - DEBUG - Generated query: INSERT INTO grievances (grievance_id, complainant_id, grievance_description, source) VALUES (%s, %s, %s, %s) RETURNING grievance_id
2025-09-08 10:38:29,039 - db_manager - INFO - Connecting to database: grievance_db
2025-09-08 10:38:29,043 - db_manager - INFO - Starting database transaction
2025-09-08 10:38:29,047 - db_manager - INFO - Transaction committed successfully
2025-09-08 10:38:29,047 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-08 10:38:29,047 - db_manager - INFO - create_grievance: Successfully created grievance with ID: GR-20250908-KOJH-740B-B
2025-09-08 10:39:04,537 - db_manager - INFO - Connecting to database: grievance_db
2025-09-08 10:39:04,542 - db_manager - INFO - Starting database transaction
2025-09-08 10:39:04,543 - db_manager - INFO - Executing get_complainant_by_id: 
            SELECT complainant_id, complainant_unique_id, complainant_full_name,    complainant_pho...
2025-09-08 10:39:04,544 - db_manager - INFO - get_complainant_by_id completed in 0.01s. Rows: 1
2025-09-08 10:39:04,544 - db_manager - INFO - Transaction committed successfully
2025-09-08 10:39:04,544 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-08 10:39:04,544 - db_manager - INFO - Connecting to database: grievance_db
2025-09-08 10:39:04,550 - db_manager - INFO - Starting database transaction
2025-09-08 10:39:04,550 - db_manager - INFO - Executing get_grievance_by_id: 
                SELECT g.*, c.complainant_full_name, c.complainant_phone, c.complainant_email,
    ...
2025-09-08 10:39:04,551 - db_manager - INFO - get_grievance_by_id completed in 0.01s. Rows: 1
2025-09-08 10:39:04,552 - db_manager - INFO - Transaction committed successfully
2025-09-08 10:39:04,552 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-08 10:39:04,552 - db_manager - DEBUG - get_grievance_by_id: grievance_id: {'grievance_id': 'GR-20250908-KOJH-740B-B', 'complainant_id': 'CM-20250908-KOJH-A31D-B', 'grievance_categories': '{"Environmental - Air Pollution"}', 'grievance_summary': 'घरमा धूलो सबैभन्दा र बालबालिकाहरू धेरै खोकी लागेका छन्।', 'grievance_description': 'dust everywhere in the house Kids are coughing a lot', 'grievance_claimed_amount': None, 'grievance_location': None, 'language_code': 'en', 'classification_status': 'pending', 'grievance_creation_date': datetime.datetime(2025, 9, 8, 10, 38, 29, 44145, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'grievance_modification_date': datetime.datetime(2025, 9, 8, 10, 38, 32, 506837, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'is_temporary': True, 'source': 'bot', 'complainant_full_name': None, 'complainant_phone': None, 'complainant_email': None, 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_municipality': None, 'complainant_ward': None, 'complainant_village': None, 'complainant_address': None}, results: [{'grievance_id': 'GR-20250908-KOJH-740B-B', 'complainant_id': 'CM-20250908-KOJH-A31D-B', 'grievance_categories': '{"Environmental - Air Pollution"}', 'grievance_summary': 'घरमा धूलो सबैभन्दा र बालबालिकाहरू धेरै खोकी लागेका छन्।', 'grievance_description': 'dust everywhere in the house Kids are coughing a lot', 'grievance_claimed_amount': None, 'grievance_location': None, 'language_code': 'en', 'classification_status': 'pending', 'grievance_creation_date': datetime.datetime(2025, 9, 8, 10, 38, 29, 44145, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'grievance_modification_date': datetime.datetime(2025, 9, 8, 10, 38, 32, 506837, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'is_temporary': True, 'source': 'bot', 'complainant_full_name': None, 'complainant_phone': None, 'complainant_email': None, 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_municipality': None, 'complainant_ward': None, 'complainant_village': None, 'complainant_address': None}]
2025-09-08 10:39:04,552 - db_manager - INFO - update_complainant: Updating complainant with ID: CM-20250908-KOJH-A31D-B
2025-09-08 10:39:04,552 - db_manager - INFO - Connecting to database: grievance_db
2025-09-08 10:39:04,557 - db_manager - INFO - Starting database transaction
2025-09-08 10:39:04,557 - db_manager - INFO - Executing encrypt_field: SELECT encode(pgp_sym_encrypt(%s, %s), 'hex') AS encrypted...
2025-09-08 10:39:04,561 - db_manager - INFO - encrypt_field completed in 0.01s. Rows: 1
2025-09-08 10:39:04,561 - db_manager - INFO - Transaction committed successfully
2025-09-08 10:39:04,561 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-08 10:39:04,561 - db_manager - DEBUG - encrypted phone number Not provided at encrypt_complainant_data: c30d040703021832dd93c98ca4e776d23d018ba98a831cc4421c953116c698839c8da6f759ef11cd3d1d3de98f8fab8a49e208f63216299f49f27b0747e532c629b585b11449cfdf7c871e5fe259
2025-09-08 10:39:04,561 - db_manager - INFO - Connecting to database: grievance_db
2025-09-08 10:39:04,566 - db_manager - INFO - Starting database transaction
2025-09-08 10:39:04,566 - db_manager - INFO - Executing encrypt_field: SELECT encode(pgp_sym_encrypt(%s, %s), 'hex') AS encrypted...
2025-09-08 10:39:04,567 - db_manager - INFO - encrypt_field completed in 0.01s. Rows: 1
2025-09-08 10:39:04,567 - db_manager - INFO - Transaction committed successfully
2025-09-08 10:39:04,567 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-08 10:39:04,567 - db_manager - INFO - Connecting to database: grievance_db
2025-09-08 10:39:04,571 - db_manager - INFO - Starting database transaction
2025-09-08 10:39:04,571 - db_manager - INFO - Executing encrypt_field: SELECT encode(pgp_sym_encrypt(%s, %s), 'hex') AS encrypted...
2025-09-08 10:39:04,572 - db_manager - INFO - encrypt_field completed in 0.00s. Rows: 1
2025-09-08 10:39:04,572 - db_manager - INFO - Transaction committed successfully
2025-09-08 10:39:04,572 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-08 10:39:04,573 - db_manager - DEBUG - phone number Not provided hashed to d83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f at hash_sensitive_data
2025-09-08 10:39:04,573 - db_manager - DEBUG - encrypted and hashed data at encrypt_and_hash_sensitive_data: {'complainant_full_name': 'c30d04070302d41ce254e09283806ed23d01e1f18005c0cd0af5737b77c6de757be1db7d7649ae70abca1b84149f40b93c15bf74dfaca5e8b6a52405c83d1775fe1439585c2eb0c095dda4ba8f9a', 'complainant_phone': 'c30d040703021832dd93c98ca4e776d23d018ba98a831cc4421c953116c698839c8da6f759ef11cd3d1d3de98f8fab8a49e208f63216299f49f27b0747e532c629b585b11449cfdf7c871e5fe259', 'complainant_email': 'c30d04070302b4e6c809ad5801e972d23d0127483664d5a53dbc3e5b7a0a8adb7fe8f4f7ed928d0502888ba55a29a8b53d3b92a51332dc567c151e44146b068ba03928074aaa57449ce10f5ffbef', 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_phone_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'complainant_email_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'complainant_full_name_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f'}
2025-09-08 10:39:04,573 - db_manager - DEBUG - encrypted_data at update_complainant: {'complainant_full_name': 'c30d04070302d41ce254e09283806ed23d01e1f18005c0cd0af5737b77c6de757be1db7d7649ae70abca1b84149f40b93c15bf74dfaca5e8b6a52405c83d1775fe1439585c2eb0c095dda4ba8f9a', 'complainant_phone': 'c30d040703021832dd93c98ca4e776d23d018ba98a831cc4421c953116c698839c8da6f759ef11cd3d1d3de98f8fab8a49e208f63216299f49f27b0747e532c629b585b11449cfdf7c871e5fe259', 'complainant_email': 'c30d04070302b4e6c809ad5801e972d23d0127483664d5a53dbc3e5b7a0a8adb7fe8f4f7ed928d0502888ba55a29a8b53d3b92a51332dc567c151e44146b068ba03928074aaa57449ce10f5ffbef', 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_phone_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'complainant_email_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'complainant_full_name_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f'}
2025-09-08 10:39:04,573 - db_manager - DEBUG - execute_update values: ('c30d04070302d41ce254e09283806ed23d01e1f18005c0cd0af5737b77c6de757be1db7d7649ae70abca1b84149f40b93c15bf74dfaca5e8b6a52405c83d1775fe1439585c2eb0c095dda4ba8f9a', 'c30d040703021832dd93c98ca4e776d23d018ba98a831cc4421c953116c698839c8da6f759ef11cd3d1d3de98f8fab8a49e208f63216299f49f27b0747e532c629b585b11449cfdf7c871e5fe259', 'c30d04070302b4e6c809ad5801e972d23d0127483664d5a53dbc3e5b7a0a8adb7fe8f4f7ed928d0502888ba55a29a8b53d3b92a51332dc567c151e44146b068ba03928074aaa57449ce10f5ffbef', 'Koshi', 'Jhapa', 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'CM-20250908-KOJH-A31D-B')
2025-09-08 10:39:04,573 - db_manager - DEBUG - execute_update query: UPDATE complainants SET complainant_full_name = %s, complainant_phone = %s, complainant_email = %s, complainant_province = %s, complainant_district = %s, complainant_phone_hash = %s, complainant_email_hash = %s, complainant_full_name_hash = %s WHERE complainant_id = %s
2025-09-08 10:39:04,573 - db_manager - INFO - Connecting to database: grievance_db
2025-09-08 10:39:04,577 - db_manager - INFO - Starting database transaction
2025-09-08 10:39:04,577 - db_manager - INFO - execute_update: Executing update query: UPDATE complainants SET complainant_full_name = %s, complainant_phone = %s, complainant_email = %s, ...
2025-09-08 10:39:04,578 - db_manager - INFO - execute_update: Update completed in 0.01s. Affected rows: 1
2025-09-08 10:39:04,580 - db_manager - INFO - Transaction committed successfully
2025-09-08 10:39:04,580 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-08 10:39:04,580 - db_manager - INFO - Complainant updated in db: CM-20250908-KOJH-A31D-B
2025-09-08 10:39:04,580 - db_manager - INFO - update_grievance: Updating grievance with ID: GR-20250908-KOJH-740B-B
2025-09-08 10:39:04,580 - db_manager - DEBUG - execute_update values: ('dust everywhere in the house Kids are coughing a lot', 'GR-20250908-KOJH-740B-B')
2025-09-08 10:39:04,580 - db_manager - DEBUG - execute_update query: 
                    UPDATE grievances 
                    SET grievance_description = %s, grievance_modification_date = CURRENT_TIMESTAMP
                    WHERE grievance_id = %s
                    RETURNING grievance_id
                
2025-09-08 10:39:04,580 - db_manager - INFO - Connecting to database: grievance_db
2025-09-08 10:39:04,584 - db_manager - INFO - Starting database transaction
2025-09-08 10:39:04,585 - db_manager - INFO - execute_update: Executing update query: 
                    UPDATE grievances 
                    SET grievance_description = %s, grievanc...
2025-09-08 10:39:04,585 - db_manager - INFO - execute_update: Update completed in 0.01s. Affected rows: 1
2025-09-08 10:39:04,587 - db_manager - INFO - Transaction committed successfully
2025-09-08 10:39:04,587 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-08 10:39:04,588 - db_manager - INFO - update_grievance: Updated grievance with ID: GR-20250908-KOJH-740B-B, rows affected: 1
2025-09-08 10:39:04,588 - db_manager - INFO - Grievance updated in db: GR-20250908-KOJH-740B-B
2025-09-08 10:39:04,588 - db_manager - INFO - Connecting to database: grievance_db
2025-09-08 10:39:04,592 - db_manager - INFO - Starting database transaction
2025-09-08 10:39:04,592 - db_manager - INFO - Executing get_grievance_files: 
            SELECT file_id, file_name, file_type, file_size, upload_timestamp
            FROM file...
2025-09-08 10:39:04,593 - db_manager - INFO - get_grievance_files completed in 0.01s. Rows: 0
2025-09-08 10:39:04,594 - db_manager - INFO - Transaction committed successfully
2025-09-08 10:39:04,594 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-08 10:39:04,594 - db_manager - INFO - Connecting to database: grievance_db
2025-09-08 10:39:04,598 - db_manager - INFO - Starting database transaction
2025-09-08 10:39:04,598 - db_manager - INFO - Executing get_grievance_files: 
            SELECT file_id, file_name, file_type, file_size, upload_timestamp
            FROM file...
2025-09-08 10:39:04,599 - db_manager - INFO - get_grievance_files completed in 0.01s. Rows: 0
2025-09-08 10:39:04,599 - db_manager - INFO - Transaction committed successfully
2025-09-08 10:39:04,600 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-08 10:39:04,641 - db_manager - INFO - Connecting to database: grievance_db
2025-09-08 10:39:04,646 - db_manager - INFO - Starting database transaction
2025-09-08 10:39:04,646 - db_manager - INFO - Executing get_grievance_by_id: 
                SELECT g.*, c.complainant_full_name, c.complainant_phone, c.complainant_email,
    ...
2025-09-08 10:39:04,648 - db_manager - INFO - get_grievance_by_id completed in 0.01s. Rows: 1
2025-09-08 10:39:04,648 - db_manager - INFO - Transaction committed successfully
2025-09-08 10:39:04,648 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-08 10:39:04,649 - db_manager - DEBUG - get_grievance_by_id: grievance_id: {'grievance_id': 'GR-20250908-KOJH-740B-B', 'complainant_id': 'CM-20250908-KOJH-A31D-B', 'grievance_categories': '{"Environmental - Air Pollution"}', 'grievance_summary': 'घरमा धूलो सबैभन्दा र बालबालिकाहरू धेरै खोकी लागेका छन्।', 'grievance_description': 'dust everywhere in the house Kids are coughing a lot', 'grievance_claimed_amount': None, 'grievance_location': None, 'language_code': 'en', 'classification_status': 'pending', 'grievance_creation_date': datetime.datetime(2025, 9, 8, 10, 38, 29, 44145, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'grievance_modification_date': datetime.datetime(2025, 9, 8, 10, 39, 4, 585110, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'is_temporary': True, 'source': 'bot', 'complainant_full_name': 'c30d04070302d41ce254e09283806ed23d01e1f18005c0cd0af5737b77c6de757be1db7d7649ae70abca1b84149f40b93c15bf74dfaca5e8b6a52405c83d1775fe1439585c2eb0c095dda4ba8f9a', 'complainant_phone': 'c30d040703021832dd93c98ca4e776d23d018ba98a831cc4421c953116c698839c8da6f759ef11cd3d1d3de98f8fab8a49e208f63216299f49f27b0747e532c629b585b11449cfdf7c871e5fe259', 'complainant_email': 'c30d04070302b4e6c809ad5801e972d23d0127483664d5a53dbc3e5b7a0a8adb7fe8f4f7ed928d0502888ba55a29a8b53d3b92a51332dc567c151e44146b068ba03928074aaa57449ce10f5ffbef', 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_municipality': None, 'complainant_ward': None, 'complainant_village': None, 'complainant_address': None}, results: [{'grievance_id': 'GR-20250908-KOJH-740B-B', 'complainant_id': 'CM-20250908-KOJH-A31D-B', 'grievance_categories': '{"Environmental - Air Pollution"}', 'grievance_summary': 'घरमा धूलो सबैभन्दा र बालबालिकाहरू धेरै खोकी लागेका छन्।', 'grievance_description': 'dust everywhere in the house Kids are coughing a lot', 'grievance_claimed_amount': None, 'grievance_location': None, 'language_code': 'en', 'classification_status': 'pending', 'grievance_creation_date': datetime.datetime(2025, 9, 8, 10, 38, 29, 44145, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'grievance_modification_date': datetime.datetime(2025, 9, 8, 10, 39, 4, 585110, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'is_temporary': True, 'source': 'bot', 'complainant_full_name': 'c30d04070302d41ce254e09283806ed23d01e1f18005c0cd0af5737b77c6de757be1db7d7649ae70abca1b84149f40b93c15bf74dfaca5e8b6a52405c83d1775fe1439585c2eb0c095dda4ba8f9a', 'complainant_phone': 'c30d040703021832dd93c98ca4e776d23d018ba98a831cc4421c953116c698839c8da6f759ef11cd3d1d3de98f8fab8a49e208f63216299f49f27b0747e532c629b585b11449cfdf7c871e5fe259', 'complainant_email': 'c30d04070302b4e6c809ad5801e972d23d0127483664d5a53dbc3e5b7a0a8adb7fe8f4f7ed928d0502888ba55a29a8b53d3b92a51332dc567c151e44146b068ba03928074aaa57449ce10f5ffbef', 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_municipality': None, 'complainant_ward': None, 'complainant_village': None, 'complainant_address': None}]
2025-09-08 10:39:34,664 - db_manager - INFO - create_complainant: Creating complainant with ID: CM-20250908-KOJH-8820-B
2025-09-08 10:39:34,664 - db_manager - DEBUG - encrypted and hashed data at encrypt_and_hash_sensitive_data: {'complainant_id': 'CM-20250908-KOJH-8820-B', 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_unique_id': 'CM-20250908-KOJH-8820-B'}
2025-09-08 10:39:34,664 - db_manager - DEBUG - query_keys at generate_query_string: dict_keys(['complainant_id', 'complainant_province', 'complainant_district', 'complainant_unique_id'])
2025-09-08 10:39:34,665 - db_manager - DEBUG - Generated query: INSERT INTO complainants (complainant_id, complainant_province, complainant_district, complainant_unique_id) VALUES (%s, %s, %s, %s)
2025-09-08 10:39:34,665 - db_manager - DEBUG - len of query_keys: 4
2025-09-08 10:39:34,665 - db_manager - DEBUG - Generated query: INSERT INTO complainants (complainant_id, complainant_province, complainant_district, complainant_unique_id) VALUES (%s, %s, %s, %s)
2025-09-08 10:39:34,665 - db_manager - INFO - Connecting to database: grievance_db
2025-09-08 10:39:34,670 - db_manager - INFO - Starting database transaction
2025-09-08 10:39:34,672 - db_manager - INFO - Transaction committed successfully
2025-09-08 10:39:34,672 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-08 10:39:34,672 - db_manager - INFO - create_complainant: Successfully created complainant with ID: CM-20250908-KOJH-8820-B
2025-09-08 10:39:34,672 - db_manager - INFO - create_grievance: Creating grievance with data: {'grievance_id': 'GR-20250908-KOJH-DAAD-B', 'complainant_id': 'CM-20250908-KOJH-8820-B', 'grievance_description': 'dust everywhere in the house Kids are coughing a lot', 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_office': None, 'source': 'bot', 'complainant_unique_id': 'CM-20250908-KOJH-8820-B'}
2025-09-08 10:39:34,672 - db_manager - INFO - create_grievance: Creating grievance with ID: GR-20250908-KOJH-DAAD-B
2025-09-08 10:39:34,672 - db_manager - DEBUG - query_keys at generate_query_string: dict_keys(['grievance_id', 'complainant_id', 'grievance_description', 'source'])
2025-09-08 10:39:34,672 - db_manager - DEBUG - Generated query: INSERT INTO grievances (grievance_id, complainant_id, grievance_description, source) VALUES (%s, %s, %s, %s) RETURNING grievance_id
2025-09-08 10:39:34,672 - db_manager - DEBUG - len of query_keys: 4
2025-09-08 10:39:34,673 - db_manager - DEBUG - Generated query: INSERT INTO grievances (grievance_id, complainant_id, grievance_description, source) VALUES (%s, %s, %s, %s) RETURNING grievance_id
2025-09-08 10:39:34,673 - db_manager - INFO - Connecting to database: grievance_db
2025-09-08 10:39:34,677 - db_manager - INFO - Starting database transaction
2025-09-08 10:39:34,681 - db_manager - INFO - Transaction committed successfully
2025-09-08 10:39:34,681 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-08 10:39:34,681 - db_manager - INFO - create_grievance: Successfully created grievance with ID: GR-20250908-KOJH-DAAD-B
2025-09-08 10:39:58,440 - db_manager - INFO - Connecting to database: grievance_db
2025-09-08 10:39:58,445 - db_manager - INFO - Starting database transaction
2025-09-08 10:39:58,445 - db_manager - INFO - Executing get_complainant_by_id: 
            SELECT complainant_id, complainant_unique_id, complainant_full_name,    complainant_pho...
2025-09-08 10:39:58,447 - db_manager - INFO - get_complainant_by_id completed in 0.01s. Rows: 1
2025-09-08 10:39:58,447 - db_manager - INFO - Transaction committed successfully
2025-09-08 10:39:58,447 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-08 10:39:58,447 - db_manager - INFO - Connecting to database: grievance_db
2025-09-08 10:39:58,452 - db_manager - INFO - Starting database transaction
2025-09-08 10:39:58,452 - db_manager - INFO - Executing get_grievance_by_id: 
                SELECT g.*, c.complainant_full_name, c.complainant_phone, c.complainant_email,
    ...
2025-09-08 10:39:58,453 - db_manager - INFO - get_grievance_by_id completed in 0.01s. Rows: 1
2025-09-08 10:39:58,454 - db_manager - INFO - Transaction committed successfully
2025-09-08 10:39:58,454 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-08 10:39:58,454 - db_manager - DEBUG - get_grievance_by_id: grievance_id: {'grievance_id': 'GR-20250908-KOJH-DAAD-B', 'complainant_id': 'CM-20250908-KOJH-8820-B', 'grievance_categories': '{"Environmental - Air Pollution"}', 'grievance_summary': 'घरमा धूलो सबैभन्दा छ, बच्चाहरु धेरै खोकने गर्दछन्।', 'grievance_description': 'dust everywhere in the house Kids are coughing a lot', 'grievance_claimed_amount': None, 'grievance_location': None, 'language_code': 'en', 'classification_status': 'pending', 'grievance_creation_date': datetime.datetime(2025, 9, 8, 10, 39, 34, 677702, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'grievance_modification_date': datetime.datetime(2025, 9, 8, 10, 39, 37, 565315, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'is_temporary': True, 'source': 'bot', 'complainant_full_name': None, 'complainant_phone': None, 'complainant_email': None, 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_municipality': None, 'complainant_ward': None, 'complainant_village': None, 'complainant_address': None}, results: [{'grievance_id': 'GR-20250908-KOJH-DAAD-B', 'complainant_id': 'CM-20250908-KOJH-8820-B', 'grievance_categories': '{"Environmental - Air Pollution"}', 'grievance_summary': 'घरमा धूलो सबैभन्दा छ, बच्चाहरु धेरै खोकने गर्दछन्।', 'grievance_description': 'dust everywhere in the house Kids are coughing a lot', 'grievance_claimed_amount': None, 'grievance_location': None, 'language_code': 'en', 'classification_status': 'pending', 'grievance_creation_date': datetime.datetime(2025, 9, 8, 10, 39, 34, 677702, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'grievance_modification_date': datetime.datetime(2025, 9, 8, 10, 39, 37, 565315, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'is_temporary': True, 'source': 'bot', 'complainant_full_name': None, 'complainant_phone': None, 'complainant_email': None, 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_municipality': None, 'complainant_ward': None, 'complainant_village': None, 'complainant_address': None}]
2025-09-08 10:39:58,454 - db_manager - INFO - update_complainant: Updating complainant with ID: CM-20250908-KOJH-8820-B
2025-09-08 10:39:58,454 - db_manager - INFO - Connecting to database: grievance_db
2025-09-08 10:39:58,459 - db_manager - INFO - Starting database transaction
2025-09-08 10:39:58,459 - db_manager - INFO - Executing encrypt_field: SELECT encode(pgp_sym_encrypt(%s, %s), 'hex') AS encrypted...
2025-09-08 10:39:58,460 - db_manager - INFO - encrypt_field completed in 0.01s. Rows: 1
2025-09-08 10:39:58,460 - db_manager - INFO - Transaction committed successfully
2025-09-08 10:39:58,460 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-08 10:39:58,460 - db_manager - DEBUG - encrypted phone number Not provided at encrypt_complainant_data: c30d040703027c820d282aed4b7873d23d01576e299c9d65fabf1efd5c37ee17f9d95568eebb9b93e91e06e91652c9c6bf4a59e6c8b946d9490268e60814e5882c62c5e14660d332010d0fe74276
2025-09-08 10:39:58,460 - db_manager - INFO - Connecting to database: grievance_db
2025-09-08 10:39:58,464 - db_manager - INFO - Starting database transaction
2025-09-08 10:39:58,464 - db_manager - INFO - Executing encrypt_field: SELECT encode(pgp_sym_encrypt(%s, %s), 'hex') AS encrypted...
2025-09-08 10:39:58,465 - db_manager - INFO - encrypt_field completed in 0.00s. Rows: 1
2025-09-08 10:39:58,465 - db_manager - INFO - Transaction committed successfully
2025-09-08 10:39:58,465 - db_manager - INFO - Database connection closed. Duration: 0.00s
2025-09-08 10:39:58,465 - db_manager - INFO - Connecting to database: grievance_db
2025-09-08 10:39:58,469 - db_manager - INFO - Starting database transaction
2025-09-08 10:39:58,469 - db_manager - INFO - Executing encrypt_field: SELECT encode(pgp_sym_encrypt(%s, %s), 'hex') AS encrypted...
2025-09-08 10:39:58,470 - db_manager - INFO - encrypt_field completed in 0.01s. Rows: 1
2025-09-08 10:39:58,471 - db_manager - INFO - Transaction committed successfully
2025-09-08 10:39:58,471 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-08 10:39:58,471 - db_manager - DEBUG - phone number Not provided hashed to d83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f at hash_sensitive_data
2025-09-08 10:39:58,471 - db_manager - DEBUG - encrypted and hashed data at encrypt_and_hash_sensitive_data: {'complainant_full_name': 'c30d0407030295225d884227f39e7ad23d0123efabb32d43f8878e9ad4e709525e469da56be488c7f37feb8e61c23dbd059fe756f87c6d17417991bded312c3c47f7a98aa308523eed8b2ce78841', 'complainant_phone': 'c30d040703027c820d282aed4b7873d23d01576e299c9d65fabf1efd5c37ee17f9d95568eebb9b93e91e06e91652c9c6bf4a59e6c8b946d9490268e60814e5882c62c5e14660d332010d0fe74276', 'complainant_email': 'c30d04070302a95d2343297990db61d23d014a7c0206d5de40221291fefc60bc56c0a62de02b18ce2b251568519c00198504653c74576f23f1890b4ba9456fe31aa0cd8e32076a6b5c4c5adf08c9', 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_phone_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'complainant_email_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'complainant_full_name_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f'}
2025-09-08 10:39:58,471 - db_manager - DEBUG - encrypted_data at update_complainant: {'complainant_full_name': 'c30d0407030295225d884227f39e7ad23d0123efabb32d43f8878e9ad4e709525e469da56be488c7f37feb8e61c23dbd059fe756f87c6d17417991bded312c3c47f7a98aa308523eed8b2ce78841', 'complainant_phone': 'c30d040703027c820d282aed4b7873d23d01576e299c9d65fabf1efd5c37ee17f9d95568eebb9b93e91e06e91652c9c6bf4a59e6c8b946d9490268e60814e5882c62c5e14660d332010d0fe74276', 'complainant_email': 'c30d04070302a95d2343297990db61d23d014a7c0206d5de40221291fefc60bc56c0a62de02b18ce2b251568519c00198504653c74576f23f1890b4ba9456fe31aa0cd8e32076a6b5c4c5adf08c9', 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_phone_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'complainant_email_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'complainant_full_name_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f'}
2025-09-08 10:39:58,471 - db_manager - DEBUG - execute_update values: ('c30d0407030295225d884227f39e7ad23d0123efabb32d43f8878e9ad4e709525e469da56be488c7f37feb8e61c23dbd059fe756f87c6d17417991bded312c3c47f7a98aa308523eed8b2ce78841', 'c30d040703027c820d282aed4b7873d23d01576e299c9d65fabf1efd5c37ee17f9d95568eebb9b93e91e06e91652c9c6bf4a59e6c8b946d9490268e60814e5882c62c5e14660d332010d0fe74276', 'c30d04070302a95d2343297990db61d23d014a7c0206d5de40221291fefc60bc56c0a62de02b18ce2b251568519c00198504653c74576f23f1890b4ba9456fe31aa0cd8e32076a6b5c4c5adf08c9', 'Koshi', 'Jhapa', 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'CM-20250908-KOJH-8820-B')
2025-09-08 10:39:58,471 - db_manager - DEBUG - execute_update query: UPDATE complainants SET complainant_full_name = %s, complainant_phone = %s, complainant_email = %s, complainant_province = %s, complainant_district = %s, complainant_phone_hash = %s, complainant_email_hash = %s, complainant_full_name_hash = %s WHERE complainant_id = %s
2025-09-08 10:39:58,471 - db_manager - INFO - Connecting to database: grievance_db
2025-09-08 10:39:58,476 - db_manager - INFO - Starting database transaction
2025-09-08 10:39:58,476 - db_manager - INFO - execute_update: Executing update query: UPDATE complainants SET complainant_full_name = %s, complainant_phone = %s, complainant_email = %s, ...
2025-09-08 10:39:58,477 - db_manager - INFO - execute_update: Update completed in 0.01s. Affected rows: 1
2025-09-08 10:39:58,479 - db_manager - INFO - Transaction committed successfully
2025-09-08 10:39:58,479 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-08 10:39:58,480 - db_manager - INFO - Complainant updated in db: CM-20250908-KOJH-8820-B
2025-09-08 10:39:58,480 - db_manager - INFO - update_grievance: Updating grievance with ID: GR-20250908-KOJH-DAAD-B
2025-09-08 10:39:58,480 - db_manager - DEBUG - execute_update values: ('dust everywhere in the house Kids are coughing a lot', 'GR-20250908-KOJH-DAAD-B')
2025-09-08 10:39:58,480 - db_manager - DEBUG - execute_update query: 
                    UPDATE grievances 
                    SET grievance_description = %s, grievance_modification_date = CURRENT_TIMESTAMP
                    WHERE grievance_id = %s
                    RETURNING grievance_id
                
2025-09-08 10:39:58,480 - db_manager - INFO - Connecting to database: grievance_db
2025-09-08 10:39:58,484 - db_manager - INFO - Starting database transaction
2025-09-08 10:39:58,484 - db_manager - INFO - execute_update: Executing update query: 
                    UPDATE grievances 
                    SET grievance_description = %s, grievanc...
2025-09-08 10:39:58,485 - db_manager - INFO - execute_update: Update completed in 0.01s. Affected rows: 1
2025-09-08 10:39:58,487 - db_manager - INFO - Transaction committed successfully
2025-09-08 10:39:58,487 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-08 10:39:58,488 - db_manager - INFO - update_grievance: Updated grievance with ID: GR-20250908-KOJH-DAAD-B, rows affected: 1
2025-09-08 10:39:58,488 - db_manager - INFO - Grievance updated in db: GR-20250908-KOJH-DAAD-B
2025-09-08 10:39:58,488 - db_manager - INFO - Connecting to database: grievance_db
2025-09-08 10:39:58,492 - db_manager - INFO - Starting database transaction
2025-09-08 10:39:58,492 - db_manager - INFO - Executing get_grievance_files: 
            SELECT file_id, file_name, file_type, file_size, upload_timestamp
            FROM file...
2025-09-08 10:39:58,493 - db_manager - INFO - get_grievance_files completed in 0.01s. Rows: 0
2025-09-08 10:39:58,493 - db_manager - INFO - Transaction committed successfully
2025-09-08 10:39:58,493 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-08 10:39:58,493 - db_manager - INFO - Connecting to database: grievance_db
2025-09-08 10:39:58,497 - db_manager - INFO - Starting database transaction
2025-09-08 10:39:58,497 - db_manager - INFO - Executing get_grievance_files: 
            SELECT file_id, file_name, file_type, file_size, upload_timestamp
            FROM file...
2025-09-08 10:39:58,498 - db_manager - INFO - get_grievance_files completed in 0.01s. Rows: 0
2025-09-08 10:39:58,499 - db_manager - INFO - Transaction committed successfully
2025-09-08 10:39:58,499 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-08 10:39:58,539 - db_manager - INFO - Connecting to database: grievance_db
2025-09-08 10:39:58,544 - db_manager - INFO - Starting database transaction
2025-09-08 10:39:58,544 - db_manager - INFO - Executing get_grievance_by_id: 
                SELECT g.*, c.complainant_full_name, c.complainant_phone, c.complainant_email,
    ...
2025-09-08 10:39:58,545 - db_manager - INFO - get_grievance_by_id completed in 0.01s. Rows: 1
2025-09-08 10:39:58,546 - db_manager - INFO - Transaction committed successfully
2025-09-08 10:39:58,546 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-08 10:39:58,546 - db_manager - DEBUG - get_grievance_by_id: grievance_id: {'grievance_id': 'GR-20250908-KOJH-DAAD-B', 'complainant_id': 'CM-20250908-KOJH-8820-B', 'grievance_categories': '{"Environmental - Air Pollution"}', 'grievance_summary': 'घरमा धूलो सबैभन्दा छ, बच्चाहरु धेरै खोकने गर्दछन्।', 'grievance_description': 'dust everywhere in the house Kids are coughing a lot', 'grievance_claimed_amount': None, 'grievance_location': None, 'language_code': 'en', 'classification_status': 'pending', 'grievance_creation_date': datetime.datetime(2025, 9, 8, 10, 39, 34, 677702, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'grievance_modification_date': datetime.datetime(2025, 9, 8, 10, 39, 58, 484874, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'is_temporary': True, 'source': 'bot', 'complainant_full_name': 'c30d0407030295225d884227f39e7ad23d0123efabb32d43f8878e9ad4e709525e469da56be488c7f37feb8e61c23dbd059fe756f87c6d17417991bded312c3c47f7a98aa308523eed8b2ce78841', 'complainant_phone': 'c30d040703027c820d282aed4b7873d23d01576e299c9d65fabf1efd5c37ee17f9d95568eebb9b93e91e06e91652c9c6bf4a59e6c8b946d9490268e60814e5882c62c5e14660d332010d0fe74276', 'complainant_email': 'c30d04070302a95d2343297990db61d23d014a7c0206d5de40221291fefc60bc56c0a62de02b18ce2b251568519c00198504653c74576f23f1890b4ba9456fe31aa0cd8e32076a6b5c4c5adf08c9', 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_municipality': None, 'complainant_ward': None, 'complainant_village': None, 'complainant_address': None}, results: [{'grievance_id': 'GR-20250908-KOJH-DAAD-B', 'complainant_id': 'CM-20250908-KOJH-8820-B', 'grievance_categories': '{"Environmental - Air Pollution"}', 'grievance_summary': 'घरमा धूलो सबैभन्दा छ, बच्चाहरु धेरै खोकने गर्दछन्।', 'grievance_description': 'dust everywhere in the house Kids are coughing a lot', 'grievance_claimed_amount': None, 'grievance_location': None, 'language_code': 'en', 'classification_status': 'pending', 'grievance_creation_date': datetime.datetime(2025, 9, 8, 10, 39, 34, 677702, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'grievance_modification_date': datetime.datetime(2025, 9, 8, 10, 39, 58, 484874, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'is_temporary': True, 'source': 'bot', 'complainant_full_name': 'c30d0407030295225d884227f39e7ad23d0123efabb32d43f8878e9ad4e709525e469da56be488c7f37feb8e61c23dbd059fe756f87c6d17417991bded312c3c47f7a98aa308523eed8b2ce78841', 'complainant_phone': 'c30d040703027c820d282aed4b7873d23d01576e299c9d65fabf1efd5c37ee17f9d95568eebb9b93e91e06e91652c9c6bf4a59e6c8b946d9490268e60814e5882c62c5e14660d332010d0fe74276', 'complainant_email': 'c30d04070302a95d2343297990db61d23d014a7c0206d5de40221291fefc60bc56c0a62de02b18ce2b251568519c00198504653c74576f23f1890b4ba9456fe31aa0cd8e32076a6b5c4c5adf08c9', 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_municipality': None, 'complainant_ward': None, 'complainant_village': None, 'complainant_address': None}]
2025-09-08 10:44:45,599 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-08 10:44:45,599 - db_manager - INFO - Database manager initialized successfully
2025-09-08 10:44:45,599 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-08 10:44:45,599 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-08 10:44:45,599 - db_manager - INFO - Database manager initialized successfully
2025-09-08 10:44:45,599 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-08 10:44:45,600 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-08 10:44:45,600 - db_manager - INFO - Database manager initialized successfully
2025-09-08 10:44:45,600 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-08 10:44:45,600 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-08 10:44:45,600 - db_manager - INFO - Database manager initialized successfully
2025-09-08 10:44:45,600 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-08 10:44:45,600 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-08 10:44:45,600 - db_manager - INFO - Database manager initialized successfully
2025-09-08 10:44:45,600 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-08 10:44:45,600 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-08 10:44:45,600 - db_manager - INFO - Database manager initialized successfully
2025-09-08 10:44:45,600 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-08 10:44:45,600 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-08 10:44:45,600 - db_manager - INFO - Database manager initialized successfully
2025-09-08 10:44:45,600 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-08 10:44:45,600 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-08 10:44:45,600 - db_manager - INFO - Database manager initialized successfully
2025-09-08 10:44:45,600 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-08 10:44:45,600 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-08 10:44:45,600 - db_manager - INFO - Database manager initialized successfully
2025-09-08 10:44:45,600 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-08 10:44:45,600 - db_manager - INFO - Database parameters: {'host': 'localhost', 'database': 'grievance_db', 'user': 'nepal_grievance_admin', 'password': 'K9!mP2$vL5nX8&qR4jW7', 'port': '5432'}
2025-09-08 10:44:45,600 - db_manager - INFO - Database manager initialized successfully
2025-09-08 10:44:45,600 - db_manager - INFO - Encryption enabled for sensitive fields
2025-09-08 10:45:29,663 - db_manager - INFO - create_complainant: Creating complainant with ID: CM-20250908-KOJH-2D2D-B
2025-09-08 10:45:29,663 - db_manager - DEBUG - encrypted and hashed data at encrypt_and_hash_sensitive_data: {'complainant_id': 'CM-20250908-KOJH-2D2D-B', 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_unique_id': 'CM-20250908-KOJH-2D2D-B'}
2025-09-08 10:45:29,663 - db_manager - DEBUG - query_keys at generate_query_string: dict_keys(['complainant_id', 'complainant_province', 'complainant_district', 'complainant_unique_id'])
2025-09-08 10:45:29,663 - db_manager - DEBUG - Generated query: INSERT INTO complainants (complainant_id, complainant_province, complainant_district, complainant_unique_id) VALUES (%s, %s, %s, %s)
2025-09-08 10:45:29,663 - db_manager - DEBUG - len of query_keys: 4
2025-09-08 10:45:29,663 - db_manager - DEBUG - Generated query: INSERT INTO complainants (complainant_id, complainant_province, complainant_district, complainant_unique_id) VALUES (%s, %s, %s, %s)
2025-09-08 10:45:29,663 - db_manager - INFO - Connecting to database: grievance_db
2025-09-08 10:45:29,669 - db_manager - INFO - Starting database transaction
2025-09-08 10:45:29,672 - db_manager - INFO - Transaction committed successfully
2025-09-08 10:45:29,672 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-08 10:45:29,672 - db_manager - INFO - create_complainant: Successfully created complainant with ID: CM-20250908-KOJH-2D2D-B
2025-09-08 10:45:29,672 - db_manager - INFO - create_grievance: Creating grievance with data: {'grievance_id': 'GR-20250908-KOJH-A9F5-B', 'complainant_id': 'CM-20250908-KOJH-2D2D-B', 'grievance_description': 'dust everywhere in the house Kids are coughing a lot', 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_office': None, 'source': 'bot', 'complainant_unique_id': 'CM-20250908-KOJH-2D2D-B'}
2025-09-08 10:45:29,672 - db_manager - INFO - create_grievance: Creating grievance with ID: GR-20250908-KOJH-A9F5-B
2025-09-08 10:45:29,672 - db_manager - DEBUG - query_keys at generate_query_string: dict_keys(['grievance_id', 'complainant_id', 'grievance_description', 'source'])
2025-09-08 10:45:29,672 - db_manager - DEBUG - Generated query: INSERT INTO grievances (grievance_id, complainant_id, grievance_description, source) VALUES (%s, %s, %s, %s) RETURNING grievance_id
2025-09-08 10:45:29,673 - db_manager - DEBUG - len of query_keys: 4
2025-09-08 10:45:29,673 - db_manager - DEBUG - Generated query: INSERT INTO grievances (grievance_id, complainant_id, grievance_description, source) VALUES (%s, %s, %s, %s) RETURNING grievance_id
2025-09-08 10:45:29,673 - db_manager - INFO - Connecting to database: grievance_db
2025-09-08 10:45:29,677 - db_manager - INFO - Starting database transaction
2025-09-08 10:45:29,681 - db_manager - INFO - Transaction committed successfully
2025-09-08 10:45:29,682 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-08 10:45:29,682 - db_manager - INFO - create_grievance: Successfully created grievance with ID: GR-20250908-KOJH-A9F5-B
2025-09-08 10:46:08,350 - db_manager - INFO - Connecting to database: grievance_db
2025-09-08 10:46:08,355 - db_manager - INFO - Starting database transaction
2025-09-08 10:46:08,355 - db_manager - INFO - Executing get_complainant_by_id: 
            SELECT complainant_id, complainant_unique_id, complainant_full_name,    complainant_pho...
2025-09-08 10:46:08,356 - db_manager - INFO - get_complainant_by_id completed in 0.01s. Rows: 1
2025-09-08 10:46:08,356 - db_manager - INFO - Transaction committed successfully
2025-09-08 10:46:08,356 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-08 10:46:08,356 - db_manager - INFO - Connecting to database: grievance_db
2025-09-08 10:46:08,361 - db_manager - INFO - Starting database transaction
2025-09-08 10:46:08,361 - db_manager - INFO - Executing get_grievance_by_id: 
                SELECT g.*, c.complainant_full_name, c.complainant_phone, c.complainant_email,
    ...
2025-09-08 10:46:08,362 - db_manager - INFO - get_grievance_by_id completed in 0.01s. Rows: 1
2025-09-08 10:46:08,362 - db_manager - INFO - Transaction committed successfully
2025-09-08 10:46:08,363 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-08 10:46:08,363 - db_manager - DEBUG - get_grievance_by_id: grievance_id: {'grievance_id': 'GR-20250908-KOJH-A9F5-B', 'complainant_id': 'CM-20250908-KOJH-2D2D-B', 'grievance_categories': '{"Environmental - Air Pollution"}', 'grievance_summary': 'घरमा धुलो सबै ठाउँमा छ। बच्चाहरू धेरै खोक्ने भएका छन्।', 'grievance_description': 'dust everywhere in the house Kids are coughing a lot', 'grievance_claimed_amount': None, 'grievance_location': None, 'language_code': 'en', 'classification_status': 'pending', 'grievance_creation_date': datetime.datetime(2025, 9, 8, 10, 45, 29, 678038, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'grievance_modification_date': datetime.datetime(2025, 9, 8, 10, 45, 33, 696259, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'is_temporary': True, 'source': 'bot', 'complainant_full_name': None, 'complainant_phone': None, 'complainant_email': None, 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_municipality': None, 'complainant_ward': None, 'complainant_village': None, 'complainant_address': None}, results: [{'grievance_id': 'GR-20250908-KOJH-A9F5-B', 'complainant_id': 'CM-20250908-KOJH-2D2D-B', 'grievance_categories': '{"Environmental - Air Pollution"}', 'grievance_summary': 'घरमा धुलो सबै ठाउँमा छ। बच्चाहरू धेरै खोक्ने भएका छन्।', 'grievance_description': 'dust everywhere in the house Kids are coughing a lot', 'grievance_claimed_amount': None, 'grievance_location': None, 'language_code': 'en', 'classification_status': 'pending', 'grievance_creation_date': datetime.datetime(2025, 9, 8, 10, 45, 29, 678038, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'grievance_modification_date': datetime.datetime(2025, 9, 8, 10, 45, 33, 696259, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'is_temporary': True, 'source': 'bot', 'complainant_full_name': None, 'complainant_phone': None, 'complainant_email': None, 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_municipality': None, 'complainant_ward': None, 'complainant_village': None, 'complainant_address': None}]
2025-09-08 10:46:08,363 - db_manager - INFO - update_complainant: Updating complainant with ID: CM-20250908-KOJH-2D2D-B
2025-09-08 10:46:08,363 - db_manager - INFO - Connecting to database: grievance_db
2025-09-08 10:46:08,367 - db_manager - INFO - Starting database transaction
2025-09-08 10:46:08,367 - db_manager - INFO - Executing encrypt_field: SELECT encode(pgp_sym_encrypt(%s, %s), 'hex') AS encrypted...
2025-09-08 10:46:08,369 - db_manager - INFO - encrypt_field completed in 0.01s. Rows: 1
2025-09-08 10:46:08,370 - db_manager - INFO - Transaction committed successfully
2025-09-08 10:46:08,370 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-08 10:46:08,370 - db_manager - DEBUG - encrypted phone number Not provided at encrypt_complainant_data: c30d04070302e2880da2949fa77e75d23d01405f119cd20901f8bb3aaaaafbeda2c324b7af949174dab322bfc4bb000b51c9841d40027f426a921c18660a598da5ca5d87d2e204d4f151b27e4b72
2025-09-08 10:46:08,370 - db_manager - INFO - Connecting to database: grievance_db
2025-09-08 10:46:08,374 - db_manager - INFO - Starting database transaction
2025-09-08 10:46:08,374 - db_manager - INFO - Executing encrypt_field: SELECT encode(pgp_sym_encrypt(%s, %s), 'hex') AS encrypted...
2025-09-08 10:46:08,375 - db_manager - INFO - encrypt_field completed in 0.01s. Rows: 1
2025-09-08 10:46:08,375 - db_manager - INFO - Transaction committed successfully
2025-09-08 10:46:08,375 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-08 10:46:08,376 - db_manager - INFO - Connecting to database: grievance_db
2025-09-08 10:46:08,380 - db_manager - INFO - Starting database transaction
2025-09-08 10:46:08,380 - db_manager - INFO - Executing encrypt_field: SELECT encode(pgp_sym_encrypt(%s, %s), 'hex') AS encrypted...
2025-09-08 10:46:08,381 - db_manager - INFO - encrypt_field completed in 0.01s. Rows: 1
2025-09-08 10:46:08,381 - db_manager - INFO - Transaction committed successfully
2025-09-08 10:46:08,381 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-08 10:46:08,381 - db_manager - DEBUG - phone number Not provided hashed to d83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f at hash_sensitive_data
2025-09-08 10:46:08,381 - db_manager - DEBUG - encrypted and hashed data at encrypt_and_hash_sensitive_data: {'complainant_full_name': 'c30d0407030288b41962c68cca477ad23d01a2de835564174cc37fc056e549e25467860f193b90320c14c9368aad4acf75770b822cb9408d32b771e1a455d49e47bc5c99497a3a4d5389897994cd', 'complainant_phone': 'c30d04070302e2880da2949fa77e75d23d01405f119cd20901f8bb3aaaaafbeda2c324b7af949174dab322bfc4bb000b51c9841d40027f426a921c18660a598da5ca5d87d2e204d4f151b27e4b72', 'complainant_email': 'c30d0407030295382a9a42f9763479d23d0168f860743d369097ed5d63ed978aea162d5536a91bf0f4d1345766c84429121a2c61cb4135fef85e56479a844e2871ddd2c56fcfb29bae026b449b63', 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_phone_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'complainant_full_name_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'complainant_email_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f'}
2025-09-08 10:46:08,381 - db_manager - DEBUG - encrypted_data at update_complainant: {'complainant_full_name': 'c30d0407030288b41962c68cca477ad23d01a2de835564174cc37fc056e549e25467860f193b90320c14c9368aad4acf75770b822cb9408d32b771e1a455d49e47bc5c99497a3a4d5389897994cd', 'complainant_phone': 'c30d04070302e2880da2949fa77e75d23d01405f119cd20901f8bb3aaaaafbeda2c324b7af949174dab322bfc4bb000b51c9841d40027f426a921c18660a598da5ca5d87d2e204d4f151b27e4b72', 'complainant_email': 'c30d0407030295382a9a42f9763479d23d0168f860743d369097ed5d63ed978aea162d5536a91bf0f4d1345766c84429121a2c61cb4135fef85e56479a844e2871ddd2c56fcfb29bae026b449b63', 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_phone_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'complainant_full_name_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'complainant_email_hash': 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f'}
2025-09-08 10:46:08,381 - db_manager - DEBUG - execute_update values: ('c30d0407030288b41962c68cca477ad23d01a2de835564174cc37fc056e549e25467860f193b90320c14c9368aad4acf75770b822cb9408d32b771e1a455d49e47bc5c99497a3a4d5389897994cd', 'c30d04070302e2880da2949fa77e75d23d01405f119cd20901f8bb3aaaaafbeda2c324b7af949174dab322bfc4bb000b51c9841d40027f426a921c18660a598da5ca5d87d2e204d4f151b27e4b72', 'c30d0407030295382a9a42f9763479d23d0168f860743d369097ed5d63ed978aea162d5536a91bf0f4d1345766c84429121a2c61cb4135fef85e56479a844e2871ddd2c56fcfb29bae026b449b63', 'Koshi', 'Jhapa', 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'd83b9ff3c07a8390e2ea0a2af45fba37595da25f31b85ba625363ee98c0c796f', 'CM-20250908-KOJH-2D2D-B')
2025-09-08 10:46:08,382 - db_manager - DEBUG - execute_update query: UPDATE complainants SET complainant_full_name = %s, complainant_phone = %s, complainant_email = %s, complainant_province = %s, complainant_district = %s, complainant_phone_hash = %s, complainant_full_name_hash = %s, complainant_email_hash = %s WHERE complainant_id = %s
2025-09-08 10:46:08,382 - db_manager - INFO - Connecting to database: grievance_db
2025-09-08 10:46:08,386 - db_manager - INFO - Starting database transaction
2025-09-08 10:46:08,386 - db_manager - INFO - execute_update: Executing update query: UPDATE complainants SET complainant_full_name = %s, complainant_phone = %s, complainant_email = %s, ...
2025-09-08 10:46:08,387 - db_manager - INFO - execute_update: Update completed in 0.01s. Affected rows: 1
2025-09-08 10:46:08,388 - db_manager - INFO - Transaction committed successfully
2025-09-08 10:46:08,388 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-08 10:46:08,388 - db_manager - INFO - Complainant updated in db: CM-20250908-KOJH-2D2D-B
2025-09-08 10:46:08,388 - db_manager - INFO - update_grievance: Updating grievance with ID: GR-20250908-KOJH-A9F5-B
2025-09-08 10:46:08,388 - db_manager - DEBUG - execute_update values: ('dust everywhere in the house Kids are coughing a lot', 'GR-20250908-KOJH-A9F5-B')
2025-09-08 10:46:08,389 - db_manager - DEBUG - execute_update query: 
                    UPDATE grievances 
                    SET grievance_description = %s, grievance_modification_date = CURRENT_TIMESTAMP
                    WHERE grievance_id = %s
                    RETURNING grievance_id
                
2025-09-08 10:46:08,389 - db_manager - INFO - Connecting to database: grievance_db
2025-09-08 10:46:08,393 - db_manager - INFO - Starting database transaction
2025-09-08 10:46:08,393 - db_manager - INFO - execute_update: Executing update query: 
                    UPDATE grievances 
                    SET grievance_description = %s, grievanc...
2025-09-08 10:46:08,394 - db_manager - INFO - execute_update: Update completed in 0.01s. Affected rows: 1
2025-09-08 10:46:08,396 - db_manager - INFO - Transaction committed successfully
2025-09-08 10:46:08,396 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-08 10:46:08,396 - db_manager - INFO - update_grievance: Updated grievance with ID: GR-20250908-KOJH-A9F5-B, rows affected: 1
2025-09-08 10:46:08,396 - db_manager - INFO - Grievance updated in db: GR-20250908-KOJH-A9F5-B
2025-09-08 10:46:08,396 - db_manager - INFO - Connecting to database: grievance_db
2025-09-08 10:46:08,401 - db_manager - INFO - Starting database transaction
2025-09-08 10:46:08,401 - db_manager - INFO - Executing get_grievance_files: 
            SELECT file_id, file_name, file_type, file_size, upload_timestamp
            FROM file...
2025-09-08 10:46:08,402 - db_manager - INFO - get_grievance_files completed in 0.01s. Rows: 0
2025-09-08 10:46:08,402 - db_manager - INFO - Transaction committed successfully
2025-09-08 10:46:08,402 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-08 10:46:08,402 - db_manager - INFO - Connecting to database: grievance_db
2025-09-08 10:46:08,406 - db_manager - INFO - Starting database transaction
2025-09-08 10:46:08,406 - db_manager - INFO - Executing get_grievance_files: 
            SELECT file_id, file_name, file_type, file_size, upload_timestamp
            FROM file...
2025-09-08 10:46:08,407 - db_manager - INFO - get_grievance_files completed in 0.01s. Rows: 0
2025-09-08 10:46:08,407 - db_manager - INFO - Transaction committed successfully
2025-09-08 10:46:08,407 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-08 10:46:08,449 - db_manager - INFO - Connecting to database: grievance_db
2025-09-08 10:46:08,454 - db_manager - INFO - Starting database transaction
2025-09-08 10:46:08,454 - db_manager - INFO - Executing get_grievance_by_id: 
                SELECT g.*, c.complainant_full_name, c.complainant_phone, c.complainant_email,
    ...
2025-09-08 10:46:08,456 - db_manager - INFO - get_grievance_by_id completed in 0.01s. Rows: 1
2025-09-08 10:46:08,457 - db_manager - INFO - Transaction committed successfully
2025-09-08 10:46:08,457 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-08 10:46:08,457 - db_manager - DEBUG - get_grievance_by_id: grievance_id: {'grievance_id': 'GR-20250908-KOJH-A9F5-B', 'complainant_id': 'CM-20250908-KOJH-2D2D-B', 'grievance_categories': '{"Environmental - Air Pollution"}', 'grievance_summary': 'घरमा धुलो सबै ठाउँमा छ। बच्चाहरू धेरै खोक्ने भएका छन्।', 'grievance_description': 'dust everywhere in the house Kids are coughing a lot', 'grievance_claimed_amount': None, 'grievance_location': None, 'language_code': 'en', 'classification_status': 'pending', 'grievance_creation_date': datetime.datetime(2025, 9, 8, 10, 45, 29, 678038, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'grievance_modification_date': datetime.datetime(2025, 9, 8, 10, 46, 8, 393491, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'is_temporary': True, 'source': 'bot', 'complainant_full_name': 'c30d0407030288b41962c68cca477ad23d01a2de835564174cc37fc056e549e25467860f193b90320c14c9368aad4acf75770b822cb9408d32b771e1a455d49e47bc5c99497a3a4d5389897994cd', 'complainant_phone': 'c30d04070302e2880da2949fa77e75d23d01405f119cd20901f8bb3aaaaafbeda2c324b7af949174dab322bfc4bb000b51c9841d40027f426a921c18660a598da5ca5d87d2e204d4f151b27e4b72', 'complainant_email': 'c30d0407030295382a9a42f9763479d23d0168f860743d369097ed5d63ed978aea162d5536a91bf0f4d1345766c84429121a2c61cb4135fef85e56479a844e2871ddd2c56fcfb29bae026b449b63', 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_municipality': None, 'complainant_ward': None, 'complainant_village': None, 'complainant_address': None}, results: [{'grievance_id': 'GR-20250908-KOJH-A9F5-B', 'complainant_id': 'CM-20250908-KOJH-2D2D-B', 'grievance_categories': '{"Environmental - Air Pollution"}', 'grievance_summary': 'घरमा धुलो सबै ठाउँमा छ। बच्चाहरू धेरै खोक्ने भएका छन्।', 'grievance_description': 'dust everywhere in the house Kids are coughing a lot', 'grievance_claimed_amount': None, 'grievance_location': None, 'language_code': 'en', 'classification_status': 'pending', 'grievance_creation_date': datetime.datetime(2025, 9, 8, 10, 45, 29, 678038, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'grievance_modification_date': datetime.datetime(2025, 9, 8, 10, 46, 8, 393491, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'is_temporary': True, 'source': 'bot', 'complainant_full_name': 'c30d0407030288b41962c68cca477ad23d01a2de835564174cc37fc056e549e25467860f193b90320c14c9368aad4acf75770b822cb9408d32b771e1a455d49e47bc5c99497a3a4d5389897994cd', 'complainant_phone': 'c30d04070302e2880da2949fa77e75d23d01405f119cd20901f8bb3aaaaafbeda2c324b7af949174dab322bfc4bb000b51c9841d40027f426a921c18660a598da5ca5d87d2e204d4f151b27e4b72', 'complainant_email': 'c30d0407030295382a9a42f9763479d23d0168f860743d369097ed5d63ed978aea162d5536a91bf0f4d1345766c84429121a2c61cb4135fef85e56479a844e2871ddd2c56fcfb29bae026b449b63', 'complainant_province': 'Koshi', 'complainant_district': 'Jhapa', 'complainant_municipality': None, 'complainant_ward': None, 'complainant_village': None, 'complainant_address': None}]
2025-09-08 10:46:15,834 - db_manager - INFO - Connecting to database: grievance_db
2025-09-08 10:46:15,840 - db_manager - INFO - Starting database transaction
2025-09-08 10:46:15,840 - db_manager - INFO - Executing get_complainant_id_from_grievance_id: 
            SELECT complainant_id
            FROM grievances
            WHERE grievance_id = %s
 ...
2025-09-08 10:46:15,841 - db_manager - INFO - get_complainant_id_from_grievance_id completed in 0.01s. Rows: 1
2025-09-08 10:46:15,841 - db_manager - INFO - Transaction committed successfully
2025-09-08 10:46:15,841 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-08 10:46:15,841 - db_manager - INFO - update_complainant: Updating complainant with ID: CM-20250908-KOJH-2D2D-B
2025-09-08 10:46:15,841 - db_manager - DEBUG - encrypted and hashed data at encrypt_and_hash_sensitive_data: {}
2025-09-08 10:46:15,841 - db_manager - DEBUG - encrypted_data at update_complainant: {}
2025-09-08 10:46:15,841 - db_manager - DEBUG - No complainant field to update
2025-09-08 10:46:15,841 - db_manager - INFO - Complainant updated in db: GR-20250908-KOJH-A9F5-B
2025-09-08 10:46:15,841 - db_manager - INFO - update_grievance: Updating grievance with ID: GR-20250908-KOJH-A9F5-B
2025-09-08 10:46:15,841 - db_manager - DEBUG - execute_update values: (['{"Environmental - Air Pollution"}'], 'GR-20250908-KOJH-A9F5-B')
2025-09-08 10:46:15,841 - db_manager - DEBUG - execute_update query: 
                    UPDATE grievances 
                    SET grievance_categories = %s, grievance_modification_date = CURRENT_TIMESTAMP
                    WHERE grievance_id = %s
                    RETURNING grievance_id
                
2025-09-08 10:46:15,841 - db_manager - INFO - Connecting to database: grievance_db
2025-09-08 10:46:15,846 - db_manager - INFO - Starting database transaction
2025-09-08 10:46:15,846 - db_manager - INFO - execute_update: Executing update query: 
                    UPDATE grievances 
                    SET grievance_categories = %s, grievance...
2025-09-08 10:46:15,847 - db_manager - INFO - execute_update: Update completed in 0.01s. Affected rows: 1
2025-09-08 10:46:15,849 - db_manager - INFO - Transaction committed successfully
2025-09-08 10:46:15,850 - db_manager - INFO - Database connection closed. Duration: 0.01s
2025-09-08 10:46:15,850 - db_manager - INFO - update_grievance: Updated grievance with ID: GR-20250908-KOJH-A9F5-B, rows affected: 1
2025-09-08 10:46:15,850 - db_manager - INFO - Grievance updated in db: GR-20250908-KOJH-A9F5-B
