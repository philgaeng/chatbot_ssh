<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Accessible Grievance Reporting</title>
    <link rel="stylesheet" href="/shared/styles/common.css">
    <link rel="stylesheet" href="/accessible/styles.css">
    <link rel="apple-touch-icon" sizes="180x180" href="/shared/images/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/shared/images/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/shared/images/favicon-16x16.png">
    <link rel="manifest" href="/shared/images/site.webmanifest">
    <meta name="description" content="Accessible grievance reporting system for the Department of Roads, Nepal">
</head>
<body>
    <a href="#main" class="skip-link">Skip to main content</a>

    <div class="container">
        <header>
            <img src="/shared/images/DOR-logo.png" alt="Department of Roads Logo" width="200">
            <h1>Accessible Grievance Reporting</h1>
        </header>

        <main id="main">
            <div id="step1" class="step" role="region" aria-labelledby="step1-heading">
                <h2 id="step1-heading">Step 1: Record Your Grievance</h2>
                <button class="read-btn" data-target="step1" aria-label="Read Step 1 instructions">ðŸ”Š</button>
                <div class="content">
                    <p>Please explain your grievance related to roads or transportation.</p>
                    <button id="recordBtn1" class="record-btn" aria-label="Record your grievance">Record Grievance</button>
                    <div id="status1" class="status" hidden>Recording: <span>0:00</span></div>
                    <div id="playback1" class="playback" hidden>
                        <audio controls></audio>
                        <button class="retry-btn secondary-btn" aria-label="Retry recording your grievance">Retry</button>
                        <button class="next-btn primary-btn" aria-label="Continue to next step">Continue</button>
                    </div>
                </div>
            </div>

            <!-- Split Step 2 into two parts -->
            <div id="step2a" class="step" hidden role="region" aria-labelledby="step2a-heading">
                <h2 id="step2a-heading">Step 2A: Your Name</h2>
                <button class="read-btn" data-target="step2a" aria-label="Read Step 2A instructions">ðŸ”Š</button>
                <div class="content">
                    <p>Please state your full name.</p>
                    <button id="recordBtn2a" class="record-btn" aria-label="Record your full name">Record Full Name</button>
                    <div id="status2a" class="status" hidden>Recording: <span>0:00</span></div>
                    <div id="playback2a" class="playback" hidden>
                        <audio controls></audio>
                        <button class="retry-btn secondary-btn" aria-label="Retry recording your name">Retry</button>
                        <button class="next-btn primary-btn" aria-label="Continue to next step">Continue</button>
                    </div>
                </div>
            </div>

            <div id="step2b" class="step" hidden role="region" aria-labelledby="step2b-heading">
                <h2 id="step2b-heading">Step 2B: Contact Number</h2>
                <button class="read-btn" data-target="step2b" aria-label="Read Step 2B instructions">ðŸ”Š</button>
                <div class="content">
                    <p>Please state your phone number.</p>
                    <button id="recordBtn2b" class="record-btn" aria-label="Record your phone number">Record Phone Number</button>
                    <div id="status2b" class="status" hidden>Recording: <span>0:00</span></div>
                    <div id="playback2b" class="playback" hidden>
                        <audio controls></audio>
                        <button class="retry-btn secondary-btn" aria-label="Retry recording your phone number">Retry</button>
                        <button class="next-btn primary-btn" aria-label="Continue to next step">Continue</button>
                    </div>
                </div>
            </div>

            <!-- Split Step 3 into three parts -->
            <div id="step3a" class="step" hidden role="region" aria-labelledby="step3a-heading">
                <h2 id="step3a-heading">Step 3A: Municipality</h2>
                <button class="read-btn" data-target="step3a" aria-label="Read Step 3A instructions">ðŸ”Š</button>
                <div class="content">
                    <p>Please state your municipality.</p>
                    <button id="recordBtn3a" class="record-btn" aria-label="Record your municipality">Record Municipality</button>
                    <div id="status3a" class="status" hidden>Recording: <span>0:00</span></div>
                    <div id="playback3a" class="playback" hidden>
                        <audio controls></audio>
                        <button class="retry-btn secondary-btn" aria-label="Retry recording your municipality">Retry</button>
                        <button class="next-btn primary-btn" aria-label="Continue to next step">Continue</button>
                    </div>
                </div>
            </div>

            <div id="step3b" class="step" hidden role="region" aria-labelledby="step3b-heading">
                <h2 id="step3b-heading">Step 3B: Village</h2>
                <button class="read-btn" data-target="step3b" aria-label="Read Step 3B instructions">ðŸ”Š</button>
                <div class="content">
                    <p>Please state your village name.</p>
                    <button id="recordBtn3b" class="record-btn" aria-label="Record your village">Record Village</button>
                    <div id="status3b" class="status" hidden>Recording: <span>0:00</span></div>
                    <div id="playback3b" class="playback" hidden>
                        <audio controls></audio>
                        <button class="retry-btn secondary-btn" aria-label="Retry recording your village">Retry</button>
                        <button class="next-btn primary-btn" aria-label="Continue to next step">Continue</button>
                    </div>
                </div>
            </div>

            <div id="step3c" class="step" hidden role="region" aria-labelledby="step3c-heading">
                <h2 id="step3c-heading">Step 3C: Street Address</h2>
                <button class="read-btn" data-target="step3c" aria-label="Read Step 3C instructions">ðŸ”Š</button>
                <div class="content">
                    <p>Please state your street address or location details.</p>
                    <button id="recordBtn3c" class="record-btn" aria-label="Record your street address">Record Street Address</button>
                    <div id="status3c" class="status" hidden>Recording: <span>0:00</span></div>
                    <div id="playback3c" class="playback" hidden>
                        <audio controls></audio>
                        <button class="retry-btn secondary-btn" aria-label="Retry recording your street address">Retry</button>
                        <button class="next-btn primary-btn" aria-label="Submit your grievance">Submit</button>
                    </div>
                </div>
            </div>

            <div id="result" class="step" hidden role="region" aria-labelledby="result-heading">
                <h2 id="result-heading">Your grievance is submitted</h2>
                <div class="content">
                    <p id="resultMessage"></p>
                    <p id="grievanceId">Your grievance ID is <span></span></p>
                    <p>Please save this ID for your reference.</p>
                    <button id="newBtn" class="primary-btn" aria-label="Start a new grievance report">New Grievance</button>
                </div>
            </div>
        </main>

        <div class="controls" role="toolbar" aria-label="Accessibility controls">
            <button id="readBtn" class="secondary-btn" aria-label="Read current page content">Read Page</button>
            <div class="rate-control">
                <label for="rate">Speed:</label>
                <input type="range" id="rate" min="0.5" max="2" step="0.1" value="1" aria-label="Speech rate control">
                <span id="rateValue">1.0x</span>
            </div>
            <button id="fontBtn" class="secondary-btn" aria-label="Increase font size">Font Size</button>
            <button id="contrastBtn" class="secondary-btn" aria-label="Toggle high contrast mode">Contrast</button>
            <button id="helpBtn" class="secondary-btn" aria-label="Show help and instructions">Help</button>
        </div>

        <dialog id="helpDialog" aria-labelledby="helpDialogHeading">
            <h2 id="helpDialogHeading">Help & Instructions</h2>
            <p>Record your grievance in these steps:</p>
            <ol>
                <li>Explain your grievance</li>
                <li>Provide your full name</li>
                <li>Provide your phone number</li>
                <li>State your municipality</li>
                <li>State your village</li>
                <li>State your street address</li>
            </ol>
            <p>Accessibility features available:</p>
            <ul>
                <li>Use the "Read Page" button to hear page contents</li>
                <li>Click the speaker icon (ðŸ”Š) next to each step to hear instructions</li>
                <li>Adjust the speech rate using the slider</li>
                <li>Increase font size with the "Font Size" button</li>
                <li>Toggle high contrast mode with the "Contrast" button</li>
            </ul>
            <button class="primary-btn" aria-label="Close help dialog">Close</button>
        </dialog>
        
        <footer>
            <p>&copy; 2025 Department of Roads, Nepal. All rights reserved.</p>
        </footer>
    </div>

    <script src="/shared/scripts/utils.js"></script>
    <script src="/accessible/config.js"></script>
    <script src="/accessible/app.js"></script>
</body>
</html> 